console.log("gvis 0.2.4-dev created on: 12/14/2018, 8:07:58 PM license verified: tigergraph : development");

window.gsql = window.gsql || {}; window.gsql.gvis = "350f3ac5590fceb0a6287c4c133602b2e46b5fd1%0A";
/*! GVIS.Version : 0.2.4-dev */
/*!
 * Copyright (c) TigerGraph, Inc. 2017. All Rights Reserved. Unauthorized copying of this file, via any medium is strictly prohibited.
 *  * Proprietary and confidential 
 * TigerGraph : http://tigergraph.com/
 * 
 * 3rd party software license acknowledgement:
 *   d3.js
 *     version : ^4.0.0
 *     author : Mike Bostock, Jeffrey Heer, Vadim Ogievetsky, and community
 *     license : BSD
 *     https://github.com/d3/d3
 * 
 *   lodash.js
 *     version : ^4.0.0
 *     author : John-David Dalton
 *     license : MIT
 *     https://github.com/lodash/lodash
 * 
 *   moment.js
 *     author : Tim Wood
 *     license : MIT
 *     github.com/moment/moment/
 * 
 *   Moment TimeZone 
 *     author : Tim Wood
 *     license : MIT
 *     github.com/moment/moment-timezone/
 * 
 *   Leaflet.js
 *     author : Vladimir Agafonkin
 *     license : BSD
 *     github.com/Leaflet/Leaflet/blob/master/LICENSE
 * 
 *   CssColorParser.js
 *     author : Dean McNamee, 2012.
 *     license : MIT
 *     github.com/deanm/css-color-parser-js
 * 
 *   SHA-256 implementation in JavaScript
 *     author : Chris Veness 
 *     license: MIT
 *     github.com/chrisveness/crypto
 * 
 *   jsrsasign (RSA-Sign JavaScript Library)
 *     version : 4.7.2
 *     author : Kenji Urushima
 *     license : MIT
 *     kjur.github.io/jsrsasign/
 * 
 *   jsbn (RSA and ECC in JavaScript)
 *     version : 1.4
 *     author : Tom Wu
 *     license : BSD
 *     www-cs-students.stanford.edu/~tjw/jsbn/
 * 
 *   echarts (A powerful charting and visualization library for browser)
 *     version : 3.4.0
 *     author : Baidu Inc.
 *     license : AS IS
 *     Copyright (c) 2013, Baidu Inc. All rights reserved.
 * 
 *     Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
 * 
 *     Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 *     Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 *     THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 *     The views and conclusions contained in the software and documentation are those of the authors and should not be interpreted as representing official policies, either expressed or implied, of the FreeBSD Project.
 *     http://echarts.baidu.com/
 * 
 * 
 * 
 * 
 * 
 * 
 */
var gvis=function(modules){function __webpack_require__(moduleId){
if(installedModules[moduleId])return installedModules[moduleId].exports;
var module=installedModules[moduleId]={exports:{},id:moduleId,
loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),
module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,
__webpack_require__.c=installedModules,__webpack_require__.p="",
__webpack_require__(0)}([function(module,exports,__webpack_require__){
"use strict";var graphchart_1=__webpack_require__(1);exports.GraphChart=graphchart_1.GraphChart;
var graphchart_event_1=__webpack_require__(34);exports.GraphChartEvent=graphchart_event_1.GraphChartEvent;
var graphchart_data_1=__webpack_require__(11);exports.GraphChartData=graphchart_data_1.GraphChartData;
var graphchart_render_1=__webpack_require__(21);exports.GraphChartRender=graphchart_render_1.GraphChartRender;
var graphchart_layout_1=__webpack_require__(35);exports.GraphChartLayout=graphchart_layout_1.GraphChartLayout;
var graphchart_style_1=__webpack_require__(17);exports.GraphStyle=graphchart_style_1.GraphStyle;
var linechart_1=__webpack_require__(37);exports.LineChart=linechart_1.LineChart;
var linechart_data_1=__webpack_require__(42);exports.LineChartData=linechart_data_1.LineChartData;
var linechart_event_1=__webpack_require__(43);exports.LineChartEvent=linechart_event_1.LineChartEvent;
var linechart_render_1=__webpack_require__(38);exports.LineChartRender=linechart_render_1.LineChartRender;
var linechart_style_1=__webpack_require__(39);exports.LineChartStyle=linechart_style_1.LineChartStyle;
var barchart_1=__webpack_require__(44);exports.BarChart=barchart_1.BarChart;
var barchart_data_1=__webpack_require__(47);exports.BarChartData=barchart_data_1.BarChartData;
var barchart_event_1=__webpack_require__(48);exports.BarChartEvent=barchart_event_1.BarChartEvent;
var barchart_render_1=__webpack_require__(45);exports.BarChartRender=barchart_render_1.BarChartRender;
var barchart_style_1=__webpack_require__(46);exports.BarChartStyle=barchart_style_1.BarChartStyle;
var piechart_1=__webpack_require__(49);exports.PieChart=piechart_1.PieChart;
var piechart_event_1=__webpack_require__(52);exports.PieChartEvent=piechart_event_1.PieChartEvent;
var piechart_render_1=__webpack_require__(50);exports.PieChartRender=piechart_render_1.PieChartRender;
var piechart_style_1=__webpack_require__(51);exports.PieChartStyle=piechart_style_1.PieChartStyle;
var icon_1=__webpack_require__(28);exports.ICON=icon_1.ICON,exports.builtinIcons=icon_1.builtinIcons,
exports.otherIcons=icon_1.otherIcons;var localization_1=__webpack_require__(7);
exports.Localization=localization_1.Localization;var exception_1=__webpack_require__(5);
exports.GException=exception_1.GException;var utils_1=__webpack_require__(8);
exports.Utils=utils_1.Utils;var color_1=__webpack_require__(4);
exports.Color=color_1.Color},function(module,exports,__webpack_require__){
"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},base_api_1=__webpack_require__(2),parser_1=__webpack_require__(6),exception_1=__webpack_require__(5),localization_1=__webpack_require__(7),graphchart_data_1=__webpack_require__(11),graphchart_render_1=__webpack_require__(21),graphchart_event_1=__webpack_require__(34),graphchart_layout_1=__webpack_require__(35),GraphChart=function(_super){
function GraphChart(options){var _this=_super.call(this)||this;
_this.typeName="Graph Chart";try{_this.options=options||{},_this.container=_this.options.render.container,
_this.language=new localization_1.Localization(_this.options.language),
_this.parser=new parser_1.GraphParser(_this),_this.data=new graphchart_data_1.GraphChartData(_this),
_this.render=new graphchart_render_1.GraphChartRender(_this),
_this.layout=new graphchart_layout_1.GraphChartLayout(_this),
_this.event=new graphchart_event_1.GraphChartEvent(_this)}catch(err){
console.log(err),console.error(err.toString())}return console.log("graph chart is loaded."),
_this}return __extends(GraphChart,_super),GraphChart.prototype.paint=function(){
return this.render.paint(),this},GraphChart.prototype.update=function(){
return this.render.update(),this},GraphChart.prototype.updateCoordinate=function(){
return this.render.updateCoordinate(),this},GraphChart.prototype.addData=function(externalData,externalDataType,nodeOption,linkOption){
void 0===externalDataType&&(externalDataType="gquery"),void 0===nodeOption&&(nodeOption="extend");
var tempOption={node:nodeOption,link:linkOption},externalGraph=this.parser.getParser(externalDataType)(externalData);
return this.data.addGraph(externalGraph,tempOption),this},GraphChart.prototype.dropData=function(externalData,externalDataType){
void 0===externalDataType&&(externalDataType="gquery");var externalGraph=this.parser.getParser(externalDataType)(externalData);
return this.data.dropGraph(externalGraph),this},GraphChart.prototype.reloadData=function(externalData,externalDataType){
void 0===externalDataType&&(externalDataType="gquery");var externalGraph=this.parser.getParser(externalDataType)(externalData);
return this.data.reloadGraph(externalGraph),this},GraphChart.prototype.resetData=function(externalData,externalDataType){
void 0===externalDataType&&(externalDataType="gquery");var externalGraph=this.parser.getParser(externalDataType)(externalData);
return this.data.resetGraph(externalGraph),this},GraphChart.prototype.redraw=function(){
return this.render.redraw(),this},GraphChart.prototype.dropNode=function(exType,exID,option){
void 0===option&&(option=!1);var result=this.data.dropNode(exType,exID,option);
return this.update(),result},GraphChart.prototype.dropLink=function(exType,sourceExType,sourceExID,targetExType,targetExID,option){
void 0===option&&(option=!1);var result=this.data.dropLink(exType,sourceExType,sourceExID,targetExType,targetExID,option);
return this.update(),result},GraphChart.prototype.closeNode=function(exType,exID){
return this.render.closeNode(exType,exID),this},GraphChart.prototype.collapseNode=function(exType,exID){
return this.render.collapseNode(exType,exID),this},GraphChart.prototype.expandNode=function(exType,exID){
return this.render.expandNode(exType,exID),this},GraphChart.prototype.hideNode=function(exType,exID){
return this.render.hideNode(exType,exID),this},GraphChart.prototype.showNode=function(exType,exID){
return this.render.showNode(exType,exID),this},GraphChart.prototype.lockNode=function(node,x,y){
return void 0!==x&&(node.x=x),void 0!==y&&(node.y=y),this.render.lockNode(node.id,node.x,node.y),
this},GraphChart.prototype.unlockNode=function(node){return this.render.unlockNode(node.id),
this},GraphChart.prototype.lowlightNode=function(exType,exID){
var targetNode=this.data.getNodes(exType,exID);return targetNode.styles.isLowlighted=!0,
this},GraphChart.prototype.unLowlightNode=function(exType,exID){
var targetNode=this.data.getNodes(exType,exID);return targetNode.styles.isLowlighted=!1,
this},GraphChart.prototype.lowlightLink=function(exType,sourceExType,sourceExID,targetExType,targetExID){
var targetLink=this.data.getLinks(exType,sourceExType,sourceExID,targetExType,targetExID);
return targetLink.styles.isLowlighted=!0,this},GraphChart.prototype.unLowlightLink=function(exType,sourceExType,sourceExID,targetExType,targetExID){
var targetLink=this.data.getLinks(exType,sourceExType,sourceExID,targetExType,targetExID);
return targetLink.styles.isLowlighted=!1,this},GraphChart.prototype.clear=function(){
return this.data.dropAll(),this.render.update(),this},GraphChart.prototype["export"]=function(name,type){
return void 0===type&&(type="pdf"),this.render["export"](name,type),
this},GraphChart.prototype.getNodes=function(exType,exID){return this.data.getNodes(exType,exID);
},GraphChart.prototype.getNeighbors=function(node){return this.data.getNeighbors(node.exType,node.exID);
},GraphChart.prototype.getLinks=function(exType,sourceExType,sourceExID,targetExType,targetExID){
return this.data.getLinks(exType,sourceExType,sourceExID,targetExType,targetExID);
},GraphChart.prototype.getData=function(){return this.data.getData();
},GraphChart.prototype.getSelection=function(){return{nodes:this.data.getSelectedNodes(),
links:this.data.getSelectedLinks()}},GraphChart.prototype.setSelection=function(selected){
return this.data.setSelection(selected||[]),this},GraphChart.prototype.unselectAllElements=function(){
return this.render.unselectAllElements(),this},GraphChart.prototype.exportLegends=function(){
return{nodes:this.data.getNodeAttributes(),links:this.data.getLinkAttributes()
}},GraphChart.prototype.on=function(event,callback){return this.event.setEventHandler(event,callback),
this},GraphChart.prototype.off=function(event){return this.event.defaultEventHandler(event),
this},GraphChart.prototype.showNodeLabels=function(exType,exID,labels){
return this.render.showNodeLabels(exType,exID,labels),this},GraphChart.prototype.showNodeLabelsByType=function(exType,labels){
return this.render.showNodeLabelsByType(exType,labels),this},
GraphChart.prototype.hideNodeLabels=function(exType,exID,labels){
return this.render.hideNodeLabels(exType,exID,labels),this},GraphChart.prototype.hideNodeLabelsByType=function(exType,labels){
return this.render.hideNodeLabelsByType(exType,labels),this},
GraphChart.prototype.hideAllNodeLabels=function(){return this.render.hideAllNodeLabels(),
this},GraphChart.prototype.showLinkLabels=function(exType,sourceExType,sourceExID,targetExType,targetExID,labels){
return this.render.showLinkLabels(exType,sourceExType,sourceExID,targetExType,targetExID,labels),
this},GraphChart.prototype.showLinkLabelsByType=function(exType,labels){
return this.render.showLinkLabelsByType(exType,labels),this},
GraphChart.prototype.hideLinkLabels=function(exType,sourceExType,sourceExID,targetExType,targetExID,labels){
return this.render.hideLinkLabels(exType,sourceExType,sourceExID,targetExType,targetExID,labels),
this},GraphChart.prototype.hideLinkLabelsByType=function(exType,labels){
return this.render.hideLinkLabelsByType(exType,labels),this},
GraphChart.prototype.hideAllLinkLabels=function(){return this.render.hideAllLinkLabels(),
this},GraphChart.prototype.zoomIn=function(){return this.render.zoomIn(),
this},GraphChart.prototype.zoomOut=function(){return this.render.zoomOut(),
this},GraphChart.prototype.autoFit=function(){return this.render.autoFit(),
this},GraphChart.prototype.scrollIntoView=function(nodes){return void 0===nodes&&(nodes=[]),
this.render.scrollIntoView(nodes.map(function(n){return n.id})),
this},GraphChart.prototype.centerView=function(){return this.render.centerView(),
this},GraphChart.prototype.updateSize=function(){return this.render.updateSize(),
this},GraphChart.prototype.fullscreen=function(isFullscreen){
return this.render.fullscreen(isFullscreen),this},GraphChart.prototype.setLayout=function(layoutName){
return this.layout.setLayout(layoutName),this},GraphChart.prototype.addLayout=function(layoutName,callback){
return this.layout.addLayout(layoutName,callback),this},GraphChart.prototype.overwriteLayout=function(layoutName,callback){
return this.layout.overwriteLayout(layoutName,callback),this},
GraphChart.prototype.runLayout=function(layoutName,autoFit){return this.layout.runLayout(layoutName),
autoFit?this.render.update().autoFit():this.render.update(),this;
},GraphChart.prototype.addParser=function(parserName,callback){
return this.parser.addParser(parserName,callback),this},GraphChart.prototype.getParser=function(parserName){
return this.parser.getParser(parserName)},GraphChart.prototype.updateParser=function(parserName,callback){
return this.parser.updateParser(parserName,callback),this},GraphChart.prototype.updateSettings=function(options){
for(var key in options)if(Object.prototype.hasOwnProperty.call(options,key))switch(key){
case"area":this.render.updateAreaSettings(options.area);break;
case"node":break;case"link":break;default:console.error(new exception_1.GException(2001,key+" is an unknow setting.").toString());
}return this},GraphChart.prototype.setRoot=function(exType,exID){
return this.layout.setRoot(exType,exID),this},GraphChart.prototype.getRoot=function(){
return this.layout.getRoot()},GraphChart.prototype.addRoot=function(exType,exID){
return this.layout.addRoot(exType,exID),this},GraphChart.prototype.getRoots=function(){
return this.layout.getRoots()},GraphChart.prototype.cleanRoots=function(){
return this.layout.clear(),this},GraphChart.prototype.translateNodes=function(nodes){
var _this=this;return(nodes||[]).map(function(node){return _this.language.translateOneNode(node);
})},GraphChart.prototype.translateLinks=function(links){var _this=this;
return(links||[]).map(function(link){return _this.language.translateOneLink(link);
})},GraphChart.prototype.translateForNode=function(vertexType,attribute,value){
return this.language.getVertexString.apply(this.language,arguments);
},GraphChart.prototype.translateForLink=function(edgeType,attribute,value){
return this.language.getEdgeString.apply(this.language,arguments);
},GraphChart.prototype.hideMenu=function(){return this.render.hideMenu(),
this},GraphChart.prototype.setIcon=function(type,icon){return this.render.setIcon(type,icon),
this},GraphChart.prototype.setColor=function(type,color){return this.render.engine.color.setColor(type,color),
this},GraphChart.prototype.addNodePreStyle=function(preStyle){
return this.render.addPreStyle({target:"node",obj:preStyle}),
this},GraphChart.prototype.addLinkPreStyle=function(preStyle){
return this.render.addPreStyle({target:"link",obj:preStyle}),
this},GraphChart.prototype.getNodesByExpression=function(condition){
var _this=this,nodes=this.getNodes();return void 0!==nodes.filter?nodes.filter(function(node){
return _this.data.evaluateNodeExpression(node,condition)}):[];
},GraphChart.prototype.getLinksByExpression=function(condition){
var _this=this,links=this.getLinks();return void 0!==links.filter?links.filter(function(link){
return _this.data.evaluateLinkExpression(link,condition)}):[];
},GraphChart.prototype.getNodeShape=function(node){return this.render.getNodeShape(node.id);
},GraphChart.prototype.getLinkShape=function(link){return this.render.getLinkShape(link.id);
},GraphChart.prototype.setNodesDraggable=function(nodes,draggable){
return void 0===draggable&&(draggable=!0),void 0!==nodes.forEach&&nodes.forEach(function(node){
node.styles.base.draggable=draggable}),this},GraphChart.prototype.setNodesInvisible=function(nodes,invisible){
return void 0===invisible&&(invisible=!0),this.render.setNodesInvisible(nodes,invisible),
this},GraphChart.prototype.setLinksInvisible=function(links,invisible){
return void 0===invisible&&(invisible=!0),this.render.setLinksInvisible(links,invisible),
this},GraphChart.prototype.runStressTest=function(NumOfNodes){
function samepleGraphGenerator(g,prefix,N,D){var L=2*N,T=5;prefix+="_",
D>=N&&(D=N-1);for(var i=0;i<N;++i)g.nodes.push({type:""+Math.floor(i%T),
id:prefix+i,attrs:{attr0:Math.random(),attr1:Math.random()},styles:{
r:50*Math.random()+5},labels:{id:!0,type:!0,attr0:!0}});for(var i=0;i<L;++i){
var s=Math.floor(Math.random()*N),t=(s+1+Math.random()*D)%N,link={
source:{type:""+Math.floor(s%T),id:prefix+Math.floor(s)},target:{
type:""+Math.floor(t%T),id:prefix+Math.floor(t)},directed:Math.random()<.5,
type:""+Math.floor(i%T),attrs:{eattr0:Math.random(),eattr1:"1"+Math.random()
},styles:{},labels:{eattr0:!0}};g.links.push(link)}}void 0===NumOfNodes&&(NumOfNodes=500);
var graph={nodes:[],links:[]};return samepleGraphGenerator(graph,"a",Math.floor(.1*NumOfNodes),30),
samepleGraphGenerator(graph,"b",Math.floor(.2*NumOfNodes),10),
samepleGraphGenerator(graph,"c",Math.floor(.7*NumOfNodes),20),
this.reloadData(graph,"static").runLayout("force").update(),this;
},GraphChart}(base_api_1.BaseApi);exports.GraphChart=GraphChart;
},function(module,exports,__webpack_require__){"use strict";var base_style_1=__webpack_require__(3),instance=0,BaseApi=function(){
function BaseApi(){this.version="0.2.3",this.typeName="GVIS Chart",
this.instanceIndex=instance++,this.render={},this.render.style=new base_style_1.BaseStyle;
}return BaseApi.prototype.setColorByName=function(name,color){
return this.render.style.setColorByName(name,color),this},BaseApi.prototype.getColorByName=function(name){
return this.render.style.getColorByName(name)},BaseApi}();exports.BaseApi=BaseApi;
},function(module,exports,__webpack_require__){"use strict";var color_1=__webpack_require__(4),BaseStyle=function(){
function BaseStyle(){this.color=new color_1.Color("c10"),this.customizedColor={},
this.defaultChartStyle={backgroundColor:"rgba(245, 245, 245, 0.5)",
color:this.color.getColorArray(),textStyle:{color:"#111",fontStyle:"normal",
fontWeight:"normal",fontFamily:"sans-serief",fontSize:12},grid:{
show:!1,zlevel:0,z:2,left:50,top:20,right:30,bottom:50,width:"auto",
height:"auto",containLabel:!1,backgroundColor:"transparent",borderColor:"#ccc",
borderWidth:1,shadowOffsetX:0,shadowOffsetY:0},title:{text:"",
link:"",target:"blank",subtext:"",sublink:"",subtarget:"blank",
padding:5,itemGap:5,zlevel:0,z:2,left:"center",top:15,right:"auto",
bottom:"auto",backgroundColor:"transparent",shadowOffsetX:0,shadowOffsetY:0
},tooltip:{trigger:"axis",backgroundColor:"rgba(50,50,50,0.8)",
borderColor:"#333",borderWidth:0,padding:5,axisPointer:{}},legend:{
show:!1,zlevel:0,z:2,left:"center",top:"auto",right:"auto",bottom:5,
width:"auto",height:"auto",orient:"horizontal",align:"auto",padding:5,
itemGap:10,itemWidth:25,itemHeight:14,formatter:null,selectedMode:!0,
inactiveColor:"#ccc"},yAxis:{splitNumber:5},xAxis:{splitNumber:5
}}}return BaseStyle.prototype.setColorByName=function(name,color){
return this.customizedColor[name]=color,this},BaseStyle.prototype.getColorByName=function(name){
return this.customizedColor[name]||this.color.getColor(name)},
BaseStyle}();exports.BaseStyle=BaseStyle},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5);console.log("loading color module.");
var Color=function(){function Color(theme){void 0===theme&&(theme="c60"),
this.colorSchema=Color[theme],this.colorMap={},this.colorArray=this.parseColorSchema(this.colorSchema);
}return Color.prototype.parseColorSchema=function(schema){try{
return schema.match(/.{6}/g).map(function(x){return"#"+x})}catch(err){
return console.error(err,"Use default color schema c10."),this.colorSchema=Color.c10,
this.colorSchema.match(/.{6}/g).map(function(x){return"#"+x});
}},Color.prototype.initialization=function(types){return types.forEach(function(type){
this.getColor(type)}),this},Color.prototype.getColor=function(type){
var result="#000000";try{if(void 0===type)throw new exception_1.GException(5001,"getColor for a unknow type.");
void 0===this.colorMap[type]&&(this.colorMap[type]={index:Object.keys(this.colorMap).length
}),result=void 0!==this.colorMap[type].color?this.colorMap[type].color:this.colorArray[this.colorMap[type].index%this.colorArray.length];
}catch(err){console.error(err.toString()),result="#000000"}return result;
},Color.prototype.setColor=function(type,color){return this.colorMap[type]=this.colorMap[type]||{},
this.colorMap[type].color=color,this},Color.prototype.setColorTheme=function(theme){
return this.setColorSchema(Color[theme]),this},Color.prototype.setColorSchema=function(schema){
return this.colorSchema=schema,this.colorArray=this.parseColorSchema(schema),
this},Color.prototype.reset=function(){return this.colorMap={},
this},Color.prototype.randomColor=function(){var co=function(lor){
return(lor+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6===lor.length?lor:co(lor);
};return"#"+co("")},Color.prototype.getColorArray=function(){
return this.colorArray},Color}();exports.Color=Color,Color.c10="1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",
Color.c10a="aec7e8ffbb7898df8aff9896c5b0d5c49c94f7b6d2c7c7c7dbdb8d9edae5",
Color.c10b="393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39",
Color.c10c="e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",
Color.c10d="3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476",
Color.c10e="a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",
Color.c20=Color.c10+Color.c10a,Color.c30=Color.c10+Color.c10a+Color.c10b,
Color.c40=Color.c10+Color.c10a+Color.c10b+Color.c10c,Color.c50=Color.c10+Color.c10a+Color.c10b+Color.c10c+Color.c10d,
Color.c60=Color.c10+Color.c10a+Color.c10b+Color.c10c+Color.c10d+Color.c10e;
},function(module,exports){"use strict";var ErrorStatus={1e3:"Graph data module error message.",
1001:"Wrong inputs in addNode/getNodes function.",1002:"Wrong inputs in addLink/getLinks function.",
1003:"Wrong inputs in dropNode function.",1004:"Wrong inputs in dropLink function.",
1005:"Wrong format in external graph.",1006:"Wrong inputs in getNeighbors function",
1007:"Node expression function error.",1008:"Link expression function error.",
1009:"Max Element Limit is too large",1010:"Line data module error message.",
1011:"Bar data module error message.",2e3:"Rendering module error message.",
2001:"Render options error.",2002:"Export error.",2003:"Render event error.",
2004:"Render engine internal error.",2005:"graph schema initialize color object error.",
2006:"pre style initialize error.",3e3:"Styling error message",
3001:"Unknown node style attribute",3002:"Unknown link style attribute",
3003:"Icon class error",4e3:"layout module error message.",4001:"Root node error.",
4002:"layout algorithm error.",5e3:"Utils options error message.",
5001:"Input arguments can not be undefined.",5002:"HexColor format error.",
5003:"External Data Parser error.",5004:"Internal Data Parser error.",
5005:"Localization setting error.",6e3:"This range will be used for command line compiler error message.",
7e3:"This range will be used for noImplicitAny error message."
},GException=function(){function GException(status,body){this.body="",
this.status=status,this.body=body||"",this.errorType=ErrorStatus[this.status]||"Undefiend",
this.error="error GV"+this.status+": "+this.errorType+" '"+this.body+"'";
}return GException.prototype.toString=function(){return this.error;
},GException}();exports.GException=GException},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5),GraphParserFormat=function(){
function GraphParserFormat(){this.initGQueryFormat().initPTAFormat().initKSubGraphFormat().initGPRFormat().initRestppFormat().initGSTFormat();
}return GraphParserFormat.prototype.initGQueryFormat=function(){
return this.gquery={isNode:function(obj){var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.v_id,
result=result&&"string"==typeof obj.v_type,result=result&&("object"==typeof obj.v||"object"==typeof obj.attributes),
result)},isLink:function(obj){var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.e_type,
result=result&&"string"==typeof obj.from_id,result=result&&"string"==typeof obj.from_type,
result=result&&"string"==typeof obj.to_id,result=result&&"string"==typeof obj.to_type,
result=result&&"boolean"==typeof obj.directed,result=result&&"object"==typeof obj.attributes,
result)},parseNode:function(obj){var newNode={id:obj.v_id,type:obj.v_type,
attrs:{},styles:{},others:{"vertex set":obj.v_set},labels:{}};
return obj.v&&Object.keys(obj.v).forEach(function(attr){newNode.attrs[attr]=obj.v[attr];
}),obj.attributes&&Object.keys(obj.attributes).forEach(function(attr){
newNode.attrs[attr]=obj.attributes[attr]}),obj.styles=obj.styles||{},
obj.others=obj.others||{},obj.labels=obj.labels||{},Object.keys(obj.styles).forEach(function(key){
newNode.styles[key]=obj.styles[key]}),Object.keys(obj.others).forEach(function(key){
newNode.others[key]=obj.others[key]}),Object.keys(obj.labels).forEach(function(key){
newNode.labels[key]=obj.labels[key]}),newNode},parseLink:function(obj){
var commaAppearence={};Object.keys(obj.attributes).forEach(function(attr){
if("string"==typeof obj.attributes[attr]){var number=obj.attributes[attr].split(",").length-1;
void 0===commaAppearence[number]?commaAppearence[number]=1:commaAppearence[number]++;
}});var mostAppearNumber=-1,mostAppearTimes=0;for(var attrNum in commaAppearence)"0"!==attrNum&&commaAppearence[attrNum]>mostAppearTimes&&(mostAppearNumber=Number(attrNum),
mostAppearTimes=commaAppearence[attrNum]);var newLink={source:{
id:obj.from_id,type:obj.from_type},target:{id:obj.to_id,type:obj.to_type
},directed:obj.directed,type:obj.e_type,attrs:{},styles:{},others:{},
labels:{}};if(Object.keys(obj.attributes).forEach(function(attr){
newLink.attrs[attr]=obj.attributes[attr]}),obj.styles=obj.styles||{},
obj.others=obj.others||{},obj.labels=obj.labels||{},Object.keys(obj.styles).forEach(function(key){
newLink.styles[key]=obj.styles[key]}),Object.keys(obj.others).forEach(function(key){
newLink.others[key]=obj.others[key]}),Object.keys(obj.labels).forEach(function(key){
newLink.labels[key]=obj.labels[key]}),mostAppearNumber===-1)return newLink;
for(var links=[],_loop_1=function(i){var link=JSON.parse(JSON.stringify(newLink));
link.type=link.type+("<"+i+">"),Object.keys(obj.attributes).forEach(function(attr){
if("string"==typeof obj.attributes[attr]){var attrs=obj.attributes[attr].split(",");
attrs.length-1===mostAppearNumber&&(link.attrs[attr]=attrs[i]);
}}),links.push(link)},i=0;i<mostAppearNumber;i++)_loop_1(i);return links;
}},this},GraphParserFormat.prototype.initPTAFormat=function(){
var _this=this;return this.pta={isNode:function(obj){return _this.gquery.isNode(obj);
},isLink:function(obj){return _this.gquery.isLink(obj)},parseNode:function(obj){
var newNode=_this.gquery.parseNode(obj);return"@links"in newNode.attrs&&delete newNode.attrs["@links"],
newNode},parseLink:function(obj){return _this.gquery.parseLink(obj);
}},this},GraphParserFormat.prototype.initKSubGraphFormat=function(){
var _this=this;return this.ksubgraph={isNode:function(obj){var result=!0;
return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.id,
result=result&&"string"==typeof obj.v_type,result=result&&"string"==typeof obj.attrs,
result)},isLink:function(obj){var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.etype,
result=result&&"object"==typeof obj.src_vertex,result=result&&"object"==typeof obj.tgt_vertex,
result=result&&"string"==typeof obj.attrs,result&&(result=result&&"string"==typeof obj.src_vertex.vid,
result=result&&"string"==typeof obj.src_vertex.vtype,result=result&&"string"==typeof obj.tgt_vertex.vid,
result=result&&"string"==typeof obj.tgt_vertex.vtype),result);
},parseNode:function(obj){var newNode={id:obj.id,type:obj.v_type,
attrs:_this.gpeTopologyAttributesOutputToJSON(obj.attrs),styles:{},
others:{},labels:{}};return newNode},parseLink:function(obj){
var newLink={source:{id:obj.src_vertex.vid,type:obj.src_vertex.vtype
},target:{id:obj.tgt_vertex.vid,type:obj.tgt_vertex.vtype},directed:!0,
type:obj.etype,attrs:_this.gpeTopologyAttributesOutputToJSON(obj.attrs),
styles:{},others:{},labels:{}};return newLink}},this},GraphParserFormat.prototype.initGPRFormat=function(){
return this.gpr={isNode:function(obj){var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.id,
result=result&&"string"==typeof obj.vertex_type)},isLink:function(obj){
var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.edge_type_name,
result=result&&"object"==typeof obj.src_vertex,result=result&&"object"==typeof obj.tgt_vertex,
result&&(result=result&&"string"==typeof obj.src_vertex.vertex_id,
result=result&&"string"==typeof obj.src_vertex.vertex_type_name,
result=result&&"string"==typeof obj.tgt_vertex.vertex_id,result=result&&"string"==typeof obj.tgt_vertex.vertex_type_name),
result)},parseNode:function(obj){var newNode={id:obj.id,type:obj.vertex_type,
attrs:{},styles:{},others:{"vertex set":obj.v_set},labels:{}};
for(var attr in obj.attribute)Object.prototype.hasOwnProperty.call(obj.attribute,attr)&&(newNode.attrs[attr]=obj.attribute[attr]);
return newNode},parseLink:function(obj){var newLink={source:{
id:obj.src_vertex.vertex_id,type:obj.src_vertex.vertex_type_name
},target:{id:obj.tgt_vertex.vertex_id,type:obj.tgt_vertex.vertex_type_name
},directed:obj.directed||!1,type:obj.edge_type_name,attrs:{},
styles:{},others:{},labels:{}};for(var attr in obj.attribute)Object.prototype.hasOwnProperty.call(obj.attribute,attr)&&(newLink.attrs[attr]=obj.attribute[attr]);
return newLink}},this},GraphParserFormat.prototype.initRestppFormat=function(){
return this.restpp={isNode:function(obj){var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.id,
result=result&&"string"==typeof obj.vtype,result=result&&"object"==typeof obj.attributes,
result)},isLink:function(obj){var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.etype,
result=result&&"string"==typeof obj.from_id,result=result&&"string"==typeof obj.from_vtype,
result=result&&"string"==typeof obj.to_id,result=result&&"string"==typeof obj.to_vtype,
result=result&&"object"==typeof obj.attributes,result)},parseNode:function(obj){
var newNode={id:obj.id,type:obj.vtype,attrs:{},styles:{},others:{},
labels:{}};return Object.keys(obj.attributes).forEach(function(attr){
newNode.attrs[attr]=obj.attributes[attr]}),obj.styles=obj.styles||{},
obj.others=obj.others||{},obj.labels=obj.labels||{},Object.keys(obj.styles).forEach(function(key){
newNode.styles[key]=obj.styles[key]}),Object.keys(obj.others).forEach(function(key){
newNode.others[key]=obj.others[key]}),Object.keys(obj.labels).forEach(function(key){
newNode.labels[key]=obj.labels[key]}),newNode},parseLink:function(obj){
var newLink={source:{id:obj.from_id,type:obj.from_vtype},target:{
id:obj.to_id,type:obj.to_vtype},directed:!0,type:obj.etype,attrs:{},
styles:{},others:{},labels:{}};return Object.keys(obj.attributes).forEach(function(attr){
newLink.attrs[attr]=obj.attributes[attr]}),obj.styles=obj.styles||{},
obj.others=obj.others||{},obj.labels=obj.labels||{},Object.keys(obj.styles).forEach(function(key){
newLink.styles[key]=obj.styles[key]}),Object.keys(obj.others).forEach(function(key){
newLink.others[key]=obj.others[key]}),Object.keys(obj.labels).forEach(function(key){
newLink.labels[key]=obj.labels[key]}),newLink}},this},GraphParserFormat.prototype.initGSTFormat=function(){
return this.gst={isNode:function(obj){var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.vertex_id,
result=result&&"string"==typeof obj.vertex_type,result=result&&"object"==typeof obj.attributes,
result=result&&"object"==typeof obj.other,result)},isLink:function(obj){
var result=!0;return"object"==typeof obj&&null!==obj&&(result=result&&"string"==typeof obj.edge_type,
result=result&&"boolean"==typeof obj.directed,result=result&&"string"==typeof obj.from_id,
result=result&&"string"==typeof obj.from_type,result=result&&"string"==typeof obj.to_id,
result=result&&"string"==typeof obj.to_type,result=result&&"object"==typeof obj.attributes,
result=result&&"object"==typeof obj.other,result)},parseNode:function(obj){
var newNode={id:obj.vertex_id,type:obj.vertex_type,attrs:{},styles:{},
others:{},labels:{}};return Object.keys(obj.attributes).forEach(function(attr){
newNode.attrs[attr]=obj.attributes[attr]}),obj.style=obj.style||{},
obj.other=obj.other||{},Object.keys(obj.style).forEach(function(key){
newNode.styles[key]=obj.style[key]}),Object.keys(obj.other).forEach(function(key){
newNode.others[key]=obj.other[key]}),newNode},parseLink:function(obj){
var newLink={source:{id:obj.from_id,type:obj.from_type},target:{
id:obj.to_id,type:obj.to_type},directed:obj.directed,type:obj.edge_type,
attrs:{},styles:{},others:{},labels:{}};return Object.keys(obj.attributes).forEach(function(attr){
newLink.attrs[attr]=obj.attributes[attr]}),obj.style=obj.style||{},
obj.other=obj.other||{},Object.keys(obj.style).forEach(function(key){
newLink.styles[key]=obj.style[key]}),Object.keys(obj.other).forEach(function(key){
newLink.others[key]=obj.other[key]}),newLink}},this},GraphParserFormat.prototype.gpeTopologyAttributesOutputToJSON=function(attrString){
if(""===attrString||void 0===attrString||"string"!=typeof attrString)return{};
var result_1={},reggie_1=/(.*)\(\d*\):(.*)$/;return attrString.split("|").forEach(function(attr){
var tempObj=reggie_1.exec(attr);null!==tempObj&&(result_1[tempObj[1]]=tempObj[2]);
}),result_1},GraphParserFormat}();exports.GraphParserFormat=GraphParserFormat;
var GraphParser=function(){function GraphParser(parent){var _this=this;
this.parsers={},this.parserFormat=new GraphParserFormat,this.chart=parent,
this.addParser("static",function(externalData){return externalData;
}),this.addParser("gquery",function(externalData){var targetGraph={
nodes:[],links:[]};try{_this.recursivelyGetExternalElement(externalData,targetGraph,_this.parserFormat.gquery);
}catch(err){console.warn(err.toString()),targetGraph={nodes:[],
links:[]}}return targetGraph}),this.addParser("pta",function(externalData){
var targetGraph={nodes:[],links:[]};try{_this.recursivelyGetExternalElement(externalData,targetGraph,_this.parserFormat.pta);
}catch(err){console.warn(err.toString()),targetGraph={nodes:[],
links:[]}}return targetGraph}),this.addParser("ksubgraph",function(externalData){
var targetGraph={nodes:[],links:[]};try{_this.recursivelyGetExternalElement(externalData,targetGraph,_this.parserFormat.ksubgraph);
}catch(err){console.warn(err.toString()),targetGraph={nodes:[],
links:[]}}return targetGraph}),this.addParser("gpr",function(externalData){
var targetGraph={nodes:[],links:[]};try{_this.recursivelyGetExternalElement(externalData,targetGraph,_this.parserFormat.gpr);
}catch(err){console.warn(err.toString()),targetGraph={nodes:[],
links:[]}}return targetGraph}),this.addParser("restpp",function(externalData){
var targetGraph={nodes:[],links:[]};try{_this.recursivelyGetExternalElement(externalData,targetGraph,_this.parserFormat.restpp);
}catch(err){console.warn(err.toString()),targetGraph={nodes:[],
links:[]}}return targetGraph}),this.addParser("gst",function(externalData){
var targetGraph={nodes:[],links:[]};try{_this.recursivelyGetExternalElement(externalData,targetGraph,_this.parserFormat.gst);
}catch(err){console.warn(err.toString()),targetGraph={nodes:[],
links:[]}}return targetGraph})}return GraphParser.prototype.recursivelyGetExternalElement=function(obj,targetGraph,format){
if("object"!=typeof obj||null===obj)return obj;var tempObj=obj.constructor();
for(var key in obj){if(!Object.prototype.hasOwnProperty.call(obj,key))throw new exception_1.GException(5004,"External Data format can not be parased.");
tempObj[key]=this.recursivelyGetExternalElement(obj[key],targetGraph,format);
}if(format.isNode(tempObj)&&targetGraph.nodes.push(format.parseNode(tempObj)),
format.isLink(tempObj)){var edge=format.parseLink(tempObj);edge instanceof Array?targetGraph.links=targetGraph.links.concat(edge):targetGraph.links.push(edge);
}return tempObj},GraphParser.prototype.addParser=function(parserName,callback){
try{if(void 0!==this.parsers[parserName])throw new exception_1.GException(5003,parserName+" parser is already existed,");
this.parsers[parserName]=callback}catch(err){console.warn(err.toString());
}return this},GraphParser.prototype.updateParser=function(parserName,callback){
try{if(void 0===this.parsers[parserName])throw new exception_1.GException(5003,parserName+" parser is already existed,");
this.parsers[parserName]=callback}catch(err){console.warn(err.toString());
}return this},GraphParser.prototype.getParser=function(parserName){
try{if(void 0===this.parsers[parserName])throw new exception_1.GException(5003,"External data parser is not existed.");
return this.parsers[parserName]}catch(err){console.warn(err.toString());
}return this.parsers.gquery},GraphParser}();exports.GraphParser=GraphParser;
var ArrayParser=function(){function ArrayParser(){}return ArrayParser;
}();exports.ArrayParser=ArrayParser},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5),utils_1=__webpack_require__(8),Localization=function(){
function Localization(language){this.localization={zh:{vertex:{
"built-in-translate":{attrs:{Vertex:"节点",Type:"节点类型",menu:{values:{
Close:"隐藏叶子节点",Collapse:"隐藏相邻节点",PIN:"锁定",Expand:"扩展",UnPin:"解锁",
Focus:"焦点",Hide:"隐藏",Unfocus:"取消焦点"}}}}},edge:{"built-in-translate":{
attrs:{Edge:"边",Type:"类型"}}}}},this.selectedLanguage=void 0;try{
if(void 0===language)return;this.localization=utils_1.Utils.extend(this.localization,language.localization),
this.setSelectedLanguage(language.selectedLanguage)}catch(err){
console.log(err.toString())}}return Localization.prototype.setSelectedLanguage=function(selectedLanguage){
try{if(void 0===selectedLanguage||void 0===this.localization[selectedLanguage])throw this.selectedLanguage=void 0,
new exception_1.GException(5005,'"'+selectedLanguage+'" language setting is not existed. The localization will use default value.');
this.selectedLanguage=selectedLanguage}catch(err){console.warn(err.toString()),
this.selectedLanguage=void 0}return this},Localization.prototype.getVertexString=function(type,attribute,value){
if(void 0===this.selectedLanguage)return void 0===value?void 0!==attribute?attribute:type:value;
if(void 0===attribute){var getLanguage=void 0===this.localization[this.selectedLanguage]?{}:this.localization[this.selectedLanguage],getVertex=void 0===getLanguage.vertex?{}:getLanguage.vertex,getType=void 0===getVertex[type]?{}:getVertex[type];
return"string"==typeof getType?getType:(getType=void 0===getType.type?{}:getType.type,
"string"==typeof getType?getType:type)}if(void 0===value){var getLanguage=void 0===this.localization[this.selectedLanguage]?{}:this.localization[this.selectedLanguage],getVertex=void 0===getLanguage.vertex?{}:getLanguage.vertex,getType=void 0===getVertex[type]?{}:getVertex[type];
if("string"==typeof getType)return attribute;var getAttrs=void 0===getType.attrs?{}:getType.attrs,getAttr=void 0===getAttrs[attribute]?{}:getAttrs[attribute];
return"string"==typeof getAttr?getAttr:(getAttr=void 0===getAttr.attr?{}:getAttr.attr,
"string"==typeof getAttr?getAttr:attribute)}var getLanguage=void 0===this.localization[this.selectedLanguage]?{}:this.localization[this.selectedLanguage],getVertex=void 0===getLanguage.vertex?{}:getLanguage.vertex,getType=void 0===getVertex[type]?{}:getVertex[type];
if("string"==typeof getType)return value;var getAttrs=void 0===getType.attrs?{}:getType.attrs,getAttr=void 0===getAttrs[attribute]?{}:getAttrs[attribute];
if("string"==typeof getAttr)return value;var getValues=void 0===getAttr.values?{}:getAttr.values,getValue=void 0===getValues[value]?value:getValues[value];
return getValue},Localization.prototype.getEdgeString=function(type,attribute,value){
if(void 0===this.selectedLanguage)return void 0===value?void 0!==attribute?attribute:type:value;
if(void 0===attribute){var getLanguage=void 0===this.localization[this.selectedLanguage]?{}:this.localization[this.selectedLanguage],getEdge=void 0===getLanguage.edge?{}:getLanguage.edge,getType=void 0===getEdge[type]?{}:getEdge[type];
return"string"==typeof getType?getType:(getType=void 0===getType.type?{}:getType.type,
"string"==typeof getType?getType:type)}if(void 0===value){var getLanguage=void 0===this.localization[this.selectedLanguage]?{}:this.localization[this.selectedLanguage],getEdge=void 0===getLanguage.edge?{}:getLanguage.edge,getType=void 0===getEdge[type]?{}:getEdge[type];
if("string"==typeof getType)return attribute;var getAttrs=void 0===getType.attrs?{}:getType.attrs,getAttr=void 0===getAttrs[attribute]?{}:getAttrs[attribute];
return"string"==typeof getAttr?getAttr:(getAttr=void 0===getAttr.attr?{}:getAttr.attr,
"string"==typeof getAttr?getAttr:attribute)}var getLanguage=void 0===this.localization[this.selectedLanguage]?{}:this.localization[this.selectedLanguage],getEdge=void 0===getLanguage.edge?{}:getLanguage.edge,getType=void 0===getEdge[type]?{}:getEdge[type];
if("string"==typeof getType)return value;var getAttrs=void 0===getType.attrs?{}:getType.attrs,getAttr=void 0===getAttrs[attribute]?{}:getAttrs[attribute];
if("string"==typeof getAttr)return value;var getValues=void 0===getAttr.values?{}:getAttr.values,getValue=void 0===getValues[value]?value:getValues[value];
return getValue},Localization.prototype.translateOneNode=function(node){
var _this=this,result=utils_1.Utils.cloneDeep(node),type=node.exType;
return result.exID={key:this.getVertexString("built-in-translate","Vertex"),
value:this.getVertexString(type,"id",result.exID)},result.exType={
key:this.getVertexString("built-in-translate","Type"),value:this.getVertexString(type)
},result.attrs={},Object.keys(node.attrs||{}).forEach(function(attr){
result.attrs[attr]={key:_this.getVertexString(type,attr),value:_this.getVertexString(type,attr,node.attrs[attr])
}}),result},Localization.prototype.translateOneLink=function(link){
var _this=this,result=utils_1.Utils.cloneDeep(link),type=link.exType;
return result.exType={key:this.getEdgeString("built-in-translate","Edge"),
value:this.getEdgeString(type)},result.attrs={},Object.keys(link.attrs||{}).forEach(function(attr){
result.attrs[attr]={key:_this.getEdgeString(type,attr),value:_this.getEdgeString(type,attr,link.attrs[attr])
}}),result},Localization}();exports.Localization=Localization;
},function(module,exports,__webpack_require__){"use strict";var Utils,_=__webpack_require__(9),exception_1=__webpack_require__(5);
!function(Utils){function downloadURI(uri,name){var link=document.createElement("a");
link.download=name,link.href=uri,document.body.appendChild(link),
link.click(),document.body.removeChild(link)}function rgbToRgba(hexColor,alpha){
void 0===alpha&&(alpha="1");try{var r=(hexColor[0],hexColor[1]+hexColor[2]),red=parseInt(r,16),g=hexColor[3]+hexColor[4],green=parseInt(g,16),b=hexColor[5]+hexColor[6],blue=parseInt(b,16),result="rgba("+red+", "+green+", "+blue+", "+alpha+")";
if(isNaN(red)||isNaN(green)||isNaN(blue))throw new exception_1.GException(5002,hexColor+" is not a vaild color");
for(var i=0;i<=6;++i)if(void 0===hexColor[i])throw new exception_1.GException(5002,hexColor+" is not a vaild color");
return result}catch(err){return console.warn(err.toString()),
"rgba(0, 0, 0, 1)"}}function rotate(cx,cy,x,y,degree){var radians=Math.PI/180*degree,cos=Math.cos(radians),sin=Math.sin(radians),nx=cos*(x-cx)-sin*(y-cy)+cx,ny=sin*(x-cx)+cos*(y-cy)+cy;
return[nx,ny]}function isEqual(value,other){return _.isEqual(value,other);
}function cloneDeep(obj){var deep=_.cloneDeep(obj);return deep;
}function clone(obj){var shallow=_.clone(obj);return shallow}
function concat(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i-0]=arguments[_i];
return _.concat.apply(this,arguments)}function defaults(target){
for(var sources=[],_i=1;_i<arguments.length;_i++)sources[_i-1]=arguments[_i];
return _.defaults.apply(this,arguments)}function defaultsDeep(target){
for(var sources=[],_i=1;_i<arguments.length;_i++)sources[_i-1]=arguments[_i];
return _.defaultsDeep.apply(this,arguments)}function extend(destiation){
for(var sources=[],_i=1;_i<arguments.length;_i++)sources[_i-1]=arguments[_i];
return _.merge.apply(this,arguments)}function assignIn(destiation){
for(var source=[],_i=1;_i<arguments.length;_i++)source[_i-1]=arguments[_i];
return _.assignIn.apply(this,arguments)}function pullAt(array,indexes){
var pulled=_.pullAt(array,indexes);return pulled}function sample(collection,index){
return _.sample.apply(this,arguments)}function loadCSSIfNotAlreadyLoaded(pathToCSS){
for(var ss=document.styleSheets,i=0,max=ss.length;i<max;i++)if(ss[i].href===pathToCSS)return;
var link=document.createElement("link");link.rel="stylesheet",
link.href=pathToCSS,document.getElementsByTagName("head")[0].appendChild(link);
}function binaryInsert(data,array,callback,startVal,endVal){var length=array.length,start="undefined"!=typeof startVal?startVal:0,end="undefined"!=typeof endVal?endVal:length-1,m=start+Math.floor((end-start)/2);
return 0===length?void array.push(data):callback(data,array[end])===-1?void array.splice(end+1,0,data):1===callback(data,array[start])||0===callback(data,array[start])?void array.splice(start,0,data):start>=end?void 0:1===callback(data,array[m])||0===callback(data,array[m])?void this.binaryInsert(data,array,callback,start,m-1):callback(data,array[m])===-1?void this.binaryInsert(data,array,callback,m+1,end):void 0;
}Utils.downloadURI=downloadURI,Utils.rgbToRgba=rgbToRgba,Utils.rotate=rotate,
Utils.isEqual=isEqual,Utils.cloneDeep=cloneDeep,Utils.clone=clone,
Utils.concat=concat,Utils.defaults=defaults,Utils.defaultsDeep=defaultsDeep,
Utils.extend=extend,Utils.assignIn=assignIn,Utils.pullAt=pullAt,
Utils.sample=sample,Utils.loadCSSIfNotAlreadyLoaded=loadCSSIfNotAlreadyLoaded,
Utils.binaryInsert=binaryInsert}(Utils=exports.Utils||(exports.Utils={}));
},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
(function(global,module){(function(){function addMapEntry(map,pair){
return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){
return set.add(value),set}function apply(func,thisArg,args){switch(args.length){
case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);
case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);
}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){
for(var index=-1,length=null==array?0:array.length;++index<length;){
var value=array[index];setter(accumulator,value,iteratee(value),array);
}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&iteratee(array[index],index,array)!==!1;);
return array}function arrayEachRight(array,iteratee){for(var length=null==array?0:array.length;length--&&iteratee(array[length],length,array)!==!1;);
return array}function arrayEvery(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;
return!0}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){
var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value);
}return result}function arrayIncludes(array,value){var length=null==array?0:array.length;
return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){
for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;
return!1}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);
return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];
return array}function arrayReduce(array,iteratee,accumulator,initAccum){
var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);
return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){
var length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);
return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;
return!1}function asciiToArray(string){return string.split("");
}function asciiWords(string){return string.match(reAsciiWord)||[];
}function baseFindKey(collection,predicate,eachFunc){var result;
return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,
!1}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){
for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;
return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex);
}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;
return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){
var length=null==array?0:array.length;return length?baseSum(array,iteratee)/length:NAN;
}function baseProperty(key){return function(object){return null==object?undefined:object[key];
}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key];
}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){
return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,
value):iteratee(accumulator,value,index,collection)}),accumulator;
}function baseSortBy(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;
return array}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){
var current=iteratee(array[index]);current!==undefined&&(result=result===undefined?current:result+current);
}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);
return result}function baseToPairs(object,props){return arrayMap(props,function(key){
return[key,object[key]]})}function baseUnary(func){return function(value){
return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){
return object[key]})}function cacheHas(cache,key){return cache.has(key);
}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);
return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);
return index}function countHolders(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;
return result}function escapeStringChar(chr){return"\\"+stringEscapes[chr];
}function getValue(object,key){return null==object?undefined:object[key];
}function hasUnicode(string){return reHasUnicode.test(string);
}function hasUnicodeWord(string){return reHasUnicodeWord.test(string);
}function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);
return result}function mapToArray(map){var index=-1,result=Array(map.size);
return map.forEach(function(value,key){result[++index]=[key,value];
}),result}function overArg(func,transform){return function(arg){
return func(transform(arg))}}function replaceHolders(array,placeholder){
for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){
var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,
result[resIndex++]=index)}return result}function setToArray(set){
var index=-1,result=Array(set.size);return set.forEach(function(value){
result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);
return set.forEach(function(value){result[++index]=[value,value];
}),result}function strictIndexOf(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;
return-1}function strictLastIndexOf(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;
return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string);
}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string);
}function unicodeSize(string){for(var result=reUnicode.lastIndex=0;reUnicode.test(string);)++result;
return result}function unicodeToArray(string){return string.match(reUnicode)||[];
}function unicodeWords(string){return string.match(reUnicodeWord)||[];
}var undefined,VERSION="4.17.4",LARGE_ARRAY_SIZE=200,CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",MAX_MEMOIZE_SIZE=500,PLACEHOLDER="__lodash_placeholder__",CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=800,HOT_SPAN=16,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]],argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos="['’]",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",rsOrdUpper="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp(rsApos,"g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};
typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,
typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;
var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,
cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;
var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A",
"Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C",
"ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e",
"é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i",
"í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O",
"Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o",
"ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u",
"ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th",
"ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C",
"Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D",
"Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E",
"ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G",
"Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h",
"ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i",
"ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k",
"Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l",
"ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n",
"ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o",
"Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S",
"Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T",
"Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U",
"Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u",
"Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z",
"ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n",
"ſ":"s"},htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;",
"'":"&#39;"},htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">",
"&quot;":'"',"&#39;":"'"},stringEscapes={"\\":"\\","'":"'","\n":"n",
"\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){
try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util");
}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,asciiSize=baseProperty("length"),deburrLetter=basePropertyOf(deburredLetters),escapeHtmlChar=basePropertyOf(htmlEscapes),unescapeHtmlChar=basePropertyOf(htmlUnescapes),runInContext=function runInContext(context){
function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){
if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value);
}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll){
this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,
this.__index__=0,this.__values__=undefined}function LazyWrapper(value){
this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,
this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[];
}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);
return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,
result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),
result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),
result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);
result.__dir__=-1,result.__filtered__=!0}else result=this.clone(),
result.__dir__*=-1;return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);
if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);
var result=[];outer:for(;length--&&resIndex<takeCount;){index+=dir;
for(var iterIndex=-1,value=array[index];++iterIndex<iterLength;){
var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);
if(type==LAZY_MAP_FLAG)value=computed;else if(!computed){if(type==LAZY_FILTER_FLAG)continue outer;
break outer}}result[resIndex++]=value}return result}function Hash(entries){
var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){
var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){
this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}
function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];
return this.size-=result?1:0,result}function hashGet(key){var data=this.__data__;
if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;
}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){
var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);
}function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,
data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value,
this}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;
for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1]);
}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(key){
var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;
var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),
--this.size,!0}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);
return index<0?undefined:data[index][1]}function listCacheHas(key){
return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){
var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,
data.push([key,value])):data[index][1]=value,this}function MapCache(entries){
var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){
var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){
this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),
string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);
return this.size-=result?1:0,result}function mapCacheGet(key){
return getMapData(this,key).get(key)}function mapCacheHas(key){
return getMapData(this,key).has(key)}function mapCacheSet(key,value){
var data=getMapData(this,key),size=data.size;return data.set(key,value),
this.size+=data.size==size?0:1,this}function SetCache(values){
var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index]);
}function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),
this}function setCacheHas(value){return this.__data__.has(value);
}function Stack(entries){var data=this.__data__=new ListCache(entries);
this.size=data.size}function stackClear(){this.__data__=new ListCache,
this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);
return this.size=data.size,result}function stackGet(key){return this.__data__.get(key);
}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){
var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;
if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),
this.size=++data.size,this;data=this.__data__=new MapCache(pairs);
}return data.set(key,value),this.size=data.size,this}function arrayLikeKeys(value,inherited){
var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;
for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);
return result}function arraySample(array){var length=array.length;
return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){
return shuffleSelf(copyArray(array),baseClamp(n,0,array.length));
}function arrayShuffle(array){return shuffleSelf(copyArray(array));
}function assignMergeValue(object,key,value){(value===undefined||eq(object[key],value))&&(value!==undefined||key in object)||baseAssignValue(object,key,value);
}function assignValue(object,key,value){var objValue=object[key];
hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value);
}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;
return-1}function baseAggregator(collection,setter,iteratee,accumulator){
return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection);
}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object);
}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object);
}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{
configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value;
}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=null==object;++index<length;)result[index]=skip?undefined:get(object,paths[index]);
return result}function baseClamp(number,lower,upper){return number===number&&(upper!==undefined&&(number=number<=upper?number:upper),
lower!==undefined&&(number=number>=lower?number:lower)),number;
}function baseClone(value,bitmask,customizer,key,object,stack){
var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;
if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),
result!==undefined)return result;if(!isObject(value))return value;
var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),
!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;
if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){
if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value));
}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep);
}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;
stack.set(value,result);var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys,props=isArr?undefined:keysFunc(value);
return arrayEach(props||value,function(subValue,key){props&&(key=subValue,
subValue=value[key]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack));
}),result}function baseConforms(source){var props=keys(source);
return function(object){return baseConformsTo(object,source,props);
}}function baseConformsTo(object,source,props){var length=props.length;
if(null==object)return!length;for(object=Object(object);length--;){
var key=props[length],predicate=source[key],value=object[key];
if(value===undefined&&!(key in object)||!predicate(value))return!1;
}return!0}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
return setTimeout(function(){func.apply(undefined,args)},wait);
}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;
if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),
comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=LARGE_ARRAY_SIZE&&(includes=cacheHas,
isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){
var value=array[index],computed=null==iteratee?value:iteratee(value);
if(value=comparator||0!==value?value:0,isCommon&&computed===computed){
for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;
result.push(value)}else includes(values,computed,comparator)||result.push(value);
}return result}function baseEvery(collection,predicate){var result=!0;
return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection);
}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){
var value=array[index],current=iteratee(value);if(null!=current&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed)))var computed=current,result=value;
}return result}function baseFill(array,value,start,end){var length=array.length;
for(start=toInteger(start),start<0&&(start=-start>length?0:length+start),
end=end===undefined||end>length?length:toInteger(end),end<0&&(end+=length),
end=start>end?0:toLength(end);start<end;)array[start++]=value;
return array}function baseFilter(collection,predicate){var result=[];
return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value);
}),result}function baseFlatten(array,depth,predicate,isStrict,result){
var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),
result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value);
}return result}function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys);
}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys);
}function baseFunctions(object,props){return arrayFilter(props,function(key){
return isFunction(object[key])})}function baseGet(object,path){
path=castPath(path,object);for(var index=0,length=path.length;null!=object&&index<length;)object=object[toKey(path[index++])];
return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){
var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object));
}function baseGetTag(value){return null==value?value===undefined?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value);
}function baseGt(value,other){return value>other}function baseHas(object,key){
return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){
return null!=object&&key in Object(object)}function baseInRange(number,start,end){
return number>=nativeMin(start,end)&&number<nativeMax(start,end);
}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){
var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),
maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined;
}array=arrays[0];var index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){
var value=array[index],computed=iteratee?iteratee(value):value;
if(value=comparator||0!==value?value:0,!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){
for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];
if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer;
}seen&&seen.push(computed),result.push(value)}}return result}
function baseInverter(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){
setter(accumulator,iteratee(value),key,object)}),accumulator}
function baseInvoke(object,path,args){path=castPath(path,object),
object=parent(object,path);var func=null==object?object:object[toKey(last(path))];
return null==func?undefined:apply(func,object,args)}function baseIsArguments(value){
return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){
return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag;
}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag;
}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack));
}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){
var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);
objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;
var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;
if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,
objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),
objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);
if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");
if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;
return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack);
}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack));
}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag;
}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;
if(null==object)return!length;for(object=Object(object);index--;){
var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1;
}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];
if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1;
}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);
if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result))return!1;
}}return!0}function baseIsNative(value){if(!isObject(value)||isMasked(value))return!1;
var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));
}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag;
}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag;
}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)];
}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value);
}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);
var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);
return result}function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);
var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);
return result}function baseLt(value,other){return value<other;
}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];
return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection);
}),result}function baseMatches(source){var matchData=getMatchData(source);
return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){
return object===source||baseIsMatch(object,source,matchData)};
}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){
var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG);
}}function baseMerge(object,source,srcIndex,customizer,stack){
object!==source&&baseFor(source,function(srcValue,key){if(isObject(srcValue))stack||(stack=new Stack),
baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{
var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined;
newValue===undefined&&(newValue=srcValue),assignMergeValue(object,key,newValue);
}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){
var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);
if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined,isCommon=newValue===undefined;
if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);
newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,
newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,
isArguments(objValue)?newValue=toPlainObject(objValue):(!isObject(objValue)||srcIndex&&isFunction(objValue))&&(newValue=initCloneObject(srcValue))):isCommon=!1;
}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),
stack["delete"](srcValue)),assignMergeValue(object,key,newValue);
}function baseNth(array,n){var length=array.length;if(length)return n+=n<0?length:0,
isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){
var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee()));
var result=baseMap(collection,function(value,key,collection){
var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value);
});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){
return compareMultiple(object,other,orders)})}function basePick(object,paths){
return basePickBy(object,paths,function(value,path){return hasIn(object,path);
})}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){
var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value);
}return result}function basePropertyDeep(path){return function(object){
return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){
var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;
for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;(fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1;)seen!==array&&splice.call(seen,fromIndex,1),
splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){
for(var length=array?indexes.length:0,lastIndex=length-1;length--;){
var index=indexes[length];if(length==lastIndex||index!==previous){
var previous=index;isIndex(index)?splice.call(array,index,1):baseUnset(array,index);
}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1));
}function baseRange(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,
start+=step;return result}function baseRepeat(string,n){var result="";
if(!string||n<1||n>MAX_SAFE_INTEGER)return result;do n%2&&(result+=string),
n=nativeFloor(n/2),n&&(string+=string);while(n);return result;
}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"");
}function baseSample(collection){return arraySample(values(collection));
}function baseSampleSize(collection,n){var array=values(collection);
return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){
if(!isObject(object))return object;path=castPath(path,object);
for(var index=-1,length=path.length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){
var key=toKey(path[index]),newValue=value;if(index!=lastIndex){
var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined,
newValue===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{});
}assignValue(nested,key,newValue),nested=nested[key]}return object;
}function baseShuffle(collection){return shuffleSelf(values(collection));
}function baseSlice(array,start,end){var index=-1,length=array.length;
start<0&&(start=-start>length?0:length+start),end=end>length?length:end,
end<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;
for(var result=Array(length);++index<length;)result[index]=array[index+start];
return result}function baseSome(collection,predicate){var result;
return baseEach(collection,function(value,index,collection){return result=predicate(value,index,collection),
!result}),!!result}function baseSortedIndex(array,value,retHighest){
var low=0,high=null==array?low:array.length;if("number"==typeof value&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){
for(;low<high;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=mid+1:high=mid;
}return high}return baseSortedIndexBy(array,value,identity,retHighest);
}function baseSortedIndexBy(array,value,iteratee,retHighest){
value=iteratee(value);for(var low=0,high=null==array?0:array.length,valIsNaN=value!==value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;low<high;){
var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=null===computed,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);
if(valIsNaN)var setLow=retHighest||othIsReflexive;else setLow=valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):!othIsNull&&!othIsSymbol&&(retHighest?computed<=value:computed<value);
setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX);
}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){
var value=array[index],computed=iteratee?iteratee(value):value;
if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=0===value?0:value;
}}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NAN:+value;
}function baseToString(value){if("string"==typeof value)return value;
if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";
var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result;
}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;
if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){
var set=iteratee?null:createSet(array);if(set)return setToArray(set);
isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;
outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;
if(value=comparator||0!==value?value:0,isCommon&&computed===computed){
for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;
iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),
result.push(value))}return result}function baseUnset(object,path){
return path=castPath(path,object),object=parent(object,path),
null==object||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){
return baseSet(object,path,updater(baseGet(object,path)),customizer);
}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););
return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index);
}function baseWrapperValue(value,actions){var result=value;return result instanceof LazyWrapper&&(result=result.value()),
arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args));
},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;
if(length<2)return length?baseUniq(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));
return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){
for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){
var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value);
}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[];
}function castFunction(value){return"function"==typeof value?value:identity;
}function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value));
}function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,
!start&&end>=length?array:baseSlice(array,start,end)}function cloneBuffer(buffer,isDeep){
if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);
return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){
var result=new arrayBuffer.constructor(arrayBuffer.byteLength);
return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),
result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;
return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength);
}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG):mapToArray(map);
return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){
var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));
return result.lastIndex=regexp.lastIndex,result}function cloneSet(set,isDeep,cloneFunc){
var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG):setToArray(set);
return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){
return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){
var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;
return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length);
}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value===value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other===other,othIsSymbol=isSymbol(other);
if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;
if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1;
}return 0}function compareMultiple(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){
var result=compareAscending(objCriteria[index],othCriteria[index]);
if(result){if(index>=ordersLength)return result;var order=orders[index];
return result*("desc"==order?-1:1)}}return object.index-other.index;
}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];
for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);
for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result;
}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];
for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];
for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);
return result}function copyArray(source,array){var index=-1,length=source.length;
for(array||(array=Array(length));++index<length;)array[index]=source[index];
return array}function copyObject(source,props,object,customizer){
var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){
var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;
newValue===undefined&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue);
}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object);
}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object);
}function createAggregator(setter,initializer){return function(collection,iteratee){
var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};
return func(collection,setter,getIteratee(iteratee,2),accumulator);
}}function createAssigner(assigner){return baseRest(function(object,sources){
var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;
for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,
customizer):undefined,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,
length=1),object=Object(object);++index<length;){var source=sources[index];
source&&assigner(object,source,index,customizer)}return object;
})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){
if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);
for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);
return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){
for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){
var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break;
}return object}}function createBind(func,bitmask,thisArg){function wrapper(){
var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments);
}var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return wrapper;
}function createCaseFirst(methodName){return function(string){
string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);
return chr[methodName]()+trailing}}function createCompounder(callback){
return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"");
}}function createCtor(Ctor){return function(){var args=arguments;
switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);
case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);
case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:
return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:
return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);
case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);
}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);
return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){
function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];
var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);
if(length-=holders.length,length<arity)return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length);
var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args);
}var Ctor=createCtor(func);return wrapper}function createFind(findIndexFunc){
return function(collection,predicate,fromIndex){var iterable=Object(collection);
if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);
collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable);
}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined;
}}function createFlow(fromRight){return flatRest(function(funcs){
var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;
for(fromRight&&funcs.reverse();index--;){var func=funcs[index];
if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
if(prereq&&!wrapper&&"wrapper"==getFuncName(func))var wrapper=new LodashWrapper([],(!0));
}for(index=wrapper?index:length;++index<length;){func=funcs[index];
var funcName=getFuncName(func),data="wrapper"==funcName?getData(func):undefined;
wrapper=data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);
}return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value))return wrapper.plant(value).value();
for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);
return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){
function wrapper(){for(var length=arguments.length,args=Array(length),index=length;index--;)args[index]=arguments[index];
if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);
if(partials&&(args=composeArgs(args,partials,holders,isCurried)),
partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),
length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);
return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length);
}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;
return length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),
isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),
fn.apply(thisBinding,args)}var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);
return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){
return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){
return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;
if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;
"string"==typeof value||"string"==typeof other?(value=baseToString(value),
other=baseToString(other)):(value=baseToNumber(value),other=baseToNumber(other)),
result=operator(value,other)}return result}}function createOver(arrayFunc){
return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),
baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){
return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){
chars=chars===undefined?" ":baseToString(chars);var charsLength=chars.length;
if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;
var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));
return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length);
}function createPartial(func,bitmask,thisArg,partials){function wrapper(){
for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];
for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args);
}var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return wrapper;
}function createRange(fromRight){return function(start,end,step){
return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),
start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),
step=step===undefined?start<end?1:-1:toFinite(step),baseRange(start,end,step,fromRight);
}}function createRelationalOperation(operator){return function(value,other){
return"string"==typeof value&&"string"==typeof other||(value=toNumber(value),
other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){
var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;
bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG),
bitmask&WRAP_CURRY_BOUND_FLAG||(bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG));
var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity],result=wrapFunc.apply(undefined,newData);
return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,
setWrapToString(result,func,bitmask)}function createRound(methodName){
var func=Math[methodName];return function(number,precision){if(number=toNumber(number),
precision=null==precision?0:nativeMin(toInteger(precision),292)){
var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));
return pair=(toString(value)+"e").split("e"),+(pair[0]+"e"+(+pair[1]-precision));
}return func(number)}}function createToPairs(keysFunc){return function(object){
var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):baseToPairs(object,keysFunc(object));
}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){
var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
var length=partials?partials.length:0;if(length||(bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG),
partials=holders=undefined),ary=ary===undefined?ary:nativeMax(toInteger(ary),0),
arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,
bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;
partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];
if(data&&mergeData(newData,data),func=newData[0],bitmask=newData[1],
thisArg=newData[2],partials=newData[3],holders=newData[4],arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0),
!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)&&(bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)),
bitmask&&bitmask!=WRAP_BIND_FLAG)result=bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG?createCurry(func,bitmask,arity):bitmask!=WRAP_PARTIAL_FLAG&&bitmask!=(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG)||holders.length?createHybrid.apply(undefined,newData):createPartial(func,bitmask,thisArg,partials);else var result=createBind(func,bitmask,thisArg);
var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask);
}function customDefaultsAssignIn(objValue,srcValue,key,object){
return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue;
}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){
return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),
baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),
stack["delete"](srcValue)),objValue}function customOmitClone(value){
return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){
var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;
if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;
var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;
var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;
for(stack.set(array,other),stack.set(other,array);++index<arrLength;){
var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);
if(compared!==undefined){if(compared)continue;result=!1;break;
}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex);
})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){
result=!1;break}}return stack["delete"](array),stack["delete"](other),
result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){
switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;
object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));
case boolTag:case dateTag:case numberTag:return eq(+object,+other);
case errorTag:return object.name==other.name&&object.message==other.message;
case regexpTag:case stringTag:return object==other+"";case mapTag:
var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;
if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;
var stacked=stack.get(object);if(stacked)return stacked==other;
bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);
return stack["delete"](object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other);
}return!1}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){
var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;
if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){
var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1;
}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;
var result=!0;stack.set(object,other),stack.set(other,object);
for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];
var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);
if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){
result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){
var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1);
}return stack["delete"](object),stack["delete"](other),result;
}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"");
}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols);
}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn);
}function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){
var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name;
}return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;
return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;
return result=result===iteratee?baseIteratee:result,arguments.length?result(arguments[0],arguments[1]):result;
}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map;
}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){
var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)];
}return result}function getNative(object,key){var value=getValue(object,key);
return baseIsNative(value)?value:undefined}function getRawTag(value){
var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];
try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}
var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),
result}function getView(start,end,transforms){for(var index=-1,length=transforms.length;++index<length;){
var data=transforms[index],size=data.size;switch(data.type){case"drop":
start+=size;break;case"dropRight":end-=size;break;case"take":
end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);
}}return{start:start,end:end}}function getWrapDetails(source){
var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[];
}function hasPath(object,path,hasFunc){path=castPath(path,object);
for(var index=-1,length=path.length,result=!1;++index<length;){
var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;
object=object[key]}return result||++index!=length?result:(length=null==object?0:object.length,
!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object)));
}function initCloneArray(array){var length=array.length,result=array.constructor(length);
return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,
result.input=array.input),result}function initCloneObject(object){
return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object));
}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;
switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);
case boolTag:case dateTag:return new Ctor((+object));case dataViewTag:
return cloneDataView(object,isDeep);case float32Tag:case float64Tag:
case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:
case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);
case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:
case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);
case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:
return cloneSymbol(object)}}function insertWrapDetails(source,details){
var length=details.length;if(!length)return source;var lastIndex=length-1;
return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],
details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n");
}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol]);
}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,
!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;
}function isIterateeCall(value,index,object){if(!isObject(object))return!1;
var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value);
}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;
return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object));
}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value;
}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];
if("function"!=typeof other||!(funcName in LazyWrapper.prototype))return!1;
if(func===other)return!0;var data=getData(other);return!!data&&func===data[0];
}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;
}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;
return value===proto}function isStrictComparable(value){return value===value&&!isObject(value);
}function matchesStrictComparable(key,srcValue){return function(object){
return null!=object&&(object[key]===srcValue&&(srcValue!==undefined||key in Object(object)));
}}function memoizeCapped(func){var result=memoize(func,function(key){
return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key}),cache=result.cache;
return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG),isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;
if(!isCommon&&!isCombo)return data;srcBitmask&WRAP_BIND_FLAG&&(data[2]=source[2],
newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG);var value=source[3];
if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,
data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4];
}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,
data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]),
value=source[7],value&&(data[7]=value),srcBitmask&WRAP_ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),
null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,
data}function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);
return result}function objectToString(value){return nativeObjectToString.call(value);
}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),
function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];
index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];
return otherArgs[start]=transform(array),apply(func,this,otherArgs);
}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1));
}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){
var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined;
}return array}function setWrapToString(wrapper,reference,bitmask){
var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)));
}function shortOut(func){var count=0,lastCalled=0;return function(){
var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,
remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;
return func.apply(undefined,arguments)}}function shuffleSelf(array,size){
var index=-1,length=array.length,lastIndex=length-1;for(size=size===undefined?length:size;++index<size;){
var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],
array[index]=value}return array.length=size,array}function toKey(value){
if("string"==typeof value||isSymbol(value))return value;var result=value+"";
return"0"==result&&1/value==-INFINITY?"-0":result}function toSource(func){
if(null!=func){try{return funcToString.call(func)}catch(e){}try{
return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){
return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];
bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value);
}),details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();
var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);
return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,
result.__values__=wrapper.__values__,result}function chunk(array,size,guard){
size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0);
var length=null==array?0:array.length;if(!length||size<1)return[];
for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);
return result}function compact(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){
var value=array[index];value&&(result[resIndex++]=value)}return result;
}function concat(){var length=arguments.length;if(!length)return[];
for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];
return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1));
}function drop(array,n,guard){var length=null==array?0:array.length;
return length?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,n<0?0:n,length)):[];
}function dropRight(array,n,guard){var length=null==array?0:array.length;
return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,
baseSlice(array,0,n<0?0:n)):[]}function dropRightWhile(array,predicate){
return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[];
}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[];
}function fill(array,value,start,end){var length=null==array?0:array.length;
return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,
end=length),baseFill(array,value,start,end)):[]}function findIndex(array,predicate,fromIndex){
var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);
return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index);
}function findLastIndex(array,predicate,fromIndex){var length=null==array?0:array.length;
if(!length)return-1;var index=length-1;return fromIndex!==undefined&&(index=toInteger(fromIndex),
index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),
baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){
var length=null==array?0:array.length;return length?baseFlatten(array,1):[];
}function flattenDeep(array){var length=null==array?0:array.length;
return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){
var length=null==array?0:array.length;return length?(depth=depth===undefined?1:toInteger(depth),
baseFlatten(array,depth)):[]}function fromPairs(pairs){for(var index=-1,length=null==pairs?0:pairs.length,result={};++index<length;){
var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){
return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){
var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);
return index<0&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index);
}function initial(array){var length=null==array?0:array.length;
return length?baseSlice(array,0,-1):[]}function join(array,separator){
return null==array?"":nativeJoin.call(array,separator)}function last(array){
var length=null==array?0:array.length;return length?array[length-1]:undefined;
}function lastIndexOf(array,value,fromIndex){var length=null==array?0:array.length;
if(!length)return-1;var index=length;return fromIndex!==undefined&&(index=toInteger(fromIndex),
index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)),
value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,!0);
}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined;
}function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array;
}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array;
}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array;
}function remove(array,predicate){var result=[];if(!array||!array.length)return result;
var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){
var value=array[index];predicate(value,index,array)&&(result.push(value),
indexes.push(index))}return basePullAt(array,indexes),result}
function reverse(array){return null==array?array:nativeReverse.call(array);
}function slice(array,start,end){var length=null==array?0:array.length;
return length?(end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,
end=length):(start=null==start?0:toInteger(start),end=end===undefined?length:toInteger(end)),
baseSlice(array,start,end)):[]}function sortedIndex(array,value){
return baseSortedIndex(array,value)}function sortedIndexBy(array,value,iteratee){
return baseSortedIndexBy(array,value,getIteratee(iteratee,2));
}function sortedIndexOf(array,value){var length=null==array?0:array.length;
if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index;
}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,!0);
}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0);
}function sortedLastIndexOf(array,value){var length=null==array?0:array.length;
if(length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index;
}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[];
}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[];
}function tail(array){var length=null==array?0:array.length;return length?baseSlice(array,1,length):[];
}function take(array,n,guard){return array&&array.length?(n=guard||n===undefined?1:toInteger(n),
baseSlice(array,0,n<0?0:n)):[]}function takeRight(array,n,guard){
var length=null==array?0:array.length;return length?(n=guard||n===undefined?1:toInteger(n),
n=length-n,baseSlice(array,n<0?0:n,length)):[]}function takeRightWhile(array,predicate){
return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[];
}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[];
}function uniq(array){return array&&array.length?baseUniq(array):[];
}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[];
}function uniqWith(array,comparator){return comparator="function"==typeof comparator?comparator:undefined,
array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){
if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,function(group){
if(isArrayLikeObject(group))return length=nativeMax(group.length,length),
!0}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index));
})}function unzipWith(array,iteratee){if(!array||!array.length)return[];
var result=unzip(array);return null==iteratee?result:arrayMap(result,function(group){
return apply(iteratee,undefined,group)})}function zipObject(props,values){
return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){
return baseZipObject(props||[],values||[],baseSet)}function chain(value){
var result=lodash(value);return result.__chain__=!0,result}function tap(value,interceptor){
return interceptor(value),value}function thru(value,interceptor){
return interceptor(value)}function wrapperChain(){return chain(this);
}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__);
}function wrapperNext(){this.__values__===undefined&&(this.__values__=toArray(this.value()));
var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];
return{done:done,value:value}}function wrapperToIterator(){return this;
}function wrapperPlant(value){for(var result,parent=this;parent instanceof baseLodash;){
var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,
result?previous.__wrapped__=clone:result=clone;var previous=clone;
parent=parent.__wrapped__}return previous.__wrapped__=value,result;
}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){
var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),
wrapped=wrapped.reverse(),wrapped.__actions__.push({func:thru,
args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__);
}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__);
}function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;
return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),
func(collection,getIteratee(predicate,3))}function filter(collection,predicate){
var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3));
}function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1);
}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY);
}function flatMapDepth(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),
baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){
var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3));
}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;
return func(collection,getIteratee(iteratee,3))}function includes(collection,value,fromIndex,guard){
collection=isArrayLike(collection)?collection:values(collection),
fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;
return fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),
isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1;
}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;
return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){
return null==collection?[]:(isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),
orders=guard?undefined:orders,isArray(orders)||(orders=null==orders?[]:[orders]),
baseOrderBy(collection,iteratees,orders))}function reduce(collection,iteratee,accumulator){
var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;
return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach);
}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;
return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight);
}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;
return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){
var func=isArray(collection)?arraySample:baseSample;return func(collection);
}function sampleSize(collection,n,guard){n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:toInteger(n);
var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n);
}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;
return func(collection)}function size(collection){if(null==collection)return 0;
if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;
var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length;
}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;
return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),
func(collection,getIteratee(predicate,3))}function after(n,func){
if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments);
}}function ary(func,n,guard){return n=guard?undefined:n,n=func&&null==n?func.length:n,
createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n);
}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),
n<=1&&(func=undefined),result}}function curry(func,arity,guard){
arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);
return result.placeholder=curry.placeholder,result}function curryRight(func,arity,guard){
arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);
return result.placeholder=curryRight.placeholder,result}function debounce(func,wait,options){
function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,
lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){
return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),
leading?invokeFunc(time):result}function remainingWait(time){
var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;
return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result;
}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;
return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait;
}function timerExpired(){var time=now();return shouldInvoke(time)?trailingEdge(time):void(timerId=setTimeout(timerExpired,remainingWait(time)));
}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,
result)}function cancel(){timerId!==undefined&&clearTimeout(timerId),
lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined;
}function flush(){return timerId===undefined?result:trailingEdge(now());
}function debounced(){var time=now(),isInvoking=shouldInvoke(time);
if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){
if(timerId===undefined)return leadingEdge(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),
invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),
result}var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;
if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,
maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,
trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=cancel,
debounced.flush=flush,debounced}function flip(func){return createWrap(func,WRAP_FLIP_FLAG);
}function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);
var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;
if(cache.has(key))return cache.get(key);var result=func.apply(this,args);
return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),
memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);
return function(){var args=arguments;switch(args.length){case 0:
return!predicate.call(this);case 1:return!predicate.call(this,args[0]);
case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2]);
}return!predicate.apply(this,args)}}function once(func){return before(2,func);
}function rest(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
return start=start===undefined?start:toInteger(start),baseRest(func,start);
}function spread(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
return start=null==start?0:nativeMax(toInteger(start),0),baseRest(function(args){
var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),
apply(func,this,otherArgs)})}function throttle(func,wait,options){
var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);
return isObject(options)&&(leading="leading"in options?!!options.leading:leading,
trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{
leading:leading,maxWait:wait,trailing:trailing})}function unary(func){
return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value);
}function castArray(){if(!arguments.length)return[];var value=arguments[0];
return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG);
}function cloneWith(value,customizer){return customizer="function"==typeof customizer?customizer:undefined,
baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){
return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){
return customizer="function"==typeof customizer?customizer:undefined,
baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer);
}function conformsTo(object,source){return null==source||baseConformsTo(object,source,keys(source));
}function eq(value,other){return value===other||value!==value&&other!==other;
}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value);
}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);
}function isBoolean(value){return value===!0||value===!1||isObjectLike(value)&&baseGetTag(value)==boolTag;
}function isElement(value){return isObjectLike(value)&&1===value.nodeType&&!isPlainObject(value);
}function isEmpty(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;
var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;
if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;
return!0}function isEqual(value,other){return baseIsEqual(value,other);
}function isEqualWith(value,other,customizer){customizer="function"==typeof customizer?customizer:undefined;
var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result;
}function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);
return tag==errorTag||tag==domExcTag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value);
}function isFinite(value){return"number"==typeof value&&nativeIsFinite(value);
}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);
return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;
}function isInteger(value){return"number"==typeof value&&value==toInteger(value);
}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;
}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type);
}function isObjectLike(value){return null!=value&&"object"==typeof value;
}function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source));
}function isMatchWith(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,
baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){
return isNumber(value)&&value!=+value}function isNative(value){
if(isMaskable(value))throw new Error(CORE_ERROR_TEXT);return baseIsNative(value);
}function isNull(value){return null===value}function isNil(value){
return null==value}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag;
}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;
var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;
return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString;
}function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER;
}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag;
}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag;
}function isUndefined(value){return value===undefined}function isWeakMap(value){
return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){
return isObjectLike(value)&&baseGetTag(value)==weakSetTag}function toArray(value){
if(!value)return[];if(isArrayLike(value))return isString(value)?stringToArray(value):copyArray(value);
if(symIterator&&value[symIterator])return iteratorToArray(value[symIterator]());
var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;
return func(value)}function toFinite(value){if(!value)return 0===value?value:0;
if(value=toNumber(value),value===INFINITY||value===-INFINITY){
var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0;
}function toInteger(value){var result=toFinite(value),remainder=result%1;
return result===result?remainder?result-remainder:result:0}function toLength(value){
return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0;
}function toNumber(value){if("number"==typeof value)return value;
if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;
value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;
value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);
return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;
}function toPlainObject(value){return copyObject(value,keysIn(value));
}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):0===value?value:0;
}function toString(value){return null==value?"":baseToString(value);
}function create(prototype,properties){var result=baseCreate(prototype);
return null==properties?result:baseAssign(result,properties)}
function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn);
}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight);
}function forIn(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn);
}function forInRight(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn);
}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3));
}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3));
}function functions(object){return null==object?[]:baseFunctions(object,keys(object));
}function functionsIn(object){return null==object?[]:baseFunctions(object,keysIn(object));
}function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,path);
return result===undefined?defaultValue:result}function has(object,path){
return null!=object&&hasPath(object,path,baseHas)}function hasIn(object,path){
return null!=object&&hasPath(object,path,baseHasIn)}function keys(object){
return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);
}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object);
}function mapKeys(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),
baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value);
}),result}function mapValues(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),
baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object));
}),result}function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)));
}function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),function(prop){
return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){
return predicate(value,path[0])})}function result(object,path,defaultValue){
path=castPath(path,object);var index=-1,length=path.length;for(length||(length=1,
object=undefined);++index<length;){var value=null==object?undefined:object[toKey(path[index])];
value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value;
}return object}function set(object,path,value){return null==object?object:baseSet(object,path,value);
}function setWith(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,
null==object?object:baseSet(object,path,value,customizer)}function transform(object,iteratee,accumulator){
var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);
if(iteratee=getIteratee(iteratee,4),null==accumulator){var Ctor=object&&object.constructor;
accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)&&isFunction(Ctor)?baseCreate(getPrototype(object)):{};
}return(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){
return iteratee(accumulator,value,index,object)}),accumulator;
}function unset(object,path){return null==object||baseUnset(object,path);
}function update(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater));
}function updateWith(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,
null==object?object:baseUpdate(object,path,castFunction(updater),customizer);
}function values(object){return null==object?[]:baseValues(object,keys(object));
}function valuesIn(object){return null==object?[]:baseValues(object,keysIn(object));
}function clamp(number,lower,upper){return upper===undefined&&(upper=lower,
lower=undefined),upper!==undefined&&(upper=toNumber(upper),upper=upper===upper?upper:0),
lower!==undefined&&(lower=toNumber(lower),lower=lower===lower?lower:0),
baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){
return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),
number=toNumber(number),baseInRange(number,start,end)}function random(lower,upper,floating){
if(floating&&"boolean"!=typeof floating&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined),
floating===undefined&&("boolean"==typeof upper?(floating=upper,
upper=undefined):"boolean"==typeof lower&&(floating=lower,lower=undefined)),
lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),
upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),
lower>upper){var temp=lower;lower=upper,upper=temp}if(floating||lower%1||upper%1){
var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper);
}return baseRandom(lower,upper)}function capitalize(string){return upperFirst(toString(string).toLowerCase());
}function deburr(string){return string=toString(string),string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"");
}function endsWith(string,target,position){string=toString(string),
target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);
var end=position;return position-=target.length,position>=0&&string.slice(position,end)==target;
}function escape(string){return string=toString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string;
}function escapeRegExp(string){return string=toString(string),
string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string;
}function pad(string,length,chars){string=toString(string),length=toInteger(length);
var strLength=length?stringSize(string):0;if(!length||strLength>=length)return string;
var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars);
}function padEnd(string,length,chars){string=toString(string),
length=toInteger(length);var strLength=length?stringSize(string):0;
return length&&strLength<length?string+createPadding(length-strLength,chars):string;
}function padStart(string,length,chars){string=toString(string),
length=toInteger(length);var strLength=length?stringSize(string):0;
return length&&strLength<length?createPadding(length-strLength,chars)+string:string;
}function parseInt(string,radix,guard){return guard||null==radix?radix=0:radix&&(radix=+radix),
nativeParseInt(toString(string).replace(reTrimStart,""),radix||0);
}function repeat(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),
baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);
return args.length<3?string:string.replace(args[1],args[2])}function split(string,separator,limit){
return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),
(limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0)?(string=toString(string),
string&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&(separator=baseToString(separator),
!separator&&hasUnicode(string))?castSlice(stringToArray(string),0,limit):string.split(separator,limit)):[];
}function startsWith(string,target,position){return string=toString(string),
position=null==position?0:baseClamp(toInteger(position),0,string.length),
target=baseToString(target),string.slice(position,position+target.length)==target;
}function template(string,options,guard){var settings=lodash.templateSettings;
guard&&isIterateeCall(string,options,guard)&&(options=undefined),
string=toString(string),options=assignInWith({},options,settings,customDefaultsAssignIn);
var isEscaping,isEvaluating,imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";
string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){
return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),
escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),
evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),
interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),
index=offset+match.length,match}),source+="';\n";var variable=options.variable;
variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),
source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";
var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues);
});if(result.source=source,isError(result))throw result;return result;
}function toLower(value){return toString(value).toLowerCase();
}function toUpper(value){return toString(value).toUpperCase();
}function trim(string,chars,guard){if(string=toString(string),
string&&(guard||chars===undefined))return string.replace(reTrim,"");
if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;
return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){
if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrimEnd,"");
if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;
return castSlice(strSymbols,0,end).join("")}function trimStart(string,chars,guard){
if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrimStart,"");
if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));
return castSlice(strSymbols,start).join("")}function truncate(string,options){
var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;
if(isObject(options)){var separator="separator"in options?options.separator:separator;
length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission;
}string=toString(string);var strLength=string.length;if(hasUnicode(string)){
var strSymbols=stringToArray(string);strLength=strSymbols.length;
}if(length>=strLength)return string;var end=length-stringSize(omission);
if(end<1)return omission;var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);
if(separator===undefined)return result+omission;if(strSymbols&&(end+=result.length-end),
isRegExp(separator)){if(string.slice(end).search(separator)){
var match,substring=result;for(separator.global||(separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")),
separator.lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;
result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){
var index=result.lastIndexOf(separator);index>-1&&(result=result.slice(0,index));
}return result+omission}function unescape(string){return string=toString(string),
string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string;
}function words(string,pattern,guard){return string=toString(string),
pattern=guard?undefined:pattern,pattern===undefined?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[];
}function cond(pairs){var length=null==pairs?0:pairs.length,toIteratee=getIteratee();
return pairs=length?arrayMap(pairs,function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);
return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){
for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args);
}})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG));
}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){
return null==value||value!==value?defaultValue:value}function identity(value){
return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,CLONE_DEEP_FLAG));
}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG));
}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG));
}function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);
null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,
source=object,object=this,methodNames=baseFunctions(source,keys(source)));
var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);
return arrayEach(methodNames,function(methodName){var func=source[methodName];
object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){
var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);
return actions.push({func:func,args:arguments,thisArg:object}),
result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments));
})}),object}function noConflict(){return root._===this&&(root._=oldDash),
this}function noop(){}function nthArg(n){return n=toInteger(n),
baseRest(function(args){return baseNth(args,n)})}function property(path){
return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path);
}function propertyOf(object){return function(path){return null==object?undefined:baseGet(object,path);
}}function stubArray(){return[]}function stubFalse(){return!1;
}function stubObject(){return{}}function stubString(){return"";
}function stubTrue(){return!0}function times(n,iteratee){if(n=toInteger(n),
n<1||n>MAX_SAFE_INTEGER)return[];var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);
iteratee=getIteratee(iteratee),n-=MAX_ARRAY_LENGTH;for(var result=baseTimes(length,iteratee);++index<n;)iteratee(index);
return result}function toPath(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)));
}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id;
}function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined;
}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined;
}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){
return baseMean(array,getIteratee(iteratee,2))}function min(array){
return array&&array.length?baseExtremum(array,identity,baseLt):undefined;
}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined;
}function sum(array){return array&&array.length?baseSum(array,identity):0;
}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0;
}context=null==context?root:_.defaults(root.Object(),context,_.pick(root,contextProps));
var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=context["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=function(){
var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");
return uid?"Symbol(src)_1."+uid:""}(),nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined,defineProperty=function(){
try{var func=getNative(Object,"defineProperty");return func({},"",{}),
func}catch(e){}}(),ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=WeakMap&&new WeakMap,realNames={},dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined,baseCreate=function(){
function object(){}return function(proto){if(!isObject(proto))return{};
if(objectCreate)return objectCreate(proto);object.prototype=proto;
var result=new object;return object.prototype=undefined,result;
}}();lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,
interpolate:reInterpolate,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,
lodash.prototype.constructor=lodash,LodashWrapper.prototype=baseCreate(baseLodash.prototype),
LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=baseCreate(baseLodash.prototype),
LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=hashClear,
Hash.prototype["delete"]=hashDelete,Hash.prototype.get=hashGet,
Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,
ListCache.prototype["delete"]=listCacheDelete,ListCache.prototype.get=listCacheGet,
ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,
MapCache.prototype.clear=mapCacheClear,MapCache.prototype["delete"]=mapCacheDelete,
MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,
MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,
SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,
Stack.prototype["delete"]=stackDelete,Stack.prototype.get=stackGet,
Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0),baseFor=createBaseFor(),baseForRight=createBaseFor(!0),baseSetData=metaMap?function(func,data){
return metaMap.set(func,data),func}:identity,baseSetToString=defineProperty?function(func,string){
return defineProperty(func,"toString",{configurable:!0,enumerable:!1,
value:constant(string),writable:!0})}:identity,castRest=baseRest,clearTimeout=ctxClearTimeout||function(id){
return root.clearTimeout(id)},createSet=Set&&1/setToArray(new Set([,-0]))[1]==INFINITY?function(values){
return new Set(values)}:noop,getData=metaMap?function(func){return metaMap.get(func);
}:noop,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),
arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol);
}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){
for(var result=[];object;)arrayPush(result,getSymbols(object)),
object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;
(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){
var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";
if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;
case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;
case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;
}return result});var isMaskable=coreJsData?isFunction:stubFalse,setData=shortOut(baseSetData),setTimeout=ctxSetTimeout||function(func,wait){
return root.setTimeout(func,wait)},setToString=shortOut(baseSetToString),stringToPath=memoizeCapped(function(string){
var result=[];return reLeadingDot.test(string)&&result.push(""),
string.replace(rePropName,function(match,number,quote,string){
result.push(quote?string.replace(reEscapeChar,"$1"):number||match);
}),result}),difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[];
}),differenceBy=baseRest(function(array,values){var iteratee=last(values);
return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[];
}),differenceWith=baseRest(function(array,values){var comparator=last(values);
return isArrayLikeObject(comparator)&&(comparator=undefined),
isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[];
}),intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);
return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[];
}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);
return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),
mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[];
}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);
return comparator="function"==typeof comparator?comparator:undefined,
comparator&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[];
}),pull=baseRest(pullAll),pullAt=flatRest(function(array,indexes){
var length=null==array?0:array.length,result=baseAt(array,indexes);
return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index;
}).sort(compareAscending)),result}),union=baseRest(function(arrays){
return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){
var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),
baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2));
}),unionWith=baseRest(function(arrays){var comparator=last(arrays);
return comparator="function"==typeof comparator?comparator:undefined,
baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator);
}),without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[];
}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject));
}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),
baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2));
}),xorWith=baseRest(function(arrays){var comparator=last(arrays);
return comparator="function"==typeof comparator?comparator:undefined,
baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator);
}),zip=baseRest(unzip),zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;
return iteratee="function"==typeof iteratee?(arrays.pop(),iteratee):undefined,
unzipWith(arrays,iteratee)}),wrapperAt=flatRest(function(paths){
var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){
return baseAt(object,paths)};return!(length>1||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?(value=value.slice(start,+start+(length?1:0)),
value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined
}),new LodashWrapper(value,this.__chain__).thru(function(array){
return length&&!array.length&&array.push(undefined),array})):this.thru(interceptor);
}),countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1);
}),find=createFind(findIndex),findLast=createFind(findLastIndex),groupBy=createAggregator(function(result,value,key){
hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value]);
}),invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc="function"==typeof path,result=isArrayLike(collection)?Array(collection.length):[];
return baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args);
}),result}),keyBy=createAggregator(function(result,value,key){
baseAssignValue(result,key,value)}),partition=createAggregator(function(result,value,key){
result[key?0:1].push(value)},function(){return[[],[]]}),sortBy=baseRest(function(collection,iteratees){
if(null==collection)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),
baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=ctxNow||function(){
return root.Date.now()},bind=baseRest(function(func,thisArg,partials){
var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));
bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders);
}),bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;
if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));
bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders);
}),defer=baseRest(function(func,args){return baseDelay(func,1,args);
}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args);
});memoize.Cache=MapCache;var overArgs=castRest(function(func,transforms){
transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));
var funcsLength=transforms.length;return baseRest(function(args){
for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);
return apply(func,this,args)})}),partial=baseRest(function(func,partials){
var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders);
}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));
return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders);
}),rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes);
}),gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){
return value>=other}),isArguments=baseIsArguments(function(){
return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee");
},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer,isBuffer=nativeIsBuffer||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,lt=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){
return value<=other}),assign=createAssigner(function(object,source){
if(isPrototype(source)||isArrayLike(source))return void copyObject(source,keys(source),object);
for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key]);
}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object);
}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){
copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){
copyObject(source,keys(source),object,customizer)}),at=flatRest(baseAt),defaults=baseRest(function(args){
return args.push(undefined,customDefaultsAssignIn),apply(assignInWith,undefined,args);
}),defaultsDeep=baseRest(function(args){return args.push(undefined,customDefaultsMerge),
apply(mergeWith,undefined,args)}),invert=createInverter(function(result,value,key){
result[value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){
hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key];
},getIteratee),invoke=baseRest(baseInvoke),merge=createAssigner(function(object,source,srcIndex){
baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){
baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){
var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,function(path){
return path=castPath(path,object),isDeep||(isDeep=path.length>1),
path}),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));
for(var length=paths.length;length--;)baseUnset(result,paths[length]);
return result}),pick=flatRest(function(object,paths){return null==object?{}:basePick(object,paths);
}),toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn),camelCase=createCompounder(function(result,word,index){
return word=word.toLowerCase(),result+(index?capitalize(word):word);
}),kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase();
}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase();
}),lowerFirst=createCaseFirst("toLowerCase"),snakeCase=createCompounder(function(result,word,index){
return result+(index?"_":"")+word.toLowerCase()}),startCase=createCompounder(function(result,word,index){
return result+(index?" ":"")+upperFirst(word)}),upperCase=createCompounder(function(result,word,index){
return result+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase"),attempt=baseRest(function(func,args){
try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e);
}}),bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){
key=toKey(key),baseAssignValue(object,key,bind(object[key],object));
}),object}),flow=createFlow(),flowRight=createFlow(!0),method=baseRest(function(path,args){
return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){
return function(path){return baseInvoke(object,path,args)}}),over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome),range=createRange(),rangeRight=createRange(!0),add=createMathOperation(function(augend,addend){
return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){
return dividend/divisor},1),floor=createRound("floor"),multiply=createMathOperation(function(multiplier,multiplicand){
return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){
return minuend-subtrahend},0);return lodash.after=after,lodash.ary=ary,
lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,
lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,
lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,
lodash.castArray=castArray,lodash.chain=chain,lodash.chunk=chunk,
lodash.compact=compact,lodash.concat=concat,lodash.cond=cond,
lodash.conforms=conforms,lodash.constant=constant,lodash.countBy=countBy,
lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,
lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,
lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,
lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,
lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,
lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,
lodash.flatMap=flatMap,lodash.flatMapDeep=flatMapDeep,lodash.flatMapDepth=flatMapDepth,
lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flattenDepth=flattenDepth,
lodash.flip=flip,lodash.flow=flow,lodash.flowRight=flowRight,
lodash.fromPairs=fromPairs,lodash.functions=functions,lodash.functionsIn=functionsIn,
lodash.groupBy=groupBy,lodash.initial=initial,lodash.intersection=intersection,
lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,
lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,
lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,
lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=mapKeys,lodash.mapValues=mapValues,
lodash.matches=matches,lodash.matchesProperty=matchesProperty,
lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,
lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,
lodash.negate=negate,lodash.nthArg=nthArg,lodash.omit=omit,lodash.omitBy=omitBy,
lodash.once=once,lodash.orderBy=orderBy,lodash.over=over,lodash.overArgs=overArgs,
lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,
lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,
lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=propertyOf,
lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=pullAllBy,
lodash.pullAllWith=pullAllWith,lodash.pullAt=pullAt,lodash.range=range,
lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=reject,
lodash.remove=remove,lodash.rest=rest,lodash.reverse=reverse,
lodash.sampleSize=sampleSize,lodash.set=set,lodash.setWith=setWith,
lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=sortBy,
lodash.sortedUniq=sortedUniq,lodash.sortedUniqBy=sortedUniqBy,
lodash.split=split,lodash.spread=spread,lodash.tail=tail,lodash.take=take,
lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,
lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,
lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,
lodash.toPairsIn=toPairsIn,lodash.toPath=toPath,lodash.toPlainObject=toPlainObject,
lodash.transform=transform,lodash.unary=unary,lodash.union=union,
lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=uniq,
lodash.uniqBy=uniqBy,lodash.uniqWith=uniqWith,lodash.unset=unset,
lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=update,
lodash.updateWith=updateWith,lodash.values=values,lodash.valuesIn=valuesIn,
lodash.without=without,lodash.words=words,lodash.wrap=wrap,lodash.xor=xor,
lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=zipObject,
lodash.zipObjectDeep=zipObjectDeep,lodash.zipWith=zipWith,lodash.entries=toPairs,
lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,
mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,
lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=clamp,
lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.cloneDeepWith=cloneDeepWith,
lodash.cloneWith=cloneWith,lodash.conformsTo=conformsTo,lodash.deburr=deburr,
lodash.defaultTo=defaultTo,lodash.divide=divide,lodash.endsWith=endsWith,
lodash.eq=eq,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,
lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,
lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,
lodash.findLastKey=findLastKey,lodash.floor=floor,lodash.forEach=forEach,
lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,
lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.get=get,
lodash.gt=gt,lodash.gte=gte,lodash.has=has,lodash.hasIn=hasIn,
lodash.head=head,lodash.identity=identity,lodash.includes=includes,
lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.invoke=invoke,
lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,
lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,
lodash.isBoolean=isBoolean,lodash.isBuffer=isBuffer,lodash.isDate=isDate,
lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,
lodash.isEqualWith=isEqualWith,lodash.isError=isError,lodash.isFinite=isFinite,
lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,
lodash.isMap=isMap,lodash.isMatch=isMatch,lodash.isMatchWith=isMatchWith,
lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNil=isNil,
lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,
lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,
lodash.isRegExp=isRegExp,lodash.isSafeInteger=isSafeInteger,lodash.isSet=isSet,
lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,
lodash.isUndefined=isUndefined,lodash.isWeakMap=isWeakMap,lodash.isWeakSet=isWeakSet,
lodash.join=join,lodash.kebabCase=kebabCase,lodash.last=last,
lodash.lastIndexOf=lastIndexOf,lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,
lodash.lt=lt,lodash.lte=lte,lodash.max=max,lodash.maxBy=maxBy,
lodash.mean=mean,lodash.meanBy=meanBy,lodash.min=min,lodash.minBy=minBy,
lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=stubObject,
lodash.stubString=stubString,lodash.stubTrue=stubTrue,lodash.multiply=multiply,
lodash.nth=nth,lodash.noConflict=noConflict,lodash.noop=noop,
lodash.now=now,lodash.pad=pad,lodash.padEnd=padEnd,lodash.padStart=padStart,
lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,
lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.replace=replace,
lodash.result=result,lodash.round=round,lodash.runInContext=runInContext,
lodash.sample=sample,lodash.size=size,lodash.snakeCase=snakeCase,
lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedIndexBy=sortedIndexBy,
lodash.sortedIndexOf=sortedIndexOf,lodash.sortedLastIndex=sortedLastIndex,
lodash.sortedLastIndexBy=sortedLastIndexBy,lodash.sortedLastIndexOf=sortedLastIndexOf,
lodash.startCase=startCase,lodash.startsWith=startsWith,lodash.subtract=subtract,
lodash.sum=sum,lodash.sumBy=sumBy,lodash.template=template,lodash.times=times,
lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,
lodash.toLower=toLower,lodash.toNumber=toNumber,lodash.toSafeInteger=toSafeInteger,
lodash.toString=toString,lodash.toUpper=toUpper,lodash.trim=trim,
lodash.trimEnd=trimEnd,lodash.trimStart=trimStart,lodash.truncate=truncate,
lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.upperCase=upperCase,
lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,
lodash.first=head,mixin(lodash,function(){var source={};return baseForOwn(lodash,function(func,methodName){
hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func);
}),source}(),{chain:!1}),lodash.VERSION=VERSION,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){
lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){
LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);
var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();
return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({
size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")
}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){
return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){
var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;
LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();
return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),
type:type}),result.__filtered__=result.__filtered__||isFilter,
result}}),arrayEach(["head","last"],function(methodName,index){
var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){
return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){
var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){
return this.__filtered__?new LazyWrapper(this):this[dropName](1);
}}),LazyWrapper.prototype.compact=function(){return this.filter(identity);
},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head();
},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate);
},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){
return"function"==typeof path?new LazyWrapper(this):this.map(function(value){
return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){
return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){
start=toInteger(start);var result=this;return result.__filtered__&&(start>0||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),
end!==undefined&&(end=toInteger(end),result=end<0?result.dropRight(-end):result.take(end-start)),
result)},LazyWrapper.prototype.takeRightWhile=function(predicate){
return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){
return this.take(MAX_ARRAY_LENGTH)},baseForOwn(LazyWrapper.prototype,function(func,methodName){
var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);
lodashFunc&&(lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value),interceptor=function(value){
var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result;
};useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);
var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;
if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);
var result=func.apply(value,args);return result.__actions__.push({
func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll);
}return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),
isUnwrapped?isTaker?result.value()[0]:result.value():result)});
}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){
var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);
lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){
var value=this.value();return func.apply(isArray(value)?value:[],args);
}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args);
})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){
var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"",names=realNames[key]||(realNames[key]=[]);
names.push({name:methodName,func:lodashFunc})}}),realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{
name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=lazyClone,
LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,
lodash.prototype.at=wrapperAt,lodash.prototype.chain=wrapperChain,
lodash.prototype.commit=wrapperCommit,lodash.prototype.next=wrapperNext,
lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,
lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,
lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=wrapperToIterator),
lodash},_=runInContext();root._=_,__WEBPACK_AMD_DEFINE_RESULT__=function(){
return _}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));
}).call(this)}).call(exports,function(){return this}(),__webpack_require__(10)(module));
},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},
module.paths=[],module.children=[],module.webpackPolyfill=1),
module}},function(module,exports,__webpack_require__){"use strict";
var __extends=this&&this.__extends||function(d,b){function __(){
this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},items_data_1=__webpack_require__(12),graphchart_data_internal_1=__webpack_require__(14),exception_1=__webpack_require__(5),utils_1=__webpack_require__(8),graphchart_style_1=__webpack_require__(17);
console.log("loading data module.");var GraphChartData=function(_super){
function GraphChartData(parent){void 0===parent&&(parent=void 0);
var _this=_super.call(this)||this;return _this.chart=parent,_this.initData(),
_this}return __extends(GraphChartData,_super),GraphChartData.prototype.initData=function(){
return this.inData=new graphchart_data_internal_1.GraphDataInternalData,
!0},GraphChartData.prototype.resetGraph=function(externalGraph,options){
return void 0===options&&(options={}),this.dropAll(),this.initData(),
this.addGraph(externalGraph,options),this},GraphChartData.prototype.reloadGraph=function(externalGraph,options){
var _this=this;return void 0===options&&(options={}),this.dropAll(),
this.addGraph(externalGraph,options),this.getNodes().forEach(function(node){
var coreNode=_this.chart.render.engine.core.getNode(node.id);void 0!==coreNode?(node.x=coreNode.x,
node.y=coreNode.y):(node.x=500*Math.random(),node.y=500*Math.random());
}),this},GraphChartData.prototype.addGraph=function(externalGraph,options){
var _this=this;void 0===options&&(options={node:"extend",link:{}
});try{externalGraph.nodes.forEach(function(node){_this.addNode(node,options.node);
}),externalGraph.links.forEach(function(link){_this.addLink(link,options.link);
})}catch(e){var err=new exception_1.GException(1005,e);console.warn(err.toString());
}return this},GraphChartData.prototype.dropGraph=function(externalGraph){
var _this=this;try{externalGraph.nodes.forEach(function(node){
_this.dropNode(node.type,node.id)}),externalGraph.links.forEach(function(link){
_this.dropLink(link.type,link.source.type,link.source.id,link.target.type,link.target.id);
})}catch(e){var err=new exception_1.GException(1005,e);console.warn(err.toString());
}return this},GraphChartData.prototype.addNode=function(node,option){
var _this=this;void 0===option&&(option="extend");var result=this.inData.addNode(node,option);
try{this.chart.render.preStyle.node.forEach(function(item){_this.evaluateNodeExpression(result,item.condition)&&_this.applyNodeStyle(result,item.style);
})}catch(err){console.warn(err.toString())}return result},GraphChartData.prototype.addLink=function(link,option){
var _this=this;void 0===option&&(option={link:"extend",node:"extend"
}),void 0===option.link&&(option.link="extend"),void 0===option.node&&(option.node="extend");
var result=this.inData.addLink(link,option);try{this.chart.render.preStyle.link.forEach(function(item){
_this.evaluateLinkExpression(result,item.condition)&&_this.applyLinkStyle(result,item.style);
})}catch(err){console.warn(err.toString())}var sourceNode=this.inData.getNodeByInternalID(result.source.id),targetNode=this.inData.getNodeByInternalID(result.target.id);
try{this.chart.render.preStyle.node.forEach(function(item){_this.evaluateNodeExpression(sourceNode,item.condition)&&_this.applyNodeStyle(sourceNode,item.style),
_this.evaluateNodeExpression(targetNode,item.condition)&&_this.applyNodeStyle(targetNode,item.style);
})}catch(err){console.warn(err.toString())}return result},GraphChartData.prototype.getInternalData=function(){
return this.inData},GraphChartData.prototype.getData=function(){
return{nodes:this.getNodes(),links:this.getLinks()}},GraphChartData.prototype.getNodes=function(exType,exID){
var _this=this;try{if(void 0===exType&&void 0===exID)return this.inData.array.nodes.map(function(n){
return _this.chart.layout.updateSyncPositionOfNodeByInternalID(n.id),
n});if(void 0!==exType&&void 0===exID)return this.inData.array.nodes.filter(function(n){
return n.exType===exType}).map(function(n){return _this.chart.layout.updateSyncPositionOfNodeByInternalID(n.id),
n});if(void 0!==exType&&void 0!==exID){var tmpN=this.inData.getNodeByExternalTypeID(exType,exID);
return void 0!==tmpN&&this.chart.layout.updateSyncPositionOfNodeByInternalID(tmpN.id),
tmpN}throw new exception_1.GException(1001,"Unknown getNodes inputs.");
}catch(err){return void console.warn(err.toString())}},GraphChartData.prototype.getLinks=function(exType,sourceExType,sourceExID,targetExType,targetExID){
var _this=this;try{if(void 0===exType&&void 0===sourceExType&&void 0===sourceExID&&void 0===targetExType&&void 0===targetExID)return this.inData.array.links.map(function(l){
return _this.chart.layout.updateSyncPositionOfLinkByInternalID(l.id),
l});if(void 0!==exType&&void 0===sourceExType&&void 0===sourceExID&&void 0===targetExType&&void 0===targetExID)return this.inData.array.links.filter(function(l){
return l.exType===exType}).map(function(l){return _this.chart.layout.updateSyncPositionOfLinkByInternalID(l.id),
l});if(void 0!==exType&&void 0!==sourceExType&&void 0!==sourceExID&&void 0===targetExType&&void 0===targetExID){
var source_1=this.getNodes(sourceExType,sourceExID);return void 0!==source_1?this.inData.array.links.filter(function(l){
return l.directed===!1?l.exType===exType&&(l.source.id===source_1.id||l.target.id===source_1.id):l.exType===exType&&l.source.id===source_1.id;
}).map(function(l){return _this.chart.layout.updateSyncPositionOfLinkByInternalID(l.id),
l}):[]}if(void 0!==exType&&void 0!==sourceExType&&void 0!==sourceExID&&void 0!==targetExType&&void 0!==targetExID){
var tmpL=this.inData.getLinkByExternalTypeID(exType,sourceExType,sourceExID,targetExType,targetExID);
return void 0!==tmpL&&this.chart.layout.updateSyncPositionOfLinkByInternalID(tmpL.id),
tmpL}throw new exception_1.GException(1002,"Unknown getLinks inputs.");
}catch(err){return void console.warn(err.toString())}},GraphChartData.prototype.dropNode=function(exType,exID,option){
void 0===option&&(option=!1);try{if("string"!=typeof exType||"string"!=typeof exID)throw new exception_1.GException(1003,"The external type and id must be string type.");
var inNode=this.inData.getNodeByExternalTypeID(exType,exID);if(void 0===inNode)throw new exception_1.GException(1003,"The external type and id can not be found.");
return this.inData.dropNode(inNode.id,option)}catch(err){return void console.warn(err.toString());
}},GraphChartData.prototype.dropLink=function(exType,sourceExType,sourceExID,targetExType,targetExID,option){
void 0===option&&(option=!1);try{if("string"!=typeof exType||"string"!=typeof sourceExType||"string"!=typeof sourceExID||"string"!=typeof targetExType||"string"!=typeof targetExID)throw new exception_1.GException(1004,"The external type, source type/id, target type/id must be string type.");
var inLink=this.inData.getLinkByExternalTypeID(exType,sourceExType,sourceExID,targetExType,targetExID);
if(void 0===inLink)throw new exception_1.GException(1004,"The external link can not be found.");
return this.inData.dropLink(inLink.id,option)}catch(err){return void console.warn(err.toString());
}},GraphChartData.prototype.dropAll=function(){var _this=this;
try{var result={nodes:[],links:[]};return result.nodes=utils_1.Utils.concat(result.nodes,this.getNodes()),
result.links=utils_1.Utils.concat(result.links,this.getLinks()),
result.nodes.forEach(function(n){_this.dropNode(n.exType,n.exID);
}),result}catch(err){return console.warn(err.toString()),{nodes:[],
links:[]}}},GraphChartData.prototype.getNeighbors=function(exType,exID){
var inNode=this.inData.getNodeByExternalTypeID(exType,exID);return void 0!==inNode?(this.chart.layout.updateSyncPositionOfNodeByInternalID(inNode.id),
this.inData.getNeighbors(inNode.id)):{all:[],in:[],out:[]}},GraphChartData.prototype.setSelection=function(selected){
return this.chart.render.engine.core.selection(selected.map(function(item){
return item.styles.isSelected=!0,item.id})),this},GraphChartData.prototype.getSelectedNodes=function(){
var _this=this,currentSelection=this.chart.render.engine.core.selection();
return currentSelection=currentSelection.filter(function(item){
return item.isNode}).map(function(node){return _this.chart.layout.updateSyncPositionOfNodeByInternalID(node.id),
node.id}),this.inData.getNodes(currentSelection)},GraphChartData.prototype.getSelectedLinks=function(){
var currentSelection=this.chart.render.engine.core.selection(),bothSourceTargetSelectedLinks=[];
return this.chart.render.engine.core.links().forEach(function(l){
l.from.selected&&l.to.selected&&bothSourceTargetSelectedLinks.push(l.id);
}),currentSelection=currentSelection.filter(function(item){return item.isLink;
}).map(function(link){return link.id}),currentSelection=utils_1.Utils.concat(currentSelection,bothSourceTargetSelectedLinks),
this.inData.getLinks(currentSelection)},GraphChartData.prototype.getNodeLegends=function(){
var result={};return this.getNodes().forEach(function(node){result[node.exType]=!0;
}),Object.keys(result)},GraphChartData.prototype.getLinkLegends=function(){
var result={};return this.getLinks().forEach(function(link){result[link.exType]=!0;
}),Object.keys(result)},GraphChartData.prototype.getNodeAttributes=function(){
var _this=this,legends=this.getNodeLegends(),labels={};this.getNodes().forEach(function(node){
labels[node.exType]=labels[node.exType]||{},labels[node.exType].id=node.labels.id||!1,
labels[node.exType].type=node.labels.type||!1;for(var attr in node.attrs)Object.prototype.hasOwnProperty.call(node.attrs,attr)&&(labels[node.exType][attr]=node.labels[attr]||!1);
});var result=legends.map(function(legend){return{type:legend,
icon:_this.chart.render.engine.icons.getIcon(_this.chart.render.icons[legend]),
color:_this.chart.render.engine.color.getColor(legend),isSelected:!0,
labels:Object.keys(labels[legend]).map(function(label){return{
attributeName:label,isSelected:labels[legend][label]}})}});return result;
},GraphChartData.prototype.getLinkAttributes=function(){var _this=this,legends=this.getLinkLegends(),labels={};
this.getLinks().forEach(function(link){labels[link.exType]=labels[link.exType]||{},
labels[link.exType].type=link.labels.type||!1;for(var attr in link.attrs)Object.prototype.hasOwnProperty.call(link.attrs,attr)&&(labels[link.exType][attr]=link.labels[attr]||!1);
});var result=legends.map(function(legend){return{type:legend,
color:_this.chart.render.engine.color.getColor(legend),isSelected:!0,
labels:Object.keys(labels[legend]).map(function(label){return{
attributeName:label,isSelected:labels[legend][label]}})}});return result;
},GraphChartData.prototype.evaluateNodeExpression=function(inNode,condition){
var result=!1;if(inNode=utils_1.Utils.cloneDeep(inNode),"function"==typeof condition)return condition(inNode,this.chart);
var template=["node = node || {};","var id = node.exID;","var type = node.exType;","var attrs = node.attrs || {};","var styles = node.styles || {};","var others = node.others || {};","var labels = node.labels || {};","return ("+condition+");"];
try{var fn=new Function("node",template.join("\n"));result=fn(inNode);
}catch(err){result=!1,console.error(new exception_1.GException(1007,err.toString()).toString());
}return result},GraphChartData.prototype.applyNodeStyle=function(inNode,style){
return utils_1.Utils.extend(inNode.styles,new graphchart_style_1.GraphStyle.GraphChartNodeStyles(style)),
this},GraphChartData.prototype.evaluateLinkExpression=function(inLink,condition){
var result=!1;if(inLink=utils_1.Utils.cloneDeep(inLink),"function"==typeof condition)return condition(inLink,this.chart);
var template=["link = link || {};","var source = link.source || {};","source.id = link.source.exID;","source.type = link.source.exType;","var target = link.target || {};","target.id = link.target.exID;","target.type = link.target.exType;","var attrs = link.attrs || {};","var type = link.exType;","var directed = link.directed;","var styles = link.styles || {};","var labels = link.labels || {};","var others = link.others || {};","return ("+condition+");"];
try{var fn=new Function("link",template.join("\n"));result=fn(inLink);
}catch(err){result=!1,console.error(new exception_1.GException(1008,err.toString()).toString());
}return result},GraphChartData.prototype.applyLinkStyle=function(inLink,style){
return utils_1.Utils.extend(inLink.styles,new graphchart_style_1.GraphStyle.GraphChartLinkStyles(style)),
this},GraphChartData}(items_data_1.ItemsData);exports.GraphChartData=GraphChartData;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},base_data_1=__webpack_require__(13),ItemsData=function(_super){
function ItemsData(){return _super.call(this)||this}return __extends(ItemsData,_super),
ItemsData}(base_data_1.BaseData);exports.ItemsData=ItemsData},function(module,exports){
"use strict";var BaseData=function(){function BaseData(){this.error="";
}return BaseData}();exports.BaseData=BaseData},function(module,exports,__webpack_require__){
"use strict";var graphchart_data_node_1=__webpack_require__(15),graphchart_data_link_1=__webpack_require__(18),exception_1=__webpack_require__(5),graphchart_data_ids_1=__webpack_require__(20),utils_1=__webpack_require__(8),GraphDataInternalData=function(){
function GraphDataInternalData(){this.init()}return GraphDataInternalData.prototype.init=function(){
return this.idSet=new graphchart_data_ids_1.GraphDataIDSet,this.array={
nodes:[],links:[]},this.index={nodes:Object.create(null),links:Object.create(null)
},this.neighbors={in:Object.create(null),out:Object.create(null),
all:Object.create(null),inCount:Object.create(null),outCount:Object.create(null),
allCount:Object.create(null)},this},GraphDataInternalData.prototype.injectNewLink=function(link){
var internalID=this.idSet.registerExternalLink(link.type,link.source.type,link.source.id,link.target.type,link.target.id),source=this.getNodeByExternalTypeID(link.source.type,link.source.id),target=this.getNodeByExternalTypeID(link.target.type,link.target.id),inLink=new graphchart_data_link_1.GraphChartDataLink(internalID,link,source,target);
return this.index.links[internalID]=inLink,this.array.links.push(inLink),
this.neighbors["in"][target.id][source.id]||(this.neighbors["in"][target.id][source.id]=Object.create(null)),
this.neighbors["in"][target.id][source.id][inLink.id]=inLink,
this.neighbors.out[source.id][target.id]||(this.neighbors.out[source.id][target.id]=Object.create(null)),
this.neighbors.out[source.id][target.id][inLink.id]=inLink,this.neighbors.all[source.id][target.id]||(this.neighbors.all[source.id][target.id]=Object.create(null)),
this.neighbors.all[source.id][target.id][inLink.id]=inLink,this.neighbors.all[target.id][source.id]||(this.neighbors.all[target.id][source.id]=Object.create(null)),
this.neighbors.all[target.id][source.id][inLink.id]=inLink,++this.neighbors.inCount[target.id],
++this.neighbors.outCount[source.id],++this.neighbors.allCount[source.id],
++this.neighbors.allCount[target.id],inLink},GraphDataInternalData.prototype.getIDSet=function(){
return this.idSet},GraphDataInternalData.prototype.isNodeExist=function(inID){
var result=!1;return result=void 0!==this.index.nodes[inID]},
GraphDataInternalData.prototype.getNodes=function(ids){var _this=this;
try{if("[object Array]"!==Object.prototype.toString.call(ids))throw new exception_1.GException(1001,"Internal IDs must be an array.");
var result_1=[];return ids.forEach(function(id){var temp=_this.getNodeByInternalID(id);
if(void 0===temp)throw new exception_1.GException(1001,"Internal ID is not existd.");
result_1.push(temp)}),result_1}catch(err){return console.warn(err.toString()),
[]}},GraphDataInternalData.prototype.getNodeByInternalID=function(inID){
return this.index.nodes[inID]||void 0},GraphDataInternalData.prototype.getNodeByExternalTypeID=function(type,id){
var internalID=this.idSet.checkExternalNode(type,id);return this.getNodeByInternalID(internalID);
},GraphDataInternalData.prototype.addNode=function(node,option){
try{if("object"!=typeof node)throw new exception_1.GException(1001,"The node must be an object.");
if("string"!=typeof node.id||"string"!=typeof node.type)throw new exception_1.GException(1001,"The node must have a string/number external id and type.");
var internalID=this.idSet.registerExternalNode(node.type,node.id),inNode=void 0;
if(this.isNodeExist(internalID))switch(inNode=this.getNodeByInternalID(internalID),
option){case"defaults":inNode.defaultsNode(node);break;case"extend":
inNode.extendNode(node);break;case"overwrite":inNode.overwriteNode(node);
break;default:throw new exception_1.GException(1001,"Unknown option.");
}else inNode=new graphchart_data_node_1.GraphChartDataNode(internalID,node),
this.index.nodes[internalID]=inNode,this.array.nodes.push(inNode),
this.neighbors["in"][internalID]=Object.create(null),this.neighbors.out[internalID]=Object.create(null),
this.neighbors.all[internalID]=Object.create(null),this.neighbors.inCount[internalID]=0,
this.neighbors.outCount[internalID]=0,this.neighbors.allCount[internalID]=0;
return inNode}catch(err){return void console.warn(err.toString());
}},GraphDataInternalData.prototype.dropNode=function(id,option){
var _this=this;try{var result_2={target:void 0,nodes:[],links:[]
};if("string"!=typeof id)throw new exception_1.GException(1003,"The internal id must be string type.");
var inNode_1=this.getNodeByInternalID(id);if(result_2.target=inNode_1,
void 0===inNode_1)throw new exception_1.GException(1003,"The internal id can not be found.");
delete this.index.nodes[inNode_1.id],this.array.nodes.some(function(d,i){
return d===inNode_1&&(utils_1.Utils.pullAt(_this.array.nodes,i),
!0)});var relatedLinks=this.array.links.filter(function(l,i){
return l.source===inNode_1||l.target===inNode_1});return relatedLinks.forEach(function(l){
var relatedResult=_this.dropLink(l.id,option);result_2.links=utils_1.Utils.concat(result_2.links,relatedResult.target),
result_2.nodes=utils_1.Utils.concat(result_2.nodes,relatedResult.nodes),
result_2.links=utils_1.Utils.concat(result_2.links,relatedResult.links);
}),delete this.neighbors["in"][inNode_1.id],delete this.neighbors.out[inNode_1.id],
delete this.neighbors.all[inNode_1.id],delete this.neighbors.inCount[inNode_1.id],
delete this.neighbors.outCount[inNode_1.id],delete this.neighbors.allCount[inNode_1.id],
result_2}catch(err){return void console.warn(err.toString())}
},GraphDataInternalData.prototype.isLinkExist=function(inID){
var result=!1;return result=void 0!==this.index.links[inID]},
GraphDataInternalData.prototype.getLinks=function(ids){var _this=this;
try{if("[object Array]"!==Object.prototype.toString.call(ids))throw new exception_1.GException(1002,"Internal IDs must be an array.");
var result_3=[];return ids.forEach(function(id){var temp=_this.getLinkByInternalID(id);
if(void 0===temp)throw new exception_1.GException(1002,"Internal ID is not existd.");
result_3.push(temp)}),result_3}catch(err){return console.warn(err.toString()),
[]}},GraphDataInternalData.prototype.getLinkByInternalID=function(inID){
return this.index.links[inID]||void 0},GraphDataInternalData.prototype.getLinkByExternalTypeID=function(exType,sourceExType,sourceExID,targetExType,targetExID){
var internalID=this.idSet.checkExternalLink(exType,sourceExType,sourceExID,targetExType,targetExID),targetLink=this.getLinkByInternalID(internalID);
return void 0!==targetLink||(internalID=this.idSet.checkExternalLink(exType,targetExType,targetExID,sourceExType,sourceExID),
targetLink=this.getLinkByInternalID(internalID),void 0!==targetLink&&targetLink.directed===!1||(targetLink=void 0)),
targetLink},GraphDataInternalData.prototype.addLink=function(link,option){
try{var nodeOption=option.node,linkOption=option.link,inLink=void 0;
if("object"!=typeof link)throw new exception_1.GException(1002,"The link must be an object.");
if("string"!=typeof link.source.id||"string"!=typeof link.source.type||"string"!=typeof link.target.id||"string"!=typeof link.target.type)throw new exception_1.GException(1002,"The link source/target must have a string external id and type.");
if("string"!=typeof link.type)throw new exception_1.GException(1002,"The link must have a string link type.");
var from=this.idSet.checkExternalNode(link.source.type,link.source.id),to=this.idSet.checkExternalNode(link.target.type,link.target.id);
if(void 0===from||!this.isNodeExist(from))switch(nodeOption){
case"defualts":throw new exception_1.GException(1002,"nodeOption is defualts, and source node is not existed.");
case"extend":case"overwrite":this.addNode(link.source,nodeOption);
break;default:throw new exception_1.GException(1002,"Unknown node option.");
}if(void 0===to||!this.isNodeExist(to))switch(nodeOption){case"defualts":
throw new exception_1.GException(1002,"nodeOption is defualts, and target node is not existed.");
case"extend":case"overwrite":this.addNode(link.target,nodeOption);
break;default:throw new exception_1.GException(1002,"Unknown node option.");
}var inID=this.idSet.checkExternalLink(link.type,link.source.type,link.source.id,link.target.type,link.target.id),reInID=this.idSet.checkExternalLink(link.type,link.target.type,link.target.id,link.source.type,link.source.id);
if(this.isLinkExist(inID))switch(inLink=this.getLinkByInternalID(inID),
linkOption){case"defaults":inLink.defaultsLink(link);break;case"extend":
inLink.extendLink(link);break;case"overwrite":inLink.overwriteLink(link);
break;default:throw new exception_1.GException(1002,"Unknown link option.");
}else if(this.isLinkExist(reInID)){var reInLink=this.getLinkByInternalID(reInID);
if(reInLink.directed===!1)switch(inLink=reInLink,linkOption){
case"defaults":inLink.defaultsLink(link);break;case"extend":inLink.extendLink(link);
break;case"overwrite":inLink.overwriteLink(link);break;default:
throw new exception_1.GException(1002,"Unknown link option.");
}else if(reInLink.directed===!0&&reInLink.source.exType!==reInLink.target.exType)switch(inLink=reInLink,
inLink.directed=!1,linkOption){case"defaults":inLink.defaultsLink(link);
break;case"extend":inLink.extendLink(link);break;case"overwrite":
inLink.overwriteLink(link);break;default:throw new exception_1.GException(1002,"Unknown link option.");
}else{if(reInLink.directed!==!0||reInLink.source.exType!==reInLink.target.exType)throw new exception_1.GException(1002,"Unknown reversed link type.");
inLink=utils_1.Utils.isEqual(reInLink.attrs,link.attrs)?this.injectNewLink(link):this.injectNewLink(link);
}}else{if(this.isLinkExist(inID)||this.isLinkExist(reInID))throw new exception_1.GException(1002,"Unknown link type.");
inLink=this.injectNewLink(link)}return inLink}catch(err){return void console.warn(err.toString());
}},GraphDataInternalData.prototype.dropLink=function(id,option){
var _this=this;try{var result={target:void 0,nodes:[],links:[]
};if("string"!=typeof id)throw new exception_1.GException(1004,"The internal id must be string type.");
var inLink_1=this.getLinkByInternalID(id);if(result.target=inLink_1,
void 0===inLink_1)throw new exception_1.GException(1004,"The external link can not be found.");
if(delete this.index.links[inLink_1.id],this.array.links.some(function(d,i){
return d===inLink_1&&(utils_1.Utils.pullAt(_this.array.links,i),
!0)}),delete this.neighbors["in"][inLink_1.target.id][inLink_1.source.id][inLink_1.id],
Object.keys(this.neighbors["in"][inLink_1.target.id][inLink_1.source.id]).length||delete this.neighbors["in"][inLink_1.target.id][inLink_1.source.id],
delete this.neighbors.out[inLink_1.source.id][inLink_1.target.id][inLink_1.id],
Object.keys(this.neighbors.out[inLink_1.source.id][inLink_1.target.id]).length||delete this.neighbors.out[inLink_1.source.id][inLink_1.target.id],
delete this.neighbors.all[inLink_1.source.id][inLink_1.target.id][inLink_1.id],
Object.keys(this.neighbors.all[inLink_1.source.id][inLink_1.target.id]).length||delete this.neighbors.all[inLink_1.source.id][inLink_1.target.id],
inLink_1.target.id===inLink_1.source.id||(delete this.neighbors.all[inLink_1.target.id][inLink_1.source.id][inLink_1.id],
Object.keys(this.neighbors.all[inLink_1.target.id][inLink_1.source.id]).length||delete this.neighbors.all[inLink_1.target.id][inLink_1.source.id]),
--this.neighbors.inCount[inLink_1.target.id],--this.neighbors.outCount[inLink_1.source.id],
--this.neighbors.allCount[inLink_1.source.id],--this.neighbors.allCount[inLink_1.target.id],
option){if(0===this.neighbors.allCount[inLink_1.source.id]&&this.isNodeExist(inLink_1.source.id)){
var sourceResult=this.dropNode(inLink_1.source.id,option);result.nodes=utils_1.Utils.concat(result.nodes,sourceResult.target),
result.nodes=utils_1.Utils.concat(result.nodes,sourceResult.nodes),
result.links=utils_1.Utils.concat(result.links,sourceResult.links);
}if(0===this.neighbors.allCount[inLink_1.target.id]&&this.isNodeExist(inLink_1.target.id)){
var targetResult=this.dropNode(inLink_1.target.id,option);result.nodes=utils_1.Utils.concat(result.nodes,targetResult.target),
result.nodes=utils_1.Utils.concat(result.nodes,targetResult.nodes),
result.links=utils_1.Utils.concat(result.links,targetResult.links);
}}return result}catch(err){return void console.warn(err.toString());
}},GraphDataInternalData.prototype.getNeighbors=function(id){
var _this=this;try{if(void 0===id)throw new exception_1.GException(1006,"Neighbors' target id is undefined.");
var inNode=this.getNodeByInternalID(id);if(void 0===inNode)throw new exception_1.GException(1006,"Neighbors' target is not exist.");
var result_4={all:[],in:[],out:[]},allNeighbors=Object.keys(this.neighbors.all[inNode.id]),inNeighbors=Object.keys(this.neighbors["in"][inNode.id]),outNeighbors=Object.keys(this.neighbors.out[inNode.id]);
return allNeighbors.forEach(function(nid){result_4.all.push(_this.getNodeByInternalID(nid));
}),inNeighbors.forEach(function(nid){result_4["in"].push(_this.getNodeByInternalID(nid));
}),outNeighbors.forEach(function(nid){result_4.out.push(_this.getNodeByInternalID(nid));
}),result_4}catch(err){return console.warn(err.toString()),{all:[],
in:[],out:[]}}},GraphDataInternalData}();exports.GraphDataInternalData=GraphDataInternalData;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},items_data_node_1=__webpack_require__(16),graphchart_style_1=__webpack_require__(17),utils_1=__webpack_require__(8),GraphChartDataNode=function(_super){
function GraphChartDataNode(internalID,exNode){var _this=_super.call(this,internalID)||this;
return _this.x=0,_this.y=0,_this.isNode=!0,_this.exID=exNode.id,
_this.exType=exNode.type,_this.exX=exNode.x,_this.exY=exNode.y,
_this.attrs=utils_1.Utils.cloneDeep(exNode.attrs)||Object.create(null),
_this.styles=new graphchart_style_1.GraphStyle.GraphChartNodeStyles(exNode.styles),
_this.others=utils_1.Utils.cloneDeep(exNode.others)||Object.create(null),
_this.labels=utils_1.Utils.cloneDeep(exNode.labels)||Object.create(null),
_this}return __extends(GraphChartDataNode,_super),GraphChartDataNode.prototype.extendNode=function(exNode){
var newNode=utils_1.Utils.cloneDeep(exNode);for(var key in newNode.attrs)Object.prototype.hasOwnProperty.call(newNode.attrs,key)&&""===newNode.attrs[key]&&delete newNode.attrs[key];
utils_1.Utils.extend(this.attrs,newNode.attrs);var tmpStyle=new graphchart_style_1.GraphStyle.GraphChartNodeStyles(newNode.styles);
return utils_1.Utils.extend(this.styles,tmpStyle),utils_1.Utils.extend(this.others,newNode.others),
utils_1.Utils.extend(this.labels,newNode.labels),this},GraphChartDataNode.prototype.defaultsNode=function(exNode){
var newNode=utils_1.Utils.cloneDeep(exNode);utils_1.Utils.defaultsDeep(this.attrs,newNode.attrs);
var tmpStyle=new graphchart_style_1.GraphStyle.GraphChartNodeStyles(newNode.styles);
return utils_1.Utils.defaultsDeep(this.styles,tmpStyle),utils_1.Utils.defaultsDeep(this.others,newNode.others),
utils_1.Utils.defaultsDeep(this.labels,newNode.labels),this},
GraphChartDataNode.prototype.overwriteNode=function(exNode){var newNode=utils_1.Utils.cloneDeep(exNode);
this.attrs=newNode.attrs;var tmpStyle=new graphchart_style_1.GraphStyle.GraphChartNodeStyles(newNode.styles);
return this.styles=tmpStyle,this.others=newNode.others,this.labels=newNode.labels,
this},GraphChartDataNode}(items_data_node_1.ItemsDataNode);exports.GraphChartDataNode=GraphChartDataNode;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},items_data_1=__webpack_require__(12),ItemsDataNode=function(_super){
function ItemsDataNode(internalID){var _this=_super.call(this)||this;
return _this.id=internalID,_this.className="",_this}return __extends(ItemsDataNode,_super),
ItemsDataNode}(items_data_1.ItemsData);exports.ItemsDataNode=ItemsDataNode;
},function(module,exports){"use strict";var GraphStyle;!function(GraphStyle){
GraphStyle.defualtAreaStyle={overlayColor:"rgba(255, 255, 0, 0)",
fillColor:"rgba(249, 249, 249, 0)",image:null,height:null,width:null,
maxHeight:1e4,maxWidth:1e4,minHeight:300,minWidth:300},GraphStyle.defaultNodeBaseStyle={
aura:void 0,cursor:null,display:"circle",fillColor:"#c7dae0",
icon:null,lineColor:null,lineDash:null,lineWidth:null,opacity:1,
radius:40,shadowBlur:6,shadowColor:null,shadowOffsetX:0,shadowOffsetY:2,
aspectRatio:1},GraphStyle.defaultLinkBaseStyle={cursor:null,direction:"R",
fillColor:"#ce6dbd",length:1,lineDash:null,radius:3,shadowBlur:void 0,
shadowColor:null,shadowOffsetX:void 0,shadowOffsetY:void 0,strength:.5
};var GraphChartNodeStyles=function(){function GraphChartNodeStyles(newStyles){
try{this.base=Object.create(null);for(var key in newStyles)if(Object.prototype.hasOwnProperty.call(newStyles,key))switch(key){
case"isHovered":case"isSelected":case"isLowlighted":case"isLocked":
case"isExpanded":case"isInvisible":this[key]=newStyles[key]||!1;
break;case"hovered":case"selected":case"lowlighted":case"locked":
case"expanded":case"invisible":this[key]=this[key]||Object.create(null);
for(var _key in newStyles[key])Object.prototype.hasOwnProperty.call(newStyles[key],_key)&&(Object.prototype.hasOwnProperty.call(GraphStyle.defaultNodeBaseStyle,_key)?this[key][_key]=newStyles[key][_key]:this[key][_key]=newStyles[key][_key]);
break;default:this.base[key]=newStyles[key]}}catch(err){console.warn(err.toString());
}}return GraphChartNodeStyles}();GraphStyle.GraphChartNodeStyles=GraphChartNodeStyles;
var GraphChartLinkStyles=function(){function GraphChartLinkStyles(newStyles){
try{this.base=Object.create(null);for(var key in newStyles)if(Object.prototype.hasOwnProperty.call(newStyles,key))switch(key){
case"isHovered":case"isSelected":case"isLowlighted":case"isInvisible":
this[key]=newStyles[key]||!1;break;case"hovered":case"selected":
case"lowlighted":case"invisible":this[key]=this[key]||Object.create(null);
for(var _key in newStyles[key])Object.prototype.hasOwnProperty.call(newStyles[key],_key)&&(Object.prototype.hasOwnProperty.call(GraphStyle.defaultLinkBaseStyle,_key)?this[key][_key]=newStyles[key][_key]:this[key][_key]=newStyles[key][_key]);
break;default:this.base[key]=newStyles[key]}}catch(err){console.warn(err.toString());
}}return GraphChartLinkStyles}();GraphStyle.GraphChartLinkStyles=GraphChartLinkStyles,
GraphStyle.defaultNodeStyle=new GraphChartNodeStyles({}),GraphStyle.defaultNodeStyle.base=GraphStyle.defaultNodeBaseStyle,
GraphStyle.defaultNodeStyle.hovered={shadowBlur:15,shadowColor:"rgba(0, 0, 255, 0.9)"
},GraphStyle.defaultNodeStyle.selected={shadowBlur:15,shadowColor:"rgba(0, 0, 255, 0.9)",
shadowOffsetX:0,shadowOffsetY:3},GraphStyle.defaultNodeStyle.lowlighted={
opacity:.1},GraphStyle.defaultNodeStyle.locked={},GraphStyle.defaultNodeStyle.expanded={},
GraphStyle.defaultNodeStyle.invisible={},GraphStyle.defaultLinkStyle=new GraphChartLinkStyles({}),
GraphStyle.defaultLinkStyle.base=GraphStyle.defaultLinkBaseStyle,
GraphStyle.defaultLinkStyle.hovered={shadowBlur:4,shadowColor:"rgba(0, 0, 255, 0.9)",
shadowOffsetX:0,shadowOffsetY:0},GraphStyle.defaultLinkStyle.selected={
shadowBlur:15,shadowColor:"rgba(0, 0, 255, 0.9)"},GraphStyle.defaultLinkStyle.lowlighted={
fillColor:"rgba(188, 188, 188, 0.1)"},GraphStyle.defaultLinkStyle.invisible={},
GraphStyle.virtualRootNode={id:"virtual root node which is not existed or visualized",
exID:"virtual root node which is not existed or visualized",exType:"virtual root node which is not existed or visualized"
}}(GraphStyle=exports.GraphStyle||(exports.GraphStyle={}))},function(module,exports,__webpack_require__){
"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},items_data_link_1=__webpack_require__(19),graphchart_style_1=__webpack_require__(17),utils_1=__webpack_require__(8),GraphChartDataLink=function(_super){
function GraphChartDataLink(internalID,exLink,source,target){
var _this=_super.call(this,internalID,source.id,target.id)||this;
return _this.pointsX=[],_this.pointsY=[],_this.isLink=!0,_this.source=source,
_this.target=target,_this.exType=exLink.type,_this.directed=void 0===exLink.directed||exLink.directed,
_this.attrs=utils_1.Utils.cloneDeep(exLink.attrs)||Object.create(null),
_this.styles=new graphchart_style_1.GraphStyle.GraphChartLinkStyles(exLink.styles),
_this.others=utils_1.Utils.cloneDeep(exLink.others)||Object.create(null),
_this.labels=Object.create(null),_this}return __extends(GraphChartDataLink,_super),
Object.defineProperty(GraphChartDataLink.prototype,"x",{get:function(){
return this.pointsX},enumerable:!0,configurable:!0}),Object.defineProperty(GraphChartDataLink.prototype,"y",{
get:function(){return this.pointsY},enumerable:!0,configurable:!0
}),GraphChartDataLink.prototype.extendLink=function(exLink){var newLink=utils_1.Utils.cloneDeep(exLink);
for(var key in newLink.attrs)Object.prototype.hasOwnProperty.call(newLink.attrs,key)&&""===newLink.attrs[key]&&delete newLink.attrs[key];
utils_1.Utils.extend(this.attrs,newLink.attrs);var tmpStyle=new graphchart_style_1.GraphStyle.GraphChartLinkStyles(newLink.styles);
return utils_1.Utils.extend(this.styles,tmpStyle),utils_1.Utils.extend(this.others,newLink.others),
utils_1.Utils.extend(this.labels,newLink.labels),exLink.directed===!1&&(this.directed=!1),
this},GraphChartDataLink.prototype.defaultsLink=function(exLink){
var newLink=utils_1.Utils.cloneDeep(exLink);utils_1.Utils.defaultsDeep(this.attrs,newLink.attrs);
var tmpStyle=new graphchart_style_1.GraphStyle.GraphChartLinkStyles(newLink.styles);
return utils_1.Utils.defaultsDeep(this.styles,tmpStyle),utils_1.Utils.defaultsDeep(this.others,newLink.others),
utils_1.Utils.defaultsDeep(this.labels,newLink.labels),exLink.directed===!1&&(this.directed=!1),
this},GraphChartDataLink.prototype.overwriteLink=function(exLink){
var newLink=utils_1.Utils.cloneDeep(exLink);this.attrs=newLink.attrs;
var tmpStyle=new graphchart_style_1.GraphStyle.GraphChartLinkStyles(newLink.styles);
return this.styles=tmpStyle,this.others=newLink.others,this.labels=newLink.labels,
exLink.directed===!1&&(this.directed=!1),this},GraphChartDataLink;
}(items_data_link_1.ItemsDataLink);exports.GraphChartDataLink=GraphChartDataLink;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},items_data_1=__webpack_require__(12),ItemsDataLink=function(_super){
function ItemsDataLink(internalID,sourceID,targetID){var _this=_super.call(this)||this;
return _this.id=internalID,_this.from=sourceID,_this.to=targetID,
_this.className="",_this}return __extends(ItemsDataLink,_super),
ItemsDataLink}(items_data_1.ItemsData);exports.ItemsDataLink=ItemsDataLink;
},function(module,exports){"use strict";var GraphDataIDSet=function(){
function GraphDataIDSet(){this.nodesIDCount=0,this.nodesTypeCount=0,
this.linksTypeCount=0,this.nodesIDCount=0,this.nodesTypeCount=0,
this.linksTypeCount=0,this.idMap={nodesID:Object.create(null),
nodesType:Object.create(null),linksType:Object.create(null)}}
return GraphDataIDSet.prototype.registerExternalNode=function(exType,exID){
var inID="";return this.idMap.nodesType[exType]?inID=this.idMap.nodesType[exType]:(this.idMap.nodesType[exType]=++this.nodesTypeCount,
inID=this.idMap.nodesType[exType]),inID+=GraphDataIDSet.nodeIDConcChar,
this.idMap.nodesID[exID]?inID+=this.idMap.nodesID[exID]:(this.idMap.nodesID[exID]=++this.nodesIDCount,
inID+=this.idMap.nodesID[exID]),inID},GraphDataIDSet.prototype.checkExternalNode=function(exType,exID){
var inID="";if(this.idMap.nodesType[exType]&&(inID=this.idMap.nodesType[exType],
inID+=GraphDataIDSet.nodeIDConcChar,this.idMap.nodesID[exID]))return inID+=this.idMap.nodesID[exID];
},GraphDataIDSet.prototype.registerExternalLink=function(exType,sourceExType,sourceExID,targetExType,targetExID){
var inID="";return inID+=this.registerExternalNode(sourceExType,sourceExID),
inID+=GraphDataIDSet.linkIDConcChar,inID+=this.registerExternalNode(targetExType,targetExID),
inID+=GraphDataIDSet.linkIDConcChar,this.idMap.linksType[exType]?inID+=this.idMap.linksType[exType]:(this.idMap.linksType[exType]=++this.linksTypeCount,
inID+=this.idMap.linksType[exType]),inID},GraphDataIDSet.prototype.checkExternalLink=function(exType,sourceExType,sourceExID,targetExType,targetExID){
var inID="";if(void 0!==this.checkExternalNode(sourceExType,sourceExID)&&(inID+=this.checkExternalNode(sourceExType,sourceExID),
inID+=GraphDataIDSet.linkIDConcChar,void 0!==this.checkExternalNode(targetExType,targetExID)&&(inID+=this.checkExternalNode(targetExType,targetExID),
inID+=GraphDataIDSet.linkIDConcChar,this.idMap.linksType[exType])))return inID+=this.idMap.linksType[exType];
},GraphDataIDSet}();exports.GraphDataIDSet=GraphDataIDSet,GraphDataIDSet.nodeIDConcChar="-",
GraphDataIDSet.linkIDConcChar="_"},function(module,exports,__webpack_require__){
"use strict";var base_style_1=__webpack_require__(3),graphchart_render_svg_1=__webpack_require__(22),graphchart_render_webgl_1=__webpack_require__(24),graphchart_render_canvas_1=__webpack_require__(25),graphchart_render_geo_1=__webpack_require__(29),exception_1=__webpack_require__(5),utils_1=__webpack_require__(8);
console.log("loading render module.");var GraphChartRender=function(){
function GraphChartRender(parent){void 0===parent&&(parent=void 0);
var _this=this;this.exportType=["png","jpg","pdf","csv"],this.defaultMaxNodeLimit=5e6,
this.defaultMaxLinkLimit=15e6,this.preStyle={node:[],link:[]},
this.icons={},this.defaultOptions={},this.style=new base_style_1.BaseStyle,
this.chart=parent;var options=parent.options;switch(void 0===options.renderType&&(options.renderType="canvas"),
utils_1.Utils.extend(this.icons,options.icon),utils_1.Utils.extend(this.defaultOptions,options.render),
options.renderType){case"canvas":this.engine=new graphchart_render_canvas_1.GraphChartRenderCanvas(this.defaultOptions,this.chart);
break;case"svg":this.engine=new graphchart_render_svg_1.GraphChartRenderSVG(this.defaultOptions);
break;case"webgl":this.engine=new graphchart_render_webgl_1.GraphChartRenderWebgl(this.defaultOptions);
break;case"geo":this.engine=new graphchart_render_geo_1.GraphChartRenderGeo(this.defaultOptions,this.chart);
break;default:this.engine=new graphchart_render_canvas_1.GraphChartRenderCanvas(this.defaultOptions,this.chart),
console.warn(new exception_1.GException(2001,"Unknown rendering type. Use canvas as default renderType").toString());
}try{var advanced=this.chart.options.advanced||{};if(this.maxNodeLimit=advanced.maxNodeLimit||this.defaultMaxNodeLimit,
this.maxNodeLimit>this.defaultMaxNodeLimit)throw new exception_1.GException(1009,"Use default "+this.defaultMaxNodeLimit+" to be maxNodeLimit.");
}catch(err){this.maxNodeLimit=this.defaultMaxNodeLimit,console.warn(err.toString());
}try{var advanced=this.chart.options.advanced||{};if(this.maxLinkLimit=advanced.maxLinkLimit||this.defaultMaxLinkLimit,
this.maxLinkLimit>this.defaultMaxLinkLimit)throw new exception_1.GException(1009,"Use default "+this.defaultMaxLinkLimit+" to be maxLinkLimit.");
}catch(err){this.maxLinkLimit=this.defaultMaxLinkLimit,console.warn(err.toString());
}if(void 0!==options.style)try{Object.keys(options.style.node||{}).forEach(function(key){
_this.addPreStyle({target:"node",obj:options.style.node[key]});
}),Object.keys(options.style.link||{}).forEach(function(key){
_this.addPreStyle({target:"link",obj:options.style.link[key]});
})}catch(err){console.error(new exception_1.GException(2006,err.toString()).toString());
}if(void 0!==options.graphSchema)try{options.graphSchame.VertexTypes.forEach(function(node){
_this.engine.color.getColor(node.Name)}),options.graphSchame.EdgeTypes.forEach(function(link){
_this.engine.color.getColor(link.Name)})}catch(err){console.error(new exception_1.GException(2005,err.toString()).toString());
}}return GraphChartRender.prototype.paint=function(){return this.engine.core.paintNow(!0),
this},GraphChartRender.prototype.update=function(){var _this=this;
this.chart.render.engine.core.nodes().forEach(function(node){
var inNode=_this.chart.data.inData.getNodeByInternalID(node.id);
void 0!==inNode&&(node.x=inNode.x,node.y=inNode.y)});var temp=this.chart.data.getData();
return temp.nodes.length>=this.maxNodeLimit||temp.links.length>=this.maxLinkLimit?this.chart.event.handlers.onExceedLimit(temp.nodes,temp.links,this.chart):(this.engine.replaceData(temp),
this.zoomLevel=this.engine.core.zoom()),this},GraphChartRender.prototype.updateCoordinate=function(){
return this.chart.data.getNodes(),this.chart.data.getLinks(),
this},GraphChartRender.prototype.redraw=function(){return this.chart.layout.runLayout(),
this.engine.core.resetLayout(),this},GraphChartRender.prototype.closeNode=function(exType,exID){
var inNode=this.chart.data.getNodes(exType,exID);inNode=inNode||{},
this.engine.core.closeNode(inNode.id)},GraphChartRender.prototype.collapseNode=function(exType,exID){
var inNode=this.chart.data.getNodes(exType,exID);inNode=inNode||{},
this.engine.core.collapseNode(inNode.id)},GraphChartRender.prototype.expandNode=function(exType,exID){
var inNode=this.chart.data.getNodes(exType,exID);inNode=inNode||{},
this.engine.core.expandNode(inNode.id)},GraphChartRender.prototype.hideNode=function(exType,exID){
var inNode=this.chart.data.getNodes(exType,exID);inNode=inNode||{},
this.engine.core.hideNode(inNode.id)},GraphChartRender.prototype.showNode=function(exType,exID){
var inNode=this.chart.data.getNodes(exType,exID);inNode=inNode||{},
this.engine.core.showNode(inNode.id)},GraphChartRender.prototype.setNodesInvisible=function(nodes,invisible){
var _this=this;return void 0===invisible&&(invisible=!0),nodes.forEach(function(n){
var coreNode=_this.engine.core.getNode(n.id);void 0!==coreNode&&(coreNode.invisible=invisible);
}),this.update(),this},GraphChartRender.prototype.setLinksInvisible=function(links,invisible){
var _this=this;return void 0===invisible&&(invisible=!0),links.forEach(function(l){
var coreLink=_this.engine.core.getLink(l.id);void 0!==coreLink&&(coreLink.invisible=invisible);
}),this.update(),this},GraphChartRender.prototype.zoom=function(level){
return void 0===level?this.zoomLevel=this.engine.core.zoom():this.zoomLevel=this.engine.core.zoom(level,!1),
this.zoomLevel},GraphChartRender.prototype.zoomIn=function(){
var tempZoomLevel=this.engine.core.zoom();return tempZoomLevel*=2,
this.engine.core.zoom(tempZoomLevel,!0),this.zoomLevel=tempZoomLevel,
this},GraphChartRender.prototype.zoomOut=function(){var tempZoomLevel=this.engine.core.zoom();
return tempZoomLevel/=2,this.engine.core.zoom(tempZoomLevel,!0),
this.zoomLevel=tempZoomLevel,this},GraphChartRender.prototype.fullscreen=function(isFullscreen){
return this.engine.core.fullscreen(isFullscreen),this},GraphChartRender.prototype.autoFit=function(){
var _this=this;return setTimeout(function(){try{_this.engine.core.scrollIntoView(_this.chart.data.getNodes().filter(function(n){
return void 0!==_this.chart.render.engine.core.getNode(n.id)}).map(function(n){
return n.id}),[10,10,10,10])}catch(err){}},200),this},GraphChartRender.prototype.centerView=function(){
var _this=this;this.zoomLevel=this.engine.core.zoom();var currentSelection=this.engine.core.selection().filter(function(item){
return console.log(item.isNode,item.isLink),item.isNode}).map(function(n){
return n.id}),currentView=[];return currentSelection.forEach(function(nid){
currentView=utils_1.Utils.concat(currentView,_this.chart.data.inData.getNeighbors(nid));
}),currentView=currentView.map(function(v){return v.id}),currentView=utils_1.Utils.concat(currentView,currentSelection),
0===currentView.length?this.autoFit():this.engine.core.scrollIntoView(currentView.filter(function(id){
return void 0!==_this.chart.render.engine.core.getNode(id)})),
this},GraphChartRender.prototype["export"]=function(name,type){
var _this=this;try{if(this.exportType.indexOf(type)===-1)throw new exception_1.GException(2002,"Unknown export type.");
if("csv"===type){var vertexString_1="",edgeString_1="",nodeLegend=this.chart.data.getNodeAttributes();
nodeLegend.forEach(function(node){var nodeAttrs=node.labels.map(function(l){
return l.attributeName}).filter(function(l){return"id"!==l&&"type"!==l;
});vertexString_1+="$id,$type",0!==nodeAttrs.length&&(vertexString_1+=",",
vertexString_1+=nodeAttrs.map(function(n){return"$"+n}).join(",")),
vertexString_1+="\n";var nodeType=node.type;_this.chart.data.getNodes(nodeType).forEach(function(n){
vertexString_1+=n.exID+","+n.exType;var attrs=Object.keys(n.attrs);
0!==attrs.length&&(vertexString_1+=",",vertexString_1+=attrs.map(function(a){
return n.attrs[a]}).join(",")),vertexString_1+="\n"}),vertexString_1+="\n";
}),this.downloadFile(name+"_vertex.csv",vertexString_1),console.log("Downloading Vertex CSV.");
var edgeLegend=this.chart.data.getLinkAttributes();edgeLegend.forEach(function(link){
var linkAttrs=link.labels.map(function(l){return l.attributeName;
}).filter(function(l){return"type"!==l});edgeString_1+="$sourceID,$sourceType,$targetID,$TargetType,$type",
0!==linkAttrs.length&&(edgeString_1+=",",edgeString_1+=linkAttrs.map(function(n){
return"$"+n}).join(",")),edgeString_1+="\n";var linkType=link.type;
_this.chart.data.getLinks(linkType).forEach(function(n){edgeString_1+=n.source.exID+","+n.source.exType+","+n.target.exID+","+n.target.exType+","+n.exType;
var attrs=Object.keys(n.attrs);0!==attrs.length&&(edgeString_1+=",",
edgeString_1+=attrs.map(function(a){return n.attrs[a]}).join(",")),
edgeString_1+="\n"}),edgeString_1+="\n"}),this.downloadFile(name+"_edge.csv",edgeString_1),
console.log("Downloading Edge CSV.")}else this.engine.core.exportAsString(type,function(dataUri,mimeType,extension){
utils_1.Utils.downloadURI(dataUri,name+"."+extension)},{unit:"px",
scaling:4},!1)}catch(err){console.warn(err.toString())}return this;
},GraphChartRender.prototype.downloadFile=function(filename,text){
var element=document.createElement("a");element.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(text)),
element.setAttribute("download",filename),element.style.display="none",
document.body.appendChild(element),element.click(),document.body.removeChild(element);
},GraphChartRender.prototype.unselectAllElements=function(){return this.engine.core.selection([]),
this},GraphChartRender.prototype.showNodeLabels=function(exType,exID,labels){
var inNode=this.chart.data.getNodes(exType,exID);return inNode=inNode||{},
labels.forEach(function(l){inNode.labels[l]=!0}),this},GraphChartRender.prototype.showNodeLabelsByType=function(exType,labels){
var inNodes=this.chart.data.getNodes(exType);return inNodes.forEach(function(inNode){
labels.forEach(function(l){inNode.labels[l]=!0})}),this},GraphChartRender.prototype.hideNodeLabels=function(exType,exID,labels){
var inNode=this.chart.data.getNodes(exType,exID);return inNode=inNode||{},
labels.forEach(function(l){inNode.labels[l]=!1}),this},GraphChartRender.prototype.hideNodeLabelsByType=function(exType,labels){
var inNodes=this.chart.data.getNodes(exType);return inNodes.forEach(function(inNode){
labels.forEach(function(l){inNode.labels[l]=!1})}),this},GraphChartRender.prototype.hideAllNodeLabels=function(){
var inNodes=this.chart.data.getNodes();return inNodes.forEach(function(inNode){
inNode.labels={}}),this},GraphChartRender.prototype.showLinkLabels=function(exType,sourceExType,sourceExID,targetExType,targetExID,labels){
var inLink=this.chart.data.getLinks(exType,sourceExType,sourceExID,targetExType,targetExID);
return void 0===inLink?this:(labels.forEach(function(l){inLink.labels[l]=!0;
}),this)},GraphChartRender.prototype.showLinkLabelsByType=function(exType,labels){
var inLinks=this.chart.data.getLinks(exType);return inLinks.forEach(function(inLink){
labels.forEach(function(l){inLink.labels[l]=!0})}),this},GraphChartRender.prototype.hideLinkLabels=function(exType,sourceExType,sourceExID,targetExType,targetExID,labels){
var inLink=this.chart.data.getLinks(exType,sourceExType,sourceExID,targetExType,targetExID);
return void 0===inLink?this:(labels.forEach(function(l){inLink.labels[l]=!1;
}),this)},GraphChartRender.prototype.hideLinkLabelsByType=function(exType,labels){
var inLinks=this.chart.data.getLinks(exType);return inLinks.forEach(function(inLink){
labels.forEach(function(l){inLink.labels[l]=!1})}),this},GraphChartRender.prototype.hideAllLinkLabels=function(){
var inLinks=this.chart.data.getLinks();return inLinks.forEach(function(inLink){
inLink.labels={}}),this},GraphChartRender.prototype.updateAreaSettings=function(options){
return this.engine.updateAreaSettings(options),this},GraphChartRender.prototype.hideMenu=function(){
return this.engine.core.hideMenu(),this},GraphChartRender.prototype.updateSize=function(){
return this.engine.core.updateSize(),this},GraphChartRender.prototype.setIcon=function(type,icon){
this.icons[type]=icon},GraphChartRender.prototype.addPreStyle=function(style){
if(Object.hasOwnProperty.call(this.preStyle,style.target))switch(style.target){
case"node":this.preStyle.node.push(style.obj);break;case"link":
this.preStyle.link.push(style.obj)}},GraphChartRender.prototype.lockNode=function(id,x,y){
return this.engine.core.lockNode(id,x,y),this},GraphChartRender.prototype.unlockNode=function(id){
return this.engine.core.unlockNode(id),this},GraphChartRender.prototype.getNodeShape=function(id){
var node=this.engine.core.getNode(id)||{};node.bounds=node.bounds||{};
var shape=node.shape||{},bounds={};return Object.keys(node.bounds).forEach(function(key){
switch(key){case"x0":case"x1":bounds[key]=shape.zoom*node.bounds[key]+shape.x;
break;case"y0":case"y1":bounds[key]=shape.zoom*node.bounds[key]+shape.y;
break;default:bounds[key]=0}}),{offsetRadius:node.radius*shape.zoom,
offsetX:shape.x,offsetY:shape.y,offsetBounds:bounds,zoom:shape.zoom,
zindex:node.zindex}},GraphChartRender.prototype.getLinkShape=function(id){
var link=this.engine.core.getLink(id)||{},zoom=this.engine.core.zoom();
return{offsetRadius:link.radius*zoom,offsetPointsX:link.renderPointsX,
offsetPointsY:link.renderPointsY,offsetBounds:link.renderBounds,
zoom:zoom}},GraphChartRender.prototype.scrollIntoView=function(ids){
return this.engine.core.scrollIntoView(ids),this},GraphChartRender;
}();exports.GraphChartRender=GraphChartRender},function(module,exports,__webpack_require__){
"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},graphchart_render_engine_base_1=__webpack_require__(23),GraphChartRenderSVG=function(_super){
function GraphChartRenderSVG(options){return _super.call(this,"svg")||this;
}return __extends(GraphChartRenderSVG,_super),GraphChartRenderSVG;
}(graphchart_render_engine_base_1.GraphChartRenderEngineBase);
exports.GraphChartRenderSVG=GraphChartRenderSVG},function(module,exports){
"use strict";var GraphChartRenderEngineBase=function(){function GraphChartRenderEngineBase(type){
this.renderType=type}return GraphChartRenderEngineBase.prototype.replaceData=function(data){
return this},GraphChartRenderEngineBase.prototype.getCore=function(){
return this.core},GraphChartRenderEngineBase.prototype.updateAreaSettings=function(settings){
return this},GraphChartRenderEngineBase}();exports.GraphChartRenderEngineBase=GraphChartRenderEngineBase;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},graphchart_render_engine_base_1=__webpack_require__(23),GraphChartRenderWebgl=function(_super){
function GraphChartRenderWebgl(options){return _super.call(this,"webgl")||this;
}return __extends(GraphChartRenderWebgl,_super),GraphChartRenderWebgl;
}(graphchart_render_engine_base_1.GraphChartRenderEngineBase);
exports.GraphChartRenderWebgl=GraphChartRenderWebgl},function(module,exports,__webpack_require__){
"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},graphchart_render_engine_base_1=__webpack_require__(23),utils_1=__webpack_require__(8),color_1=__webpack_require__(4),exception_1=__webpack_require__(5),base_event_1=__webpack_require__(26),zoomcharts_1=__webpack_require__(27),graphchart_style_1=__webpack_require__(17),icon_1=__webpack_require__(28);
console.log("loading render engine.");var GraphChartRenderCanvas=function(_super){
function GraphChartRenderCanvas(options,chart){var _this=_super.call(this,"canvas")||this;
_this.otherOptions={hideArrorMinZoom:.1},_this.canvasOptions={
container:document.body,assetsUrlBase:"./assets",advanced:{showFPS:!1
},navigation:{minNumberOfFocusNodes:1,numberOfFocusNodes:1,focusNodeExpansionRadius:2,
mode:"showall"},interaction:{zooming:{autoZoomPositionElasticity:55e-5,
zoomExtent:[.01,1.7],autoZoomExtent:[.005,1],doubleClickZoom:null
},resizing:{enabled:!1},selection:{linksSelectable:!0}},toolbar:{
back:!1,enabled:!1,showLabels:!0,zoomControl:!0,zoomOut:!1,location:"inside"
},localization:{closeButton:"关闭",loadingLabel:"装载中...",toolbar:{
backButton:"撤销",fitButton:"居中",rearrangeButton:"重置排列",freezeButton:"固定位置",
fullscreenButton:"全屏显示"},menu:{close:"Close",collapse:"Collapse",
dynamic:"PIN",expand:"Expand",fixed:"UnPin",focus:"Focus",hide:"Hide",
unfocus:"Unfocus"}},nodeMenu:{buttons:["expand","lock"],enabled:!0,
showData:!1,contentsFunction:function(data,node){try{document.querySelector(".DVSL-Menu nav").style.display="";
}catch(err){}return node.data.exID}},linkMenu:{buttons:[],enabled:!1,
showData:!1,contentsFunction:function(data,link){try{document.querySelector(".DVSL-Menu nav").style.display="";
}catch(err){}return link.data.exType}},style:{fadeTime:0,hiddenLinks:{
lineColor:"rgba(100,100,100,0.3)",lineWidth:3,size:20},linkRadiusExtent:[.6,30],
linkLengthExtent:[.3,150],linkStrengthExtent:[.1,5],linkDetailMinSize:12,
linkDetailMinZoom:.2,multilinkSpacing:graphchart_style_1.GraphStyle.defaultNodeBaseStyle.radius,
nodeDetailMinZoom:.08,scaleLinksWithZoom:!0,scaleObjectsWithZoom:!0,
selection:{fillColor:"rgba(173, 216, 230, 1)",lineColor:"rgba(255,255,255,0.01)",
shadowBlur:8,shadowColor:"rgba(0,0,0,0.1)",shadowOffsetX:0,shadowOffsetY:0,
sizeProportional:.1,sizeConstant:15},nodeLabel:{scaleWithZoom:!0,
scaleWithSize:!1,aspectRatio:10,borderRadius:10,backgroundStyle:{
fillColor:"rgba(250, 250, 250, 0.7)",lineColor:"gray"},align:"center"
},linkLabel:{scaleWithZoom:!0,scaleWithSize:!1,aspectRatio:10,
borderRadius:10,align:"center",backgroundStyle:{fillColor:"rgba(250, 250, 250, 0.7)"
}},selfLinkAngle:90,selfLinkHeightFactor:3,selfLinkWidthFactor:1,
selfLinkShape:"quadratic"},area:{style:{}}},void 0===options.container&&console.error(new exception_1.GException(2001,"container is not exist. Using <body> element as container.").toString()),
_this.chart=chart,_this.initOptions(options),_this.initOtherOptions(_this.chart.options),
_this.color=new color_1.Color,_this.icons=new icon_1.ICON(_this.canvasOptions.assetsUrlBase+"icons/"),
_this.core=new zoomcharts_1.NetChart(_this.canvasOptions);var infoEnabled=!0;
return"object"==typeof _this.canvasOptions.info&&null!==_this.canvasOptions.info&&(infoEnabled=_this.canvasOptions.info.enabled),
_this.initEventHandler(),_this.core.updateSettings({style:{nodeStyleFunction:function(node){
_this.initNodeLabelSetting(node).initNodeRenderSetting(node).initNodeItemsSetting(node);
},linkStyleFunction:function(link){_this.initLinkLabelSetting(link).initLinkRenderSetting(link).initLinkItemsSetting(link);
}},info:{enabled:infoEnabled,nodeContentsFunction:function(inNode,node){
return _this.nodeToolTipSetting(inNode,node,_this.chart)},linkContentsFunction:function(inLink,link){
return _this.linkToolTipSetting(inLink,link,_this.chart)}}}),
_this}return __extends(GraphChartRenderCanvas,_super),GraphChartRenderCanvas.prototype.initOptions=function(options){
this.canvasOptions.area.style.overlayColor=graphchart_style_1.GraphStyle.defualtAreaStyle.overlayColor,
this.canvasOptions.area.style.fillColor=graphchart_style_1.GraphStyle.defualtAreaStyle.fillColor,
this.canvasOptions.area.style.image=graphchart_style_1.GraphStyle.defualtAreaStyle.image,
this.canvasOptions.area.height=graphchart_style_1.GraphStyle.defualtAreaStyle.height,
this.canvasOptions.area.width=graphchart_style_1.GraphStyle.defualtAreaStyle.width,
this.canvasOptions.area.maxHeight=graphchart_style_1.GraphStyle.defualtAreaStyle.maxHeight,
this.canvasOptions.area.maxWidth=graphchart_style_1.GraphStyle.defualtAreaStyle.maxWidth,
this.canvasOptions.area.minHeight=graphchart_style_1.GraphStyle.defualtAreaStyle.minHeight,
this.canvasOptions.area.minWidth=graphchart_style_1.GraphStyle.defualtAreaStyle.minWidth,
this.canvasOptions.localization.menu.close=this.chart.language.getVertexString("built-in-translate","menu","Close"),
this.canvasOptions.localization.menu.collapse=this.chart.language.getVertexString("built-in-translate","menu","Collapse"),
this.canvasOptions.localization.menu.dynamic=this.chart.language.getVertexString("built-in-translate","menu","PIN"),
this.canvasOptions.localization.menu.expand=this.chart.language.getVertexString("built-in-translate","menu","Expand"),
this.canvasOptions.localization.menu.fixed=this.chart.language.getVertexString("built-in-translate","menu","UnPin"),
this.canvasOptions.localization.menu.focus=this.chart.language.getVertexString("built-in-translate","menu","Focus"),
this.canvasOptions.localization.menu.hide=this.chart.language.getVertexString("built-in-translate","menu","Hide"),
this.canvasOptions.localization.menu.unfocus=this.chart.language.getVertexString("built-in-translate","menu","Unfocus"),
utils_1.Utils.extend(this.canvasOptions,options),"/"!==this.canvasOptions.assetsUrlBase.substr(this.canvasOptions.assetsUrlBase.length-1)&&(this.canvasOptions.assetsUrlBase+="/");
},GraphChartRenderCanvas.prototype.initEventHandler=function(){
var _this=this;this.core.updateSettings({events:{onChartUpdate:function(event,args){
_this.chart.render.updateCoordinate(),_this.chart.event.handlers.onChartUpdate(_this.chart);
},onDataUpdated:function(event,args){_this.chart.render.updateCoordinate(),
_this.chart.event.handlers.onDataUpdated(_this.chart)},onSelectionChange:function(event,args){
_this.chart.render.updateCoordinate(),_this.chart.event.handlers.onSelectionChange(_this.chart.data.getSelectedNodes(),_this.chart.data.getSelectedLinks(),_this.chart);
},onClick:function(event,args){var mouseEvent=new base_event_1.BaseMouseEvent(event),clickItem=args.clickNode||args.clickLink||{};
if(_this.chart.render.updateCoordinate(),clickItem.isNode){var node=_this.chart.data.getNodes(clickItem.data.exType,clickItem.data.exID);
_this.chart.event.handlers.onClick(node,mouseEvent,_this.chart);
}else if(clickItem.isLink){var link=_this.chart.data.getLinks(clickItem.data.exType,clickItem.data.source.exType,clickItem.data.source.exID,clickItem.data.target.exType,clickItem.data.target.exID);
_this.chart.event.handlers.onClick(link,mouseEvent,_this.chart);
}else _this.chart.event.handlers.onClick(void 0,mouseEvent,_this.chart);
},onDoubleClick:function(event,args){var mouseEvent=new base_event_1.BaseMouseEvent(event),clickItem=args.clickNode||args.clickLink||{};
if(_this.chart.render.updateCoordinate(),clickItem.isNode){var node=_this.chart.data.getNodes(clickItem.data.exType,clickItem.data.exID);
_this.chart.event.handlers.onDoubleClick(node,mouseEvent,_this.chart);
}else if(clickItem.isLink){var link=_this.chart.data.getLinks(clickItem.data.exType,clickItem.data.source.exType,clickItem.data.source.exID,clickItem.data.target.exType,clickItem.data.target.exID);
_this.chart.event.handlers.onDoubleClick(link,mouseEvent,_this.chart);
}event.preventDefault()},onHoverChange:function(event,args){var mouseEvent=new base_event_1.BaseMouseEvent(event),hoverItem=args.hoverNode||args.hoverLink||{};
if(_this.chart.render.updateCoordinate(),hoverItem.isNode){var node=_this.chart.data.getNodes(hoverItem.data.exType,hoverItem.data.exID);
_this.chart.event.handlers.onHoverChange(node,mouseEvent,_this.chart);
}else if(hoverItem.isLink){var link=_this.chart.data.getLinks(hoverItem.data.exType,hoverItem.data.source.exType,hoverItem.data.source.exID,hoverItem.data.target.exType,hoverItem.data.target.exID);
_this.chart.event.handlers.onHoverChange(link,mouseEvent,_this.chart);
}else _this.chart.event.handlers.onHoverChange(void 0,mouseEvent,_this.chart);
},onPositionChange:function(event,args){var mouseEvent=new base_event_1.BaseMouseEvent(event);
_this.zoom===_this.core.zoom()||(_this.zoom=_this.core.zoom(),
_this.core.updateStyle()),_this.chart.event.handlers.onPositionChange(mouseEvent,_this.chart);
},onRightClick:function(event,args){var mouseEvent=new base_event_1.BaseMouseEvent(event),clickItem=args.clickNode||args.clickLink||{};
if(_this.chart.render.updateCoordinate(),clickItem.isNode){var node=_this.chart.data.getNodes(clickItem.data.exType,clickItem.data.exID);
_this.chart.event.handlers.onRightClick(node,mouseEvent,_this.chart);
}else if(clickItem.isLink){var link=_this.chart.data.getLinks(clickItem.data.exType,clickItem.data.source.exType,clickItem.data.source.exID,clickItem.data.target.exType,clickItem.data.target.exID);
_this.chart.event.handlers.onRightClick(link,mouseEvent,_this.chart);
}},onPointerDown:function(event,args){var mouseEvent=new base_event_1.BaseMouseEvent(event),clickItem=args.clickNode||args.clickLink||{};
if(_this.chart.render.updateCoordinate(),clickItem.isNode){var node=_this.chart.data.getNodes(clickItem.data.exType,clickItem.data.exID);
_this.chart.event.handlers.onPointerDown(node,mouseEvent,_this.chart);
}else if(clickItem.isLink){var link=_this.chart.data.getLinks(clickItem.data.exType,clickItem.data.source.exType,clickItem.data.source.exID,clickItem.data.target.exType,clickItem.data.target.exID);
_this.chart.event.handlers.onPointerDown(link,mouseEvent,_this.chart);
}else _this.chart.event.handlers.onPointerDown(void 0,mouseEvent,_this.chart);
},onPointerUp:function(event,args){var mouseEvent=new base_event_1.BaseMouseEvent(event),clickItem=args.clickNode||args.clickLink||{};
if(_this.chart.render.updateCoordinate(),clickItem.isNode){var node=_this.chart.data.getNodes(clickItem.data.exType,clickItem.data.exID);
_this.chart.event.handlers.onPointerUp(node,mouseEvent,_this.chart);
}else if(clickItem.isLink){var link=_this.chart.data.getLinks(clickItem.data.exType,clickItem.data.source.exType,clickItem.data.source.exID,clickItem.data.target.exType,clickItem.data.target.exID);
_this.chart.event.handlers.onPointerUp(link,mouseEvent,_this.chart);
}else _this.chart.event.handlers.onPointerUp(void 0,mouseEvent,_this.chart);
},onPointerDrag:function(event,args){var mouseEvent=new base_event_1.BaseMouseEvent(event),clickItem=args.clickNode||args.clickLink||{};
if(clickItem.isNode){var node=_this.chart.data.getNodes(clickItem.data.exType,clickItem.data.exID);
_this.chart.event.handlers.onPointerDrag(node,mouseEvent,_this.chart);
}else if(clickItem.isLink){var link=_this.chart.data.getLinks(clickItem.data.exType,clickItem.data.source.exType,clickItem.data.source.exID,clickItem.data.target.exType,clickItem.data.target.exID);
_this.chart.event.handlers.onPointerDrag(link,mouseEvent,_this.chart);
}else _this.chart.event.handlers.onPointerDrag(void 0,mouseEvent,_this.chart);
}}}),this.chart.container.onkeypress=function(event){_this.chart.event.handlers.onKeyPress(_this.chart.data.getSelectedNodes(),_this.chart.data.getSelectedLinks(),event);
}},GraphChartRenderCanvas.prototype.initOtherOptions=function(options){
var _this=this;void 0!==options.advanced&&null!==options.advanced&&Object.keys(options.advanced).forEach(function(key){
_this.otherOptions[key]=options.advanced[key]}),void 0!==this.otherOptions.nodeToolTipSetting&&(this.nodeToolTipSetting=this.otherOptions.nodeToolTipSetting),
void 0!==this.otherOptions.linkToolTipSetting&&(this.linkToolTipSetting=this.otherOptions.linkToolTipSetting);
var nodeMenuOptions,tmpNodeMenuContentsFunction;if(void 0!==this.otherOptions.nodeMenuContentsFunction&&(tmpNodeMenuContentsFunction=this.nodeMenuContentsFunction,
this.nodeMenuContentsFunction=this.otherOptions.nodeMenuContentsFunction),
void 0!==options.nodeMenu){if(nodeMenuOptions=options.nodeMenu,
this.canvasOptions.nodeMenu.enabled=void 0===nodeMenuOptions.enabled||!!nodeMenuOptions.enabled,
void 0===nodeMenuOptions.buttons||void 0===nodeMenuOptions.buttons.forEach)throw new exception_1.GException(2001,"The nodeMenu config contains unknown items.");
this.canvasOptions.nodeMenu.buttons=[]}this.canvasOptions.nodeMenu.contentsFunction=function(inNode,coreNode){
return _this.nodeMenuContentsFunction(inNode,coreNode,nodeMenuOptions,function(){
return tmpNodeMenuContentsFunction.call(_this,inNode,coreNode,nodeMenuOptions);
})};var linkMenuOptions,tmpLinkMenuContentsFunction;if(void 0!==this.otherOptions.linkMenuContentsFunction&&(tmpLinkMenuContentsFunction=this.linkMenuContentsFunction,
this.linkMenuContentsFunction=this.otherOptions.linkMenuContentsFunction),
void 0!==options.linkMenu){if(linkMenuOptions=options.linkMenu,
this.canvasOptions.linkMenu.enabled=void 0!==linkMenuOptions.enabled&&!!linkMenuOptions.enabled,
void 0===linkMenuOptions.buttons||void 0===linkMenuOptions.buttons.forEach)throw new exception_1.GException(2001,"The linkMenu config contains unknown items.");
this.canvasOptions.linkMenu.buttons=[]}this.canvasOptions.linkMenu.contentsFunction=function(inLink,coreLink){
return _this.linkMenuContentsFunction(inLink,coreLink,linkMenuOptions,function(){
return tmpLinkMenuContentsFunction.call(_this,inLink,coreLink,linkMenuOptions);
})}},GraphChartRenderCanvas.prototype.getCore=function(){return this.core;
},GraphChartRenderCanvas.prototype.replaceData=function(internalData){
return this.core.replaceData(internalData),this},GraphChartRenderCanvas.prototype.addFocusNode=function(id){
return this.core.addFocusNode(id),this},GraphChartRenderCanvas.prototype.clearFocus=function(){
return this.core.clearFocus(),this},GraphChartRenderCanvas.prototype.collapseNode=function(id){
return this.core.collapseNode(id),this},GraphChartRenderCanvas.prototype.expandNode=function(id){
return this.core.expandNode(id),this},GraphChartRenderCanvas.prototype.initNodeLabelSetting=function(node){
var _this=this;node.label="";var type=node.data.exType,attrs=Object.keys(node.data.attrs||{}),keys=Object.keys(node.data.labels||{}),enabledKeys=keys.filter(function(k){
return node.data.labels[k]});if(enabledKeys.indexOf("id")!==-1){
var attr="id",value=node.data.exID;1===enabledKeys.length?node.label+=this.chart.language.getVertexString(type,attr,value)+"<br>":node.label+=this.chart.language.getVertexString("built-in-translate","Vertex")+" : "+this.chart.language.getVertexString(type,attr,value)+"<br>";
}if(enabledKeys.indexOf("type")!==-1){var attr="type",value=node.data.exType;
1===enabledKeys.length?node.label+=this.chart.language.getVertexString(type)+"<br>":node.label+=this.chart.language.getVertexString("built-in-translate","Type")+" : "+this.chart.language.getVertexString(type)+"<br>";
}return enabledKeys.forEach(function(attr){if(attrs.indexOf(attr)!==-1){
var value=node.data.attrs[attr];node.label+=_this.chart.language.getVertexString(type,attr)+" : "+JSON.stringify(_this.chart.language.getVertexString(type,attr,value))+"<br>";
}}),node.label.length>0&&(node.label=node.label.substr(0,node.label.length-4)),
this},GraphChartRenderCanvas.prototype.initNodeRenderSetting=function(node){
var inNode=node.data,customizedFlag={};for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.base)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.base,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.base[key]);
Object.keys(inNode.styles.base||{}).forEach(function(key){var tmp=inNode.styles.base[key];
"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
}),node.fillColor=inNode.styles.base.fillColor||this.color.getColor(inNode.exType);
var iconName=void 0!==inNode.styles.base.icon?inNode.styles.base.icon:this.chart.render.icons[inNode.exType];
void 0!==window.gsql&&void 0!==window.gsql.icons&&(iconName=window.gsql.icons[inNode.exType]||iconName);
var icon=this.icons.getIcon(iconName);if(null===icon?delete node.image:(node.image=icon.image,
node.imageSlicing=icon.imageSlicing),inNode.styles.isHovered=node.hovered,
node.hovered){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.hovered)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.hovered,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.hovered[key]);
Object.keys(inNode.styles.hovered||{}).forEach(function(key){
var tmp=inNode.styles.hovered[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isSelected=node.selected,node.selected){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.selected)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.selected,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.selected[key]);
Object.keys(inNode.styles.selected||{}).forEach(function(key){
var tmp=inNode.styles.selected[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isLowlighted){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.lowlighted)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.lowlighted,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.lowlighted[key]);
Object.keys(inNode.styles.lowlighted||{}).forEach(function(key){
var tmp=inNode.styles.lowlighted[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isLocked=node.locked,node.locked){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.locked)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.locked,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.locked[key]);
Object.keys(inNode.styles.locked||{}).forEach(function(key){var tmp=inNode.styles.locked[key];
"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isExpanded=node.expanded,node.expanded){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.expanded)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.expanded,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.expanded[key]);
Object.keys(inNode.styles.expanded||{}).forEach(function(key){
var tmp=inNode.styles.expanded[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isInvisible=node.invisible,node.invisible){
for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.invisible)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.invisible,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.invisible[key]);
Object.keys(inNode.styles.invisible||{}).forEach(function(key){
var tmp=inNode.styles.invisible[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(void 0===customizedFlag.labelStyle||customizedFlag.labelStyle.margin!==!0){
var aspectRatio=node.aspectRatio>1?node.aspectRatio:1,radius=node.radius,margin=(1/aspectRatio-1)*radius;
node.labelStyle.margin=margin}return customizedFlag.draggable!==!0&&(node.draggable=!0),
this},GraphChartRenderCanvas.prototype.initNodeItemsSetting=function(node){
var inNode=node.data;return node.items=inNode.others.items||[],
this},GraphChartRenderCanvas.prototype.initLinkLabelSetting=function(link){
var _this=this;link.label="";var type=link.data.exType,attrs=Object.keys(link.data.attrs||{}),keys=Object.keys(link.data.labels||{}),enabledKeys=keys.filter(function(k){
return link.data.labels[k]});if(enabledKeys.indexOf("type")!==-1){
link.data.exType;1===enabledKeys.length?link.label+=this.chart.language.getEdgeString(type)+"<br>":link.label+=this.chart.language.getEdgeString("built-in-translate","Type")+" : "+this.chart.language.getEdgeString(type)+"<br>";
}return enabledKeys.forEach(function(attr){if(attrs.indexOf(attr)!==-1){
var value=link.data.attrs[attr];link.label+=_this.chart.language.getEdgeString(type,attr)+" : "+JSON.stringify(_this.chart.language.getEdgeString(type,attr,value))+"<br>";
}}),link.label.length>0&&(link.label=link.label.substr(0,link.label.length-4)),
this},GraphChartRenderCanvas.prototype.initLinkRenderSetting=function(link){
var inLink=link.data,customizedFlag={};inLink.directed===!0&&this.core.zoom()>this.otherOptions.hideArrorMinZoom?link.toDecoration="arrow":link.toDecoration=null,
link.direction="R";for(var key in graphchart_style_1.GraphStyle.defaultLinkStyle.base)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultLinkStyle.base,key)&&(link[key]=graphchart_style_1.GraphStyle.defaultLinkStyle.base[key]);
if(Object.keys(inLink.styles.base||{}).forEach(function(key){
var tmp=inLink.styles.base[key];"object"==typeof tmp&&"object"==typeof link[key]&&null!==link[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){link[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(link[key]=tmp,customizedFlag[key]=!0);
}),link.fillColor=inLink.styles.base.fillColor||this.color.getColor(inLink.exType),
inLink.styles.isHovered=link.hovered,link.hovered||link.from.hovered||link.to.hovered){
for(var key in graphchart_style_1.GraphStyle.defaultLinkStyle.hovered)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultLinkStyle.hovered,key)&&(link[key]=graphchart_style_1.GraphStyle.defaultLinkStyle.hovered[key]);
Object.keys(inLink.styles.hovered||{}).forEach(function(key){
var tmp=inLink.styles.hovered[key];"object"==typeof tmp&&"object"==typeof link[key]&&null!==link[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){link[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(link[key]=tmp,customizedFlag[key]=!0);
})}if(inLink.styles.isSelected=link.selected,link.selected||link.from.selected&&link.to.selected){
for(var key in graphchart_style_1.GraphStyle.defaultLinkStyle.selected)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultLinkStyle.selected,key)&&(link[key]=graphchart_style_1.GraphStyle.defaultLinkStyle.selected[key]);
Object.keys(inLink.styles.selected||{}).forEach(function(key){
var tmp=inLink.styles.selected[key];"object"==typeof tmp&&"object"==typeof link[key]&&null!==link[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){link[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(link[key]=tmp,customizedFlag[key]=!0);
})}if(inLink.styles.isLowlighted){for(var key in graphchart_style_1.GraphStyle.defaultLinkStyle.lowlighted)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultLinkStyle.lowlighted,key)&&(link[key]=graphchart_style_1.GraphStyle.defaultLinkStyle.lowlighted[key]);
Object.keys(inLink.styles.lowlighted||{}).forEach(function(key){
var tmp=inLink.styles.lowlighted[key];"object"==typeof tmp&&"object"==typeof link[key]&&null!==link[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){link[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(link[key]=tmp,customizedFlag[key]=!0);
})}if(inLink.styles.isInvisible=link.invisible,link.invisible){
for(var key in graphchart_style_1.GraphStyle.defaultLinkStyle.invisible)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultLinkStyle.invisible,key)&&(link[key]=graphchart_style_1.GraphStyle.defaultLinkStyle.invisible[key]);
Object.keys(inLink.styles.invisible||{}).forEach(function(key){
var tmp=inLink.styles.invisible[key];"object"==typeof tmp&&"object"==typeof link[key]&&null!==link[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){link[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(link[key]=tmp,customizedFlag[key]=!0);
})}return this},GraphChartRenderCanvas.prototype.initLinkItemsSetting=function(link){
var inLink=link.data;return link.items=inLink.others.items||[],
this},GraphChartRenderCanvas.prototype.nodeToolTipSetting=function(inNode,node,chart){
var type=inNode.exType,toolTip="<table>";toolTip+="<tr><th>"+this.chart.language.getVertexString("built-in-translate","Vertex")+"</th><th>"+this.chart.language.getVertexString(type,"id",inNode.exID)+"</th></tr>",
toolTip+="<tr><td>"+this.chart.language.getVertexString("built-in-translate","Type")+"</td><td>"+this.chart.language.getVertexString(type)+"</td></tr>";
for(var attr in inNode.attrs)if(Object.prototype.hasOwnProperty.call(inNode.attrs,attr)){
var value=JSON.stringify(this.chart.language.getVertexString(type,attr,inNode.attrs[attr]));
toolTip+="<tr><td>"+this.chart.language.getVertexString(type,attr)+"</td><td>"+value+"</td></tr>";
}return toolTip+="</table>"},GraphChartRenderCanvas.prototype.linkToolTipSetting=function(inLink,link,chart){
var type=inLink.exType,toolTip="<table>";toolTip+="<tr><th>"+this.chart.language.getEdgeString("built-in-translate","Edge")+"</th><th>"+this.chart.language.getEdgeString(type)+"</th></tr>";
for(var attr in inLink.attrs)if(Object.prototype.hasOwnProperty.call(inLink.attrs,attr)){
var value=JSON.stringify(this.chart.language.getEdgeString(type,attr,inLink.attrs[attr]));
toolTip+="<tr><td>"+this.chart.language.getEdgeString(type,attr)+"</td><td>"+value+"</td></tr>";
}return toolTip+="</table>"},GraphChartRenderCanvas.prototype.nodeMenuContentsFunction=function(data,coreNode,targetOption,defaultContentsFunction){
var menu,_this=this,menuStyle={"background-color":"#e2e2e2",border:"none",
color:"#2b2b2b",padding:"5px 10px","text-align":"center","text-decoration":"none",
display:"inline-block","font-size":"14px",margin:"2px 2px",cursor:"pointer"
};try{document.querySelector(".DVSL-Menu nav:empty").style.display="none";
}catch(err){}try{menu=document.createElement("div"),targetOption.buttons.forEach(function(button){
var btn=document.createElement("button");btn.onclick=function(){
try{button.callback(data,_this.chart),_this.chart.hideMenu()}catch(err){
console.warn("Menu call back function syntax error : ",err.toString());
}},btn.innerHTML=_this.chart.language.getVertexString("built-in-translate","menu",button.label);
for(var s in menuStyle)Object.prototype.hasOwnProperty.call(menuStyle,s)&&(btn.style[s]=menuStyle[s]);
var br=document.createElement("br");menu.appendChild(btn),menu.appendChild(br);
})}catch(err){menu="Error"}return menu},GraphChartRenderCanvas.prototype.linkMenuContentsFunction=function(data,coreLink,targetOption,defaultContentsFunction){
var _this=this,menuStyle={"background-color":"#e2e2e2",border:"none",
color:"#2b2b2b",padding:"5px 10px","text-align":"center","text-decoration":"none",
display:"inline-block","font-size":"14px",margin:"2px 2px",cursor:"pointer"
};try{document.querySelector(".DVSL-Menu nav:empty").style.display="none";
}catch(err){}var menu;try{menu=document.createElement("div"),
targetOption.buttons.forEach(function(button){var btn=document.createElement("button");
btn.onclick=function(){try{button.callback(data,_this.chart),
_this.chart.hideMenu()}catch(err){console.warn("Menu call back function syntax error : ",err.toString());
}},btn.innerHTML=_this.chart.language.getEdgeString("built-in-translate","menu",button.label);
for(var s in menuStyle)Object.prototype.hasOwnProperty.call(menuStyle,s)&&(btn.style[s]=menuStyle[s]);
var br=document.createElement("br");menu.appendChild(btn),menu.appendChild(br);
})}catch(err){menu="Error"}return menu},GraphChartRenderCanvas.prototype.updateAreaSettings=function(settings){
var option={area:{style:{}}};for(var key in settings)if(Object.prototype.hasOwnProperty.call(settings,key)&&Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defualtAreaStyle,key))switch(key){
case"overlayColor":case"fillColor":case"image":option.area.style[key]=settings[key];
break;default:option.area[key]=settings[key]}return this.core.updateSettings(option),
this},GraphChartRenderCanvas}(graphchart_render_engine_base_1.GraphChartRenderEngineBase);
exports.GraphChartRenderCanvas=GraphChartRenderCanvas},function(module,exports){
"use strict";var BaseMouseEvent=function(){function BaseMouseEvent(event){
this.altKey=event.altKey,this.ctrlKey=event.ctrlKey,this.shiftKey=event.shiftKey,
this.button=0,this.buttons=1,this.which=1,this.clientX=event.x,
this.clientY=event.y,this.pageX=event.pageX,this.pageY=event.pageY,
this.relatedTarget=event.target,this.preventDefault=function(){
event.preventDefault()}}return BaseMouseEvent}();exports.BaseMouseEvent=BaseMouseEvent;
var BaseKeyboardEvent=function(){function BaseKeyboardEvent(event){
this.altKey=event.altKey,this.ctrlKey=event.ctrlKey,this.shiftKey=event.shiftKey,
this.metaKey=event.metaKey,this.charCode=event.charCode,this.key=event.key,
this.keyCode=event.keyCode,this.which=event.which,this.location=event.location;
}return BaseKeyboardEvent}();exports.BaseKeyboardEvent=BaseKeyboardEvent;
},function(module,exports){"use strict";var ZoomCharts=ZoomCharts||{};
!function(t){var e=t.Configuration||(t.Configuration={}),i=t.Internal||(t.Internal={});
t.PackageInfo={LibraryName:"zoomcharts",Version:"1.18.1-dev",
Revision:"7009692112de0c2ac6cd8e1a5d6fd951f0f497e4",Built:"2017-11-07"
};var n=function(t,e){function i(){this.constructor=t}t.__baseType=e;
for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,
new i)};!function(i){var r=i.GeoChart||(i.GeoChart={}),s=i.FacetChart||(i.FacetChart={}),a=i.PieChart||(i.PieChart={}),o=i.TimeChart||(i.TimeChart={}),l=i.LinearChart||(i.LinearChart={}),h=i.NetChart||(i.NetChart={}),u=i.ItemsChart||(i.ItemsChart={}),c=i.Resources||(i.Resources={}),d=i.Base||(i.Base={});
"undefined"!=typeof module&&module.exports&&(module.exports.Internal=i),
function(r){function s(){}function a(t,e){for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=e[i]);
}var o=r.Bar||(r.Bar={}),l=Object.prototype.hasOwnProperty,h=("undefined"==typeof console?null:console)||{};
h.log||(h.log=s),h.warn||(h.warn=s),h.error||(h.error=s),h.info||(h.info=s),
r.overlayConsole=!1;var u="undefined"!=typeof Document&&!(document instanceof Document),d=function(){
function t(){}return t.exportSymbol=function(t,e){"undefined"!=typeof window&&(window[t]=e),
"undefined"!=typeof module&&module.exports&&(module.exports[t]=e);
},t.extendStyleTo=function(t,e,i){void 0===i&&(i=!0);for(var n=Object.keys(t),r=0;r<n.length;r++){
var s=n[r],a=t[s];void 0===a||!i&&void 0!==e[s]||(e[s]=a)}},t.extendDataItem=function(e,i){
for(var n=e,r=Object.keys(i),s=0;s<r.length;s++){var a=r[s],o=i[a];
"style"===a?n.style?t.extendDeep(n.style,o):n.style=t.realClone(o):n[a]=o;
}return n},t.extendDeep=function(e,i){if(null==e)throw new Error("Target object is not defined.");
if(!t.isObjectOrArray(e))throw new Error("Target is not an object.");
for(var n=Object.keys(i),r=0;r<n.length;r++){var s=n[r],a=i[s],o=e[s];
null==o&&t.isObjectOrArray(a)&&!t.isDomObject(a)?e[s]=this.realClone(a):t.isObjectOrArray(o)&&t.isObjectOrArray(a)&&!t.isDomObject(o)&&!t.isDomObject(a)?this.extendDeep(o,a):e[s]=a;
}},t.extendCopy=function(t,e,i){if(void 0===i&&(i=null),!e)return t;
for(var n=Object.keys(e),r=0;r<n.length;r++){var s=n[r],a=e[s];
if(i&&(a=i(s,a)),void 0!==a){var o=t[s];this.isDomObject(a)?t[s]=a:this.isObjectOrArray(o)&&this.isObjectOrArray(a)?this.extendCopy(o,a,i):this.isObjectOrArray(a)?Array.isArray(a)?t[s]=this.extendCopy([],a,i):t[s]=this.extendCopy({},a,i):t[s]=a;
}}return t},t.clone=function(e){if(null==e)return e;var i;i=t.isObjectOrArray(e)?new e.constructor:e.constructor();
for(var n=Object.keys(e),r=0;r<n.length;r++){var s=n[r],a=e[s];
i[s]=a}return i},t.isObjectOrArray=function(t){return null!==t&&"object"==typeof t;
},t.isDomObject=function(t){return t&&(t instanceof Element||t instanceof CanvasGradient||t instanceof CanvasPattern||u&&2===t.ATTRIBUTE_NODE);
},t.isFunction=function(t){return"function"==typeof t},t.isNumber=function(t){
return!isNaN(t)&&("number"==typeof t||t instanceof Number)},t.isString=function(t){
return"string"==typeof t||t instanceof String},t.tryParseInt=function(t,e){
void 0===e&&(e=0);var i=parseInt(t,10);return isNaN(i)?e:i},t.tryParseFloat=function(t,e){
void 0===e&&(e=0);var i=parseFloat(t);return isNaN(i)?e:i},t.hasProperty=function(t,e){
return l.call(t,e)},t.hasProperties=function(t){return!!t&&Object.keys(t).length>0;
},t.removePropertyValue=function(t){var e=Object.keys(t);if(0===e.length)return null;
var i=e[0],n=t[i];return delete t[i],{key:i,value:n}},t.countProperties=function(t){
return Object.keys(t).length},t.realClone=function(t){if(this.isFunction(t)||this.isDomObject(t))return t;
if(Array.isArray(t)){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=this.realClone(t[i]);
return e}if(this.isObjectOrArray(t)){for(var n=new t.constructor,r=Object.keys(t),i=0;i<r.length;i++){
var s=r[i];n[s]=this.realClone(t[s])}return n}return t},t.realCloneSafe=function(t,e){
if(void 0===e&&(e=[]),this.isFunction(t)||this.isDomObject(t))return t;
if(Array.isArray(t)){for(var i=0;i<e.length;i++){var n=e[i];if(n.from===t)return n.to;
}var r=new Array(t.length);e.push({from:t,to:r});for(var i=0;i<t.length;i++)r[i]=this.realCloneSafe(t[i],e);
return r}if(this.isObjectOrArray(t)){for(var i=0;i<e.length;i++){
var n=e[i];if(n.from===t)return n.to}var s=new t.constructor;e.push({
from:t,to:s});for(var a=Object.keys(t),i=0;i<a.length;i++){var o=a[i];
s[o]=this.realCloneSafe(t[o],e)}return s}return t},t.removeFromArray=function(t,e){
for(var i,n=!1;(i=t.indexOf(e))>-1;)t.splice(i,1),n=!0;return n;
},t.removeFromArrayHasty=function(t,e){var i=t.indexOf(e);if(i<0)return!1;
var n=t.pop();return i!==t.length&&(t[i]=n),!0},t.arrayToMap=function(t,e){
for(var i={},n=0;n<t.length;n++){var r=t[n];r.index=n,i[r[e]]=r;
}return i},t.overlayConsoleMessage=function(e,i,n){var r=document.getElementById("zoomChartsOverlayConsole");
r||(r=document.createElement("div"),r.id="zoomChartsOverlayConsole",
t.extendCopy(r.style,{position:"absolute",top:"10px",left:"10px",
width:"50%",height:"300px",overflow:"auto",backgroundColor:"rgba(255,255,255,0.75)",
border:"1px solid black",zIndex:"99999"}),document.body.appendChild(r));
var s=document.createElement("div");s.style.color="error"===e?"red":"warn"===e?"yellow":"black",
s.innerText=i+n.map(function(t){return JSON.stringify(t)}).join(""),
r.appendChild(s),r.scrollTop=r.scrollHeight},t.log=function(e){
for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];r.overlayConsole?t.overlayConsoleMessage("log",e,i):i&&i.length?h.info.apply(h,[e].concat(i)):h.info(e);
},t.warn=function(e,i,n){if(void 0===n&&(n=null),n){var s=(new Date).getTime();
if(this._previousConsoleMessages[e]>s)return;n===!0&&(n=5e3),
this._previousConsoleMessages[e]=s+n}r.overlayConsole?t.overlayConsoleMessage("warn",e,i):i&&i.length?h.warn.apply(h,[e].concat(i)):h.warn(e);
},t.error=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];
r.overlayConsole?t.overlayConsoleMessage("error",e,i):i&&i.length?h.error.apply(h,[e].concat(i)):h.error(e);
},t.createDom=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),
void 0===n&&(n=null);var r=document.createElement(t);return null!==e&&(r.className=e),
null!==i&&(r.innerHTML=i),null!==n&&n.appendChild(r),r},t.addClass=function(t,e){
if(e=(e||"").trim()){var i=e.indexOf(" ");if(i>-1&&(this.addClass(t,e.substr(i+1)),
e=e.substr(0,i)),t.classList)t.classList.add(e);else{var n=t.className.length>0&&new RegExp("(^|s)"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"(s|$)").test(t.className);
n||(t.className.length>0&&(e=" "+e),t.className=e)}}},t.removeClass=function(t,e){
if(e=(e||"").trim()){var i=e.indexOf(" ");if(i>-1&&(this.removeClass(t,e.substr(i+1)),
e=e.substr(0,i)),t.classList)t.classList.remove(e);else{var n=function(t,i){
return i===e?"":t};t.className=t.className.replace(/(\S+)\s*/g,n).trim();
}}},t.isStyleSheetDefined=function(t,e){var i=document.createElement("dvsl-test"),n=document.body;
n.appendChild(i);try{var r=window.getComputedStyle(i),s=r[e];return i.className=t,
n.removeChild(i),n.appendChild(i),s!==r[e]}finally{n.removeChild(i);
}},t.listen=function(t,e,i){t.addEventListener(e,i)},t.unlisten=function(t,e,i){
t.removeEventListener(e,i)},t.stopPropagation=function(t){t.stopPropagation();
},t.canvasScaling=function(){var t,e;return window.screen.deviceXDPI?(t=window.screen.deviceXDPI/window.screen.logicalXDPI,
e=window.screen.deviceYDPI/window.screen.logicalYDPI):t=e=window.devicePixelRatio?window.devicePixelRatio:1,
{x:t,y:e}},t.convertPointFromPageToNode=function(t,e,i,n,r){if(window&&window.webkitConvertPointFromPageToNode){
var s=window.webkitConvertPointFromPageToNode(t,new WebKitPoint(e,i));
if(s)return s}var a=t.getBoundingClientRect();return{x:n-a.left,
y:r-a.top}},t.elementPos=function(t){var e=t.getBoundingClientRect(),i=e.top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),n=e.left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0);
return{left:n,top:i}},t.isParentOf=function(t,e){for(;e;){if(e===t)return!0;
e=e.parentElement}return!1},t.getProp=function(t,e,i){void 0===i&&(i=!1);
for(var n=0,r=e.split(".");n<r.length;n++){var s=r[n];if(null==t||!this.hasProperty(t,s))return;
if(i&&n===r.length-1){var a=t[s];delete t[s],t=a}else t=t[s]}
return t},t.wrapValue=function(t,e){for(var i=t,n=e.split(".").reverse(),r=0;r<n.length;r++){
var s=n[r];a={},a[s]=i,i=a}return i;var a},t.hasProp=function(e,i){
return void 0!==t.getProp(e,i)},t.sign=function(t){return t?t<0?-1:1:0;
},t.reversePolyline=function(t){var e=[];if(t.length%2!==0)throw new Error("The length of a given polyline must be dividable by 2");
for(var i=t.length-1;i>=0;i+=-2)e.push(t[i-1],t[i]);return e},
t.toleranceMax=function(t,e,i){return t>=e*i?t:e},t.toleranceMin=function(t,e,i){
return t*i<=e?t:e},t.getIdentifierStr=function(){return t.SeparatorChar+(t.nextIdentifier++).toString();
},t.doPostRequest=function(t,e,i,n,r){this.isString(i)||(i=JSON.stringify(i)),
this.doRequestRaw(t,e,"POST",i,n,r)},t.doRequest=function(t,e,i,n,r){
if(i&&i.length){t+=t.indexOf("?")!==-1?"&":"?";for(var s=0;s<i.length;s++){
var a=i[s];s>0&&(t+="&"),t+=encodeURIComponent(a[0])+"="+encodeURIComponent(a[1]);
}}this.doRequestRaw(t,e,"GET","",n,r)},t.doRequestRaw=function(t,e,i,n,r,s){
var a;if("undefined"==typeof XMLHttpRequest)throw new Error("Cannot create XMLHttpRequest. Please verify if the feature is not disabled in the browser configuration.");
a=new XMLHttpRequest,a.onreadystatechange=function(){4===a.readyState&&(200===a.status?r(a.responseText):s(a.responseText));
};try{a.open(i,t,!0),a.timeout=e,a.ontimeout=function(){s('{"error": "Request timeout."}');
},a.send(n)}catch(t){return void window.setTimeout(function(){
return s(t)},1)}},t.openUrl=function(t,e){return window.open(t,e||"_blank");
},t.parseData=function(e,i,n){void 0===n&&(n=!1);var r=null,s=null;
if(i=i.toLowerCase(),"json"===i||"geojson"===i)if(t.isString(e))try{
s=JSON.parse(e)}catch(t){r=n?e:"Failed to parse JSON response: "+t+". Response text: "+e;
}else s=e;else r="Unsupported data format: "+i;return null==s&&null==r&&(r="NULL response"),
r?{error:r}:s},t.numberFormat=function(t,e,i,n){void 0===e&&(e=2),
void 0===i&&(i="."),void 0===n&&(n=" ");var r=parseFloat(t);if(isNaN(r))return"—";
var s;r<0?(s="-",r=-r):s="";for(var a,o=Math.floor(r),l=r-o,h=e>0?i+l.toFixed(e).substr(2):"";a=o%1e3,
h=a.toFixed(0)+h,o>=1e3;)o=Math.floor(o/1e3),a<10?h="00"+h:a<100&&(h="0"+h),
h=n+h;return s+h},t.printPercentValue=function(t,e,i){void 0===i&&(i="");
var n="",s=0;if(e[1]){var a=e[1];n=a.charAt(0),s=a.length-1}var o=e[2],l=r.Helpers.numberFormat(100*t,s,n);
return""!==i&&" "===o.charAt(0)&&(i=" "+i),l+i+o},t.printCurrencyValue=function(t,e,i){
void 0===i&&(i="");var n="",s=0;if(e[2]){var a=e[2];n=a.charAt(0),
s=a.length-1}var o=e[1]?e[1]:"",l=e[3]?e[3]:"",h=r.Helpers.numberFormat(t,s,n);
return""!==i&&" "===l.charAt(0)&&(i=" "+i),o&&l&&(l.indexOf("%")>-1||o.indexOf("%")>-1)?(this.warn("Incorrect valueFormat using '%'. To format as percentage, '%' must be used after digits without any prefix."),
r.Helpers.numberFormat(t)):o+h+i+l},t.matchPercentFormat=function(t){
return/^0([.,]0+)?( ?%)$/.exec(t)},t.matchCurrencyFormat=function(t){
return/^([^0-9]+)?0?([.,]0+)?([^0-9]+)?$/.exec(t)},t.buildImage=function(t,e,i,n){
var r=this,s=document.createElement("img"),a=function(){return i(s);
},o=function(a){e?r.buildImage(t,null,i,n):n(s)};return e&&(s.crossOrigin=e),
s.src=t,s.complete?s.width>0?a():setTimeout(a,0):(s.onload=a,
s.onerror=o),s},t.sort=function(t,e){e||(e=function(t,e){return t-e;
});for(var i,n,r=t,s=0|r.length,a=0;a<=s-2;a+=2)i=r[a],n=r[a+1],
e(i,n)>0&&(r[a]=n,r[a+1]=i);for(var o=r.slice(0),l=2;l<s;){for(var h=l<<1,u=0;u<=s-1;u+=h){
var c=u,d=u+l;if(d>=s)for(var a=c;a<=s-1;a++)o[a]=r[a];else{var p=d,f=Math.min(d+l,s),g=u;
for(i=r[c],n=r[d];;)if(e(i,n)<=0){if(o[g]=i,g=g+1|0,c=c+1|0,c===p){
for(o[g]=n,g=g+1|0,d=d+1|0;d<f;)o[g]=r[d],g=g+1|0,d=d+1|0;break;
}i=r[c]}else{if(o[g]=n,g=g+1|0,d=d+1|0,d===f){for(o[g]=i,g=g+1|0,
c=c+1|0;c<p;)o[g]=r[c],g=g+1|0,c=c+1|0;break}n=r[d]}}}l=h;var m=o;
o=r,r=m}if(t!==r){for(var a=0;a<=s-1;a++)t[a]=r[a];r.length=0;
}else o.length=0;return t},t.binSearch=function(t,e){for(var i=0,n=t.length-1;i<n;){
var r=(n+i)/2|0;if(t[r]<e)i=r+1;else{if(!(t[r]>e)){for(;r>0&&t[r-1]===e;)r-=1;
return r}n=r}}return i<t.length&&t[i]<e?i+1:i},t.listenResize=function(e,i){
var n=document.documentMode;if(n&&n<11)e.onresize=i;else{var r=e,s=document.createElement("div"),a=function(e){
i(),t.updateResizeTriggers(s)};"static"===window.getComputedStyle(r).position&&(r.style.position="relative"),
r.__resizeTriggers__=s,s.className="DVSL-resize-triggers",s.innerHTML='<div class="DVSL-expand-trigger"><div></div></div><div class="DVSL-contract-trigger"></div>',
r.insertBefore(s,r.firstChild),t.updateResize(s),r.__resizeListener__=a,
r.addEventListener("scroll",a,!0)}},t.updateResize=function(t){
var e=t.__resizeTriggers__;e&&this.updateResizeTriggers(e)},t.updateResizeTriggers=function(t){
var e=t.firstElementChild||t.firstChild,i=t.lastElementChild||t.lastChild,n=e.firstElementChild||e.firstChild;
i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,n.style.width=e.offsetWidth+1+"px",
n.style.height=e.offsetHeight+1+"px",e.scrollLeft=e.scrollWidth,
e.scrollTop=e.scrollHeight},t.unlistenResize=function(t){var e=t,i=e.__resizeTriggers__;
i?(e.removeEventListener("scroll",e.__resizeListener__,!0),i.parentNode&&i.parentNode.removeChild(i),
delete e.__resizeListener__,delete e.__resizeTriggers__):delete t.onresize;
},t.decodeEntities=function(e){return e.indexOf("&")===-1?e:(t.decodeTextarea||(t.decodeTextarea=document.createElement("textarea")),
t.decodeTextarea.innerHTML=e,t.decodeTextarea.value)},t.base64Encode=function(t){
if(window.btoa)return window.btoa(t);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0,r=0;t.charAt(0|r)||(e="=",
r%1);i+=e.charAt(63&n>>8-r%1*8)){var s=t.charCodeAt(r+=.75);if(s>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");
n=n<<8|s}return i},t.compareVersions=function(t,e){for(var i=t.split("."),n=i.length,r=e.length,s=0;s<Math.max(n,r);s++){
var a=s<n?parseInt(i[s],10):0,o=s<r?e[s]:0;if(a>o)return!0;if(a<o)return!1;
}return!0},t.aggregate=function(t,e,i){for(var n=0,r=this.aggregationCallbacks[t],s=r.start;e();){
var a=i();r.increment(s,a),n+=1}return n>0?r.result(s,n):null;
},t.getRelativeClientRect=function(t){if(!t)return null;if(!t.offsetParent)return null;
var e=t.getBoundingClientRect(),i=t.offsetParent.getBoundingClientRect();
return{bottom:i.bottom-e.bottom,height:e.height,left:e.left-i.left,
right:i.right-e.right,top:e.top-i.top,width:e.width}},t}();if(d._previousConsoleMessages={},
d.SeparatorChar=String.fromCharCode(63743),d.nextIdentifier=0,
d.decodeTextarea=null,d.aggregationCallbacks={sum:{start:0,increment:function(t,e){
return t+e},result:function(t,e){return t}},min:{start:1/0,increment:function(t,e){
return Math.min(t,e)},result:function(t,e){return t}},max:{start:-(1/0),
increment:function(t,e){return Math.max(t,e)},result:function(t,e){
return t}},avg:{start:0,increment:function(t,e){return t+e},result:function(t,e){
return t/e}},count:{start:0,increment:function(t,e){return 0},
result:function(t,e){return e}},first:{start:null,increment:function(t,e){
return null!==t&&void 0!==t?t:e},result:function(t,e){return t;
}},last:{start:null,increment:function(t,e){return null!==e&&void 0!==e?e:t;
},result:function(t,e){return t}}},r.Helpers=d,"undefined"!=typeof window){
var p=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,f=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame;
if(!p){var g=0;p=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-g)),n=window.setTimeout(function(){
return t(e+i)},i);return g=e+i,n},f=window.clearTimeout}f||(f=function(){}),
d.requestAnimationFrame=function(t){return p.call(window,t)},
d.cancelAnimationFrame=function(t){return f.call(window,t)};var m=(new Date).getTime();
"performance"in window==0?d.performanceNow=function(){return(new Date).getTime()-m;
}:"now"in window.performance==0?(performance.timing&&performance.timing.navigationStart&&(m=performance.timing.navigationStart),
d.performanceNow=function(){return(new Date).getTime()-m}):d.performanceNow=function(){
return window.performance.now()};var v=m-d.performanceNow();d.timeToPerfNow=function(t){
return t-v}}var y=function(){function t(){this.id="default",this.url=null,
this.urlParameters=[],this.postprocessorFunction=null,this.preloaded=null,
this.format="JSON",this.requestTimeout=4e4,this.numberOfParallelRequests=3;
}return t}();r.SettingsData=y;var S=function(){function t(t,e){
this.removed=!1,this.requestScheduled=!1,this.requestsRunning=!1,
this.requestCount=0,this.dataSettings=e,this.chart=t,this.settings=t.settings;
}return t.doRequest=function(t,e,i,n,r){if(e.urlParameters.length){
i=i.slice();for(var s=0;s<e.urlParameters.length;s++){var a=e.urlParameters[s];
i.push([a.name,a.value])}}var o;o=e.postprocessorFunction?function(t){
return n(e.postprocessorFunction(t))}:n,d.doRequest(t,e.requestTimeout,i,o,r);
},t.prototype.buildRequest=function(){return null},t.prototype.verifyData=function(t,e){
return!0},t.prototype.addVerifiedData=function(t,e){return{}},
t.prototype.requestFailedPermanently=function(t){},t.prototype.remove=function(){
this.removed=!0},t.prototype.hasPendingRequests=function(){return!this.removed&&this.requestCount>0;
},t.prototype.addData=function(t){this._dataArrived(null,t)},
t.prototype.applyPreloadedData=function(){this.dataSettings.preloaded&&this._dataArrived(null,this.dataSettings.preloaded);
},t.prototype.scheduleRequests=function(t){var e=this;void 0===t&&(t=!1),
t?this._runRequests():this.requestScheduled||(this.requestScheduled=!0,
setTimeout(function(){return e._runRequests()},0))},t.prototype._runRequests=function(){
var t=this;if(!this.removed&&!this.requestsRunning){this.requestScheduled=!1;
var e;try{for(this.requestsRunning=!0;this.requestCount<this.dataSettings.numberOfParallelRequests&&(e=this.buildRequest(),
null!==e);)!function(e){var i=function(i){return t._dataArrived(e,i);
},n=function(i){return t._dataError(e,i)};t.requestCount+=1,t.chart.log("Requesting data for",e),
t.dataFunc(e,i,n)}(e)}finally{this.requestsRunning=!1}}},t.prototype._dataError=function(t,e){
if(!this.removed){var i=d.parseData(e,this.dataSettings.format,!0),n=i.error?i.error:"Unknown error";
t?(this.requestCount-=1,this.chart.error("Data request failed: "+n,t)):this.chart.error("Data loading failed: "+n),
this.requestFailedPermanently(t),this._runRequests()}},t.prototype._dataArrived=function(t,e){
if(!this.removed){var i=d.parseData(e,this.dataSettings.format);
if(t?(this.requestCount-=1,i.error?this.chart.error("Data request succeeded, but contained an error: "+i.error,t):this.chart.log("Data arrived for request",t)):i.error?this.chart.error("Loaded data contains error: "+i.error):this.chart.log("Data loaded"),
!i.error&&this.verifyData(t,i)){var n=this.addVerifiedData(t,i);
n.dataArrived||(n.dataArrived={}),n.dataArrived[this.dataSettings.id]=!0;
var r=this.chart.createEventArguments(null,"api");r.dataArrived=i,
r.dataRemoved=null,this.chart.notifyDataUpdated(r),this.chart.events.notifySceneChanges(n);
}else t&&this.requestFailedPermanently(t);this._runRequests();
}},t}();r.Data=S;var b=function(){function t(){}return t.detect=function(){
return this._cached||this.run()},t.run=function(){var t,e=window,i=document.body;
document.domain&&(t=document.createElement("iframe"),i.appendChild(t),
e=t.contentWindow);var n;try{n=this.check(e)}catch(t){n=this.check(window);
}return this._cached=n,t&&i.removeChild(t),n},t.check=function(t){
return{isSafariDesktop:!!t.safari&&!!t.safari.pushNotification,
isChrome:!!t.chrome&&!!t.chrome.loadTimes}},t}();b._cached=null,
r.Browser=b;var C=function(){function t(t,e,i,n){this.consumed=!1,
this.defaultPrevented=!1,this.x=0,this.y=0,this.dx=0,this.dy=0,
this.wheely=0,this.wheelx=0,this.identifier="0",this.pressed=!1,
this.touch=!1,this.pageX=0,this.pageY=0,this.shiftKey=!1,this.altKey=!1,
this.ctrlKey=!1,this.target=null,this.isRightMB=!1,this._vx=null,
this._vy=null,this.velocityPointer=null,this._leaving=!1,this.swipeUp=!1,
this.swipeDown=!1,this.swipeLeft=!1,this.swipeRight=!1,this.swipeSpeed=null,
this.capture=!1,this.hovered=!1,this.cursor=null,this.changedPointerCount=1,
this.identifier=n,this.timeStamp=i,this.y=e,this.x=t}return t.prototype.preventDefault=function(){
this.defaultPrevented=!0},Object.defineProperty(t.prototype,"vx",{
get:function(){return null===this._vx&&null!==this.velocityPointer&&this.velocityPointer.calculatePosAndSpeed(this),
this._vx||0},set:function(t){this._vx=t},enumerable:!0,configurable:!0
}),Object.defineProperty(t.prototype,"vy",{get:function(){return null===this._vy&&null!==this.velocityPointer&&this.velocityPointer.calculatePosAndSpeed(this),
this._vy||0},set:function(t){this._vy=t},enumerable:!0,configurable:!0
}),t.prototype.distance=function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y));
},t.prototype.isWithinDistance=function(t,e,i){if(!t)return!1;
var n=this.pageX-t.pageX,r=this.pageY-t.pageY;return n*n+r*r<e*e&&(null==i||t.timeStamp+i>this.timeStamp);
},t}();r.MouseEvent=C;var x=function(){function t(t,e){this.noClick=!1,
this.scrolling=!1,this.ptsIndex=0,this.ptsLength=3,this.ptsMax=72,
this.settings=e,this.identifier=t.identifier,this.touch=!1,this.x=t.x,
this.y=t.y,this.pageX=t.pageX,this.pageY=t.pageY,this.timeStamp=t.timeStamp,
"undefined"!=typeof Int32Array?this.pts=new Int32Array(this.ptsMax):this.pts=new Array(this.ptsMax),
this.pts[0]=0|this.x,this.pts[1]=0|this.y,this.pts[2]=0}return t.prototype.moveTo=function(t){
var e=this.ptsIndex+this.ptsLength,i=t.timeStamp-this.timeStamp|0,n=this.ptsMax;
i===this.pts[e-1]&&(this.ptsLength-=3,e-=3),t.x||t.y?(t.dx=t.x-this.x,
t.dy=t.y-this.y,this.x=t.x,this.y=t.y):(t.dx=0,t.dy=0,t.x=this.x,
t.y=this.y),e===this.ptsMax&&(e=0),this.pts[e++]=0|this.x,this.pts[e++]=0|this.y,
this.pts[e++]=0|i,(this.ptsLength+=3)>n&&(this.ptsLength-=3,n===(this.ptsIndex+=3)&&(this.ptsIndex=0));
},t.prototype.getPosAndSpeed=function(t){t.touch=this.touch,t.velocityPointer=this,
t.vx=null,t.vy=null},t.prototype.calculatePosAndSpeed=function(t){
var e,i,n=this.pts,r=this.ptsMax,s=10*r,a=50,o=(t.timeStamp-this.timeStamp|0)-s;
for(e=this.ptsIndex;e<this.ptsIndex+this.ptsLength&&(i=e%r,!(n[i+2]>o));e+=3);
return s=(t.timeStamp-this.timeStamp|0)-n[i+2],e===this.ptsIndex+this.ptsLength||s<a?(t.vx=0,
void(t.vy=0)):(t.vx=(this.x-n[i+0])/s,void(t.vy=(this.y-n[i+1])/s));
},t}(),w=function(){function t(e,i,n){void 0===n&&(n=null);var r=this;
this.scaleX=1,this.scaleY=1,this.nextFakeMouseId=1,this.doubleClickTimeout=null,
this.longPressTimeout=null,this.longPressInitiator=null,this.listeners={},
this.downPointers={},this.inPointers={},this.containerList=[],
this.clickCounter=1,this.lastClickEvent=null,this.topWindowEvents={},
this.ID_MOUSE="mouse",this.settings=i,this.container=e,this.lastEvent=null,
this.lastTouchEvent=null,this.clickEvent=null,this.containerEvents={
contextmenu:function(t){return r.filterEvent(t)&&r.handleCMenu(t);
},wheel:function(t){return r.filterEvent(t)&&r.handleMouseWheel(t);
},dragover:function(t){return r.filterEvent(t)&&r.handleMouseMove(t);
}};var s="undefined"!=typeof PointerEvent,a="undefined"!=typeof TouchEvent,o=!s&&"undefined"!=typeof MSPointerEvent;
o?(this.container.style.msTouchAction="none",this.windowEvents=(u={},
u.MSPointerDown=function(t){return r.filterEvent(t)&&r.handlePointerDown(t);
},u.MSPointerMove=function(t){return r.filterEvent(t)&&r.handlePointerMove(t);
},u.MSPointerUp=function(t){return r.filterEvent(t)&&r.handlePointerUp(t);
},u.MSPointerCancel=function(t){return r.filterEvent(t)&&r.handlePointerCancel(t);
},u.MSPointerOut=function(t){return r.filterEvent(t)&&r.handlePointerLeave(t);
},u)):s&&!a?(this.container.style.touchAction="none",this.windowEvents=(c={},
c.pointerdown=function(t){return r.filterEvent(t)&&r.handlePointerDown(t);
},c.pointermove=function(t){return r.filterEvent(t)&&r.handlePointerMove(t);
},c.pointerup=function(t){return r.filterEvent(t)&&r.handlePointerUp(t);
},c.pointercancel=function(t){return r.filterEvent(t)&&r.handlePointerCancel(t);
},c.pointerout=function(t){return r.filterEvent(t)&&r.handlePointerLeave(t);
},c)):(this.windowEvents={mousedown:function(t){return r.filterEvent(t)&&r.handleMouseDown(t);
},mouseup:function(t){return r.filterEvent(t)&&r.handleMouseUp(t);
},mousemove:function(t){return r.filterEvent(t)&&r.handleMouseMove(t);
},mouseout:function(t){return r.filterEvent(t)&&r.handleMouseLeave(t);
},touchstart:function(t){return r.filterEvent(t)&&r.handleTouchStart(t);
},touchend:function(t){return r.filterEvent(t)&&r.handleTouchEnd(t);
},touchcancel:function(t){return r.filterEvent(t)&&r.handleTouchCancel(t);
},touchmove:function(t){return r.filterEvent(t)&&r.handleTouchMove(t);
}},this.topWindowEvents={mouseup:function(t){return r.filterEvent(t)&&r.handleMouseUp(t);
},touchend:function(t){return r.filterEvent(t)&&r.handleTouchEnd(t);
}}),!t._ignoreWindowTop&&window.top&&this.addTopWindowHandlers(),
b.detect().isSafariDesktop&&this.addSelectPrevention();for(var l in this.windowEvents)d.listen(window,l,this.windowEvents[l]);
if(this.addContainer(e),n)for(var h=0;h<n.length;h++)this.addContainer(n[h]);
var u,c}return t.prototype.addSelectPrevention=function(){var t=this;
document.addEventListener("selectstart",function(e){Object.keys(t.downPointers).length&&e.preventDefault();
})},t.prototype.addTopWindowHandlers=function(){try{for(var e in this.topWindowEvents)d.listen(window.top,e,this.topWindowEvents[e]);
}catch(e){t._ignoreWindowTop=!0}},t.prototype.addContainer=function(t){
this.containerList.push(t);var e;for(e in this.containerEvents)d.listen(t,e,this.containerEvents[e]);
for(e in this.windowEvents)d.listen(t,e,this.windowEvents[e]);
},t.prototype.remove=function(){for(var e in this.windowEvents)d.unlisten(window,e,this.windowEvents[e]);
if(!t._ignoreWindowTop&&window.top)for(var e in this.topWindowEvents)d.unlisten(window.top,e,this.topWindowEvents[e]);
for(var i=0;i<this.containerList.length;i++){var n=this.containerList[i];
for(var e in this.containerEvents)d.unlisten(n,e,this.containerEvents[e]);
}},t.prototype.listen=function(t,e){this.listeners[t]=e},t.prototype.processConsumed=function(t,e,i){
e&&(d.stopPropagation(t),i&&t.preventDefault())},t.prototype.capturePointer=function(t){
var e=t.target;e.setPointerCapture?e.setPointerCapture(t.pointerId):e.msSetPointerCapture?e.msSetPointerCapture(t.pointerId):this.captureMouse(t);
},t.prototype.releasePointer=function(t){this.releaseMouse(t);
},t.prototype.releaseMouse=function(t){document.releaseCapture&&document.releaseCapture();
},t.prototype.captureMouse=function(t){var e=t.target;e.setCapture&&e.setCapture(!0);
},t.prototype.filterEvent=function(t){return t!==this.lastEvent&&(this.lastEvent=t,
!0)},t.prototype.handlePointerDown=function(t){var e=this.buildEvent(t,t.pointerId.toString(),t.timeStamp,t.buttons>0);
t.currentTarget!==window&&this.capturePointer(t),this.downHappened(e),
this.processConsumed(t,e.consumed)},t.prototype.handlePointerMove=function(t){
var e=this.buildEvent(t,t.pointerId.toString(),t.timeStamp,t.buttons>0);
this.moveHappened(e),this.processConsumed(t,e.consumed,!0)},t.prototype.handlePointerUp=function(t){
if(0===t.buttons){var e=this.buildEvent(t,t.pointerId.toString(),t.timeStamp,!1);
this.releasePointer(t),this.upHappened(e),this.processConsumed(t,e.consumed);
}},t.prototype.handlePointerCancel=function(t){var e=this.buildEvent(t,t.pointerId.toString(),t.timeStamp,!1);
this.cancelHappened(e)},t.prototype.handleMouseDown=function(t){
if(!(t.timeStamp<this.lastTouchEvent)){var e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!0);
t.currentTarget!==window&&this.captureMouse(t),this.downHappened(e),
this.processConsumed(t,e.consumed)}},t.prototype.handleCMenu=function(t){
this.processConsumed(t,!0,!0)},t.prototype.handleMouseWheel=function(t){
if(this.isTargetOkay(t.target)&&(!this.settings.mouseWheelRequiresFocus||document.activeElement===this.container)){
if(5===t.mozInputSource||0===t.deltaX&&0===t.deltaY)return void d.stopPropagation(t);
if(t.deltaMode!==t.DOM_DELTA_PAGE){var e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!0),i=t.deltaMode===t.DOM_DELTA_LINE?-40:-1;
e.wheely=t.deltaY*i,e.wheelx=t.deltaX*i,this.wheelHappened(e),
this.processConsumed(t,e.consumed,!0)}}},t.prototype.handleMouseUp=function(t){
if(t.shiftKey&&t.ctrlKey)return this.ID_MOUSE="mouse"+this.nextFakeMouseId,
void(this.nextFakeMouseId+=1);var e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1);
this.releaseMouse(t),this.upHappened(e),this.processConsumed(t,e.consumed);
},t.prototype.handlePointerLeave=function(t){var e=t.pointerId.toString();
this.inPointers[e]&&!this.downPointers[e]&&this.pointerLeave(this.buildEvent(t,e,t.timeStamp,!1));
},t.prototype.handleMouseLeave=function(t){t.timeStamp<this.lastTouchEvent||this.inPointers[this.ID_MOUSE]&&!this.downPointers[this.ID_MOUSE]&&this.pointerLeave(this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1));
},t.prototype.handleMouseMove=function(t){if(!(t.timeStamp<this.lastTouchEvent)){
var e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1);this.moveHappened(e),
this.processConsumed(t,e.consumed,!0)}},t.prototype.handleTouchStart=function(t){
this.lastTouchEvent=t.timeStamp+2e3,this.removeLostTouches(t,t.touches,t.changedTouches);
for(var e,i=!1,n=t.changedTouches||t.touches,r=0;r<n.length;r++){
var s=n[r];e=this.buildTouchEvent(t,s,!0,n.length),this.downHappened(e),
i=i||e.consumed}this.processConsumed(t,i)},t.prototype.handleTouchEnd=function(t){
this.lastTouchEvent=t.timeStamp+2e3;for(var e=t.changedTouches||t.touches,i=!1,n=0;n<e.length;n++){
var r=e[n],s=this.buildTouchEvent(t,r,!1,e.length),a=this.buildTouchEvent(t,r,!1,e.length);
a.x=a.y=a.pageX=a.pageY=-1e9,this.upHappened(s),this.pointerLeave(a),
i=i||s.consumed||a.consumed,this.removeLostTouches(t,t.touches);
}this.processConsumed(t,i)},t.prototype.handleTouchCancel=function(t){
this.lastTouchEvent=t.timeStamp+2e3;for(var e=t.changedTouches||t.touches,i=0;i<e.length;i++){
var n=e[i],r=this.buildTouchEvent(t,n,!1,e.length);this.cancelHappened(r);
}this.removeLostTouches(t,t.touches)},t.prototype.handleTouchMove=function(t){
this.lastTouchEvent=t.timeStamp+2e3;var e=!1;this.removeLostTouches(t,t.touches);
for(var i,n=t.changedTouches||t.touches,r=0;r<n.length;r++){var s=n[r];
i=this.buildTouchEvent(t,s,!0,n.length),this.moveHappened(i),
e=e||i.consumed}this.processConsumed(t,e,!0)},t.prototype.removeLostTouches=function(t,e,i){
void 0===i&&(i=null);for(var n=Object.create(null),r=0;r<e.length;r++){
var s=e[r];n[s.identifier]=!0}for(var a in this.downPointers){
var o=this.downPointers[a];if(this.downPointers.hasOwnProperty(a)&&!n[a]){
var l=this.rebuildEvent(t,o,!1);this.upHappened(l)}}if(null!==i)for(var r=0;r<i.length;r++){
var s=i[r],o=this.downPointers[s.identifier];if(o){var l=this.rebuildEvent(t,o,!1);
this.upHappened(l)}}},t.prototype.rebuildEvent=function(t,e,i){
var n=new C(e.x,e.y,t.timeStamp,e.identifier);return n.pageX=e.pageX,
n.pageY=e.pageY,n.pressed=i,n.shiftKey=t.shiftKey,n.altKey=t.altKey,
n.ctrlKey=t.ctrlKey,n},t.prototype.buildTouchEvent=function(t,e,i,n){
var r=d.convertPointFromPageToNode(this.container,e.pageX,e.pageY,e.clientX,e.clientY),s=r.x,a=r.y,o=new C(Math.round(s*this.scaleX),Math.round(a*this.scaleY),t.timeStamp,""+e.identifier);
return o.target=e.target||t.target||t.srcElement,o.pageX=e.pageX,
o.pageY=e.pageY,o.shiftKey=t.shiftKey,o.altKey=t.altKey,o.ctrlKey=t.ctrlKey,
o.pressed=i,o.changedPointerCount=n,o.touch=!0,o},t.prototype.buildEvent=function(t,e,i,n,r){
void 0===r&&(r=1);var s,a,o=t.pageX,l=t.pageY,h=(!t.currentTarget||t.currentTarget===this.container)&&t.target===this.container;
if(h&&void 0!==t.offsetX)s=t.offsetX,a=t.offsetY;else if(h&&void 0!==t.layerX)s=t.layerX,
a=t.layerY;else{var u=d.convertPointFromPageToNode(this.container,o,l,t.clientX,t.clientY);
s=u.x,a=u.y}var c=new C(Math.round(s*this.scaleX),Math.round(a*this.scaleY),i,""+e);
return c.target=t.target||t.srcElement,c.pageX=o,c.pageY=l,c.shiftKey=t.shiftKey,
c.altKey=t.altKey,c.ctrlKey=t.ctrlKey,c.pressed=n,c.changedPointerCount=r,
c.touch="touch"===t.pointerType||2===t.pointerType,t.which?c.isRightMB=3===t.which:c.isRightMB=2===t.button,
c},t.prototype.downHappened=function(e){if(e.pressed=!0,this.fireEvent(t.EVENT_GLOBAL_DOWN,e),
this.isTargetOkay(e.target)&&!this.downPointers[e.identifier]){
this.click_Hold();var i=new x(e,this.settings);this.downPointers[e.identifier]=i,
i.touch=e.touch,this.inPointers[e.identifier]=!0,this.fireEvent(t.EVENT_DOWN,e),
this.startLongPress(e)}},t.prototype.upHappened=function(e){var i=this.downPointers[e.identifier];
if(i){this.cancelLongPress(),i.moveTo(e),i.getPosAndSpeed(e),
delete this.downPointers[e.identifier];var n=e.vx,r=e.vy,s=Math.abs(n),a=Math.abs(r);
s>2*a?(e.swipeSpeed=s,n>0?e.swipeLeft=!0:e.swipeRight=!0):a>2*s&&(e.swipeSpeed=a,
r<0?e.swipeUp=!0:e.swipeDown=!0),this.fireEvent(t.EVENT_UP,e),
!i.noClick&&e.isWithinDistance(i,this.settings.clickSensitivity,this.settings.doubleClickTimeout)&&this.click_Next(e);
}},t.prototype.cancelHappened=function(e){this.downPointers[e.identifier]&&(this.cancelLongPress(),
delete this.downPointers[e.identifier],this.fireEvent(t.EVENT_CANCEL,e));
},t.prototype.moveHappened=function(e){var i=this.downPointers[e.identifier];
e.pressed=void 0!==i&&null!==i,void 0!==i&&null!==i?(this.cancelLongPress(e),
i.scrolling=!0,i.moveTo(e),i.getPosAndSpeed(e),this.fireEvent(t.EVENT_DRAG,e),
this.click_Cancel(e)):this.click_OnMove(e)||(this.isTargetOkay(e.target)?(this.inPointers[e.identifier]=!0,
this.fireEvent(t.EVENT_MOVE,e)):this.pointerLeave(e))},t.prototype.wheelHappened=function(e){
this.fireEvent(t.EVENT_WHEEL,e)},t.prototype.pointerLeave=function(e){
this.inPointers.hasOwnProperty(e.identifier)&&(this.click_Cancel(e)||this.fireEvent(t.EVENT_LEAVE,e),
delete this.inPointers[e.identifier])},t.prototype.click_Next=function(e){
var i=this;if(e.isRightMB)return void this.fireEvent(t.EVENT_RCLICK,e);
this.settings.scrollIntoView&&this.container.scrollIntoView();
var n;switch(this.clickCounter){case 1:n=t.EVENT_CLICK;break;case 2:
n=t.EVENT_DBLCLICK;break;default:case 3:n=t.EVENT_TPLCLICK}var r=null!==this.clickEvent&&this.clickEvent.timeStamp+this.settings.doubleClickTimeout>=e.timeStamp&&this.clickEvent.distance(e)<this.settings.doubleClickSensitivity;
r&&clearTimeout(this.doubleClickTimeout),(r||1===this.clickCounter)&&(this.settings.noClickOnDoubleClick&&(this.doubleClickTimeout=setTimeout(function(){
return i.fireClick(n)},this.settings.doubleClickTimeout)),this.settings.noClickOnDoubleClick||this.fireEvent(n,e),
this.lastClickEvent=n),this.fireEvent(t.EVENT_INSTACLICK,e),this.clickEvent=e,
this.clickCounter++,this.settings.noClickOnDoubleClick||setTimeout(function(){
i.clickEvent=i.lastClickEvent=null,i.clickCounter=1},this.settings.doubleClickTimeout);
},t.prototype.click_Cancel=function(t){return!(!this.clickEvent||this.clickEvent.identifier!==t.identifier||(this.clickEvent._leaving=!0,
0))},t.prototype.click_Hold=function(){void 0!==this.doubleClickTimeout&&null!==this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),
this.doubleClickTimeout=null)},t.prototype.click_OnMove=function(t){
return!(!this.clickEvent||!this.settings.noClickOnDoubleClick)&&(this.clickEvent.distance(t)<this.settings.doubleClickSensitivity||(this.fireEvent(this.lastClickEvent,this.clickEvent),
this.clickEvent=this.lastClickEvent=null,this.clickCounter=1,
!1))},t.prototype.fireClick=function(e){this.clickEvent&&(this.fireEvent(e,this.clickEvent),
this.clickEvent._leaving&&this.fireEvent(t.EVENT_LEAVE,this.clickEvent),
this.clickEvent=null,this.clickCounter=1)},t.prototype.startLongPress=function(e){
var i=this;if(!e.isRightMB){var n=function(){i.longPressTimeout=null,
e.consumed=!1,i.downPointers[e.identifier].noClick=!0,i.fireEvent(t.EVENT_LONGPRESS,e),
e.consumed||(e.touch&&i.cancelHappened(e),i.fireEvent(t.EVENT_RCLICK,e));
};this.cancelLongPress(),this.longPressTimeout=setTimeout(n,this.settings.longPressTimeout),
this.longPressInitiator=e}},t.prototype.cancelLongPress=function(t){
if(null!==this.longPressTimeout){if(t&&t.isWithinDistance(this.longPressInitiator,this.settings.longPressSensitivity))return;
clearTimeout(this.longPressTimeout),this.longPressTimeout=null;
}},t.prototype.fireEvent=function(t,e){this.listeners[t]&&this.listeners[t].call(this,e);
},t.prototype.isTargetOkay=function(t){return this.containerList.indexOf(t)!==-1||d.isParentOf(this.container,t);
},t}();w._ignoreWindowTop=!1,w.EVENT_MOVE="move",w.EVENT_DOWN="down",
w.EVENT_GLOBAL_DOWN="gdown",w.EVENT_DRAG="drag",w.EVENT_CANCEL="cancel",
w.EVENT_UP="up",w.EVENT_LEAVE="leave",w.EVENT_CLICK="click",w.EVENT_RCLICK="rclick",
w.EVENT_DBLCLICK="dblclick",w.EVENT_INSTACLICK="instaclick",w.EVENT_LONGPRESS="longpress",
w.EVENT_TPLCLICK="tplclick",w.EVENT_WHEEL="mwheel",w.EVENT_KEY="key",
r.MouseEvents=w;var L=function(){function t(){this.timeStamp=0,
this.dtime=0,this.animating=!1,this.isExport=!1,this.context=null,
this.scaleX=1,this.scaleY=1,this.labelRenderer=null,this.changes={};
}return t}();r.UpdateEvent=L;var T=function(){function t(){this.keyCode=null,
this.capture=!1,this.consumed=!1,this.noDefault=!1,this.cursor=null,
this.target=null}return t}();r.KeyEvent=T;var k=function(){function t(){
this.animationOrder=0,this.updateOrder=0,this.paintOrder=0}return t.prototype.remove=function(){},
t.prototype.onSceneChange=function(t){},t.prototype.getPanels=function(t){
return[]},t.prototype.doAnimations=function(t){},t.prototype.paintScene=function(t){},
t.prototype.previewMouseEvent=function(t,e){this["preview"+t](e);
},t.prototype.onMouseEvent=function(t,e){this["on"+t](e)},t.prototype.onClick=function(t){},
t.prototype.onInstantClick=function(t){},t.prototype.onLongPress=function(t){},
t.prototype.onRightClick=function(t){},t.prototype.onDoubleClick=function(t){},
t.prototype.onTripleClick=function(t){},t.prototype.onPointerDown=function(t){},
t.prototype.onPointerUp=function(t){},t.prototype.onPointerDrag=function(t){},
t.prototype.onPointerMove=function(t){},t.prototype.onPointerOut=function(t){},
t.prototype.onPointerCancel=function(t){},t.prototype.onWheel=function(t){},
t.prototype.onKeyDown=function(t){},t.prototype.onGlobalPointerDown=function(t){},
t.prototype.previewDoubleClick=function(t){},t.prototype.previewTripleClick=function(t){},
t.prototype.previewRightClick=function(t){},t.prototype.previewClick=function(t){},
t.prototype.previewInstantClick=function(t){},t.prototype.previewLongPress=function(t){},
t.prototype.previewWheel=function(t){},t.prototype.previewGlobalPointerDown=function(t){},
t.prototype.previewPointerDown=function(t){},t.prototype.previewPointerUp=function(t){},
t.prototype.previewPointerDrag=function(t){},t.prototype.previewPointerMove=function(t){},
t.prototype.previewPointerOut=function(t){},t.prototype.previewPointerCancel=function(t){},
t.prototype.containsCoordinate=function(t,e){var i=this.getPanels(!1);
if(!i||!i.length)return!1;for(var n=0;n<i.length;n++){var r=i[n];
if(r.left<t&&r.right>t&&r.top<e&&r.bottom>e)return!0}return!1;
},t}();r.ChartElement=k;var A=function(){function t(t,e,i,n){
this.side="top",this.align="fill",this.floating=!1,this.margin=0,
this.location="outside",this.packingOrder=void 0,void 0!==t&&(this.side=t),
void 0!==e&&(this.align=e),void 0!==i&&(this.margin=i),void 0!==n&&(this.packingOrder=n);
}return t}();r.SettingsChartPanel=A;var M=function(){function t(){
this.packingOrder=0,this.location="outside",this.side="top",this.align="fill",
this.outsideEdge=!1,this.floating=!1,this.desiredWidth=0,this.desiredHeight=0,
this.margin=0,this.left=0,this.top=0,this.right=0,this.bottom=0,
this.visible=!1,this.enableClipping=!1,this._tempData=null}return t.prototype.pushClip=function(t){
this.enableClipping&&r.Graphics.pushClip(t,this.left,this.top,this.right-this.left,this.bottom-this.top);
},t.prototype.popClip=function(t){this.enableClipping&&r.Graphics.popClip(t);
},t.prototype.computeSize=function(t,e,i,n){return{width:this.desiredWidth,
height:this.desiredHeight}},t.prototype.placePanel=function(t,e,i,n){
this.bottom=n,this.right=i,this.top=e,this.left=t},t}();r.ChartPanel=M;
var P=function(){function t(t){this.framesCount=0,this.shell=t,
this.measureFpsIters=0,this.measureFpsT0=0,this.measureFpsIter=0,
this.measureFpsCallback=null}return t.prototype.hasPendingRequests=function(){
return this.shell.chart.hasPendingRequests()},t.prototype.measureFps=function(t,e){
var i=this;this.measureFpsCallback=e,this.measureFpsIters=t;var n=this.shell.settings.advanced.useAnimationFrame;
if(n){this.shell.chart.updateSettings({advanced:{useAnimationFrame:!1
}});var r=this.measureFpsCallback;this.measureFpsCallback=function(t,e,n){
i.shell.chart.updateSettings({advanced:{useAnimationFrame:!0}
}),r&&r.call(window,t,e,n)}}return this.measureFpsIter=0,this.measureFpsT0=(new Date).getTime(),
this.shell.events.notifySceneChanges({requestPaint:!0}),!0},t.prototype.paintDone=function(){
if(this.framesCount+=1,this.measureFpsIters){this.measureFpsIter+=1;
var t=(new Date).getTime()-this.measureFpsT0;if(this.measureFpsIter>=this.measureFpsIters&&t>4e3||t>1e4&&this.measureFpsIter>=5){
var e=1e3*this.measureFpsIter/Math.max(1e-4,t);this.measureFpsCallback(e,this.measureFpsIter,t),
this.measureFpsCallback=null,this.measureFpsIters=0}else this.shell.events.notifySceneChanges({
requestPaint:!0})}},t}();r.Profiler=P;var I=function(){function t(){
this.subchart=null,this.element=null}return t}(),D=function(){
function t(t,e){this.sceneChanges={},this.forceFloating=!1,this._paintSuspended=0,
this.pointerState={},this.animationOrder=[],this.updateOrder=[],
this.paintOrder=[],this.subcharts=[],this._lastPanelCount=[0,0,0],
this.chartBounds=new mt(0,0,1,1),this.chartOuterBounds=new mt(0,0,1,1),
this.chartBoundsIsOuter=!0,this.chart=t,this.shell=e,this.scene=t.scene;
}return t.panelSortCallback=function(t,e){return t.packingOrder-e.packingOrder;
},t.prototype.addElement=function(t){if(!t)throw new Error("`element` must be defined.");
return this.paintOrder.push(t),this.updateOrder.push(t),this.animationOrder.push(t),
this.refreshElementOrder(),t},t.prototype.refreshElementOrder=function(){
this.animationOrder.sort(function(t,e){return t.animationOrder-e.animationOrder;
}),this.paintOrder.sort(function(t,e){return t.paintOrder-e.paintOrder;
}),this.updateOrder.sort(function(t,e){return t.updateOrder-e.updateOrder;
})},t.prototype.removeElement=function(t){d.removeFromArray(this.paintOrder,t),
d.removeFromArray(this.animationOrder,t),d.removeFromArray(this.updateOrder,t);
},t.prototype.addSubchart=function(t){this.subcharts.push(t)},
t.prototype.removeSubchart=function(t){d.removeFromArray(this.subcharts,t);
for(var e in this.pointerState){var i=this.pointerState[e];i.subchart===t&&(i.subchart=null);
}},t.prototype.suspendPaint=function(){this._paintSuspended++;
},t.prototype.resumePaint=function(){this._paintSuspended--,this._paintSuspended<=0&&(this._paintSuspended=0,
this.requestPaint())},t.prototype.notifySceneChanges=function(t,e){
if(d.hasProperties(t)){var i=t.settingsChanges;void 0!==i&&i instanceof r.Settings?(this.sceneChanges.settingsChanges=d.extendCopy(this.sceneChanges.settingsChanges||{},i,function(t,e){
return"_"===t[0]||e}),delete t.settingsChanges,d.extendDeep(this.sceneChanges,t),
t.settingsChanges=i):d.extendDeep(this.sceneChanges,t),this.requestPaint(e);
}},t.prototype.requestPaint=function(t){this._paintSuspended<=0&&this.shell.requestPaint(t);
},t.prototype.paintNow=function(t){void 0===t&&(t=!1),this.shell.paintNow(t=!1);
},t.prototype.clearSceneChanges=function(t){for(var e in t)delete this.sceneChanges[e];
},t.prototype.onMouseEvent=function(t,e){var i=e.name;t.changes={},
t.capture=!1;var n,r,s=null,a=null,o=void 0,l=t.identifier,h=this.pointerState[l];
h||(h=new I,h.identifier=l,this.pointerState[l]=h);for(var u=0;u<this.updateOrder.length;u++)r=this.updateOrder[u],
r.previewMouseEvent(i,t);if(h.subchart){var c=h.subchart.events;
c.onMouseEvent(t,e),t.consumed||t.hovered||t.capture?(a=h.subchart,
t.capture=!0,o=t.cursor):c.onMouseEvent(t,{ev:w.EVENT_LEAVE,name:"PointerOut"
})}if(n=r=h.element,r&&(r.onMouseEvent(i,t),(t.consumed||t.capture||e.captures&&e.needsCapture)&&!e.releasesCapture&&(s=r,
t.capture=!0,o=t.cursor)),!t.capture&&!e.needsCapture)for(var d=this.subcharts.length-1;d>=0;d-=1){
var p=this.subcharts[d],c=p.events;if(c.chartOuterBounds.containsPoint(t.x,t.y)){
if(c.onMouseEvent(t,e),t.consumed||t.hovered||t.capture){a=p,
t.capture=!0;break}c.onMouseEvent(t,{ev:w.EVENT_LEAVE,name:"PointerOut"
})}}if(!t.capture&&!e.needsCapture)for(var u=0;u<this.updateOrder.length;u++)if(r=this.updateOrder[u],
r!==n&&(r.onMouseEvent(i,t),t.consumed||t.capture)){o=t.cursor,
s=r,t.capture=!0;break}void 0!==o&&(t.cursor=o),(e.releasesCapture||e.captures)&&(h.element=e.captures?s:null,
h.subchart=e.captures?a:null),this.notifySceneChanges(t.changes);
},t.prototype.setNewSize=function(t,e,i){!i&&this.chartBounds.equals(t)&&e===this.chartBoundsIsOuter||(this.chartBounds=t.clone(),
this.chartBoundsIsOuter=e,this.notifySceneChanges({bounds:!0}));
},t.prototype.updateLayout=function(e){for(var i=this.scene,n=new Array(this._lastPanelCount[0]),r=new Array(this._lastPanelCount[1]),s=new Array(this._lastPanelCount[2]),a=0,o=0,l=0,h=0;h<this.paintOrder.length;h++)for(var u=this.paintOrder[h],c=u.getPanels(e.isExport),p=0;p<c.length;p++){
var f=c[p],g=f.location;"external"===g?s[l++]=f:"outside"===g?r[o++]=f:"inside"===g&&(n[a++]=f);
}this._lastPanelCount=[a,o,l],n.length=a,r.length=o,s.length=l,
d.sort(n,t.panelSortCallback),d.sort(r,t.panelSortCallback),d.sort(s,t.panelSortCallback);
var m,v,y;if(this.chartBoundsIsOuter){m=this.chartBounds.clone();
for(var S=0;S<l;S++)this._placePanel(s[S],m,!0,e);v=this.chartBounds.clone(),
y=this.chartBounds.clone();for(var S=0;S<o;S++)this._placePanel(r[S],y,!1,e);
}else{y=this.chartBounds.clone(),v=this.chartBounds.clone();for(var S=0;S<o;S++)this._placePanel(r[S],v,!0,e);
m=v.clone();for(var S=0;S<l;S++)this._placePanel(s[S],m,!0,e);
}this.chartOuterBounds=v,i.chartLeft=v.x0,i.chartTop=v.y0,i.chartHeight=v.h(),
i.chartWidth=v.w();for(var S=0;S<l;S++)this._placePanelFinal(s[S],y);
for(var S=0;S<o;S++){var f=r[S];this._placePanelFinal(f,f.outsideEdge?v:y);
}i.x0===y.x0&&i.y0===y.y0&&i.width===y.w()&&i.height===y.h()||this.chart.events.notifySceneChanges({
bounds:!0}),i.x0=y.x0,i.y0=y.y0,i.width=y.w(),i.height=y.h(),
i.leftMargin=y.x0-v.x0,i.rightMargin=v.x1-y.x1,i.topMargin=y.y0-v.y0,
i.bottomMargin=v.y1-y.y1;for(var S=0;S<a;S++){var f=n[S];this._placePanel(f,y,!1,e),
this._placePanelFinal(f,y)}return m},t.prototype._placePanel=function(t,e,i,n){
var r=e.x0,s=e.y0,a=e.x1,o=e.y1,l=t.margin||0,h=t.computeSize(e.x1-e.x0,e.y1-e.y0,n.context,n.labelRenderer),u=h.width||0,c=h.height||0;
u+=2*l,c+=2*l,i?"top"===t.side?(o=s,s=o-c,t.floating||this.forceFloating||(e.y0=s)):"bottom"===t.side?(s=o,
o=s+c,t.floating||this.forceFloating||(e.y1=o)):"left"===t.side?(a=r,
r=a-u,t.floating||this.forceFloating||(e.x0=r)):"right"===t.side&&(r=a,
a=r+u,t.floating||this.forceFloating||(e.x1=a)):"top"===t.side?(o=Math.min(o,s+c),
t.floating||this.forceFloating||(e.y0=o)):"bottom"===t.side?(s=Math.max(s,o-c),
t.floating||this.forceFloating||(e.y1=s)):"left"===t.side?(a=Math.min(a,r+u),
t.floating||this.forceFloating||(e.x0=a)):"right"===t.side&&(r=Math.max(r,a-u),
t.floating||this.forceFloating||(e.x1=r)),t._tempData={left:r,
right:a,top:s,bottom:o,desiredWidth:u,desiredHeight:c}},t.prototype._placePanelFinal=function(t,e){
var i=t._tempData.left,n=t._tempData.right,r=t._tempData.top,s=t._tempData.bottom,a=t._tempData.desiredWidth,o=t._tempData.desiredHeight;
if("outside"===t.location&&("top"===t.side||"bottom"===t.side?(i=Math.max(i,e.x0),
n=Math.min(n,e.x1)):(r=Math.max(r,e.y0),s=Math.min(s,e.y1))),
"left"===t.align)n=Math.min(n,i+a);else if("right"===t.align)i=Math.max(i,n-a);else if("top"===t.align)s=Math.min(s,r+o);else if("bottom"===t.align)r=Math.max(r,s-o);else if("center"===t.align){
var l=Math.max(0,n-i-a)/2,h=Math.max(0,s-r-o)/2;i+=l,n-=l,r+=h,
s-=h}var u=t.margin;t.placePanel(i+u,r+u,n-u,s-u)},t.prototype.animateFrame=function(t){
this.shell.prepareContext(t),t.changes=this.sceneChanges,this.sceneChanges={};
for(var e=0;e<this.updateOrder.length;e++){var i=this.updateOrder[e];
i.onSceneChange(t)}t.changes.bounds&&this.updateLayout(t);for(var n=0;n<this.animationOrder.length;n++){
var r=this.animationOrder[n];r.doAnimations(t)}for(var s=0;s<this.paintOrder.length;s++){
var a=this.paintOrder[s];a.paintScene(t)}t.changes.position&&this.chart.notifyPositionChange(this.chart.createEventArguments(null,"api")),
t.changes=null;var o=[];for(var l in this.pointerState){var h=this.pointerState[l];
h.subchart&&o.push(h.subchart)}for(var u=0;u<this.subcharts.length;u+=1){
var c=this.subcharts[u];if(!(o.indexOf(c)>-1)){var d=c.events;
(d.sceneChanges.bounds||d.chartOuterBounds.overlaps(this.chartOuterBounds))&&d.animateFrame(t);
}}for(var u=0;u<o.length;u+=1){var c=o[u];c.events.animateFrame(t);
}this.shell.finalizeContext(t)},t.prototype.doPaint=function(t){
for(var e=0;e<this.paintOrder.length;e++){var i=this.paintOrder[e];
i.paintScene(t)}for(var n=0;n<this.subcharts.length;n+=1){var r=this.subcharts[n],s=r.events;
s.chartOuterBounds.overlaps(this.chartOuterBounds)&&s.doPaint(t);
}},t}();r.ChartEvents=D;var N=function(){function t(){this.enabled=!1,
this.enabledOnExport=!1,this.url="http://zoomcharts.com",this.urlTarget="_blank",
this.image="builtin://logo-supported-by",this.imageScaling=.5,
this.location="outside",this.imageExport=null}return t}();r.SettingsCredits=N;
var F=function(t){function e(e,i){var n=t.call(this)||this;n.animationOrder=2e3,
n.paintOrder=60,n.updateOrder=400,n.settings=i,n.chart=e,n.scene=e.scene,
(i.enabledOnExport||i.enabled)&&(n.chart.assetsLoader.getAssetImage(n.settings.image,function(t){
return n.imageLoaded(t)}),n.settings.imageExport&&n.settings.image!==n.settings.imageExport&&n.chart.assetsLoader.getAssetImage(n.settings.imageExport,function(t){
return n.imageLoaded(t)}));var r=n.panel=new M;return r.packingOrder=0,
r.side="bottom",r.align="right",r.visible=!1,r.margin=3,n}return n(e,t),
e.prototype.onSceneChange=function(t){var e=t.changes;e.settings&&e.settingsChanges.credits&&(e.bounds=!0);
},e.prototype.getPanels=function(t){var e=this,i=this.settings,n=t?i.enabledOnExport:i.enabled,r=this.panel;
if(n){r.location="outside",r.outsideEdge=!0,"outside"===i.location?(r.floating=!1,
t&&!i.enabled&&(r.location="external")):r.floating=!0;var s=this.chart.assetsLoader.getAssetImage(i.image,function(t){
return e.imageLoaded(t)});if(s)return r.desiredWidth=s.width*i.imageScaling,
r.desiredHeight=s.height*i.imageScaling,r.visible=!0,[r]}return r.visible=!1,
[]},e.prototype.paintScene=function(t){var e=this,i=this.panel;
if(i.visible){var n=this.chart.assetsLoader.getAssetImage(this.settings.image,function(t){
return e.imageLoaded(t)}),r=this.settings.imageExport?this.chart.assetsLoader.getAssetImage(this.settings.imageExport,function(t){
return e.imageLoaded(t)}):n;t.isExport&&(n=r),n?t.context.drawImage(n,0,0,n.width,n.height,i.left,i.top,i.right-i.left,i.bottom-i.top):t.animating=!0;
}},e.prototype.onPointerMove=function(t){var e=t.x,i=t.y,n=this.panel;
n.visible&&e>=n.left&&i>=n.top&&e<=n.right&&i<=n.bottom&&this.settings.url&&(t.cursor="pointer");
},e.prototype.onClick=function(t){var e=t.x,i=t.y,n=this.panel,r=this.settings;
n.visible&&e>=n.left&&i>=n.top&&e<=n.right&&i<=n.bottom&&r.url&&(d.openUrl(r.url,r.urlTarget),
t.consumed=!0)},e.prototype.imageLoaded=function(t){this.chart.updateSize(!0),
this.chart.events.notifySceneChanges({settings:!0,settingsChanges:{
credits:!0}})},e}(k);r.Credits=F;var E=function(){function t(){}
return t.isLight=function(t){return null==t?null:.299*t.R+.587*t.G+.114*t.B>128;
},t.format=function(t){return null==t?null:"rgba("+(0|t.R)+","+(0|t.G)+","+(0|t.B)+","+t.A.toFixed(3)+")";
},t.areEqual=function(t,e){return null==t?null==e:null!=e&&t.R===e.R&&t.G===e.G&&t.B===e.B&&t.A===e.A;
},t.parse=function(t){var e=O.parseCSSColor(t);return null==e&&t&&d.warn("Color value '"+t+"' could not be parsed.",null,!0),
e},t.normalize=function(t){return this.format(O.parseCSSColor(t));
},t.derive=function(t,e,i){var n="string"==typeof t,r=n?this.parse(t):t,s=255*(e-1),a={
R:Math.round(Math.min(255,Math.max(0,r.R+s))),G:Math.round(Math.min(255,Math.max(0,r.G+s))),
B:Math.round(Math.min(255,Math.max(0,r.B+s))),A:Math.min(1,r.A*i)
};return n?this.format(a):a},t.blend=function(t,e,i,n){void 0===n&&(n=!0);
var r,s="string"==typeof t,a=s?this.parse(t):t,o=s?this.parse(e):e;
if(n){var l=1-i;r={R:Math.round(o.R*i+a.R*l),G:Math.round(o.G*i+a.G*l),
B:Math.round(o.B*i+a.B*l),A:o.A*i+a.A*l}}else r=this._blendSlow(a,o,i);
return s?this.format(r):r},t._blendSlow=function(t,e,i){var n=this._rgb2lab(t),r=this._rgb2lab(e),s=1-i,a=Math.round(r.L*i+n.L*s),o=Math.round(r.A*i+n.A*s),l=Math.round(r.B*i+n.B*s),h=this._lab2rgb(a,o,l);
return h.R=Math.max(0,Math.min(255,h.R)),h.G=Math.max(0,Math.min(255,h.G)),
h.B=Math.max(0,Math.min(255,h.B)),h.A=e.A*i+t.A*s,h},t.colorTone=function(t,e,i){
var n=this.parse(t),r=this.derive(n,e,i);return{color:this.format(r),
opacity:n.A}},t.copyHue=function(t,e){var i="string"==typeof t,n=i?this.parse(t):t,r=i?this.parse(e):e,s=(n.R+n.G+n.B)/765,a=(r.R+r.G+r.B)/765,o={
R:Math.round(n.R/s*a),G:Math.round(n.G/s*a),B:Math.round(n.B/s*a),
A:r.A};return i?this.format(o):o},t.inverse=function(t){var e="string"==typeof t,i=e?this.parse(t):t,n={
R:255-i.R,G:255-i.G,B:255-i.B,A:i.A};return e?this.format(n):n;
},t._rgb2xyz=function(t){var e=t.R/255,i=t.G/255,n=t.B/255;return e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,
i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,
{X:.4124*e+.3576*i+.1805*n,Y:.2126*e+.7152*i+.0722*n,Z:.0193*e+.1192*i+.9505*n
}},t._rgb2lab=function(t){if(t._lab)return t._lab;var e=this._rgb2xyz(t),i=e.X/.95047,n=e.Y,r=e.Z/1.08883;
return i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,
r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,t._lab={L:116*n-16,
A:500*(i-n),B:200*(n-r)}},t._xyz2rgb=function(t,e,i){var n=3.2406*t+e*-1.5372+i*-.4986,r=t*-.9689+1.8758*e+.0415*i,s=.0557*t+e*-.204+1.057*i;
return n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,
s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s,{R:Math.round(255*n),
G:Math.round(255*r),B:Math.round(255*s),A:1}},t._lab2rgb=function(t,e,i){
var n=(t+16)/116,r=e/500+n,s=n-i/200;n=n>this._lab2rgbConst?Math.pow(n,3):(n-16/116)/7.787,
r=r>this._lab2rgbConst?Math.pow(r,3):(r-16/116)/7.787,s=s>this._lab2rgbConst?Math.pow(s,3):(s-16/116)/7.787;
var a=this._xyz2rgb(.95047*r,n,1.08883*s);return a._lab={L:t,
A:e,B:i},a},t}();E._lab2rgbConst=Math.pow(.008856,1/3),r.Colors=E;
var O=function(){function t(){}return t.clamp_css_byte=function(t){
return t=Math.round(t),t<0?0:t>255?255:t},t.clamp_css_float=function(t){
return t<0?0:t>1?1:t},t.parse_css_int=function(e){return"%"===e[e.length-1]?t.clamp_css_byte(parseFloat(e)/100*255):t.clamp_css_byte(parseInt(e,10));
},t.parse_css_float=function(e){return"%"===e[e.length-1]?t.clamp_css_float(parseFloat(e)/100):t.clamp_css_float(parseFloat(e));
},t.css_hue_to_rgb=function(t,e,i){return i<0?i+=1:i>1&&(i-=1),
6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t},t.parseCSSColor=function(e){
if(null==e)return{R:0,G:0,B:0,A:0};var i=e.replace(RegExp(" ","g"),"").toLowerCase();
if(i in t.kCSSColorTable){var n=t.kCSSColorTable[i];return{R:n[0],
G:n[1],B:n[2],A:n[3]}}if("#"===i[0]){if(4===i.length){var r=parseInt(i.substr(1),16);
return r>=0&&r<=4095?{R:(3840&r)>>4|(3840&r)>>8,G:240&r|(240&r)>>4,
B:15&r|(15&r)<<4,A:1}:null}if(7===i.length){var r=parseInt(i.substr(1),16);
return r>=0&&r<=16777215?{R:(16711680&r)>>16,G:(65280&r)>>8,B:255&r,
A:1}:null}return null}var s=i.indexOf("("),a=i.indexOf(")");if(s!==-1&&a+1===i.length){
var o=i.substr(0,s),l=i.substr(s+1,a-(s+1)).split(","),h=1;if("rgba"===o){
if(4!==l.length)return null;h=t.parse_css_float(l.pop())}if("rgba"===o||"rgb"===o)return 3!==l.length?null:{
R:t.parse_css_int(l[0]),G:t.parse_css_int(l[1]),B:t.parse_css_int(l[2]),
A:h};if("hsla"===o){if(4!==l.length)return null;h=t.parse_css_float(l.pop());
}if("hsla"===o||"hsl"===o){if(3!==l.length)return null;var u=(parseFloat(l[0])%360+360)%360/360,c=t.parse_css_float(l[1]),d=t.parse_css_float(l[2]),p=d<=.5?d*(c+1):d+c-d*c,f=2*d-p;
return{R:t.clamp_css_byte(255*t.css_hue_to_rgb(f,p,u+1/3)),G:t.clamp_css_byte(255*t.css_hue_to_rgb(f,p,u)),
B:t.clamp_css_byte(255*t.css_hue_to_rgb(f,p,u-1/3)),A:h}}}return null;
},t}();O.kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],
antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],
azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],
black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],
blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],
cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],
coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],
crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],
darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],
darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],
darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],
darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],
darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],
darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],
deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],
dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],
floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],
gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],
goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],
greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],
hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],
ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],
lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],
lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],
lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],
lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],
lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],
lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],
lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],
limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],
maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],
mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],
mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],
mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],
midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],
moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],
oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],
orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],
palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],
palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],
peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],
powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],
rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],
salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],
seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],
skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],
slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],
steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],
thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],
violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],
whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]
};var R=function(){function t(t,e,i){this.isFilling=i,this.lineDash=e,
this.g=t,this.beginPath()}return t.prototype.beginPath=function(){
this.remaining=this.lineDash[0],this.dashes=[],this.pos=0,this.x0=0,
this.y0=0,this.x=0,this.y=0,this.hasPos=!1},t.prototype.moveTo=function(t,e){
this.y=e,this.x=t,this.isFilling&&this.dashes.push(0,t,e),this.g.moveTo(t,e),
this.x0=t,this.y0=e,this.hasPos=!0},t.prototype.rect=function(t,e,i,n){
this.moveTo(t,e),this.lineTo(t+i,n),this.lineTo(t+i,e+n),this.lineTo(t,e+n),
this.lineTo(t,e)},t.prototype.lineTo=function(t,e){this.isFilling&&this.g.lineTo(t,e);
var i=t-this.x,n=e-this.y,r=this.x,s=this.y;this.x=t,this.y=e;
var a=Math.sqrt(i*i+n*n),o=1/a;i*=o,n*=o;for(var l=this.lineDash.length,h=this.pos,u=this.remaining;;){
var c=Math.min(a,u);if(r+=i*c,s+=n*c,h%2===0?this.isFilling?this.dashes.push(1,r,s):this.g.lineTo(r,s):this.isFilling?this.dashes.push(0,r,s):this.g.moveTo(r,s),
!(a>c)){u-=c;break}h=(h+1)%l,u=this.lineDash[h],a-=c}this.pos=h,
this.remaining=u,this.hasPos=!0},t.prototype.arc=function(t,e,i,n,r,s){
var a=2*Math.PI,o=Math.min(.6,2/i),l=Math.cos(o),h=Math.sin(o),u=Math.sin(n)*i,c=Math.cos(n)*i,d=Math.sin(r)*i,p=Math.cos(r)*i;
if(this.hasPos||(this.moveTo(t+c,e+u),this.hasPos=!0),s){n<r&&(n+=a);
for(var f=(n-r)/o,g=f;g>=0;g--){if(g-1<=0){this.lineTo(t+p,e+d);
break}this.lineTo(t+c,e+u);var m=c*l+u*h,v=-c*h+u*l;c=m,u=v}}else{
n>r&&(n-=2*Math.PI);for(var f=(r-n)/o,g=f;g>=0;g--){if(g-1<=0){
this.lineTo(t+p,e+d);break}this.lineTo(t+c,e+u);var m=c*l-u*h,v=c*h+u*l;
c=m,u=v}}},t.prototype.quadraticCurveTo=function(e,i,n,r){this.g.quadraticCurveTo(e,i,n,r),
t.bezierWarning||(t.bezierWarning=!0,d.warn("Dashed Bézier curves not supported in this browser!"));
},t.prototype.bezierCurveTo=function(e,i,n,r,s,a){this.g.bezierCurveTo(e,i,n,r,s,a),
t.bezierWarning||(t.bezierWarning=!0,d.warn("Dashed Bézier curves not supported in this browser!"));
},t.prototype.closePath=function(){this.lineTo(this.x0,this.y0);
},t.prototype.strokeDashes=function(){for(var t=this.dashes,e=0;e<t.length;e+=3){
var i=t[e],n=t[e+1],r=t[e+2];0===i?this.g.moveTo(n,r):this.g.lineTo(n,r);
}},t}();R.bezierWarning=!1,r.GraphicsDashedLineContext=R;var B=function(){
function t(){}return t.stroke=function(t,e){0!==e.lineWidth&&e.lineColor&&(t.lineWidth=e.lineWidth||1,
t.strokeStyle=e.lineColor,e.lineDash&&"undefined"!=typeof t.setLineDash?(t.setLineDash(e.lineDash),
t.stroke(),t.setLineDash([])):t.stroke(),e.lineWidth&&(t.lineWidth=1));
},t.strokeWithShadow=function(t,e){0!==e.lineWidth&&e.lineColor&&!e.shadowColor&&(e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,
t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),
t.lineWidth=e.lineWidth||1,t.strokeStyle=e.lineColor,t.stroke(),
e.lineWidth&&(t.lineWidth=1),e.shadowColor&&(t.shadowBlur=0,t.shadowColor="transparent"));
},t.beginStroke=function(t,e,i){return void 0===i&&(i=!1),t.beginPath(),
e.lineColor&&e.lineDash&&e.lineDash.length>1&&"undefined"==typeof t.setLineDash?(i&&!e.fillColor&&(i=!1),
new R(t,e.lineDash,i)):t},t.endStroke=function(e,i,n,r){void 0===r&&(r=!1),
i instanceof R?(i.isFilling&&(t.fill(e,n),e.beginPath(),i.strokeDashes()),
t.strokeWithShadow(e,n)):r?t.paint(e,n):t.stroke(e,n)},t.beginStrokeAndFill=function(e,i){
return t.beginStroke(e,i,!0)},t.endStrokeAndFill=function(e,i,n){
return t.endStroke(e,i,n,!0)},t.fill=function(t,e){e.fillColor&&(t.fillStyle=e.fillColor,
e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,
t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),t.fill(),
e.shadowColor&&(t.shadowBlur=0,t.shadowColor="transparent"))},
t.paint=function(t,e){e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,
t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),
e.fillColor&&(t.fillStyle=e.fillColor,t.fill()),0!==e.lineWidth&&e.lineColor&&(t.lineWidth=e.lineWidth||1,
t.strokeStyle=e.lineColor,e.lineDash&&"undefined"!=typeof t.setLineDash?(t.setLineDash(e.lineDash),
t.stroke(),t.setLineDash([])):t.stroke()),e.shadowColor&&(t.shadowBlur=0,
t.shadowColor="transparent")},t.textStyle=function(t,e){t.__textStyle&&this.resetTextStyle(t);
var i=e.fillColor;void 0===i&&(i="#000"),t.fillStyle=i,t.__font=t.font=e.font||null,
e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,
t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),e.outlineColor&&(t.strokeStyle=e.outlineColor,
t.lineWidth=2*(e.outlineWidth||1),t.lineJoin=e.outlineJoin||"miter",
t.miterLimit=2),t.__textStyle=e},t.getTextWidth=function(t,e,i){
if(e){var n=e.font;t.__font!==n&&(t.__textStyle=null,t.__font=t.font=n||null);
}var r=t.measureText(i).width;return e.outlineColor&&(r+=2*(e.outlineWidth||1)),
r},t.drawText=function(t,e,i,n,r){t.__textStyle!==e&&this.textStyle(t,e),
null!=i&&i.length&&(e.outlineColor&&t.strokeText(i,n,r),t.fillText(i,n,r));
},t.resetTextStyle=function(t){t.__font=null;var e=t.__textStyle;
e&&(e.shadowColor&&(t.shadowColor="transparent",t.shadowBlur=0),
e.outlineColor&&(t.lineJoin="miter",t.miterLimit=10,t.lineWidth=1),
t.__textStyle=null)},t.restore=function(t){this.resetTextStyle(t),
t.restore()},t.rectStyle=function(t,e){void 0!==e.lineColor&&(t.strokeStyle=e.lineColor),
void 0!==e.fillColor&&(t.fillStyle=e.fillColor),void 0!==e.lineWidth&&(t.lineWidth=e.lineWidth);
},t.pushClip=function(t,e,i,n,r){var s=t.context,a=t.scaleX,o=t.scaleY;
1===a&&1===o||!window.screen.deviceXDPI?(s.save(),s.beginPath(),
s.rect(e,i,n,r),s.clip()):(s.save(),s.setTransform(1,0,0,1,0,0),
s.beginPath(),s.rect(e*a|0,i*o|0,n*a|0,r*o|0),s.clip(),s.setTransform(a,0,0,o,0,0));
},t.popClip=function(t){this.restore(t.context)},t.arcBetweenTwoPoints=function(t,e,i,n,r,s,a,o){
var l=(r+a)/2,h=(s+o)/2,u=o-s,c=r-a,d=u*u+c*c;if(0!==d){var p=Math.sqrt(d);
n=Math.min(Math.max(n,p/2),3*p);var f=Math.sqrt(n*n/d-.25),g=l+u*f,m=h+c*f,v=l-u*f,y=h-c*f,S=(g-e)*(g-e)+(m-i)*(m-i),b=(v-e)*(v-e)+(y-i)*(y-i);
S>b?(e=v,i=y):(e=g,i=m);var C=Math.atan2(s-i,r-e),x=Math.atan2(o-i,a-e);
x<C&&(x+=2*Math.PI);var w=Math.abs(C-x)>Math.PI;t.arc(e,i,n,C,x,w);
}},t.strokeMarker=function(e,i,n,r,s){var a=1.41421356237*s;switch(i){
case"rect":case"square":e.moveTo(n-s,r-s),e.lineTo(n+s,r-s),e.lineTo(n+s,r+s),
e.lineTo(n-s,r+s),e.lineTo(n-s,r-s);break;case"romb":case"rhombus":
a=.9*a,e.moveTo(n-a,r),e.lineTo(n,r-a),e.lineTo(n+a,r),e.lineTo(n,r+a),
e.lineTo(n-a,r);break;case"triangle":var o=t.SQRT3D6*(3*s);e.moveTo(n-s,r+o),
e.lineTo(n+s,r+o),e.lineTo(n,r-o),e.lineTo(n-s,r+o);break;case"triangle2":
e.moveTo(n-a,r-a),e.lineTo(n+a,r-a),e.lineTo(n,r+a),e.lineTo(n-a,r-a);
break;case"circle":e.moveTo(n+s,r),e.arc(n,r,s,0,2*Math.PI,!1);
break;default:throw new Error("Unknown marker shape "+i+". Valid values are `square`, `rhombus`, `triangle`, `triangle2`, `circle`.");
}},t.strokeBalloon=function(t,e,i,n,r){n=Math.max(n,2*r);var s=5,a=4,o=(r+2*a)/2,l=e,h=i;
t.moveTo(l,h),l+=3,h+=s+1,t.lineTo(l,h),l+=n-a,t.lineTo(l,h),
t.arc(l,h+o,o,-Math.PI/2,Math.PI/2),h+=2*o,l-=n-a,t.lineTo(l,h),
t.arc(l,h-o,o,.5*Math.PI,1.3*Math.PI),t.closePath()},t.strokeBalloon2=function(t,e,i,n,r){
var s=4,a=(r+2*s)/2;n=Math.max(n,2*r)/2-s;var o=e+n,l=i-a;t.moveTo(o,l),
t.arc(o,l+a,a,-Math.PI/2,Math.PI/2,!1),l+=2*a,o-=2*n,t.lineTo(o,l),
t.arc(o,l-a,a,.5*Math.PI,1.5*Math.PI,!1),t.closePath()},t.applyColorToImage=function(t,e,i){
void 0===i&&(i=!0);var n=E.parse(e),r=n.R,s=n.G,a=n.B,o=document.createElement("canvas"),l=o.width=t.width,h=o.height=t.height,u=o.getContext("2d");
u.drawImage(t,0,0);var c=u.getImageData(0,0,l,h),d=c.data;if(i)for(var p=0;p<=d.length;p+=4)255===d[p+3]&&(d[p]=d[p]*r>>8,
d[p+1]=d[p+1]*s>>8,d[p+2]=d[p+2]*a>>8);else for(var p=0;p<=d.length;p+=4)d[p]=d[p]*r>>8,
d[p+1]=d[p+1]*s>>8,d[p+2]=d[p+2]*a>>8;return u.putImageData(c,0,0),
o},t.cropImageToCircle=function(t,e){var i=Math.min(t.width,t.height),n=Math.max(t.width,t.height),r=Math.min(n,2*i),s=document.createElement("canvas");
s.width=r,s.height=r;var a=s.getContext("2d"),o=t.width,l=t.height;
a.fillStyle="rgba(0,0,0,1)",a.beginPath(),a.arc(r/2,r/2,r/2,0,2*-Math.PI,!1),
a.fill();var h=a.globalCompositeOperation;if(a.globalCompositeOperation="source-in",
"crop"===e){var u=Math.min(o,l)/2;a.drawImage(t,o/2-u,l/2-u,2*u,2*u,0,0,r,r);
}else if("letterbox"===e){a.fillStyle="black",a.fillRect(0,0,r,r);
var c=r/Math.max(o,l);a.drawImage(t,0,0,o,l,r/2-o/2*c,r/2-l/2*c,o*c,l*c);
}else if("fit"===e){a.fillStyle="black",a.fillRect(0,0,r,r);var c=r/Math.sqrt(o*o+l*l);
a.drawImage(t,0,0,o,l,r/2-o/2*c,r/2-l/2*c,o*c,l*c)}else a.drawImage(t,0,0,o,l,0,0,r,r);
return a.globalCompositeOperation=h,s},t.applyShadow=function(t,e){
e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,
t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor)},t.clearShadow=function(t){
t.shadowBlur=0,t.shadowColor="transparent"},t.drawImageInSquare=function(t,e,i,n,r,s,a,o,l){
var h=l/Math.max(r,s),u=r*h,c=s*h;this.drawImageHighQuality(t,e,i,n,r,s,a-u,o-c,2*u,2*c);
},t.drawImageHighQuality=function(t,e,i,n,r,s,a,o,l,h){void 0===a&&(a=i,
o=n,l=r,h=s,r=e.width,s=e.height,i=0,n=0);var u=t.__scaleX||1,c=t.__scaleY||1;
if(!(h<1/c||l<1/u)){for(var d=r,p=s,f=e,g=1,m="__size:"+i+"/"+n+"/"+r+"/"+s+"/";d>=l*u*2&&p>=h*c*2;){
var v=Math.round(d/2),y=Math.round(p/2);g/=2;var S=m+g,b=e[S];
if(!b){b=e[S]=document.createElement("canvas"),b.width=v,b.height=y;
var C=b.getContext("2d");C.drawImage(f,i,n,d,p,0,0,v,y)}i=0,n=0,
f=b,p=y,d=v}t.drawImage(f,i,n,0|d,0|p,a,o,l,h)}},t.getTextHeight=function(e,i){
var n=t._heightCache;if(n.hasOwnProperty(i))return n[i];var s=t._heightElem;
if(!s){var a=document.createElement("div");a.className="DVSL-font-height",
t._heightElem=s=document.createElement("div"),s.appendChild(document.createTextNode("Mg9!")),
a.appendChild(s),document.body.appendChild(a)}s.style.font=i;var o=s.getBoundingClientRect();
return o.top>=0&&o.left>=0?(r.Helpers.error("getTextHeight called before CSS loaded"),
o.height):n[i]=o.height},t}();B.SQRT3D6=Math.sqrt(3)/6,B._heightElem=null,
B._heightCache={},r.Graphics=B;var H=function(){function t(){
this.enabled=!0,this.enabledOnExport=!0,this.align="center",this.margin=25,
this.style={font:"20px Arial",fillColor:"#000"},this.text="",
this.advanced={addAfterToolbar:!1}}return t}();r.SettingsTitle=H;
var z=function(t){function e(e){var i=t.call(this)||this;return i.lineSpacing=0,
i.animationOrder=2e3,i.paintOrder=55,i.updateOrder=500,i.chart=e,
i.scene=e.scene,i.settings=i.scene.settings.title,i.panel=new M,
i.panel.packingOrder=10,i.settings.advanced&&i.settings.advanced.addAfterToolbar===!0&&(i.panel.packingOrder=20),
i.panel.side="top",i.panel.outsideEdge=!0,i.panel.align="fill",
i.panel.visible=!1,i.panel.computeSize=function(t,e,n){return i.computePanelSize(t,e,n);
},i.lines=null,i}return n(e,t),e.prototype.onSceneChange=function(t){
var e=t.changes;e.settings&&e.settingsChanges.title&&(e.bounds=!0);
},e.prototype.getPanels=function(t){var e=this.settings;return this.panel.visible=!!e.text&&(t?e.enabledOnExport:e.enabled),
this.panel.visible?(this.panel.margin=e.margin,t&&!e.enabled?this.panel.location="external":this.panel.location="outside",
[this.panel]):[]},e.prototype.computePanelSize=function(t,e,i){
if(!this.chart.assetsLoaded)return{width:0,height:0};this.lines=[];
var n=this.settings.text,r=this.settings.style;i.save();var s=B.getTextWidth(i,r,n),a=B.getTextHeight(i,r.font);
if(this.lineSpacing=1.15*a,s>t){for(var o=0,l=n.split(" "),h=l[0],u=B.getTextWidth(i,r,h),c=1;c<=l.length-1;c++){
var d=h+" "+l[c],p=B.getTextWidth(i,r,d);p<=t?(h=d,u=p):(this.lines.push(h),
s=Math.max(s,u),h=l[c],u=B.getTextWidth(i,r,h))}this.lines.push(h),
s=Math.max(o,u)}else this.lines.push(n);return B.restore(i),a=(this.lines.length-1)*this.lineSpacing+a,
{width:s,height:a}},e.prototype.paintScene=function(t){if(this.panel.visible&&this.lines){
var e=this.settings,i=t.context,n=this.panel.left,r=this.panel.right,s=this.panel.top,a=e.style;
i.textBaseline="top";var o;"left"===e.align?(i.textAlign="start",
o=n):"right"===e.align?(i.textAlign="end",o=r):(i.textAlign="center",
o=(n+r)/2);for(var l=0;l<this.lines.length;l++)B.drawText(i,a,this.lines[l],o,s),
s+=this.lineSpacing;B.resetTextStyle(i)}},e}(k);r.Title=z;var U=function(){
function t(t,e){void 0===e&&(e=!1),this.style={textStyle:{}},
this._textOverride=void 0,this.visible=!0,this.allowCache=!0,
this.shouldBeVisible=!0,this.userPlaced=!1,this.rows=null,this.lineHeight=0,
this.lineHeightM=0,this.hwidth=null,this.hheight=null,this.currentBounds=null,
this.x=null,this.originX=null,this.y=null,this.prop=null,this._pendingImage=!1,
this._textCache=null,this._measureStyles=null,t.textStyle||(t.textStyle={}),
null==t.lineSpacing&&(t.lineSpacing=.2),e?this.style=t:this.style=r.Helpers.realClone(t);
}return Object.defineProperty(t.prototype,"text",{get:function(){
var t=this._textOverride;return void 0===t&&(t=this.style.text,
null!=t&&"string"!=typeof t&&(t=""+t)),t},set:function(t){void 0===t&&(t=null),
null!=t&&"string"!=typeof t&&(t=""+t),this._textOverride=t},enumerable:!0,
configurable:!0}),t.prototype.needTextParsing=function(){var t=this._textCache;
return!t||t.sourceText!==this.text||t.sourceFont!==this.style.textStyle.font;
},t.prototype.needMeasure=function(){var t=this._measureStyles,e=t&&t.customMeasure;
if(this._pendingImage)return!e||null;var i=this.style,n=i.textStyle,r=!t||t.align!==i.align||t.text!==this.text||t.aspectRatio!==i.aspectRatio||t.borderRadius!==i.borderRadius||t.font!==n.font||t.image!==i.image||t.imageSlicing!==""+i.imageSlicing||t.margin!==i.margin||t.maxWidth!==i.maxWidth||t.padding!==i.padding;
return r&&e?null:r},t.prototype.measureComplete=function(t){var e=this.style,i=e.textStyle;
this._measureStyles={customMeasure:t,text:this.text,align:e.align,
aspectRatio:e.aspectRatio,borderRadius:e.borderRadius,font:i.font,
image:e.image,imageSlicing:""+e.imageSlicing,lineSpacing:e.lineSpacing,
margin:e.margin,maxWidth:e.maxWidth,padding:e.padding}},t}();r.Label=U;
var _=function(){function t(t,e,i){if(this.cache={},this.frameLabels={},
this.numPaints=0,this.numCachedPaints=0,this.allowCache=!0,this.chartArea=0,
this.scaleX=0,this.scaleY=0,this.settings=t,this.assetsLoader=e,
!i)throw new Error("chartContainer must be specified");this.chartContainer=i;
}return t.prototype.startFrame=function(t,e,i,n){this.chartArea=t*e,
this.scaleX=i,this.scaleY=n},t.prototype.finishFrame=function(){
var t=d.countProperties(this.cache);if(!(t<1e3)){var e=d.countProperties(this.frameLabels);
if(t>3*e)for(var i in this.cache)this.frameLabels[i]||delete this.cache[i];
this.frameLabels={}}},t.prototype.measure=function(t,e){var i=e.needMeasure();
if(i===!0){var n=e.style,r=(new G).totalPadding(n),s=0,a=0;if(e.text){
var o=this.measureText(t,e),l=o.w,h=o.h;a=Math.max(a,h),s+=l}else e.rows={
subLines:[],rowWidths:[]};if(n.image){var u=n.imageSlicing;if(u)s+=u[2],
a=Math.max(a,u[3]);else{var c=this.assetsLoader.getAssetImage(n.image,null);
c&&c.width?(s+=c.width,a=Math.max(a,c.height)):e._pendingImage=!0;
}}if(0===s&&(s=10,a=10),s+=2*r,a+=2*r,n.borderRadius>0&&e.text){
var d=Math.min(n.borderRadius,a/2);s+=.45*d,n.image||(s+=.45*d);
}e.hwidth=s/2,e.hheight=a/2,e.measureComplete(!1)}else if(null===i)throw new Error("Label.needMeasure assert.");
},t.prototype.measureText=function(t,e){var i,n,r=e.style,s=r.aspectRatio,a=r.maxWidth,o=new G,l=o.styleTagParser(t,e);
if((s>0||a>0)&&l.maxLines>1){s||(s=1e9),a||(a=1e9);var h=function(t){
return{x:0,y:0,dx:0,dy:0,width:Math.min(a,t*(s+.2))}};o.fitLabelInRect(t,e,h,!1),
i=2*e.hwidth,n=2*e.hheight}else{for(var u=l.words,c=l.breaks,d=0;d<c.length;d++)c[d]=c[d]-1;
var p=o.stringsByFont(u,c);e.lineHeight=n=B.getTextHeight(t,r.textStyle.font),
e.rows=p,i=p.rowWidths.reduce(function(t,e){return Math.max(t,e);
}),n=n*(1+(r.lineSpacing||0))*p.rowWidths.length}return{w:i,h:n
}},t.prototype.canCache=function(t,e){var i=this.settings.advanced,n=t.style;
if(!this.allowCache||!t.allowCache||!i.labelCache)return!1;if(n.angle&&!i.labelCacheRotated)return!1;
var r=2*(t.hwidth*t.hheight*e*e);if(this.chartArea/r<10)return!1;
if(n.image){var s=this.assetsLoader.getAssetImage(n.image,null);
if(!s)return!1}return!0},t.prototype.styleRequiresDocumentCanvas=function(t){
return!!(t&&t.font&&/[0-9]+em/.test(t.font))},t.prototype.realPaint=function(t,e,i,n){
var r=n.hwidth,s=n.hheight,a=n.style,o=a.backgroundStyle,l=(new G).totalPadding(a),h=Math.min(a.borderRadius||0,s);
if(o){var u=o.lineWidth;u=null==u&&o.lineColor?.5:(u||0)/2,r-=u,
s-=u;var c=B.beginStrokeAndFill(t,o);if(h>=s){var d=e+r-s;c.moveTo(d,i-s),
c.arc(d,i,s,-Math.PI/2,Math.PI/2,!1),d=e-r+s,c.lineTo(d,i+s),
c.arc(d,i,s,Math.PI/2,-Math.PI/2,!1),c.closePath()}else h>0?(c.moveTo(e-r+h,i-s),
c.lineTo(e+r-h,i-s),c.arc(e+r-h,i-s+h,h,-Math.PI/2,0,!1),c.lineTo(e+r,i+s-h),
c.arc(e+r-h,i+s-h,h,0,+Math.PI/2,!1),c.lineTo(e-r+h,i+s),c.arc(e-r+h,i+s-h,h,+Math.PI/2,Math.PI,!1),
c.lineTo(e-r,i-s+h),c.arc(e-r+h,i-s+h,h,Math.PI,Math.PI+Math.PI/2,!1)):(c.moveTo(e-r,i-s),
c.lineTo(e+r,i-s),c.lineTo(e+r,i+s),c.lineTo(e-r,i+s),c.closePath());
B.endStrokeAndFill(t,c,o),r+=u,s+=u}var p=a.image;r-=l,s-=l;var f=e-r,g=e+r;
if(p){var m=this.assetsLoader.getAssetImage(p);if(m){var v=a.imageSlicing;
v?(B.drawImageHighQuality(t,m,v[0],v[1],v[2],v[3],e-r,i-s,v[2],v[3]),
f+=v[2]):(t.drawImage(m,e-r,i-s),f+=m.width)}}var y=n.rows.subLines,S=n.rows.rowWidths,b=S.length;
if(y.length>0){var C=n.lineHeight*(1+(a.lineSpacing||0)),x=a.align,w=void 0,L=void 0;
t.textBaseline="bottom";var T=i-(b+1)*C/2+.58*n.lineHeight;"left"===x?(L=f,
p||(L+=.45*h),w="start"):"right"===x?(L=g-.45*h,w="end"):(L=(f+g)/2,
w="center");var k=a.textStyle,A=-1,M=0;t.textAlign=w;var P=void 0;
B.textStyle(t,k);for(var I=k.font,D=0;D<y.length;D++){var N=y[D],F=M;
if(M+=N.width,A!==N.row){A=N.row,T+=C,F=0,M=N.width;var E=S[A];
P="center"===w?L-E/2:"start"===w?L:L-E}t.textAlign="left",I!==N.font&&(t.font=I=N.font),
F+=P,B.drawText(t,k,N.text,F,T)}B.resetTextStyle(t)}},t.prototype.paint=function(t,e,i,n,s){
this.measure(t,s);var a=s.style,o=(a.angle||0)/180*Math.PI,l=this.scaleX,h=this.scaleY,u=0===(a.angle||0)?1:1.7,c=l*n*u,d=h*n*u,p=this.canCache(s,n),f=s.hwidth,g=s.hheight,m=3/h;
if(s.currentBounds=new mt(e-f*n,i-g*n,e+f*n,i+g*n),p){var v=c,y=d;
g*d<m&&(y=m/g,v=c/d*y);var S=s.text+JSON.stringify(s.style)+v.toFixed(2)+","+y.toFixed(2)+","+s.hwidth+","+s.hheight,b=this.cache[S]||null,C=void 0,x=void 0,w=void 0,L=void 0;
if(b)C=b.width,x=b.height,w=C/2,L=x/2,this.numCachedPaints+=1;else{
var T=a.backgroundStyle,k=T&&T.lineWidth?T.lineWidth:0;C=Math.ceil((2*f+k+1)*v),
x=Math.ceil((2*g+k+1)*y),b=document.createElement("canvas"),C+=C%2,
x+=x%2,w=C/2,L=x/2,b.width=C,b.height=x;var A=this.styleRequiresDocumentCanvas(a.textStyle),M=void 0;
A&&(M=this.chartContainer,M.ownerDocument||(r.Helpers.warn("chartContainer must be appended to the document in order to use `em` when specifying font size."),
M=document.body),b.style.display="none",M.appendChild(b));var P=b.getContext("2d");
P.transform(v,0,0,y,w,L),this.realPaint(P,0,0,s),A&&M.removeChild(b),
this.cache[S]=b,this.numPaints+=1}var I=C/c*n,D=x/d*n;v!==c&&(I=I/v*c,
D=D/y*d),I=Math.round(I/2*1e3)/1e3,D=Math.round(D/2*1e3)/1e3;var N=e-I,F=i-D;
0!==o?(t.save(),t.translate(e,i),t.rotate(o),N=-I,F=-D):v===c&&(N=Math.round(N*l)/l,
F=Math.round(F*h)/h),B.drawImageHighQuality(t,b,0,0,C,x,N,F,2*I,2*D),
this.frameLabels[S]=1,0!==o&&B.restore(t)}else{var E=1!==n||0!==o;
E&&(t.save(),t.transform(n,0,0,n,e,i),0!==o&&t.rotate(o),e=0,
i=0),this.realPaint(t,e,i,s),this.numPaints+=1,E&&B.restore(t);
}},t}();r.LabelRenderer=_;var G=function(){function t(){}return t.prototype.totalPadding=function(t){
var e=t.padding||0,i=t.backgroundStyle;if(i){var n=i.lineWidth;
e+=null==n&&i.lineColor?1:n||0}return e},t.prototype.fitLabelInRect=function(t,e,i,n){
void 0===n&&(n=!0);var r=e.style,s=r.margin||0,a=this.totalPadding(r),o=B.getTextHeight(t,r.textStyle.font),l=r.lineSpacing||0,h=o*(l+1),u=-o*l;
e.needTextParsing()&&this.styleTagParser(t,e);for(var c,d,p=e._textCache.words,f=e._textCache.breaks,g=e._textCache.maxLines,m=-(1/0),v=null,y=0,S=0,b=0,C=0,x=Math.min(g,f.length);x<=g;x++){
var w=u+h*x,L=i(w/2+s+a),T=L.width;T-=2*(s+a);var k=this.splitWordsToLines(p,f,x,function(){
return T}),A=k.prop,M=k.actualWidthForLines,P=k.positions;if(A>m){
v=P,m=A,c=L.dx,d=L.dy,y=L.x,S=L.y,b=T,C=0;for(var I=0;I<M.length;I++){
var D=M[I];C=Math.max(D,C)}}if(A>=1)break}if(v){if(!e.userPlaced){
var N=e.style.align,F=void 0;F="left"===N?(C-b)/2:"right"===N?(b-C)/2:0,
y+=c*F,S+=d*F}n&&(e.x=y,e.y=S),e.rows=this.stringsByFont(p,v),
e.hheight=(u+h*v.length)/2+a,e.lineHeight=o,e.lineHeightM=h,e.hwidth=C/2+a,
e.visible=!0,e.measureComplete(!0),r.borderRadius>0&&(e.hwidth+=.45*Math.min(r.borderRadius,e.hheight));
}else e.rows={subLines:[],rowWidths:[]},e.visible=!1;return m;
},t.prototype.styleTagParser=function(t,e){return e.needTextParsing()&&(e._textCache=this.styleTagParser2(t,e.text,e.style.textStyle)),
e._textCache},t.prototype.styleTagParser2=function(e,i,n){var r=n.font;
r?(e.font=r,r=e.font):r="11px Arial";var s=t._spaceWidth;s[r]||(s[r]=B.getTextWidth(e,{
font:r}," "));var a=r,o=0,l=0,h=!0,u=i;i=null==i?"":""+i;var c=0,p=0,f=[],g=[],m=-1;
f.push({word:"",width:0,font:a,spaceWidth:0});var v={word:"",
width:0,font:a,spaceWidth:0};f.push(v);for(var y=i.length,S=0===y?-1:i.charCodeAt(0);c<y;)switch(S){
case 32:for(;32===S&&++c<y;)S=i.charCodeAt(c);h||(v.spaceWidth=s[a],
h=!0),p=c;break;case 60:if(c+4>y){S=-1;break}var b=c,C=i.charCodeAt(++c),x=47===C?-1:1;
x<0&&(C=i.charCodeAt(++c));var w=i.charCodeAt(++c),L=-1;if(98===C||66===C?82===w||114===w?(w=++c===y?-1:i.charCodeAt(c),
L=2):L=0:73!==C&&105!==C||(L=1),L>-1&&62===w){S=++c===y?-1:i.charCodeAt(c),
p=c;var T=!1,k=v.word||v.spaceWidth>0;if(2===L)m===f.length-1&&(k=!0),
g.push(m=f.length-(k?0:1)),h=!0,T=!0;else{1===L?l=Math.max(0,l+x):o=Math.max(0,o+x);
var A=(l?"italic ":"")+(o?"bold ":"")+r;A!==a&&(T=!0,a=A,s[a]||(s[a]=B.getTextWidth(e,{
font:a}," ")))}T&&(k?(v={word:"",width:0,font:a,spaceWidth:0},
f.push(v)):v.font=a)}else c=b,S=-1;break;default:for(var M=!1;32!==S&&60!==S&&++c<y;)M=M||38===S,
S=i.charCodeAt(c);var P=i.substring(p,c);M&&(P=d.decodeEntities(P)),
v.spaceWidth>0||v.font!==a?(v={word:P,width:0,font:a,spaceWidth:0
},f.push(v)):v.word+=P,h=!1,p=c}for(var I=0;I<f.length;I++){var D=f[I];
D.word&&(D.width=B.getTextWidth(e,{font:D.font},D.word))}B.resetTextStyle(e);
var N=f.length;g[g.length-1]!==N&&g.push(N);var F=N;0===f[0].width&&F--;
for(var I=N-1;I>=0;I--){var D=f[I];if(D.width>0)break;F--}return{
sourceText:u,sourceFont:n.font,breaks:g,maxLines:F,words:f}},
t.prototype.stringsByFont=function(t,e){for(var i=t[0].font,n=e.slice(0),r=[],s=[],a=0,o=0,l="",h=0,u=0,c=0;c<=t.length-1;c++){
var d=t[c];u=d.spaceWidth;var p=c===n[0];d.font!==i&&(o&&r.push({
text:l,width:o,font:i,row:h}),i=d.font,l="",o=0),o+=d.width,l+=d.word,
a+=d.width+d.spaceWidth,p&&(r.push({text:l,width:o,font:i,row:h
}),s.push(a-d.spaceWidth),l="",h++,o=a=0,n.shift()),p||d.spaceWidth&&(o+=d.spaceWidth,
l+=" ")}return l&&(r.push({text:l,width:o,font:i,row:h}),s.push(a-u)),
{subLines:r,rowWidths:s}},t.prototype.fitLabelInLines=function(t,e,i,n,r,s,a){
var o=e.style,l=o.margin||0,h=this.totalPadding(o),u=B.getTextHeight(t,o.textStyle.font),c=o.lineSpacing||0,d=u*(c+1),p=-u*c;
this.styleTagParser(t,e);var f=e._textCache.words,g=e._textCache.breaks,m=e._textCache.maxLines,v=-(1/0),y=null,S=null,b=null,C=0,x=[],w=[];
w.push(a(i,n));for(var L=1;L<=g.length-1;L++){var T=p+d*L,k=void 0;
k=L%2===1?x:w;var A=a(i,n-T/2-l);k.unshift([A[0]-l,A[1]-l]),A=a(i,n+T/2+l),
k.push([A[0]-l,A[1]-l])}for(var L=Math.min(m,g.length);L<=m;L++){
var M,T=p+d*L;M=L%2===1?x:w;var A=a(i,n-T/2-l);M.unshift([A[0]-l,A[1]-l]),
A=a(i,n+T/2+l),M.push([A[0]-l,A[1]-l]);var P=function(t){return Math.min(M[t][0]+M[t][1],M[t+1][0]+M[t+1][1]);
},I=this.splitWordsToLines(f,g,L,P),D=I.prop,N=I.actualWidthForLines,F=I.positions;
if(D>v&&(C=n-T/2,y=F,v=D,S=N,b=M.slice(0),F.length+1>M.length))throw new Error("Internal error - fitLabelInLines");
if(D>=1)break}if(y){var E=0,O=0,R=void 0,H=void 0;if("left"===r){
for(var z=1e30,U=0;U<=y.length;U++)z=Math.min(b[U][0]);var _=-z;
R=_,H=_;for(var U=0;U<=y.length-1;U++){var G=S[U],j=Math.min(b[U][1],b[U+1][1]);
H=Math.max(_+G),O=Math.max(O,G-(j-_))}}else if("right"===r){for(var j=1e30,U=0;U<=y.length;U++)j=Math.min(b[U][1]);
var W=j;R=W,H=W;for(var U=0;U<=y.length-1;U++){var G=S[U];R=Math.min(W-G),
E=Math.max(E,G-(j+W))}}else if("center"===r){for(var z=1e30,j=1e30,U=0;U<=y.length-1;U++){
var G=S[U]/2;z=Math.min(b[U][0]-G,Math.min(b[U+1][0]-G,z)),j=Math.min(b[U][1]-G,Math.min(b[U+1][1]-G,j));
}var V=void 0;V=z>0&&j>0?0:z>-j?j:j>-z?-z:(j-z)/2,R=V,H=V;for(var U=0;U<=y.length-1;U++){
var G=S[U];z=Math.min(b[U][0],b[U+1][0]),j=Math.min(b[U][1],b[U+1][1]),
R=Math.min(R,V-G/2),H=Math.max(H,V+G/2),E=Math.max(E,G/2-z-V),
O=Math.max(O,G/2-j+V)}}if("left"===s&&E>0)R+=E,H+=E;else if("right"===s&&O>0)R-=O,
H-=O;else if("center"===s){var Z=(E-O)/2;R+=Z,H+=Z}e.rows=this.stringsByFont(f,y),
e.hwidth=(H-R)/2+h,e.hheight=(p+d*y.length)/2+h,e.lineHeight=u,
e.lineHeightM=d,e.visible=!0,e.measureComplete(!0),o.borderRadius>0&&(e.hwidth+=.45*Math.min(o.borderRadius,e.hheight)),
e.userPlaced||(e.x=i+(R+H)/2,e.y=C+e.hheight)}else e.rows={subLines:[],
rowWidths:[]},e.visible=!1;return v},t.prototype.splitWordsToLines=function(t,e,i,n){
for(var r=100,s=[],a=[],o=0,l=e[o],h=i-e.length,u=t[0],c=0,d=n(0),p=0,f=1;f<=t.length-1;f++){
var g=t[f],m=c+(u.spaceWidth+g.width);l===f||u.spaceWidth>0&&m>d&&h>0?(a.push(f-1),
s.push(c),r=Math.min(r,d/c),c=g.width,p+=1,d=n(p),l!==f?h-=1:(o+=1,
l=e[o])):c=m,u=g}return a.push(t.length),s.push(c),r=Math.min(r,d/c),
{prop:r,actualWidthForLines:s,positions:a}},t.prototype.getFormatedText=function(t,e,i,n,r){
var s,a=e.style,o=a.textStyle,l=B.getTextHeight(t,a.textStyle.font),h=a.lineSpacing||0,u=l*(h+1),c=a.margin||0,d=this.totalPadding(a),p=!a.angle||0===a.angle,f=90===a.angle||a.angle===-90,g=p||f;
if(f)s=n-2*c,n=i-c;else{n-=c;var m=r(l/2+d,i-2*c,n-c);s=m.width;
}var v=this.getIncludingPart(t,o,e.text,"",s,0),y=e.text,S=null,b=!1,C=B.getTextWidth(t,e.style.textStyle,"…");
if(g)for(var x=Math.floor(n/l)-2,w=0;w<=x;){if(y=y.replace(/\s+$/g,""),
v=this.getIncludingPart(t,o,y,"",s,0),v===y){this.addLine(t,e,v,w,b);
break}if(b=!0,v.length<=1){v=y.slice(0,1),b=e.text!==v,this.addLine(t,e,v,w,b),
S=e.rows.rowWidths[0];break}if(w===x)v=this.getIncludingPart(t,o,y,"",s-C,0);else{
var L=v.lastIndexOf(" "),T=void 0;if(L===-1){T=y.indexOf(" ");
var k=T===-1?y:y.substring(0,T);b=v!==k,b&&(v=this.getIncludingPart(t,o,y,"",s-C,0).replace(/\s+$/g,""),
T=y.indexOf(" "),k=T===-1?y:y.substring(0,T)),y=y.substr(v.length),
T=y.indexOf(" "),y=T===-1?"":y.substr(T+1)}else v=v.substr(0,L),
y=y.substr(L+1),b=!1}if(v.length<=1){if(0!==w)break;v=e.text.slice(0,1);
}if(this.addLine(t,e,v,w,b),""===y)break;y=y.trim(),b=!1,w++}else b=v!==y,
b&&(v=this.getIncludingPart(t,o,y,"",s-C,0).replace(/\s+$/g,"")),
this.addLine(t,e,v,0,b);e.rows||this.addLine(t,e,"",0,!1);var A=(u*e.rows.subLines.length-l*h)/2,M=0;
if("left"===a.align||"right"===a.align){var P=Math.max.apply(Math,e.rows.rowWidths),I=(s-P)/2;
M="right"===a.align?I:-I}a.angle&&(S=Math.max.apply(Math,e.rows.rowWidths));
var D=r(A,S||i,n);e.x=D.x+D.dx*M,e.y=c+D.y,e.hheight=A+d,e.hwidth=Math.max.apply(Math,e.rows.rowWidths)/2+d,
e.lineHeight=l,e.lineHeightM=u,e.visible=!0,e.measureComplete(!0),
a.borderRadius>0&&(e.hwidth+=.45*Math.min(a.borderRadius,e.hheight));
},t.prototype.addLine=function(t,e,i,n,r){r&&(i=i.replace(/\s+$/g,"")+"…");
var s=e.style.textStyle,a=B.getTextWidth(t,s,i);null==e.rows&&(e.rows={
rowWidths:[],subLines:[]}),e.rows.rowWidths.push(a),e.rows.subLines.push({
font:s.font,row:n,text:i,width:a})},t.prototype.getIncludingPart=function(t,e,i,n,r,s){
if(i.length<=1){var a=B.getTextWidth(t,e,i);return s+a<=r&&(n+=i),
n}var o=i.slice(0,i.length/2),l=B.getTextWidth(t,e,o);if(s+l<=r&&(n+=o),
s+l===r)return n;if(s+l<r){var h=i.slice(i.length/2,i.length);
return s+=l,this.getIncludingPart(t,e,h,n,r,s)}return this.getIncludingPart(t,e,o,n,r,s);
},t}();G._spaceWidth={},r.LabelLayoutBase=G;var j=function(){
function t(t,e,i,n){this.labelEnabled=null,this.labelDisabled=null,
this.groupId=null,this.hoverCount=0,this.enabled=!0,this.labelText=t,
this.textColorEnabled=e,this.textColorDisabled=i,this.groupId=n;
}return t.prototype.isHovered=function(){return this.hoverCount>0;
},t.prototype.isEnabled=function(){return this.enabled},t}();r.LegendEntry=j;
var W=function(){function t(){this.enabled=!1,this.width=null,
this.height=null,this.numberOfRows=null,this.numberOfColumns=null,
this.margin=1,this.padding=5,this.maxLineSymbols=15,this.lineSpacing=.2,
this.text={font:"12px Arial",fillColor:"#000"},this.marker=new q,
this.equalizeRowsColumns=!0,this.panel=new Y("left","fill",1),
this.advanced=new Z,this.interaction=new V}return t}();r.SettingsLegend=W;
var V=function(){function t(){this.click=!0}return t}();r.SettingsLegendInteraction=V;
var Z=function(){function t(){this.selectedBackground="rgba(208,233,255,0.3)",
this.selectedBorder="rgba(208,233,255,0.3)"}return t}();r.SettingsLegendAdvanced=Z;
var Y=function(t){function e(e,i,n,r,s){var a=t.call(this,e,i,n,r)||this;
return a.padding=0,void 0!==s&&(a.padding=s),a}return n(e,t),
e}(r.SettingsChartPanel);r.SettingsLegendPanel=Y;var q=function(){
function t(){this.size=20,this.alignment="left",this.lineColor="#fff";
}return t}();r.SettingsLegendMarker=q;var X=function(t){function e(e){
var i=t.call(this)||this;return i.animationOrder=300,i.entries=[],
i.hoverPointers={},i.hoverOrder=[],i.entryWidth=0,i.textHeight=0,
i.columns=null,i.rows=null,i.contentWidth=0,i.contentHeight=0,
i.markerSize=0,i.drawingEntries=0,i.lastInsensitive=!1,i.needsMeasure=!1,
i.chart=e,i.settings=e.settings.legend,i.panel=new M,i.panel.packingOrder=50,
i.panel.location="outside",i.panel.computeSize=function(t,e,n,r){
return i.computePanelSize(t,e,n,r)},d.extendDeep(i.panel,i.settings.panel),
i.orientation="left"===i.settings.panel.side||"right"===i.settings.panel.side?"vertical":"horizontal",
i}return n(e,t),e.prototype.onSceneChange=function(t){var e=t.changes;
e.settings&&e.settingsChanges.legend&&(e.bounds=!0,d.extendDeep(this.panel,this.settings.panel));
},e.prototype.getPanels=function(){return this.settings.enabled?[this.panel]:[];
},e.prototype.computePanelSize=function(t,e,i,n){if(this.needsMeasure=!1,
!this.settings.enabled||0===this.entries.length||!this.chart.assetsLoaded)return{
width:0,height:0};for(var r=B.getTextWidth(i,this.settings.text,"M")*this.settings.maxLineSymbols,s=0,a=this.settings.numberOfRows,o=this.settings.numberOfColumns,l=2*(this.settings.margin+this.settings.padding),h=2*(this.settings.panel.margin+this.settings.panel.padding),u=0;u<this.entries.length;u++){
var c=this.entries[u],d={lineSpacing:this.settings.lineSpacing,
textStyle:this.settings.text,text:c.labelText,maxWidth:r,align:"left",
padding:0,aspectRatio:null};c.labelEnabled=new U(d),c.labelEnabled.style.textStyle.fillColor=c.textColorEnabled,
c.labelDisabled=new U(d),c.labelDisabled.style.textStyle.fillColor=c.textColorDisabled,
n.measure(i,c.labelEnabled),n.measure(i,c.labelDisabled),s=Math.max(s,2*c.labelEnabled.hheight,2*c.labelDisabled.hheight);
}this.textHeight=this.entries[0].labelEnabled.lineHeight,this.markerSize=this.settings.marker.size||this.textHeight,
s=Math.max(s,this.markerSize),this.entryHeight=Math.max(s,this.markerSize)+l,
this.entryWidth=r+this.markerSize+this.settings.padding+l;var p,f,g=(this.settings.width>0?Math.min(t,Math.max(this.settings.width,this.entryWidth)+h):t)-h,m=(this.settings.height>0?Math.min(e,Math.max(this.settings.height,this.entryHeight)+h):e)-h;
if("vertical"===this.orientation){this.rows=Math.floor(m/this.entryHeight);
var v=Math.min(Math.ceil(this.entries.length/this.rows),Math.max(1,Math.floor(g/this.entryWidth)));
this.columns=o>0?Math.min(o,v):v,this.drawingEntries=Math.min(Math.floor(m/this.entryHeight)*this.columns,this.entries.length),
f=this.columns*this.entryWidth,this.drawingEntries>this.rows?(this.settings.equalizeRowsColumns&&(this.rows=Math.ceil(this.drawingEntries/this.columns)),
p=this.rows*this.entryHeight):p=this.drawingEntries*this.entryHeight;
}if("horizontal"===this.orientation){this.columns=Math.floor(g/this.entryWidth);
var y=Math.min(Math.ceil(this.entries.length/this.columns),Math.max(1,Math.floor(m/this.entryHeight)));
this.rows=a>0?Math.min(a,y):y,this.drawingEntries=Math.min(Math.floor(g/this.entryWidth)*this.rows,this.entries.length),
p=this.rows*this.entryHeight,this.drawingEntries>this.columns?(this.settings.equalizeRowsColumns&&(this.columns=Math.ceil(this.drawingEntries/this.rows)),
f=this.columns*this.entryWidth):f=this.drawingEntries*this.entryWidth;
}if(f<=0||p<=0)return{width:0,height:0};this.contentHeight=p,
this.contentWidth=f;var S=this.settings.panel.padding;return this.resetHovers(),
{width:f+2*S,height:p+2*S}},e.prototype.paintScene=function(t){
if(!(this.needsMeasure||!this.settings.enabled||this.entries.length<1||this.drawingEntries<1)){
this.lastInsensitive=!1;for(var e=t.context,i=t.labelRenderer,n=this.panel.top,s=this.panel.left,a=this.settings.margin,o=this.settings.padding,l=this.settings.panel.padding,h=0,u=0,c=0;c<this.drawingEntries;c++){
var d=l+a,p=s+d+h*this.entryWidth,f=n+d+u*this.entryHeight,g=this.entries[c],m=g.isEnabled()?g.labelEnabled:g.labelDisabled,v=void 0,y=void 0;
"right"===this.settings.marker.alignment?(v=p+o+m.hwidth,y=p+this.entryWidth-2*(a+o)-this.markerSize/2):(v=p+this.markerSize+2*o+m.hwidth,
y=p+o+this.markerSize/2);var S=m.hheight>this.markerSize/2?0:this.markerSize/2-this.textHeight/2,b=f+o+this.markerSize/2,C=f+S+o+m.hheight;
if(this.drawingEntries<this.entries.length&&c+1===this.drawingEntries){
this.lastInsensitive=!0,r.Graphics.resetTextStyle(e),e.fillStyle="#000",
e.textAlign="left",e.font="bold 12px Arial",e.fillText(". . .",v-m.hwidth,C);
break}if(g.isHovered()&&this.rect(e,p,f,this.settings.advanced.selectedBorder,this.settings.advanced.selectedBackground,this.entryWidth-2*a,this.entryHeight-2*a),
i.paint(e,v,C,1,m),this.paintMarker(t,y,b,this.markerSize/2,g),
"vertical"===this.orientation){if(u+=1,u===this.rows&&(u=0,h+=1),
h===this.columns)break}else if(h+=1,h===this.columns&&(h=0,u+=1),
u===this.rows)break}}},e.prototype.findItemAt=function(t,e){if(0===this.entries.length)return null;
var i=this.panel.top+this.settings.panel.padding,n=this.panel.left+this.settings.panel.padding,r=t<n||t>n+this.contentWidth||e<i||e>i+this.contentHeight;
if(r)return null;var s,a,o="vertical"===this.orientation?Math.abs(this.contentHeight/this.entryHeight):Math.abs(this.contentWidth/this.entryWidth);
"vertical"===this.orientation?(s=Math.floor((t-n)/this.entryWidth),
a=Math.floor((e-i)/this.entryHeight)):(s=Math.floor((e-i)/this.entryHeight),
a=Math.floor((t-n)/this.entryWidth));var l=Math.floor(o*s+a);return l>this.drawingEntries-1?null:this.lastInsensitive&&l===this.drawingEntries-1?null:this.entries[l];
},e.prototype.rect=function(t,e,i,n,r,s,a){t.beginPath(),t.rect(e,i,s,a),
t.fillStyle=r,t.fill(),t.lineWidth=1,t.strokeStyle=n,t.stroke();
},e.prototype.resetEntries=function(t){this.entries=t,this.needsMeasure=!0;
},e.prototype.getLastHoveredEntry=function(){return this.hoverOrder.length<1?null:this.hoverOrder[this.hoverOrder.length-1].entry;
},e.prototype.resetHovers=function(){for(var t=this.hoverOrder.length-1;t>=0;t--){
var e=this.hoverOrder[t],i=this.findItemAt(e.lastX,e.lastY);e.entry!==i&&(i?(this.itemUnhovered(null,e.entry),
e.entry=i,this.itemHovered(null,i)):(this.itemUnhovered(null,e.entry),
delete this.hoverPointers[e.id],this.hoverOrder.splice(t,1)));
}},e.prototype.pointerHoverIn=function(t){var e=this.hoverPointers[t.identifier],i=this.findItemAt(t.x,t.y);
return i?(this.settings.interaction.click&&(t.cursor="pointer"),
void(e?(e.lastX=t.x,e.lastY=t.y,e.entry!==i&&(this.itemUnhovered(t,e.entry),
e.entry=i,this.hoverOrder.splice(this.hoverOrder.indexOf(e),1),
this.hoverOrder.push(e),this.itemHovered(t,i))):(e={id:t.identifier,
lastX:t.x,lastY:t.y,entry:i},this.hoverPointers[t.identifier]=e,
this.hoverOrder.push(e),this.itemHovered(t,i)))):void(e&&(this.itemUnhovered(t,e.entry),
delete this.hoverPointers[t.identifier],this.hoverOrder.splice(this.hoverOrder.indexOf(e),1)));
},e.prototype.pointerHoverOut=function(t){var e=this.hoverPointers[t.identifier];
e&&(this.itemUnhovered(t,e.entry),delete this.hoverPointers[t.identifier],
this.hoverOrder.splice(this.hoverOrder.indexOf(e),1))},e.prototype.itemHovered=function(t,e){
e.hoverCount++,1===e.hoverCount&&this.chart.events.notifySceneChanges({
hover:!0})},e.prototype.itemUnhovered=function(t,e){e.hoverCount--,
0===e.hoverCount&&this.chart.events.notifySceneChanges({hover:!0
})},e.prototype.itemClicked=function(t,e){if(this.chart.events.requestPaint(),
this.chart.notifyChartUpdate("user",!0),t.consumed=!0,t.preventDefault(),
null==e.groupId||!e.enabled)return void(e.enabled=!e.enabled);
var i=this.entries.filter(function(t){return t.groupId===e.groupId;
});if(i.length<2)return void(e.enabled=!e.enabled);for(var n=!1,r=!1,s=0;s<i.length;s++)if(i[s]!==e)if(i[s].enabled){
if(n=!0,r)break}else if(r=!0,n)break;if(n)if(r)e.enabled=!e.enabled;else for(var s=0;s<i.length;s++)i[s]!==e&&(i[s].enabled=!1);else for(var s=0;s<i.length;s++)i[s].enabled=!0;
},e.prototype.previewPointerMove=function(t){this.pointerHoverIn(t);
},e.prototype.previewPointerCancel=function(t){this.pointerHoverOut(t);
},e.prototype.previewPointerOut=function(t){this.pointerHoverOut(t);
},e.prototype.previewPointerUp=function(t){t.touch?this.pointerHoverOut(t):this.pointerHoverIn(t);
},e.prototype.previewPointerDown=function(t){this.pointerHoverIn(t),
this.settings.interaction.click&&this.hoverPointers[t.identifier]&&(t.consumed=!0);
},e.prototype.previewInstantClick=function(t){if(this.settings.interaction.click){
var e=this.findItemAt(t.x,t.y);e&&this.itemClicked(t,e)}},e}(k);
r.Legend=X,function(t){var e=function(){function t(t,e){this.chart=t,
this.domElement=null,e instanceof K?this.options=e:(this.options=new K,
st.updateRecursive(this.options,e,nt.BaseSettingsToolbarItem,{}));
}return t.prototype.onSceneChange=function(t){},t.prototype.doAnimations=function(t){},
t.prototype.previewPointerDown=function(t){},t}();t.Item=e;var i=function(t){
function e(e,i,n,r){void 0===r&&(r=!0);var s=t.call(this,e,i)||this;
return s.captureClick=r,s.onClickProxy=function(t){return s.onClick(t);
},s.createButton(n),s}return n(e,t),e.prototype.createButton=function(t){
this.domElement=d.createDom("li",null,null,null),this.a=d.createDom("a",null,null,this.domElement),
this.p=t?this.a:d.createDom("p",null,null,this.a),d.listen(this.a,"click",this.onClickProxy),
this.updateSettings()},e.prototype.updateSettings=function(){
var t=this.options,e=t.title||t.label||"",i=t.image;this.a.title=e;
var n="DVSL-bar-btn "+(t.cssClass?t.cssClass:i?"DVSL-bar-btn-image":"DVSL-bar-btn-none");
t.enabled||(n+=" DVSL-bar-disabled"),this.a.className=n,this.p.innerHTML=t.showLabel!==!1&&t.label||"",
this.p.style.backgroundImage=i?'url("'+encodeURI(i)+'")':null;
},e.prototype.remove=function(){d.unlisten(this.a,"click",this.onClickProxy);
},e.prototype.onClick=function(t){var e=this.options;e.enabled&&e.onClick&&(e.onClick(t,this.chart.api),
this.captureClick&&d.stopPropagation(t))},e}(e);t.Button=i;var r=function(t){
function e(e,i){return t.call(this,e,i)||this}return n(e,t),e.prototype.createButton=function(){
t.prototype.createButton.call(this),d.createDom("span",null,null,this.a),
d.addClass(this.a,"DVSL-bar-show-more")},e.prototype.buildDropdownList=function(){
return[]},e.prototype.onHideDropdown=function(){},e.prototype.onClick=function(e){
this.dropdown?this.hideDropdown():this.showDropdown(),t.prototype.onClick.call(this,e),
d.stopPropagation(e)},e.prototype.showDropdown=function(){var t=this.dropdown=d.createDom("div","DVSL-bar-dropdown",null,this.domElement);
t.style.display="block";for(var e=d.createDom("ul",null,null,t),i=this.buildDropdownList(),n=0;n<i.length;n++){
var r=i[n];e.appendChild(r)}var s=t.getBoundingClientRect();if(s.top<0)t.style.marginBottom=(0|s.top)+"px",
t.className+=" DVSL-no-triangle";else{var a=Math.max(window.innerHeight-s.bottom,-s.top);
a<0&&(t.style.marginTop=(0|a)+"px",t.className+=" DVSL-no-triangle");
}},e.prototype.hideDropdown=function(){this.onHideDropdown(),
this.dropdown.parentNode.removeChild(this.dropdown),this.dropdown=null,
this.chart.shell.forceChromeRedraw()},e.prototype.previewPointerDown=function(t){
var e=d.isParentOf(this.domElement,t.target);if(this.dropdown&&!e){
var i=d.elementPos(this.chart.shell.interactiveContainer),n=i.left,r=i.top;
i=d.elementPos(this.dropdown);var s=i.left,a=i.top;s-=n,a-=r;var o=s+this.dropdown.offsetWidth,l=a+this.dropdown.offsetHeight;
(s>t.x||a>t.y||l<t.y||o<t.x)&&this.hideDropdown()}},e}(i);t.DropdownBase=r;
var s=function(e){function i(i,n){var r=e.call(this,i,n)||this;
r.htmlItems=[],r.clickProxy=function(){r.hideDropdown()};var s=n.dropDownItems;
r.items=new Array(s.length);for(var a=0;a<s.length;a++)r.items[a]=new t.Button(i,s[a],(!0),(!1));
return r}return n(i,e),i.prototype.buildDropdownList=function(){
this.htmlItems=new Array(this.items.length);for(var t=0;t<this.items.length;t++){
var e=this.items[t];d.listen(e.domElement,"click",this.clickProxy),
this.htmlItems[t]=e.domElement}return this.htmlItems},i.prototype.onHideDropdown=function(){
if(this.htmlItems){for(var t=0;t<this.htmlItems.length;t++){var e=this.htmlItems[t];
e.parentNode.removeChild(e),d.unlisten(e,"click",this.clickProxy);
}this.htmlItems=null}},i}(r);t.Dropdown=s;var a=function(t){function e(e,i){
var n=t.call(this,e,i)||this;return n._lastLabel="",n}return n(e,t),
e.prototype.buildDropdownList=function(){for(var t=this,e=[],i=0,n=this.getItems();i<n.length;i++){
var r=n[i],s=d.createDom("li",null,null,null),a=d.createDom("a",null,r.name,s);
r.selected&&(a.className="DVSL-bar-dropdown-active"),r.disabled?a.className="DVSL-bar-dropdown-disabled":!function(e,i){
return d.listen(e,"click",function(){return t.userSelected(i);
})}(a,r),e.push(s)}return e},e.prototype.userSelected=function(t){
this.hideDropdown(),this.setSelectedItem(t),this.onSelectionChange(t);
},e.prototype.setSelectedItem=function(t){var e=t.name||"";this.options.showLabel!==!1&&this._lastLabel!==e&&(this.p.innerHTML=this._lastLabel=e);
},e}(r);t.Combobox=a;var o=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;
return r.additionalOptions=n,r.curState=null,r.onSceneChange({}),
r}return n(e,t),e.prototype.onSceneChange=function(t){var e=this.additionalOptions.getChartState();
if(e!==this.curState){var i=this.options,n=this.additionalOptions;
this.curState=e,i.cssClass=e&&n.cssClassEnabled||n.cssClassDisabled,
i.label=e&&n.labelEnabled||n.labelDisabled,i.title=e&&n.titleEnabled||n.titleDisabled,
this.updateSettings()}},e.prototype.onClick=function(e){this.options.enabled&&(this.curState?this.additionalOptions.onDisable():this.additionalOptions.onEnable()),
this.onSceneChange(null),t.prototype.onClick.call(this,e),d.stopPropagation(e);
},e}(i);t.ToggleButton=o,t.ToolbarItemNames={}}(o=r.Bar||(r.Bar={}));
var Q=function(){function t(t,e,i,n,r){void 0===t&&(t=!1),this.enabled=!1,
this.location="inside",this.side="top",this.align="right",this.showLabels=!0,
this.cssClass=null,this.items=[],this.extraItems=[],this.back=!0,
this["export"]=!0,this.fullscreen=!1,this.exportOptions=null,
this.zoomOut=!1,this.enabled=t,void 0!==e&&(this.items=e),void 0!==i&&(this.side=i),
void 0!==n&&(this.align=n),void 0!==r&&(this.showLabels=r)}return t;
}();r.SettingsToolbar=Q;var J=function(){function t(){this.label=null,
this.title=null,this.image=null,this.enabled=!0,this.onClick=null,
this.cssClass=null}return t}();r.SettingsToolbarItemBase=J;var K=function(t){
function e(e,i,n,r){var s=t.call(this)||this;return s.location=void 0,
s.side=void 0,s.align=void 0,s.showLabel=void 0,s.item=null,s.dropDownItems=null,
void 0!==e&&(s.item=e),void 0!==i&&(s.align=i),void 0!==n&&(s.side=n),
void 0!==r&&(s.location=r),s}return n(e,t),e}(J);r.SettingsToolbarItem=K;
var $=function(t){function e(e,i){var n=t.call(this)||this;return n.panels={},
n.panelList=[],n.items=[],n.animationOrder=2e3,n.options=i,n.chart=e,
n.scene=n.chart.scene,n.addItems(),n.chart.events.addElement(n),
n.chart.events.notifySceneChanges({bounds:!0}),n}return n(e,t),
e.prototype.rebuildItems=function(){this.removeItems(),this.addItems();
},e.prototype.addItems=function(){if(this.options.enabled){for(var t=0;t<this.options.items.length;t++){
var e=this.options.items[t];this.addItem(e)}for(var t=0;t<this.options.extraItems.length;t++){
var e=this.options.extraItems[t];this.addItem(e)}}},e.prototype.removeItems=function(){
for(var t=0;t<this.items.length;t++){var e=this.items[t];e.remove();
}for(var i=0;i<this.panelList.length;i++){var n=this.panelList[i];
n.clear()}this.items=[]},e.prototype.remove=function(){this.removeItems();
for(var t=0;t<this.panelList.length;t++){var e=this.panelList[t];
e.remove()}this.chart.events.removeElement(this)},e.prototype.addItem=function(t){
var e,i=this.options;d.isString(t)?e=new K(t,i.align,i.side,i.location):(e=d.clone(t),
e.align=e.align||this.options.align,e.side=e.side||this.options.side,
e.location=e.location||this.options.location);var n,r=e.location+e.side;
this.panels.hasOwnProperty(r)?n=this.panels[r]:(n=new tt(this,e.location,e.side,this.chart),
this.panelList.push(n),this.panels[r]=n),null!=e.showLabel||!n.hideLabels&&i.showLabels||(e.showLabel=!1);
var s;if(null!=e.item){var a=e.item;if(this.options[a]===!1)return;
if(!o.ToolbarItemNames.hasOwnProperty(a))return void this.chart.error("Toolbar item name '"+a+"' not recognized.");
s=o.ToolbarItemNames[a](this.chart,e)}else s=e.dropDownItems?new o.Dropdown(this.chart,e):new o.Button(this.chart,e);
n.addItem(s,e.align),this.items.push(s)},e.prototype.getPanels=function(){
return this.panelList},e.prototype.onSceneChange=function(t){
for(var e=0;e<this.items.length;e++){var i=this.items[e];i.onSceneChange(t.changes);
}},e.prototype.doAnimations=function(t){for(var e=0;e<this.items.length;e++){
var i=this.items[e];i.doAnimations(t)}},e.prototype.previewGlobalPointerDown=function(t){
for(var e=0;e<this.items.length;e++)this.items[e].previewPointerDown(t);
},e}(k);r.Toolbar=$;var tt=function(t){function e(e,i,n,r){var s=t.call(this)||this;
s.hideLabels=!1,s.chart=r,s.side=n,s.location=i,s.toolbar=e,s.packingOrder="inside"===i?1e3:15,
s.container=s.toolbar.chart.shell.menuContainer,s.floating=!1,
s.align="fill";var a=e.options.cssClass?e.options.cssClass+" ":"";
return"top"===s.side?(s.vertical=!1,s.leftPanel=d.createDom("ul",a+"DVSL-bar-left DVSL-bar-top DVSL-bar-horizontal",null,s.container),
s.rightPanel=d.createDom("ul",a+"DVSL-bar-right DVSL-bar-top DVSL-bar-horizontal",null,s.container)):"bottom"===s.side?(s.vertical=!1,
s.leftPanel=d.createDom("ul",a+"DVSL-bar-left DVSL-bar-bottom DVSL-bar-horizontal",null,s.container),
s.rightPanel=d.createDom("ul",a+"DVSL-bar-right DVSL-bar-bottom DVSL-bar-horizontal",null,s.container)):"left"===s.side?(s.vertical=!0,
s.leftPanel=d.createDom("ul",a+"DVSL-bar-left DVSL-bar-top DVSL-bar-vertical",null,s.container),
s.rightPanel=d.createDom("ul",a+"DVSL-bar-left DVSL-bar-bottom DVSL-bar-vertical",null,s.container)):"right"===s.side?(s.vertical=!0,
s.leftPanel=d.createDom("ul",a+"DVSL-bar-right DVSL-bar-top DVSL-bar-vertical",null,s.container),
s.rightPanel=d.createDom("ul",a+"DVSL-bar-right DVSL-bar-bottom DVSL-bar-vertical",null,s.container)):s.chart.error("Unrecognized side: '"+s.side+"'"),
s.leftPanel.style.visibility="hidden",s.rightPanel.style.visibility="hidden",
s}return n(e,t),e.prototype.addItem=function(t,e){"left"===e||"top"===e?this.leftPanel.appendChild(t.domElement):"right"===e||"bottom"===e?this.rightPanel.appendChild(t.domElement):this.chart.error("Unrecognized align: '"+e+"'");
},e.prototype.clear=function(){this.leftPanel.innerHTML="",this.rightPanel.innerHTML="";
},e.prototype.computeSize=function(t,e,i){var n=0;if("outside"==this.location){
var r=d.getRelativeClientRect(this.leftPanel),s=d.getRelativeClientRect(this.rightPanel);
this.leftPanel&&r&&(n+=r.left),this.rightPanel&&s&&(n+=s.right);
}if(!this.vertical){this.hideLabels||(this.contentWidthWithLabels=this.leftPanel.offsetWidth+this.rightPanel.offsetWidth);
var a=(t-this.contentWidthWithLabels-n,this.contentWidthWithLabels>0&&this.contentWidthWithLabels+n>t);
a!==this.hideLabels&&(this.hideLabels=a,this.toolbar.rebuildItems());
}return this.vertical?{width:Math.max(this.leftPanel.offsetWidth,this.rightPanel.offsetWidth),
height:0}:{width:0,height:Math.max(this.leftPanel.offsetHeight,this.rightPanel.offsetHeight)
}},e.prototype.placePanel=function(t,e,i,n){var r=this.leftPanel,s=this.rightPanel,a=r.style,o=s.style,l="px",h=this.toolbar.scene,u=h.chartHeight,c=h.chartWidth;
if(this.vertical)a.top=e+l,o.bottom=u-n+l,"left"===this.side?(a.left=t+l,
o.left=t+l):(a.right=c-i+l,o.right=c-i+l);else{a.left=t+l,o.right=c-i+l;
var d="top"===this.side;if(d?(a.top=e+l,o.top=e+l):(a.bottom=u-n+l,
o.bottom=u-n+l),this.hideLabels){var p=r.offsetLeft+r.offsetWidth;
o.marginLeft=p+"px",s.offsetLeft<p&&(d?o.top=e+r.offsetHeight+l:o.bottom=u-n+r.offsetHeight+l);
}}r.offsetWidth>0&&(a.visibility="visible"),s.offsetWidth>0&&(o.visibility="visible");
},e.prototype.remove=function(){this.container.removeChild(this.leftPanel),
this.container.removeChild(this.rightPanel)},e}(M);r.ToolbarPanel=tt;
var et=function(){function t(){this.enabled=!0,this.fixedAspect=!1,
this.visibilityDistance=45,this.grabDistance=10}return t}();r.SettingsResizer=et;
var it=function(t){function e(e){var i=t.call(this)||this;return i.animationOrder=2e3,
i.paintOrder=65,i.updateOrder=300,i.oh=0,i.sy=0,i.barVisible=!1,
i.resizing=!1,i.aspect=null,i.chart=e,i.scene=i.chart.scene,i.options=i.scene.settings.interaction.resizing,
i.resizerBar=r.Helpers.createDom("div","DVSL-resizer",null,i.chart.shell.interactiveContainer),
i}return n(e,t),e.prototype.onSceneChange=function(t){this.options.enabled||this.hideUI();
},e.prototype.doAnimations=function(t){t.changes.bounds&&this.resizerBar&&(this.resizerBar.style.width=this.scene.chartWidth+"px");
},e.prototype.onPointerOut=function(t){this.options.enabled&&this.hideUI();
},e.prototype.onPointerMove=function(t){if(this.options.enabled){
var e=this.scene.chartHeight-t.y;e<this.options.visibilityDistance?(this.barVisible||this.showUI(),
e<this.options.grabDistance&&(t.consumed=!0,t.cursor="ns-resize")):this.barVisible&&this.hideUI();
}},e.prototype.onPointerDown=function(t){if(this.options.enabled){
this.sy=t.y;var e=this.scene.chartHeight-t.y;this.resizing=e<this.options.grabDistance&&t.y<=this.scene.chartHeight,
this.resizing&&(this.options.fixedAspect?this.aspect=Math.max(1,this.chart.scene.chartWidth)/Math.max(1,this.chart.scene.chartHeight):this.aspect=0,
this.oh=this.scene.chartHeight,this.showUI(),t.cursor="ns-resize",
t.consumed=!0)}},e.prototype.onDoubleClick=function(t){this.resizing&&this.chart.setFullscreen(!this.chart.isFullscreen());
},e.prototype.onPointerDrag=function(t){if(this.options.enabled)if(this.chart.isFullscreen())this.chart.setFullscreen(!1),
this.hideUI(),t.consumed=!0;else if(this.resizing){var e=this.scene.settings.area;
t.consumed=!0,this.wasMaximized=!1,e.height=Math.min(e.maxHeight,Math.max(e.minHeight,this.oh+(t.y-this.sy))),
this.aspect&&(e.width=e.height*this.aspect),this.chart.updateSize(!0);
}},e.prototype.showUI=function(){this.barVisible||(this.barVisible=!0,
this.resizerBar.style.display="block")},e.prototype.hideUI=function(){
this.barVisible&&(this.barVisible=!1,this.resizing=!1,this.resizerBar.style.display="none");
},e}(k);r.Resizer=it;var nt=function(){function t(){}return t;
}();nt.BaseIChartErrorEventArguments={},nt.BaseIChartEventArguments={},
nt.BaseIChartSettingsChangeEventArguments={},nt.BaseIDataErrorResponse={
error:{t:0}},nt.BaseIDataObjectBase={extra:{t:10}},nt.BaseISettingsClassMap={},
nt.BaseSettings={advanced:{t:5,u:0,c:function(){return nt.BaseSettingsAdvanced;
},x:function(){return i.Base.SettingsAdvanced}},area:{t:5,u:0,
c:function(){return nt.BaseSettingsArea},x:function(){return i.Base.SettingsArea;
}},assetsUrlBase:{t:0},container:{t:3},credits:{t:5,u:0,c:function(){
return nt.BaseSettingsCredits},x:function(){return i.Base.SettingsCredits;
}},data:{t:6,u:4,b:[{t:5,u:0,c:function(){return nt.BaseSettingsData;
},x:function(){return i.Base.SettingsData}}]},events:{t:5,u:0,
c:function(){return nt.BaseSettingsEvents(nt.BaseIChartEventArguments,nt.BaseIChartEventArguments);
},x:function(){return i.Base.SettingsEvents}},interaction:{t:5,
u:0,c:function(){return nt.BaseSettingsInteraction},x:function(){
return i.Base.SettingsInteraction}},legend:{t:5,u:0,c:function(){
return nt.BaseSettingsLegend},x:function(){return i.Base.SettingsLegend;
}},localization:{t:5,u:0,c:function(){return nt.BaseSettingsLocalization;
},x:function(){return i.Base.SettingsLocalization}},parentChart:{
t:5},theme:{t:5,c:function(){return nt.BaseSettings},x:function(){
return i.Base.Settings},y:!0},title:{t:5,u:0,c:function(){return nt.BaseSettingsTitle;
},x:function(){return i.Base.SettingsTitle}},toolbar:{t:5,u:0,
c:function(){return nt.BaseSettingsToolbar},x:function(){return i.Base.SettingsToolbar;
}}},nt.BaseSettingsAdvanced={assets:{t:6,u:3,b:[{t:7,u:0,b:[{
t:5,u:0,c:function(){return{url:{t:0},required:{t:4}}}},{t:0}]
}]},crossOriginHeader:{t:7,b:[{t:0}]},dataExportFunction:{t:4
},exportPdfSize:{t:12,b:[{t:1},{t:1}]},exportProxyURL:{t:0,d:5
},highDPI:{t:7,b:[{t:9},{t:1}]},labelCache:{t:9},labelCacheRotated:{
t:9},logging:{t:9},maxCanvasHeight:{t:1,d:0},maxCanvasWidth:{
t:1,d:0},pointer:{t:5,u:0,c:function(){return nt.BaseSettingsAdvancedPointer;
},x:function(){return i.Base.SettingsAdvancedPointer}},showFPS:{
t:9},showTimestamp:{t:9},showTouchTrail:{t:9},showTouches:{t:9
},style:{t:5,u:0,c:function(){return nt.BaseSettingsAdvancedStyle;
},x:function(){return i.Base.SettingsAdvancedStyle}},themeCSSClass:{
t:0},useAnimationFrame:{t:9}},nt.BaseSettingsAdvancedPointer={
clickSensitivity:{t:1},doubleClickSensitivity:{t:1},doubleClickTimeout:{
t:1,d:0},longPressSensitivity:{t:1,d:0},longPressTimeout:{t:1,
d:0},mouseWheelRequiresFocus:{t:9},noClickOnDoubleClick:{t:9},
scrollIntoView:{t:9},speedAveragingPeriod:{t:1,d:0}},nt.BaseSettingsAdvancedStyle={
loadingArcStyle:{t:5,u:0,c:function(){return{lineColor:{t:0},
lineWidth:{t:1},location:{t:0,d:6},r:{t:1}}}},messageBackgroundStyle:{
t:5,u:0,c:function(){return nt.BaseSettingsAdvancedStyleMessageBackground;
}},messageTextStyle:{t:5,u:0,c:function(){return nt.BaseSettingsTextStyle;
}}},nt.BaseSettingsAdvancedStyleMessageBackground={padding:{t:1
}},nt.BaseSettingsArea={height:{t:1},left:{t:1},maxHeight:{t:1
},maxWidth:{t:1},minHeight:{t:1},minWidth:{t:1},style:{t:5,u:0,
c:function(){return nt.BaseSettingsAreaStyle},x:function(){return i.Base.SettingsAreaStyle;
}},top:{t:1},width:{t:1}},nt.BaseSettingsAreaStyle={fillColor:{
t:0,d:3},image:{t:0,d:4},overlayColor:{t:0,d:3}},nt.BaseSettingsBackgroundStyle={
fillColor:{t:7,b:[{t:14},{t:0}]},shadowBlur:{t:1},shadowColor:{
t:0},shadowOffsetX:{t:1},shadowOffsetY:{t:1}},nt.BaseSettingsChartPanel={
align:{t:0,d:6},floating:{t:9},location:{t:0,d:6},margin:{t:1
},side:{t:0,d:6}},nt.BaseSettingsCredits={enabled:{t:9},enabledOnExport:{
t:9},image:{t:0,d:4},imageExport:{t:0,d:4},imageScaling:{t:1},
location:{t:0,d:6},url:{t:0,d:5},urlTarget:{t:0}},nt.BaseSettingsData={
format:{t:7,b:[{t:0}]},id:{t:0},numberOfParallelRequests:{t:1,
d:0},postprocessorFunction:{t:4},preloaded:{t:5,c:function(){
return nt.BaseIDataErrorResponse}},requestTimeout:{t:1,d:0},url:{
t:0,d:5},urlParameters:{t:6,u:0,b:[{t:5,u:0,c:function(){return{
name:{t:0},value:{t:0}}}}]}},nt.BaseSettingsEvents=function(t,e){
return{chartUpdateDelay:{t:1,d:0},onChartUpdate:{t:4},onClick:{
t:4},onDoubleClick:{t:4},onError:{t:4},onHoverChange:{t:4},onPositionChange:{
t:4},onRightClick:{t:4},onSelectionChange:{t:4},onSettingsChange:{
t:4},onTripleClick:{t:4}}},nt.BaseSettingsInteraction={resizing:{
t:5,u:0,c:function(){return nt.BaseSettingsResizer},x:function(){
return i.Base.SettingsResizer}}},nt.BaseSettingsLabelStyle={align:{
t:7,b:[{t:0}]},angle:{t:1,d:0},aspectRatio:{t:1},backgroundStyle:{
t:5,u:0,c:function(){return nt.BaseSettingsBackgroundStyle}},
borderRadius:{t:1},extra:{t:10},image:{t:0,d:4},imageSlicing:{
t:12,b:[{t:1},{t:1},{t:1},{t:1}]},lineSpacing:{t:1},margin:{t:1
},maxWidth:{t:1},padding:{t:1},text:{t:0},textStyle:{t:5,u:0,
c:function(){return nt.BaseSettingsTextStyle}}},nt.BaseSettingsLegend={
advanced:{t:5,u:0,c:function(){return nt.BaseSettingsLegendAdvanced;
},x:function(){return i.Base.SettingsLegendAdvanced}},enabled:{
t:9},equalizeRowsColumns:{t:9},height:{t:1},interaction:{t:5,
u:0,c:function(){return nt.BaseSettingsLegendInteraction},x:function(){
return i.Base.SettingsLegendInteraction}},lineSpacing:{t:1},margin:{
t:1},marker:{t:5,u:0,c:function(){return nt.BaseSettingsLegendMarker;
},x:function(){return i.Base.SettingsLegendMarker}},maxLineSymbols:{
t:1,d:0},numberOfColumns:{t:1,d:0},numberOfRows:{t:1,d:0},padding:{
t:1},panel:{t:5,u:0,c:function(){return nt.BaseSettingsLegendPanel;
},x:function(){return i.Base.SettingsLegendPanel}},text:{t:5,
u:0,c:function(){return nt.BaseSettingsTextStyle}},width:{t:1
}},nt.BaseSettingsLegendAdvanced={selectedBackground:{t:0,d:3
},selectedBorder:{t:0,d:3}},nt.BaseSettingsLegendInteraction={
click:{t:9}},nt.BaseSettingsLegendMarker={alignment:{t:0,d:6},
lineColor:{t:0,d:3},size:{t:1}},nt.BaseSettingsLegendPanel={padding:{
t:1}},nt.BaseSettingsLineStyle={lineColor:{t:0},lineDash:{t:6,
u:0,b:[{t:1}]},lineWidth:{t:1}},nt.BaseSettingsLocalization={
closeButton:{t:0},dataRequestFailed:{t:0},exportNotAvailable:{
t:0},loadingLabel:{t:0},toolbar:{t:5,u:0,c:function(){return nt.BaseSettingsLocalizationToolbar;
},x:function(){return i.Base.SettingsLocalizationToolbar}}},nt.BaseSettingsLocalizationToolbar={
backButton:{t:0},backTitle:{t:0},exportButton:{t:0},exportCSV:{
t:0},exportJpeg:{t:0},exportPDF:{t:0},exportPNG:{t:0},exportTitle:{
t:0},exportXLS:{t:0},fullscreenButton:{t:0},fullscreenTitle:{
t:0},zoomoutButton:{t:0},zoomoutTitle:{t:0}},nt.BaseSettingsResizer={
enabled:{t:9},fixedAspect:{t:9},grabDistance:{t:1},visibilityDistance:{
t:1}},nt.BaseSettingsTextStyle={fillColor:{t:0},font:{t:0},outlineColor:{
t:0},outlineJoin:{t:0,d:6},outlineWidth:{t:1},shadowBlur:{t:1
},shadowColor:{t:0},shadowOffsetX:{t:1},shadowOffsetY:{t:1}},
nt.BaseSettingsTitle={advanced:{t:5,u:0,c:function(){return{addAfterToolbar:{
t:9}}}},align:{t:0,d:6},enabled:{t:9},enabledOnExport:{t:9},margin:{
t:1},style:{t:5,u:0,c:function(){return{fillColor:{t:0},font:{
t:0}}}},text:{t:0}},nt.BaseSettingsToolbar={align:{t:0,d:6},back:{
t:9},cssClass:{t:0},enabled:{t:9},export:{t:9},exportOptions:{
t:6,u:0,b:[{t:7,b:[{t:0}]}]},extraItems:{t:6,u:0,b:[{t:7,u:0,
b:[{t:5,u:0,c:function(){return nt.BaseSettingsToolbarItem},x:function(){
return i.Base.SettingsToolbarItem}},{t:0}]}]},fullscreen:{t:9
},items:{t:6,u:0,b:[{t:7,u:0,b:[{t:5,u:0,c:function(){return nt.BaseSettingsToolbarItem;
},x:function(){return i.Base.SettingsToolbarItem}},{t:0}]}]},
location:{t:0,d:6},showLabels:{t:9},side:{t:0,d:6},zoomOut:{t:9
}},nt.BaseSettingsToolbarItem={align:{t:0,d:6},dropDownItems:{
t:6,u:0,b:[{t:5,u:0,c:function(){return nt.BaseSettingsToolbarItemBase;
},x:function(){return i.Base.SettingsToolbarItemBase}}]},item:{
t:0,d:6},location:{t:0,d:6},showLabel:{t:9},side:{t:0,d:6}},nt.BaseSettingsToolbarItemBase={
cssClass:{t:0},enabled:{t:9},image:{t:0,d:4},label:{t:0},onClick:{
t:4},title:{t:0}},nt.FacetChartIChartClickEventArguments={},nt.FacetChartIChartEventArguments={},
nt.FacetChartIDataObject={id:{t:0},name:{t:0},style:{t:5,u:0,
c:function(){return nt.FacetChartSettingsFacetStyle},x:function(){
return i.FacetChart.SettingsFacetStyle}},subvalues:{t:6,u:0,b:[{
t:5,u:0,c:function(){return nt.FacetChartIDataObject}}]},value:{
t:1}},nt.FacetChartIDataObjectCommon={id:{t:0},name:{t:0},subvalues:{
t:6,u:0,b:[{t:5,u:0,c:function(){return nt.FacetChartIDataObject;
}}]}},nt.FacetChartIDataObjectRoot={afterSum:{t:1},beforeSum:{
t:1},id:{t:0},limit:{t:1},name:{t:0},offset:{t:1},subvalues:{
t:6,u:0,b:[{t:5,u:0,c:function(){return nt.FacetChartIDataObject;
}}]},sum:{t:1}},nt.FacetChartSettings={area:{t:5,u:0,c:function(){
return nt.FacetChartSettingsArea},x:function(){return i.FacetChart.SettingsArea;
}},chartTypes:{t:5,u:0,c:function(){return{columns:{t:5,u:0,c:function(){
return nt.FacetChartSettingsSeriesColumns},x:function(){return i.FacetChart.SettingsSeriesColumns;
},y:!0},line:{t:5,u:0,c:function(){return nt.FacetChartSettingsSeriesLines;
},x:function(){return i.FacetChart.SettingsSeriesLines},y:!0}
}}},data:{t:6,u:4,b:[{t:5,u:0,c:function(){return nt.FacetChartSettingsData;
},x:function(){return i.FacetChart.SettingsData}}]},events:{t:5,
u:0,c:function(){return nt.LinearChartSettingsEvents(nt.FacetChartIChartEventArguments,nt.FacetChartIChartClickEventArguments);
},x:function(){return i.LinearChart.SettingsEvents}},facetAxis:{
t:5,u:0,c:function(){return nt.FacetChartSettingsFacetAxis},x:function(){
return i.FacetChart.SettingsFacetAxis}},filters:{t:5,u:0,c:function(){
return{allowZeroValues:{t:9},sliceFilter:{t:4}}}},interaction:{
t:5,u:0,c:function(){return nt.FacetChartSettingsInteraction},
x:function(){return i.FacetChart.SettingsInteraction}},items:{
t:5,u:0,c:function(){return{style:{t:5,u:0,c:function(){return{
expandable:{t:9},label:{t:0}}}},styleFunction:{t:4}}}},legend:{
t:5,u:0,c:function(){return nt.LinearChartSettingsLegend},x:function(){
return i.LinearChart.SettingsLegend}},navigation:{t:5,u:0,c:function(){
return{initialDrilldown:{t:6,u:0,b:[{t:0}]},initialOffset:{t:1,
d:0}}}},scrollButtons:{t:5,u:0,c:function(){return nt.FacetChartSettingsScrollButtons;
},x:function(){return i.FacetChart.SettingsScrollButtons}},series:{
t:6,u:4,b:[{t:5,u:0,c:function(){return nt.FacetChartSettingsSeries;
},x:function(){return i.FacetChart.SettingsSeries},y:!0}]},seriesDefault:{
t:5,u:0,c:function(){return nt.FacetChartSettingsSeries},x:function(){
return i.FacetChart.SettingsSeries},y:!0},theme:{t:5,c:function(){
return nt.FacetChartSettings},x:function(){return i.FacetChart.Settings;
},y:!0},toolbar:{t:5,u:0,c:function(){return nt.FacetChartSettingsToolbar;
},x:function(){return i.FacetChart.SettingsToolbar}}},nt.FacetChartSettingsArea={
style:{t:5,u:0,c:function(){return nt.FacetChartSettingsAreaStyle;
},x:function(){return i.FacetChart.SettingsAreaStyle}}},nt.FacetChartSettingsAreaStyle={
selection:{t:5,u:0,c:function(){return nt.FacetChartSettingsAreaStyleSelection;
},x:function(){return i.FacetChart.SettingsAreaStyleSelection;
}}},nt.FacetChartSettingsAreaStyleSelection={behindSeries:{t:9
},fillColor:{t:0},lineColor:{t:0},lineWidth:{t:1}},nt.FacetChartSettingsData={
dataFunction:{t:4},preloaded:{t:5,c:function(){return nt.FacetChartIDataObjectRoot;
}},sortField:{t:7,u:0,b:[{t:4},{t:6,u:0,b:[{t:0}]},{t:0}]}},nt.FacetChartSettingsFacetAxis={
defaultUnitWidth:{t:1},enabled:{t:9},labels:{t:5,u:0,c:function(){
return nt.FacetChartSettingsFacetAxisLabels}},maxUnitWidth:{t:1
},size:{t:1},title:{t:5,u:0,c:function(){return nt.FacetChartSettingsFacetAxisTitleStyle;
}},zoomOutUnitWidth:{t:1}},nt.FacetChartSettingsFacetAxisLabels={
allowOverflow:{t:9},enabled:{t:9},interLabelSpacing:{t:1},text:{
t:0}},nt.FacetChartSettingsFacetAxisTitleStyle={enabled:{t:9},
text:{t:0},useFacetName:{t:9}},nt.FacetChartSettingsFacetStyle={
expandable:{t:9}},nt.FacetChartSettingsInteraction={animation:{
t:5,u:0,c:function(){return{scrollDuration:{t:1,d:0}}}},mode:{
t:7,b:[{t:0}]},selection:{t:5,u:0,c:function(){return nt.FacetChartSettingsInteractionSelection;
},x:function(){return i.FacetChart.SettingsInteractionSelection;
}}},nt.FacetChartSettingsInteractionSelection={enabled:{t:9},
tolerance:{t:1}},nt.FacetChartSettingsScrollButtons={enabled:{
t:9},enabledOnExport:{t:9},size:{t:1},style:{t:5,u:0,c:function(){
return{fillColor:{t:0},hoverFillColor:{t:0},hoverLineColor:{t:0
},lineColor:{t:0}}}}},nt.FacetChartSettingsSeries={data:{t:5,
u:0,c:function(){return nt.FacetChartSettingsSeriesData},x:function(){
return i.FacetChart.SettingsSeriesData}},type:{t:0,d:6}},nt.FacetChartSettingsSeriesColumns={
data:{t:5,u:0,c:function(){return nt.FacetChartSettingsSeriesData;
},x:function(){return i.FacetChart.SettingsSeriesData}},style:{
t:5,u:0,c:function(){return nt.FacetChartSettingsSeriesColumnsStyle;
},x:function(){return i.FacetChart.SettingsSeriesColumnsStyle;
}}},nt.FacetChartSettingsSeriesColumnsStyle={previewContents:{
t:9},previewLineColor:{t:0}},nt.FacetChartSettingsSeriesData={
field:{t:0},valueFunction:{t:4}},nt.FacetChartSettingsSeriesLines={
data:{t:5,u:0,c:function(){return nt.FacetChartSettingsSeriesData;
},x:function(){return i.FacetChart.SettingsSeriesData}},style:{
t:5,u:0,c:function(){return nt.FacetChartSettingsSeriesLinesStyle;
},x:function(){return i.FacetChart.SettingsSeriesLinesStyle}}
},nt.FacetChartSettingsSeriesLinesStyle={markerStyleFunction:{
t:4}},nt.FacetChartSettingsToolbar={enabled:{t:9},items:{t:6,
u:0,b:[{t:5,u:0,c:function(){return nt.BaseSettingsToolbarItem;
},x:function(){return i.Base.SettingsToolbarItem}}]},logScale:{
t:9},zoomOut:{t:9}},nt.GeoChartIAggregationDataObjectNode={aggregatedNodes:{
t:6,u:0,b:[{t:5,u:0,c:function(){return nt.GeoChartIGeoDataObjectNode;
}}]},aggregatedWeight:{t:1}},nt.GeoChartIDataObject={clearCache:{
t:9},east:{t:1},links:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.GeoChartIGeoDataObjectLink;
}}]},nodes:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.GeoChartIGeoDataObjectNode;
}}]},north:{t:1},south:{t:1},west:{t:1}},nt.GeoChartIGeoDataObjectLink={},
nt.GeoChartIGeoDataObjectNode={aggregate:{t:9},coordinates:{t:7,
u:0,b:[{t:6,u:0,b:[{t:6,u:0,b:[{t:1}]}]},{t:12,b:[{t:1},{t:1}]
}]},count:{t:1},shapeFeature:{t:10},shapeGeometry:{t:10},type:{
t:0}},nt.GeoChartSettings={area:{t:5,u:0,c:function(){return nt.GeoChartSettingsArea;
},x:function(){return i.GeoChart.SettingsArea}},background:{t:5,
u:0,c:function(){return nt.GeoChartSettingsBackground},x:function(){
return i.GeoChart.SettingsBackground}},data:{t:6,u:4,b:[{t:5,
u:0,c:function(){return nt.GeoChartSettingsData},x:function(){
return i.GeoChart.SettingsData}}]},filters:{t:5,u:0,c:function(){
return{nodeFilter:{t:4}}}},interaction:{t:5,u:0,c:function(){
return nt.GeoChartSettingsInteraction},x:function(){return i.GeoChart.SettingsInteraction;
}},layerTypes:{t:5,u:0,c:function(){return{aggregateOnShapes:{
t:5,u:0,c:function(){return nt.GeoChartSettingsLayerAggregated;
},x:function(){return i.GeoChart.SettingsLayerAggregated},y:!0
},charts:{t:5,u:0,c:function(){return nt.GeoChartSettingsLayerCharts;
},x:function(){return i.GeoChart.SettingsLayerCharts},y:!0},items:{
t:5,u:0,c:function(){return nt.GeoChartSettingsLayerItems},x:function(){
return i.GeoChart.SettingsLayerItems},y:!0},shapes:{t:5,u:0,c:function(){
return nt.GeoChartSettingsLayerShapes},x:function(){return i.GeoChart.SettingsLayerShapes;
},y:!0}}}},layers:{t:6,u:4,b:[{t:5,u:0,c:function(){return nt.GeoChartSettingsLayerBase;
},x:function(){return i.GeoChart.SettingsLayerBase},y:!0}]},layersDefault:{
t:5,u:0,c:function(){return nt.GeoChartSettingsLayerBase},x:function(){
return i.GeoChart.SettingsLayerBase},y:!0},navigation:{t:5,u:0,
c:function(){return{drilldownLayer:{t:0},initialDrilldown:{t:6,
u:0,b:[{t:0}]},initialLat:{t:1},initialLng:{t:1},initialZoom:{
t:1},maxBounds:{t:5,u:0,c:function(){return{east:{t:1},north:{
t:1},south:{t:1},west:{t:1}}}},maxZoom:{t:1},minZoom:{t:1}}}},
style:{t:5,u:0,c:function(){return{fadeTime:{t:1},selection:{
t:5,u:0,c:function(){return{fillColor:{t:0},sizeConstant:{t:1
},sizeProportional:{t:1}}}}}}},theme:{t:5,c:function(){return nt.GeoChartSettings;
},x:function(){return i.GeoChart.Settings},y:!0},toolbar:{t:5,
u:0,c:function(){return nt.BaseSettingsToolbar},x:function(){
return i.Base.SettingsToolbar}}},nt.GeoChartSettingsAggregatedShapeStyle={
mode:{t:2,e:function(){return e.GeoChartSettingsAggregatedShapeStyleMode;
}}},nt.GeoChartSettingsAggregation={distance:{t:1,d:0},enabled:{
t:9},ignoreZeroWeight:{t:9},maxZoom:{t:1,d:0},postProcessAggregatedNodes:{
t:4},weightFunction:{t:4}},nt.GeoChartSettingsArea={style:{t:5,
u:0,c:function(){return nt.GeoChartSettingsAreaStyle},x:function(){
return i.GeoChart.SettingsAreaStyle}}},nt.GeoChartSettingsAreaStyle={},
nt.GeoChartSettingsBackground={enabled:{t:9},params:{t:7,u:0,
b:[{t:5,u:0,c:function(){return nt.GeoChartSettingsWmsParams}
},{t:5,u:0,c:function(){return nt.GeoChartSettingsBackgroundParams;
}}]},type:{t:7,b:[{t:0}]},url:{t:0}},nt.GeoChartSettingsBackgroundParams={
attribution:{t:0},continuousWorld:{t:9},detectRetina:{t:9},errorTileUrl:{
t:0},maxNativeZoom:{t:1},maxZoom:{t:1},minZoom:{t:1},noWrap:{
t:9},opacity:{t:1},reuseTiles:{t:9},subdomains:{t:7,u:0,b:[{t:6,
u:0,b:[{t:0}]},{t:0}]},tileSize:{t:1},tms:{t:9},unloadInvisibleTiles:{
t:9},updateWhenIdle:{t:9},zIndex:{t:1},zoomOffset:{t:1},zoomReverse:{
t:9}},nt.GeoChartSettingsData={aggregationGridSize:{t:1},aggregationMinCount:{
t:1},bounds:{t:12,b:[{t:1},{t:1},{t:1},{t:1}]},dataFunction:{
t:4},maxRequestRect:{t:12,b:[{t:1},{t:1}]},perBoundsData:{t:9
},perDrilldownData:{t:9},perZoomData:{t:9},prefetchRatio:{t:1
},preloaded:{t:5,c:function(){return nt.GeoChartIDataObject}},
useGridBasedAggregation:{t:9},wrapLng:{t:9}},nt.GeoChartSettingsInteraction={
mode:{t:0,d:6},zooming:{t:5,u:0,c:function(){return nt.GeoChartSettingsInteractionZooming;
},x:function(){return i.GeoChart.SettingsInteractionZooming}}
},nt.GeoChartSettingsInteractionZooming={zoomInOnDoubleClick:{
t:9}},nt.GeoChartSettingsLayerAggregated={aggregation:{t:0,d:6
},aggregationField:{t:0},aggregationFunction:{t:4},shapesLayer:{
t:0},styleFunction:{t:4}},nt.GeoChartSettingsLayerBase={data:{
t:5,u:0,c:function(){return{id:{t:0}}}},enabled:{t:9},id:{t:0
},maxZoom:{t:1,d:0},minZoom:{t:1,d:0},name:{t:0},perZoomStyle:{
t:9},type:{t:0,d:6}},nt.GeoChartSettingsLayerCharts={chartType:{
t:0,d:6},data:{t:5,u:0,c:function(){return{id:{t:0}}}},settings:{
t:7,b:[{t:5,c:function(){return nt.FacetChartSettings},x:function(){
return i.FacetChart.Settings},y:!0},{t:5,c:function(){return nt.PieChartSettings;
},x:function(){return i.PieChart.Settings},y:!0},{t:5,c:function(){
return nt.TimeChartSettings},x:function(){return i.TimeChart.Settings;
},y:!0}]},settingsFunction:{t:4},shapesLayer:{t:0}},nt.GeoChartSettingsLayerItems={
aggregation:{t:5,u:0,c:function(){return nt.GeoChartSettingsAggregation;
},x:function(){return i.GeoChart.SettingsAggregation}},auras:{
t:5,u:0,c:function(){return nt.ItemsChartSettingsNodesLayerAuras;
},x:function(){return i.ItemsChart.SettingsNodesLayerAuras}},
layout:{t:5,u:0,c:function(){return nt.GeoChartSettingsNodesLayout;
},x:function(){return i.GeoChart.SettingsNodesLayout}},style:{
t:5,u:0,c:function(){return nt.GeoChartSettingsNodesLayerStyle;
},x:function(){return i.GeoChart.SettingsNodesLayerStyle}}},nt.GeoChartSettingsLayerOverlay={
shapesLayer:{t:0}},nt.GeoChartSettingsLayerShapes={style:{t:5,
u:0,c:function(){return nt.GeoChartSettingsShapesLayerStyle},
x:function(){return i.GeoChart.SettingsShapesLayerStyle}}},nt.GeoChartSettingsNodesLayerStyle={
aggregatedShape:{t:5,u:0,c:function(){return nt.GeoChartSettingsAggregatedShapeStyle;
}}},nt.GeoChartSettingsNodesLayout={anchorStrength:{t:1},mode:{
t:0,d:6},nodeSpacing:{t:1,d:0}},nt.GeoChartSettingsShapesLayerNodeStyle={
expandable:{t:9}},nt.GeoChartSettingsShapesLayerStyle={node:{
t:5,u:0,c:function(){return nt.GeoChartSettingsShapesLayerNodeStyle;
}},shapeSimplificationPrecision:{t:1}},nt.GeoChartSettingsWmsParams={
format:{t:0},layers:{t:0},styles:{t:0},transparent:{t:9},version:{
t:0}},nt.ItemsChartIChartClickEventArguments={},nt.ItemsChartIChartEventArguments={},
nt.ItemsChartIDataObjectBase={},nt.ItemsChartIDataObjectLink={
className:{t:0},from:{t:0},id:{t:0},style:{t:5,u:0,c:function(){
return nt.ItemsChartSettingsLinkStyle}},to:{t:0}},nt.ItemsChartIDataObjectNode={
className:{t:0},id:{t:0},loaded:{t:9},style:{t:5,u:0,c:function(){
return nt.ItemsChartSettingsNodeStyle}}},nt.ItemsChartSettings={
advanced:{t:5,u:0,c:function(){return nt.ItemsChartSettingsAdvanced;
},x:function(){return i.ItemsChart.SettingsAdvanced}},data:{t:6,
u:4,b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsData;
},x:function(){return i.ItemsChart.SettingsData}}]},events:{t:5,
u:0,c:function(){return nt.BaseSettingsEvents(nt.ItemsChartIChartEventArguments,nt.ItemsChartIChartClickEventArguments);
},x:function(){return i.Base.SettingsEvents}},info:{t:5,u:0,c:function(){
return{enabled:{t:9},linkContentsFunction:{t:4},nodeContentsFunction:{
t:4}}}},interaction:{t:5,u:0,c:function(){return nt.ItemsChartSettingsInteraction;
},x:function(){return i.ItemsChart.SettingsInteraction}},linkMenu:{
t:5,u:0,c:function(){return nt.ItemsChartSettingsLinkMenu},x:function(){
return i.ItemsChart.SettingsLinkMenu}},nodeMenu:{t:5,u:0,c:function(){
return nt.ItemsChartSettingsNodeMenu},x:function(){return i.ItemsChart.SettingsNodeMenu;
}},style:{t:5,u:0,c:function(){return{}}}},nt.ItemsChartSettingsAdvanced={
perNodeLoadingIndicator:{t:9}},nt.ItemsChartSettingsAuraStyle={
enabled:{t:9},legendGroupId:{t:0},nameLegend:{t:0},showInLegend:{
t:9},zIndex:{t:1}},nt.ItemsChartSettingsCustomShape={distanceToEdge:{
t:4},hitTest:{t:4},onUpdate:{t:4},paint:{t:4},paintSelection:{
t:4}},nt.ItemsChartSettingsData={cacheSize:{t:1,d:0},random:{
t:0,d:6},randomGridLinkProbability:{t:1},randomLinks:{t:1,d:0
},randomNodes:{t:1,d:0},randomTreeDensity:{t:1},requestMaxUnits:{
t:1,d:0}},nt.ItemsChartSettingsInteraction={nodesMovable:{t:9
},panning:{t:5,u:0,c:function(){return{enabled:{t:9}}}},selection:{
t:5,u:0,c:function(){return nt.ItemsChartSettingsInteractionSelection;
},x:function(){return i.ItemsChart.SettingsInteractionSelection;
}},zooming:{t:5,u:0,c:function(){return nt.ItemsChartSettingsInteractionZooming;
},x:function(){return i.ItemsChart.SettingsInteractionZooming;
}}},nt.ItemsChartSettingsInteractionSelection={allowMoveNodesOffscreen:{
t:9},enabled:{t:9},linksSelectable:{t:9},lockNodesOnMove:{t:9
},nodesSelectable:{t:9},tolerance:{t:1}},nt.ItemsChartSettingsInteractionZooming={
autoZoomAfterClick:{t:9},doubleClickZoom:{t:1},fingers:{t:9},
sensitivity:{t:1},wheel:{t:9},zoomInOnDoubleClick:{t:9}},nt.ItemsChartSettingsItemClass={
className:{t:0},legendGroupId:{t:0},nameLegend:{t:0},showInLegend:{
t:9}},nt.ItemsChartSettingsItemsLayerItemStyle={hoverEffect:{
t:9},zIndex:{t:1}},nt.ItemsChartSettingsItemsLayerLabelStyle={
scaleWithSize:{t:9},scaleWithZoom:{t:9}},nt.ItemsChartSettingsItemsLayerLinkLabelStyle={
rotateWithLink:{t:9}},nt.ItemsChartSettingsItemsLayerStyle={allObjectsStyleFunction:{
t:4},item:{t:5,u:0,c:function(){return nt.ItemsChartSettingsItemsLayerItemStyle;
}},link:{t:5,u:0,c:function(){return nt.ItemsChartSettingsLinkStyle;
}},linkClasses:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsLinkClass;
},x:function(){return i.ItemsChart.SettingsLinkClass}}]},linkDecorationMinSize:{
t:1},linkDecorationScale:{t:1},linkDetailMinSize:{t:1},linkDetailMinZoom:{
t:1},linkHovered:{t:5,u:0,c:function(){return nt.ItemsChartSettingsLinkStyle;
}},linkLabel:{t:5,u:0,c:function(){return nt.ItemsChartSettingsItemsLayerLinkLabelStyle;
}},linkLabelScaleBase:{t:1},linkRules:{t:8,u:0,b:[{t:4}]},linkSelected:{
t:5,u:0,c:function(){return nt.ItemsChartSettingsLinkStyle}},
linkStyleFunction:{t:4},node:{t:5,u:0,c:function(){return nt.ItemsChartSettingsNodeStyle;
}},nodeAnchor:{t:5,u:0,c:function(){return nt.ItemsChartSettingsNodeAnchorStyle;
}},nodeBackground:{t:5,u:0,c:function(){return nt.ItemsChartSettingsNodeStyle;
}},nodeClasses:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsNodeClass;
},x:function(){return i.ItemsChart.SettingsNodeClass}}]},nodeDetailMinSize:{
t:1},nodeDetailMinZoom:{t:1},nodeExpanded:{t:5,u:0,c:function(){
return nt.ItemsChartSettingsNodeStyle}},nodeFocused:{t:5,u:0,
c:function(){return nt.ItemsChartSettingsNodeStyle}},nodeHovered:{
t:5,u:0,c:function(){return nt.ItemsChartSettingsNodeStyle}},
nodeLabel:{t:5,u:0,c:function(){return nt.ItemsChartSettingsItemsLayerLabelStyle;
}},nodeLabelScaleBase:{t:1},nodeLocked:{t:5,u:0,c:function(){
return nt.ItemsChartSettingsNodeStyle}},nodeNotLoaded:{t:5,u:0,
c:function(){return nt.ItemsChartSettingsNodeStyle}},nodeRules:{
t:8,u:0,b:[{t:4}]},nodeSelected:{t:5,u:0,c:function(){return nt.ItemsChartSettingsNodeStyle;
}},nodeStyleFunction:{t:4},removedColor:{t:0,d:3},scaleLinksWithZoom:{
t:9},scaleObjectsWithZoom:{t:9},selection:{t:5,u:0,c:function(){
return{enabled:{t:9},fillColor:{t:0},lineColor:{t:0},lineWidth:{
t:1},shadowBlur:{t:1},shadowColor:{t:0},shadowOffsetX:{t:1},shadowOffsetY:{
t:1},sizeConstant:{t:1},sizeProportional:{t:1}}}}},nt.ItemsChartSettingsLinkClass={
style:{t:5,u:0,c:function(){return nt.ItemsChartSettingsLinkStyle;
}}},nt.ItemsChartSettingsLinkItem={lx:{t:1},ly:{t:1},px:{t:1},
py:{t:1},rotateWithLink:{t:9},x:{t:1},y:{t:1}},nt.ItemsChartSettingsLinkMenu={
buttons:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsMenuButton;
},x:function(){return i.ItemsChart.SettingsMenuButton}}]},contentsFunction:{
t:4}},nt.ItemsChartSettingsLinkStyle={cursor:{t:0},direction:{
t:0},fillColor:{t:0},fromDecoration:{t:0,d:6},invisible:{t:9},
items:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsLinkItem;
}}]},label:{t:0},length:{t:1},lineDash:{t:6,u:0,b:[{t:1}]},radius:{
t:1},shadowBlur:{t:1},shadowColor:{t:0},shadowOffsetX:{t:1},shadowOffsetY:{
t:1},strength:{t:1},toDecoration:{t:0,d:6},toPieColor:{t:0},toPieValue:{
t:1}},nt.ItemsChartSettingsMenu={buttons:{t:6,u:0,b:[{t:7,u:0,
b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsMenuButton;
},x:function(){return i.ItemsChart.SettingsMenuButton}},{t:0}]
}]},contentsFunction:{t:4},enabled:{t:9},showData:{t:9}},nt.ItemsChartSettingsMenuButton={
className:{t:0},onClick:{t:4},onInit:{t:4},onRefresh:{t:4},text:{
t:0},title:{t:0}},nt.ItemsChartSettingsNodeAnchorStyle={lineColor:{
t:0},lineDash:{t:6,u:0,b:[{t:1}]},lineWidth:{t:1},shadowBlur:{
t:1},shadowColor:{t:0},shadowOffsetX:{t:1},shadowOffsetY:{t:1
}},nt.ItemsChartSettingsNodeClass={style:{t:5,u:0,c:function(){
return nt.ItemsChartSettingsNodeStyle}}},nt.ItemsChartSettingsNodeItem={
px:{t:1},py:{t:1},x:{t:1},y:{t:1}},nt.ItemsChartSettingsNodeMenu={
buttons:{t:6,u:0,b:[{t:7,u:0,b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsMenuButton;
},x:function(){return i.ItemsChart.SettingsMenuButton}},{t:0}]
}]},contentsFunction:{t:4}},nt.ItemsChartSettingsNodeStyle={anchorMode:{
t:2,e:function(){return i.ItemsChart.NodeAnchorMode}},anchorStyle:{
t:5,u:0,c:function(){return nt.ItemsChartSettingsNodeAnchorStyle;
}},anchorX:{t:1},anchorY:{t:1},aspectRatio:{t:1},aura:{t:7,u:0,
b:[{t:6,u:0,b:[{t:0}]},{t:0}]},coordinates:{t:7,u:0,b:[{t:6,u:0,
b:[{t:6,u:0,b:[{t:1}]}]},{t:6,u:0,b:[{t:1}]}]},cursor:{t:0,d:7
},customShape:{t:5,u:0,c:function(){return nt.ItemsChartSettingsCustomShape;
}},display:{t:0},draggable:{t:9},fillColor:{t:0},image:{t:0},
imageCropping:{t:7,b:[{t:0},{t:9}]},invisible:{t:9},items:{t:6,
u:0,b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsNodeItem;
}}]},label:{t:0},labelStyle:{t:5,u:0,c:function(){return nt.ItemsChartSettingsItemsLayerLabelStyle;
}},lineColor:{t:0},lineDash:{t:6,u:0,b:[{t:1}]},lineWidth:{t:1
},opacity:{t:1},radius:{t:1},shadowBlur:{t:1},shadowColor:{t:0
},shadowOffsetX:{t:1},shadowOffsetY:{t:1}},nt.ItemsChartSettingsNodesLayerAuras={
cellSize:{t:1},defaultColors:{t:6,u:0,b:[{t:0}]},defaultStyle:{
t:5,u:0,c:function(){return nt.ItemsChartSettingsAuraStyle}},
drawLimit:{t:1},enabled:{t:9},intensity:{t:1},overlap:{t:9},style:{
t:8,u:0,b:[{t:5,u:0,c:function(){return nt.ItemsChartSettingsAuraStyle;
}}]}},nt.ItemsChartSettingsNodesLayerStyle={fadeTime:{t:1,d:0
},hiddenLinks:{t:5,u:0,c:function(){return{lineColor:{t:0},lineWidth:{
t:1},size:{t:1}}}},linkAutoScaling:{t:0,d:6},linkLengthAutoScaling:{
t:0,d:6},linkLengthExtent:{t:12,b:[{t:1},{t:1}]},linkRadiusExtent:{
t:12,b:[{t:1},{t:1}]},linkStrengthAutoScaling:{t:0,d:6},linkStrengthExtent:{
t:12,b:[{t:1},{t:1}]},multilinkSpacing:{t:1},nodeAutoScaling:{
t:7,b:[{t:0}]},nodeRadiusExtent:{t:12,b:[{t:1,d:0},{t:1,d:0}]
},selfLinkAngle:{t:1},selfLinkHeightFactor:{t:1},selfLinkShape:{
t:7,b:[{t:0}]},selfLinkWidthFactor:{t:1}},nt.LinearChartSettings={
area:{t:5,u:0,c:function(){return nt.LinearChartSettingsArea},
x:function(){return i.LinearChart.SettingsArea}},chartTypes:{
t:5,u:0,c:function(){return{candlestick:{t:5,u:0,c:function(){
return nt.LinearChartSettingsSeriesCandleStick},x:function(){
return i.LinearChart.SettingsSeriesCandleStick},y:!0},columns:{
t:5,u:0,c:function(){return nt.LinearChartSettingsSeriesColumns;
},x:function(){return i.LinearChart.SettingsSeriesColumns},y:!0
},line:{t:5,u:0,c:function(){return nt.LinearChartSettingsSeriesLines;
},x:function(){return i.LinearChart.SettingsSeriesLines},y:!0
}}}},events:{t:5,u:0,c:function(){return nt.LinearChartSettingsEvents(nt.BaseIChartEventArguments,nt.BaseIChartEventArguments);
},x:function(){return i.LinearChart.SettingsEvents}},info:{t:5,
u:0,c:function(){return nt.LinearChartSettingsInfoPopup},x:function(){
return i.LinearChart.SettingsInfoPopup}},interaction:{t:5,u:0,
c:function(){return nt.LinearChartSettingsInteraction},x:function(){
return i.LinearChart.SettingsInteraction}},legend:{t:5,u:0,c:function(){
return nt.LinearChartSettingsLegend},x:function(){return i.LinearChart.SettingsLegend;
}},localization:{t:5,u:0,c:function(){return nt.LinearChartSettingsLocalization;
},x:function(){return i.LinearChart.SettingsLocalization}},series:{
t:6,u:4,b:[{t:5,u:0,c:function(){return nt.LinearChartSettingsSeries;
},x:function(){return i.LinearChart.SettingsSeries},y:!0}]},seriesDefault:{
t:5,u:0,c:function(){return nt.LinearChartSettingsSeries},x:function(){
return i.LinearChart.SettingsSeries},y:!0},stacks:{t:8,u:0,b:[{
t:5,u:0,c:function(){return nt.LinearChartSettingsStack},x:function(){
return i.LinearChart.SettingsStack}}]},style:{t:5,u:0,c:function(){
return{columnColors:{t:6,u:0,b:[{t:0}]},lineColors:{t:6,u:0,b:[{
t:0}]}}}},valueAxis:{t:8,u:0,b:[{t:5,u:0,c:function(){return nt.LinearChartSettingsValueAxis;
},x:function(){return i.LinearChart.SettingsValueAxis},y:!0}]
},valueAxisDefault:{t:5,u:0,c:function(){return nt.LinearChartSettingsValueAxis;
},x:function(){return i.LinearChart.SettingsValueAxis}}},nt.LinearChartSettingsArea={
style:{t:5,u:0,c:function(){return nt.LinearChartSettingsAreaStyle;
},x:function(){return i.LinearChart.SettingsAreaStyle}}},nt.LinearChartSettingsAreaStyle={
noData:{t:5,u:0,c:function(){return{fillColor:{t:0},image:{t:0,
d:5}}}},zoomHighlight:{t:5,u:0,c:function(){return nt.LinearChartSettingsHighlightStyle;
}},zoomHighlightInactive:{t:5,u:0,c:function(){return{fillColor:{
t:0}}}}},nt.LinearChartSettingsCandleStickMotionStyle={bar:{t:5,
u:0,c:function(){return{lineColor:{t:0},lineDash:{t:6,u:0,b:[{
t:1}]},lineWidth:{t:1},shadowBlur:{t:1},shadowColor:{t:0},shadowOffsetX:{
t:1},shadowOffsetY:{t:1}}}},candlestick:{t:5,u:0,c:function(){
return{fillColor:{t:0},lineColor:{t:0,d:3},lineDash:{t:6,u:0,
b:[{t:1}]},lineWidth:{t:1},shadowBlur:{t:1},shadowColor:{t:0},
shadowOffsetX:{t:1},shadowOffsetY:{t:1}}}}},nt.LinearChartSettingsEvents=function(t,e){
return{onAnimationDone:{t:4}}},nt.LinearChartSettingsHighlightStyle={
fadeIn:{t:1,d:0},fadeOut:{t:1,d:0},fillColor:{t:0}},nt.LinearChartSettingsInfoPopup={
advanced:{t:5,u:0,c:function(){return{contentsFunction:{t:4},
scope:{t:0,d:6},showHeader:{t:9},showOnlyHoveredSeries:{t:9}};
}},aggregations:{t:6,u:0,b:[{t:0,d:6}]},enabled:{t:9},position:{
t:7,b:[{t:0}]},showNoData:{t:9},style:{t:5,u:0,c:function(){return{
highlight:{t:5,u:0,c:function(){return nt.LinearChartSettingsHighlightStyle;
}}}}},valueFormatterFunction:{t:4}},nt.LinearChartSettingsInteraction={
ignoreBottomAxis:{t:9},scrolling:{t:5,u:0,c:function(){return nt.LinearChartSettingsInteractionScrolling;
},x:function(){return i.LinearChart.SettingsInteractionScrolling;
}},swipeSensitivity:{t:1},zooming:{t:5,u:0,c:function(){return nt.LinearChartSettingsInteractionZooming;
},x:function(){return i.LinearChart.SettingsInteractionZooming;
}}},nt.LinearChartSettingsInteractionScrolling={enabled:{t:9},
kineticFriction:{t:1},maxAnimationLength:{t:1,d:0},swipePageFlipping:{
t:9}},nt.LinearChartSettingsInteractionZooming={enabled:{t:9},
fingers:{t:9},fingersMaxZoom:{t:1},sensitivity:{t:1},swipe:{t:9
},upDownTreshold:{t:1},wheel:{t:9},wheelSensitivity:{t:1},zoomHighlightThreshold:{
t:1}},nt.LinearChartSettingsLegend={advanced:{t:5,u:0,c:function(){
return nt.LinearChartSettingsLegendAdvanced},x:function(){return i.LinearChart.SettingsLegendAdvanced;
}},marker:{t:5,u:0,c:function(){return nt.LinearChartSettingsLegendMarker;
},x:function(){return i.LinearChart.SettingsLegendMarker}},panel:{
t:5,u:0,c:function(){return nt.BaseSettingsLegendPanel},x:function(){
return i.Base.SettingsLegendPanel}}},nt.LinearChartSettingsLegendAdvanced={
disabledSeries:{t:5,u:0,c:function(){return{fillColor:{t:0},lineColor:{
t:0},textColor:{t:0}}}}},nt.LinearChartSettingsLegendMarker={
shape:{t:7,d:6,b:[{t:0}]}},nt.LinearChartSettingsLocalization={
noDataLabel:{t:0},toolbar:{t:5,u:0,c:function(){return nt.LinearChartSettingsLocalizationToolbar;
},x:function(){return i.LinearChart.SettingsLocalizationToolbar;
}},unnamedSeries:{t:0},valueUnits:{t:8,u:0,b:[{t:1,d:0}]}},nt.LinearChartSettingsLocalizationToolbar={
linButton:{t:0},linLogTitle:{t:0},logButton:{t:0}},nt.LinearChartSettingsSeries={
cluster:{t:0},data:{t:5,u:0,c:function(){return nt.LinearChartSettingsSeriesData;
},x:function(){return i.LinearChart.SettingsSeriesData}},enabled:{
t:9},extra:{t:10},id:{t:0},legendGroupId:{t:0},name:{t:0},nameLegend:{
t:0},showInLegend:{t:9},stack:{t:0},style:{t:5,u:0,c:function(){
return nt.LinearChartSettingsSeriesStyle},x:function(){return i.LinearChart.SettingsSeriesStyle;
}},type:{t:0,d:6},valueAxis:{t:0}},nt.LinearChartSettingsSeriesCandleStick={
localization:{t:5,u:0,c:function(){return{close:{t:0},high:{t:0
},low:{t:0},open:{t:0}}}},style:{t:5,u:0,c:function(){return nt.LinearChartSettingsSeriesCandleStickStyle;
},x:function(){return i.LinearChart.SettingsSeriesCandleStickStyle;
}}},nt.LinearChartSettingsSeriesCandleStickStyle={decrease:{t:5,
u:0,c:function(){return nt.LinearChartSettingsCandleStickMotionStyle;
}},increase:{t:5,u:0,c:function(){return nt.LinearChartSettingsCandleStickMotionStyle;
}},padding:{t:12,b:[{t:1,d:0},{t:1,d:0}]},pattern:{t:0,d:6}},
nt.LinearChartSettingsSeriesColumns={style:{t:5,u:0,c:function(){
return nt.LinearChartSettingsSeriesColumnsStyle},x:function(){
return i.LinearChart.SettingsSeriesColumnsStyle}},valueLabels:{
t:5,u:0,c:function(){return nt.LinearChartSettingsValueLabels;
}}},nt.LinearChartSettingsSeriesColumnsStyle={depth:{t:1},depthBrightness:{
t:1},fillGradientMode:{t:7,b:[{t:0}]},fillGradientType:{t:0},
gradient:{t:1},lineColor:{t:0,d:3},minHeight:{t:1,d:0},padding:{
t:12,b:[{t:1,d:0},{t:1,d:0}]},shadowBlur:{t:1,d:0}},nt.LinearChartSettingsSeriesData={
aggregatedValueFunction:{t:4},aggregation:{t:0,d:6},noDataPolicy:{
t:0,d:6},source:{t:0},valueFunction:{t:4}},nt.LinearChartSettingsSeriesLines={
style:{t:5,u:0,c:function(){return nt.LinearChartSettingsSeriesLinesStyle;
},x:function(){return i.LinearChart.SettingsSeriesLinesStyle}
},valueLabels:{t:5,u:0,c:function(){return nt.LinearChartSettingsValueLabels;
}}},nt.LinearChartSettingsSeriesLinesStyle={marker:{t:5,u:0,c:function(){
return nt.LinearChartSettingsSeriesStyleMarker}},markerStyleFunction:{
t:4},shadowBlur:{t:1,d:0},smoothing:{t:9},steps:{t:9}},nt.LinearChartSettingsSeriesStyle={
depth:{t:1},fillColor:{t:0,d:3},fillGradient:{t:11},fillPattern:{
t:0},legend:{t:5,u:0,c:function(){return{marker:{t:5,u:0,c:function(){
return nt.LinearChartSettingsSeriesStyleMarker}},textColor:{t:0,
d:3}}}},lineColor:{t:0},lineDash:{t:6,u:0,b:[{t:1}]},lineWidth:{
t:1},shadowColor:{t:0,d:3},shadowOffsetX:{t:1,d:0},shadowOffsetY:{
t:1,d:0}},nt.LinearChartSettingsSeriesStyleMarker={fillColor:{
t:0,d:3},lineColor:{t:0,d:3},lineWidth:{t:1},shape:{t:7,d:6,b:[{
t:0}]},width:{t:1,d:0}},nt.LinearChartSettingsStack={name:{t:0
},separateNegativeValues:{t:9},type:{t:0,d:6}},nt.LinearChartSettingsValueAxis={
animate:{t:0,d:6},axisLine:{t:9},enabled:{t:9},hgrid:{t:9},initialAnimationValue:{
t:1},initialAnimationValueMultiplier:{t:1},logScale:{t:9},maxValue:{
t:1},minValue:{t:1},position:{t:0,d:6},scaleAdjustmentAnimation:{
t:0,d:6},scaleAdjustmentAnimationDelay:{t:1,d:0},scaleAdjustmentTolerance:{
t:1},scaleMinStep:{t:1},scaleStep:{t:1},side:{t:7,b:[{t:0}]},
size:{t:1,d:0},style:{t:5,u:0,c:function(){return{axisLine:{t:5,
u:0,c:function(){return nt.BaseSettingsLineStyle}},baseLine:{
t:5,u:0,c:function(){return nt.LinearChartSettingsValueAxisBaseLineStyle;
}},hgrid:{t:5,u:0,c:function(){return nt.BaseSettingsLineStyle;
}},labelSpacing:{t:1},tick:{t:5,u:0,c:function(){return nt.BaseSettingsLineStyle;
}},title:{t:5,u:0,c:function(){return nt.LinearChartSettingsValueAxisTitleStyle;
}},valueLabel:{t:5,u:0,c:function(){return nt.BaseSettingsLabelStyle;
}}}}},thresholds:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.LinearChartSettingsValueAxisThreshold;
},x:function(){return i.LinearChart.SettingsValueAxisThreshold;
}}]},title:{t:0},valueFormat:{t:0},valueFormatterFunction:{t:4
},zeroLine:{t:0,d:6}},nt.LinearChartSettingsValueAxisBaseLineStyle={
depthColor:{t:0,d:3},lineDepth:{t:1,d:0},showLabel:{t:2,e:function(){
return e.LinearChartSettingsValueAxisBaseLineLabelMode}}},nt.LinearChartSettingsValueAxisThreshold={
from:{t:1},position:{t:0,d:6},style:{t:5,u:0,c:function(){return{
fillColor:{t:0,d:3},lineColor:{t:0,d:3},lineDash:{t:6,u:0,b:[{
t:1}]},lineWidth:{t:1}}}},to:{t:1}},nt.LinearChartSettingsValueAxisTitleStyle={
reverseDirection:{t:9}},nt.LinearChartSettingsValueLabels={contentsFunction:{
t:4},enabled:{t:9},minFontSize:{t:1},position:{t:0,d:6},style:{
t:5,u:0,c:function(){return nt.BaseSettingsLabelStyle}},useStackedValue:{
t:9}},nt.NetChartBarSettingsLocalizationToolbar={fitButton:{t:0
},fitTitle:{t:0},freezeButton:{t:0},freezeTitle:{t:0},rearrangeButton:{
t:0},rearrangeTitle:{t:0},unfreezeTitle:{t:0}},nt.NetChartBarSettingsToolbar={
zoomControl:{t:9}},nt.NetChartGravitySettings={from:{t:7,d:6,
b:[{t:0}]},fromCenter:{t:7,d:6,b:[{t:0}]},strength:{t:1},to:{
t:7,d:6,b:[{t:0}]},toCenter:{t:7,d:6,b:[{t:0}]}},nt.NetChartIChartClickEventArguments={},
nt.NetChartIChartEventArguments={},nt.NetChartIDataObject={links:{
t:6,u:0,b:[{t:5,u:0,c:function(){return nt.NetChartIDataObjectLink;
}}]},nodes:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.NetChartIDataObjectNode;
}}]}},nt.NetChartIDataObjectLink={},nt.NetChartIDataObjectNode={
locked:{t:9},x:{t:1},y:{t:1}},nt.NetChartSettings={area:{t:5,
u:0,c:function(){return nt.NetChartSettingsArea},x:function(){
return i.NetChart.SettingsArea}},auras:{t:5,u:0,c:function(){
return nt.ItemsChartSettingsNodesLayerAuras},x:function(){return i.ItemsChart.SettingsNodesLayerAuras;
}},data:{t:6,u:4,b:[{t:5,u:0,c:function(){return nt.NetChartSettingsData;
},x:function(){return i.NetChart.SettingsData}}]},events:{t:5,
u:0,c:function(){return nt.NetChartSettingsEvents},x:function(){
return i.NetChart.SettingsEvents}},filters:{t:5,u:0,c:function(){
return{linkFilter:{t:4},multilinkProcessor:{t:4},nodeFilter:{
t:4},nodeLinksProcessor:{t:4}}}},interaction:{t:5,u:0,c:function(){
return nt.NetChartSettingsInteraction},x:function(){return i.NetChart.SettingsInteraction;
}},layout:{t:5,u:0,c:function(){return nt.NetChartSettingsLayout;
},x:function(){return i.NetChart.SettingsLayout}},legend:{t:5,
u:0,c:function(){return nt.NetChartSettingsLegend},x:function(){
return i.NetChart.SettingsLegend}},localization:{t:5,u:0,c:function(){
return nt.NetChartSettingsLocalization},x:function(){return i.NetChart.SettingsLocalization;
}},navigation:{t:5,u:0,c:function(){return nt.NetChartSettingsNavigation;
},x:function(){return i.NetChart.SettingsNavigation}},style:{
t:5,u:0,c:function(){return nt.NetChartSettingsStyle},x:function(){
return i.NetChart.SettingsStyle}},theme:{t:5,c:function(){return nt.NetChartSettings;
},x:function(){return i.NetChart.Settings},y:!0},toolbar:{t:5,
u:0,c:function(){return nt.NetChartBarSettingsToolbar},x:function(){
return i.NetChart.Bar.SettingsToolbar}}},nt.NetChartSettingsArea={
centerX:{t:1},centerY:{t:1},paddingBottom:{t:1},paddingLeft:{
t:1},paddingRight:{t:1},paddingTop:{t:1}},nt.NetChartSettingsData={
dataFunction:{t:4},preloaded:{t:5,c:function(){return nt.NetChartIDataObject;
}}},nt.NetChartSettingsEvents={onDataUpdated:{t:4},onPointerDown:{
t:4},onPointerDrag:{t:4},onPointerMove:{t:4},onPointerUp:{t:4
}},nt.NetChartSettingsInteraction={rotation:{t:5,u:0,c:function(){
return{fingers:{t:9}}}},selection:{t:5,u:0,c:function(){return nt.NetChartSettingsInteractionSelection;
},x:function(){return i.NetChart.SettingsInteractionSelection;
}},zooming:{t:5,u:0,c:function(){return nt.NetChartSettingsInteractionZooming;
},x:function(){return i.NetChart.SettingsInteractionZooming}}
},nt.NetChartSettingsInteractionSelection={dragSelect:{t:9}},
nt.NetChartSettingsInteractionZooming={autoZoomExtent:{t:12,b:[{
t:1},{t:1}]},autoZoomPositionElasticity:{t:1},autoZoomSize:{t:1
},initialAutoZoom:{t:7,b:[{t:9},{t:0}]},zoomExtent:{t:12,b:[{
t:1},{t:1}]}},nt.NetChartSettingsLayout={advanced:{t:5,u:0,c:function(){
return{adaptiveFreezeTreshold:{t:1}}}},aspectRatio:{t:9},globalLayoutOnChanges:{
t:9},gravity:{t:5,u:0,c:function(){return nt.NetChartGravitySettings;
},x:function(){return i.NetChart.GravitySettings}},groupSpacing:{
t:1,d:0},incrementalLayoutMaxTime:{t:1,d:0},initialLayoutMaxTime:{
t:1,d:0},layoutFreezeMinTimeout:{t:1,d:0},layoutFreezeTimeout:{
t:1,d:0},mode:{t:7,d:6,b:[{t:0}]},nodeSpacing:{t:1,d:0},rotation:{
t:1},rowSpacing:{t:1,d:0},twoRingRadialLayout:{t:9}},nt.NetChartSettingsLegend={
advanced:{t:5,u:0,c:function(){return nt.NetChartSettingsLegendAdvanced;
},x:function(){return i.NetChart.SettingsLegendAdvanced}},panel:{
t:5,u:0,c:function(){return nt.BaseSettingsLegendPanel},x:function(){
return i.Base.SettingsLegendPanel}}},nt.NetChartSettingsLegendAdvanced={
showItemsWithClasses:{t:7,d:6,b:[{t:0}]},textColorDisabled:{t:0
}},nt.NetChartSettingsLocalization={menu:{t:5,u:0,c:function(){
return{close:{t:0},collapse:{t:0},dynamic:{t:0},expand:{t:0},
fixed:{t:0},focus:{t:0},hide:{t:0},unfocus:{t:0}}}},toolbar:{
t:5,u:0,c:function(){return nt.NetChartBarSettingsLocalizationToolbar;
},x:function(){return i.NetChart.Bar.SettingsLocalizationToolbar;
}}},nt.NetChartSettingsNavigation={autoUnfocus:{t:9},autoZoomOnFocus:{
t:9},expandDelay:{t:1,d:0},expandOnClick:{t:9},focusAutoFadeout:{
t:9},focusNodeExpansionRadius:{t:1},focusNodeTailExpansionRadius:{
t:1},initialNodes:{t:6,u:0,b:[{t:0}]},minNumberOfFocusNodes:{
t:1,d:0},mode:{t:7,d:6,b:[{t:0}]},numberOfFocusNodes:{t:1,d:0
}},nt.NetChartSettingsStyle={dragSelection:{t:5,u:0,c:function(){
return nt.BaseSettingsBackgroundStyle}}},nt.PieChartIChartClickEventArguments={},
nt.PieChartIChartEventArguments={},nt.PieChartIDataObject={id:{
t:0},name:{t:0},nameLegend:{t:0},style:{t:5,u:0,c:function(){
return nt.PieChartSettingsSliceStyle}},subvalues:{t:6,u:0,b:[{
t:5,u:0,c:function(){return nt.PieChartIDataObject}}]},value:{
t:1}},nt.PieChartIDataObjectCommon={id:{t:0},name:{t:0},subvalues:{
t:6,u:0,b:[{t:5,u:0,c:function(){return nt.PieChartIDataObject;
}}]}},nt.PieChartIDataObjectRoot={afterSum:{t:1},beforeSum:{t:1
},id:{t:0},limit:{t:1},name:{t:0},offset:{t:1},subvalues:{t:6,
u:0,b:[{t:5,u:0,c:function(){return nt.PieChartIDataObject}}]
},sum:{t:1}},nt.PieChartSettings={advanced:{t:5,u:0,c:function(){
return nt.PieChartSettingsAdvanced},x:function(){return i.PieChart.SettingsAdvanced;
}},data:{t:6,u:4,b:[{t:5,u:0,c:function(){return nt.PieChartSettingsData;
},x:function(){return i.PieChart.SettingsData}}]},events:{t:5,
u:0,c:function(){return nt.PieChartSettingsEvents},x:function(){
return i.PieChart.SettingsEvents}},filters:{t:5,u:0,c:function(){
return{allowZeroValues:{t:9},sliceFilter:{t:4}}}},icons:{t:5,
u:0,c:function(){return{autohideWhenTooSmall:{t:9},placement:{
t:0,d:6},sizeExtent:{t:12,b:[{t:1},{t:1}]}}}},info:{t:5,u:0,c:function(){
return{contentsFunction:{t:4},enabled:{t:9}}}},interaction:{t:5,
u:0,c:function(){return nt.PieChartSettingsInteraction},x:function(){
return i.PieChart.SettingsInteraction}},labels:{t:5,u:0,c:function(){
return nt.PieChartSettingsLabels},x:function(){return i.PieChart.SettingsLabels;
}},legend:{t:5,u:0,c:function(){return nt.PieChartSettingsLegend;
},x:function(){return i.PieChart.SettingsLegend}},localization:{
t:5,u:0,c:function(){return nt.PieChartSettingsLocalization},
x:function(){return i.PieChart.SettingsLocalization}},navigation:{
t:5,u:0,c:function(){return{initialDrilldown:{t:6,u:0,b:[{t:0
}]},initialOffset:{t:1,d:0}}}},pie:{t:5,u:0,c:function(){return{
adaptiveRadius:{t:9},backgroundHoveredStyle:{t:5,u:0,c:function(){
return nt.PieChartSettingsPieStyle}},backgroundStyle:{t:5,u:0,
c:function(){return nt.PieChartSettingsPieStyle}},centerMargin:{
t:1,d:0},depth:{t:1,d:0},endAngle:{t:1},innerRadius:{t:1},innerRadiusWhenDrilldown:{
t:1},margin:{t:1},noDataStyle:{t:5,u:0,c:function(){return nt.PieChartSettingsPieStyle;
}},outerMargin:{t:1},radius:{t:1},rotationSpeed:{t:1},showInnerPies:{
t:9},showInnerPiesExport:{t:9},startAngle:{t:1},style:{t:5,u:0,
c:function(){return nt.PieChartSettingsPieStyle}},styleFunction:{
t:4},theme:{t:0,d:6},x:{t:1},y:{t:1}}}},slice:{t:5,u:0,c:function(){
return{backgroundActiveStyle:{t:5,u:0,c:function(){return{brightness:{
t:1}}}},backgroundStyle:{t:5,u:0,c:function(){return{fillColor:{
t:0},fillColor2:{t:0,d:3}}}},connectorStyle:{t:5,u:0,c:function(){
return nt.BaseSettingsLineStyle}},expandableMarkStyle:{t:5,u:0,
c:function(){return{distance:{t:1},lineColor:{t:0},lineDash:{
t:6,u:0,b:[{t:1}]},lineWidth:{t:1}}}},hoverStyle:{t:5,u:0,c:function(){
return nt.PieChartSettingsSliceStyle}},margin:{t:1},minFraction:{
t:1},othersStyle:{t:5,u:0,c:function(){return{fillColor:{t:0},
lineDecoration:{t:0,d:6}}}},previousStyle:{t:5,u:0,c:function(){
return{fillColor:{t:0},lineDecoration:{t:0,d:6}}}},selectedStyle:{
t:5,u:0,c:function(){return nt.PieChartSettingsSliceStyle}},style:{
t:5,u:0,c:function(){return nt.PieChartSettingsSliceStyle}},styleFunction:{
t:4}}}},theme:{t:5,c:function(){return nt.PieChartSettings},x:function(){
return i.PieChart.Settings},y:!0},toolbar:{t:5,u:0,c:function(){
return nt.BaseSettingsToolbar},x:function(){return i.Base.SettingsToolbar;
}}},nt.PieChartSettingsAdvanced={backAlwaysVisible:{t:9},backImage:{
t:0,d:4},backImageBackground:{t:0},iconMinSize:{t:1},initialAnimation:{
t:9},labelInsideTreshold:{t:1,d:0},renderQuality:{t:1,d:0}},nt.PieChartSettingsData={
autoCategories:{t:6,u:0,b:[{t:7,b:[{t:4},{t:0}]}]},dataFunction:{
t:4},itemsToLoad:{t:1,d:0},partialLoad:{t:9},preloaded:{t:5,c:function(){
return nt.PieChartIDataObjectRoot}},sortField:{t:7,u:0,b:[{t:4
},{t:6,u:0,b:[{t:0}]},{t:0}]}},nt.PieChartSettingsEvents={onPieChange:{
t:4},onPieReadyStateChanged:{t:4}},nt.PieChartSettingsInteraction={
animation:{t:5,u:0,c:function(){return{hoverDuration:{t:1,d:0
},scrollDuration:{t:1,d:0}}}},coverCenter:{t:9},mode:{t:0,d:6
},others:{t:5,u:0,c:function(){return{centerGoesToPrevious:{t:9
},enabled:{t:9},maxOthersFraction:{t:1},maxSlicesVisible:{t:1,
d:0},minSliceFraction:{t:1},minSlices:{t:1},navigationFraction:{
t:1}}}},scrolling:{t:5,u:0,c:function(){return{enabled:{t:9}};
}},selection:{t:5,u:0,c:function(){return{enabled:{t:9},maxSwipeDistance:{
t:1},partialSwipe:{t:9},swipe:{t:9},swipeSensitivity:{t:1},tolerance:{
t:1}}}}},nt.PieChartSettingsLabels={angle:{t:1,d:0},connectorLength:{
t:1,d:0},connectors:{t:9},enabled:{t:9},insideLabel:{t:0,d:6},
insideLabelVisibilityFraction:{t:1},interLabelSpacing:{t:1},placement:{
t:0,d:6}},nt.PieChartSettingsLegend={marker:{t:5,u:0,c:function(){
return nt.PieChartSettingsLegendMarker},x:function(){return i.PieChart.SettingsLegendMarker;
}},showOthers:{t:9}},nt.PieChartSettingsLegendMarker={shape:{
t:7,d:6,b:[{t:0}]}},nt.PieChartSettingsLocalization={othersLabel:{
t:0},previousLabel:{t:0}},nt.PieChartSettingsPieStyle={background:{
t:9},brightness:{t:1},colorDistribution:{t:0,d:6},fillColor:{
t:0,d:3},sliceColors:{t:6,u:0,b:[{t:0,d:3}]}},nt.PieChartSettingsSliceStyle={
brightness:{t:1},cutoutDistance:{t:1},expandable:{t:9},fillColor:{
t:0,d:3},icon:{t:0,d:4},insideLabel:{t:5,u:0,c:function(){return nt.BaseSettingsLabelStyle;
}},label:{t:5,u:0,c:function(){return nt.BaseSettingsLabelStyle;
}},lineBrightness:{t:1,d:0},lineColor:{t:0,d:3},lineDash:{t:6,
u:0,b:[{t:1}]},lineWidth:{t:1,d:0},url:{t:0,d:5}},nt.TimeChartIChartEventArguments={},
nt.TimeChartIDataObject={data:{t:6,u:0,b:[{t:6,u:0,b:[{t:7,b:[{
t:1},{t:0}]}]}]},dataLimitFrom:{t:7,b:[{t:1},{t:0}]},dataLimitTo:{
t:7,b:[{t:1},{t:0}]},from:{t:7,b:[{t:1},{t:0}]},timeZone:{t:0
},to:{t:7,b:[{t:1},{t:0}]},unit:{t:0},values:{t:6,u:0,b:[{t:7,
u:0,b:[{t:18},{t:17},{t:16},{t:15},{t:6,u:0,b:[{t:7,b:[{t:1},{
t:0}]}]}]}]}},nt.TimeChartSettings={advanced:{t:5,u:0,c:function(){
return nt.TimeChartSettingsAdvanced},x:function(){return i.TimeChart.SettingsAdvanced;
}},area:{t:5,u:0,c:function(){return nt.TimeChartSettingsArea;
},x:function(){return i.TimeChart.SettingsArea}},chartTypes:{
t:5,u:0,c:function(){return{candlestick:{t:5,u:0,c:function(){
return nt.TimeChartSettingsSeriesCandleStick},x:function(){return i.TimeChart.SettingsSeriesCandleStick;
},y:!0},columns:{t:5,u:0,c:function(){return nt.TimeChartSettingsSeriesColumns;
},x:function(){return i.TimeChart.SettingsSeriesColumns},y:!0
},line:{t:5,u:0,c:function(){return nt.TimeChartSettingsSeriesLines;
},x:function(){return i.TimeChart.SettingsSeriesLines},y:!0}};
}},currentTime:{t:5,u:0,c:function(){return nt.TimeChartSettingsCurrentTime;
},x:function(){return i.TimeChart.SettingsCurrentTime}},data:{
t:6,u:4,b:[{t:5,u:0,c:function(){return nt.TimeChartSettingsData;
},x:function(){return i.TimeChart.SettingsData}}]},events:{t:5,
u:0,c:function(){return nt.TimeChartSettingsEvents},x:function(){
return i.TimeChart.SettingsEvents}},interaction:{t:5,u:0,c:function(){
return nt.TimeChartSettingsInteraction},x:function(){return i.TimeChart.SettingsInteraction;
}},localization:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalization;
},x:function(){return i.TimeChart.SettingsLocalization}},milestones:{
t:6,u:0,b:[{t:5,u:0,c:function(){return nt.TimeChartSettingsMarker;
},x:function(){return i.TimeChart.SettingsMarker}}]},navigation:{
t:5,u:0,c:function(){return{followAnchor:{t:9},initialDisplayAnchor:{
t:7,b:[{t:0},{t:1}]},initialDisplayPeriod:{t:0},initialDisplayUnit:{
t:0}}}},series:{t:6,u:4,b:[{t:5,u:0,c:function(){return nt.TimeChartSettingsSeries;
},x:function(){return i.TimeChart.SettingsSeries},y:!0}]},seriesDefault:{
t:5,u:0,c:function(){return nt.TimeChartSettingsSeries},x:function(){
return i.TimeChart.SettingsSeries},y:!0},theme:{t:5,c:function(){
return nt.TimeChartSettings},x:function(){return i.TimeChart.Settings;
},y:!0},timeAxis:{t:5,u:0,c:function(){return nt.TimeChartSettingsTimeAxis;
},x:function(){return i.TimeChart.SettingsTimeAxis}},toolbar:{
t:5,u:0,c:function(){return nt.TimeChartSettingsToolbar},x:function(){
return i.TimeChart.SettingsToolbar}}},nt.TimeChartSettingsAdvanced={
dataUpdateInterval:{t:1,d:0},maxUnitsToDisplay:{t:1},timeUpdateInterval:{
t:1,d:0}},nt.TimeChartSettingsArea={displayPeriods:{t:6,u:0,b:[{
t:5,u:0,c:function(){return{unit:{t:0}}}}]},displayUnits:{t:6,
u:0,b:[{t:5,u:0,c:function(){return{unit:{t:0},name:{t:0}}}}]
},style:{t:5,u:0,c:function(){return nt.TimeChartSettingsAreaStyle;
},x:function(){return i.TimeChart.SettingsAreaStyle}}},nt.TimeChartSettingsAreaDisplayPeriod={
displayAnchor:{t:7,b:[{t:0},{t:1}]},displayPeriod:{t:0},displayUnit:{
t:0},name:{t:0}},nt.TimeChartSettingsAreaStyle={markerText:{t:5,
u:0,c:function(){return nt.BaseSettingsTextStyle}},selection:{
t:5,u:0,c:function(){return nt.TimeChartSettingsAreaStyleSelection;
},x:function(){return i.TimeChart.SettingsAreaStyleSelection}
},selectionLabel:{t:5,u:0,c:function(){return nt.BaseSettingsTextStyle;
}}},nt.TimeChartSettingsAreaStyleSelection={behindSeries:{t:9
},fillColor:{t:0},lineColor:{t:0},lineWidth:{t:1}},nt.TimeChartSettingsCurrentTime={
align:{t:7,b:[{t:0}]},label:{t:5,u:0,c:function(){return nt.BaseSettingsLabelStyle;
}},showTime:{t:9},side:{t:7,b:[{t:0}]},style:{t:5,u:0,c:function(){
return nt.BaseSettingsLineStyle}}},nt.TimeChartSettingsData={
cacheSize:{t:1,d:0},dataFunction:{t:4},minimizeRequests:{t:9},
prefetchRatio:{t:1},preloaded:{t:5,c:function(){return nt.TimeChartIDataObject;
}},requestMaxUnits:{t:1,d:0},stringTimestampFormat:{t:7,u:0,b:[{
t:6,u:0,b:[{t:0}]},{t:0}]},suppressWarnings:{t:9},timeZoneOffset:{
t:7,b:[{t:1},{t:0}]},timestampInSeconds:{t:9},units:{t:6,u:0,
b:[{t:0}]},url:{t:0,d:5},urlByUnit:{t:8,u:0,b:[{t:0}]},useSmallerUnitCache:{
t:9}},nt.TimeChartSettingsEvents={onTimeChange:{t:4},selectionChangeDuringInteraction:{
t:9}},nt.TimeChartSettingsInteraction={scrolling:{t:5,u:0,c:function(){
return nt.TimeChartSettingsInteractionScrolling},x:function(){
return i.TimeChart.SettingsInteractionScrolling}},selection:{
t:5,u:0,c:function(){return nt.TimeChartSettingsInteractionSelection;
},x:function(){return i.TimeChart.SettingsInteractionSelection;
}},snapMode:{t:0,d:6},zooming:{t:5,u:0,c:function(){return nt.TimeChartSettingsInteractionZooming;
},x:function(){return i.TimeChart.SettingsInteractionZooming}
}},nt.TimeChartSettingsInteractionScrolling={limitFrom:{t:7,b:[{
t:0},{t:1}]},limitMode:{t:0,d:6},limitTo:{t:7,b:[{t:0},{t:1}]
},overscrollProportion:{t:1}},nt.TimeChartSettingsInteractionSelection={
clearOnRightClick:{t:9},enabled:{t:9},moveByDragging:{t:9},resizeSensitivity:{
t:1},resizeTolerance:{t:1},tolerance:{t:1}},nt.TimeChartSettingsInteractionZooming={
click:{t:9},enabled:{t:9}},nt.TimeChartSettingsLocalization={
calendar:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationCalendar;
}},determiningDataBounds:{t:0},holidayWeekdays:{t:6,u:0,b:[{t:1,
d:0}]},infoDates:{t:5,u:0,c:function(){return{fullTimeFormats:{
t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}},majorTimeFormats:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}},minorTimeFormats:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}}}}},loadingLabel:{t:0},markerDates:{t:5,u:0,c:function(){return{
timeFormats:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}}}}},timeAxisDates:{t:5,u:0,c:function(){return{majorLabelFullTimeFormats:{
t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}},majorLabelTimeFormats:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}},minorLabelTimeFormats:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}}}}},timeUnitsNames:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}},timeUnitsNamesPlural:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationTimeUnits;
}},toolbar:{t:5,u:0,c:function(){return nt.TimeChartSettingsLocalizationToolbar;
},x:function(){return i.TimeChart.SettingsLocalizationToolbar;
}}},nt.TimeChartSettingsLocalizationCalendar={months:{t:6,u:0,
b:[{t:0}]},monthsShort:{t:6,u:0,b:[{t:0}]},parentLocale:{t:0},
week:{t:5,u:0,c:function(){return{dow:{t:1,d:0},doy:{t:1}}}},
weekdays:{t:6,u:0,b:[{t:0}]},weekdaysMin:{t:6,u:0,b:[{t:0}]},
weekdaysShort:{t:6,u:0,b:[{t:0}]}},nt.TimeChartSettingsLocalizationTimeUnits={
M:{t:0},d:{t:0},h:{t:0},m:{t:0},ms:{t:0},s:{t:0},w:{t:0},y:{t:0
}},nt.TimeChartSettingsLocalizationToolbar={customPeriod:{t:0
},periodDropdownTitle:{t:0},unavailableUnitTitle:{t:0},unitDropdownTitle:{
t:0},zoomoutButton:{t:0},zoomoutTitle:{t:0}},nt.TimeChartSettingsMarker={
align:{t:7,b:[{t:0}]},enabled:{t:9},label:{t:5,u:0,c:function(){
return nt.BaseSettingsLabelStyle}},overrideLimits:{t:9},showTime:{
t:9},side:{t:7,b:[{t:0}]},style:{t:5,u:0,c:function(){return nt.BaseSettingsLineStyle;
}},time:{t:1,d:0}},nt.TimeChartSettingsSeries={data:{t:5,u:0,
c:function(){return nt.TimeChartSettingsSeriesData},x:function(){
return i.TimeChart.SettingsSeriesData}}},nt.TimeChartSettingsSeriesCandleStick={
data:{t:5,u:0,c:function(){return nt.TimeChartSettingsSeriesCandleStickData;
},x:function(){return i.TimeChart.SettingsSeriesCandleStickData;
}}},nt.TimeChartSettingsSeriesCandleStickData={close:{t:1},high:{
t:1},low:{t:1},open:{t:1}},nt.TimeChartSettingsSeriesColumns={
data:{t:5,u:0,c:function(){return nt.TimeChartSettingsSeriesData;
},x:function(){return i.TimeChart.SettingsSeriesData}}},nt.TimeChartSettingsSeriesData={
countIndex:{t:1},index:{t:1,d:0}},nt.TimeChartSettingsSeriesLines={
data:{t:5,u:0,c:function(){return nt.TimeChartSettingsSeriesData;
},x:function(){return i.TimeChart.SettingsSeriesData}},style:{
t:5,u:0,c:function(){return nt.TimeChartSettingsSeriesLinesStyle;
},x:function(){return i.TimeChart.SettingsSeriesLinesStyle}}},
nt.TimeChartSettingsSeriesLinesStyle={markerStyleFunction:{t:4
}},nt.TimeChartSettingsTimeAxis={enabled:{t:9},maxUnitWidth:{
t:1},minUnitWidth:{t:1},miniTimeRuler:{t:9},showHolidays:{t:9
},style:{t:5,u:0,c:function(){return{dateHolidays:{t:5,u:0,c:function(){
return nt.BaseSettingsBackgroundStyle}},dateLighten:{t:5,u:0,
c:function(){return{fillColor:{t:0}}}},majorTimeBalloonStyle:{
t:5,u:0,c:function(){return nt.BaseSettingsBackgroundStyle}},
majorTimeLabel:{t:5,u:0,c:function(){return nt.BaseSettingsTextStyle;
}},minorTimeBalloonStyle:{t:5,u:0,c:function(){return nt.BaseSettingsBackgroundStyle;
}},minorTimeLabel:{t:5,u:0,c:function(){return nt.BaseSettingsTextStyle;
}},minorTimeRuler:{t:5,u:0,c:function(){return nt.BaseSettingsLineStyle;
}},showMajorTimeBalloons:{t:9},showMinorTimeBalloons:{t:9},vgrid:{
t:5,u:0,c:function(){return nt.BaseSettingsLineStyle}}}}},timeZone:{
t:0},timeZoneOffset:{t:7,b:[{t:1},{t:0}]},unitSizePolicy:{t:0,
d:6},vgrid:{t:9}},nt.TimeChartSettingsToolbar={displayPeriod:{
t:9},displayUnit:{t:9},enabled:{t:9},items:{t:6,u:0,b:[{t:7,u:0,
b:[{t:5,u:0,c:function(){return nt.BaseSettingsToolbarItem},x:function(){
return i.Base.SettingsToolbarItem}},{t:0}]}]},logScale:{t:9},
periods:{t:6,u:0,b:[{t:5,u:0,c:function(){return nt.TimeChartSettingsAreaDisplayPeriod;
},x:function(){return i.TimeChart.SettingsAreaDisplayPeriod}}]
},zoomOut:{t:9},zoomOutFunction:{t:4}},r.SettingsMapping=nt,a(nt.BaseIChartErrorEventArguments,nt.BaseIChartEventArguments),
a(nt.BaseIChartSettingsChangeEventArguments,nt.BaseIChartEventArguments),
a(nt.BaseIDataErrorResponse,nt.BaseIDataObjectBase),a(nt.BaseSettingsBackgroundStyle,nt.BaseSettingsLineStyle),
a(nt.BaseSettingsAdvancedStyleMessageBackground,nt.BaseSettingsBackgroundStyle),
a(nt.BaseSettingsLegendPanel,nt.BaseSettingsChartPanel),a(nt.BaseSettingsToolbarItem,nt.BaseSettingsToolbarItemBase),
a(nt.FacetChartIChartEventArguments,nt.BaseIChartEventArguments),
a(nt.FacetChartIChartClickEventArguments,nt.FacetChartIChartEventArguments),
a(nt.FacetChartIDataObjectCommon,nt.BaseIDataObjectBase),a(nt.FacetChartIDataObject,nt.FacetChartIDataObjectCommon),
a(nt.FacetChartIDataObjectRoot,nt.FacetChartIDataObjectCommon),
a(nt.FacetChartIDataObjectRoot,nt.BaseIDataErrorResponse),a(nt.LinearChartSettings,nt.BaseSettings),
a(nt.FacetChartSettings,nt.LinearChartSettings),a(nt.LinearChartSettingsArea,nt.BaseSettingsArea),
a(nt.FacetChartSettingsArea,nt.LinearChartSettingsArea),a(nt.LinearChartSettingsAreaStyle,nt.BaseSettingsAreaStyle),
a(nt.FacetChartSettingsAreaStyle,nt.LinearChartSettingsAreaStyle),
a(nt.PieChartSettingsData,nt.BaseSettingsData),a(nt.FacetChartSettingsData,nt.PieChartSettingsData),
a(nt.FacetChartSettingsFacetAxisLabels,nt.BaseSettingsLabelStyle),
a(nt.FacetChartSettingsFacetAxisTitleStyle,nt.BaseSettingsLabelStyle),
a(nt.LinearChartSettingsSeriesColumnsStyle,nt.LinearChartSettingsSeriesStyle),
a(nt.FacetChartSettingsSeriesColumnsStyle,nt.LinearChartSettingsSeriesColumnsStyle),
a(nt.FacetChartSettingsFacetStyle,nt.FacetChartSettingsSeriesColumnsStyle),
a(nt.LinearChartSettingsInteraction,nt.BaseSettingsInteraction),
a(nt.FacetChartSettingsInteraction,nt.LinearChartSettingsInteraction),
a(nt.FacetChartSettingsSeries,nt.LinearChartSettingsSeries),a(nt.LinearChartSettingsSeriesColumns,nt.LinearChartSettingsSeries),
a(nt.FacetChartSettingsSeriesColumns,nt.LinearChartSettingsSeriesColumns),
a(nt.FacetChartSettingsSeriesData,nt.LinearChartSettingsSeriesData),
a(nt.LinearChartSettingsSeriesLines,nt.LinearChartSettingsSeries),
a(nt.FacetChartSettingsSeriesLines,nt.LinearChartSettingsSeriesLines),
a(nt.LinearChartSettingsSeriesLinesStyle,nt.LinearChartSettingsSeriesStyle),
a(nt.FacetChartSettingsSeriesLinesStyle,nt.LinearChartSettingsSeriesLinesStyle),
a(nt.FacetChartSettingsToolbar,nt.BaseSettingsToolbar),a(nt.ItemsChartIDataObjectBase,nt.BaseIDataErrorResponse),
a(nt.ItemsChartIDataObjectNode,nt.ItemsChartIDataObjectBase),
a(nt.GeoChartIGeoDataObjectNode,nt.ItemsChartIDataObjectNode),
a(nt.GeoChartIAggregationDataObjectNode,nt.GeoChartIGeoDataObjectNode),
a(nt.GeoChartIDataObject,nt.BaseIDataErrorResponse),a(nt.ItemsChartIDataObjectLink,nt.ItemsChartIDataObjectBase),
a(nt.GeoChartIGeoDataObjectLink,nt.ItemsChartIDataObjectLink),
a(nt.ItemsChartSettings,nt.BaseSettings),a(nt.GeoChartSettings,nt.ItemsChartSettings),
a(nt.GeoChartSettingsAggregatedShapeStyle,nt.BaseSettingsBackgroundStyle),
a(nt.GeoChartSettingsArea,nt.BaseSettingsArea),a(nt.GeoChartSettingsAreaStyle,nt.BaseSettingsAreaStyle),
a(nt.ItemsChartSettingsData,nt.BaseSettingsData),a(nt.GeoChartSettingsData,nt.ItemsChartSettingsData),
a(nt.ItemsChartSettingsInteraction,nt.BaseSettingsInteraction),
a(nt.GeoChartSettingsInteraction,nt.ItemsChartSettingsInteraction),
a(nt.GeoChartSettingsInteractionZooming,nt.ItemsChartSettingsInteractionZooming),
a(nt.GeoChartSettingsLayerOverlay,nt.GeoChartSettingsLayerBase),
a(nt.GeoChartSettingsLayerAggregated,nt.GeoChartSettingsLayerOverlay),
a(nt.GeoChartSettingsLayerCharts,nt.GeoChartSettingsLayerOverlay),
a(nt.GeoChartSettingsLayerItems,nt.GeoChartSettingsLayerBase),
a(nt.GeoChartSettingsLayerShapes,nt.GeoChartSettingsLayerBase),
a(nt.ItemsChartSettingsNodesLayerStyle,nt.ItemsChartSettingsItemsLayerStyle),
a(nt.GeoChartSettingsNodesLayerStyle,nt.ItemsChartSettingsNodesLayerStyle),
a(nt.GeoChartSettingsShapesLayerNodeStyle,nt.ItemsChartSettingsNodeStyle),
a(nt.GeoChartSettingsShapesLayerStyle,nt.GeoChartSettingsNodesLayerStyle),
a(nt.ItemsChartIChartEventArguments,nt.BaseIChartEventArguments),
a(nt.ItemsChartIChartClickEventArguments,nt.ItemsChartIChartEventArguments),
a(nt.ItemsChartSettingsAdvanced,nt.BaseSettingsAdvanced),a(nt.ItemsChartSettingsAuraStyle,nt.BaseSettingsBackgroundStyle),
a(nt.ItemsChartSettingsItemsLayerLabelStyle,nt.BaseSettingsLabelStyle),
a(nt.ItemsChartSettingsItemsLayerItemStyle,nt.ItemsChartSettingsItemsLayerLabelStyle),
a(nt.ItemsChartSettingsItemsLayerLinkLabelStyle,nt.ItemsChartSettingsItemsLayerLabelStyle),
a(nt.ItemsChartSettingsLinkClass,nt.ItemsChartSettingsItemClass),
a(nt.ItemsChartSettingsLinkItem,nt.ItemsChartSettingsItemsLayerItemStyle),
a(nt.ItemsChartSettingsLinkMenu,nt.ItemsChartSettingsMenu),a(nt.ItemsChartSettingsNodeClass,nt.ItemsChartSettingsItemClass),
a(nt.ItemsChartSettingsNodeItem,nt.ItemsChartSettingsItemsLayerItemStyle),
a(nt.ItemsChartSettingsNodeMenu,nt.ItemsChartSettingsMenu);var rt=nt.LinearChartSettingsEvents;
nt.LinearChartSettingsEvents=function(t,e){var i=rt(t,e);return a(i,nt.BaseSettingsEvents(t,e)),
i},a(nt.LinearChartSettingsLegend,nt.BaseSettingsLegend),a(nt.LinearChartSettingsLegendAdvanced,nt.BaseSettingsLegendAdvanced),
a(nt.LinearChartSettingsLegendMarker,nt.BaseSettingsLegendMarker),
a(nt.LinearChartSettingsLocalization,nt.BaseSettingsLocalization),
a(nt.LinearChartSettingsLocalizationToolbar,nt.BaseSettingsLocalizationToolbar),
a(nt.LinearChartSettingsSeriesCandleStick,nt.LinearChartSettingsSeries),
a(nt.LinearChartSettingsSeriesCandleStickStyle,nt.LinearChartSettingsSeriesStyle),
a(nt.LinearChartSettingsValueAxisBaseLineStyle,nt.BaseSettingsLineStyle),
a(nt.LinearChartSettingsValueAxisTitleStyle,nt.BaseSettingsLabelStyle),
a(nt.NetChartBarSettingsLocalizationToolbar,nt.BaseSettingsLocalizationToolbar),
a(nt.NetChartBarSettingsToolbar,nt.BaseSettingsToolbar),a(nt.NetChartIChartEventArguments,nt.ItemsChartIChartEventArguments),
a(nt.NetChartIChartClickEventArguments,nt.NetChartIChartEventArguments),
a(nt.NetChartIDataObject,nt.BaseIDataErrorResponse),a(nt.NetChartIDataObjectLink,nt.ItemsChartIDataObjectLink),
a(nt.NetChartIDataObjectNode,nt.ItemsChartIDataObjectNode),a(nt.NetChartSettings,nt.ItemsChartSettings),
a(nt.NetChartSettingsArea,nt.BaseSettingsArea),a(nt.NetChartSettingsData,nt.ItemsChartSettingsData),
a(nt.NetChartSettingsEvents,nt.BaseSettingsEvents(nt.NetChartIChartEventArguments,nt.NetChartIChartClickEventArguments)),
a(nt.NetChartSettingsInteraction,nt.ItemsChartSettingsInteraction),
a(nt.NetChartSettingsInteractionSelection,nt.ItemsChartSettingsInteractionSelection),
a(nt.NetChartSettingsInteractionZooming,nt.ItemsChartSettingsInteractionZooming),
a(nt.NetChartSettingsLegend,nt.BaseSettingsLegend),a(nt.NetChartSettingsLegendAdvanced,nt.BaseSettingsLegendAdvanced),
a(nt.NetChartSettingsLocalization,nt.BaseSettingsLocalization),
a(nt.NetChartSettingsStyle,nt.ItemsChartSettingsNodesLayerStyle),
a(nt.PieChartIChartEventArguments,nt.BaseIChartEventArguments),
a(nt.PieChartIChartClickEventArguments,nt.PieChartIChartEventArguments),
a(nt.PieChartIDataObjectCommon,nt.BaseIDataObjectBase),a(nt.PieChartIDataObject,nt.PieChartIDataObjectCommon),
a(nt.PieChartIDataObjectRoot,nt.PieChartIDataObjectCommon),a(nt.PieChartIDataObjectRoot,nt.BaseIDataErrorResponse),
a(nt.PieChartSettings,nt.BaseSettings),a(nt.PieChartSettingsAdvanced,nt.BaseSettingsAdvanced),
a(nt.PieChartSettingsEvents,nt.BaseSettingsEvents(nt.PieChartIChartEventArguments,nt.PieChartIChartClickEventArguments)),
a(nt.PieChartSettingsInteraction,nt.BaseSettingsInteraction),
a(nt.PieChartSettingsLegend,nt.BaseSettingsLegend),a(nt.PieChartSettingsLegendMarker,nt.BaseSettingsLegendMarker),
a(nt.PieChartSettingsLocalization,nt.BaseSettingsLocalization),
a(nt.TimeChartIChartEventArguments,nt.BaseIChartEventArguments),
a(nt.TimeChartIDataObject,nt.BaseIDataErrorResponse),a(nt.TimeChartSettings,nt.LinearChartSettings),
a(nt.TimeChartSettingsAdvanced,nt.BaseSettingsAdvanced),a(nt.TimeChartSettingsArea,nt.LinearChartSettingsArea),
a(nt.TimeChartSettingsAreaStyle,nt.LinearChartSettingsAreaStyle),
a(nt.TimeChartSettingsCurrentTime,nt.TimeChartSettingsMarker),
a(nt.TimeChartSettingsData,nt.BaseSettingsData),a(nt.TimeChartSettingsEvents,nt.LinearChartSettingsEvents(nt.TimeChartIChartEventArguments,nt.TimeChartIChartEventArguments)),
a(nt.TimeChartSettingsInteraction,nt.LinearChartSettingsInteraction),
a(nt.TimeChartSettingsInteractionScrolling,nt.LinearChartSettingsInteractionScrolling),
a(nt.TimeChartSettingsInteractionZooming,nt.LinearChartSettingsInteractionZooming),
a(nt.TimeChartSettingsLocalization,nt.LinearChartSettingsLocalization),
a(nt.TimeChartSettingsLocalizationToolbar,nt.LinearChartSettingsLocalizationToolbar),
a(nt.TimeChartSettingsSeries,nt.LinearChartSettingsSeries),a(nt.TimeChartSettingsSeriesCandleStick,nt.LinearChartSettingsSeriesCandleStick),
a(nt.TimeChartSettingsSeriesData,nt.LinearChartSettingsSeriesData),
a(nt.TimeChartSettingsSeriesCandleStickData,nt.TimeChartSettingsSeriesData),
a(nt.TimeChartSettingsSeriesColumns,nt.LinearChartSettingsSeriesColumns),
a(nt.TimeChartSettingsSeriesLines,nt.LinearChartSettingsSeriesLines),
a(nt.TimeChartSettingsSeriesLinesStyle,nt.LinearChartSettingsSeriesLinesStyle),
a(nt.TimeChartSettingsToolbar,nt.BaseSettingsToolbar);var st=function(){
function t(){}return t.mergeDefaultValues=function(e,i,n,r,s,a){
var o=i?i.type:null;if(!e||0===e.length){if(!o)return[];e=[{type:o
}]}for(var l=[],h=0;h<e.length;h++){var u=e[h],c=a+"["+h+"]";if(d.isObjectOrArray(u)){
var p=u.type||o;if(!p)throw new Error("`type` property must be specified in the settings for value: "+c);
var f=r(u,p),g=n[p];i&&(delete i.type,t.updateRecursive(f,i,s(f,i),{},c),
i.type=o),g&&t.updateRecursive(f,g,s(f,g),{},c),t.updateRecursive(f,u,s(f,u),{},c),
l.push(f)}}return l},t.updateRecursive=function(t,e,i,n,r){if(void 0===r&&(r=""),
!t)throw new Error("Cannot update settings path '"+r+"' because the target object is not defined.");
if(e)for(var s in e)if(e.hasOwnProperty(s)){var a=e[s],o=(r.length?r+".":"")+s,l=this.findPropertyConfiguration(s,i,o);
null!==l&&void 0!==a&&this.copyValue(t,s,a,l,n,o)}},t.copyValueMergeByID=function(t,e,i,n,r,s){
if(null!=i){if(6!==n.t)throw new Error("Property '"+s+"' is set to use merge-by-ID update mode which is only supported on arrays.");
if(this.replacingSettings)return this.copyValueRecursive(t,e,i,n,r,s);
var a=t[e];null==a&&(t[e]=a=[]);for(var o={},l=0;l<a.length;l++)o[a[l].id]=a[l];
for(var h=0;h<i.length;h++){var u=i[h];if(null!=u){u.id||(u.id=d.getIdentifierStr());
var c=o[u.id];r[e]||(r[e]={}),this.copyValue(o,u.id,u,n.b[0],r[e],s+"["+u.id+"]"),
c||a.push(o[u.id])}}}},t.retrieveOwnMethod=function(t,e){if(!t)return null;
var i=t[e],n=t.__baseType;return n&&n[e]===i?null:i},t.copyValueRecursive=function(t,e,i,n,r,s){
if(null!=i){var a=t[e];if(n.c){var o=n.x?n.x():null,l=this.retrieveOwnMethod(o,"getMapping"),h=l?l(a,i):n.c();
if(null==a){if(!o||n.y||this._ignoringCtor)a={};else{var u=this.retrieveOwnMethod(o,"createInstance");
a=u?u(i):new o}t[e]=a}if(n.y)try{this._ignoringCtor++,this.updateRecursive(a,i,h,r[e]={},s);
}finally{this._ignoringCtor--}else this.updateRecursive(a,i,h,r[e]={},s);
}else if(6===n.t)t[e]=a=[],this.copyArray(a,i,n.b[0],r[e]=[],s);else{
if(8!==n.t)throw new Error("Property '"+s+"' is set to use recursive update but does not define target object mapping.");
(null==a||this.replacingSettings)&&(t[e]=a={}),this.copyDictionary(a,i,n.b[0],r[e]={},s);
}}},t.copyValue=function(t,e,i,n,r,s){if(void 0===i)return delete t[e],
void(r[e]=!0);var a=this.ensurePropertyType(i,n,s);if(a){i=a.value,
n=a.configuration||n;var o=t[e];if(1===n.u||void 0===n.u)o!==i&&(r[e]=i,
t[e]=i);else if(2===n.u)i=JSON.parse(JSON.stringify(i)),r[e]=i,
t[e]=i;else if(4===n.u)this.copyValueMergeByID(t,e,i,n,r,s);else if(3===n.u){
if(null!=i){if(6!==n.t)throw new Error("Property '"+s+"' is set to use concat update which is only supported for arrays.");
o&&!this.replacingSettings||(t[e]=o=[]),this.copyArray(o,i,n.b[0],r[e]=[],s);
}}else{if(0!==n.u)throw new Error("Property '"+s+"' does not have an update mode defined in the settings mapping or it is not implemented.");
this.copyValueRecursive(t,e,i,n,r,s)}}},t.copyDictionary=function(t,e,i,n,r){
for(var s=Object.keys(e),a=0;a<s.length;a++){var o=s[a],l={};this.copyValue(t,o,e[o],i,l,r+"."+o),
d.hasProperties(l)&&(n[o]=l)}},t.copyArray=function(t,e,i,n,r){
for(var s=0;s<e.length;s++)this.copyValue(t,t.length,e[s],i,n,r+"["+s+"]");
},t.ensurePropertyType=function(t,e,i,n){if(void 0===n&&(n=!1),
null==t)return{value:t};var r=null,s=null,a=void 0,o=null;switch(e.t){
case 0:t instanceof String&&(t=t.valueOf()),d.isString(t)||(r="String");
break;case 1:if(t instanceof Number&&(t=t.valueOf()),0===e.d){
a=parseFloat(t);var l=Math.round(a);if(isNaN(a))r="Integer";else if(l!==a){
var h=Math.abs(l-a);n||d.warn("Settings value '"+i+"' expected to be an Integer but contains a decimal point: "+a+"."),
h<1e-8&&(a=l)}}else a=parseFloat(t),isNaN(a)&&(r="Float");break;
case 3:d.isString(t)?(a=document.getElementById(t),a||(s="the property expects either a reference to a DOM element or a string containing the ID of the element. There is no element with the given ID '"+t+"'.")):d.isDomObject(t)||(s="the property expects either a reference to a DOM element or a string containing the ID of the element.");
break;case 4:d.isFunction(t)||(r="Function");break;case 6:Array.isArray(t)||(n?r="Array":(d.warn("Settings value '"+i+"' expected to be an array but found "+typeof t+". The value will be wrapped in an array."),
a=[t]));break;case 16:"undefined"!=typeof Float32Array&&t instanceof Float32Array||(r="Float32Array");
break;case 16:"undefined"!=typeof Float32Array&&t instanceof Float32Array||(r="Float32Array");
break;case 17:"undefined"!=typeof Int32Array&&t instanceof Int32Array||(r="Int32Array");
break;case 18:"undefined"!=typeof Uint32Array&&t instanceof Uint32Array||(r="UInt32Array");
break;case 11:if(Array.isArray(t))for(var u=0;u<t.length;u++){
var c=t[u];if(!Array.isArray(c)||2!==c.length||!d.isNumber(c[0])||!d.isString(c[1])){
s="the property at index "+u+" has to be an array with two elements - a number and a string.";
break}}else s="the property has to be an array where each item is an array with two elements - a number and a string.";
break;case 2:var p=e.e(),f=d.isNumber(t);f||d.isString(t)?(a=p[t],
void 0===a&&(s="'"+t+"' is not a valid enumeration value. Please review the documentation for valid values.",
t=p),f&&(a=t)):(s="the value must be a number or a string (the preferred way is to use the enumeration from 'ZoomCharts.Configuration' namespace).",
t=p);break;case 14:t instanceof CanvasGradient||(r="CanvasGradient");
break;case 12:if(Array.isArray(t)&&t.length===e.b.length)for(var g=0;g<t.length;g++){
var m=this.ensurePropertyType(t[g],e.b[g],i+"["+g+"]",n);if(!m)return null;
t[g]=m.value}else s="the property expects an array with exactly "+e.b.length+" elements.";
break;case 7:for(var v=!1,y=0;y<e.b.length;y++){var S=this.ensurePropertyType(t,e.b[y],i,!0);
if(S){a=S.value,o=S.configuration||e.b[y],v=!0;break}}v||(s="the the given value does not match any constituent of the union type. Please review the documentation on the correct type.");
break;case 5:case 8:d.isObjectOrArray(t)||(r="Object");break;case 9:
t instanceof Boolean&&(t=t.valueOf()),null!==t&&t!==!0&&t!==!1&&(r="Boolean");
break;case 10:break;default:throw new Error("Unsupported data type: "+e.t);
}return null!==r&&null===s&&(s="the given value '"+t+"' is not of type '"+r+"'."),
null!==s?(n||d.error("Cannot update settings value '"+i+"' because "+s,t),
null):(void 0!==a&&(t=a),{value:t,configuration:o})},t.findPropertyConfiguration=function(t,e,i){
var n=e[t];return void 0!==n?n:(d.warn("Cannot update settings value '"+i+"' because such property does not exist.",null,!0),
null)},t}();st._ignoringCtor=0,st.replacingSettings=!1,r.SettingsHelper=st;
var at=function(){function t(t){this._mapping=null,this._computedDataMap={},
this._initializing=!0,this.container=null,this.theme=null,this.assetsUrlBase="",
this.area=new ut,this.data=[],this.advanced=new pt,this.events=new ot,
this.interaction=new dt,this.localization=new lt,this.toolbar=new Q,
this.title=new H,this.credits=new N,this.legend=new W,this._mapping=t;
}return t.prototype.applyGlobalCustomizations=function(){this.theme&&st.updateRecursive(this,this.theme,this._mapping,{});
},t.prototype.applyCompatibility=function(t,e,i){i=null==i?"":i+".";
for(var n=0;n<e.length;n++){var r=e[n],s=r.from,a=d.getProp(t,s,!!r.to&&!r.filter);
if(void 0!==a&&(!r.filter||r.filter(a)))if(r.to)r.transform&&(a=r.transform(a)),
d.extendDeep(t,d.wrapValue(a,r.to)),d.warn("Setting `"+i+s+"` is being deprecated. Compatibility layer moved the value automatically to `"+i+r.to+"`. Please update the configuration to avoid using the obsolete property.",null,!0);else{
var o=r.alternativeAsWarning,l="Setting `"+i+s+"` "+(o?"is being deprecated":"is no longer supported")+". Consider using `"+r.alternative+"` instead.";
o?d.warn(l,null,!0):d.error(l)}}},t.prototype.apply=function(t){
this.applyCompatibility(t,[{from:"width",to:"area.width"},{from:"height",
to:"area.height"},{from:"minHeight",to:"area.minHeight"},{from:"maxHeight",
to:"area.maxHeight"},{from:"minWidth",to:"area.minWidth"},{from:"maxWidth",
to:"area.maxWidth"}]);var e={},i=!1;if(this._initializing)this.applyGlobalCustomizations(),
t||(t={}),t.data||(t.data=[{}]);else if(!t)return e;if(t.data){
Array.isArray(t.data)||(t.data=[t.data],i=!0);for(var n=0;n<t.data.length;n++){
var r=t.data[n];r.id||(r.name?(d.warn("The property `name` in the data object configuration is deprecated in favor of `id` property. Please update the configuration to avoid using the obsolete property.",null,!0),
r.id=r.name,delete r.name):0===n?r.id="default":r.id="default-"+n.toString(10));
}}if(st.updateRecursive(this,t.theme,this._mapping,e),st.updateRecursive(this,t,this._mapping,e),
i&&(t.data=t.data[0]),e.data||this._initializing){this._computedDataMap={};
for(var n=0;n<this.data.length;n++){var s=this.data[n];this._computedDataMap[s.id]=s;
}}return e},t}();r.Settings=at;var ot=function(){function t(){
this.onError=null,this.onSettingsChange=null,this.onClick=null,
this.onDoubleClick=null,this.onTripleClick=null,this.onRightClick=null,
this.onHoverChange=null,this.onSelectionChange=null,this.onChartUpdate=null,
this.onPositionChange=null,this.chartUpdateDelay=0}return t}();
r.SettingsEvents=ot;var lt=function(){function t(){this.toolbar=new ht,
this.loadingLabel="Loading...",this.closeButton="Close",this.dataRequestFailed="Data request failed",
this.exportNotAvailable="Your browser does not support exporting the chart.";
}return t}();r.SettingsLocalization=lt;var ht=function(){function t(){
this.backButton="Back",this.backTitle="Move one step back in navigation",
this.fullscreenButton="Fullscreen",this.fullscreenTitle="Toggle fullscreen mode",
this.zoomoutButton="Zoom-out",this.zoomoutTitle="Zoom out",this.exportButton="Export",
this.exportTitle="Export Data",this.exportJpeg="For Office and Web (jpeg)",
this.exportPNG="For Photoshop (png)",this.exportPDF="For Printer (pdf)",
this.exportCSV="Spreadsheet (csv)",this.exportXLS="Spreadsheet (xls)";
}return t}();r.SettingsLocalizationToolbar=ht;var ut=function(){
function t(){this.defaultHeight=300,this.width=null,this.height=null,
this.top=null,this.left=null,this.minHeight=50,this.maxHeight=2e4,
this.minWidth=50,this.maxWidth=2e4,this.style=new ct}return t;
}();r.SettingsArea=ut;var ct=function(){function t(){this.fillColor="transparent",
this.image=null,this.overlayColor=null}return t}();r.SettingsAreaStyle=ct;
var dt=function(){function t(){this.resizing=new et}return t}();
r.SettingsInteraction=dt;var pt=function(){function t(){this.labelCache=!0,
this.labelCacheRotated=!0,this.highDPI=!0,this.pointer=new ft,
this.useAnimationFrame=!0,this.showTouches=!1,this.showTouchTrail=!0,
this.showFPS=!1,this.showTimestamp=!1,this.logging=!1,this.style=new gt,
this.maxCanvasWidth=4096,this.maxCanvasHeight=4096,this.themeCSSClass="DVSL-round",
this.assets=[{url:"assets://zc.css",required:function(){return!d.isStyleSheetDefined("DVSL-suppress-default-styles","color");
}}],this.builtinAssets={"logo-supported-by":c.LicenseBannerSupportedBy,
"logo-development":c.LicenseBannerDevelopment,"logo-license-expired":c.LicenseExpired
},this.exportProxyURL="https://echo.zoomcharts-cloud.com/download",
this.exportPdfSize=[210,297],this.crossOriginHeader=null,this.dataExportFunction=null;
}return t}();r.SettingsAdvanced=pt;var ft=function(){function t(){
this.noClickOnDoubleClick=!0,this.clickSensitivity=10,this.doubleClickSensitivity=20,
this.doubleClickTimeout=300,this.longPressTimeout=500,this.longPressSensitivity=10,
this.speedAveragingPeriod=200,this.scrollIntoView=!1,this.mouseWheelRequiresFocus=!1;
}return t}();r.SettingsAdvancedPointer=ft;var gt=function(){function t(){
this.messageTextStyle={fillColor:"#000",font:"15px Arial"},this.messageBackgroundStyle={
padding:5},this.loadingArcStyle={r:10,lineColor:"#444",lineWidth:1,
location:"center"}}return t}();r.SettingsAdvancedStyle=gt;var mt=function(){
function t(t,e,i,n){t!==1/0&&t>i?(this.x1=t,this.x0=i):(this.x1=i,
this.x0=t),e!==1/0&&e>n?(this.y1=e,this.y0=n):(this.y1=n,this.y0=e);
}return t.createEmpty=function(){return new t(1/0,1/0,(-(1/0)),(-(1/0)));
},t.prototype.isEmpty=function(){return this.x0>=this.x1||this.y0>=this.y1;
},t.prototype.clone=function(){return new t(this.x0,this.y0,this.x1,this.y1);
},t.prototype.w=function(){return this.x1-this.x0},t.prototype.h=function(){
return this.y1-this.y0},t.prototype.equals=function(t){return this.x0===t.x0&&this.x1===t.x1&&this.y0===t.y0&&this.y1===t.y1;
},t.prototype.inflate=function(t){var e=(this.x0+this.x1)/2,i=(this.y0+this.y1)/2;
return this.x0=(this.x0-e)*t+e,this.x1=(this.x1-e)*t+e,this.y0=(this.y0-i)*t+i,
this.y1=(this.y1-i)*t+i,this},t.prototype.clip=function(t){return this.x0=Math.max(this.x0,t.x0),
this.x1=Math.min(this.x1,t.x1),this.y0=Math.max(this.y0,t.y0),
this.y1=Math.min(this.y1,t.y1),this},t.prototype.isInside=function(t){
return this.x0>=t.x0&&this.x1<=t.x1&&this.y0>=t.y0&&this.y1<=t.y1;
},t.prototype.isOutside=function(t){return this.x0>t.x1||this.x1<t.x0||this.y0>t.y1||this.y1<t.y0;
},t.prototype.overlapsRect=function(t,e,i,n){return t<this.x1&&i>this.x0&&e<this.y1&&n>this.y0;
},t.prototype.intersectsSegment=function(t,e,i,n){return null!=r.Geometry.clipSegmentToRect(t,e,i-t,n-e,this.x0,this.y0,this.x1,this.y1);
},t.prototype.area=function(){return(this.x1-this.x0)*(this.y1-this.y0);
},t.prototype.toString=function(){return this.x0+","+this.y0+", "+this.x1+", "+this.y1;
},t.prototype.addPoint=function(t,e){return this.x0=Math.min(this.x0,t),
this.x1=Math.max(this.x1,t),this.y0=Math.min(this.y0,e),this.y1=Math.max(this.y1,e),
this},t.prototype.addBounds=function(t,e,i,n){return this.x0=Math.min(this.x0,t),
this.x1=Math.max(this.x1,i),this.y0=Math.min(this.y0,e),this.y1=Math.max(this.y1,n),
this},t.prototype.addRect=function(t){return this.x0=Math.min(this.x0,t.x0),
this.x1=Math.max(this.x1,t.x1),this.y0=Math.min(this.y0,t.y0),
this.y1=Math.max(this.y1,t.y1),this},t.prototype.moveBy=function(t,e){
return this.x0+=t,this.x1+=t,this.y0+=e,this.y1+=e,this},t.prototype.containsPoint=function(t,e){
return t>=this.x0&&t<this.x1&&e>=this.y0&&e<this.y1},t.prototype.addLine=function(t){
for(var e=0;e<=t.length-2;e+=2)this.addPoint(t[e],t[e+1]);return this;
},t.prototype.translate=function(t,e,i,n){return this.x0=this.x0*t+e,
this.x1=this.x1*t+e,this.y0=this.y0*i+n,this.y1=this.y1*i+n,this;
},t.prototype.overlaps=function(t){return this.x0<t.x1&&this.x1>t.x0&&this.y0<t.y1&&this.y1>t.y0;
},t}();r.Rect=mt;var vt=function(){function t(t,e){this.msg=t,
this.pri=e}return t}(),yt=function(){function t(){this.settings=null,
this.assetsLoader=null,this.mainData=null,this.mainDataEnabled=!0,
this.chartLeft=0,this.chartTop=0,this.chartWidth=1,this.chartHeight=1,
this.x0=0,this.y0=0,this.height=0,this.width=0,this.leftMargin=0,
this.rightMargin=0,this.topMargin=0,this.bottomMargin=0,this.loading=!0,
this.messages={},this.backStack=[]}return t.prototype.setMessage=function(t,e,i){
void 0===i&&(i=0);var n;return e?(n=!this.messages[t]||this.messages[t].msg!==e||this.messages[t].pri!==i,
this.messages[t]=new vt(e,i)):(n=this.messages.hasOwnProperty(t),
delete this.messages[t]),n},t.prototype.getMessage=function(){
var t=null,e=0;for(var i in this.messages){var n=this.messages[i];
n.pri>e&&(t=n.msg,e=n.pri)}return t},t.prototype.pushBack=function(t){
this.backStack.push(t),this.backStack.length>1e3&&(this.backStack=this.backStack.slice(200));
},t}();r.Scene=yt;var St=2*Math.PI,bt=function(){function t(){}
return t.distanceToSegmentSq=function(t,e,i,n,r,s){var a=r-t,o=s-e,l=i-t,h=n-e,u=a*l+o*h,c=l*l+h*h,d=-1;
0!==c&&(d=u/c);var p,f;d<0?(p=t,f=e):d>1?(p=i,f=n):(p=t+d*l,f=e+d*h);
var g=r-p,m=s-f;return g*g+m*m},t.rayIntersectsSegment=function(t,e,i,n,r,s,a,o){
var l=1/0,h=a-r,u=o-s,c=i*u-n*h;if(0!==c){var d=(e*h-t*u+r*u-s*h)/c,p=void 0;
p=Math.abs(h)>Math.abs(u)?(t+i*d-r)/h:(e+n*d-s)/u,p>=0&&p<=1&&d>=0&&(l=d);
}return l},t.lineIntersectsSegment=function(t,e,i,n,r,s,a,o){
var l=1/0,h=a-r,u=o-s,c=i*u-n*h;if(0!==c){var d=(e*h-t*u+r*u-s*h)/c,p=void 0;
p=Math.abs(h)>Math.abs(u)?(t+i*d-r)/h:(e+n*d-s)/u,p>=0&&p<=1&&(l=d);
}return l},t.lineIntersectsLine=function(t,e,i,n,r,s,a,o){var l=1/0,h=i-t,u=n-e,c=a-r,d=o-s,p=h*d-u*c;
if(0!==p){var f=(e*c-t*d+r*d-s*c)/p,g=void 0;g=Math.abs(c)>Math.abs(d)?(t+h*f-r)/c:(e+u*f-s)/d,
l=f}return l},t.rayIntersectsCircle=function(t,e,i,n,r){var s=i*i+n*n,a=t*i+e*n,o=t*t+e*e-r*r,l=a*a-s*o,h=1/0;
if(l>0){l=Math.sqrt(l);var u=(-a-l)/s,c=(-a+l)/s;u>=0&&(h=u),
c>=0&&(h=Math.min(h,c))}return h},t.clipSegmentToRect=function(t,e,i,n,r,s,a,o){
var l=0,h=1;if(0!==n){var u=1/n,c=(s-e)*u,d=(o-e)*u;if(l=Math.min(c,d),
h=Math.max(c,d),l>1||h<0)return null}else if(e<s||e>o)return null;
if(0!==i){var p=1/i,f=(r-t)*p,g=(a-t)*p,m=Math.min(f,g),v=Math.max(f,g);
if(l=Math.max(l,m),h=Math.min(h,v),l>1||h<0||l>h)return null}else if(t<r||t>a)return null;
return[l,h]},t.rayIntersectsCircleOuter=function(t,e,i,n,r){var s=i*i+n*n,a=t*i+e*n,o=t*t+e*e-r*r,l=a*a-s*o;
return l=Math.sqrt(l),Math.max((-a+l)/s,(-a-l)/s)},t.lineTouchingCircle=function(t,e,i,n,r){
var s=Math.sqrt(t*t+e*e);if(!(s>r))return null;var a=Math.sqrt(s*s-r*r),o=r*a/s,l=r*r/s,h=t/s,u=e/s,c=t*n-e*i;
return c<0&&(o=-o),{x:h*l-u*o,y:u*l+h*o}},t.distanceToPolygonSq=function(e,i,n){
if(t.isInsidePolygon(e,i,n))return 0;for(var r=1/0,s=0;s<n.length;s++)for(var a=n[s],o=a.length,l=a[o-2],h=a[o-1],u=0;u<=o-2;u+=2){
var c=a[u],d=a[u+1];r=Math.min(r,t.distanceToSegmentSq(l,h,c,d,e,i)),
l=c,h=d}return r},t.distanceToLinesSq=function(e,i,n){for(var r=1/0,s=0;s<n.length;s++){
var a=n[s],o=a.length;if(2===o)r=Math.min(r,(e-a[0])*(e-a[0])+(i-a[1])*(i-a[1]));else if(o>2)for(var l=a[0],h=a[1],u=2;u<=o-2;u+=2){
var c=a[u],d=a[u+1];r=Math.min(r,t.distanceToSegmentSq(l,h,c,d,e,i)),
l=c,h=d}}return r},t.isInsidePolygon=function(t,e,i){for(var n=!1,r=0;r<i.length;r++)for(var s=i[r],a=s.length,o=s[a-2],l=s[a-1],h=0;h<=a-2;h+=2){
var u=s[h],c=s[h+1];c>e!=l>e&&t<(u-o)*(e-l)/(c-l)+o&&(n=!n),o=u,
l=c}return n},t.distanceToBalloon=function(e,i,n,r){var s;if(e>=i)s=e;else if(0===r)s=i;else{
var a=d.sign(r);s=e/r*a,Math.abs(n*s)>i-e&&(s=t.rayIntersectsCircleOuter(-(i-e),0,Math.abs(n),r,e));
}return s},t.distanceToRect=function(t,e,i,n,s,a,o){void 0===o&&(o=!1);
var l,h;i instanceof r.Rect?(o=n,l=i.x0,h=i.y0,s=i.x1,a=i.y1):(l=i,
h=n);var u,c;return u=t<l?l-t:t>s?t-s:0,c=e<h?h-e:e>a?e-a:0,o?u*u+c*c:Math.sqrt(u*u+c*c);
},t.clipSegmentToBounds=function(e,i,n,r,s,a,o,l,h,u){var c=Math.max(s,a),d=n-e,p=r-i,f=t.clipSegmentToRect(e,i,d,p,o-c,l-c,h+c,u+c);
if(null===f)return null;var g=Math.max(0,f[0]),m=Math.min(1,f[1]);
return[e+d*g,i+p*g,e+d*m,i+p*m]},t.computeBoundsSize=function(t){
for(var e=1/0,i=-(1/0),n=1/0,r=-(1/0),s=t.length,a=0;a<s;a+=2){
var o=t[a],l=t[a+1];e=Math.min(o,e),i=Math.max(o,i),n=Math.min(l,n),
r=Math.max(l,r)}return Math.max(i-e,r-n)},t.simplify=function(e,i){
if(!i||!e.length)return e;var n=i*i;return e=t.reducePoints(e,n),
e=t.simplifyDP(e,n)},t.simplifyDP=function(e,i){var n,r=e.length;
n="undefined"!=typeof Uint8Array?new Uint8Array(r):new Array(r),
n[0]=n[r-2]=1,t.simplifyDPStep(e,n,i,0,r-2);for(var s=[],a=0;a<r;a+=2)n[a]&&(s.push(e[a]),
s.push(e[a+1]));return s},t.simplifyDPStep=function(e,i,n,r,s){
for(var a=0,o=0,l=e[r],h=e[r+1],u=e[s],c=e[s+1],d=r+2;d<=s-2;d+=2){
var p=t.distanceToSegmentSq(l,h,u,c,e[d],e[d+1]);p>a&&(o=d,a=p);
}a>n&&(i[o]=1,t.simplifyDPStep(e,i,n,r,o),t.simplifyDPStep(e,i,n,o,s));
},t.reducePoints=function(t,e){for(var i,n,r=t[0],s=t[1],a=[r,s],o=t.length,l=2;l<o;l+=2)i=t[l],
n=t[l+1],(r-i)*(r-i)+(s-n)*(s-n)>e&&(a.push(i),a.push(n),r=i,
s=n);return r!==i&&s!==n&&a.push(i,n),a},t.transformPolyline=function(t,e,i,n,r){
for(var s=[],a=0;a<t.length;a+=2)s.push(t[a]*e+i,t[a+1]*n+r);return s;
},t.outlinePolylineByVectors=function(t,e,i){for(var n=[],s=[],a=t.length-2,o=0;o<a;o+=2){
var l=e[o]*i,h=e[o+1]*i,u=t[o]+l,c=t[o+1]+h,d=t[o+2]+l,p=t[o+3]+h;
n.push(u,c,d,p)}s=n.slice(0,2),a=n.length-4;for(var o=0;o<a;o+=4){
var f=r.Geometry.lineIntersectsLine(n[o],n[o+1],n[o+2],n[o+3],n[o+4],n[o+5],n[o+6],n[o+7]);
f===1/0?s.push(n[o+2],n[o+3]):s.push(n[o]+(n[o+2]-n[o])*f,n[o+1]+(n[o+3]-n[o+1])*f);
}return s.push.apply(s,n.slice(-2)),s},t.calculatePolyArea=function(t){
for(var e=0,i=t,n=t.length-2,r=0;r<n;r+=2)e+=i[r]*i[r+3]-i[r+2]*i[r+1];
return e/2},t.calculatePolyCentroid=function(t,e){var i,n=0,r=0,s=t.length-2;
e*=6;for(var a=0;a<s;a+=2)i=t[a]*t[a+3]-t[a+2]*t[a+1],n+=(t[a]+t[a+2])*i,
r+=(t[a+1]+t[a+3])*i;return{x:n/e,y:r/e}},t.normalizeAngle=function(t){
return t<0?(t%=St,t+=St):t>=St&&(t%=St),t},t.sectorBetweenAngles=function(t,e){
for(;e<t;)e+=St;return e-t},t.subtractAngle=function(t,e){var i=t-e;
return i>Math.PI?i-=St:i<-Math.PI&&(i+=St),i},t.rotateVector=function(t,e,i,n){
return{x:t*n-e*i,y:t*i+e*n}},t.circle2=function(t,e,i){i.x=(t[0]+e[0])/2,
i.y=(t[1]+e[1])/2,i.r=((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))/4;
},t.circle3=function(t,e,i,n){var r=t[0],s=t[1],a=e[0],o=e[1],l=i[0],h=i[1],u=2*(r*(o-h)+a*(h-s)+l*(s-o));
if(0===u){var c=Math.min(r,a,l),d=Math.min(s,o,h);n.x=(c+Math.max(r,a,l))/2,
n.y=(d+Math.max(s,o,h))/2,n.r=(n.x-c)*(n.x-c)+(n.y-d)*(n.y-d);
}else n.x=((r*r+s*s)*(o-h)+(a*a+o*o)*(h-s)+(l*l+h*h)*(s-o))/u,
n.y=((r*r+s*s)*(l-a)+(a*a+o*o)*(r-l)+(l*l+h*h)*(a-r))/u,n.r=(r-n.x)*(r-n.x)+(s-n.y)*(s-n.y);
},t.pointDistance=function(t,e){return(e[0]-t.x)*(e[0]-t.x)+(e[1]-t.y)*(e[1]-t.y);
},t.pointsInCircle=function(e,i,n){return t.pointDistance(e,i)-e.r<=1e-5&&(!n||t.pointDistance(e,n)-e.r<=1e-5);
},t.circumscribeCircle=function(e){function i(e,i,n,l,h){if(n?t.circle3(e,i,n,s):t.circle2(e,i,s),
(!l||t.pointsInCircle(s,l,h))&&!(o&&r.r<=s.r)){var u=r;r=s,s=u,
a[0]=e,a[1]=i,a[2]=n,o=!0}}if(null==e||e.length<1)return null;
if(1===e.length)return{x:e[0].x,y:e[0].y,r:e[0].r};var n=[[e[0].x-e[0].r,e[0].y],[e[0].x+e[0].r,e[0].y],null],r={
x:0,y:0,r:0};t.circle2(n[0],n[1],r);for(var s={x:0,y:0,r:0},a=[[0,0],[0,0],[0,0]],o=!1,l=t.pointKoef,h=[0,0],u=0;u<e.length;u++)for(var c=0;c<8;c++)if(h[0]=e[u].x+e[u].r*l[c][0],
h[1]=e[u].y+e[u].r*l[c][1],!(n[0][0]===h[0]&&n[0][1]===h[1]||n[1][0]===h[0]&&n[1][1]===h[1]||n[2]&&n[2][0]===h[0]&&n[2][1]===h[1]||t.pointsInCircle(r,h))){
var d=[h[0],h[1]];o=!1,i(n[0],d,null,n[1],n[2]),i(n[1],d,null,n[0],n[2]),
i(n[0],n[1],d,n[2],null),n[2]&&(i(n[2],d,null,n[0],n[1]),i(n[0],n[1],d,n[2],null),
i(n[1],n[2],d,n[0],null),i(n[0],n[2],d,n[1],null));var p=n;n=a,
a=p,u=-1;break}return r.r=Math.sqrt(r.r),r},t.findWeightedCenter=function(t){
for(var e=0,i=0,n=0,r=0;r<t.length;r++){var s=t[r];e+=s.x*s.r,
i+=s.y*s.r,n+=s.r}return{x:e/n,y:i/n,r:n/t.length}},t}();bt.pointKoef=[[-1,0],[0,-1],[1,0],[0,1],[Math.SQRT1_2,Math.SQRT1_2],[-Math.SQRT1_2,Math.SQRT1_2],[Math.SQRT1_2,-Math.SQRT1_2],[-Math.SQRT1_2,-Math.SQRT1_2]],
r.Geometry=bt;var Ct=function(){function t(t){this.scene=t,this.bounds=null;
}return t.prototype.setBounds=function(t,e,i,n){this.bounds=new mt(t,e,i,n);
},t.prototype.findObjectAt=function(t,e,i){return null},t.prototype.remove=function(){},
t}();r.Layer=Ct,function(t){t.ToolbarItemNames.fullscreen=function(t,e){
var i=t.settings.localization.toolbar;return new r.Bar.ToggleButton(t,e,{
labelDisabled:e.label||i.fullscreenButton,titleDisabled:e.title||i.fullscreenTitle,
cssClassEnabled:"DVSL-bar-btn-fullscreen-active",cssClassDisabled:e.cssClass||"DVSL-bar-btn-fullscreen",
onEnable:function(){return t.setFullscreen(!0)},onDisable:function(){
return t.setFullscreen(!1)},getChartState:function(){return t.isFullscreen();
}})};var e=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e.prototype.onSceneChange=function(e){t.prototype.onSceneChange.call(this,e);
var i=this.chart.scene.backStack.length>0,n=this.options;n.enabled!==i&&(n.enabled=i,
this.updateSettings())},e}(t.Button);t.ToolbarItemNames.back=function(t,i){
var n=t.settings.localization.toolbar;i.label=i.label||n.backButton,
i.title=i.title||n.backTitle,i.cssClass=i.cssClass||"DVSL-bar-btn-back";
var r=i.onClick;return i.onClick=function(e,i){t.back(!0,"user"),
r&&r(e,i)},new e(t,i)}}(o=r.Bar||(r.Bar={}));var xt=function(){
function t(t){this.seed=t,this.A=48271,this.M=2147483647,this.Q=this.M/this.A,
this.R=this.M%this.A,this.oneOverM=1/this.M}return t.prototype.get=function(){
var t=this.seed/this.Q,e=this.seed%this.Q,i=this.A*e-this.R*t;
return i>0?this.seed=i:this.seed=i+this.M,this.seed*this.oneOverM;
},t.prototype.getArrayElement=function(t){return t[t.length*this.get()|0];
},t}();r.Random=xt;var wt=function(t){function e(e){var i=t.call(this)||this;
return i.animationOrder=500,i.paintOrder=35,i.updateOrder=600,
i.container=null,i.backgroundContainer=null,i.background=null,
i.canvas=null,i.interactionContainer=null,i.menuContainer=null,
i.outerBorder=null,i.scene=null,i.curThemeClass=null,i.chart=e,
i.scene=e.scene,i}return n(e,t),e.setContainerStyle=function(t){
t.style.position="absolute",t.style.left="0px",t.style.right="0px",
t.style.top="0px",t.style.bottom="0px"},e.prototype.createDom=function(t){
this.shell=t,this.container=r.Helpers.createDom("div","DVSL-container DVSL-"+t.chart.api.typeName),
this.container.style.position="relative",this.container.style.width="100%",
this.backgroundContainer=r.Helpers.createDom("div","DVSL-background-container",null,this.container),
e.setContainerStyle(this.backgroundContainer),this.background=r.Helpers.createDom("div","DVSL-background",null,this.backgroundContainer),
e.setContainerStyle(this.background),this.backgroundImage=r.Helpers.createDom("div","DVSL-background-image",null,this.background),
this.canvas=r.Helpers.createDom("canvas","DVSL-canvas",null,this.container),
e.setContainerStyle(this.canvas),this.outerBorder=r.Helpers.createDom("div","DVSL-border",null,this.container),
e.setContainerStyle(this.outerBorder),this.interactionContainer=r.Helpers.createDom("div","DVSL-interaction",null,this.container),
e.setContainerStyle(this.interactionContainer),this.menuContainer=r.Helpers.createDom("div","DVSL-menu-container DVSL-menu-workaround",null,this.container),
e.setContainerStyle(this.menuContainer),r.Helpers.createDom("span","DVSL-empty"," ",this.menuContainer),
this.updateSettings(this.scene.settings),this.interactionContainer.tabIndex=0;
},e.prototype.updateSettings=function(t){if(r.Helpers.hasProp(t,"area.style.image")){
var e=t.area.style.image;this.backgroundImage.style.backgroundImage=e?"url("+e+")":"";
}var i=this.curThemeClass,n=this.scene.settings.advanced.themeCSSClass;
n!==i&&(i&&r.Helpers.removeClass(this.container,i),this.curThemeClass=n,
r.Helpers.addClass(this.container,n))},e.prototype.doAnimations=function(t){
t.changes.bounds&&(this.backgroundImage.style.bottom=this.scene.bottomMargin+"px",
this.backgroundImage.style.top=this.scene.topMargin+"px")},e}(k);
r.DomLayer=wt;var Lt=function(){function t(t,e,i){void 0===i&&(i=[]),
this.x=i,this.y1=e,this.y0=t}return t.prototype.isEmpty=function(){
return 0===this.x.length},t.prototype.makeCopy=function(){return new t(this.y0,this.y1,this.x.slice(0));
},t.prototype.split=function(e){var i=new t(e,this.y1);return this.y1=e,
i.x=this.x.slice(0),i},t.prototype.add=function(t,e){for(var i=[],n=this.x.length,r=0;r<n&&this.x[r+1]<t;)i.push(this.x[r],this.x[r+1]),
r+=2;for(r<n&&(t=Math.min(this.x[r],t));r<n&&this.x[r]<=e;)e=Math.max(e,this.x[r+1]),
r+=2;for(i.push(t,e);r<n;)i.push(this.x[r],this.x[r+1]),r+=2;return this.x=i,
this},t.prototype.subtract=function(t,e){for(var i=[],n=this.x.length,r=0;r<n&&this.x[r+1]<=t;)i.push(this.x[r],this.x[r+1]),
r+=2;for(r<n&&this.x[r]<t&&i.push(this.x[r],t);r<n&&this.x[r+1]<=e;)r+=2;
for(r<n&&this.x[r]<e&&(i.push(e,this.x[r+1]),r+=2);r<n;)i.push(this.x[r],this.x[r+1]),
r+=2;return this.x=i,this},t.prototype.subtractSlice=function(t){
if(this.isEmpty()||t.isEmpty())return this;for(var e=[],i=this.x,n=t.x,r=i.length,s=n.length,a=0,o=0,l=i[a],h=i[a+1];o<s;){
var u=n[o],c=n[o+1];if(l>=c)o+=2;else if(u>=h){if(e.push(l,h),
a+=2,a===r)break;l=i[a],h=i[a+1]}else if(u>l&&e.push(l,u),c<h)l=c,
o+=2;else{if(a+=2,a===r)break;l=i[a],h=i[a+1]}}for(;a<r&&(e.push(l,h),
a+=2,a!==r);)l=i[a],h=i[a+1];return this.x=e,this},t.prototype.intersectsSlice=function(t){
if(this.isEmpty()||t.isEmpty())return!1;for(var e=this.x,i=t.x,n=e.length,r=i.length,s=0,a=0;a<r&&s<n;){
var o=e[s],l=e[s+1],h=i[a],u=i[a+1];if(o>=u)a+=2;else{if(!(h>=l))return!0;
s+=2}}return!1},t.prototype.coversSlice=function(t){if(t.isEmpty())return!0;
for(var e=this.x,i=t.x,n=e.length,r=i.length,s=0,a=0;a<r&&s<n;){
var o=e[s],l=e[s+1],h=i[a],u=i[a+1];if(h>=l)s+=2;else{if(!(h>=o&&u<=l))return!1;
a+=2}}return a===r},t.prototype.clip=function(t,e){for(var i=[],n=0;n<=this.x.length-2;n+=2){
var r=this.x[n],s=this.x[n+1];s>t&&r<e&&(i.push(Math.max(r,t)),
i.push(Math.min(s,e)))}return this.x=i,this},t.prototype.tryMerge=function(t){
if(this.x.length!==t.x.length||this.y1!==t.y0)return!1;for(var e=0;e<=this.x.length-1;e++)if(this.x[e]!==t.x[e])return!1;
return this.y1=t.y1,!0},t.prototype.intersects=function(t,e){
for(var i=0;i<=this.x.length-2;i+=2){var n=this.x[i],r=this.x[i+1];
if(n<e&&r>t)return!0}return!1},t.prototype.covers=function(t,e){
for(var i=0;i<=this.x.length-2;i+=2){var n=this.x[i],r=this.x[i+1];
if(n<=t&&r>=e)return!0}return!1},t.prototype.findOverlappingRect=function(t,e,i){
for(var n=!1,r=0;r<=this.x.length-2;r+=2){var s=this.x[r],a=this.x[r+1];
s<e&&e-i<a&&(t=Math.min(t,Math.max(s,e-i)),n=!0),a>t&&t+i>s&&(e=Math.max(e,Math.min(a,t+i)),
n=!0)}return{x0:t,x1:e,overlaps:n}},t.prototype.toRects=function(t){
for(var e=0;e<=this.x.length-2;e+=2){var i=this.x[e],n=this.x[e+1];
t.push(new r.Rect(i,this.y0,n,this.y1))}},t}();r.AreaSlice=Lt;
var Tt=function(){function t(){this.slices=[new Lt((-1e30),1e30)];
}return t.prototype.makeCopy=function(){var e=new t;e.slices=[];
for(var i=0;i<this.slices.length;i++){var n=this.slices[i];e.slices.push(n.makeCopy());
}return e},t.prototype.getBounds=function(){var t=1/0,e=-(1/0),i=1/0,n=-(1/0);
if(this.slices.length>1){i=this.slices[1].y0,n=this.slices[this.slices.length-1].y1;
for(var s=0;s<this.slices.length;s++){var a=this.slices[s];a.x.length>0&&(t=Math.min(t,a.x[0]),
e=Math.max(e,a.x[a.x.length-1]))}}return new r.Rect(t,i,e,n)},
t.prototype.addRect=function(t){if(t.isEmpty())return this;for(var e=t.x0,i=t.x1,n=t.y0,r=t.y1,s=[],a=null,o=0;o<this.slices.length;o++){
var l=this.slices[o];if(l.y0>=r||l.y1<=n)a&&a.tryMerge(l)||(s.push(l),
a=l);else{if(n>l.y0){var h=l.split(n);a&&a.tryMerge(l)||(s.push(l),
a=l),l=h}if(r<l.y1){var h=l.split(r);l.add(e,i),a&&a.tryMerge(l)||(s.push(l),
a=l),l=h}else l.add(e,i);a&&a.tryMerge(l)||(s.push(l),a=l)}}return this.slices=s,
this},t.prototype.subtractRect=function(t){if(t.isEmpty())return this;
for(var e=t.x0,i=t.x1,n=t.y0,r=t.y1,s=[],a=null,o=0;o<this.slices.length;o++){
var l=this.slices[o];if(l.y0>=r||l.y1<=n)a&&a.tryMerge(l)||(s.push(l),
a=l);else{if(n>l.y0){var h=l.split(n);a&&a.tryMerge(l)||(s.push(l),
a=l),l=h}if(r<l.y1){var h=l.split(r);l.subtract(e,i),a&&a.tryMerge(l)||(s.push(l),
a=l),l=h}else l.subtract(e,i);a&&a.tryMerge(l)||(s.push(l),a=l);
}}return this.slices=s,this},t.prototype.clip=function(t){return 1;
},t.prototype.subtractArea=function(t){if(t.isEmpty())return this;
for(var e=[],i=null,n=this.slices,r=t.slices,s=n.length,a=r.length,o=0,l=0,h=n[o];l<a;){
var u=r[l];if(h.y1<=u.y0){if(i&&i.tryMerge(h)||(e.push(h),i=h),
o+=1,o===s)break;h=n[o]}else if(u.y1<=h.y0||u.isEmpty())l+=1;else{
if(h.y0<u.y0){var c=h.split(u.y0);i&&i.tryMerge(h)||(e.push(h),
i=h),h=c}if(h.y1>u.y1){var c=h.split(u.y1);h.subtractSlice(u),
i&&i.tryMerge(h)||(e.push(h),i=h),h=c,l+=1}else{if(h.subtractSlice(u),
i&&i.tryMerge(h)||(e.push(h),i=h),o+=1,o===s)break;h=n[o]}}}for(;o<s&&(i&&i.tryMerge(h)||(e.push(h),
i=h),o+=1,o!==s);)h=n[o];return this.slices=e,this},t.prototype.intersectsArea=function(t){
if(t.isEmpty()||this.isEmpty())return!1;for(var e=this.slices,i=t.slices,n=e.length,r=i.length,s=0,a=0;a<r&&s<n;){
var o=i[a],l=e[s];if(l.intersectsSlice(o))return!0;l.y1<o.y1?s+=1:o.y1<l.y1?a+=1:(s+=1,
a+=1)}return!1},t.prototype.coversArea=function(t){if(t.isEmpty())return!0;
for(var e=this.slices,i=t.slices,n=e.length,r=i.length,s=0,a=0;a<r&&s<n;){
var o=i[a],l=e[s];if(!l.coversSlice(o))return!1;l.y1<o.y1?s+=1:o.y1<l.y1?a+=1:(s+=1,
a+=1)}return!0},t.prototype.findOverlappingRect=function(t,e){
if(this.isEmpty())return null;for(var i=this.slices[1].x[0],n=Math.min(this.slices[1].x[1],i+t),s=this.slices[1].y0,a=Math.min(this.slices[1].y1,s+e),o=0;o<this.slices.length;o++){
var l=this.slices[o];if(l.y0>=s+e)break;var h=l.findOverlappingRect(i,n,t);
i=h.x0,n=h.x1;var u=h.overlaps;u&&(a=Math.min(l.y1,s+e))}return new r.Rect(i,s,n,a);
},t.prototype.findTopPosition=function(t,e){for(var i=1/0,n=0;n<this.slices.length;n++){
var r=this.slices[n];r.covers(t,e)&&(i=Math.min(i,r.y0))}return i===1/0?0:i;
},t.prototype.intersects=function(t){for(var e=t.x0,i=t.x1,n=t.y0,r=t.y1,s=0;s<this.slices.length;s++){
var a=this.slices[s];if(a.y0<r&&a.y1>n&&a.intersects(e,i))return!0;
}return!1},t.prototype.isEmpty=function(){return 1===this.slices.length&&this.slices[0].isEmpty();
},t.prototype.coversRect=function(t){for(var e=t.x0,i=t.x1,n=t.y0,r=t.y1,s=0;s<this.slices.length;s++){
var a=this.slices[s];if(n<a.y1&&r>a.y0&&!a.covers(e,i))return!1;
}return!0},t.prototype.toRects=function(){for(var t=[],e=0;e<this.slices.length;e++){
var i=this.slices[e];i.toRects(t)}return t},t}();r.AreaCollection=Tt;
var kt=navigator.userAgent.match(/AppleWebKit\/(\d+)/),At=kt?parseInt(kt[1],10):1e6,Mt=function(){
function e(t,i){var n=this;this.chart=null,this.settings=null,
this.scene=null,this.events=null,this.profiler=null,this.container=null,
this.canvas=null,this.scaleX=1,this.scaleY=1,this.paintRequested=null,
this.labelRenderer=null,this.prevTime=null,this.paintNowInProgreess=!1,
this.animationInProgress=!1,this.mouseEvents=null,this.innerAreaCache=null,
this.chartWidth=0,this.chartHeight=0,this.sizeChanged=!0,this.fullScreenMode=!1,
this.fullscreenBeforeW=0,this.fullscreenBeforeH=0,this.lastCursor=null,
this.chart=t,this.settings=t.settings,this.scene=t.scene,this.domLayer=i,
this.buildDom(),this.labelRenderer=new _(this.settings,this.chart.assetsLoader,this.container),
this.mouseEvents=new w(this.domLayer.interactionContainer,this.settings.advanced.pointer,[this.domLayer.menuContainer]),
this.profiler=new P(this);for(var r=0;r<e.MouseEventConfig.length;r++){
var s=e.MouseEventConfig[r];!function(t){n.mouseEvents.listen(t.ev,function(e){
return n.notifyMouseEvent(e,t)})}(s)}this.events=new D(t,this),
this.events.addElement(this.domLayer),this.containerResizeFunc=function(){
return n.updateSize(!1)},d.listenResize(this.container,this.containerResizeFunc),
d.listen(window,"resize",this.containerResizeFunc)}return e.prototype.forceChromeRedraw=function(){
var t=this.menuContainer.style,e=t.transform;t.transform="translateZ(0)",
window.setTimeout(function(){t.transform=e},1)},e.prototype.updateSize=function(t){
var e,i,n=this.settings.area;this.fullScreenMode?(e=window.innerWidth,
i=window.innerHeight):this.fullscreenBeforeW>0?(e=this.fullscreenBeforeW,
i=this.fullscreenBeforeH,this.fullscreenBeforeW=0,this.fullscreenBeforeH=0):(e=n.width||Math.min(n.maxWidth,this.container.clientWidth),
i=n.height||Math.min(n.maxHeight,this.container.clientHeight),
e>0&&i<2&&(i=this.settings.area.height||this.settings.area.defaultHeight),
e=Math.max(n.minWidth,e),i=Math.max(n.minHeight,i)),(t||e>=2&&e!==this.chartWidth||i>=2&&i!==this.chartHeight)&&this.setSize(e,i,t),
d.updateResize(this.container)},e.prototype.setSize=function(t,e,i){
this.chart.log("Update size: "+e+", "+t);var n=this.domLayer.container.style;
n.height=e+"px",n.width=t+"px",this.chartHeight=e,this.chartWidth=t,
this.sizeChanged=!0,this.events.setNewSize(new mt(0,0,t,e),!0,i);
},e.prototype.setFullscreen=function(t){t!==this.fullScreenMode&&(this.fullScreenMode=t,
t?(this.fullscreenBeforeW=this.scene.chartWidth,this.fullscreenBeforeH=this.scene.chartHeight,
d.addClass(this.domLayer.container,"DVSL-fullscreen")):d.removeClass(this.domLayer.container,"DVSL-fullscreen"),
this.updateSize(!0))},e.prototype.buildDom=function(){if(!this.settings.container)throw new Error("Chart container is not defined in the settings.");
if(!d.isDomObject(this.settings.container))throw new Error("Chart container is not a DOM object.");
this.container=this.settings.container,null!=this.container._DVSL_ChartInstance&&this.container._DVSL_ChartInstance.remove(),
this.container.innerHTML="<!--ZoomCharts "+t.PackageInfo.Version+"-->",
this.container._DVSL_ChartInstance=this.chart,this.domLayer.createDom(this),
this.container.appendChild(this.domLayer.container),this.backgroundContainer=this.domLayer.backgroundContainer,
this.interactiveContainer=this.domLayer.interactionContainer,
this.menuContainer=this.domLayer.menuContainer,this.canvas=this.domLayer.canvas;
},e.prototype.remove=function(){this.mouseEvents.remove(),this.domLayer.remove(),
d.unlistenResize(this.container),delete this.container._DVSL_ChartInstance,
d.unlisten(window,"resize",this.containerResizeFunc),this.container.innerHTML="";
},e.prototype.updateSettings=function(t){t.area&&this.updateSize(!0),
this.domLayer.updateSettings(t)},e.prototype.notifyMouseEvent=function(t,e){
this.chart.removed||(t.consumed=!1,this.events.onMouseEvent(t,e),
t.cursor||(t.cursor="default"),this.lastCursor!==t.cursor&&(this.interactiveContainer.style.cursor=t.cursor,
this.menuContainer.style.cursor=t.cursor,this.lastCursor=t.cursor));
},e.prototype.requestPaint=function(){var t=this;null===this.paintRequested&&(this.settings.advanced.useAnimationFrame?this.paintRequested=r.Helpers.requestAnimationFrame(function(e,i){
return t.paintScene(i?e:null)}):this.paintRequested=window.setTimeout(function(){
return t.paintScene(null)},5))},e.prototype.paintNow=function(t){
return void 0===t&&(t=!1),this.paintNowInProgreess?void this.chart.error("paintNow called from within paintNow call"):(this.paintNowInProgreess=!0,
(null!==this.paintRequested||t)&&(this.settings.advanced.useAnimationFrame?r.Helpers.cancelAnimationFrame(this.paintRequested):window.clearTimeout(this.paintRequested),
this.paintScene(null)),void(this.paintNowInProgreess=!1))},e.prototype.paintScene=function(t){
if(!this.chart.removed){this.paintRequested=null;var e=null!==t?t:d.performanceNow(),i=new L;
i.timeStamp=e,i.isExport=!1,this.prevTime&&this.animationInProgress?(i.dtime=i.timeStamp-this.prevTime,
i.dtime>1e3&&(i.dtime=1e3),i.dtime<1&&(i.dtime=1)):i.dtime=30,
this.prevTime=e,this.chartWidth>0&&this.chartHeight>0&&(this.sizeChanged&&(this.resizeCanvas(),
this.sizeChanged=!1),this.innerAreaCache=null,this.events.animateFrame(i),
i.animating?(this.animationInProgress=!0,this.events.requestPaint()):this.animationInProgress=!1,
this.profiler.paintDone())}},e.prototype.resizeCanvas=function(){
var t=this.chart.settings.advanced,e=1,i=1;if(t.highDPI===!0){
var n=d.canvasScaling();e=n.x,i=n.y}else t.highDPI>0&&(e=i=t.highDPI);
var r,s,a=this.chartWidth,o=this.chartHeight,l=Math.max(100,t.maxCanvasWidth),h=Math.max(100,t.maxCanvasHeight),u=0,c=0;
do u++,r=Math.ceil(a*e/u);while(r>l);do c++,s=Math.ceil(o*i/c);while(s>h);
e/=u,i/=c,a=r/e,o=s/i,this.scaleX=e,this.scaleY=i,this.canvas.width=r,
this.canvas.height=s,this.canvas.style.width=a+"px",this.canvas.style.height=o+"px";
},e.prototype.prepareContext=function(t){var e=this.scene,i=this.canvas,n=i.getContext("2d");
n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height),
534===At&&(i.style.display="none",i.offsetHeight,i.style.display="inherit"),
this.areaStylesBefore(n,this.canvas);var r=this.scaleX,s=this.scaleY;
n.setTransform(r,0,0,s,0,0),n.__scaleX=r,n.__scaleY=s,t.context=n,
t.scaleX=r,t.scaleY=s,t.labelRenderer=this.labelRenderer,this.labelRenderer.startFrame(e.chartWidth,e.chartHeight,r,s);
},e.prototype.areaStylesBefore=function(t,e){var i=this.settings.area.style.fillColor;
i&&(t.fillStyle=i,t.fillRect(0,0,e.width,e.height))},e.prototype.areaStylesAfter=function(t,e){
var i=this.settings.area.style.overlayColor;i&&(t.fillStyle=i,
t.setTransform(1,0,0,1,0,0),t.fillRect(0,0,e.width,e.height));
},e.prototype.finalizeContext=function(t){this.areaStylesAfter(t.context,this.canvas),
this.labelRenderer.finishFrame()},e.prototype.exportToImageGetDimensions=function(){
var t=new L;t.isExport=!0,t.context=this.canvas.getContext("2d"),
t.labelRenderer=this.labelRenderer;var e=this.events.updateLayout(t);
return t.isExport=!1,this.events.updateLayout(t),{width:e.w(),
height:e.h()}},e.prototype.exportToContext=function(t,e,i){var n=new _(this.settings,this.chart.assetsLoader,this.container);
n.allowCache=!1,n.startFrame(1,1,i,i);var r=new L;r.isExport=!0,
r.timeStamp=this.prevTime,r.dtime=0,r.context=t,r.scaleX=i,r.scaleY=i,
r.labelRenderer=n;var s=this.events.updateLayout(r);this.areaStylesBefore(t,e),
t.save(),t.setTransform(i,0,0,i,-s.x0*i,-s.y0*i),this.events.doPaint(r),
this.areaStylesAfter(t,e),r.isExport=!1,this.events.updateLayout(r),
B.restore(t)},e.prototype.getChartInnerArea=function(){if(this.innerAreaCache)return this.innerAreaCache;
var t=new r.AreaCollection;t.addRect(new r.Rect(this.scene.x0,this.scene.y0,this.scene.x0+this.scene.width,this.scene.y0+this.scene.height));
for(var e=this.menuContainer.getBoundingClientRect(),i=e.left,n=e.top,s=this.menuContainer.children,a=0;a<s.length;a+=1){
var o=s[a];if(o.offsetHeight>0||o.offsetWidth>0){var l=o.getBoundingClientRect();
t.subtractRect(new mt(l.left-i,l.top-n,l.right-i,l.bottom-n));
}}return this.innerAreaCache=t,t},e}();Mt.MouseEventConfig=[{
ev:w.EVENT_GLOBAL_DOWN,name:"GlobalPointerDown"},{ev:w.EVENT_DOWN,
name:"PointerDown",captures:!0},{ev:w.EVENT_UP,name:"PointerUp",
needsCapture:!0,releasesCapture:!0},{ev:w.EVENT_DRAG,name:"PointerDrag",
needsCapture:!0,captures:!0},{ev:w.EVENT_MOVE,name:"PointerMove",
captures:!0},{ev:w.EVENT_LEAVE,name:"PointerOut"},{ev:w.EVENT_CANCEL,
name:"PointerCancel",needsCapture:!0,releasesCapture:!0},{ev:w.EVENT_CLICK,
name:"Click"},{ev:w.EVENT_INSTACLICK,name:"InstantClick"},{ev:w.EVENT_LONGPRESS,
name:"LongPress"},{ev:w.EVENT_RCLICK,name:"RightClick"},{ev:w.EVENT_DBLCLICK,
name:"DoubleClick"},{ev:w.EVENT_TPLCLICK,name:"TripleClick"},{
ev:w.EVENT_WHEEL,name:"Wheel"}],r.ChartOuterShell=Mt;var Pt=function(){
function t(t,e){this.fullScreenMode=!1,this.chart=t,this.settings=t.settings,
this.scene=t.scene,this.parentShell=e,this.buildDom(),this.events=new D(t,this),
this.parentShell.events.addSubchart(this.chart),this.updateSize();
}return t.prototype.getChartInnerArea=function(){return this.parentShell.getChartInnerArea();
},t.prototype.requestPaint=function(){this.parentShell.requestPaint();
},t.prototype.paintNow=function(t){this.parentShell.paintNow(t);
},t.prototype.buildDom=function(){this.container=this.parentShell.container,
this.interactiveContainer=this.parentShell.interactiveContainer,
this.backgroundContainer=this.parentShell.backgroundContainer,
this.menuContainer=this.parentShell.menuContainer},t.prototype.remove=function(){
this.parentShell.events.removeSubchart(this.chart)},t.prototype.updateSettings=function(t){
t.area&&this.updateSize()},t.prototype.updateSize=function(t){
void 0===t&&(t=!1);var e=this.settings.area;this.events.setNewSize(new mt(e.left,e.top,e.left+e.width,e.top+e.height),!1,t);
},t.prototype.prepareContext=function(t){var e=this.settings.area.style;
if(e.fillColor){var i=t.context,n=this.scene;i.fillStyle=e.fillColor,
i.fillRect(n.chartLeft,n.chartTop,n.chartWidth,n.chartHeight);
}},t.prototype.finalizeContext=function(t){var e=this.settings.area.style;
if(e.overlayColor){var i=t.context,n=this.scene;i.fillStyle=e.overlayColor,
i.fillRect(n.chartLeft,n.chartTop,n.chartWidth,n.chartHeight);
}},t.prototype.forceChromeRedraw=function(){this.parentShell.forceChromeRedraw();
},t.prototype.setFullscreen=function(t){},t}();r.ChartInnerShell=Pt;
var It=function(t){function e(e){var i=t.call(this)||this;return i.animationOrder=2e3,
i.paintOrder=70,i.updateOrder=200,i.scene=null,i.loadingTime=null,
i.chart=e,i.scene=e.scene,i}return n(e,t),e.prototype.doAnimations=function(t){
this.scene.loading&&(t.animating=!0)},e.prototype.paintScene=function(t){
var e=this.scene,i=e.getMessage(),n=e.settings.advanced.style,r=n.loadingArcStyle,s=e.loading&&"hidden"!==r.location;
if(s||(this.loadingTime=null),i||s){null===this.loadingTime&&(this.loadingTime=t.timeStamp);
var a,o,l=t.context,h="corner"===r.location,u=r.r,c=r.lineWidth;
if(h){a=e.x0+e.width-1.2*(u+c),o=e.y0+1.2*(u+c);var d=this.chart.shell.getChartInnerArea();
o+=d.findTopPosition(a,a)}else a=e.x0+e.width/2,o=e.y0+e.height/2+u;
if(i){var p=n.messageTextStyle;l.textBaseline="top",l.textAlign="left";
var f=B.getTextHeight(l,p.font),g=B.getTextWidth(l,p,i),m=void 0,v=void 0,y=void 0,S=n.messageBackgroundStyle,b=S.padding||0;
s&&(h?(a-=b,m=a-1.2*u-g,v=f>2*u?4:o-f/2,y=g+2.2*u):(o-=f/2,m=a-g/2,
v=o+1.3*f,y=g));var C=B.beginStrokeAndFill(l,S);C.rect(m-b,o-u-b,y+2*b,v-o+u+2*b+f),
B.endStrokeAndFill(l,C,S),B.drawText(l,p,i,m,v),B.resetTextStyle(l);
}if(s){l.save(),l.lineCap="round",l.lineWidth=c;var x=(t.timeStamp-this.loadingTime)/700*Math.PI,w=l.createLinearGradient(a+u*Math.cos(x+Math.PI),o+u*Math.sin(x+Math.PI),a+u*Math.cos(x),o+u*Math.sin(x));
w.addColorStop(0,r.lineColor),w.addColorStop(1,"transparent"),
l.strokeStyle=w,l.beginPath(),l.arc(a,o,u,x,x+Math.PI),l.stroke(),
B.restore(l)}}},e}(k);r.MessagesOverlay=It;var Dt="undefined"!=typeof document?document.currentScript:null,Nt=null,Ft=function(){
if(Nt)return Nt;if("undefined"==typeof document)return"";var e=t.PackageInfo.LibraryName;
"<?"===e.substr(0,2)&&(e="everything");var i=e.indexOf("-");i>-1&&(e=e.substr(0,i));
for(var n=new RegExp("^(.*?/"+e+"(-dev|.min|).js)"),s=document.getElementsByTagName("script"),a=0;a<s.length;a++){
var o=s[a].src;if(o){var l=o.match(n);if(l)return Nt=l[1]+"/../assets/";
}}return Dt&&Dt.src?(r.Helpers.warn("Cannot locate the ZoomCharts script path based on file name '"+e+".js'. The script path was detected using `document.currentScript` which is not supported on all browsers. Please specify 'assetsUrlBase' in settings when creating the chart for full browser compatibility."),
Nt=Dt.src.match(/^([^?#]*)/)[1]+"/../assets/"):Nt=""},Et=function(){
function t(){}return t.hasPendingRequests=function(){return d.hasProperties(this._imageLoading)||d.hasProperties(this.pendingHTMLAssets);
},t.getAssetImage=function(t,e,i){var n=this;if(this._imageCache.hasOwnProperty(t))return this._imageCache[t];
if(this._imageLoading.hasOwnProperty(t))return null;if(!t)return null;
var r=function(e){if(delete n._imageLoading[t],n._imageCache[t]=e,
i)return i(e)},s=function(){var t=c.ErrorImage,i=n._imageCache[t];
if(i)r(i);else if(n._imagesPendingForErrors.push(r),!n._imageLoading.hasOwnProperty(t)){
var s=function(e){delete n._imageLoading[t],n._imageCache[t]=e;
for(var i=0;i<n._imagesPendingForErrors.length;i++){var r=n._imagesPendingForErrors[i];
r(e)}n._imagesPendingForErrors=null};d.buildImage(t,e,s,function(){
d.error("Could not load '"+t+"'")}),n._imageCache.hasOwnProperty(t)||(n._imageLoading[t]=!0);
}};return this._imageLoading[t]=!0,d.buildImage(t,e,r,s),this._imageCache.hasOwnProperty(t)?this._imageCache[t]:null;
},t.loadHtmlAssets=function(t,e){for(var i=this,n=!1,r=0;r<t.length;r++){
var s=t[r];this.loadedHTMLAssets[s.url]||(this.pendingHTMLAssets[s.url]?n=!0:this.loadHTMLAsset(s,function(t){
return i.htmlAssetLoaded(t)})&&(this.pendingHTMLAssets[s.url]=!0,
n=!0))}return!!n&&(this.callbacks.push(e),!0)},t.htmlAssetLoaded=function(t){
if(delete this.pendingHTMLAssets[t],this.loadedHTMLAssets[t]=!0,
!d.hasProperties(this.pendingHTMLAssets)){for(var e=0;e<this.callbacks.length;e+=1)this.callbacks[e](this.errors);
this.callbacks=[],this.errors=[]}},t.loadHTMLAsset=function(t,e){
var i,n=this,s=t.url,a=s.toUpperCase(),o=a.indexOf(".CSS"),l=a.indexOf(".JS"),h=!1,u=null,c=!1,p=function(){
u&&window.clearInterval(u),c||(c=!0,!h&&t.required&&t.required()&&n.errors.push("The `required` delegate did not return `false` after loading "+s),
e(s))},f=function(){u&&window.clearInterval(u),c||(c=!0,n.errors.push("Failed to load asset: "+s),
e(s))};if(o>l){var g=document.createElement("link");if(g.rel="stylesheet",
g.href=s,g.type="text/css",!t.required){r.Helpers.warn("Asset url "+s+" does not define the `required` delegate which prevents the detection of asset load in older browsers.");
var m=5;t.required=function(){return m-- >0},h=!0}var v=100;u=window.setInterval(function(){
v--<0?f():t.required()||p()},100),i=g}else{if(!(l>-1))return this.errors.push("Assets: Do not know how to load "+s+'. The URL should contain either ".css" or ".js" - it can be either in the path, the file name or the query string.'),
!1;var y=document.createElement("script");y.src=s,y.type="text/javascript",
y.async=!1,i=y}return d.listen(i,"load",p),d.listen(i,"error",f),
document.getElementsByTagName("head")[0].appendChild(i),!0},t;
}();Et._imageCache={},Et._imageLoading={},Et._imagesPendingForErrors=[],
Et.loadedHTMLAssets={},Et.pendingHTMLAssets={},Et.callbacks=[],
Et.errors=[];var Ot=function(){function e(t){this.chart=t,this.settings=t.settings;
var e=this.settings.assetsUrlBase||Ft();e.length>0&&"/"!==e[e.length-1]&&(e+="/"),
this.assetsUrlBase=e}return e.prototype.getAssetUrl=function(e){
return 0===e.indexOf("builtin://")?this.settings.advanced.builtinAssets[e.slice(10)]:0===e.indexOf("assets://")?(this.assetsUrlBase||this.chart.error("Cannot locate the ZoomCharts script path based on file name '"+t.PackageInfo.LibraryName+".js'. Please specify 'assetsUrlBase' in settings when creating the chart."),
this.assetsUrlBase+e.slice(9)):e},e.prototype.hasPendingRequests=function(){
return Et.hasPendingRequests()},e.prototype.getAssetImage=function(t,e){
var i=this;return Et.getAssetImage(this.getAssetUrl(t),this.settings.advanced.crossOriginHeader,function(t){
i.chart.events.requestPaint(),e&&e(t)})},e.prototype.ensureAssetsList=function(t,e){
for(var i=[],n=0;n<t.length;n++){var r=t[n];d.isString(r)?i.push({
url:r,required:null}):r.required&&!r.required()||i.push(r)}var s=this.loadAssetsList(i,function(){
e(!0)});s||e(!1)},e.prototype.loadAssetsList=function(t,e){for(var i=this,n=0;n<t.length;n++){
var r=t[n];r.url=this.getAssetUrl(r.url)}var s=function(t){for(var n=0;n<t.length;n+=1)i.chart.error(t[n]);
i.chart.log("Assets loaded"),e()},a=Et.loadHtmlAssets(t,s);return a&&this.chart.log("Loading assets"),
a},e}();r.AssetsLoader=Ot;var Rt=function(){function t(e,i,n,r,s){
if(void 0===r&&(r="<>"),void 0===s&&(s=null),this.t=0,this.startSpeed=0,
this.duration=n,this.from=e,this.to=i,null==this.from&&(this.from=this.to),
this.startTime=s,this.x=this.from,this.t=this.startTime,this.formula=t.easingFormulas[r],
!this.formula)throw new Error("Easing formula not defined: "+r);
}return t.prototype.jump=function(t){this.to=t,this.from=t,this.x=t,
this.t=this.startTime=null},t.prototype.reset=function(t,e,i){
void 0===i&&(i=null),this.from=t,this.to=e,this.startTime=i,this.x=this.from,
this.t=this.startTime},t.prototype.retarget=function(t,e){return this.finished(this.t)?this.startSpeed=0:(this.startSpeed=this._getSpeed(),
e||(e=this.t)),e?(this.from=this.get(e),this.startTime=e):(this.startTime=null,
this.from=this.x),this.to=t,this},t.prototype.switchCoordinates=function(t,e){
this.from=this.from*e+t,this.x=this.x*e+t,this.to=this.to*e+t,
this.startSpeed=this.startSpeed*e},t.prototype.updateAndGet=function(t,e){
var i=this.x!==t;return t!==this.to&&this.retarget(t,e),{value:this.get(e),
changes:i}},t.prototype.updateAndGetFixed=function(t,e){var i=this.x!==t;
return t!==this.to&&(this.startSpeed=0,this.startTime=e,this.from=this.x,
this.to=t),{value:this.get(e),changes:i}},t.prototype.getClean=function(t){
return this.duration<=0?this.to:this.startTime?this._calculate(t):this.from;
},t.prototype._calculate=function(t){var e=Math.min(1,Math.max(t-this.startTime,0)/this.duration);
if(e>=1)return this.to;var i=this.formula(e),n=i*(this.to-this.from);
if(this.startSpeed&&e<1){var r=this.startSpeed*e*this.duration;
n=n*i+r*(1-i)}return n=this.from+n},t.prototype.get=function(t){
if(this.duration<=0)return this.t=t,this.x=this.to,this.to;this.startTime||(this.startTime=t);
var e=this._calculate(t);return this.t=t,this.x=e,e},t.prototype.finished=function(t){
return this.startTime||(this.startTime=t),t>=this.startTime+this.duration;
},t.prototype._getSpeed=function(){var t=this.t,e=this.duration/1e3,i=this.getClean(t-e/2),n=this.getClean(t+e/2);
return this.t=t,(n-i)/e},t}();Rt.easingFormulas={"=":function(t){
return t},"<>":function(t){return t<.5?2*t*t:-.5*((2*t-1)*(2*t-3)-1);
},scroll:function(t){return 1-(1-t)*(1-t)}},r.Animator=Rt;var Bt=function(){
function t(t,e,i,n,r){void 0===n&&(n="<>"),void 0===r&&(r=null),
this._animator=new Rt(0,1,i,n,r),this.reset(t,e,r)}return t.prototype.reset=function(t,e,i){
return d.isString(t)||null==t?this._fromColor=E.parse(t):this._fromColor=t,
d.isString(e)||null==e?this._toColor=E.parse(e):this._toColor=e,
this._animator.reset(0,1,i),this},t.prototype.getColor=function(t){
var e=Math.min(1,this._animator.get(t));return this._lastValue=E.blend(this._fromColor,this._toColor,e);
},t.prototype.get=function(t){return E.format(this.getColor(t));
},t.prototype.updateAndGet=function(t,e){(d.isString(t)||null==t)&&(t=E.parse(t));
var i=!E.areEqual(this._lastValue,t);return E.areEqual(this._toColor,t)||this.reset(this._lastValue,t,e),
{value:this.get(e),changes:i}},t.prototype.finished=function(t){
return this._animator.finished(t)},t}();r.ColorAnimator=Bt;var Ht=function(t){
function e(e){var i=t.call(this)||this;return i.animationOrder=0,
i.paintOrder=1e4,i.touches={},i.fps=0,i.prevFrame=null,i.frameCount=0,
i.chart=e,i.settings=e.settings.advanced,i.captureTouches=i.settings.showTouches,
i}return n(e,t),e.prototype.onSceneChange=function(t){this.captureTouches=this.settings.showTouches;
},e.prototype.paintScene=function(t){var e="";if(this.settings.showTimestamp&&(e+=Math.round(t.timeStamp)),
this.settings.showFPS){if(this.frameCount+=1,this.prevFrame){
var i=Math.max(t.timeStamp-this.prevFrame,1)/1e3,n=1/i,r=Math.min(1,3*i);
this.fps=this.fps*(1-r)+n*r}this.prevFrame=t.timeStamp,e+="FPS:"+Math.round(this.fps);
}var s=t.context;if(this.captureTouches){var a=this.settings.showTouchTrail,o=0;
for(var l in this.touches){var h=this.touches[l];if(this.touches.hasOwnProperty(l)){
s.beginPath(),s.moveTo(h.dx,h.dy);for(var u=0;u<h.trace.length;u++){
var c=h.trace[u];s.lineTo(c.x,c.y)}a&&h.cancelled?(s.strokeStyle="red",
s.fillStyle="red",s.lineWidth=1):a&&h.up?(s.strokeStyle="gray",
s.fillStyle="gray",s.lineWidth=3):(s.strokeStyle="rgba(180,180,180,0.4)",
s.fillStyle="rgba(180,180,180,0.3)",s.lineWidth=3),s.moveTo(h.x+30,h.y),
s.stroke(),s.lineWidth=1.5,s.beginPath(),s.arc(h.x,h.y,h.animator.get(t.timeStamp),0,2*Math.PI),
s.stroke(),s.fill(),h.up||(o+=1),h.animator.finished(t.timeStamp)||(t.animating=!0);
}}s.beginPath(),s.fillStyle="black";for(var l in this.touches)if(this.touches.hasOwnProperty(l))for(var h=this.touches[l],u=0;u<h.trace.length;u++){
var c=h.trace[u];s.rect(c.x-1,c.y-1,2,2)}s.fill(),a&&(e+="\ntouches:"+o);
}if(e.length>0){var d=this.chart.shell.getChartInnerArea(),p=Math.max(30,d.findTopPosition(50,200));
B.resetTextStyle(s),s.fillStyle="#000",s.textAlign="start",s.textBaseline="middle",
s.font="bold 11px Arial",s.fillText(e,50,p)}},e.prototype.previewPointerDown=function(t){
if(this.captureTouches){for(var e in this.touches){var i=this.touches[e];
this.touches.hasOwnProperty(e)&&i.up&&delete this.touches[e]}
this.touches[t.identifier]={dx:t.x,dy:t.y,x:t.x,y:t.y,up:!1,cancelled:!1,
trace:[],animator:new r.Animator(10,40,200)},t.changes.requestPaint=!0;
}},e.prototype.previewPointerDrag=function(t){if(this.captureTouches){
var e=this.touches[t.identifier];e.x=t.x,e.y=t.y,this.settings.showTouchTrail&&e.trace.push({
x:e.x,y:e.y}),t.changes.requestPaint=!0}},e.prototype.previewPointerUp=function(t){
if(this.captureTouches){var e=this.touches[t.identifier];e.up=!0,
e.animator.retarget(0),this.previewPointerDrag(t),t.changes.requestPaint=!0;
}},e.prototype.previewPointerCancel=function(t){if(this.captureTouches){
var e=this.touches[t.identifier];e.up=!0,e.cancelled=!0,e.animator.retarget(0),
this.previewPointerDrag(t),t.changes.requestPaint=!0}},e}(k);r.TouchMarkers=Ht;
var zt="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",Ut=function(){
function t(){}return t.createImage=function(e,i,n,s){var a=t.getSizes(e,n),o=document.createElement("canvas");
o.width=a.width,o.height=a.height;var l=o.getContext("2d");s||(l.fillStyle="#fff",
l.fillRect(0,0,a.width,a.height)),e.exportToContext(l,o,a.scale);
try{return o.toDataURL(i)}catch(t){throw r.Helpers.error(t),new Error("Browser security prevents exporting this chart. The canvas might be tainted. See `advanced.crossOriginHeader` setting in the documentation.");
}},t.createPdf=function(e,i){var n,r=e.exportToImageGetDimensions(),s=[10,10,10,10],a=e.settings.advanced.exportPdfSize,o=0,l=0,h=0,u=0,c=72,d=1,p=0,f=0;
r.width>=r.height?(a=[a[1],a[0]],n="l"):n="p",o=a[0]/25.4*c,l=a[1]/25.4*c,
d=Math.min(l/r.height,o/r.width),"l"===n?(p=r.width*d/o*a[0]-s[1]-s[3],
h=(a[0]-p-s[1]-s[3])/2,f=r.height/r.width*p,u=(a[1]-s[0]-s[2]-f)/2):(f=r.height*d/l*a[1]-s[0]-s[2],
u=(a[1]-f-s[0]-s[2])/2,p=r.width/r.height*f,h=(a[0]-s[1]-s[3]-p)/2);
var g=t.createImage(e,"image/jpeg",{scaling:3*d},!1),m=new jsPDF(n,"mm",a);
return m.addImage(g,"JPEG",s[3]+h,s[0]+u,p,f),m.output("datauristring");
},t.createCsv=function(e){for(var i=/[^a-zA-Z0-9\.]/,n="data:text/csv;charset=utf-8,",r=encodeURIComponent("\r\n"),s=0;s<e.length;s++){
for(var a=e[s],o=0;o<a.length;o++){o>0&&(n+=t._csvSeparator);var l=a[o];
if(null!=l){var h=void 0;h=l instanceof Date?l.toISOString():""+l,
n+=i.test(h)?'"'+encodeURIComponent(h.replace('"','""'))+'"':h;
}}n+=r}return n},t.retrieveData=function(t,e){var i=t.exportVisibleData,n=t.settings.advanced.dataExportFunction;
if(!i&&!n)throw new Error("This chart type does not support data export. Provide `advanced.dataExportFunction` delegate to enable it.");
var r=i?t.exportVisibleData():null;n?n(r,e):e(r)},t.createExcel=function(t){
function e(t){return(t.getTime()+22091616e5)/864e5}for(var i=Object.create(null),n={
s:{c:1/0,r:1/0},e:{c:0,r:0}},r=0;r<t.length;r++){n.s.r>r&&(n.s.r=r),
n.e.r<r&&(n.e.r=r);for(var s=t[r],a=0;a<s.length;a++){n.s.c>a&&(n.s.c=a),
n.e.c<a&&(n.e.c=a);var o=s[a];if(null!=o){var l={t:"s",v:o};"number"==typeof o?(l.t="n",
Math.round(o)===o&&(l.z="0")):"boolean"==typeof o?l.t="b":o instanceof Date&&(l.t="n",
l.z=XLSX.SSF._table[14],l.v=e(l.v)),i[XLSX.utils.encode_cell({
c:a,r:r})]=l}}}n.s.c<1/0&&(i["!ref"]=XLSX.utils.encode_range(n));
var h={SheetNames:["export"],Sheets:{export:i}},u=XLSX.write(h,{
bookType:"xlsx",bookSST:!0,type:"binary"});return"data:"+zt+";base64,"+d.base64Encode(u);
},t["export"]=function(e,i,n,s,a){void 0===i&&(i="png"),void 0===n&&(n={}),
void 0===s&&(s=null);var o=e.shell;if(!(o instanceof Mt))throw new Error("Export functionality is only available on the top level chart, not within nested charts.");
var l=t._mimeMap[i];if("xls"===i)r.Helpers.warn("XLS format is not supported. XLSX will be used instead.");else if(null==i)i="png",
l=t._mimeMap.png;else if(void 0===l)throw new Error("Export image type `"+i+"` is not supported. Supported types: "+Object.keys(t._mimeMap).join(", "));
if(l.transparent?null==s&&(s=!0):s&&(r.Helpers.warn("Only PNG images can be exported as transparent."),
s=!1),l.csv)return void t.retrieveData(e,function(e){a(t.createCsv(e),l.mime,l.extension);
});if(l.excel)return void e.assetsLoader.ensureAssetsList([{url:"assets://xlsx.core.min.js",
required:function(){return"undefined"==typeof XLSX}}],function(){
t.retrieveData(e,function(e){a(t.createExcel(e),l.mime,l.extension);
})});if(l.image){var h=t.createImage(o,l.mime,t.getDimensions(e,n),s);
return a(h,l.mime,l.extension),h}if(l.pdf)return void e.assetsLoader.ensureAssetsList([{
url:"assets://jspdf.js",required:function(){return"undefined"==typeof jsPDF;
}}],function(){a(t.createPdf(o,n),l.mime,l.extension)});throw new Error("not implemented");
},t.download=function(t,e,i,n){var r=this;void 0===i&&(i={}),
this["export"](t,e,i,n,function(e,i,n){r.launchDownload(t,i,n,e);
})},t.getSizes=function(t,e){var i=t.exportToImageGetDimensions(),n=i.width,r=i.height,s=d.tryParseFloat(e.width),a=d.tryParseFloat(e.height),o=1;
if("mm"===e.unit){var l=d.tryParseFloat(e.dpi,300)/25.4;s>0&&(s*=l),
a>0&&(a*=l)}s>0&&a>0?o=Math.min(s/n,a/r):s>0?(o=s/n,a=r*o):a>0?(o=a/r,
s=n*o):(s=n,a=r);var h=d.tryParseFloat(e.scaling,1);return 1!==h&&(o*=h,
s*=h,a*=h),{width:s,height:a,scale:o,chartWidth:n,chartHeight:r
}},t.getDimensions=function(t,e){var i=t.shell;if(!(i instanceof Mt))throw new Error("Export functionality is only available on the top level chart, not within nested charts.");
return this.getSizes(i,e||{})},t.dataUriToBlob=function(t,e){
var i=e.indexOf(","),n=i>13&&";base64"===e.substr(i-7,7);e=e.substr(i+1),
e=n?window.atob(e):decodeURIComponent(e);for(var r=new ArrayBuffer(e.length),s=new Uint8Array(r),a=0;a<e.length;a++)s[a]=e.charCodeAt(a);
return new Blob([r],{type:t})},t.launchDownload=function(e,i,n,r,s){
var a=document.body;n.indexOf(".")===-1&&(n="export."+n);var o=d.createDom("a",null,null,null);
if(navigator.msSaveOrOpenBlob&&window.atob){if(navigator.msSaveOrOpenBlob(t.dataUriToBlob(i,r),n))return;
}else if(b.detect().isChrome&&r.length>2097152);else if(void 0!==o.download)return o.download=n,
o.type=i,o.href=r,a.appendChild(o),o.click(),void a.removeChild(o);
var l=e.settings.advanced.exportProxyURL;if(!l)return void alert(e.settings.localization.exportNotAvailable);
var h=function(){var t=document.createElement("form");t.action=l,
t.target="_top",t.method="POST",t.style.display="none";var e=document.createElement("input");
e.name="name",e.value=n,t.appendChild(e);var i=document.createElement("textarea");
i.name="data",i.value=r,t.appendChild(i),a.appendChild(t),t.submit(),
a.removeChild(t)};s?s(h,function(){}):h()},t}();Ut._csvSeparator=";",
Ut._mimeMap={png:{mime:"image/png",extension:"png",image:!0,transparent:!0
},jpg:{mime:"image/jpeg",extension:"jpg",image:!0},jpeg:{mime:"image/jpeg",
extension:"jpg",image:!0},csv:{mime:"text/csv",extension:"csv",
csv:!0},txt:{mime:"text/csv",extension:"csv",csv:!0},xlsx:{mime:zt,
extension:"xlsx",excel:!0},xls:{mime:zt,extension:"xlsx",excel:!0
},pdf:{mime:"application/pdf",extension:"pdf",pdf:!0}},r.Export=Ut,
function(t){var e=function(t){function e(e,i){var n,r=e.settings.localization.toolbar;
if(!i.dropDownItems){var s=e.settings.toolbar.exportOptions,a=[];
(!s||s.indexOf("jpg")>-1)&&a.push({label:r.exportJpeg,onClick:function(){
return Ut.download(e,"jpg",{scaling:2})}}),(!s||s.indexOf("png")>-1)&&a.push({
label:r.exportPNG,onClick:function(){return Ut.download(e,"png",{
scaling:3})}}),(!s||s.indexOf("pdf")>-1)&&a.push({label:r.exportPDF,
onClick:function(){return Ut.download(e,"pdf")}}),(e.exportVisibleData||e.settings.advanced.dataExportFunction)&&((!s||s.indexOf("csv")>-1)&&a.push({
label:r.exportCSV,onClick:function(){return Ut.download(e,"csv");
}}),(!s||s.indexOf("xlsx")>-1)&&a.push({label:r.exportXLS,onClick:function(){
return Ut.download(e,"xlsx")}})),i.dropDownItems=a}return i.title=i.title||r.exportTitle,
i.label=i.label||r.exportButton,i.cssClass=i.cssClass||"DVSL-bar-btn-export",
n=t.call(this,e,i)||this}return n(e,t),e}(t.Dropdown);t.ExportDropdown=e,
r.Bar.ToolbarItemNames["export"]=function(t,e){return new r.Bar.ExportDropdown(t,e);
}}(o=r.Bar||(r.Bar={}));var _t=function(t){function e(e){var i=t.call(this)||this;
return i.animationOrder=2e3,i.paintOrder=65,i.updateOrder=0,i.chart=e,
i}return n(e,t),e.prototype.onKeyDown=function(t){this.chart.isFullscreen()&&27===t.keyCode?(this.chart.setFullscreen(!1),
t.consumed=!0):8===t.keyCode&&this.chart.back(!0,"user")&&(t.consumed=!0);
},e}(k);r.KeyShortcuts=_t;var Gt="C314F39F62CBF2AEFA1D5BA41E38EFFD080E88849EE210BA17971BF63A55C44E159C9F9ED004F8D50856EC8ECE673690F60C29AAC124B7C46D549D20EB22CC2A387B2FB643700546312114F831133F242CFFD023A1788167025FF398F5F09D1003C47C9B3208860A547577F540D07FF66403097FE27E7BB6B8D76036AD31B62B04EAD1BB8B2C314F6DA7489346978286491D0DF7504E9EE85A4459805F4FFCEE664122FC27B80DAD6751A7A6C0D38E9C2ECD7C0AD1F2B774D6FF81C5A2CE14D608F08E13BEE45663450519774ADF87D34CE6150FC819558EBD336511D51405A42E7A38EBB786ED5050345CBC532ED7C0EECB05C5D6D4D00534249ED4585DFABD",jt=function(){
function t(){}return t.verifySignature=function(t,e,i){var n=new Wt;
return n.setPublic(i||Gt,"10001"),n.verify(t,e)},t.hash=function(t){
return Wt.hash(t)},t}();r.RsaCrypto=jt,Object.freeze(jt);var Wt=function(){
function t(t,e){null!=t&&(null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e));
}function e(){return new t(null)}function i(t,e,i,n,r,s){for(;--s>=0;){
var a=e*this[t++]+i[n]+r;r=Math.floor(a/67108864),i[n++]=67108863&a;
}return r}function n(t,e,i,n,r,s){for(var a=32767&e,o=e>>15;--s>=0;){
var l=32767&this[t],h=this[t++]>>15,u=o*l+h*a;l=a*l+((32767&u)<<15)+i[n]+(1073741823&r),
r=(l>>>30)+(u>>>15)+o*h+(r>>>30),i[n++]=1073741823&l}return r;
}function r(t,e,i,n,r,s){for(var a=16383&e,o=e>>14;--s>=0;){var l=16383&this[t],h=this[t++]>>14,u=o*l+h*a;
l=a*l+((16383&u)<<14)+i[n]+r,r=(l>>28)+(u>>14)+o*h,i[n++]=268435455&l;
}return r}function s(t){return et.charAt(t)}function a(t,e){var i=it[t.charCodeAt(e)];
return null==i?-1:i}function o(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];
t.t=this.t,t.s=this.s}function l(t){this.t=1,this.s=t<0?-1:0,
t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function h(t){var i=e();
return i.fromInt(t),i}function u(e,i){var n;if(16==i)n=4;else if(8==i)n=3;else if(256==i)n=8;else if(2==i)n=1;else if(32==i)n=5;else{
if(4!=i)return void this.fromRadix(e,i);n=2}this.t=0,this.s=0;
for(var r=e.length,s=!1,o=0;--r>=0;){var l=8==n?255&e[r]:a(e,r);
l<0?"-"==e.charAt(r)&&(s=!0):(s=!1,0==o?this[this.t++]=l:o+n>this.DB?(this[this.t-1]|=(l&(1<<this.DB-o)-1)<<o,
this[this.t++]=l>>this.DB-o):this[this.t-1]|=l<<o,o+=n,o>=this.DB&&(o-=this.DB));
}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),
this.clamp(),s&&t.ZERO.subTo(this,this)}function c(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t;
}function d(t){if(this.s<0)return"-"+this.negate().toString(t);
var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{
if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,r=!1,a="",o=this.t,l=this.DB-o*this.DB%e;
if(o-- >0)for(l<this.DB&&(i=this[o]>>l)>0&&(r=!0,a=s(i));o>=0;)l<e?(i=(this[o]&(1<<l)-1)<<e-l,
i|=this[--o]>>(l+=this.DB-e)):(i=this[o]>>(l-=e)&n,l<=0&&(l+=this.DB,
--o)),i>0&&(r=!0),r&&(a+=s(i));return r?a:"0"}function p(){var i=e();
return t.ZERO.subTo(this,i),i}function f(){return this.s<0?this.negate():this;
}function g(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;
if(e=i-t.t,0!=e)return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;
return 0}function m(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),
0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,
i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function v(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM);
}function y(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];
for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function S(t,e){
for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),
e.s=this.s}function b(t,e){var i,n=t%this.DB,r=this.DB-n,s=(1<<r)-1,a=Math.floor(t/this.DB),o=this.s<<n&this.DM;
for(i=this.t-1;i>=0;--i)e[i+a+1]=this[i]>>r|o,o=(this[i]&s)<<n;
for(i=a-1;i>=0;--i)e[i]=0;e[a]=o,e.t=this.t+a+1,e.s=this.s,e.clamp();
}function C(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);
var n=t%this.DB,r=this.DB-n,s=(1<<n)-1;e[0]=this[i]>>n;for(var a=i+1;a<this.t;++a)e[a-i-1]|=(this[a]&s)<<r,
e[a-i]=this[a]>>n;n>0&&(e[this.t-i-1]|=(this.s&s)<<r),e.t=this.t-i,
e.clamp()}function x(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],
e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],
e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],
e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),
e.t=i,e.clamp()}function w(e,i){var n=this.abs(),r=e.abs(),s=n.t;
for(i.t=s+r.t;--s>=0;)i[s]=0;for(s=0;s<r.t;++s)i[s+n.t]=n.am(0,r[s],i,s,0,n.t);
i.s=0,i.clamp(),this.s!=e.s&&t.ZERO.subTo(i,i)}function L(t){
for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){
var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,
t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,
t.clamp()}function T(i,n,r){var s=i.abs();if(!(s.t<=0)){var a=this.abs();
if(a.t<s.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));
null==r&&(r=e());var o=e(),l=this.s,h=i.s,u=this.DB-m(s[s.t-1]);
u>0?(s.lShiftTo(u,o),a.lShiftTo(u,r)):(s.copyTo(o),a.copyTo(r));
var c=o.t,d=o[c-1];if(0!=d){var p=d*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),f=this.FV/p,g=(1<<this.F1)/p,v=1<<this.F2,y=r.t,S=y-c,b=null==n?e():n;
for(o.dlShiftTo(S,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),
t.ONE.dlShiftTo(c,b),b.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--S>=0;){
var C=r[--y]==d?this.DM:Math.floor(r[y]*f+(r[y-1]+v)*g);if((r[y]+=o.am(0,C,r,S,0,c))<C)for(o.dlShiftTo(S,b),
r.subTo(b,r);r[y]<--C;)r.subTo(b,r)}null!=n&&(r.drShiftTo(c,n),
l!=h&&t.ZERO.subTo(n,n)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),
l<0&&t.ZERO.subTo(r,r)}}}function k(i){var n=e();return this.abs().divRemTo(i,null,n),
this.s<0&&n.compareTo(t.ZERO)>0&&i.subTo(n,n),n}function A(t){
this.m=t}function M(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t;
}function P(t){return t}function I(t){t.divRemTo(this.m,null,t);
}function D(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function N(t,e){
t.squareTo(e),this.reduce(e)}function F(){if(this.t<1)return 0;
var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,
e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,
e>0?this.DV-e:-e}function E(t){this.m=t,this.mp=t.invDigit(),
this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,
this.mt2=2*t.t}function O(i){var n=e();return i.abs().dlShiftTo(this.m.t,n),
n.divRemTo(this.m,null,n),i.s<0&&n.compareTo(t.ZERO)>0&&this.m.subTo(n,n),
n}function R(t){var i=e();return t.copyTo(i),this.reduce(i),i;
}function B(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){
var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;
for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,
t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t);
}function H(t,e){t.squareTo(e),this.reduce(e)}function z(t,e,i){
t.multiplyTo(e,i),this.reduce(i)}function U(){return 0==(this.t>0?1&this[0]:this.s);
}function _(i,n){if(i>4294967295||i<1)return t.ONE;var r=e(),s=e(),a=n.convert(this),o=m(i)-1;
for(a.copyTo(r);--o>=0;)if(n.sqrTo(r,s),(i&1<<o)>0)n.mulTo(s,a,r);else{
var l=r;r=s,s=l}return n.revert(r)}function G(t,e){var i;return i=t<256||e.isEven()?new A(e):new E(e),
this.exp(t,i)}function j(e,i){return new t(e,i)}function W(){
this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,
this.dmq1=null,this.coeff=null}function V(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=j(t,16),
this.e=parseInt(e,16)):alert("Invalid RSA public key")}function Z(t){
return t.modPowInt(this.e,this.n)}function Y(t){for(var e in rt.crypto.Util.DIGESTINFOHEAD){
var i=rt.crypto.Util.DIGESTINFOHEAD[e],n=i.length;if(t.substring(0,n)==i)return[e,t.substring(n)];
}return[]}function q(t,e){e=e.replace(st,""),e=e.replace(/[ \n]+/g,"");
var i=j(e,16);if(i.bitLength()>this.n.bitLength())return!1;var n=this.doPublic(i),r=n.toString(16).replace(/^1f+00/,""),s=Y(r);
if(0===s.length)return!1;var a=s[1],o=nt.hash(t);return a===o;
}var X,Q=0xdeadbeefcafe,J=15715070==(16777215&Q);"undefined"==typeof window?null:window.crypto||window.msCrypto,
J&&"undefined"!=typeof navigator&&"Microsoft Internet Explorer"===navigator.appName?(t.prototype.am=n,
X=30):J&&"undefined"!=typeof navigator&&"Netscape"!==navigator.appName?(t.prototype.am=i,
X=26):(t.prototype.am=r,X=28),t.prototype.DB=X,t.prototype.DM=(1<<X)-1,
t.prototype.DV=1<<X;var K=52;t.prototype.FV=Math.pow(2,K),t.prototype.F1=K-X,
t.prototype.F2=2*X-K;var $,tt,et="0123456789abcdefghijklmnopqrstuvwxyz",it=new Array;
for($="0".charCodeAt(0),tt=0;tt<=9;++tt)it[$++]=tt;for($="a".charCodeAt(0),
tt=10;tt<36;++tt)it[$++]=tt;for($="A".charCodeAt(0),tt=10;tt<36;++tt)it[$++]=tt;
A.prototype.convert=M,A.prototype.revert=P,A.prototype.reduce=I,
A.prototype.mulTo=D,A.prototype.sqrTo=N,E.prototype.convert=O,
E.prototype.revert=R,E.prototype.reduce=B,E.prototype.mulTo=z,
E.prototype.sqrTo=H,t.prototype.copyTo=o,t.prototype.fromInt=l,
t.prototype.fromString=u,t.prototype.clamp=c,t.prototype.dlShiftTo=y,
t.prototype.drShiftTo=S,t.prototype.lShiftTo=b,t.prototype.rShiftTo=C,
t.prototype.subTo=x,t.prototype.multiplyTo=w,t.prototype.squareTo=L,
t.prototype.divRemTo=T,t.prototype.invDigit=F,t.prototype.isEven=U,
t.prototype.exp=_,t.prototype.toString=d,t.prototype.negate=p,
t.prototype.abs=f,t.prototype.compareTo=g,t.prototype.bitLength=v,
t.prototype.mod=k,t.prototype.modPowInt=G,t.ZERO=h(0),t.ONE=h(1),
W.prototype.doPublic=Z,W.prototype.setPublic=V;var nt={};nt.utf8Encode=function(t){
return window.unescape(encodeURIComponent(t))},nt.hash=function(t){
t=nt.utf8Encode(t);var e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];
t+=String.fromCharCode(128);for(var n=t.length/4+2,r=Math.ceil(n/16),s=new Array(r),a=0;a<r;a++){
s[a]=new Array(16);for(var o=0;o<16;o++)s[a][o]=t.charCodeAt(64*a+4*o)<<24|t.charCodeAt(64*a+4*o+1)<<16|t.charCodeAt(64*a+4*o+2)<<8|t.charCodeAt(64*a+4*o+3);
}s[r-1][14]=8*(t.length-1)/Math.pow(2,32),s[r-1][14]=Math.floor(s[r-1][14]),
s[r-1][15]=8*(t.length-1)&4294967295;for(var l,h,u,c,d,p,f,g,m=new Array(64),a=0;a<r;a++){
for(var v=0;v<16;v++)m[v]=s[a][v];for(var v=16;v<64;v++)m[v]=nt.s1(m[v-2])+m[v-7]+nt.s0(m[v-15])+m[v-16]&4294967295;
l=i[0],h=i[1],u=i[2],c=i[3],d=i[4],p=i[5],f=i[6],g=i[7];for(var v=0;v<64;v++){
var y=g+nt.S1(d)+nt.Ch(d,p,f)+e[v]+m[v],S=nt.S0(l)+nt.Maj(l,h,u);
g=f,f=p,p=d,d=c+y&4294967295,c=u,u=h,h=l,l=y+S&4294967295}i[0]=i[0]+l&4294967295,
i[1]=i[1]+h&4294967295,i[2]=i[2]+u&4294967295,i[3]=i[3]+c&4294967295,
i[4]=i[4]+d&4294967295,i[5]=i[5]+p&4294967295,i[6]=i[6]+f&4294967295,
i[7]=i[7]+g&4294967295}return nt.toHexStr(i[0])+nt.toHexStr(i[1])+nt.toHexStr(i[2])+nt.toHexStr(i[3])+nt.toHexStr(i[4])+nt.toHexStr(i[5])+nt.toHexStr(i[6])+nt.toHexStr(i[7]);
},nt.ROTR=function(t,e){return e>>>t|e<<32-t},nt.S0=function(t){
return nt.ROTR(2,t)^nt.ROTR(13,t)^nt.ROTR(22,t)},nt.S1=function(t){
return nt.ROTR(6,t)^nt.ROTR(11,t)^nt.ROTR(25,t)},nt.s0=function(t){
return nt.ROTR(7,t)^nt.ROTR(18,t)^t>>>3},nt.s1=function(t){return nt.ROTR(17,t)^nt.ROTR(19,t)^t>>>10;
},nt.Ch=function(t,e,i){return t&e^~t&i},nt.Maj=function(t,e,i){
return t&e^t&i^e&i},nt.toHexStr=function(t){for(var e,i="",n=7;n>=0;n--)e=t>>>4*n&15,
i+=e.toString(16);return i};var rt={crypto:{Util:{DIGESTINFOHEAD:{
sha256:"3031300d060960864801650304020105000420"}}}},st=new RegExp("[^0-9a-f]","gi");
return W.prototype.verify=q,W.hash=nt.hash,W}(),Vt=function(){
function t(t,e,i){var n=this;this.api=null,this.scene=null,this.settings=null,
this.shell=null,this.events=null,this.removed=!0,this.assetsLoaded=!1,
this.toolbar=null,this.data={},this.navigator=null,this.curState=null,
this.goingBack=!1,this.chartUpdateOrigin=null,this.chartUpdateTimeout=null,
this.scene=e,this.settings=t,this.api=i,i._impl=this,this.scene.settings=t,
this.scene.assetsLoader=this.assetsLoader=new Ot(this),this.data={},
this.settings.parentChart?(this.shell=new Pt(this,this.settings.parentChart._impl.shell),
this.events=this.shell.events):(this.shell=new Mt(this,this.createDomLayer()),
this.events=this.shell.events,this.events.addElement(new Ht(this)),
this.events.addElement(new it(this)),this.events.addElement(new F(this,this.settings.credits))),
window.setTimeout(function(){return Qt.execute(n,!n.settings.parentChart);
},500),this.removed=!1,this.EVENT_NAMES={};var r;for(r in t.events)if(0===r.indexOf("on")){
var s=r.charAt(2).toLowerCase()+r.slice(3);this.EVENT_NAMES[r]=s,
this.EVENT_NAMES[s]=s}this.eventListeners={},this.assetsLoaded=!1,
this.assetsLoader.ensureAssetsList(this.settings.advanced.assets,function(){
return n.notifyAssetsLoaded()}),this.clearData(),this.events.addElement(new _t(this)),
this.title=this.events.addElement(new z(this)),this.events.addElement(new It(this));
}return t.prototype.createDomLayer=function(){return new r.DomLayer(this);
},t.prototype.updateFilters=function(t){this.events.notifySceneChanges({
filters:!0})},t.prototype.updateStyle=function(t){this.events.notifySceneChanges({
style:!0})},t.prototype.defaultDoubleClick=function(t,e){},t.prototype.defaultTripleClick=function(t,e){},
t.prototype.defaultClick=function(t,e){},t.prototype.defaultRightClick=function(t,e){},
t.prototype.finalInitialize=function(){var t={settings:!0,settingsChanges:this.scene.settings,
data:{}};this.processChangedSettings(t),this.events.notifySceneChanges(t),
this.updateSize(),this.updateEvents(null,this.settings.events);
},t.prototype.getRootChart=function(){var t=this.settings.parentChart;
return t?t._impl.getRootChart():this},t.prototype.processChangedSettings=function(t){},
t.prototype.updateSettings=function(t,e){var i=this;if(void 0===e&&(e=null),
!this.removed){var n=d.clone(this.settings.events),r=this.settings.apply(t),s={
settings:!0,settingsChanges:r};this.processChangedSettings(s),
r.events&&this.updateEvents(n,this.settings.events),r.advanced&&r.advanced.assets&&(this.assetsLoaded=!1,
this.assetsLoader.ensureAssetsList(this.settings.advanced.assets,function(){
return i.notifyAssetsLoaded()})),r.data&&this.dataSettingsChanged(r.data),
this.shell.updateSettings(r),this.onSettingsChanged(r),r.toolbar&&this.assetsLoaded&&this.createToolbar(),
this.events.notifySceneChanges(s);var a=r.area;if(a&&(a.width||a.height||a.maxWidth||a.minWidth||a.minHeight||a.maxHeight)&&this.updateSize(!0),
e){var o=this.createEventArguments(null,e);o.changes=r,this.notifySettingsChanged(o);
}}},t.prototype.getData=function(t){if(this.data[t])return this.data[t];
var e=this.settings._computedDataMap[t];if(e){var i=this.createDataObj(e);
return i.applyPreloadedData(),this.data[t]=i,i}throw new Error("No data configured for source ID "+t);
},t.prototype.addData=function(t,e){this.removed||this.getData(e).addData(t);
},t.prototype.reloadData=function(t,e){if(void 0===t&&(t=null),
void 0===e&&(e=!1),!this.removed){this.log("Reload data"),t?this.data[t]&&(this.data[t].remove(),
delete this.data[t]):this.clearData(),this.scene.mainDataEnabled&&(this.scene.mainData=this.getData(this.settings.data[0].id));
var i={};for(var n in this.settings._computedDataMap)i[n]=!0;this.events.notifySceneChanges({
data:i,dataDeep:e}),this.navigator&&this.navigator.onNewDataObject();
}},t.prototype.replaceData=function(t,e){if(void 0===e&&(e="default"),
null==e&&(e="default"),!this.removed){this.events.clearSceneChanges({
dataArrived:null}),this.data[e]&&this.data[e].remove();var i=this.data[e]=this.createDataObj(this.settings._computedDataMap[e]);
i.addData(t),this.scene.mainDataEnabled&&(this.scene.mainData=this.getData(this.settings.data[0].id));
var n={};n[e]=!0,this.events.notifySceneChanges({data:n}),this.navigator&&this.navigator.onNewDataObject();
}},t.prototype.clearData=function(t){void 0===t&&(t=!1);for(var e in this.data){
var i=this.data[e];i.remove()}this.events.clearSceneChanges({
dataArrived:null}),this.data={},this.scene.mainData=null,!t&&this.scene.mainDataEnabled&&(this.scene.mainData=this.getData(this.settings.data[0].id));
},t.prototype.dataSettingsChanged=function(t){for(var e in this.data)!t[e]&&this.settings._computedDataMap[e]||(this.data[e].remove(),
delete this.data[e]);this.events.clearSceneChanges({dataArrived:null
}),this.events.notifySceneChanges({data:t,dataDeep:!0}),this.scene.mainDataEnabled&&(this.scene.mainData=this.getData(this.settings.data[0].id)),
this.navigator&&this.navigator.onNewDataObject()},t.prototype.hasPendingRequests=function(){
if(!this.assetsLoaded)return!0;if(this.assetsLoader.hasPendingRequests())return!0;
for(var t in this.data)if(this.data[t].hasPendingRequests())return!0;
return!1},t.prototype.remove=function(){return this.removed?void r.Helpers.warn("Removing already removed chart"):(this.cancelChartUpdateNotify(),
this.removed=!0,this.toolbar&&this.toolbar.remove(),this.shell.remove(),
this.clearData(!0),this.shell=null,this.scene=null,void(this.events=null));
},t.prototype.setFullscreen=function(t){this.shell.setFullscreen(t);
},t.prototype.isFullscreen=function(){return this.shell.fullScreenMode;
},t.prototype.updateSize=function(t){void 0===t&&(t=!1),this.removed||this.shell.updateSize(t);
},t.prototype.on=function(t,e){var i=this.EVENT_NAMES[t];return i?(this.eventListeners[i]||(this.eventListeners[i]=[]),
void this.eventListeners[i].push(e)):void this.error("Unrecognized event name: "+t);
},t.prototype.off=function(t,e){var i=this.EVENT_NAMES[t];return i?this.eventListeners[i]?d.removeFromArray(this.eventListeners[i],e):void 0:void this.error("Unrecognized event name: "+t);
},t.prototype.updateEvents=function(t,e){var i=t,n=e;for(var r in this.EVENT_NAMES){
var s=this.EVENT_NAMES[r];t&&i[r]&&this.off(s,i[r]),n[r]&&this.on(s,n[r]);
}},t.prototype.notifyHoverChanged=function(t,e){this.dispatchEvent("hoverChange",t,e,null);
},t.prototype.notifyDoubleClick=function(t,e){var i=this;this.dispatchEvent("doubleClick",t,e,function(t,e){
return i.defaultDoubleClick(t,e)})},t.prototype.notifyTripleClick=function(t,e){
var i=this;this.dispatchEvent("tripleClick",t,e,function(t,e){
return i.defaultTripleClick(t,e)})},t.prototype.notifyRightClick=function(t,e){
var i=this;this.dispatchEvent("rightClick",t,e,function(t,e){
return i.defaultRightClick(t,e)})},t.prototype.notifyClick=function(t,e){
var i=this;this.dispatchEvent("click",t,e,function(t,e){return i.defaultClick(t,e);
})},t.prototype.notifySelectionChanged=function(t){return this.dispatchEventParams("selectionChange",t,null);
},t.prototype.notifySettingsChanged=function(t){return this.dispatchEventParams("settingsChange",t,null);
},t.prototype.notifyPositionChange=function(t){return this.dispatchEventParams("positionChange",t,null);
},t.prototype.notifyPointerDown=function(t,e){this.dispatchEvent("pointerDown",t,e,null);
},t.prototype.notifyPointerUp=function(t,e){this.dispatchEvent("pointerUp",t,e,null);
},t.prototype.notifyPointerDrag=function(t,e){this.dispatchEvent("pointerDrag",t,e,null);
},t.prototype.notifyPointerMove=function(t,e){this.dispatchEvent("pointerMove",t,e,null);
},t.prototype.notifyDataUpdated=function(t){return this.dispatchEventParams("dataUpdated",t,null);
},t.prototype.notifyChartUpdate=function(t,e){var i=this;void 0===e&&(e=!1);
var n=d.performanceNow();e&&(this.chartUpdateForce=!0),t&&(this.chartUpdateWasBack=this.goingBack,
this.chartUpdateOrigin=t,this.chartUpdateTime=n),this.chartUpdateState=this.saveNavigation(),
null===this.chartUpdateTimeout&&(this.chartUpdateTimeout=setTimeout(function(){
return i.chartUpdateNotify()},this.chartUpdateTime+this.scene.settings.events.chartUpdateDelay-n));
},t.prototype.cancelChartUpdateNotify=function(){this.chartUpdateOrigin=null,
this.chartUpdateTimeout&&(clearTimeout(this.chartUpdateTimeout),
this.chartUpdateTimeout=null)},t.prototype.chartUpdateNotify=function(){
this.chartUpdateTimeout=null;var t=this.chartUpdateOrigin;if(t){
var e=this.chartUpdateState;!e||this.curState&&JSON.stringify(e)===JSON.stringify(this.curState)?this.chartUpdateForce&&(this.chartUpdateForce=!1,
this.chartUpdateOrigin=null,this.chartUpdateState=null,this.doChartUpdateNotify(t)):(this.chartUpdateForce=!1,
!this.chartUpdateWasBack&&this.curState&&(this.scene.pushBack(this.curState),
this.events.notifySceneChanges({requestPaint:!0})),this.curState=e,
this.chartUpdateOrigin=null,this.chartUpdateState=null,this.doChartUpdateNotify(t));
}},t.prototype.doChartUpdateNotify=function(t){var e=this.createEventArguments(null,t);
this.dispatchEventParams("chartUpdate",e,null)},t.prototype.back=function(t,e){
if(void 0===t&&(t=!0),void 0===e&&(e="api"),0===this.scene.backStack.length)return!1;
var i=this.scene.backStack.pop();return this.goingBack=!0,this.restoreNavigation(i,t,e),
this.goingBack=!1,!0},t.prototype.goHome=function(t,e){if(void 0===t&&(t=!0),
void 0===e&&(e="api"),0===this.scene.backStack.length)return!1;
var i=this.scene.backStack[0];return this.restoreNavigation(i,t,e),
!0},t.prototype.clearHistory=function(){return this.scene.backStack=[],
!0},t.prototype.dispatchEventParams=function(t,e,i){var n=new C(0,0,d.performanceNow(),"api");
return i||this.eventListeners[t]&&this.eventListeners[t].length?(this.dispatchEvent(t,n,e,i),
n):n},t.prototype.dispatchEvent=function(t,e,i,n){if(n||this.eventListeners[t]&&this.eventListeners[t].length>0){
for(var r=Object.keys(i),s=0;s<r.length;s++)e[r[s]]=i[r[s]];if(this.eventListeners[t])for(var a=0;a<this.eventListeners[t].length;a++){
var o=this.eventListeners[t][a];this.log("Call user event handler, "+t,e,i),
o.call(this.api,e,i)}!e.defaultPrevented&&n&&(this.log("Call default event handler, "+t),
n.call(this.api,e,i))}},t.prototype.error=function(t,e){var i=this;
void 0===e&&(e=null);var n=this.createEventArguments(null,"api");
n.message=t,n.arg=e,this.dispatchEventParams("error",n,function(t,e){
return i.defaultError(t,e)})},t.prototype.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];
this.settings.advanced.logging&&d.log(t,e)},t.prototype.deprecated=function(t,e){
var i="Deprecated: "+t+".";e&&(i+=" Use "+e+" instead"),r.Helpers.warn(i);
},t.prototype.defaultError=function(t,e){e.arg?d.error(e.message,e.arg):d.error(e.message);
},t.prototype.createToolbar=function(){this.toolbar&&this.toolbar.remove(),
this.assetsLoaded&&(this.toolbar=new $(this,this.settings.toolbar));
},t.prototype.notifyAssetsLoaded=function(){this.removed||(this.assetsLoaded=!0,
this.createToolbar(),this.updateSize(!0),this.events.notifySceneChanges({
assets:!0,style:!0}))},t}();r.Impl=Vt;var Zt;!function(t){t[t.FacetChart=1]="FacetChart",
t[t.GeoChart=2]="GeoChart",t[t.NetChart=4]="NetChart",t[t.PieChart=8]="PieChart",
t[t.TimeChart=16]="TimeChart"}(Zt||(Zt={}));var Yt,qt=!1,Xt={},Qt=function(){
function e(){}return e.checkChartType=function(t,e){var i=e.lastIndexOf("-",e.indexOf(":"));
if(i===-1||i===e.indexOf("-"))return!0;var n,r=0;for(i++;(n=e.charCodeAt(i))>47&&n<58;)r=10*r+n-48,
i++;var s=Zt[t];return s>0&&(r&s)===s},e.execute=function(e,i){
var n=this,s=window.ZoomChartsLicense,a=window.ZoomChartsLicenseKey,o=e.api.typeName,l=s+d.SeparatorChar+o,h=Xt[l];
if(h)return void(h.result?this.handleServerResponse([e],h.result):h.charts.push(e));
Xt[l]=h={charts:[e],result:null};var u="ZoomCharts "+t.PackageInfo.Version;
s&&a?jt.verifySignature(s,a)?qt||(d.log(u+" license verified: "+s),
qt=!0):d.error(u+(" license key for license '"+s+"' is invalid. Please configure the correct key in order to use the charts.")):(d.error(u+" license key was not found on the page. Please make sure ZoomChartsLicense and ZoomChartsLicenseKey variables are correctly set before initializing the chart."),
s=a="---:");var c=". Please upgrade your license on https://zoomcharts.com",p=s.charAt(2);
if(!this.checkChartType(o,s)&&(d.error("ZoomCharts license used on this page does not allow use of "+o+c),
p="-",!i))return void this.displayBanner(e,"builtin://logo-license-expired");
var f=/(\d\d\d\d-\d\d-\d\d)$/,g="builtin://logo-license-expired",m=g;
switch(p){case"F":case"O":var v=s.match(f),y=t.PackageInfo.Built;
return void(v&&v[1]<y?(h.result={status:2,bannerImage:g,consoleMessages:[{
level:"error",text:"ZoomCharts license is not valid for this library version which was released on "+y+c
}]},this.handleServerResponse(h.charts,h.result)):(h.result={
status:1},h.charts=[]));case"B":var S=s.match(f),b="https://zoomcharts.com/en/renew-licence/";
return void(S&&S[1]<(new Date).toISOString()?(h.result={status:2,
bannerImage:"builtin://logo-license-expired",consoleMessages:[{
level:"error",text:"ZoomCharts license has expired on "+S[1]+". Please renew the license at "+b
}],bannerTarget:b},this.handleServerResponse(h.charts,h.result)):(h.result={
status:1},h.charts=[]));case"-":case"S":g="builtin://logo-development";
break;case"X":g="builtin://logo-supported-by";break;default:case"P":
g=null}var C=JSON.stringify({protocol:1,version:t.PackageInfo.Version,
revision:t.PackageInfo.Revision,libraryName:t.PackageInfo.LibraryName,
assetsDomain:this.parseUriDomain(e.assetsLoader.getAssetUrl("assets://")),
pageDomain:location.hostname,chartType:o,license:s.substring(0,s.indexOf(":")),
licenseKeyHash:jt.hash(a)},null," ");r.Helpers.doPostRequest(e.assetsLoader.getAssetUrl("https://api.zoomcharts-cloud.com/lc/v1/"),3e4,C,function(t){
try{var i=JSON.parse(t);if(1!==i.protocol)throw"Server response contains invalid protocol.";
var r=Xt[l];r.result=i,n.handleServerResponse(r.charts,r.result);
}catch(t){n.handleServerError(e,"Unable to parse licensing server response: "+t),
g&&n.displayBanner(e,g),delete Xt[l]}},function(t){t=t||"",delete Xt[l],
n.handleServerError(e,"Unable to contact licensing server: "+t),
(2153644038===t.result||t instanceof DOMException&&t.code===DOMException.SECURITY_ERR||"SecurityError"===t.name)&&(g=m),
g&&n.displayBanner(e,g)})},e.displayBanner=function(t,e,i){if(!t.removed){
var n=new N;i&&(n.url=i),n.imageScaling=.5,n.image=e,n.enabled=!0,
n.enabledOnExport=!0,n.location="inside",t.events.addElement(new F(t,n)),
t.events.notifySceneChanges({settings:!0,settingsChanges:{credits:{
enabled:n.enabled}}})}},e.handleServerError=function(t,e){t.error(e);
},e.handleServerResponse=function(t,e){if(null!==e){if(e.consoleMessages)for(var i=0;i<e.consoleMessages.length;i++){
var n=e.consoleMessages[i];switch(n.level){case"error":d.error(n.text);
break;case"warn":d.warn(n.text);break;default:case"info":d.log(n.text);
}}for(var i=0;i<t.length;i++){var r=t[i];if(!r.removed)if(1===e.status);else if(2===e.status)this.displayBanner(r,e.bannerImage,e.bannerTarget);else{
if(3!==e.status){d.warn("Licensing server returned unknown status code "+e.status);
break}this.blockChart(r,'<a href="'+e.bannerTarget+'"><img src="'+e.bannerImage+'" title="Problem with the license"/></a>');
}}t.length=0}},e.parseUriDomain=function(t){var e=document.createElement("a");
return e.href=t,e.hostname||(e.href=e.href),e.hostname},e.blockChart=function(t,e){
var i=t.settings.container;t.remove(),i.innerHTML="<strong>Unable to use ZoomCharts library because of a licensing issue:</strong><br/>"+e;
},e}();!function(t){t[t.inside=0]="inside",t[t.outside=1]="outside";
}(Yt=r.InfoPopupPosition||(r.InfoPopupPosition={}));var Jt=function(){
function t(t){this.chart=t,this.container=t.shell.interactiveContainer,
this.events=t.events,this.popup=null,this.visible=!1,this.x0=null,
this.x1=null,this.y=null,this.contentsChanged=!1}return t.prototype.hide=function(){
return!(!this.visible||!this.popup||(this.visible=!1,this.popup.style.display="none",
0))},t.prototype.remove=function(){this.popup&&this.popup.parentNode&&(this.popup.parentNode.removeChild(this.popup),
this.popup=null)},t.prototype.ensurePopup=function(){this.popup||(this.popup=d.createDom("div","DVSL-info-center",null,this.container),
d.createDom("em",null,null,this.popup),this.popup.style.position="absolute",
this.popup.style.display="none")},t.prototype.show=function(t,e,i,n,r){
void 0===r&&(r=Yt.inside),this.ensurePopup();var s=this.popup;
n?(n.indexOf("<")===-1&&n.indexOf(">")===-1&&(n="<b>"+n+"</b>"),
this.visible=!0,s.style.display="block",n!==s.innerHTML&&(s.innerHTML=n,
this.postProcessHtml(s),this.contentsChanged=!0),this.updateXY(t,e,i,r)):s.style.display="none";
},t.prototype.postProcessHtml=function(t){if(t instanceof HTMLElement){
var e=t.getAttribute("data-color");e&&(t.style.color=e,null!=t.getAttribute("data-selected")&&(t.style.borderColor=e));
}for(var i=t.firstElementChild;i;)this.postProcessHtml(i),i=i.nextElementSibling;
},t.prototype.updateContents=function(t){null===t?this.hide():this.show(this.x0,this.x1,this.y,t,this.position);
},t.prototype.updateXY=function(t,e,i,n){if(void 0===n&&(n=Yt.inside),
this.visible&&(this.contentsChanged||this.x0!==t||this.x1!==e||this.y!==i||this.position!==n)){
this.ensurePopup(),this.contentsChanged&&(this.contentsChanged=!1,
this.popup.style.right=null,this.width=this.popup.offsetWidth,
this.height=this.popup.offsetHeight),this.x0=t,this.x1=e,this.y=i,
this.position=n;var r,s=12,a=10,o=this.width,l=this.height,h=null,u=this.popup.style,c=this.chart.scene;
if(t>c.x0+c.width||e<c.x0)return void(u.top="-10000px");var d=this.chart.getRootChart().scene;
switch(n){default:case Yt.inside:d.x0<=t-o-a?(h=t-o-a,r="DVSL-info-left"):d.x0+d.width>=e+o+a?(h=e+a,
r="DVSL-info-right"):(h=(Math.max(t,d.x0)+Math.min(e,d.x0+d.width)-o)/2,
r="DVSL-info-center"),i=Math.min(Math.max(d.y0+s,i-l/2),d.y0+d.height-l),
i=Math.max(this.chart.shell.getChartInnerArea().findTopPosition(h,h+o),i);
break;case Yt.outside:r="DVSL-info-center",h=Math.min(d.x0+d.width-o,Math.max(0,(t+e-o)/2));
var p=this.chart.shell.container.offsetTop;i=p>l?d.y0-l:d.y0+d.height;
}var f=null;o>=d.chartWidth?(f=0,h=0):h+o>d.chartWidth-20&&(h+o>d.chartWidth?(f=0,
h=null):(f=d.chartWidth-h-o,h=null)),u.right=null!==f?f+"px":null,
u.left=null!==h?h+"px":null,u.top=i+"px",this.popupClass!==r&&(this.popupClass=r,
this.popup.className=r)}},t}();r.InfoPopup=Jt;var Kt=function(){
function t(t,e,i){void 0===i&&(i=!1),this._direction=1,this._endTime=0,
this._midTime=0,this._startTime=0,this._preventOvershoot=!1,this._setTargetPending=!1,
this._settableTargetValue=0,this._settableAcceleration=0,this._acceleration=t,
this._initialValue=this._targetValue=e,this._preventOvershoot=i;
}return t.prototype.setTarget=function(t,e,i,n){if(null==e)return this._settableTargetValue=t,
this._settableAcceleration=i,void(this._setTargetPending=!0);this._settableAcceleration=null,
this._setTargetPending=!1,null!=i&&this.setAcceleration(i,e);var r=this._getDeltaT(e),s=this._getDistanceToV0(r),a=this._composeValue(e,s),o=Math.abs(t-a),l=t>a?1:-1;
if(e<this._startTime&&(this._direction*=-1),this._targetValue=t,
e<this._endTime)if(s>o||this._direction!==l)if(this._preventOvershoot)if(this._direction===l){
var h=this._getCurrentVelocity(r);this._acceleration=h*h/(2*o),
this._startTime=e-h/this._acceleration,this._initialValue=a-o*this._direction;
}else this._startTime=e,this._initialValue=a;else this._startTime=e+r,
this._initialValue=a+s*this._direction;else(e>=this._midTime||e<=this._startTime)&&(this._startTime=e-r,
this._initialValue=a-s*this._direction);else this._startTime=e,
this._initialValue=a;this._direction=this._targetValue>this._initialValue?1:-1;
var u=Math.abs(this._targetValue-this._initialValue),c=Math.sqrt(u/this._acceleration);
this._midTime=this._startTime+c,this._endTime=this._startTime+2*c,
null!=n&&this._endTime-this._startTime>n&&(this._endTime=this._startTime+n,
this._midTime=(this._startTime+this._endTime)/2,c=this._endTime-this._midTime,
this._acceleration=u/(c*c))},t.prototype.getValue=function(t){
return this._setTargetPending&&this.setTarget(this._settableTargetValue,t,this._settableAcceleration),
this.finished(t)?this._targetValue:this._composeValue(t,this._getDistanceToV0(this._getDeltaT(t)));
},t.prototype.getTargetValue=function(){return this._targetValue;
},t.prototype.finished=function(t){return!this._setTargetPending&&t>=this._endTime;
},t.prototype.jump=function(t,e,i){if(this._initialValue=this._targetValue=t,
this._startTime=this._midTime=this._endTime=0,null!=e&&null!=i&&0!==e){
var n=e>0?1:-1,r=Math.abs(e/this._acceleration);this._direction=n,
this._midTime=i,this._endTime=i+r,this._targetValue=t+this._getDistanceToV0(r)*n;
}return this._targetValue},t.prototype.setAcceleration=function(t,e){
if(t!==this._acceleration){var i=e<this._endTime;if(i){var n=this._getDeltaT(e),r=this._getCurrentVelocity(n),s=this._composeValue(e,this._getDistanceToV0(n));
e<this._startTime&&(r=-r),this._acceleration=t,this.jump(s,r*this._direction,e);
}else this._acceleration=t}},t.prototype._composeValue=function(t,e){
return t<this._startTime?this._initialValue+e*this._direction:t<this._midTime?this._initialValue+e*this._direction:t<this._endTime?this._targetValue-e*this._direction:this._targetValue;
},t.prototype._getDistanceToV0=function(t){return this._acceleration*t*t/2;
},t.prototype._getDeltaT=function(t){return t<this._startTime?this._startTime-t:t<this._midTime?t-this._startTime:t<this._endTime?this._endTime-t:0;
},t.prototype._getCurrentVelocity=function(t){return t*this._acceleration;
},t}();r.Inertia=Kt;var $t=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e}(r.ChartElement);r.Navigator=$t;var te=function(){
function t(){}return t.prototype.customize=function(t){var e=this.constructor.themes;
if(!e.hasOwnProperty(t))throw new Error("The chart does not contain a predefined theme named `"+t+"`.");
return this.updateSettings(e[t])},t.prototype.saveState=function(){
return this._impl.save()},t.prototype.restoreState=function(t,e){
void 0===e&&(e=!1),null==e&&(e=!1),this._impl.restore(t,e)},t.prototype.fullscreen=function(t){
return t===!0?this._impl.setFullscreen(!0):t===!1&&this._impl.setFullscreen(!1),
this._impl.isFullscreen()},t.prototype.updateSettings=function(t){
return t&&this._impl.updateSettings(t,"api"),this},t.prototype.replaceSettings=function(t){
if(t){var e=i.Base.SettingsHelper;try{e.replacingSettings=!0,
this._impl.updateSettings(t,"api")}finally{e.replacingSettings=!1;
}}return this},t.prototype.updateFilters=function(){this._impl.updateFilters(null);
},t.prototype.updateStyle=function(){this._impl.updateStyle(null);
},t.prototype.on=function(t,e){this._impl.on(t,e)},t.prototype.off=function(t,e){
return this._impl.off(t,e)},t.prototype.updateSize=function(){
return this._impl.updateSize(!0),this},t.prototype.reloadData=function(t){
return void 0===t&&(t=null),this._impl.reloadData(t)},t.prototype.remove=function(){
return this._impl.remove()},t.prototype.saveAsImage=function(t,e,i){
return this._impl.deprecated("saveAsImage","exportAsString"),
this.exportImageAsString(t,e,i)},t.prototype.exportGetDimensions=function(t){
return this._impl.deprecated("exportGetDimensions","exportImageGetDimensions"),
this.exportImageGetDimensions(t)},t.prototype.exportImageAsString=function(t,e,i){
return this._impl.deprecated("exportImageAsString","exportAsString"),
Ut["export"](this._impl,t,e,i,function(){})},t.prototype.exportImageGetDimensions=function(t){
return Ut.getDimensions(this._impl,t)},t.prototype.exportAsString=function(t,e,i,n){
if(void 0===n&&(n=!1),!e)throw new Error("`callback` argument is mandatory.");
Ut["export"](this._impl,t,i,n,e)},t.prototype["export"]=function(t,e,i){
void 0===i&&(i=!1),Ut.download(this._impl,t,e,i)},t.prototype.addSubchartContainer=function(t){
this._impl.shell.interactiveContainer.appendChild(t)},t.prototype.suspendPaint=function(){
this._impl.events.suspendPaint()},t.prototype.resumePaint=function(){
this._impl.events.resumePaint()},t.prototype.paintNow=function(t){
return void 0===t&&(t=!1),this._impl.events.paintNow(t),this},
t.prototype.back=function(){return this._impl.back(),this},t.prototype.home=function(){
return this._impl.goHome()},t.prototype.clearHistory=function(){
return this._impl.clearHistory(),this},t.prototype.profiler=function(){
return this._impl.shell.profiler},t.prototype.measureFps=function(t,e){
this._impl.deprecated("measureFps"),this.profiler().measureFps(t,e);
},t}();te.themes={},r.Api=te;var ee=function(){function t(t,e,i,n){
void 0===i&&(i=0),void 0===n&&(n=t.length),null==n&&(n=t.length),
null==i&&(i=0),this.n0=i;var r=[];r.length=n-i;var s=0;r[n-i-1]=(e[n-1]-e[n-2])/(t[n-1]-t[n-2]);
var a,o=(e[i+1]-e[i])/(t[i+1]-t[i]);for(a=i+1;a<n-1;a++){var l=(e[a+1]-e[a])/(t[a+1]-t[a]),h=void 0;
if(0===o)h=s=0;else{h=(o+l)/2;var u=(s*s+h*h)/(o*o);if(u>9){var c=3/Math.sqrt(u);
s=c*s,h=c*h}}r[a-i-1]=s,s=h,o=l}r[a-i-1]=s,this.x=t,this.y=e,
this.m=r}return t.prototype.interpolate=function(t,e){var i=this.x[t+1]-this.x[t],n=(e-this.x[t])/i,r=n*n,s=r*n,a=2*s-3*r+1,o=s-2*r+n,l=-2*s+3*r,h=s-r,u=a*this.y[t]+o*i*this.m[t-this.n0]+l*this.y[t+1]+h*i*this.m[t-this.n0+1];
return u},t.prototype.interpolateArray=function(t,e,i,n,r){for(var s=this.x[t],a=this.y[t],o=this.m[t-this.n0],l=this.y[t+1],h=this.m[t-this.n0+1],u=this.x[t+1]-s,c=1/u,d=i;d<n;d++){
var p=(e[d]-s)*c,f=p*p,g=f*p,m=2*g-3*f+1,v=g-2*f+p,y=-2*g+3*f,S=g-f,b=m*a+v*u*o+y*l+S*u*h;
r.push(b)}},t.prototype.clear=function(){this.m.length=0},t}();
r.MonotoneCurve=ee,function(t){var e=function(t){function e(){
return t.apply(this,arguments)||this}return n(e,t),e.prototype.onSceneChange=function(e){
t.prototype.onSceneChange.call(this,e);var i=this.chart.zoomOutPossible(),n=this.options;
n.enabled!==i&&(n.enabled=i,this.updateSettings())},e}(t.Button);
t.ToolbarItemNames.zoomOut=function(t,i){var n=t.settings.localization.toolbar;
i.label=i.label||n.zoomoutButton,i.title=i.title||n.zoomoutTitle,
i.cssClass=i.cssClass||"DVSL-bar-btn-zoomout";var r=i.onClick;
return i.onClick=function(e,i){t.zoomOut(!0,"user"),r&&r(e,i);
},new e(t,i)}}(o=r.Bar||(r.Bar={}))}(d=i.Base||(i.Base={})),function(t){
t.LicenseBannerBlank="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAABICAYAAAAQ5YupAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAxpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjU4MDZiZGQ4LWNkOWEtNDY3MS05ZTg1LTcwOWFlZDg0MDY4YyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxQkU1RjhGREExRjQxMUU3QjM5Mzg1MjMwMzI0MjYyRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxQkU1RjhGQ0ExRjQxMUU3QjM5Mzg1MjMwMzI0MjYyRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBJbGx1c3RyYXRvciBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ1dWlkOjAzYTBmMDNkLTNiNTktNDRkNi05ZjhlLWZkMGI3MTQ3ZDk1YiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3YzdiOTZjNi0yYzYyLWM3NGEtOTEzYi00YTgzZTg1YmViODAiLz4gPGRjOnRpdGxlPiA8cmRmOkFsdD4gPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5mb3ItY2hhcnRzLXpvb21jaGFydHMtYmxhbms8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtHwutkAABHoSURBVHja7J0J2ExlG8dvS1p9VCpF2SoqUlEptJK0UJKQ9oVEKNKVtIhLtIu0Ry6ilZK0XVEpok1RqGhBSUmS3fP59Xzne888c2bmnHlnmDH3/7qO18yc9Vnu577/93JKGJFFIlJOFApFoWNliS0CYcOW/5TWtlAoCh4bS275529tB4VCgSwoqW2gUCg8qEBQKBQqEBQKhQoEhUKhAkGhUKhAUCgUKhAUCoUKBIVCoQJBoVCoQFAoFCoQFApF9qBJTYr0sMMOIrvtJmKM/VyihMhff4ls2qRtoxqCouBw2mki33xTtH39tcjhh2u7qIawHWPXXUX23FOkbFm7+q1YIfK3Jof+C7SDvfeO/W6nnQpsOS1pNSO0JP5u3lykMalA2E7AKnfyySLNm4scdpjIf/5j1eMNG0T++Udk9myRN94Qeftt+/9CBe3hopDMhbp1RYYP3zKDtkyhjRtFypQRueMOkVdfVYGw3XRw794ibdtaae9i552tcKhY0arLrATPPy8ycKDI559r+xUa0ByPOy72u/33Vw5hu0DHjiIffCDSrl2wMAgC+7VpIzJtmkjnztqGqiGJrFunAiHvcf/9Io88Ym3iRB2/apXImjXBv++yi8iwYSJDh+okUeQ9CttkGDBApHv34N8wB95/X+STT0T++MMSZtWrizRsKHLGGSK1asXuf+21IqtXW7NDochXbLGEVxhrERfW1qqVCcTo0cbUrp382F13NaZ7d2NWr44//pJLCrf9jjmmcMZP48bxz3/FFfn+XCsK02QoV07k4Yfjv7/1VpELLxT56qvkx6MJPPCAyIkniixaFG+C7L578uPxWoTlKoKw44652a6JzKp8R1Bf/fln/HeYlmoypECDBiLnniuydm3658BOf/NNkbfeysw9odbvs0/sd7fdJnLnndHOM2uW9ThMny6yxx72O4TB9deL9O1rPRK4LhEchxxiWWieBRcVLjoEyy+/iEyZYt1VCxYUnbtUKZFq1USOPVakfn2RmjVF9trLejs8NyixEQQETZggMnWqyMqV0e5/v/3svZ1yisjBB1sehXtbv966WH/6SeTLL63pRPDR8uVJVE1jBVXlyiJNmth+P/BAK3z5nuflfjnf669bt21YEo625fkbNRI59FDbLsSIcF6uy70uXizy0Uci77yTntcHr0GVKtbbVLu2SNWqtv9obwjnsWNFzj7btg0bz+aiQweRgw6ybegBU/PHHy1PFeSWrVfPmqD0M3EdXM9zcc+bZ6/N+Fi4MPa4ffe17Yzbk/ZkHOWFydC7t8kIhgxJfa3SpY1p2tSYm24yZvhwY15+2ZhJk4x55RVjnnzSmBtvNOaCC4xZvDj23FOmFO8Z27WLPd+yZcY8/bQxS5eGf7716+0znniiMddea8x770Vrn3nzjGnbNtz97r67MYMHG7N8efjzL1pkTJcuiU2GzZuNmTXLmBUrwp1vxgxjmjdPfa+YYN99F60t6Pcw5kvFisZcfbUxTzxhny8RJk82pk+f9MfuTz8ZU6ZM7LUrVTJmzJhwx69bZ8yoUcbUrWuPPfpoO6YZL/37GzNunDFHHpkRkyH7AgFbOxMYNCjxNapVs78zKdJBgwbFf86pU01OIJXgZODMmZPeuT//PDUHExXduiW/3wkT0jsvAtYvwPxbhQp2Mi5ZEu5cY8ca07Nn+s84d26sQNhnH2O++Sb6efr1M6ZECWPuvtv284gRxvTta0zHjsbce2+80MlJDgEVORMIsptRGwcNshGDN95o1d6oQNVG5S8ucD3mArp2tVxIEFBzUS9Ru9NBptRSP+BiiP9IhKhmkJ+neeghkYsuiv8N84NronaHAWq83wyICsapB8KdR4+29xAVv/9uw+gxjz77TKR9e5EWLURGjLAh9TVq5AGHMGeOtYPCEC7YTdiHRx0V/xv2px9HH23tsqB9o+DddzPznDNmWFKNweM+0/z51o6EI6BTsUHZDzv1iCOsHZkM2JJsCD4GA53PAGVQNW4cHzHnhdAyaPwDcdy4eO4EfPGFFRTY99yfZ1MzwI45xtrV8B/Y1GHw/ff2eXnu336zNjF8BefBVnZBDAf8UBBHgQ1O3/PstDGE7w8/2LwScgeYIIyZk04SadlSpEKF2OMfe8wGj3FPHhKFWNN/kMS0MX3188/22nAS8D1cD94DPgyh2qVL7PG073vvxS5e9NPSpTa8GbRuLXLqqfHXnjjRhsTDFTA+ECIIcPqWMe5xGoynSpXseR980ArMCy6w7UBbb3duxyDVe+FCa+95+5x2mjGrViVXrxYsMObFF4159FHLJ6D2zZ4dv19YuzvVtuOOxnz5Zey5N2ywqnUYDmLt2vh7g/do1syYUqWSHz9gQPyxcBj+fTp3jt/nr7+MueiicJxDjx5WZfXU0iCTgWuefbZ1yyY611lnBZt2qORB+8MF1KoVrg+qVAkeP3AE/v0wEV0MHVpko4fZ6tSJP0ebNqmPg9Ny+YEOHZIfU7asNa1atrSfGbPwXqeeasz551sTsEWLPOEQomx0nAvIquOOK9qnSRNjNm0KFgKQedhW9erZQeyef7fdjDnkEEvE/PCDPYYGzdT9T5sWez9r1hhTvXq4Y7knFwi+sNeePj2eBGQg8dsOO8TzBhs3Rju/t3nCKUggVK0a7hzEeTAR/Jg5MzN9sMce8dwA46J8+eQCIWpbpBOHQNu5wnDixPSek3nAQsDWqFHG4hByRyB06hQ8ySFMvH0YcCtXBu+HMKlcOfz1GCDDhmVOQ6CzP/009p5Y9Y84Itzx++4bH+j0wAPhrx+kARx+uP2tYcP433j2TAcm1a8f/ng0Nj/++Se8QEm1DRwYf2+spskEQvv22RcILEjeQuQB7VUDkxxgIw0ZEv/9c8+JPPpo0ecnn7QZh67/m+SkK6+0Nl9YEFhCuPH48Zl5BmIEsPPSBXYmtqsfbr2BZHD91KB8efuXWAMXL7yQ+X4sGWE4ETPgEnfEamQCxGW4IOw8FwK34Af8gBQkZqNgApNSgQnO4IQV9gOC6+KLiz5fcYUNoHEBSfPSS+lfvzgBU35QRyFVhGLUSL8ozLZHWgVNUJe0XLJE5NNPt22/IwBdhCUtITyZ4BCVkGkE5zDRaD8IR353EUSmbm1AZhLg5Q9q4hkI/Bo1yi54EKdBfVkwAgFPASyx23BEfXmRbHT4LbfEH9uvX/GEQSZxySXFX13dFTbKihu0L6w4cPP0mYzpuvMyBdjyIFdhIpBMdtZZdkWF4UcQBAlMxkzQhCqO2zDT453niJmFW8b3ZZfZBZDIU6IiP/wwcx6wvBEIN90U7IOmcfzViBgErjqOK4lw41wArjR8wplGcctxeRPDTe3e1sIgkevPE2CuBnnXXSKXXx4uh4N9gvbLldJmr70mMniwjZtxQbg6YdP9+9vPM2dadyzuxWXLtsrtbTsOAf821YZcPPWUVZ/8oBCJi9tvz40OZvA9/rjkJLwJ5q68rh27LRAmuYu8CFbJa67J3YSudEAuDRpvqpJzxNrcfLPIxx/bfKDtVkOALAsitbBrIQj9YHVzuQMCRUiO2dYgcefFF0Xq1BFFhoFmQKJSUPQpATiMFdRqyFSC3jAJICYxJeBMMOGKk1GabVCLA/KTkn0EFsGJJDIRSbrCND7vvKybyNtGIIwcGW/XYlOidrv2H9FtbvQZmY/ZAvcVprry8cdbVY5MxFwFKmiQRpAPqy1agSsM6BfU6aeftv9PBAhETNFcf06iLtEU4MIYT5jGjCeiT4PwzDO2YA/E6XZjMvTpI3L66fHfI9EJzw0ik1xJDxObLRAOTKNjznjCiHwMVh5CRs8/32oFcBiuMIAQygV1/P/i/n/y3g379lK1cxX096WXxn6HFtC0qch99yUXBsANH891MGZIcSZt/oQTrHAg38EF4cxB3EPeagjUDvAIEz9YaRP5xV0XEnHxWZSQ/0ptViYITzYSeiB0WG28egZBoNAqWgXaT66B9vL7urHNMdu2ElGVlpaGO84PJgiCOqxmlM/vRyBGg42kOxK0/CBng/yOTLnLt5lAILOM5A8X2IGJ6hoC9+UfSNMolWmYyFRBwiZFmEDkuI2J7QYB9+yz1j4lwIlJA/CNJ/OPE+CEZEeNxTuSi3YrbDV2ql/IQuqSUJOL4P5cNyFJcmGBMChdOr6PM63FZBskfSHIGb8e8LYxl4IC0fJKIDBhvMg5v01IvEEqdcqV/lF8yggU3DxBwSoumCBk3IUZPPi78YbcfbfN6gOJKjdvS9UbBPmz8XnnqkDALYrw9i8GUSIN6QdXIGS6RHqQizQb5iLEql8gYA5lkRvZOhzCPfeINGsWr/rjSkkl6dyahQwSV51MtVqEef3at9/a6soQUngPPBD9RiAPGxwHfmQIL/zFV11VJAwSDZJcAIw8WoIfcCHpBFN5RGU2QZ+7kYznnJM8cMmPoBoIQfxUcYCW6gqZMKHmaKr++gip4BKMaKQuJ5RXAqFVK5Ebboj/nqIOFCehERNtTEy8D66/NupLRcNMVCYM+6FK+zuM2gJHHmnzLbxoOaLNECD5BIq/BvVBz56pSThyDAgOophJya2whtAPbj4C0ayTJqV28V53nUiPHvEaByttJkF9BZfc7NQpuOgKmpq3qlP/AjO5WzfrTkwGTFFXaGM6ZaNQzVYzGRK91QiCEe0gmfqDFoF54NprxCWgdWQSY8bYv64mQ7zDr79K3gN+BI4Dpt4PTB4GMiz33Ll28jDpMbGIuUf44nlhZYPUC3pjUTZABSomtl/1p6goZBtFSPA0eYVHEOAQwSRxBQkMAsfQ/jKtIXAPFGXxQHsRRARBTtEZxi0rPF4dLxQfjZM2RbjicqTNaVcKynBO2p5CrRwXlPQEaZ1FTTT7AiFRokYq6ZgMvIwVm9JfBac4oLIQ9jQrpT8qEtU1CpmV62BQopW5L5mhMlKY8lvJqi5nGnhGWEXd0nRMfl7EyxYGTLio1bTDgvJ9foEAIKNdkhzB5fELfrMHlzZuRrYwYHEikjeLyL7+lw33DzxCJv2xpEF72gxpzB4QElHcO646zeoWhY127fMo9nrQddzvcDOiIaQb5ennbsJcL+r9uu3HuzMI8013RSRjFhPPtbmLe+8e0FbCvKnLnztCKbZ0Fy0C97LMU2VfIIQlgqKCEGdX/U0H1FGgY1HTiBjz27G87rs4hBufoww013yK0nZBtn3Qd7hUaTeEYJTX2WP3+nNPgoRVlGcNuregc+Ih4vV5TzwRnCEZBALEevWy9QiDSOuw1w4D7o8UfN7RkUz4eQsjcS4QutRPDGuaYNYRf5CJmomp5PS/ZZNEymftCqj3+E6LY3syEChM6fIRFBQhbj2ZjY/tS+6Dm2LNOalQjArGSo5Q8EcekpuOsIgCbG0GIcKEQcAzU7w0VWSdN2jOPNNqKJ7LjUKfqPhhAJnFCz9QTb2XpqDhJGsb1G/IUlRWiEN4A45DK4LNxq5llWWwY575+/CAA6xgwS72Urcp7OoVaU0Foj7hgjwhwvEU401G1nJNMktpY1Rz6k8wkbHLMWeoNUBtAez3ZLEqqOqYHFwTwhrBG/QylKhaK/dFH9CWBLAxxhh7EKS0oast8xIfSGyIRp4HEp17QqNgbBMNS5vwwpytgz/z692Obs1CMH++rZOYrFQaxU79tQRHjjSmZs2i3ylY6QcvMPHX4NNNt8LYVuSXQDj00NjJ7eHnn4sq0ga9mJUXWvCmm65djalRo+g3ire6dRBB69Y6OHRTgZAXG+WmE2H8eFtMk1e6pSqhTYnzIPTqpQNDt4IVCNnnELIBSBnyIhKRWF69BEgz7DEelXBWSm/BaVB4Iij8GVIxV6owKRRbH3/mp0AApIgSMZiJ4iQIDQhLLzhJoShQgVAyb28dNxiuGHzVxYl1eOUVy7KrMFAoJH81BD9INCIsN+wLPHFRTZ5s3/mAW0ehUOS5yRAE/LjEszdqZItskCBFODK+coQA/lwy/6hkuz3kJygUKhAUCoVyCAqFIutQgaBQKFQgKBQKFQgKhUIFgkKhUIGgUChUICgUChUICoVCBYJCoVCBoFAoVCAoFIrsgVwGKmeW1qZQKAoeGxEEi7ds5bQtFIqCx8r/CjAAVYxYofEJKfkAAAAASUVORK5CYII=",
t.LicenseExpired="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAABICAYAAAAQ5YupAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABARpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjU4MDZiZGQ4LWNkOWEtNDY3MS05ZTg1LTcwOWFlZDg0MDY4YyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxRTNGMzgyRkExRjQxMUU3QTlDQ0U0RjY4QUEzQkFCNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxRTNGMzgyRUExRjQxMUU3QTlDQ0U0RjY4QUEzQkFCNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBJbGx1c3RyYXRvciBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ1dWlkOjNhMzUwODIzLTljMDYtNGFhOS1iOGEzLTNkOTE4ZGY3MzQ5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpiZjFjMDMxMi02MTMwLWE4NDgtYWM1Zi1iMTljOTliOGVjMDIiLz4gPGRjOnRpdGxlPiA8cmRmOkFsdD4gPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij56b29tY2hhcnRzLWxvZ28tcmVkPC9yZGY6bGk+IDwvcmRmOkFsdD4gPC9kYzp0aXRsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4BTPUAAAAjtklEQVR42uxdB5wURb7+JmxO7LLAElUUAyoSRJBwBkBQQRQRhTOhGJ4YTj15BvBUDlH0DlEBlVMQFT3E9O4ZT1Gf+QyYs+SFBZbNeXemXn1d3Ts9PT2zM7uzsCv9/X7NLD3d1VXVVf/w/f9V4xLARgBZcODAwb6OUpcUCPXyD6/TFw4c7PNocMt/Kpx+cODAAWWB2+kDBw4cGHAEggMHDhyB4MCBA0cgOHDgwBEIDhw4cASCAwcOHIHgwIEDRyA4cOCghXAyFB00D0lJQOfOQG0t4HJJ1SJ1S2EhUF/v9I0jEBzsczjxROCJJ4DqaiUQPB7g5JOBL790+sYRCL9T5OQAHTsCCQlAQwNQVKS0oAMgM1P1jRkpKfuYw+1WwlAI9TfHiCMQfmc48khg6lRg4EDg0EOBLl2AxERlCu/cCXz/vdKCTz0FfPPNvttPdq6Bz7fvtH/AAGDZsmCBcPvtwEsvOQLhd4FDDgFuugk46ywgNdXeZ+7ZUx1jxwJXXQW8+CJwxx3ATz85/bevITsbGDQo+BzHRns3epw3KzFzJvD118AFF9gLAzvwumnTgK++Aq6+2ulDx0JSfIojENo5Fi4EHnxQuQXhwBcdzhym5bBokSrDgQOHQ2jHuO8+4JprQs8zlPbss8D//i+wcSNQUqIERrduwODBimPo2zfUyqirA667zhlVDtovBFAsFC2ybx1nnils8fzzQhx1VOR7ExOFuPpqIUpLQ+8/77x9o/8mTQpt+zHH7DvjZ/jw0PZfdFF7b1fxvukydOoELF0aen72bGDSJMULRAItgfvvB4YMAX7+Ofg7ltu1q/19jNWTe8jKAtLTI7spduD1vK9DB/XpjvPro/vD+vGzObBzq1hnlhnvkKRRLg/2a2uAEQTjGVbYhZ9pScajTcnJ6tm/S5eBTOyYMYDf3wKmQw78jz4C3n03PnWim0ChYAZDRvPmxVbOjz8CEyequnGSEmlpwOWXA3/5i2Ki//AH4LDD1LHffiq3gS+dQqW0FFi/HvjsM+C114Affggun24J+48REN5Pl4Xxf04u8ho7digy9IMPgH/9C6ipia3+zDQ85RQVaj3iCFU3CgO6TMXFwObNKszK4513mi6fderRAzjpJODww4GDDlJhW7aXMfpdu4B164BPPgFeeCG2icJ+ZJnsiwMOUP3NcqnXOBHp2jEc/P77qj9jBSfh0UerOh94INC7N5CXB+TmqnH35JOqDhyLFRWqv6ygK0llwDFgHrsMVz/+uL3APOYY4Pjj1Xvu1UvdS8KS/f/ddyq0vXatGidm8F2NGydnsJzCL78M7N7dTlyGW28VccEjjzT9rOxsIUaOFGLOHCFWrRLirbeEePttIdauFWLNGlWXs84SYuvW4LJ5TUvaeMYZweUVFgqxerUQmzZF377KSiGWLhViwAAhZs0S4tNP1blo8fPPQlxySXT1TU8X4r77hMjPj638m24K7zL4/UJ8/bUQu3ZFV95XXwkxZUrTdb3iCiF+/DH6erIer70mxLBhTZfdo4cQ06cL8eKLqn3hwO9vv735Y7e4WIikpOBn5+WpMRrt/azDEUeoe489VohXXhHi0UeFWLBAiGeeEWLQoLi4DK0vEK65Jj4C4a67wj/j4IOFmDdPiPXrYy+XAygevu8774g2gYcfjlzP/v2F+Oab5pX92WeROYTm4LrrItf3hReaV25dnRImdmVyMq5YIUR5eXRlUZlcf33z2/jdd4p3Mp7ftasQ338fezmzZ6v777xTiOXLhXj5ZSHmzhXi8suVYEhNbQccAn3dePmMVtBkvOce4D//AW6+WZmSseL//k/d31K0lbDjpZcCt95q/x1dELoXduZuNIiXWWrG3/6mTO1woOkcjsehaxPOFWW6+eLFwHnnhX7HDFTmnEQ7NmmWm92AWEHXzMwJPPOMcgFjRWUlkJGh3sO//62yJUeOBP7xD6Cqqnnjf49zCPRxX3ml6TxvyicSNf37h2aAEfS3zSCh9/DDwFFHtax+b70Vn3ZSqNCHtpJnbDf9ZmYzbtum/F36iLyOawHYjqFDI5f9yy/Ahx8qP5n+KH1Y+vrduyv/87jjQvkQhky/+CJYoK5caU+Qffqp8kNZvkGWkf/gAKPPPnq04gKsaxfCYcsW1eZNm9R7o+/MgUx/ecSI0Os5cTlGrO+YIAHLsfHqq4ojYB15lJcrYcB+pM/PcUDBYuWGHnlE9d1vvwXOReJC6LOzv8mfsC84CclJ8B6Sl+x71ofPJFdkxpo1ih8xT34KEpZljP+zz1ZchBW8l/wH20ZBR2HFZxx8sOIKyB+xL1gP8gfkNshL8FqGuvmc7dt/h2HH994LNZV++02I3NzANaedpkzCcGhoEOKHH4R49VUhHntMiGXLlA9GU7miIvjac86JT71pEtKHNqO2VoiJE4PNRevh9ao61NeHtoNm7dChihuJ9Oy//jX03pUrQ31xK2pqVKgsUv14dOsmxMUXK1PVuNbOZXj8cSFGjBCic2f7ctxuIcaPt3ftbrjB/npyKn37RvcOundXvJEV9LXN17FPrbj3XvUc8ivRPOvAA0PL4Lhs6j76/tax2lSomi4OuQ5yVfz/tGlCvPuu4mB4L10S47s2zyHEcpA4tPMF+QKNa8aNCy8MduwQYv58FSMO94x+/RQ5tmFDfAUCj/ffD65PdbUQPXtGd+9ttzVvgBnHBx8E37t5c2BwcxJTQFqF1ahRsbfR5QovEA45JLoyeF1ZWfC9X3wRn3fQsaMaB2aQ6MzKiiwQTjkltueQvLaCQjPSPQkJQvzyS/A9L73UvHYef7wS0OTOIo33disQZsywn+SXXhq4Zv/9wxNBDz6oNFm0z6PFsXBh/ASCx6MGtVUDk8SLVrtZ27ZoUfTPt7MAjAQruyQaRjTinZg0eHD095MZN4OWG99vPN4FlYIVo0dHFgjUuq0tEDIzQyNPS5Y4iUm2sdglS0LPcwMO+oAGli8PJYLom114IXDllcpHjxb0D6+9FnjuufglO7WE1MnPD/UBrf5wJJh9ZLP/TZxwQuh3q1a1TiJPtKC/bAZ9YOYZxANPPx16jv743gb5CPr8ZjARbvjwNpOzt/fXMpAc48QnK2wGk3T+678C/58+XRFodskgJGSai3ht+UXm3khOau5kspJdsWQyUr7bJXQRVuKVgodk794Ek5Ts2PhowGXGTBqiwGOiFscOow6ccCRtWQ77wyygYhGurQWSq8xs7dMncI5k7dtvK8KXyo9k7F7chm7vCwRmgJFJNYMhlDPOUC+YIJPMzD8r/vu/WyYM4onLLmu5drVq2FhSk+20syEk9t8/1BqxY/T3tLa0CxWGgxEqZDYhN68h0x4OtBqtAqG56djxBlPeTz01tN0XX6wOCgRmJr7xhjr2MPauy3D99cDkyaHnufmIedMRpsIy7deMjz8GFixoGy+ZKyApwOINO60fC4xQlzXUyJBdW9CWVtjlFNAKYI4Hw7o33qhCoJGEgZE3YBWmLUmdjyc4ySONW+YWcF68/roKgbLNtIZ+9wKBsfd777WPST/2WPC5888PvY4d1RZAk5VWTmstsInHpLO6HrGueWgNRMM30Cr4/HO1tJx5DL8X0LJlIl1TG6rQDZ0/X1kNkZK32r3LwAQXZmtZwUQa6/4EJJuspAslZ7wWOrUErNvq1aEuT1uD1dLYSyvpYuaW/vlPezKwoECtSDWSiMrKAisFaT1wIjEByN2GF/NyonNBGl1NZhtGSrCjhUASmNxCK7vIe0cgUBhYXQD6tHQfrKYksxZJvJjBrLrWAlfrkaBiRmAk0I154IFQYWD1XfcmDKvFSlK1h92RqUX79Qs+x5Td225Tk4JCIZKgpgvHFYxtGd9+q9xjgtvaM9rGepMnsRNm3NiXgpBC8HfjMsyapfxAK5gGumFD6HkuR7WCZmRrgam6772nXJJhw5TG4cTi4GJdTj9daS76eFZhQN6jrfiqZoHAdFszWhIN2SOOrByW55wTfI4kJJdqk0+IJAwILkFuD1aQGSQS77pLjTmmNnPHLitoBbXy/p171kIgu3r33aHnec7OhSCsoShqO+va8HiCa9DJytOkI5iXT+uFTDDzycP5sjT9aLraxcD3tp/+669K+xhg2I6TJh65760BWo+01MxgDkq0i9CMNJv2CFrIXIDGg9yJddEc9xaha8RIXLsWCNS0VrKQ4GIQbn8eDlZCjOa8VeM15YtOmaI+I8V3OXkolZmwRHfBGJDG1uvhwB9v4eISLjRhWKwtgouCuEO0+V2QzW6rAoEWjDUEyc1oogWtNK/X3lqKt7CNxNW0FCTYjz0W+OMfg11autB21nS7EgjMCLRqe+74Q94gUkdaGXG+6FhiyvSXqV2iGRBccUfTNJpruSyXPh2XX3M1G8GIQ1uCMWi5VNaKSy5R7W2LYN9S8Js5AO5gFItAsQqEeG+Rbhc2bY1fbmLSklkgcDzHuvVem+MQ6BtZswyp5bn92Natke+luWvV+OH2LAynLYwJGwnMIKN1wIw2s1tAq4JWADPr6E4wqkB+gcu0SQiZy25L/IEZZOOtvAu5EPNAi1qF7AEdwjFBZWEGFUe0JKGVfzDebzzB8UuhFcm9tQPzKmKZ0LQQzGAOSSwWcpsTCMzVJmNsBScW05NpAkU67CYazd14g/4pn8MQp3m9BDde5eTnM+mHM5xFziMaIdOW/FIKZSuYP0HhFmmfAw5eptqSU7HbmLY1QE37/PPB57jfIKNLkd49Bfmf/gTccEPweUYn4rXvhQGa7NYNY7g5DetpBaMehhDg/pUU0Ew+skbazKDw4zUXXRTq/rWiq9f64p7EiB1IMFJLRTLPjRCe1V+jtWFHTrYEBqvLcKIZ3PyUxGJ7B0N13GSEv9BsBic6CVHjNygMl4mDmAOWacIUhGT+mSeyp37QlP4zJ7fZPWRojpu58PcTmaxD14IWHOtKwpdts1sgRe6KVl48QQKZSoRWrgEKTkaoKGhp5XDccmckclDkl2hRsP8YnWJS3ty5apEX20KLiH1PC4yWBjdFMRPBZiHempZoqy9/tm4IEQ9wU4nevaN7PpecNrXX4rp16tq0NCG2bw+c533WzTEjHTNnNn/5MzcDse51+Nxz0T977NjQdnHNvHWvAG6m0Vy88Ub8fpeB+w9YwSXw5mu4aWxLwT7NyGh6g5RYlz/zGDIkujpwyTM3wgn37Gjx5puB/Sja7fLn1sgWowZj6me8YCxMojVjzhun1rQuV42lrWTKY4mHt4QZt3uO9RxNXMbySVQ1B2Zuxe69xtJWu2utZfLXlWk2N5e9p+alBreu3Yjm2dGAETKre2IHWgbGu2yuhcW2MFLUyuHU1hcILdmcMhK4MowmZEtBtp2mH1NkyReYCUKarbHAGv3gIItlUlujFLFsUGu3UtCOAOQ+h+w3Cj+SpNGAeRjcV9DMIUT7vFjqa0e2/f3vavEYl8g3lZBkgNzUn/+s+CC7nBW7ejaXuafpT3LWvH+lHSdimPnkD0iQMvWebkdT4B4fXAzFtjSVPRsHuLRtk4DWS10bNUr5TC0J+5AU42akVj6C5ApZWA7ySJOMRIx18xK+DJJAzDrkxGMiiDlVloP/iitiqycX43DDU/q1FAa0LkiEReu/UpsxgsJQK7UxU1uj1eb0oZn2yoQVahEKYoZ6m5pETHQhacpkLPqunKjGD4XQDyZ5RoFp/cl78gunnaa0ryH4+OMrdr9oZAcSxnw272V9OUnZ1khpuewbYzxxg1luBGv0MycLiV5GU5j1FwmMJI0fr+rMyUoCj6sQW5rwNnasmrhULnx/7BtGNxj25UavVnAXbF7Pscn2cByyTryPbWFfkPexRlxaDyXt67cdP/nE3keMxCdwLz3zxqr8mxuQ9ukT4A3oG5uxe7cQXbrse7936Rz7+lHcvgRCuD0Vt21TJJfdPZzw3G+RG7heeWWw8CDpZkeyxWcHW+dwjnYnEFrfZYg3GKoM97uADK0tWqTM/0jkC1dQ0l2YMSOUTKLvyR8PadIVkgf3RKmGAwd7BtkMj8vj9dZzGdqfQCAmTFCTPxwRRAKMB/1e+pbkL/jDFkwK4bpzux/KIBi5MBY1NQXSGXNJuJGAdMaqg9aO1pF3kccseSxsPYHgbZedw40lmNjETSntdjrmenIe0YIkDpNg7BZfhQOXWDBRjUSx1RhJ0l8gI5ZMebeLxvFcov5ZqwsVl+X7BFMciOU0hHlWuPLr9HugP8ur/99Y48WyPPp3RpvsymmqHi69HuFQr99jV0+h1yvRpm0uvV9q9e+MNvj0thn3J+iHXz8vIvSN0Otjfi/mOvj057ksZQubNtksZ9DKCBe7M/e90RZzuT7T93bvIbn1LVJvu5WYb76p2HH+bBmjD5E26IwELlfmbyFa10w0K2Yj368clNWlLvj8LqQm+1XU0cZ74XVVpW7tMzXFrzwXoQ9qDpZMjfNFaZlbC5tnZvmVHVemDxp90FXJZ/nls6yhdb8sKzlRyG5RD6+tdKG23oXMNL9663oZfjlIqyrd2nhjPRqL8esDMF3+KQVfubyGdczoIL/I0uvhU2VobSl2a9V3WeYewXp4vcK2H3h/Q50L1eUuuC1toNfndgvZj0K7bnehR7umQ4YPrkR98uv9W77bjZpaF3Lkdx59Alv7hpG/JFmXxFyh7q3U+9GoQ5lLq2dKsl5Xeb6+xoWaskDd2K/8O62TXzW2LLjRbIfPF/w+hP5PkuV91De4Gu9l3bR3LA1ZFEVQJHAEQngwdMjfVlixQm3ZzjBWNKviGMZhHPihh5qfpGMHOYGqitw4e3YePvshGS//PR+DhtWqF2y5buc2L86R123b5cHaJfnofoCcmeW6VkuRbuIrqbj3qWx8/E0KEuQgHTW4CpeeUYoxo6saB7KQg3rq7K74cVOCNriqqt2NgmJnsQeP3bITF06XPo28Zd7DOVj6bAecObocD926U715OZl++i4RZ9+Sh6w0gTce2IqUDKE0ZIr6fs2adPxtVTa+/SUJaVJgjBlahavOKsExw2rUZJBtKS7w4PRZXVFc7kZZpQe1cmJqwobCscaNp+cVYPypFZqAC0Fn4OVnU3HZXV3QJbsBO4q9MCTL7hIPBh5ag3eW5iOlpx+PP5WJeY/mYPTQSjw1dwe8nLgZwD33Z2vnxx5bhRV3FCAlSU34c2/Lw7e/JWlR68oqN+pkF/fM8+Ey2Y+XTyuBO1W3imQZb/07BefKvjx1ZAVWLNih9RmF4T9XZ2CO7Lv0FIFdRR7Zz3Liyj6adlIZ/iTL6NTDp/pB9ledFAaXzOuCz35MlsJXtr3KrfVhgxQQZRUu3H/9Llx+eamm5Rcsy8bK1zNBMVpSJvtMvr/jBlbjxvOLcOxIWakKXWi7HIEQO7itFHdcYuyXO84wn4AxXsatyTMwrs4sPSbifP+92rG5NRaI6JNg2y4vduxM0DQyPPbXcZBu3enFlh1eOWB0TcVr5SB97IlMXHxHVww+shor7y5AZYkbc5Z2xJq30vHMnQU4+8xyNWAlNsv7f9mSiJunF2HggFolLDjOpcYbekRNo/DYXepBoRQST76agQkjKnHq6ZVaGazjpoIEZGf4Ne3X6MpILfvX+3MwZ0lnnDy8HCv/XoCCjR7MeSQXL76ThhcWbMfok6q0ieeTbf51awKqa9246cIiHHRQvTboWRy15YCDaxrrGwL+fqoUZDt2JqJ393osmbFTPb9O1S0n06cJRN5/wfgyLPufTKx+PQsTRlbi3KvKkf+hFw+u7iAtKS9mjC9FSiehJqjEVvbNpkTceOFuDB5cC5fs58efy8TM+XnyfAIW3rJL9bnsnyopuAqLE1Cw2xMw+eVnmZzUG7ck4/jBFbj9mt3ajPnog2Tc+Wgu3v8qBS/ctx05Wb7Ge7bKd//T+kTcetluHDWoVuOY2K8NcsIPOkwXolLo75ZC4NcNiZh6Shkmn14Bnzx/8wO5GDZ9P6yatw1Tp5QrBeF3BELzQS6AW5u9/vreeb6+Foua1JMoD7e9u2Bcly6vy0j1K3NUKC2z6acEzFnWET3y6vDc/G3oOaJBm6QpsrzJN/TEgieyMeWUcrjcAXOcrsnEP1Ri8KQaRREbJFSJrgFT1HXpctLTrF74dAecemKlpgH5bNYh3ewuSKG07j9JmLu8I/ofWo1/ysmfcZi/0fydOb8nFj6TjdHjqrS6sS2ae+L1Y+pJFbLO9Y2TUiuUdaoK41vLArUJL/84UAqESVMrlHVSrV9PLclcJ/lqOx7kw7xLd+PMWd2x/F9ZOPf8crzwdho25yfjojOKMObkKqVZRaBvkpL8GC8F4PCza7SyRh5WjS9/ScQTr2dgxsQyHH5UrXa918OX4lfuiQjULdGr/nPIfnWYdEGFNkEnDa/Az5sT8T/vpOPN91IxZVq5ei6fmaTacsZxFeg/RZZdYHofpbqLkajcB1437MgaTJpWoQnAfvvXYsRlvTBrcS6G9qvBARSslXueu3TQViA1xyffJmkWxrhhVejZRwqDjfJ8PjSX4frzC/HHseUQVaGmpOazGodXn1AVwW+4Vg66gYfW4cOvU7B8TabGSdBHtwO1X121CxP+UIGM7nIWrFcTk4Lniik7cZo0ra3+c2M93KZ6VJp89Sg4mKAD+iQy/Gn596SJFTh9VBnWfpaChX/rgMdfyUS3LrXS1C4OELmmuvCgdQT+yt8m6aJLl2Fk/xrp2rjx8xZvgFBtQtLT4jLKoMDq27tWa1RBkddWrQa9D48uEC3vg9+xHny/2CyFTv96TBlTjq3bEvDWf1IiE7WOhbBvhJYKOXhJNEqt38ikywnVIcuPe2/apSZHTYDhJmnplccqqfE+35CkfVchzdx+fWoxZmRVkMlZX+vB5FHl2K9LMuatyMF5E8uRlea3TdnQJpEUFknSMtGep0/I7l0bsPj2ner51YEIRYIcSQ1yjjzyQia6f9qgTcxyWY8RR1Vj6OAaVUaE1BCX1NCbt3vx8JIszV0hP0L3a9IJFcjr5lMTvUb59bOlW/LFT9Jsf6ojyitdmD+zEH3616mojw0xSYtNI0JJksqqr89PkJof6Jztt48U2AUPSAbq20YUfunBm5+mIiurHkMOrw7S4h5aSylCc80+3pCsfVctrbIjD6zDqKFV4ftAqChEr84qzFAkXQqHVHSAujq3NolJRDUOHiP8ZhMW9MhJS3OXfr14Wy0k27ozAZecXoIx9PGrg1Vw99wGTL6iEL3POACLn+qA808tC13851LWBIRL832DNLgRlrOESWn2V0qLghPBEDCbdyTgjssKMfS4mkDoMJwslG0gp3LX49kqAifbT27lmMNrkNfbFwgFSqE0aEgtThxUhaffyECPzg3440nlgUnlCtbSjIxsLkjA5p/r4ZYT7qEns/DhujRMOrEMxwzQuY3UyO8kNa1Bs5hGnNRTE9r5BR6UlHuwfM4ODDlelrErUIYRFXnu7XSItYZw9eLC8aUYNaIqsgCS9a/3qQa499Km0Y5AaGPwelU4ixM9JE6eobQITKt5GV0g+bZ41i6cPK5SmdgGSvT7TG+ZmueA4+oxWZqmc5fnoHfPOuRm+ZQACqqHYYGYZrFfj4KkK9IPpp28qAVprayeX4CjaRGYVxzvbrrdPikIBx1Wi9XztitNbhZ+paZ+kH3w47pEfP5DsjbZd0iTffXaDFx5cEmIRmXdGXG4eUkuau9zycmmLjl/Qgnu/FMhElJFUBvCwS/7hjzLEQfXagIhJ9WLd79MwUffJmPsCZVITQj0EfuxqNSNZ2Q7xpxapYRFo8/WtMuUoPc3w9aOQNjXISdcTqYfbq9ivRsTieQEKdrlwZOrMqSZ68OUE8vhtviXGilmJNEYk9dGG1VVu7Rr/jKjCG99lop7nsiW1oAbycn+IE2lMeecl7XuQGKONEDyN3ux6rUM9OlVj9NPrAjhBkLq4YueKXcZSVAJprqbk6CSVVm3PpKDb35LxFWTSvDvL9K0NowdUoU+/eqCQry0Muj73zJ9N4YfW4OGUuYw+HF43zrl6pREx23U1Hgx8JAyLH1Ud5W2AGdf1xX3rMhF/4NqMe288hDBEu37sLqMjFJQMGSm+fbKEHRIxdaa20INPs3vpBXMzywEMuDsIN3H/n3qNL/+g69TUFIgXw/3k+0OfP1LIq5ZkIcFT2YHMhxNijNN+q1aMlO6fnTQtbllMmoJUFJjH3FMLa6QE+q9dSla/kCCVwRpqoGaNhR4X2rChlJ5ohu0urz/VTJmLeqGh1/MUhaLyVcnMlJt6pEY2V0ImkTpuiXEz0z9MNoq/37t1TQ8+2YGBh5aiwVzCqW7UIbN+Um4e2V2wIIx1Ynh3aOl5TFkdA2Gy+Pwo+vUdSWxjH6hWUDgfsDrFak44BDlw2zZlRBK/gnL+8jQ+yHZ8j4EVFSjo+rb4i1uvPZRGtLSfTj2yOoAh+RYCO1cGPiVD7jupyQ0pKvBR22VJM3XPj3qGtdTMX4ftJu3tDD79q/FzRcU4YZFXTD5pm54YPZO1FVJLfdQrnbJhaeUwZ2BRiKLgoeZgt/8moisj32Nmoqma88uDcjp5GusEwewX6AxI/LKqSV4dm06NuQnonuX+qB6HDe8GteeU4KFT+Xiglu6YPa1RSjc6sHt/+ioqe3zx5WpCWUa4PT5P/8xCTV6dEF7jDR99+9aj8zM8ASeIUyKpTvz3eeJjXkIbANN/gN71MOTLlCV78LcFTmyUDcukj558v4CF5xWhuUvZ+LRlzIx+bhyjJtUpcKUev+y3cVlbmW6l4ZXhVodhCtku0JVN9N5PSWcZGajEBPBioDXfC3fR9pHfi3kKoRLq0v3zg3I7egLum7Tdi++ky6Qv8yFK+/shF83JmPBNTvQf2Bd+NwNRyC0N7i0vIGr7u2kCQK+eA7Kw3vX4uNHtyI9RzH7JOxIIjWy/A1qsP15RrEWz176fBYGTO6l5TP06VWHRTcU4OpzS4KIQpduas95uCMaFgdSYYuLPXj01h246GKVGWf4pJygRspt3iE+XDWlBFct6CLNYnewryvdg7uvLUQn6aIseykL/U/rpfm3fXvXYeXc7Zg6sVxNsCQ1acgfMB135oJAmzmJ6PqsuWs7TpsQJlPRpU8OOau+/DkRIy8L/ChOcYkH/Q+rwUf/2ApPmsC992fjwy9SccLQSpw3oVzT2D37NmD6hDLMWdwJtyzLRb8jtqFbjwZtMlGgkGPxC0Rm7BvrgGAuxaX3l9mnF6rN+3dVvszH3ySjdpsU9h1E47oWWgc3Lc6F737VDyyzvMKFB2ftxMyZ6n2Ql0iS1zE6tEIKNGZ3HiTdsOW3bcOFZ5dFXv/RmiO3Xa52bAu4WB43Inhxk742gJl/tXWuIPfAp+fR9+5WD3eCyp3fKLUDhQI1YAITVfwm4k6am2Wb3di4LUFjrqnts3r6lWVAwk3P4d+wTT2LQsEcPqS27t7Zh2w5oVlmgfRNC+UEy+uoaymfXob8ZJKNy6U0cdCailR1FK73IF/eT7eC2j61mwisqZBl+Opdsh5ebdIYefvGB+vEumdkhLEQpEoqLXFrEQaGLs0aukH+rVkI3eu1vv3+t0TUybYeIP+f1VEPhyao9Qa/5qt+OCBPficFLuvGvqGpH/H5UG0ol27Tpu0Jmu/eq1uDar9HCaV8WTeun+iRp5+Xz6yRwo/ZmQz5HiTfqVe6SgyVMnOUQtBteh9Ct9C65vqQk6Pex45dHhSVq7UZWiajPN1bPjetl7IqQtKW+Tfdttvl8VCrjeoSRyDEUyDoC2I0n9G6qMkI2RnpqB79OiODzbr6zqN8VU04CJ3Vr0boopdMm2cZJnGlfo9LaXytvCoEEoWMFYQZep2MpdzWeqQhQCzW6mX6TXyIx+Tr261YrNDr77InUjXfOsOGdHPrWrJMvy5T74+agMukPS9Zr6Nf719j8VembgNXIBC2tKcIVLkZej3LTG3RF3hp95cjEAI26lyvn/eZ3n2ChSswEpSs78PMKRirUysREj7dkwLBcRmai3T9BaVGR5g1wi7mHcUP/jQO2FiQqBOaZmTphx2So6xHrL9YF23GXUKYNqTaXJcRQxtyYqhrgj5Z7c6nhzmf2oL3Ee07pkDIC1MHh0NoA/hYHvPQZAaeAwdxoqWUIP7Q4RAcOHCwZ1Di5CE4cOAgyEKod1wHBw4cSDRQEHDxZZbTFw4c7PMo/X8BBgB5OBYtILpQMAAAAABJRU5ErkJggg==",
t.LicenseBannerDevelopment="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAABICAYAAAAQ5YupAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABARpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjU4MDZiZGQ4LWNkOWEtNDY3MS05ZTg1LTcwOWFlZDg0MDY4YyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMDlCNDkzMEExRjQxMUU3OEEzQ0UxQUI2NDlFMzk5RSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyMDlCNDkyRkExRjQxMUU3OEEzQ0UxQUI2NDlFMzk5RSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBJbGx1c3RyYXRvciBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ1dWlkOmNhMjU0YmI0LWZlMjEtNDM3NC05ZWE5LWNkZmFiY2RkZTA3ZiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpiMGM4Y2MwNS0zN2M5LTY0NDEtYThmNC0zOTU0ZDM1MjY3ZTEiLz4gPGRjOnRpdGxlPiA8cmRmOkFsdD4gPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij56b29tY2hhcnRzLWxvZ28tcmVkPC9yZGY6bGk+IDwvcmRmOkFsdD4gPC9kYzp0aXRsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7DNCRNAAAbLUlEQVR42uydCfxdwxXHT/5C1JaEqn3fGhKUWlpLba19J9Yi9qJKQ22xiyWaBrXFltKorQ1F06rUFhFViqKNpUQiqCIJUUvC9P81PX1z585977737vv/3/v/5/f5XPJ/9965c+fOnDnnd86Z6WFEJotIb4mIiOjumNmjXSDMbv9Hz9gWERHdHnPa2v8zK7ZDREQEsqAttkFERIQiCoSIiIgoECIiIqJAiIiIiAIhIiIiCoSIiIgoECIiIqJAiIiIiAIhIiIiCoSIiIgoECIiIhqHmNQUURtWWklkr71EZs0S6dGjvSe1d6XRo0X+9a/YNlEgRHQ7rLeeyNChyd8mTowCIQqELoh55xVZe22RddYRWWop+/enn4q89ZbIX/4i8uyzIh9/3L3baM6c9G+ff9593n+RRUQ23bTd6G63ur/4QmSuuWzfeP31KBC6DFZdVWT//UX22Udk+eWtGhwaCFOnWvX4lltE/vGP7tlWDAIfxnSf919jDZExY5K/HX64yLXXtvRrRVLxy1Zob4bzzxd5+mmR008XWXnlsDD4UoS2/77CCva6Z56x9809d2zD7gZ4kzy/RYHQYlhySZE//UnklFNE5puvunvnmcfeN26cyDLLxEHS3TWkLmAydW+TARPh4YdFFl88fB578O9/F3n3XZFevez1sOsLLpi8DlvyySft/198MQ6WiCgQWg7zz29twJAwuPtuawsy83/ySVIlXGUVkX33tfbiEkuUzn3tayK//rXIt78t8uGHsWdFRJOhpXD55ZYYcvHOOyI77CCy884i996bFAYA0uyll0TOOkvkG98Quemm5Pn+/UVuuCH2qu6Azz5L/zZ7dtQQKoucNkvEhWyuvMClA7tflI22ySYiBx2U/G3KFJHttxd5/vl8ZeBvP/BAkZkzRX74w9Lve+xhTYdHHin9BumIZoELs3dvka98xXYeNAk8Fn/7W/ln9e1rTZXFFhNZYAHrBkVY/fvf1kSZNq2+9kDTwRzq08fWlc7Oe+FmRQDmxfvvl/6N5gX5inuO+vLtOP/CC9YEqxWUufTSIgstZMtFSNOOb7xRnMeHdoATWnRRkYUXthPFhAkl0pC+yDf0QX2+HFU9k/2fvh9y07r9e801LZ9FuVxL+7/8sn2vDgTLsE+nCRr2hAMOEDnttPoEAo16zTUiw4fnux4b/6tftYMH25/BR0QdH5bO8/vfi2yzTVKyb7ihyF//Wlv9/PLGjhU55hj7G0IGrwXCgPr4IJ7hlVdEfvc7q7UwuOkU1Gfrra3w4l46S8ibgWBCiI0aJXLzzfnrTGfH9MHFutxyYdOJTkmHROjceac1od5+257bbTeR3/wmef2RR9oBtOuudtBSps+8U95zz4lceaXVwvLU83vfE9lpJ5F+/Ww7IGR88F0nTxYZP95qaU89lb8tENa09+abW60RwctzlWS+7z6R224T+clP7N/EpCCkl102WQ5tQx+DbHb7Lu23++5pDeLrXxc57jg7gay4ou2rvsbKhHHPPSJ33GH5LBU4TDx8NyYYyr/xxiJG6wxBIBgrZxtznHKKKQSXX17+OQstZMygQcaMHGnM888b8+mnyfs//9z+ftddxnzySfLcuefW945LLWXMrFnJMv3n58HbbxtzySXGPPVUbW10//3GrLZa5fruvbcxU6dWX/6995bK2G23+r/pmDHG9O1bvq7XXltb2ZddZsx882WX26+fMSecYMy4ccZ88UX5sm67zZghQ2p/zzffNKZXr+TzDznEmA8/zF8G/Xevvey9hx1mzGOPGXPllcYMHmzM7bfb8uofr9MbLxCOO64YgXDRReHyF1nEmLPOMua112or9513KnfKPMeIEaYpgFBZfvnsel54Ye1lP/hgsQIBTJhgzAILZNf3pptqL/uhh9IDkWPAAGNmzsxfzt13G3PSSbXX4+WXjZlnntLzGdi14Iwz7PucfbYVZu+9Z+vGJDB8uDFLLFG3QGg8h1Bt0A62JjZVyCvgAzXspz+1UYW1AvV++vT63xOVEvWvEj74wKqOqKMhO7RS27z5psh//mPVUlRWv61QdzEdUEN9zgWu46STwmVjt2K6KA+AHY0aq3axkqrVgjpwuGq0C7wyV1xh+ZgQfDPrtdesOxgTgXJpR+qJWebjO98R+eUvRQYOTHMycBCV8NFH1tREJed5mAq0PeYv7+O7nzmHCdjmcPXUD9Vf2w7zLyuaket4Pzgc+jvv5NaTshlP1Av+CJOOOtCnOMe18D5NTSpie0LYlSNVFNjPQ4ZYu9sH8QIu4BN+/OP660f8QBGAAMKeZ0C6Awi7G6GD3czH4mPSkfmwfEA4gqOOsvaxDzojvAYE5QMPWPubTkCHQRBgr2+2mciwYXYAu4OMAeZ6PCANEZ4+GFyXXmrtVDoZ9dOODA8DmYnXZccdbSfFfs36lhCdRG8++qjI44+LvPqqfQcGEMKPesEz4KHxeabLLkvb/fAPDMbf/taGiVM2hCRCyxVOtAPCkbKPOCJZxp572onD5TtCHgLalvL//GdL8jIwVQjMmGHfGy6Be3kfOAfczC7wPv3qV0mBgOCgTZU/4Fv7ggSi9dRTbV/k/VSAwmPAE1D/XXaxbUh78r7rrmt5FYQb3i7q/c9/1t+PG24yVHOssopVeX1cc03yutGjy9ta99xjVbw99zRm882N2XRTY3bayZovN99szEcfla7n96Lq/8QTybrAVaywQuX7UJmfey79LnntwnXWSXMYjzySvOaGG9Lljx1rTO/e+Z7Rp49tx7nnzjYZ9tmncjltbda+93Hjjelre/So/hscc0y67IkTk9dsuGH6GniVap6z5prpMtTGr6aPvPGGNXsr3QdHttJKJf4DbuWcc4w5/3xjRo0yZsUVW4RDyHssuKAxr76abuSnn07agRApWbj6amPWWKPys5ZbzpiLL7YDFoKmqHeA6PEFwlpr5bt3++3T5Nbhh+d/9nXXJe/FRl5ySXtuscXSNvOLLxoz77y1v2tIIOQhNPWYNCl575QpYXu/lmP8+GTZn31WGkxZAmHgwOqesckm1QtwSE6f66I/1/KOtNUuuxiz444lIV2AQGiewCRUQnzMvr2NqoTaBogd+MEP0veijn/rW1ZlRP2qBNTkE0+06nqlGIC8QJ1GxU45dnMmvGBa+GsJ8E558Yc/JP/GHFG32BZbpG3mESPSgVf1AhdYXmAGuMCdiC++CPguOMwzVOyyxnMHBe36/aHWHBjGxF13WVOvwICo5hAIJAiFeAMGv+aXQ8bQiX2wKMd3v2tt1mpB/jq2VxGgQ0Nu1Qo+8HvvJX+rJtkKbiErUAZ713+Wz8l0NCZNSgfn1EMOuyCmI/R9OhuQjvARLoiMveSS+vpOgej8XAZmL1KIfVx8sSVoFFzTp0+6UxG80wy5AwTPhLwj1QRf+cFb1Xhoymkifog2ATydnYTlDwz1bJQDpNo3vymy8cZ2AEGuoZnR7hBxMO0qVGlLl9yDfGsG3H+/yFprJX/70Y9EDj7YBh8R5Mah5G63EgiEzOIW8sFsr1FhAKaV9fsSbGi7xfP97zdPIhHscdHqZDVuvpBAUG+Ab8rA0tcTOVoEqjFXiHocNEjkkEPsv/MIXr/tmmWtArwpDH6EmQs8D/zOgbcNwYEXA+9SB67O1bkmw623plU53C64ilwQYuuHdeJCK8plWC/OPFNk9dWl6aBxCH68QzMI0dAADQlAeCMWrjnnHDsx5NXC6hGujQShyGi15daexDzmvQntxu2MBtHlBcIZZ9jgGR9ISD+hA2LRn13wnTcD+Lj4n5sROgja2sKCotmB1kWORoisBcQEEC8AkYwJBN/kJlg1K5jIMJX9OIYQyHeAYyCOogOIz84xGUjMOPvs9O/8BmvqAqLJZ5+xserN8CsCmCzXXde8HU9nSV8A9GyBZTDwChDB6IOZFTOTJCYiKzVyk3eCRCWykcVxb7+9uZe2I1EJTZjFfJkYiaakn/tBSwqSyeDU/KjLlhcIRPKRuejjoYfCMy0EjBs+C9zU4qKx/vqWhCP8NxTRpnUim/HQQ8Nqej3kYqFf93+fV922ilAYeLPh5JPTv0G6ER6OEAhpCwgGNAQIS40GbXYQHckBtwBRSlQoHrctt0xfiwAhk5To3y4hEBgovIzP+DLbZ0k+P8UUFBU7kKVmE/ILqfnYYzacFl6DUFI3TdbvbKQgc31ISHQWVDARI++CkFjeJ0vgdTaYJYkRcQGPkHd2ZPWqVlzwlFBvXOscW20lcvXVNnTcBSt1dRmBwIuGgm2IuyeOPgQ/2AX+oJGbgbDIBgMI240DTqMSyGMgrhyVjw/WbBwC9jUdTEEwDB2tWZeQZxLwVWdMgLwIeVBaTUAQqEZ8DaYRJKOrnbIehB+z0nICAXXHXVlIQVIHqx5XsoNdlTxPopQCm5JMREwV7svqGER7oa7R0HlnTsqDQyCDkKjK7bZrTg6BTnX00aXfMcEQEM0qEEImVzXfnPv97MqOEAhFu3IhTOFR3DgdtLuWFwjMtNdfn/6d0MsLLih/r+8iw/2YRbxkdQ4yAvNE/SEUYOR9F6cPTAjITxhwBluzz0JwLviyXffjscfaNNyiw5eLACYk9XW/WTVh3KQN+9+i6AFEX0EDc5/TCO9NyEXcQBdq492OdELUPX8QQyJCkFQCqbRuA0CUhXLfy6nNeUwM7H9meeIJ3Ig5gqRY7ovlzSC6iEgkfRdTwhUGDf5QdYG0a2I+/EFD/kjeNRk05bYjiDoGL/kpLtDe8mhg1I8Ueh+EuBcJzEpSkV34vEcIpKHvvXeaKA8B8tc3WRGWPifUUhoCASUDBoQ/OrkKoXUG3QGGvat75ynwBPgdvF4goACLaridHnXNd4W2IngPtqlz3434DgQuwo7IOD/+g7bHLcbGrvvtZwXrRht1TH1HjrSanavpQaYRf8IEA7Hsmnao0jDzmKWsu+ACQvKJJ4qtHzEPeDtWWy3JhVEvkquYXACRlfR/Jg8ECKYrgphYBLYBIJeGvUJdDQZBgEmHKeqvHUEOSihvpWUEAoM3BBZ94KgFzBQnnFCczUY5qP86EylQpxvp0ehI4LMn4g1txwU+e7wqzDqYQrgoUYPRHNAKGGgKFuDoKC0I3mfwYJu7oIAXIEsVcwfhxaDT1Yuwq7MSmHBnF11vzAMEE1v6udoJ7kP6pg5wCEHcoTopqguY99J304VvtO3xwmUlejU4IK/xAqERYbJIZXy1Rc3czJAMGOIPiCBT4HJs8d18E7jqKjvrk13qA1cdRzlUu9VdPWAAsyI0sfx+ijAcj++Oy8JFF9mNdxoBVu2ijr4Ji5fEdZezlL1yNSGTCy2CoxKOP772lcGbhkNoVCc677xiykED0EQqCE7XNAklXpWDz2zTcasJUvLNp2raLhR9GPoNrw7LjIWCeyrBdQ2HOnY17xqqm99+CGlMuFA6cx4bH8EXCnAK1bMWboRZHY2y0hocmpEJWKo9794frqbKuxDC3GA0XkNAzWRGrydjC5cTs4Q7QPD5I6FRK2sFtiXxA6hqxM2zbqCCFOFf/KL6AUPyCvXFW0EKK+pi3hkRNyADhfpAwhKokheoz5CHtDNl0VZZ2hmRonh44BTQtDbYIBy9SDnEWEC4QsqxNqSCaEDd5wI1l3rnfVcdTLwf7cRzuD+0gQuuN9YMwKbm+0Dq4rUKgfamnvjwCfPlW2Rdx7N1AyAEd60L7RKCjFlMNiYh+S7voW0IP6NuU8YDZhqaBe+EwAsF36lAJMEJToJoxg5A4zdqoaPpbjT12PjYW6F4hcMOK59PwEpBSHBfJSM0mSAiOvG22yY7O4BEc9djyAM6FrM89WWQYGdCJOV1RyEEKEM7KffmzYtnQGF7ci+dkBmPTl6p3akndi4H6ejch0uNwYkWgS0cIrG4judB7FEGA1tDhvPWl/flXurL/QiXSjEgfE82gKG+cBwMamZQhCFHnp2OuIdyeDbfirogUOuN3OQdiGZl5S88VbQHAhWhlsV3wX1ANMJ/UCfqwn0IM94ntG5E4zCjuRZZrXScfnp4LcWTT86+h0VEp02z17GOPYt5brFF6fx++6U3VWGt+1Zpk3jEo7hjemsJBI4HHggLhVtvzV5glZWX118/uZPPMsuEF2x9/fUiNryIRzyiQOiQg+WoH344LBTmzLHLrO+6qzELL2yX/A6tlsvqzNOnh4VBuV2P4hGPLi4QGs8hNALYWgR1hFJEFdjAEDiwurwqi2zgHgptaqoEDqQQQSIREd0TM1pTICgIOCFMtd71BwhKIs9eo8t86MIbEHwhb4nmV0BQ+kw7rjQEGGSbz2TjCQi5FrUciDuyPX3CCzIPAsvfwYh20NRyn7GHrKIsP8Yf0lGJK4gw1x3I75VIyazcEohJn4zUrex5F7+ttZ1cQGhWCihS0lrB9/GJ2FDZAG8ORCaTBO/ptxntRfl4U8q1g67oVO0295CifEfaqdxS6npdteV3eVIxdGy0kd3RuRawuxHmRaVnQDx+8IExRx0VPr/zzvb8aaclf2fnKHdjDjiL+ecvnT/1VHtf1sa27JTEeXb70XvmmsuYZ56xOwq7m6TSDmxqo2D3qmWXTe7uxMa2mFX+hi0uP+PuSPzCC3ZTk3Jtw85XoXdw68xx9NGlstk45Ygjkue33jpdzqOPGtO/f/nnn3de8r4ZM9Lfacstw3VkM1jOX3WVPY856e6mBRnNBjLldpHmWQo2Yc3TZ9mR6oorSve99JJ9/6ydxSHDqV+eXcC6HYeQday7rjFnnmkHRYgfADQqjf+zn1miMW/Zhx5q7z/xxPB53c2XnZXdDg6efNKYPfawW86DO+8sbVE2bJj9jV2kuEaP1Ve357faqlT3I48sbYVGR2WXJ/gUflt7bbuFHZ2X+91OSofimg02SNZHDwYL53v2tBwK0HNvvWX/3njj7LbZd197DVuSu+UizPzt1W65xZ7Trfh4f1eoqiDjGnZB0m/GzlOVtotnZ2Tu436AsNVrdtghWbYeKgC2286e//nP09/v+uvL9zlw6aV2MgB8s0r9iXYAeM2oh27jRz38aw88sPQtjz8+CoSqDwYbkpSt0QYNsjMRnYttr1Zd1Xb8ass86CD7QdgbMnR+993tefba8/fw0+3UONjHDyy+uP2bffnKbYGG0FIwONEO+P2VV+xsy/Z3/M12dGDIkKRWc8cddh9A/l5vPXsNM1PoWWxXjjZDua5WAcaNy24b9kQE+++f7fbFrTt1avJ3tA+3fXTQukL3ggvsb5zLev7IkfYavq3+NnmyFZh9+5a2yQNZGh7t+PHHVqDqb3xLsNlm2c9GuwTs87jyyvbf9LNyfUm3kYP81t/was2ebdvE759//KMx779v+87jjzdcIPTscrQIr0UgCEdnATucABUCS9wQYVbAIaBGbXYNViFtVm1I/k9wjWs7E3nHSjmEVhNm7duzZGryrHPPtTwAkYgEXnH4bUNUnLtLEKQrfAXnNKBKNz4hbp66kvGI7R9aO0HfgchRLZeyeG9sdNoBG37ChOR9BJmRas55t43cAB5dLctPM/bfCRDYQ84AYJdmgs5INSabUK8hV8V9d57LO8EjEIRGqjEBbLQ/gWlwB36KuwsW+yXfhahPvgm7MPPvctBNWsgyVfDtCGemnfl+yhXQV+gzQ4fab0IYNkFPDezbbRLRgFZtswPKX3CV0GQGtw4sjepjoRI8IhyEqPprFDB4SOsl048sODqqSw4SDUf4LNl3hHLrFupuaq6SaIQB67M4ttmm/LtA0PGsrFh/fQfqpmUSFqwdXwejP6iVvNQl4vU6VhdmABC3T3o8hG+1285p+2o7ah0JT3ff3U3l1r0mWTMTkhTBwYCvFHmJAGOQcg/pz5CQ7DHqZomG2ssnn1UQuv2FbwVYXIidzIC/Z0nRc1kcvQ3SUviwKhj8gcB5V1iQcKQLeMCS+zMxLPaFF9o1KVkngE7nlstzmNXY3YpZhLRyOhDrGDAwNSmJmZrsQTQJhb8QScjDQn2zWHZ9B4SahnrTuXV5Nh3wvpBTjcj3IrAyEoNSBwgLglSbuqzCS1ONtQ6jR5dW7qJM18WM0KFOZLvqO5ULXec7knRF+6KRoZEgCBAMw4bZzXdD64SqIPTbQwW8qyHp4FfvD3Xm21J+FAhNgCy3ZMjlpotn0EE0yYjBzIIXJOigimtHZRMOVXdDUNWZ9FddGGbKlNJ5hACdh9kVdZJdrdjliKXiEQqap8HzGKi6GExIs1FhBdBGiLVH7c5KTtOOTKJYqFySxIC/+zIJVe55LYcsVjbxASyIglsZrSpLS9D73AVGdAMgTQ7TdkboZr07rj8GMYvG8I34Zq5a7wMNAuGBFkH2KNeTXo4QYsk6fS8faHOu6aDuZzUF1FWLq1HXEnFTnjHN+LYNSsuPJkM16N/fZqrpofvzaad0d0hiFmamYS8BrmVrLmYRZgZfsLDgi1suSUZuufp/Fg1RTcKdSehI2J/MgNzPLItwCA04hJT7LM0cVA6BuAIGL+fUHnY1iqwBmbWZKrMk9/NcNBzKZdAjEJiB/fq5KrPa7+XWClDtgcFD2SxKClfAs3TpPL2GBDn33f11DMgqpO3RUPhu5bI3sfsRQiTGkeGoQpf24ztlAQ2NA20CzoJ68Cy0AMwujTchs5PJhJWuqA8HKdBobG5WbuHabVfzMjTiOOCAsBvz4IPt+YED7d94Ddz7Bg+27LXivvuMWXrp0vmhQ8PlqjsOlyAYNap0Dy5A8O67JS+DekJg8hUw7bi09Ly6HX3gsdBrnn02eW7mTBtLUa5t1O3oejhCx4gRybJx/fbqlXY7uq5IdbkNH55dLi6/rPbTY9ttw+8+cWLyOmJEeOe87kO+hRtnMmaMjeugTQcMyL5v0UWNGTs2XZ9jjy21yfjx9jfX5Uo8BHEkxKHE0OVOBNKbWUrTfBWo7UQfEgUHew/Z5y+AyYzDSkTMvr69rqsUUaZLEsL8M7vBFaBKEpHoMvFoKpQ3aVJSU6AeXK+agRspiGaCmsuz3HdgFlQ1llWIuE5naZ6ZtV+Ga86wVgX1rXQtz9eITn2mgt9RhSlDZ3bqQp2YNbNMKqIM4Vi0DXlnX10nQhLzx/9+qPn+mhNoDczCeRcxoW/w7RlOfF/+7tevtOZiOeBlge9AY4REZW0OzJAHH7RLrmG6sd6CC7wymBiNCbGfEQVCREQzAOHPYiksplIujLmxiAIhIiKiJBAiqRgREfF/RIEQERERBUJEREQacAgwGDFAKSIiYg6CYFr70Tu2RUREt8fM/wowALO9X+PzfEmSAAAAAElFTkSuQmCC",
t.LicenseBannerSupportedBy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAABICAYAAAAQ5YupAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABARpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjU4MDZiZGQ4LWNkOWEtNDY3MS05ZTg1LTcwOWFlZDg0MDY4YyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxM0JENjYxQkExRjQxMUU3ODAzQkI2OTI4Q0EyMzZFQSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxM0JENjYxQUExRjQxMUU3ODAzQkI2OTI4Q0EyMzZFQSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBJbGx1c3RyYXRvciBDQyAyMDE3IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ1dWlkOjgxYjI4YzQzLTQzNzctNGNlNC1hODk1LTZlNjE5ZjdkOWMxNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjOGZmM2ZlNC0yZmRjLTgyNDAtYjlkZS02MDg1MjIwOGI0YTkiLz4gPGRjOnRpdGxlPiA8cmRmOkFsdD4gPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij56b29tY2hhcnRzLWxvZ28tcmVkPC9yZGY6bGk+IDwvcmRmOkFsdD4gPC9kYzp0aXRsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5j1ZUXAAAYZklEQVR42uydB5gURROGixOzCCoYMGEWc845R8SAipgVzDlgxqyoPOYcwZxzwJww55wzZgUUFQXt/17b+rent3d3dnf2bveuv+cZ8WZnenp6uqurvqrq7mBEPhORzhIREdHeMaZDs0AY3/w/HWNbRES0e0xoav7P2NgOERERyIKm2AYRERGKKBAiIiKiQIiIiIgCISIiIgqEiIiIKBAiIiKiQIiIiIgCISIiIgqEiIiIKBAiIiKiQIiIiKgdYlJTRGWYay6RrbYSGTtWpEOH5p7U3JWuuUbku+9i20SBENHusPTSIiedlDz37LNRIESB0AYx2WQiiy0mssQSIjPPbP/+80+Rb74RefFFkddfF/njj/bdRhMm5J/7++/28/7TTSeyyirNRnez1f3PPyITTWT7xuefR4HQZjDvvCLbbivSt69Ijx5WDQ4NhC+/tOrx9deLvPtu+2wrBoEPY9rP+y+4oMhttyXPDRggcumlDf1akVT8txWam+Hkk0VefVXk6KNF5p47LAz+FaHN5+eYw1732mv2voknjm3Y3gBvkuZcFAgNhu7dRR55ROTww0WmmKK8eyeZxN738MMis84aB0l715DagMnUvk0GTIQnnhCZccbw79iD77wj8uOPIpNOaq+HXe/UKXkdtuRLL9l/338/DpaIKBAaDlNOaW3AkDC46y5rCzLzjxuXVAnnmUdkm22svTjTTLnfpp9e5JZbRFZYQeTXX2PPiogmQ0PhvPMsMeTi++9FNtpIZJNNRO65JykMAKTZBx+IHHusyOKLiwwblvx9oYVErrgi9qr2gL/+yj83fnzUEEqLnCZLxIVsrrTApQO7n5WNtvLKIjvumDz3xRciG24o8tZb6crA377DDiJjxojss0/u/BZbWNPhySdz5yAd0SxwYXbuLDL55LbzoEngsXjjjeLPmmYaa6rMMIPIVFNZNyjC6ocfrIkycmR17YGmgznUpYutK52d98LNigBMi59/zv0/mhfkK+456su34/e337YmWKWgzFlmEZl6alsuQpp2/Oqr7Dw+tAOcULduItNOayeKESNypCF9kW/og/r8O6o6Jvs/fT/kpnX79yKLWD6LcrmW9v/wQ/teLQiWYR9FE9TsCdtvL3LkkdUJBBr1kktEhgxJdz02fteudvBg+zP4iKjjw9J57r9fZL31kpJ9ueVEXnmlsvr55d13n8jee9tzCBm8FggD6uODeIaPPhK5916rtTC46RTUZ911rfDiXjpLyJuBYEKIXXmlyLXXpq8znR3TBxfr7LOHTSc6JR0SoXP77daE+vZb+9tmm4ncemvy+t13twNo003toKVMn3mnvDffFLngAquFpannOuuI9Ool0rOnbQeEjA++62efiTz1lNXSXn45fVsgrGnv1Ve3WiOCl+cqyTx8uMiNN4oceqj9m5gUhPRssyXLoW3oY5DNbt+l/TbfPF+DmH9+kf33txPInHPavuprrEwYd98tcvPNls9SgcPEw3djgqH8oUOzGK2jBYFgrJytzXH44SYTnHde8edMPbUxO+1kzMUXG/PWW8b8+Wfy/r//tufvuMOYceOSv51wQnXvOPPMxowdmyzTf34afPutMWedZczLL1fWRg89ZMx885Wu79ZbG/Pll+WXf889uTI226z6b3rbbcZMM03xul56aWVln3OOMVNMUbjcnj2NOfhgYx5+2Jh//ile1o03GnPUUZW/59dfGzPppMnn77KLMb/+mr4M+u9WW9l7+/c35plnjLngAmMOOsiYm26y5VU/XkfVXiDsv382AmHw4HD5001nzLHHGvPpp5WV+/33pTtlmuPMM01dAKHSo0fhep56auVlP/ZYtgIBjBhhzFRTFa7vsGGVl/344/kDkWPhhY0ZMyZ9OXfdZczAgZXX48MPjZlkktzzGdiV4Jhj7Pscd5wVZj/9ZOvGJDBkiDEzzVS1QKg9h1Bu0A62JjZVyCvgAzXsjDNsVGGlQL0fNar690SlRP0rhV9+saoj6mjIDi3VNl9/LfL771YtRWX12wp1F9MBNdTnXOA6Bg4Ml43diumiPAB2NGqs2sVKqpYL6sDhqtEu8Mqcf77lY0LwzaxPP7XuYEwEyqUdqSdmmY9VVxW5+mqRLbfM52TgIErht9+sqYlKzvMwFWh7zF/ex3c/8xsmYJPD1VM/VH9tO8y/QtGMXMf7weHQ33knt56UzXiiXvBHmHTUgT7Fb1wL71PXpCK2J4RdMVJFgf181FHW7vZBvIAL+IQDD6y+fsQPZAEIIOx5BqQ7gLC7ETrYzXwsPiYdmQ/LB4Qj2HNPax/7oDPCa0BQPvqotb/pBHQYBAH2+mqriZx2mh3A7iBjgLkeD0hDhKcPBtfZZ1s7lU5G/bQjw8NAZuJ12Xhj20mxXwt9S4hOojefflrkuedEPvnEvgMDCOFHveAZ8ND4PNM55+Tb/fAPDMY777Rh4pQNIYnQcoUT7YBwpOzddkuW0aePnThcviPkIaBtKf/55y3Jy8BUITB6tH1vuATu5X3gHHAzu8D7dN11SYGA4KBNlT/gW/uCBKL1iCNsX+T9VIDCY8ATUP/evW0b0p6875JLWl4F4Ya3i3p//HH1/bjmJkM5xzzzWJXXxyWXJK+75prittbdd1sVr08fY1Zf3ZhVVjGmVy9rvlx7rTG//Za7nvNZ1f+FF5J1gauYY47S96Eyv/lm/ruktQuXWCKfw3jyyeQ1V1yRX/599xnTuXO6Z3TpYttx4okLmwx9+5Yup6nJ2vc+hg7Nv7ZDh/K/wd5755f97LPJa5ZbLv8aeJVynrPIIvllqI1fTh/56itr9pa6D45srrly/AfcyvHHG3PyycZceaUxc87ZIBxC2qNTJ2M++SS/kV99NWkHQqQUwkUXGbPggqWfNfvsxpx+uh2wEDRZvQNEjy8QFl003b0bbphPbg0YkP7Zl12WvBcbuXt3+9sMM+TbzO+/b8xkk1X+riGBkIbQ1OO995L3fvFF2N6v5HjqqWTZf/2VG0yFBMKWW5b3jJVXLl+AQ3L6XBf9uZJ3pK169zZm441zQjoDgVA/gUmohPiYfXsbVQm1DRA7sMce+feiji+/vFUZUb9KATX5kEOsul4qBiAtUKdRsfMcuykTXjAt/LUEeKe0eOCB5N+YI+oWW2ONfJv5zDPzA6+qBS6wtMAMcIE7EV98FvBdcJhnqNhFjecWCtr1+0OlOTCMiTvusKZehgFR9SEQSBAK8QYMfs0vh4yhE/tgUY6117Y2a7kgfx3bKwvQoSG3KgUf+KefkufKSbaCWygUKIO96z/L52RaGu+9lx+cUw057IKYjtD3aW1AOsJHuCAy9qyzqus7GaL1cxmYvUgh9nH66ZagUXBNly75nYrgnXrIHSB4JuQdKSf4yg/eKsdDU0wT8UO0CeBp7SQsf2CoZ6MYINWWWkpkpZXsAIJcQzOj3SHiYNpVqNKWLrkH+VYPeOghkUUXTZ7bbz+RnXe2wUcEuXEouduuBAIhs7iFfDDba1QYgGll/b4EG9ps8Wy3Xf0kEsEeZ61OluPmCwkE9Qb4pgwsfTWRo1mgHHOFqMeddhLZZRf7/2kEr9929bJWAd4UBj/CzAWeB85z4G1DcODFwLvUgqtzta7JcMMN+aocbhdcRS4IsfXDOnGhZeUyrBaDBokssIDUHTQOwY93qAchGhqgIQEIb8TCNccfbyeGtFpYNcK1liAUGa222NqTmMe8N6HduJ3RINq8QDjmGBs84wMJ6Sd0QCz6swu+83oAHxf/cz1CB0FTU1hQ1DvQusjRCJG1gJgA4gUgkjGB4JvcBKt6BRMZprIfxxAC+Q5wDMRRtADx2TomA4kZxx2Xf55zsKYuIJp89hkbq9oMvyyAyXLZZfXb8XSW9AVAxwZYBgOvABGMPphZMTNJYiKyUiM3eSdIVCIbWRz3ppvqe2k7EpXQhFnMl4mRaEr6uR+0pCCZDE7Nj7pseIFAJB+Ziz4efzw800LAuOGzwE0tzhrLLGNJOMJ/QxFtWieyGXfdNaymV0MuZvp1//u86rZVhMLA6w2HHZZ/DtKN8HCEQEhbQDCgIUBYajRovYPoSA64BYhSokLxuK25Zv61CBAySYn+bRMCgYHCy/iML7N9Icnnp5iCrGIHCqnZhPxCaj7zjA2nhdcglNRNk/U7GynIXB8SEq0FFUzEyLsgJJb3KSTwWhvMksSIuIBHSDs7snpVIy54Sqg3rnWOtdYSuegiGzrugpW62oxA4EVDwTbE3RNHH4If7AJ/UMvNQFhkgwGE7cYBp1EK5DEQV47KxwerNw4B+5oOpiAYho5Wr0vIMwn4qjMmQFqEPCiNJiAIVCO+BtMIktHVTlkPwo9ZaTiBgLrjriykIKmDVY9L2cGuSp4mUUqBTUkmIqYK9xXqGER7oa7R0GlnTsqDQyCDkKjKDTaoTw6BTrXXXrnzmGAIiHoVCCGTq5xvzv1+dmVLCISsXbkQpvAobpwO2l3DCwRm2ssvzz9P6OUppxS/13eR4X4sRLwU6hxkBKaJ+kMowMj7Lk4fmBCQnzDgDLZ6n4XgXPBlu+7Hffe1abhZhy9nAUxI6ut+s3LCuEkb9r9F1gOIvoIG5j6nFt6bkIu4hi7U2rsd6YSoe/4ghkSEICkFUmndBoAoC+W+F1Ob05gY2P/M8sQTuBFzBEmx3BfLm0F0EZFI+i6mhCsMavyhqgJp18R8+IOG/JG0azJoym1LEHUMXvJTXKC9pdHAqB8p9D4Icc8SmJWkIrvweY8QSEPfeut8ojwEyF/fZEVY+pxQQ2kIBJQsvHD4o5OrEFpn0B1g2Lu6d54CT4DfwasFAgqwqIbb6VHXfFdoI4L3YJs6992I70DgIuyIjPPjP2h73GJs7NqvnxWsK67YMvW9+GKr2bmaHmQa8SdMMBDLrmmHKg0zj1nKugsuICRfeCHb+hHzgLdjvvmSXBj1IrmKyQUQWUn/Z/JAgGC6IoiJRWAbAHJp2CvU1WAQBJh0mKL+2hHkoITyVhpGIDB4Q2DRB45KwExx8MHZ2WyUg/qvM5ECdbqWHo2WBD57It7Qdlzgs8erwqyDKYSLEjUYzQGtgIGmYAGOltKC4H0OOsjmLijgBchSxdxBeDHodPUi7OpCCUy4s7OuN+YBgokt/VztBPchfVMHOIQg7lCdFNUFzHvpu+nCN9r2eOEKJXrVOCCv9gKhFmGySGV8tVnN3MyQDBjiD4ggU+BybPDdfBO48EI765Nd6gNXHUcxlLvVXTVgALMiNLH8foowHI/vjiuEwYPtxju1AKt2UUffhMVL4rrLWcpeuZqQyYUWwVEKBxxQ+crgdcMh1KoTnXhiNuWgAWgiFQSna5qEEq+KwWe26bjlBCn55lM5bReKPgydw6vDMmOh4J5ScF3DoY5dzruG6ua3H0IaEy6UzpzGxkfwhQKcQvWshBthVkejLLUGh2ZkApZqT7v3h6up8i6EMNcYtdcQUDOZ0avJ2MLlxCzhDhB8/kho1MpKgW1J/ACqGnHzrBuoIEX4qqvKHzAkr1BfvBWksKIupp0RcQMyUKgPJCyBKmmB+gx5SDtTFm1VSDsjUhQPD5wCmtayy4ajFymHGAsIV0g51oZUEA2o+1yg5lLvtO+qg4n3o514DveHNnDB9caaAdjUfB9IXbxWIdDe1BMfPmG+fItC1/Fs3QAIwV3pQruEIGMWk41JSL7Le2gbws+o25TxgJmGZsE7IfBCwXcqEElwgpMgmrEFUPuNWuhouhtNNTY+9lYoXqF//+L5BKwUhAT3VTJCkwkiohOvv36yswNINHc9hjSgYzHLU18GCXYmRFJadxRCgDK0k3Jv2rx4BhS2J/fSCZnx6OSl2p16YudykI7OfbjUGJxoEdjCIRKL63gexB5lMLA1ZDhtfXlf7qW+3I9wKRUDwvdkAxjqC8fBoGYGRRhypNnpiHsoh2fzragLArXayE3egWhWVv7CU0V7IFARaoX4LrgPiEb4D+pEXbgPYcb7hNaNqB1G19ciq6WOo48Or6V42GGF72ER0ZEj7XWsY89inmuskfu9X7/8TVVY675R2iQe8cjuGNVYAoHj0UfDQuGGGwovsMrKy8ssk9zJZ9ZZwwu2fv55FhtexCMeDSkQam8yZA3UKrwLobUUUFdxV5Fnjr8WdctX1QgewRxgBSZ/yS72j8Cmgz+IKAzMBQ2sCfEUqM7KSWDyuN8A8xG1GPXczcLken/dBv8a1zQLbfySxqOlAXJ+vdy6w7/4kY6h66lDsahW+qPyKm6bhbgaylfTyedzeG7LLKk2uvE0BF2jnj35iuGHH4x57jm7l+Ptt9ulub/5pvh2W2mXTG+vB/sk7LFHcl/IBx80Zuml8/e6pP3Z03DeeZO/XXWV/e2QQ3Ln2OaMb8V5F999FzYHjzjCXvv77/l7O8w9d7juCyxg92h0l6FnL1D/OjRH+oJfl9dft0ueu9dSN3c/EO5x9/x48cXctdtsY3//5ZfwdoLTTmuvo73Ym8R9Psvzn3RS7ppoMhQ42NNxwoTq9xdkExOETBz0xQ/dIIe9MnbYIbffIR127bWT+14ofDPugQfseTYYcfcYQHjopr6UzfHKK+FNXNhTA7zxRu7a006z59iwZv75k9cvu6zdmwGwWQ/Xv/22/fvEE5PXsrGOgj0UuXbffXPCZ7vtctfybvp8Nq5VQaPn1lsvd+1uu+UGv/6ux+ab5/Z+pEwF7cvvl19u//74Y2NmmSUKhKLHiitaLaASsLvRppvGgZ7mmG0222bjxxvTrVv+LPnuu8lZVjdIYZchtxwdOIMGJQXCBx/Y8662Qef/4w97np2S9DyDGLA5jVu2agAIB/c8OzeBXXfNnWODX90lbLXVksJMN8xx35N7wUsv2d2n/PZB29CdokPtt/POuc1ti7Uz7aUah7sBiwqFUrugt5mNWirFiBE2Jh+3JCGq+GsLuWqwMXEDsS4DEYnwEDVcbKJNQe157H8WiFGwXD6h5G56dTXApajAhaih4/juSwVyaQCTG+5MvAqL2hCf4bqRcclquLofQq9cgeuq1ghBojmbmsLuw6wD8dz4hHPPtf+SGFVOtm/dBSa1FAgz5iCZijhwshb5eBA/+OLxpxNEQkBKNTER7RVE2DHoSTqCuKVjkgNB4AxrXGYFTQrSGAkdFBC+PnzCkUxC4Iaba04Afn0/1VuDkfwBpoSiG5lJIBEglbya/sPK0f4O3CQ7hd7PBUvD8VwED/EfNVo5u2Ob67goPgSCcERkC9a0QCMjuYil4khfR8ASRq6zbbVgUGuEIYlDaAxESobW0WRw6I5HCy0kcuSRuXoqdPCiIfieA/VU+FuhMdhYqYsJBs0I7wArP5MTwfLo1YCAqlNPTZ4jE7OUQNBQb7SXGu6p0TH28oiywG5ZhHmTZsxemiSGoSkw2Nzt510BHfrbzyfQ8/4CvLiYSZMPzcqEXbtbAGIOsrw/Kd3+QGLw+3VRQeDnVWjd0CiJ0sREILW6Z0+bCl7N2goIGdekSQt9f+rS1BQFQkQrA1scWxuOBt4FHzvLezFgSAI78ECb++GuXYGQ8Aey/u3Pcjp7M8ujEahKz1oBhfDYY9ZE1PLYq9PPmSH8V/kAhIJrNujiML4poXEAvK/u84BmgBZExih8RqWzdKVp2BqmTZu4ZlUUCBGtAmL0mX1ZscclYtU0Q8XWQQ1fw4FKj6pNko5COQF/RSR3kKedgQkg04VtCoEENp5PijKJUW4qtO4QRjKUCxVq2PsqEHRTYHgpgpEqTdYrh39wV0ZCONG+vG8N8xuaYk+PSAW2m8fWxQYm+45Zkk1XMRkAyWKa2IQNrvY8hBm7W3E96bsw/ngO/O3rVatwF2Qp2Gv/67bFVttyByB7OQAyPFH9qQuCAeIZzwMrF4Xq4nIOuvo35kVoltc6FVLntSxmep7vHvAf/jMpB08Yv6N9sSwc7VrrXcIaPg4hHi13dO1qzNlnGzNuXC6Wg8g8YhFcn7keAwYkoxo1dqB79+R1xCGQQwJ69y5dj8GD7bXENKSte69eNtpQQYzEkCE2+tK9rkeP3DVLLpmMw9D3dpPj/HiM4cPDz+/fv3A8zOjRuShEIipDINZm8cVjLkNEHYI0aVRnuhCuObXTQ8ClRzowMx/p3KwHEJo9UelRxXEZlnKpkS6MJgF/UWjNg6CB3NFqBTwPdTxUb3IO8HRwDaaGyy+wShO8A6nhuGFdYBrhEaHuoVW2cBXq/go+oYong1WV0LBoA101Gi2BfyE/IThrj9FRIERERPxfIEQOISIiIpKKERERUSBEREREgRAREZEGkIrEb8YApYiIiAkIgpHNR+fYFhER7R5j/ifAAAu+3z0PC2TkAAAAAElFTkSuQmCC",
t.ErrorImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQIHWP4zwAAAgEBAMVfG14AAAAASUVORK5CYII=",
t.PiechartBack="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAA1CAMAAADmtEJjAAAAYFBMVEVMaXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIAgUIAAAAH3RSTlMACbeu3XUBgH/vy+gqMRghOfqXYUpWwkDGihCfgmebkGEUkgAAAQVJREFUeNqV0ttugzAURNEx2BADBMItTXqZ///Lyi0qrXOkZvajtcbyg2F1gtSJIqfIKXKKnCKnyClyipwip8gpcmo8FaNvitewdtV/PB8WYRD4V83sBJ5q50rgqW2QOBlHiZOXUeJkewZQ8/kKiIOrOCigDS5ncbBCG9ygDUqYgxhpt8EcALh3Syjb3L/AHAB7/a3N7jcHOHIhZu83BvjduTj8BHOAP1XTjw8wB8gG5fGBzAGynN//g4M5QN7y7Rs8VJu+8ky9wR7gocBUD2tg+TFxD7Pa8C75GnbWeSQ54Pk8WULzV8VHNgp35Kr4nk2l+JkLlD42SPle4t0Eqfe75jvsfQLbYGzTrP2yIAAAAABJRU5ErkJggg==";
}(c=i.Resources||(i.Resources={})),function(t){var e=function(){
function t(){this._dict=new Object(null),this._count=0}return t.prototype.add=function(t){
var e=this._dict[t.id];e?e.push(t):this._dict[t.id]=[t],this._count++;
},t.prototype.remove=function(t){var e=this._dict[t.id];e&&d.Helpers.removeFromArrayHasty(e,t),
this._count--},t.prototype.contains=function(t){var e=this._dict[t.id];
return e&&e.indexOf(t)>=0},t.prototype.clone=function(){var e=new t;
for(var i in this._dict)e._dict[i]=this._dict[i].slice();return e._count=this._count,
e},t.prototype.count=function(){return this._count},t}(),i=function(t){
function i(){var i=t.apply(this,arguments)||this;return i.centerX=0,
i.centerY=0,i.zoom=1,i.hoverNode=null,i.hoverLink=null,i.hoverItem=null,
i.lastClickedNode=null,i.selection=[],i.selectionSet=new e,i.notifyChanges=!0,
i.lastNotifiedSelectionSet=new e,i.autoZoomMode=!1,i.layoutActive=!1,
i}return n(i,t),i.prototype.xyInChart=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height;
},i.prototype.toDisplay=function(t,e){return{x:(t-this.centerX)*this.zoom+this.x0+.5*this.width,
y:(e-this.centerY)*this.zoom+this.y0+.5*this.height}},i.prototype.fromDisplay=function(t,e){
return{x:(t-this.x0-.5*this.width)/this.zoom+this.centerX,y:(e-this.y0-.5*this.height)/this.zoom+this.centerY
}},i.prototype.toDisplayTransform=function(){return{xm:this.zoom,
xa:this.x0+.5*this.width-this.centerX*this.zoom,ym:this.zoom,
ya:this.y0+.5*this.height-this.centerY*this.zoom}},i.prototype.objectRemoved=function(t){
d.Helpers.removeFromArray(this.selection,t)&&(t.selected=!1),
this.hoverNode!==t&&this.hoverLink!==t||this.setActiveObject(null,null);
},i.prototype.addToSelection=function(t){return!this.selectionSet.contains(t)&&(this.selectionSet.add(t),
this.selection.push(t),t.layer.touchNodeOrLink(t),t.selected=!0,
!0)},i.prototype.removeFromSelection=function(t){return!!this.selectionSet.contains(t)&&(this.selectionSet.remove(t),
d.Helpers.removeFromArray(this.selection,t),t.selected=!1,t.layer.touchNodeOrLink(t),
!0)},i.prototype.setSelection=function(t){for(var i=this.selectionSet,n=this.selection,r=new e,s=[],a=!1,o=0;o<t.length;o++){
var l=t[o];r.contains(l)||(r.add(l),s.push(l)),i.contains(l)||(i.add(l),
l.selected=!0,a=!0,l.layer.touchNodeOrLink(l))}for(var o=0;o<n.length;o++){
var l=n[o];r.contains(l)||(l.selected=!1,l.layer.touchNodeOrLink(l),
a=!0)}return this.selectionSet=r,this.selection=s,a},i.prototype.setActiveObject=function(t,e){
if(this.hoverNode){this.hoverNode.layer.touchNode(this.hoverNode);
for(var i=0;i<this.hoverNode.links.length;i++){var n=this.hoverNode.links[i];
n.layer.touchLink(n)}this.hoverNode.hovered=!1,this.hoverNode.locks--;
}if(this.hoverLink&&(this.hoverLink.layer.touchLink(this.hoverLink),
this.hoverLink.from.layer.touchNode(this.hoverLink.from),this.hoverLink.to.layer.touchNode(this.hoverLink.to),
this.hoverLink.hovered=!1),this.hoverNode=null,this.hoverLink=null,
this.hoverItem=e,t instanceof h){this.hoverNode=t,t.hovered=!0,
t.locks++,this.hoverNode.layer.touchNode(this.hoverNode);for(var i=0;i<this.hoverNode.links.length;i++){
var n=this.hoverNode.links[i];n.layer.touchLink(n)}}else if(t instanceof u)this.hoverLink=t,
t.hovered=!0,this.hoverLink.layer.touchLink(this.hoverLink),this.hoverLink.from.layer.touchNode(this.hoverLink.from),
this.hoverLink.to.layer.touchNode(this.hoverLink.to);else if(null!==t)throw"scene.setActiveObject invalid active object type "+t;
},i.prototype.getVisibleBounds=function(){var t=this.fromDisplay(this.x0,this.y0),e=t.x,i=t.y;
t=this.fromDisplay(this.x0+this.width,this.y0+this.height);var n=t.x,r=t.y;
return new d.Rect(e,i,n,r)},i.prototype.disableSelectionChangeNotification=function(){
this.notifyChanges=!1},i.prototype.enableSelectionChangeNotification=function(){
this.notifyChanges=!0},i.prototype.notifySelectionChangesIfNeeded=function(t,e){
if(this.notifyChanges){for(var i=!1,n=0;n<this.selection.length;n++)if(!this.lastNotifiedSelectionSet.contains(this.selection[n])){
i=!0;break}(i||this.selection.length!==this.lastNotifiedSelectionSet.count())&&(t.events.notifySceneChanges({
selection:!0}),t.notifySelectionChanged(t.createEventArguments(null,e)),
this.lastNotifiedSelectionSet=this.selectionSet.clone())}},i}(d.Scene);
t.Scene=i;var r=2*Math.PI,s=function(){function t(t,e){this.node=t,
this.nodesLayer=e}return t.prototype.postProcess=function(t,e,i){
var n=this.node;n.targetHWidth=n.targetHHeight,n.bounds=new d.Rect((-n.targetHHeight),(-n.targetHHeight),n.targetHHeight,n.targetHHeight),
this.sizeScale=n.targetHHeight/t.nodeLabelScaleBase,this.postProcessLabel(e,i);
},t.prototype.postProcessLabel=function(t,e){var i,n,r,s=this.node;
if(null!=s.label&&this.nodesLayer.chart.assetsLoaded){var a=s.label.toString();
if(0===a.length)this.currentLabel=null;else{var o=this.currentLabel;
null==o?o=this.currentLabel=new d.Label(s.labelStyle,(!0)):o.style=s.labelStyle,
o.text=a,e.measure(t,o),r=o.style.scaleWithSize?this.sizeScale:(o.style.scaleWithZoom,
1),i=0,n=s.targetHHeight+o.hheight*r*.8,s.outerBounds.addBounds(i-o.hwidth*r,n-o.hheight*r,i+o.hwidth*r,n+o.hheight*r);
}}},t.prototype.getAnchor=function(){return{x:0,y:0}},t.prototype.adaptToViewport=function(t,e,i,n,r){
var s=this.node;this.x=s.x*t+e,this.y=s.y*i+n,this.hWidth=s.hHeight*r,
this.hHeight=s.hWidth*r,this.zoom=r},t.prototype.isInViewport=function(t,e,i,n,r){
var s=this.node.outerBounds;return this.x+s.x0*r<e&&this.x+s.x1*r>t&&this.y+s.y0*r<n&&this.y+s.y1*r>i;
},t.prototype.paintSelection=function(t,e,i){var n=this.hWidth*(1+e)+i;
t.moveTo(this.x,this.y),t.arc(this.x,this.y,n,0,2*Math.PI),t.closePath();
},t.prototype.paint=function(t,e,i){this.paintBasicShape(t),i&&(this.image=this.nodesLayer.getNodeImage(this.node,!0),
this.paintDetails(t,e))},t.prototype.paintBasicShape=function(t){
var e=d.Graphics.beginStrokeAndFill(t,this.node);if(this.hWidth!==this.hHeight){
var i=this.x+this.hHeight-this.hWidth;e.moveTo(i,this.y-this.hWidth),
e.arc(i,this.y,this.hWidth,-Math.PI/2,Math.PI/2,!1),i=this.x-this.hHeight+this.hWidth,
e.lineTo(i,this.y+this.hWidth),e.arc(i,this.y,this.hWidth,.5*Math.PI,1.5*Math.PI,!1),
e.closePath()}else e.moveTo(this.x+this.hWidth,this.y),e.arc(this.x,this.y,this.hWidth,0,r,!1);
d.Graphics.endStrokeAndFill(t,e,this.node)},t.prototype.paintDetails=function(t,e){
this.image&&this.basicPaintImage(t),this.paintLabel(t,e)},t.prototype.basicPaintImage=function(t,e){
if(void 0===e&&(e=1),this.image){var i,n,r=0,s=0;if(this.node.imageSlicing){
var a=this.node.imageSlicing;r=a[0],s=a[1],i=a[2],n=a[3]}else i=this.image.width,
n=this.image.height;d.Graphics.drawImageInSquare(t,this.image,r,s,i,n,this.x-this.hHeight+this.hWidth,this.y,this.hWidth*e);
}},t.prototype.paintLabel=function(t,e){var i=this.nodesLayer.style.nodeLabelScaleBase;
if(this.node.hovered&&(i=d.Helpers.toleranceMin(i,this.hWidth,.9)),
this.currentLabel){var n=this.hWidth/i,r=this.currentLabel,s=1;
if(this.node.labelStyle.scaleWithSize?s=n:this.node.labelStyle.scaleWithZoom&&(s=this.zoom),
e.measure(t,r),r.hheight>1.5){var a=this.getLabelPosition(r,s);
e.paint(t,a.x,a.y,s,r)}}},t.prototype.getLabelPosition=function(t,e){
return{x:this.x,y:this.y+this.hWidth+t.hheight*e*.8+(t.style.margin||0)*this.zoom
}},t.prototype.distanceToEdge=function(t,e,i,n){return t},t.prototype.hitTest=function(t,e,i,n){
var r,s=this.node,a=s.renderHheight*i,o=s.renderHwidth*i,l=s.x,h=s.y;
if(a<o){var u=o-a;r=d.Geometry.distanceToSegmentSq(l-u,h,l+u,h,t,e);
}else r=(t-l)*(t-l)+(e-h)*(e-h);var c=(a+n)*(a+n);if(r<c){var p=a*a;
return r<p?0:Math.sqrt(r)-a}return n},t}();t.Shape=s;var a=function(t){
function e(e,i){var n=t.call(this,e,i)||this;return n.validate(),
n}return n(e,t),e.prototype.postProcess=function(t,e){var i=this.node.customShape.onUpdate.call(this.node,e,this.node.radius),n=new d.Rect(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3]);
this.node.targetHWidth=i.HWidth,this.node.targetHHeight=i.HHeight,
this.node.bounds=n,this.node.outerBounds=n.clone(),i.anchor&&(this.node.shapeAnchorX=i.anchor[0],
this.node.shapeAnchorY=i.anchor[1])},e.prototype.paint=function(t,e,i){
var n=this.nodesLayer.getNodeImage(this.node,!0);this.node.customShape.paint.call(this.node,t,this.x,this.y,this.hWidth,this.hHeight,n,i);
},e.prototype.paintSelection=function(e,i,n){this.node.customShape.paintSelection?this.node.customShape.paintSelection.call(this.node,e,this.x,this.y,this.hWidth,this.hHeight):t.prototype.paintSelection.call(this,e,i,n);
},e.prototype.distanceToEdge=function(e,i,n,r){return"function"==typeof this.node.customShape.distanceToEdge?this.node.customShape.distanceToEdge.call(this.node,e,i,n,r):t.prototype.distanceToEdge.call(this,e,i,n,r);
},e.prototype.hitTest=function(e,i,n,r){return"function"==typeof this.node.customShape.hitTest?this.node.customShape.hitTest.call(this.node,e,i,n,r):t.prototype.hitTest.call(this,e,i,n,r);
},e.prototype.validate=function(){var t=this.node;"object"!=typeof t.customShape?d.Helpers.error('If the display of an object is "customShape", it\'s mandatory to supply the rendering methods for the custom shape'):("function"!=typeof t.customShape.onUpdate&&d.Helpers.error("onUpdate function was not supplied for the custom shape"),
"function"!=typeof t.customShape.paint&&d.Helpers.error("paint function was not supplied for the custom shape"));
},e}(t.Shape);t.CustomShape=a;var o;!function(t){t[t.Floating=0]="Floating",
t[t.Scene=1]="Scene",t[t.Fixed=2]="Fixed"}(o=t.NodeAnchorMode||(t.NodeAnchorMode={}));
var l=function(){function t(){this.id=null,this.data=null,this.added=!1,
this.removed=!1,this.visibility=1,this.selected=!1,this.hovered=!1,
this.dragging=!1,this.selectionLock=!1,this.cursor=null,this.invisible=!1,
this.items=[],this.currentItems=null,this.label=null,this._labelStyle=null;
}return Object.defineProperty(t.prototype,"labelStyle",{get:function(){
return this._labelStyle},set:function(t){null!==this._labelStyle?(d.Helpers.warn("For performance reasons it is not recommended to set `labelStyle` to a custom object. Instead modify properties on the existing object."),
d.SettingsHelper.updateRecursive(this._labelStyle,t,d.SettingsMapping.ItemsChartSettingsItemsLayerLabelStyle,{})):this._labelStyle=t;
},enumerable:!0,configurable:!0}),t}();t.ItemsLayerObject=l;var h=function(t){
function e(e,i,n){void 0===n&&(n=!1);var r=t.call(this)||this;
return r.parentNode=null,r.data=null,r.links=[],r.dataLinks=[],
r.isNode=!0,r.isLink=!1,r.aura=null,r.x=null,r.y=null,r.anchorX=null,
r.anchorY=null,r.shapeAnchorX=0,r.shapeAnchorY=0,r.targetHHeight=null,
r.targetHWidth=null,r.hHeight=0,r.hWidth=0,r.renderHheight=0,
r.renderHwidth=0,r.anchorMode=o.Floating,r.coordinates=null,r.coordinatesCache=null,
r.coordinatesCachePrecision=1/0,r.expanded=!1,r.focused=!1,r.background=!1,
r.loading=!1,r.userLock=!1,r.relevance=1,r.display="image",r.image=null,
r.imageCropping=null,r.imageSlicing=null,r.tintImage=!1,r._anchorStyle=null,
r.zindex=0,r.opacity=1,r.aspectRatio=1,r.locks=0,r.locked=null,
r.fillColor=null,r.lineColor=null,r.lineWidth=1,r.draggable=!0,
r.layer=i,r.id=e,r}return n(e,t),Object.defineProperty(e.prototype,"anchorStyle",{
get:function(){return this._anchorStyle},set:function(t){null!==this._anchorStyle?(d.Helpers.warn("For performance reasons it is not recommended to set `anchorStyle` to a custom object. Instead modify properties on the existing object."),
d.SettingsHelper.updateRecursive(this._anchorStyle,t,d.SettingsMapping.ItemsChartSettingsNodeAnchorStyle,{})):this._anchorStyle=t;
},enumerable:!0,configurable:!0}),e}(l);t.Node=h;var u=function(t){
function e(e,i){var n=t.call(this)||this;return n.data=null,n.from=null,
n.to=null,n.isNode=!1,n.isLink=!0,n.multiId=null,n.radius=1,n.fillColor=null,
n.lineColor=null,n.length=1,n.strength=1,n.dashed=!1,n.currentRadius=0,
n.background=null,n._angle=null,n.targetRadius=null,n.targetStrength=null,
n.targetLength=null,n.direction=null,n.fromDecoration=null,n.toDecoration=null,
n.relevance=1,n.toPieValue=0,n.toPieColor=null,n.toPie0=null,
n.toPie1=null,n.currentCenterOffset=0,n.layer=i,n.id=e,n}return n(e,t),
e.prototype.otherEnd=function(t){return t===this.from?this.to:t===this.to?this.from:null;
},e.prototype.commonNode=function(t){return this.from===t.from||this.from===t.to?this.from:this.to===t.from||this.to===t.to?this.to:null;
},e}(l);t.Link=u;var c=function(t){function e(e,i){var n=t.call(this,e)||this;
return n.parentId=null,n.scaleNodesWithZoom=!0,n.scaleLinksWithZoom=!0,
n._nodes=[],n._links=[],n._nodesDel=null,n._linksDel=null,n.idToNode={},
n.idToLink={},n.lastClickedNode=null,n.newNodes={},n.newLinks={},
n.modifiedNodes={},n.modifiedLinks={},n.deletedNodes={},n.deletedLinks={},
n.drilldownId=null,n.layerSettings=i,n.scene=e,n.clearModified(),
n.styleUpdater=n.createStyleUpdater(n.layerSettings.style),n}
return n(e,t),e.prototype.onSettingsChanged=function(t){if(t.style){
this.styleUpdater=this.createStyleUpdater(this.layerSettings.style);
for(var e=0,i=this.nodes();e<i.length;e++){var n=i[e];this.touchNode(n);
}for(var r=0,s=this.links();r<s.length;r++){var a=s[r];this.touchLink(a);
}}},e.prototype.updateStyle=function(t){this.styleUpdater.updateLayer(t,!0);
},e.prototype.postprocessStyle=function(t){this.styleUpdater.postprocessLayer(t);
},e.prototype.createStyleUpdater=function(t){return null},e.prototype.paintPrepare=function(t){},
e.prototype.paintBackground=function(t){},e.prototype.findObjectById=function(t){
return this.idToNode.hasOwnProperty(t)?this.idToNode[t]:this.idToLink.hasOwnProperty(t)?this.idToLink[t]:null;
},e.prototype.paint=function(t){this.paintPrepare(t),this.clearModified(),
this.paintBackground(t);var e=this.scene.selection;if(e.length>0){
for(var i=[],n=[],r=0;r<e.length;r++){var s=e[r];s.layer===this&&s instanceof h&&i.push(s),
s.layer===this&&s instanceof u&&n.push(s)}(i.length>0||n.length>0)&&this.paintSelection(t,i,n);
}var a=this.links(),o=this._makeHoveredLast(a,this.scene.hoverLink);
this.paintLinks(t,a),this._restoreHovered(a,o);var l=this.nodes(),c=this._makeHoveredLast(l,this.scene.hoverNode);
this.paintNodes(t,l),this._restoreHovered(l,c)},e.prototype.clearObjects=function(){
for(var t=0,e=this.nodes();t<e.length;t++){var i=e[t];this.removeNode(i);
}for(var n=0,r=this.links();n<r.length;n++){var s=r[n];this.removeLink(s);
}},e.prototype.nodes=function(){if(null===this._nodesDel)return this._nodes;
for(var t=[],e=0;e<this._nodes.length;e++){var i=this._nodes[e];
this._nodesDel[i.id]||t.push(i)}return this._nodes=t,this._nodesDel=null,
t},e.prototype.links=function(){if(null===this._linksDel)return this._links;
for(var t=[],e=0;e<this._links.length;e++){var i=this._links[e];
this._linksDel[i.id]||t.push(i)}return this._links=t,this._linksDel=null,
t},e.prototype.addNode=function(t){this.nodes();var e;return this.idToNode.hasOwnProperty(t)?(e=this.idToNode[t],
e.removed=!1,e.added||(e.added=!0)):this.deletedNodes.hasOwnProperty(t)?(e=this.deletedNodes[t],
e.removed=!1,e.added||(e.added=!0),this.idToNode[t]=e,this._nodes.push(e),
delete this.deletedNodes[t]):(e=new h(t,this),e.added=!0,this.idToNode[t]=e,
this._nodes.push(e),this.newNodes[t]=e),this.modifiedNodes[t]=e,
e},e.prototype.touchNodeOrLink=function(t){t instanceof h?this.modifiedNodes[t.id]=t:t instanceof u&&(this.modifiedLinks[t.id]=t);
},e.prototype.touchNode=function(t){this.modifiedNodes[t.id]=t;
},e.prototype.removeNode=function(t){var e=t.id;this.idToNode.hasOwnProperty(e)&&(t===this.lastClickedNode&&(this.lastClickedNode=null),
this.scene.objectRemoved(t),this.newNodes.hasOwnProperty(t.id)?this.deleteNode(t):(t.removed||(t.removed=!0),
t.added=!1,this.modifiedNodes[e]=t))},e.prototype.deleteNode=function(t){
null===this._nodesDel&&(this._nodesDel={}),this._nodesDel[t.id]=!0,
this.scene.objectRemoved(t),delete this.newNodes[t.id],delete this.modifiedNodes[t.id],
delete this.idToNode[t.id],this.deletedNodes[t.id]=t},e.prototype.addLink=function(t,e,i){
var n=this.idToNode[e],r=this.idToNode[i];if(!n||!r)throw new Error("Cannot add link - missing nodes");
var s=null;return this.links(),this.idToLink.hasOwnProperty(t)?(s=this.idToLink[t],
s.removed=!1,s.added||(s.added=!0)):this.deletedLinks.hasOwnProperty(t)?(s=this.deletedLinks[t],
delete this.deletedLinks[t],this.idToLink[t]=s,this._links.push(s),
s.removed=!1,s.added||(s.added=!0)):(s=new u(t,this),s.added=!0,
this._links.push(s),this.idToLink[t]=s,this.newLinks[t]=s),s.from&&s.from!==n&&(d.Helpers.removeFromArrayHasty(s.from.links,s),
s.from=null),s.from||(s.from=n,s.from.links.push(s),this.touchNode(s.from)),
s.to&&s.to!==r&&(d.Helpers.removeFromArrayHasty(s.to.links,s),
s.to=null),s.to||(s.to=r,s.to!==s.from&&(s.to.links.push(s),this.touchNode(s.to))),
s.multiId=e<i?e+d.Helpers.SeparatorChar+i:i+d.Helpers.SeparatorChar+e,
this.modifiedLinks[t]=s,s},e.prototype.removeLink=function(t){
var e=t.id;this.idToLink.hasOwnProperty(e)&&(this.scene.objectRemoved(t),
this.newLinks.hasOwnProperty(e)?this.deleteLink(t):(t.added=!1,
t.removed||(t.removed=!0),this.modifiedLinks[e]=t))},e.prototype.deleteLink=function(t){
null===this._linksDel&&(this._linksDel={}),this._linksDel[t.id]=!0,
this.scene.objectRemoved(t),this.newLinks.hasOwnProperty(t.id)?delete this.newLinks[t.id]:this.deletedLinks[t.id]=t,
delete this.modifiedLinks[t.id],delete this.idToLink[t.id],d.Helpers.removeFromArrayHasty(t.from.links,t),
d.Helpers.removeFromArrayHasty(t.to.links,t)},e.prototype.touchLink=function(t){
this.modifiedLinks[t.id]=t},e.prototype.getModified=function(){
return{this_newNodes:this.newNodes,this_newLinks:this.newLinks,
this_modifiedNodes:this.modifiedNodes,this_modifiedLinks:this.modifiedLinks,
this_deletedNodes:this.deletedNodes,this_deletedLinks:this.deletedLinks
}},e.prototype.hasTopologyChanges=function(){return d.Helpers.hasProperties(this.newNodes)||d.Helpers.hasProperties(this.newLinks)||d.Helpers.hasProperties(this.deletedNodes)||d.Helpers.hasProperties(this.deletedLinks);
},e.prototype.hasStyleChanges=function(){return this.hasTopologyChanges()||d.Helpers.hasProperties(this.modifiedLinks)||d.Helpers.hasProperties(this.modifiedNodes);
},e.prototype.clearModified=function(){this.newNodes={},this.newLinks={},
this.modifiedNodes={},this.modifiedLinks={},this.deletedNodes={},
this.deletedLinks={}},e.prototype.paintNodeDetails=function(t,e,i,n,r,s,a,o,l){
var h,u,c,p=o.labelRenderer,f=o.context;if(t.hovered?(u=d.Helpers.toleranceMax(s,1,.9),
c=d.Helpers.toleranceMin(a,r,.9)):(u=s,c=a),t.currentItems)for(var g=0;g<t.currentItems.length;g++){
var m=t.currentItems[g];if(l){if(m.style.zIndex>=0)break}else if(m.style.zIndex<0)continue;
var v=m.style.x||0,y=m.style.y||0,S=m.style.px||0,b=m.style.py||0,C=e+n*S+v,x=i+r*b+y;
h=m.style.scaleWithSize?r/(m.style.hoverEffect?c:a):m.style.scaleWithZoom?m.style.hoverEffect?u:s:1,
p.measure(f,m),m.hheight>1.5&&p.paint(f,C,x,h,m)}},e.prototype.getNodesSceneZoom=function(){
return this.scaleNodesWithZoom?1:1/this.scene.zoom},e.prototype.getGeometry=function(){
var t=this.scene.toDisplayTransform(),e=t.xm,i=t.xa,n=t.ym,r=t.ya,s=this.bounds.x0,a=this.bounds.x1,o=this.bounds.y0,l=this.bounds.y1,h=(s-i)/e,u=(a-i)/e,c=(o-r)/n,d=(l-r)/n,p=this.scaleNodesWithZoom?this.scene.zoom:1,f=this.scaleLinksWithZoom?this.scene.zoom:1;
return{txm:e,txa:i,tym:n,tya:r,zoom:p,linkZoom:f,x0s:s,x1s:a,
y0s:o,y1s:l,x0w:h,y0w:c,x1w:u,y1w:d}},e.prototype._makeHoveredLast=function(t,e){
var i=t.length;if(i<2||!e||e===t[i-1])return i-1;for(var n=0;n<t.length;n++){
var r=t[n];if(r===e){var s=t[i-1];return t[i-1]=e,t[n]=s,n}}return i-1;
},e.prototype._restoreHovered=function(t,e){var i=t.length;if(e!==i-1){
var n=t[e];t[e]=t[i-1],t[i-1]=n}},e}(d.Layer);t.ItemsLayer=c;var p=function(){
function t(){this.nameLegend=null,this.showInLegend=!0,this.legendGroupId=null;
}return t}();t.SettingsItemClass=p;var f=function(t){function e(){
return t.apply(this,arguments)||this}return n(e,t),e}(p);t.SettingsNodeClass=f;
var g=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e}(p);t.SettingsLinkClass=g;var m=function(){function t(){
this.allObjectsStyleFunction=null,this.linkStyleFunction=null,
this.nodeStyleFunction=null,this.nodeRules={},this.linkRules={},
this.nodeClasses=[],this.linkClasses=[],this.node={fillColor:"#c7dae0",
lineColor:null,lineWidth:null,radius:30,aspectRatio:1,shadowColor:null,
lineDash:null},this.nodeAnchor={lineColor:"blue",lineWidth:1},
this.link={fillColor:"#333",shadowColor:null,fromDecoration:null,
toDecoration:null,label:null,radius:1,length:1,strength:1,lineDash:null,
toPieValue:0,toPieColor:null},this.item={align:"center",aspectRatio:4,
borderRadius:1e3,textStyle:{fillColor:"black",font:"12px Arial"
},backgroundStyle:{fillColor:"rgba(255,255,255,0.7)"},hoverEffect:!0,
zIndex:0},this.linkLabel={padding:.6,margin:0,align:"center",
aspectRatio:4,borderRadius:1e3,lineSpacing:.2,textStyle:{fillColor:"black",
font:"12px Arial"},backgroundStyle:{fillColor:"#FFF",lineColor:"gray"
},scaleWithZoom:!0,scaleWithSize:!1,rotateWithLink:!1},this.nodeLabel={
padding:0,margin:0,align:"center",aspectRatio:4,borderRadius:1e3,
lineSpacing:.2,textStyle:{fillColor:"black",font:"12px Arial"
},backgroundStyle:{fillColor:"rgba(255,255,255,0.7)"},scaleWithZoom:!1,
scaleWithSize:!0},this.nodeLocked={},this.nodeExpanded={},this.nodeFocused={
fillColor:"#09c"},this.nodeNotLoaded={fillColor:"#fff"},this.nodeHovered={
shadowOffsetX:0,shadowOffsetY:2,shadowBlur:6,shadowColor:"rgba(0,0,0,.6)"
},this.linkHovered={shadowOffsetX:0,shadowOffsetY:0,shadowBlur:2,
shadowColor:"blue"},this.nodeSelected={},this.linkSelected={},
this.selection={enabled:!0,fillColor:null,lineColor:"rgba(0,0,0,0)",
lineWidth:1,sizeConstant:.5,sizeProportional:0,shadowBlur:8,shadowOffsetX:1,
shadowOffsetY:3,shadowColor:"rgba(0,0,0,0.8)"},this.removedColor="#EEE",
this.nodeBackground={},this.nodeDetailMinZoom=.2,this.nodeDetailMinSize=5,
this.linkDetailMinZoom=.5,this.linkDetailMinSize=12,this.linkDecorationScale=4,
this.linkDecorationMinSize=4,this.nodeLabelScaleBase=30,this.linkLabelScaleBase=1,
this.scaleObjectsWithZoom=!0,this.scaleLinksWithZoom=null}return t;
}();t.SettingsItemsLayerStyle=m;var v=function(){function t(t,e){
this.layer=e,this.styleSettings=t,this.nodeClasses=d.Helpers.arrayToMap(this.styleSettings.nodeClasses,"className"),
this.linkClasses=d.Helpers.arrayToMap(this.styleSettings.linkClasses,"className"),
this.nodeRules=this.sortRules(this.styleSettings.nodeRules),this.styleSettings.nodeStyleFunction&&this.nodeRules.unshift(this.styleSettings.nodeStyleFunction),
this.linkRules=this.sortRules(this.styleSettings.linkRules),this.styleSettings.linkStyleFunction&&this.linkRules.unshift(this.styleSettings.linkStyleFunction);
}return t.getClasses=function(t){return t?t.trim().split(/\s+/g):[];
},t.prototype.updateLayer=function(t,e){void 0===e&&(e=!1),null==e&&(e=!1),
this.isIncremental=e;var i=this.styleSettings,n=t.changes.style||t.changes.zoom&&!(!this.nodeRules.length&&!this.linkRules.length);
if(n){this.isIncremental=!1;for(var r=0,s=this.layer.nodes();r<s.length;r++)this.layer.touchNode(s[r]);
for(var a=0,o=this.layer.links();a<o.length;a++)this.layer.touchLink(o[a]);
}var l=this.layer.modifiedNodes;for(var h in l){var u=l[h];if(this.updateNode(u),
e)for(var a=0;a<u.links.length;a++)this.layer.touchLink(u.links[a]);
}var c=this.layer.modifiedLinks;for(var h in c){var d=c[h];this.updateLink(d);
}if(i.allObjectsStyleFunction&&(t.changes.zoom||this.layer.hasStyleChanges())){
var p=this.layer.nodes(),f=this.layer.links(),g=i.allObjectsStyleFunction(p,f),m=f,v=p;
g&&(m=g.modifiedLinks,v=g.modifiedNodes);for(var y=0;y<v.length;y+=1)this.layer.touchNode(v[y]);
for(var y=0;y<m.length;y+=1)this.layer.touchLink(m[y])}if(this.nodeRules.length>0){
l=this.layer.modifiedNodes;for(var h in l){var u=l[h];this.applyStyleRules(u,this.nodeRules);
}}if(this.linkRules.length>0){c=this.layer.modifiedLinks;for(var h in c){
var d=c[h];this.applyStyleRules(d,this.linkRules)}}},t.prototype.postprocessLayer=function(t){
var e=this.layer.modifiedNodes;for(var i in e){var n=e[i];this.postprocessNode(n);
}var r=this.layer.modifiedLinks;for(var i in r){var s=r[i];this.postprocessLink(s);
}},t.prototype.postprocessItems=function(t){for(var e=t.currentItems,i=t instanceof h?d.SettingsMapping.ItemsChartSettingsNodeItem:d.SettingsMapping.ItemsChartSettingsLinkItem,n=this.styleSettings.item,r=0;r<t.items.length;r++){
var s=t.items[r],a=new d.Label(n);d.SettingsHelper.updateRecursive(a.style,s,i,{},"items["+r+"]"),
e.push(a)}},t.prototype.sortRules=function(t){var e=[];for(var i in t)e.push(i);
e.sort();for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t[i]);
}return n},t.prototype.updateNode=function(t){var e=this.styleSettings,i=t.hovered;
if(t.radius||(t.radius=10),t.label=null,d.Helpers.extendStyleTo(e.node,t),
t._labelStyle=d.Helpers.realClone(e.nodeLabel),t._anchorStyle=d.Helpers.realClone(e.nodeAnchor),
t.userLock&&d.Helpers.extendStyleTo(e.nodeLocked,t),t.expanded&&d.Helpers.extendStyleTo(e.nodeExpanded,t),
t.focused&&d.Helpers.extendStyleTo(e.nodeFocused,t),t.background&&d.Helpers.extendStyleTo(e.nodeBackground,t),
t.data.loaded||d.Helpers.extendStyleTo(e.nodeNotLoaded,t),t.data&&(t.data.error&&(t.label=t.data.error,
t.fillColor="red"),t.data.style&&d.Helpers.extendStyleTo(t.data.style,t),
t.data.className))for(var n=this.getClassSequence(t.data.className,this.nodeClasses),r=0;r<n.length;r++){
var s=n[r];d.Helpers.extendStyleTo(this.styleSettings.nodeClasses[s].style,t);
}t.removed&&(t.fillColor=e.removedColor),t.selected&&d.Helpers.extendStyleTo(e.nodeSelected,t),
i&&d.Helpers.extendStyleTo(e.nodeHovered,t)},t.prototype.updateLink=function(t){
var e=this.styleSettings;t.label=null,t._labelStyle=d.Helpers.realClone(e.linkLabel),
t.radius=1,d.Helpers.extendStyleTo(e.link,t);var i=t.hovered||t.from.hovered||t.to.hovered;
if(t.data.style&&d.Helpers.extendStyleTo(t.data.style,t),t.data.className)for(var n=this.getClassSequence(t.data.className,this.linkClasses),r=0;r<n.length;r++){
var s=n[r];d.Helpers.extendStyleTo(e.linkClasses[s].style,t)}
t.selected&&d.Helpers.extendStyleTo(e.linkSelected,t),i&&(d.Helpers.extendStyleTo(e.linkHovered,t),
t.from.hovered&&(t.toPieColor=t.fillColor)),t.removed&&(t.fillColor=e.removedColor);
},t.prototype.applyStyleRules=function(t,e){for(var i=0;i<e.length;i++){
var n=e[i];n(t)}},t.prototype.getClassSequence=function(e,i){
for(var n=t.getClasses(e),r=[],s=0;s<n.length;s++){var a=n[s],o=i[a];
o?r.push(o.index):d.Helpers.error("Unable to apply item style: class `"+a+"` undefined");
}return r.sort(function(t,e){return t-e})},t}();t.ItemsStyle=v;
var y=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.data=[],e.info={enabled:!1,nodeContentsFunction:null,
linkContentsFunction:null},e.interaction=new b,e.nodeMenu=new H,
e.linkMenu=new z,e.advanced=new w,e.style={},e}return n(e,t),
e.prototype.apply=function(e){return this.applyCompatibility(e,[{
from:"style.makeImagesCircular",to:"style.node.imageCropping"
},{from:"style.nodeDecorationMinSize",alternative:"style.nodeDetailMinSize"
},{from:"style.nodeLabelMinSize",to:"style.nodeDetailMinSize"
},{from:"style.nodeRules",alternative:"style.nodeStyleFunction",
alternativeAsWarning:!0},{from:"style.linkRules",alternative:"style.linkStyleFunction",
alternativeAsWarning:!0}]),t.prototype.apply.call(this,e)},e}(d.Settings);
t.Settings=y;var S=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.cacheSize=1e4,e.random=null,e.randomGridLinkProbability=.6,
e.randomNodes=0,e.randomLinks=0,e.randomTreeDensity=3,e.requestMaxUnits=2,
e}return n(e,t),e}(d.SettingsData);t.SettingsData=S;var b=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.nodesMovable=!0,
e.zooming=new x,e.panning={enabled:!0},e.selection=new C,e}return n(e,t),
e}(d.SettingsInteraction);t.SettingsInteraction=b;var C=function(){
function t(){this.enabled=!0,this.nodesSelectable=!0,this.linksSelectable=!0,
this.lockNodesOnMove=!0,this.allowMoveNodesOffscreen=!0,this.tolerance=10;
}return t}();t.SettingsInteractionSelection=C;var x=function(){
function t(){this.zoomInOnDoubleClick=!0,this.autoZoomAfterClick=!1,
this.doubleClickZoom=1.5,this.sensitivity=1,this.wheel=!0,this.fingers=!0;
}return t}();t.SettingsInteractionZooming=x;var w=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.perNodeLoadingIndicator=!0,
e}return n(e,t),e}(d.SettingsAdvanced);t.SettingsAdvanced=w;var L=function(t){
function e(){return t.apply(this,arguments)||this}return n(e,t),
e}(s);t.ImageShape=L;var T=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.leftOffset=0,e}return n(e,t),e.prototype.postProcessLabel=function(t,e){
if(this.nodesLayer.chart.assetsLoaded){var i=this.node.targetHHeight,n=this.currentLabel;
null==n?n=this.currentLabel=new d.Label(this.node.labelStyle,(!0)):n.style=this.node.labelStyle,
n.text=this.node.label.toString(),n.style.backgroundStyle=null,
n.style.image=null,e.measure(t,n);var r=n.hwidth,s=n.hheight,a=r/s*i;
this.node.image&&(a+=i),this.node.targetHWidth=Math.max(a,i),
this.node.bounds.x0=-this.node.targetHWidth,this.node.bounds.x1=this.node.targetHWidth;
}},e.prototype.distanceToEdge=function(t,e,i,n){return d.Geometry.distanceToBalloon(t,e,i,n);
},e.prototype.paintSelection=function(t,e,i){var n=this.node.renderHheight*(1+e)+i,r=this.node.renderHwidth-this.node.renderHheight+n,s=this.x,a=this.y,o=s+r-n;
t.moveTo(o,a-n),t.arc(o,a,n,-Math.PI/2,Math.PI/2,!1),o=s-r+n,
t.lineTo(o,a+n),t.arc(o,a,n,Math.PI/2,-Math.PI/2,!1),t.closePath();
},e.prototype.paintDetails=function(t,e){var i=this.currentLabel;
if(i){if(this.hWidth>2){if(e.measure(t,i),this._computeScale(),
this.image){var n=this.image,r=this.x-this.hHeight,s=this.y-this.imSize/2;
if(this.node.imageSlicing){var a=this.node.imageSlicing;d.Graphics.drawImageHighQuality(t,n,a[0],a[1],a[2],a[3],r,s,this.imSize,this.imSize);
}else d.Graphics.drawImageHighQuality(t,n,0,0,n.width,n.height,r,s,this.imSize,this.imSize);
}e.paint(t,this.x+this.leftOffset,this.y,this.scale,i),d.Graphics.clearShadow(t);
}}else this.basicPaintImage(t)},e.prototype._computeScale=function(){
this.scale=this.hWidth/this.currentLabel.hheight,this.image&&(this.leftOffset=this.hWidth,
this.imSize=2*this.hWidth)},e}(s);t.TextShape=T;var k=function(t){
function e(){return t.apply(this,arguments)||this}return n(e,t),
e.prototype.postProcessLabel=function(t,e){if(this.nodesLayer.chart.assetsLoaded){
var i=this.node.labelStyle;i.backgroundStyle.fillColor="transparent";
var n=this.currentLabel;null==n?n=this.currentLabel=new d.Label(i,(!0)):n.style=this.node.labelStyle,
n.text=this.node.label.toString(),n.style.aspectRatio=1,n.style.image=null;
}},e.prototype.distanceToEdge=function(t,e,i,n){return s.prototype.distanceToEdge.call(this,t,e,i,n);
},e.prototype._computeScale=function(){var t=Math.sqrt(this.currentLabel.hwidth*this.currentLabel.hwidth+this.currentLabel.hheight*this.currentLabel.hheight);
if(this.image){var e=this.currentLabel.lineHeight+2*this.currentLabel.hwidth,i=(e*e+this.currentLabel.hheight*this.currentLabel.hheight)/2/e;
i>t&&(this.leftOffset=i-t,t=i)}this.scale=this.hWidth/t,this.image&&(this.imSize=this.currentLabel.lineHeight*this.scale);
},e}(T);t.RoundTextShape=k;var A={a0x:0,a0y:-1,a1x:.556548642145067,
a1y:-1,a2x:1,a2y:-.5534547954623581,b0x:1,b0y:0,b1x:1,b1y:.808869027157099,
b2x:0,b2y:1.2870402200068753,apexX:0,apexY:1.878652526641458,
imageRadius:.6170212765957447},M=[A.a0x,A.a0y,A.a1x,A.a1y,A.a2x,A.a2y,A.b0x,A.b0y,A.b1x,A.b1y,A.b2x,A.b2y,A.apexX,A.apexY],P=d.Helpers.reversePolyline(d.Geometry.transformPolyline(M,-1,0,1,0)),I=[0,-1,.7095605708093294,-.7046444467621514,1,0,1,0,.4313896533498214,.9021657092700437,1,0],D=d.Helpers.reversePolyline(d.Geometry.transformPolyline(I,-1,0,1,0)),N=function(t){
function e(){return t.apply(this,arguments)||this}return n(e,t),
e.prototype.postProcess=function(e,i,n){t.prototype.postProcess.call(this,e,i,n),
this.node.bounds.addBounds(0,0,0,this.node.targetHHeight*A.apexY),
this.node.shapeAnchorX=0,this.node.shapeAnchorY=this.node.radius*A.apexY;
},e.prototype.getAnchor=function(){return{x:0,y:this.hWidth*A.apexY
}},e.prototype.adaptToViewport=function(e,i,n,r,s){t.prototype.adaptToViewport.call(this,e,i,n,r,s),
this.controlPoints=d.Geometry.transformPolyline(M,this.hWidth,this.x,this.hHeight,this.y),
this.reverseControlPoints=d.Geometry.transformPolyline(P,this.hWidth,this.x,this.hHeight,this.y);
},e.prototype.paintSelection=function(t,e,i){var n=this.hWidth*e+i,r=d.Geometry.outlinePolylineByVectors(this.controlPoints,I,n),s=d.Geometry.outlinePolylineByVectors(this.reverseControlPoints,D,n);
t.moveTo.apply(t,r.slice(0,2)),t.bezierCurveTo.apply(t,r.slice(2,8)),
t.bezierCurveTo.apply(t,r.slice(8,14)),t.arc(this.controlPoints[12],this.controlPoints[13],n,0,Math.PI,!1),
t.bezierCurveTo.apply(t,s.slice(2,8)),t.bezierCurveTo.apply(t,s.slice(8,14)),
t.closePath()},e.prototype.paintBasicShape=function(t){var e=d.Graphics.beginStrokeAndFill(t,this.node);
e.beginPath(),e.moveTo.apply(e,this.controlPoints.slice(0,2)),
e.bezierCurveTo.apply(e,this.controlPoints.slice(2,8)),e.bezierCurveTo.apply(e,this.controlPoints.slice(8,14)),
e.bezierCurveTo.apply(e,this.reverseControlPoints.slice(2,8)),
e.bezierCurveTo.apply(e,this.reverseControlPoints.slice(8,14)),
e.closePath(),d.Graphics.endStrokeAndFill(t,e,this.node)},e.prototype.paintDetails=function(t,e){
this.image&&this.basicPaintImage(t,A.imageRadius),this.paintLabel(t,e);
},e.prototype.getLabelPosition=function(t,e){return{x:this.x,
y:this.y-this.hWidth-t.hheight*e*1.1}},e.prototype.distanceToEdge=function(t,e,i,n){
var r=e,s=t*A.apexY,a=d.Geometry.rayIntersectsSegment(0,0,i,n,0,s,r,0),o=d.Geometry.rayIntersectsSegment(0,0,i,n,-r,0,0,s),l=Math.min(a,o);
return l<1/0?l:t},e}(s);t.DropletShape=N;var F=function(t){function e(){
return t.apply(this,arguments)||this}return n(e,t),e.prototype.calcHalf=function(t,e){
return this.node.aspectRatio>1?{hWidth:t,hHeight:t/this.node.aspectRatio
}:{hWidth:e*this.node.aspectRatio,hHeight:e}},e.prototype.render=function(t,e,i){
var n=this.calcHalf(this.hWidth,this.hHeight),r=n.hHeight,s=n.hWidth;
r=r*(1+e)+i,s=s*(1+e)+i,t.moveTo(this.x,this.y),t.moveTo(this.x-s,this.y-r),
t.lineTo(this.x+s,this.y-r),t.lineTo(this.x+s,this.y+r),t.lineTo(this.x-s,this.y+r),
t.lineTo(this.x-s,this.y-r)},e.prototype.paint=function(t,e,i){
this.paintBasicShape(t),i&&(this.image=this.nodesLayer.getNodeImage(this.node,!1),
this.paintDetails(t,e))},e.prototype.paintBasicShape=function(t){
var e=d.Graphics.beginStrokeAndFill(t,this.node);this.render(e,0,0),
d.Graphics.endStrokeAndFill(t,e,this.node)},e.prototype.basicPaintImage=function(t,e){
if(void 0===e&&(e=1),this.image){var i,n,r,s,a,o,l,h;if(this.node.imageSlicing){
var u=this.node.imageSlicing;i=u[0],n=u[1],r=u[2],s=u[3]}else i=0,
n=0,r=this.image.width,s=this.image.height;var c=this.calcHalf(this.hWidth,this.hHeight),p=c.hHeight,f=c.hWidth;
switch(this.node.imageCropping){case!0:a=this.x-f,o=this.y-p,
l=2*f,h=2*p;break;case"crop":if(a=this.x-f,o=this.y-p,l=2*f,h=2*p,
s*this.node.aspectRatio<=r){var g=s*this.node.aspectRatio;i+=(r-g)/2,
r=g}else{var m=r/this.node.aspectRatio;n+=(s-m)/2,s=m}break;case"letterbox":
case"fit":var v=Math.min(2*p/s,2*f/r);h=s*v,l=r*v,a=this.x-l/2,
o=this.y-h/2;break;default:var y=2*Math.max(f,p),S=Math.min(y/s,y/r);
h=s*S,l=r*S,a=this.x-l/2,o=this.y-h/2}d.Graphics.drawImageHighQuality(t,this.image,i,n,r,s,a,o,l,h);
}},e.prototype.paintSelection=function(t,e,i){this.render(t,e,i),
t.closePath()},e.prototype.distanceToEdge=function(t,e,i,n){var r=this.calcHalf(t,e);
return Math.min(r.hHeight/Math.abs(n),r.hWidth/Math.abs(i))},
e.prototype.hitTest=function(t,e,i,n){var r=this.node,s=this.calcHalf(r.renderHwidth*i,r.renderHheight*i),a=Math.max(Math.abs(t-r.x)-s.hWidth,Math.abs(e-r.y)-s.hHeight);
return a<0?0:Math.min(a,n)},e}(s);t.RectangleShape=F;var E=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.multilinkSpacing=10,
e.nodeRadiusExtent=[10,150],e.linkRadiusExtent=[.6,30],e.linkStrengthExtent=[.1,1],
e.linkLengthExtent=[.3,150],e.nodeAutoScaling=null,e.linkAutoScaling=null,
e.linkStrengthAutoScaling=null,e.linkLengthAutoScaling=null,e.hiddenLinks={
lineColor:"rgba(100,100,100,0.3)",lineWidth:1,size:7},e.fadeTime=600,
e.selfLinkHeightFactor=1,e.selfLinkWidthFactor=1,e.selfLinkShape="quadratic",
e.selfLinkAngle=60,e}return n(e,t),e}(m);t.SettingsNodesLayerStyle=E;
var O=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;
return r.g=null,r.fadeout=n,r.styleSettings=e,r}return n(e,t),
e.prototype.updateLayer=function(e,i){void 0===i&&(i=!1),this.nodeRadiusChanged=d.Helpers.hasProperties(this.layer.newNodes)||d.Helpers.hasProperties(this.layer.deletedNodes)||this.styleSettings.allObjectsStyleFunction&&this.layer.hasStyleChanges()||this.nodeRules.length>0,
this.linkRadiusChanged=d.Helpers.hasProperties(this.layer.newLinks)||d.Helpers.hasProperties(this.layer.deletedLinks)||this.styleSettings.allObjectsStyleFunction&&this.layer.hasStyleChanges()||this.linkRules.length>0,
t.prototype.updateLayer.call(this,e,i)},e.prototype.postprocessLayer=function(t){
this.g=t.context;var e=this.layer,i=this.styleSettings.removedColor;
this.itemRenderer=t.labelRenderer;for(var n in e.modifiedLinks){
var r=e.modifiedLinks[n];this.fadeout&&r.relevance<1&&(r.fillColor&&(r.fillColor=d.Colors.blend(i,r.fillColor,r.relevance)),
r.lineColor&&(r.lineColor=d.Colors.blend(i,r.lineColor,r.relevance)),
r.length=.2+(r.length-.2)*r.relevance),this.postprocessLink(r);
}for(var s in e.modifiedNodes){var a=e.modifiedNodes[s];this.fadeout&&a.relevance<1&&(a.fillColor&&(a.fillColor=d.Colors.blend(i,a.fillColor,a.relevance)),
a.lineColor&&(a.lineColor=d.Colors.blend(i,a.lineColor,a.relevance)));
}var o=this.layer.nodes();if(this.nodeRadiusChanged||this.fadeout&&t.changes.navigation){
this.computeNodeSize(o,this.styleSettings.nodeAutoScaling,this.styleSettings.nodeRadiusExtent);
for(var l=0;l<o.length;l++){var h=o[l];this.postprocessNode(h);
}}else for(var u in e.modifiedNodes){var c=e.modifiedNodes[u];
this.postprocessNode(c)}if(this.linkRadiusChanged||t.changes.navigation){
var p=e.links();this.computeRadii(p,this.styleSettings.linkAutoScaling,this.styleSettings.linkRadiusExtent),
this.computeStrengths(p,this.styleSettings.linkStrengthAutoScaling,this.styleSettings.linkStrengthExtent),
this.computeLengths(p,this.styleSettings.linkLengthAutoScaling,this.styleSettings.linkLengthExtent),
d.Helpers.sort(p,function(t,e){return t.targetRadius===e.targetRadius?0:t.targetRadius>e.targetRadius?1:-1;
})}d.Helpers.sort(o,function(t,e){return t.zindex-e.zindex})},
e.prototype.updateLink=function(e){var i=e.radius;t.prototype.updateLink.call(this,e),
i!==e.radius&&(this.linkRadiusChanged=!0)},e.prototype.updateNode=function(e){
var i=e.radius;t.prototype.updateNode.call(this,e),i!==e.radius&&(this.nodeRadiusChanged=!0),
null==e.label&&e.data&&(e.label=e.data.id)},e.prototype.computeNodeSize=function(t,e,i){
var n=i[0],r=i[1];if("linear"===e||"logarithmic"===e||"square"===e){
for(var s=1/0,a=-(1/0),o=0;o<t.length;o++){var l=t[o];if(!l.removed&&!l.invisible){
var h=l.radius;d.Helpers.isNumber(h)?(s=Math.min(s,h),a=Math.max(a,h)):l.targetHHeight=n;
}}if(s>=a)for(var o=0;o<t.length;o++){var l=t[o];l.removed||(l.targetHHeight=r);
}else if("linear"===e)for(var u=r/a,o=0;o<t.length;o++){var l=t[o];
if(!l.removed){var h=l.radius;d.Helpers.isNumber(h)&&(l.targetHHeight=Math.max(n,h*u));
}}else if("square"===e)for(var u=r/Math.sqrt(a),o=0;o<t.length;o++){
var l=t[o];if(!l.removed){var h=l.radius;d.Helpers.isNumber(h)&&(l.targetHHeight=Math.max(n,Math.sqrt(h)*u));
}}else{s=Math.max(1e-4,s),a=Math.max(s+1e-4,a);for(var u=r/Math.log(a),o=0;o<t.length;o++){
var l=t[o];!l.removed&&d.Helpers.isNumber(l.radius)&&(l.targetHHeight=Math.max(n,Math.log(Math.max(1e-4,l.radius))*u));
}}}else for(var o=0;o<t.length;o++){var l=t[o];l.removed||(d.Helpers.isNumber(l.radius)?l.targetHHeight=Math.min(Math.max(1e-6,l.radius),1e30):l.targetHHeight=n);
}if(this.fadeout)for(var o=0;o<t.length;o++){var l=t[o];l.relevance<1&&(l.targetHHeight=l.targetHHeight*l.relevance);
}},e.prototype.computeRadii=function(t,e,i){var n=i[0],r=i[1];
if("linear"===e||"logarithmic"===e||"square"===e){for(var s=1/0,a=-(1/0),o=0;o<t.length;o++){
var l=t[o];if(!l.removed){var h=l.radius;d.Helpers.isNumber(h)?(s=Math.min(s,h),
a=Math.max(a,h)):l.targetRadius=n}}if(s>=a)for(var o=0;o<t.length;o++){
var l=t[o];l.removed||(l.targetRadius=n)}else if("linear"===e)for(var u=r/a,o=0;o<t.length;o++){
var l=t[o];if(!l.removed){var h=l.radius;d.Helpers.isNumber(h)&&(l.targetRadius=Math.max(n,h*u));
}}else if("square"===e)for(var u=r/Math.sqrt(a),o=0;o<t.length;o++){
var l=t[o];if(!l.removed){var h=l.radius;d.Helpers.isNumber(h)&&(l.targetRadius=Math.max(n,Math.sqrt(h)*u));
}}else{s=Math.max(1e-4,s),a=Math.max(s+1e-4,a);for(var u=r/Math.log(a),o=0;o<t.length;o++){
var l=t[o];!l.removed&&d.Helpers.isNumber(l.radius)&&(l.targetRadius=Math.max(n,Math.log(Math.max(1e-4,l.radius))*u));
}}}else for(var o=0;o<t.length;o++){var l=t[o];l.removed||(d.Helpers.isNumber(l.radius)?l.targetRadius=Math.min(Math.max(1e-6,l.radius),1e30):l.targetRadius=n);
}if(this.fadeout)for(var o=0;o<t.length;o++){var l=t[o];l.relevance<1&&(l.targetRadius=l.targetRadius*l.relevance);
}},e.prototype.computeStrengths=function(t,e,i){var n=i[0],r=i[1];
if("linear"===e||"logarithmic"===e||"square"===e){for(var s=1/0,a=-(1/0),o=0;o<t.length;o++){
var l=t[o];l.removed||(s=Math.min(s,l.strength),a=Math.max(a,l.strength));
}if(s>=a)for(var o=0;o<t.length;o++){var l=t[o];l.removed||(l.targetStrength=n);
}else if("linear"===e)for(var h=r/a,o=0;o<t.length;o++){var l=t[o];
l.removed||(l.targetStrength=Math.min(n,l.strength*h))}else if("square"===e)for(var h=r/Math.sqrt(a),o=0;o<t.length;o++){
var l=t[o];if(!l.removed){var u=l.strength;d.Helpers.isNumber(u)&&(l.targetStrength=Math.max(n,Math.sqrt(u)*h));
}}else{s=Math.max(1e-4,s),a=Math.max(s+1e-4,a);for(var h=r/Math.log(a),o=0;o<t.length;o++){
var l=t[o];l.removed||(l.targetStrength=Math.max(n,Math.log(Math.max(1e-4,l.strength))*h));
}}}else for(var o=0;o<t.length;o++){var l=t[o];l.removed||(l.targetStrength=Math.min(Math.max(n,l.strength),r));
}},e.prototype.computeLengths=function(t,e,i){var n=i[0],r=i[1];
if("linear"===e||"logarithmic"===e||"square"===e){for(var s=1/0,a=-(1/0),o=0;o<t.length;o++){
var l=t[o];l.removed||(s=Math.min(s,l.length),a=Math.max(a,l.length));
}if(s>=a)for(var o=0;o<t.length;o++){var l=t[o];l.removed||(l.targetLength=n);
}else if("linear"===e)for(var h=(r-n)/(a-s),u=r-a*h,o=0;o<t.length;o++){
var l=t[o];l.removed||(l.targetLength=l.length*h+u)}else if("square"===e)for(var h=r/Math.sqrt(a),o=0;o<t.length;o++){
var l=t[o];if(!l.removed){var c=l.length;d.Helpers.isNumber(c)&&(l.targetLength=Math.max(n,Math.sqrt(c)*h));
}}else{s=Math.max(1e-4,s),a=Math.max(s+1e-4,a);for(var h=(r-n)/Math.log(a/s),u=r-h*Math.log(a),o=0;o<t.length;o++){
var l=t[o];l.removed||(l.targetLength=Math.log(Math.max(1e-4,l.length))*h+u);
}}}else for(var o=0;o<t.length;o++){var l=t[o];l.removed||(l.targetLength=Math.min(Math.max(n,l.length),r));
}},e.prototype.postprocessNode=function(t){var e;switch(t.display){
case"customShape":e=a;break;case"roundtext":e=k;break;case"text":
e=T;break;case"droplet":e=N;break;case"rectangle":e=F;break;default:
e=L}t.shape&&t.shape.constructor===e||(t.shape&&(t.shape.node=null),
t.shape=new e(t,this.layer));var i=t.outerBounds=d.Rect.createEmpty();
t.shape.postProcess(this.styleSettings,this.g,this.itemRenderer),
i.addRect(t.bounds),t.currentItems=[],this.postprocessItems(t);
for(var n=t.targetHWidth,r=t.targetHHeight,s=0;s<t.currentItems.length;s++){
var o=t.currentItems[s];this.measureCustomItem(n,r,t.shape.sizeScale,o,i);
}},e.prototype.measureCustomItem=function(t,e,i,n,r){this.itemRenderer.measure(this.g,n);
var s=1;n.style.scaleWithSize&&(s=i);var a=n.style.x||0,o=n.style.y||0,l=n.style.px||0,h=n.style.py||0,u=t*l+a,c=e*h+o;
r.addBounds(u-n.hwidth*s,c-n.hheight*s,u+n.hwidth*s,c+n.hheight*s);
},e.prototype.postprocessLink=function(t){var e=[];if(t.label){
var i=void 0;t.currentItems&&t.currentItems.length?(i=t.currentItems[0],
i.style=t.labelStyle):i=new d.Label(t.labelStyle),i.text=t.label.toString(),
i.style.px=0,i.style.py=0,e.push(i)}t.currentItems=e,this.postprocessItems(t);
},e}(v);t.NodesStyle=O;var R=function(){function t(){this.className=null,
this.text=null,this.title=null,this.onInit=null,this.onRefresh=null,
this.onClick=null}return t}();t.SettingsMenuButton=R;var B=function(){
function t(){this.enabled=!0,this.showData=!1,this.contentsFunction=null,
this.buttons=[]}return t}();t.SettingsMenu=B;var H=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.contentsFunction=null,
e.buttons=[],e}return n(e,t),e}(B);t.SettingsNodeMenu=H;var z=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.contentsFunction=null,
e}return n(e,t),e}(B);t.SettingsLinkMenu=z;var U=function(t){
function e(e){var i=t.call(this)||this;return i.animationOrder=600,
i.paintOrder=40,i.updateOrder=2e3,i.node=null,i.link=null,i.contents=null,
i.x=0,i.y=0,i.chart=e,i.container=e.shell.menuContainer,i.scene=e.scene,
i.events=e.events,i.buttons=[],i.popup=d.Helpers.createDom("div","DVSL-Menu",null,i.container),
i.closeButton=d.Helpers.createDom("a","DVSL-Menu-close",null,i.popup),
i.popupValue=d.Helpers.createDom("div","DVSL-Menu-title",null,i.popup),
i.detailsDiv=d.Helpers.createDom("div","DVSL-Menu-details",null,i.popup),
i.popupActions=d.Helpers.createDom("nav",null,null,i.popup),i.buildDetailsPanel(i.detailsDiv),
i.buildCloseButton(i.closeButton),i.popup.style.position="absolute",
i.popup.style.display="none",i}return n(e,t),e.prototype.remove=function(){
this.popup.parentNode&&this.popup.parentNode.removeChild(this.popup);
},e.prototype.doAnimations=function(t){this.node&&(this.node.removed||this.link&&this.link.removed?this.hideMenu():this.node.layer.modifiedNodes.hasOwnProperty(this.node.id)&&this.updateMenu());
},e.prototype.previewPointerDown=function(t){this.hideMenu()},
e.prototype.previewWheel=function(t){this.hideMenu()},e.prototype.toggleNodeMenu=function(t){
this.node===t?this.hideMenu():this.showNodeMenu(t)},e.prototype.toggleLinkMenu=function(t,e,i){
this.link===i?this.hideMenu():this.showLinkMenu(t,e,i)},e.prototype.showNodeMenu=function(t){
this.scene.settings.nodeMenu.enabled&&(this.node===t?this.updateMenu():(this.hideMenu(),
this.showPopup(t,null)))},e.prototype.showLinkMenu=function(t,e,i){
this.scene.settings.linkMenu.enabled&&(this.x=t,this.y=e,this.link===i?this.updateMenu():(this.hideMenu(),
this.showPopup(null,i)))},e.prototype.showPopup=function(t,e){
this.node=t,this.link=e,this.node&&(this.node.locks+=1),this.buildButtons(),
this.contents=null,this.popupValue.innerHTML="",this.popup.style.display="block",
this.updateMenu(),this.updateXY()},e.prototype.hideMenu=function(){
(this.node||this.link)&&(this.node&&(this.node.locks-=1),this.node=null,
this.link=null,this.popup.style.display="none")},e.prototype.updateMenu=function(){
var t=this;this.closeButton.title=this.scene.settings.localization.closeButton;
var e,i;this.node?(e=this.scene.settings.nodeMenu,i=this.node):(e=this.scene.settings.linkMenu,
i=this.link);var n=null,r=this.node,s=this.link,a=function(e){
if(t.node===r&&t.link===s&&e!==t.contents){if(null==e)t.popupValue.innerHTML="";else if(d.Helpers.isString(e))t.popupValue.innerHTML=e;else{
if(!d.Helpers.isDomObject(e))return void d.Helpers.error("Invalid value for menu text. Must be either a string or a DOM element.");
t.popupValue.innerHTML="",t.popupValue.appendChild(e)}t.contents=e;
}};if(e.contentsFunction){var o=e.contentsFunction.call(this.chart.api,i.data,i,a);
n=d.Helpers.isString(o)||d.Helpers.isDomObject(o)?o:null==this.contents?"<small>"+this.scene.settings.localization.loadingLabel+"</small>":this.contents;
}else n=i.label;a(n),this.updateButtons(),e.showData?(this.details.innerHTML=JSON.stringify(i.data,null,"  "),
this.detailsDiv.style.display="block"):(this.detailsDiv.style.display="none",
null==n&&0===this.buttons.length&&this.hideMenu())},e.prototype.updateXY=function(){
var t,e,i,n,r,s,a=12;if(this.node){var o=this.scene.toDisplay(this.node.x,this.node.y);
r=o.x,s=o.y,t=s-this.node.renderHheight-a,n=s+this.node.renderHheight+a,
e=r-this.node.renderHheight-a,i=r+this.node.renderHheight+a}else t=n=s=this.y,
e=this.x-a,i=this.x+a;var l=this.chart.getRootChart().scene,h=l.x0,u=l.x0+l.width,c=this.popup.offsetWidth,d=this.popup.offsetHeight;
s=Math.max(Math.min(s,l.y0+l.height-d),l.y0),i+c<=u?r=i:e-c>=h?r=e-c:(r=Math.max(e-c/2,h),
s=n),this.popup.style.left=r+"px",this.popup.style.top=s+"px";
},e.prototype.buildDefaultButton=function(t,e){this.chart.error("The menu does not support any named buttons.");
},e.prototype.buildButton=function(t,e,i,n,r,s,a){var o=this,l=d.Helpers.createDom("a",e,i,this.popupActions);
l.title=n,l.onclick=function(e){s&&s.call(o.chart.api,t,l),o.hideMenu(),
e.preventDefault()},l.href="#",r&&r.call(this.chart.api,t,l),
this.buttons.push({e:l,t:t,a:a})},e.prototype.buildButtons=function(){
this.popupActions.innerHTML="",this.buttons=[];var t,e;this.node?(t=this.scene.settings.nodeMenu,
e=this.node):(t=this.scene.settings.linkMenu,e=this.link);var i=t.buttons;
if(i)for(var n=0;n<i.length;n++){var r=i[n];d.Helpers.isString(r)?this.buildDefaultButton(e,r):this.buildButton(e,r.className,r.text,null==r.title?r.text:r.title,r.onInit,r.onClick,r.onRefresh);
}},e.prototype.updateButtons=function(){for(var t=0;t<this.buttons.length;t++){
var e=this.buttons[t];e.a&&e.a.call(this.chart.api,e.t,e.e)}},
e.prototype.buildCloseButton=function(t){var e=this;t.onclick=function(t){
e.hideMenu(),t.preventDefault()}},e.prototype.buildDetailsPanel=function(t){
var e=d.Helpers.createDom("small",null,"Technical data",t),i=this.details=d.Helpers.createDom("pre",null,"",t);
i.style.display="none",e.onclick=function(){"none"===i.style.display?i.style.display="block":i.style.display="none";
}},e}(d.ChartElement);t.Menu=U;var _=function(t){function e(e){
var i=t.call(this)||this;return i.animationOrder=800,i.paintOrder=45,
i.updateOrder=2e3,i.chart=e,i.scene=e.scene,i.options=i.scene.settings,
i.item=null,i.x=null,i.y=null,i.popup=new d.InfoPopup(e),i}return n(e,t),
e.prototype.previewPointerMove=function(t){this.onMove(t.x,t.y);
},e.prototype.doAnimations=function(t){null!==this.x&&null!==this.y&&this.onMove(this.x,this.y);
},e.prototype.previewPointerDown=function(t){this.x=this.y=null,
this.setCurrentObject(0,0,null)},e.prototype.previewPointerDrag=function(t){
this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onPointerOut=function(t){
this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onMove=function(t,e){
if(this.y=e,this.x=t,this.options.info.enabled){var i=this.scene.hoverNode?this.scene.hoverNode:this.scene.hoverLink;
this.setCurrentObject(t,e,i)}},e.prototype.setCurrentObject=function(t,e,i){
if(i){if(i!==this.item){var n=this.buildContents(i);this.popup.show(t,t,e,n);
}else this.popup.updateXY(t,t,e);this.item=i}else this.item=null,
this.popup.hide()},e.prototype.buildContents=function(t){var e=this,i=null;
if(t instanceof h?i=this.options.info.nodeContentsFunction:t instanceof u&&(i=this.options.info.linkContentsFunction),
i){var n=function(i){t===e.item&&e.popup.updateContents(i)};return i.call(this.chart.api,t.data,t,n);
}return t.label},e.prototype.remove=function(){this.popup.remove();
},e}(d.ChartElement);t.InfoPopup=_;var G="undefined"!=typeof Float32Array,j=function(){
function t(){this._calculatedStyles={},this._defaultStyles={},
this.enabled=!0,this.drawLimit=.8,this.cellSize=3,this.intensity=6,
this.style={},this.defaultStyle=null,this.defaultColors=["rgba(47,195,47,0.3)","rgba(176,220,11,0.3)","rgba(234,180,4,0.3)","rgba(222,103,44,0.3)","rgba(236,46,46,0.3)","rgba(213,66,155,0.3)","rgba(111,82,184,0.3)","rgba(28,124,213,0.3)","rgba(86,185,247,0.3)","rgba(10,232,235,0.3)"],
this.overlap=!1}return t}();t.SettingsNodesLayerAuras=j;var W=function(){
function t(t,e,i){this._marginCells=1,this._polygons=[],this._autoAuraCounter=0,
this._overlapWarning=!0,this._auraCounter=0,this._settings=i,
this._scene=t,this._events=e}return t.prototype.recalculateStyles=function(t){
var e=this._settings,i=Object.keys(e.style);e._calculatedStyles={};
for(var n=0;n<i.length;n++){var r=i[n],s=d.Helpers.realClone(this._settings._defaultStyles[r]);
e.defaultStyle&&d.Helpers.extendStyleTo(e.defaultStyle,s),e.style[r]&&d.Helpers.extendStyleTo(e.style[r],s),
e._calculatedStyles[r]=s,s.__auraCounter=this._auraCounter++}
i=Object.keys(t).filter(function(t){return e._calculatedStyles[t].enabled;
}),i.sort(function(t,i){var n=e._calculatedStyles[t].zIndex-e._calculatedStyles[i].zIndex;
return 0===n?t.localeCompare(i):n}),this._auras=new Array(i.length+1),
this._aurasMap=Object.create(null),this._aurasMap[""]=0;for(var n=0;n<i.length;n++){
var a=i[n];this._aurasMap[a]=n+1,this._auras[n+1]=e._calculatedStyles[a];
}this._events.notifySceneChanges({auras:!0})},t.prototype.recalculateGrid=function(){
var t=this._scene,e=this._settings;this._overlapWarning=e.overlap;
for(var i=t.width,n=t.height,r=this._marginCells,s=e.cellSize,a=this._widthCells=Math.ceil(i/s)+2*r,o=this._heightCells=Math.ceil(n/s)+2*r,l=this._cellLength=this._auras.length,h=a*o*l,u=this._cells=G?new Float32Array(h):new Array(h),c=this._cellEdges=G?new Int8Array(h):new Array(h),d=a*l,p=0;p<h;p++)c[p]=-1;
if(!G)for(var f=0;f<u.length;f++)u[f]=0;var g=[-d,-d+l,+l,+d+l,+d,+d-l,-l,-d-l,-d,-d+l,+l,+d+l,+d,+d-l,-l,-d-l];
this._edgeFinderDeltas=G?new Int16Array(g):g},t.prototype.doAnimations=function(t,e){
if(this._settings.enabled&&t){for(var i=!1,n={},r=0;r<t.length;r++){
var s=t[r].aura;if(s){Array.isArray(s)?!this._overlapWarning&&s.length>1&&(d.Helpers.warn("One or more nodes defined more than one aura. It is recommended to set `overlap: true` in the chart configuration to better handle this scenario."),
this._overlapWarning=!0):s=[s];for(var a=0;a<s.length;a++){var o=""+(s[a]||"");
""!==o&&(i=!0,n[o]=!0,this.ensureAura(o))}}}for(var r in this._settings.style)d.Helpers.hasProperty(this._settings.style,r)&&this.ensureAura(r);
var l,h=e.changes,u=h.settingsChanges,c=!1;if(!this._auras||u&&u.auras)l=!0;else if(i){
for(var p=Object.keys(n),f=0,g=this._settings._calculatedStyles,r=0;r<p.length;r++){
var m=p[r];if(null==g[m]){l=!0;break}g[m].enabled&&f++}l=l||this._auras.length-1!==f;
}if(l?(this.recalculateStyles(n),c=!0):h.bounds&&(c=!0),!i||this._auras.length<2)return void(this._polygons.length>0&&(this._polygons=[]));
c&&this.recalculateGrid(),this.reset(),this.stage1(t),this.stage2(),
this.stage3()}},t.prototype.ensureAura=function(t){if(this._settings.style[t]||(this._settings.style[t]={}),
!this._settings._defaultStyles[t]){var e=this._settings.defaultColors;
e&&e.length||(e=["rgba(47,195,47,0.3)"]),this._autoAuraCounter=(this._autoAuraCounter+1)%e.length,
this._settings._defaultStyles[t]={lineWidth:1,showInLegend:!0,
enabled:!0,zIndex:0,fillColor:e[this._autoAuraCounter]}}},t.prototype.reset=function(){
for(var t=this._cellEdges,e=0;e<t.length;e++)t[e]=-1;for(var i=this._cells,e=0;e<i.length;e++)i[e]=0;
this._polygons=new Array(this._auras.length);for(var e=0;e<this._polygons.length;e++)this._polygons[e]=[];
},t.prototype.stage1=function(t){for(var e=this._scene,i=e.zoom,n=this._settings,r=n.cellSize,s=this._marginCells,a=this._widthCells,o=this._heightCells,l=this._cells,h=this._cellLength,u=this._aurasMap,c=n.intensity,d=e.centerX*e.zoom%r,p=e.centerY*e.zoom%r,f=0;f<t.length;f++){
var g=t[f],m=e.toDisplay(g.x,g.y),v=(m.x+d)/r+s,y=(m.y+p)/r+s,S=0|v,b=0|y,C=v-S,x=y-b,w=t[f].aura;
if(w){Array.isArray(w)||(w=[w]);for(var L=0;L<w.length;L++){var T=""+(w[L]||""),k=u[T];
if(void 0!==k&&this._auras[k].enabled){var A=Math.min((g.hHeight*i+5)/r,a,o),M=A*c+1,P=2*M;
if(v>-P&&v<a+P&&y>-P&&y<o+P){var I=A/2,D=Math.ceil(M);M-=I;for(var N=-D;N<D;N++)if(!(v+N<s||v+N>=a-s))for(var F=C-N,E=-D;E<D;E++)if(!(y+E<s||y+E>=o-s)){
var O=x-E,R=Math.sqrt(F*F+O*O)-I;if(R<M){R=R<=0?1:1-R/M;var B=k+(b+E)*a*h+(S+N)*h;
l[B]=l[B]+R-l[B]*R}}}}}}}},t.prototype.stage2=function(){var t=this._cellLength;
if(1!==t&&!this._settings.overlap)for(var e=this._cells,i=0;i<e.length;i+=t)for(var n=i,r=e[i],s=1;s<t;s++){
var a=e[i+s];a>r?(r=a,e[n]=0,n=i+s):a>0&&(e[i+s]=0)}},t.prototype.stage3FindEdge=function(t,e){
var i=this._cells,n=this._cellEdges,r=this._settings,s=r.drawLimit,a=this._edgeFinderDeltas,o=[e],l=e,h=2,u=0,c=0,p=r.overlap,f=0,g=0;
do{for(var m=n[l],v=void 0,y=(h+5)%8,S=y,b=!1;S<y+8;S++)if(m!==S&&(v=l+a[S],
i[v]>=s)){b=!0;break}if(!b){l!==e&&d.Helpers.error("Edge finder stuck");
break}if(S%=8,(h!==S||++f>5)&&(0===u&&(u=7===S?7:1,c=7===S?6:2),
(!p||h!==(S+u)%8&&h!==(S+c)%8)&&o.push(l),f=0),m===-1&&(n[l]=S),
h=S,l=v,++g>1e4){d.Helpers.error("Edge finder run into a loop");
break}}while(l!==e);o[o.length-1]!==e&&o.push(e),t.push(o)},t.prototype.stage3=function(){
for(var t=this._cellLength,e=this._widthCells*t,i=this._cells,n=this._cellEdges,r=this._settings,s=r.drawLimit,a=e-t,o=this._polygons,l=0,h=i.length-t,u=0;u<h;u++){
var c=i[u];if(u%e>=a||c<s){var p=u+t;if(i[p]>=s&&n[p]<0&&(this.stage3FindEdge(o[p%t],p),
++l>1e4)){d.Helpers.error("Edge finder found too many polygons");
break}}}},t.prototype.paintPolygons=function(t){if(this._settings.enabled){
var e=t.context;e.save();for(var i=this._settings,n=i.cellSize,r=this._marginCells,s=r*n-n/2,a=this._cellLength,o=this._widthCells,l=this._auras,h=this._polygons,u=this._scene,c=-u.centerX*u.zoom%n,p=-u.centerY*u.zoom%n,f=1;f<h.length;f++){
for(var g=h[f],m=l[f],v=d.Graphics.beginStrokeAndFill(e,m),y=0;y<g.length;y++){
var S=g[y],b=S[0]/a|0,C=b%o*n-s+c,x=(b/o|0)*n-s+p,w=S[1]/a|0,L=w%o*n-s+c,T=(w/o|0)*n-s+p;
v.moveTo((C+L)/2,(T+x)/2);for(var k=2;k<S.length;k++){w=S[k]/a|0;
var A=w%o*n-s+c,M=(w/o|0)*n-s+p;v.quadraticCurveTo(L,T,(A+L)/2,(M+T)/2),
L=A,T=M}w=S[1]/a|0;var P=w%o*n-s+c,I=(w/o|0)*n-s+p;v.quadraticCurveTo(L,T,(P+L)/2,(I+T)/2),
v.closePath()}d.Graphics.endStrokeAndFill(e,v,m)}d.Graphics.restore(e);
}},t}();t.NodesLayerAuras=W;var V=function(e){function i(t,i,n){
var r=e.call(this,t.scene,i)||this;r.chart=t,r.imageCache={},
r.imageLoading={},r.multilinks={},r.useFadeout=n,r.styleUpdater=r.createStyleUpdater(i.style),
r.events=t.events,r.layerSettings=i;var s=i.style;return r.style=s,
r.scaleNodesWithZoom=s.scaleObjectsWithZoom,r.scaleLinksWithZoom=null==s.scaleLinksWithZoom?s.scaleObjectsWithZoom:s.scaleLinksWithZoom,
r._auras=new W(t.scene,t.events,i.auras),r}return n(i,e),i.prototype.createStyleUpdater=function(t){
return null==this.useFadeout?null:new O(t,this,this.useFadeout);
},i.prototype.updateStyle=function(t){var e=!t.changes.newGraph;
this.styleUpdater.updateLayer(t,e)},i.prototype.postprocessStyle=function(t){
e.prototype.postprocessStyle.call(this,t),this.animateSize(t);
},i.prototype.animateSize=function(t){var e=t.timeStamp,i=t.changes.newGraph,n=t.dtime,r=!1,s=!1,a=this.style.fadeTime;
i=i||!(a>0)||n>a;var o=[],l=[];if(i){for(var h=0,u=this.nodes();h<u.length;h++){
var c=u[h];c.removed?(c.visibility=0,o.push(c)):c.targetHWidth!==c.hWidth&&(c.added=!1,
c.visibility=1,c.hHeight=c.targetHHeight,c.hWidth=c.targetHWidth);
}for(var d=0,p=this.links();d<p.length;d++){var f=p[d];f.removed?(f.visibility=0,
l.push(f)):f.targetRadius!==f.currentRadius&&(f.added=!1,f.visibility=1,
f.currentRadius=f.targetRadius)}}else{for(var g=a>0?Math.max(0,Math.pow(.2,n/a)):0,m=.01,h=0,u=this.nodes();h<u.length;h++){
var c=u[h];if(c.added===!0&&(c.added=e),c.added+a<e&&(c.added=!1),
c.removed===!0&&(c.removed=e),c.removed)r=!0,c.visibility=g,c.hHeight=c.hHeight*g,
c.hWidth=c.hWidth*g,e-c.removed<a?c.visibility=1-(e-c.removed)/a:o.push(c);else{
e-c.added<a?(c.visibility=(e-c.added)/a,r=!0):c.visibility=1;var v=c.targetHHeight,y=c.hHeight,S=c.targetHWidth,b=c.hWidth;
v===y&&S===b||(s||(Math.abs(v-y)/Math.max(v,y)>=.5||Math.abs(S-b)/Math.max(S,b)>=.5)&&(s=!0),
r=!0,c.hHeight=y*g+v*(1-g),c.hWidth=b*g+S*(1-g),Math.abs(c.hHeight-v)<m*v&&(c.hHeight=v,
c.hWidth=S))}}for(var d=0,p=this.links();d<p.length;d++){var f=p[d];
f.added===!0&&(f.added=e),f.added+a<e&&(f.added=!1),f.removed===!0&&(f.removed=e),
f.removed?(r=!0,f.currentRadius=f.currentRadius*g,e-f.removed<a?f.visibility=1-(e-f.removed)/a:l.push(f)):(e-f.added<a&&!f.invisible?(f.visibility=(e-f.added)/a,
r=!0):f.visibility=1,f.targetRadius!==f.currentRadius&&(r=!0,
f.currentRadius=f.currentRadius*g+f.targetRadius*(1-g),Math.abs(f.currentRadius-f.targetRadius)<m*f.targetRadius&&(f.currentRadius=f.targetRadius)));
}}for(var C=0;C<l.length;C++){var x=l[C];this.deleteLink(x)}for(var w=0;w<o.length;w++){
var L=o[w];this.deleteNode(L)}if(r){var T={position:!0};s&&(T.dynamicLayout=!0),
this.events.notifySceneChanges(T),t.animating=!0}},i.prototype.paintPrepare=function(t){
this.computeNodeRenderRadii(),this.multilinks=this.updateMultilinks(),
(t.changes.position||this.hasTopologyChanges())&&this.placePies();
},i.prototype.paintBackground=function(t){this._auras.doAnimations(this.nodes(),t),
this._auras.paintPolygons(t)},i.prototype.paintSelection=function(t,e,i){
var n=this.style.selection;if(n.enabled){null===n.fillColor&&(n=d.Helpers.clone(n),
n.fillColor=this.chart.settings.area.style.fillColor,n.fillColor&&"transparent"!==n.fillColor||(n.fillColor="white"));
var r=this.getGeometry(),s=r.txm,a=r.txa,o=r.tym,l=r.tya,h=r.zoom,u=t.context,c=n.sizeProportional,p=n.sizeConstant;
u.beginPath();for(var f=0;f<e.length;f++){var g=e[f];g.invisible||(g.shape.adaptToViewport(s,a,o,l,h),
g.shape.paintSelection(u,c,p*h))}for(var f=0;f<i.length;f++){
var m=i[f];if(!m.invisible){var v=(m.currentRadius/2*(1+c)+.9*p)*h,y=m.from,S=m.to,b=y.x*s+a,C=y.y*o+l,x=S.x*s+a,w=S.y*o+l,L=b-x,T=C-w,k=1/Math.sqrt(L*L+T*T),A=L*k,M=T*k;
if(0!==m.currentCenterOffset){var P=M*m.currentCenterOffset*h,I=-A*m.currentCenterOffset*h;
b+=P,C+=I,x+=P,w+=I}A*=v,M*=v,u.moveTo(b+M,C-A),u.lineTo(b-M,C+A),
u.lineTo(x-M,w+A),u.lineTo(x+M,w-A),u.closePath()}}return d.Graphics.paint(u,n);
}},i.prototype.paintLinks=function(t,e){var i=this.getGeometry();
this.paintLinksImpl(t,e,this.multilinks,{geometry:i,paintDetails:i.zoom>this.style.linkDetailMinZoom
})},i.prototype.paintNodes=function(t,e){var i=this.getGeometry();
t.animating=this.paintNodesImpl(t,e,{geometry:i,paintDetails:i.zoom>this.style.nodeDetailMinZoom
},t.timeStamp)||t.animating},i.prototype.updateMultilinks=function(){
if(!this.hasTopologyChanges())return this.multilinks;for(var t=this.links(),e={},i=[],n=0;n<t.length;n++){
var r=t[n],s=r.multiId;if(e.hasOwnProperty(s)){var a=e[s];if(a instanceof Array)a.push(r);else{
var o=[a,r];i.push(o),e[s]=o}}else e[s]=r}for(var l=0;l<i.length;l++)i[l].sort(function(t,e){
return(""+(t.id||"")).localeCompare(""+(e.id||""))});return e;
},i.prototype.getNodeImage=function(t,e,i){if(void 0===i&&(i=!1),
!t.image)return null;var n=t.tintImage&&t.fillColor,r=!!e&&t.imageCropping,s=t.image,a=s;
if(n&&(s+="##"+t.fillColor),s+="##"+r,this.imageCache.hasOwnProperty(s))return this.imageCache[s];
if(this.imageLoading[s])return null;var o=this.scene.assetsLoader.getAssetImage(a);
return i?o:o?(r&&(o=d.Graphics.cropImageToCircle(o,r)),n&&(o=d.Graphics.applyColorToImage(o,t.fillColor,!1)),
this.imageCache[s]=o,delete this.imageLoading[s],this.events.notifySceneChanges({
layout:!0}),o):null},i.prototype.computeNodeRenderRadii=function(){
for(var t=this.getGeometry().zoom,e=0,i=this.nodes();e<i.length;e++){
var n=i[e],r=n.hHeight*t,s=n.hWidth*t;n.lineWidth&&(r+=n.lineWidth/2,
s+=n.lineWidth/2),n.renderHheight=r,n.renderHwidth=s}},i.prototype.paintLinksImpl=function(t,e,i,n){
var r=t.context,s=n.geometry.txm,a=n.geometry.txa,o=n.geometry.tym,l=n.geometry.tya,h=n.geometry.linkZoom,u=n.geometry.x0w,c=n.geometry.y0w,p=n.geometry.x1w,f=n.geometry.y1w,g=1/h,m=this.scaleNodesWithZoom?1:1/this.scene.zoom;
r.textAlign="center",r.textBaseline="middle";for(var v=this.style,y=v.linkDetailMinSize*v.linkDetailMinSize,S=n.paintDetails&&this.chart.assetsLoaded,b=v.multilinkSpacing*h,C=v.linkDecorationScale,x=v.linkDecorationMinSize,w=v.linkLabelScaleBase,L=2,T=5,k=.1,A=0;A<e.length;A++){
var M=e[A];if(!M.invisible&&M.from!==M.to){var P=M.from.x,I=M.from.y,D=M.to.x,N=M.to.y,F=M.currentItems,E=F&&F.length&&F[0].style.rotateWithLink,O=void 0,R=M.from.renderHheight,B=M.to.renderHheight,H=M.from.renderHwidth,z=M.to.renderHwidth,U=d.Geometry.clipSegmentToBounds(P,I,D,N,(R+H)*m,(B+z)*m,u,c,p,f);
if(U){P=U[0],I=U[1],D=U[2],N=U[3],P=P*s+a,I=I*o+l,D=D*s+a,N=N*o+l;
var _=D-P,G=N-I,j=_*_+G*G,W=Math.max(.25,M.currentRadius*h*.5),V=M.hovered||M.from.hovered||M.to.hovered,Z=V||S&&j>y;
if(j>25){var Y=Math.sqrt(j);if(E&&(O=Math.atan2(G,_)*(180/Math.PI),
P>=D&&(O-=180),M.currentItems[0].style.angle=O),M.toPieValue>0){
var q=B+L,X=q+T+k*B;this.paintLinkPie(r,D,N,q,X,M.toPie0,M.toPie1,M.toPieColor),
B=X}if(Y<R+B)continue;var Q=1/Y,J=_*Q,K=G*Q,$=void 0,tt=void 0;
if($=M.from.shape.distanceToEdge(R,H,J,K),tt=M.to.shape.distanceToEdge(B,z,-J,-K),
Y<=$+tt)continue;var et=Math.min((Y-$-tt)/4,Math.max(x,W*C));M.fromDecoration&&($+=et),
M.toDecoration&&(tt+=et),P+=J*$,I+=K*$,D-=J*tt,N-=K*tt,_=D-P,
G=N-I,Y=Y-$-tt,Q=1/Y;var it=M.multiId,nt=i[it];if(nt instanceof Array){
var rt=nt.length,st=Math.min(b*(rt-1),1.5*R,1.5*B),at=st*(nt.indexOf(M)-(rt-1)/2)/(rt-1);
M.from.id>M.to.id&&(at=-at),M.currentCenterOffset=at*g,P-=K*at,
D-=K*at,I+=J*at,N+=J*at}else M.currentCenterOffset=0;if(M.renderPointsX?(M.renderPointsX[0]=P,
M.renderPointsX[1]=D):M.renderPointsX=[P,D],M.renderPointsY?(M.renderPointsY[0]=I,
M.renderPointsY[1]=N):M.renderPointsY=[I,N],M.renderBounds?(M.renderBounds.x0=Math.min(P,D),
M.renderBounds.x1=Math.max(P,D),M.renderBounds.y0=Math.min(I,N),
M.renderBounds.y1=Math.max(I,N)):M.renderBounds=new d.Rect(P,I,D,N),
Z&&M.currentItems&&!M.removed&&(M.currentItems.sort(function(t,e){
return t.style.zIndex-e.style.zIndex}),this.paintLinkItems(r,t.labelRenderer,h,W/w,P,I,J,K,Y,W,M.currentItems,M.renderBounds,V,!0)),
r.beginPath(),M.fromDecoration&&this.paintLinkDecoration(r,P,I,J,K,et,M.fromDecoration,M.fillColor),
M.toDecoration&&this.paintLinkDecoration(r,D,N,-J,-K,et,M.toDecoration,M.fillColor),
M.lineDash){var ot=P+K*W,lt=I-J*W,ht=P-K*W,ut=I+J*W;if(M.lineDash.length>0)for(var ct=M.lineDash,dt=ct.length,pt=ct.reduce(function(t,e){
return t+e})*h,ft=0,gt=0;gt<=Y/pt;gt++){for(var mt=0;mt<=dt-1;mt+=2){
var vt=gt*pt+ft;if(vt>Y-W)break;var yt=vt+ct[mt]*h,St=yt>=Y-W?Y-W:yt;
r.moveTo(ot+vt*J,lt+vt*K),r.lineTo(ht+vt*J,ut+vt*K),r.lineTo(ht+St*J,ut+St*K),
r.lineTo(ot+St*J,lt+St*K),r.closePath(),ft+=h*(ct[mt]+ct[mt+1]);
}ft=0}else for(var bt=Math.max(5,3*W),gt=0;gt<=Y/bt;gt+=2){var vt=gt*bt,St=Math.min((gt+1)*bt,Y);
r.moveTo(ot+vt*J,lt+vt*K),r.lineTo(ht+vt*J,ut+vt*K),r.lineTo(ht+St*J,ut+St*K),
r.lineTo(ot+St*J,lt+St*K),r.closePath()}}else r.moveTo(P+K*W,I-J*W),
r.lineTo(P-K*W,I+J*W),r.lineTo(D-K*W,N+J*W),r.lineTo(D+K*W,N-J*W),
r.closePath();d.Graphics.fill(r,M),Z&&M.currentItems&&!M.removed&&this.paintLinkItems(r,t.labelRenderer,h,W/w,P,I,J,K,Y,W,M.currentItems,M.renderBounds,V,!1);
}else if(M.fillColor){if(r.beginPath(),r.lineWidth=Math.max(.1,2*W),
r.strokeStyle=M.fillColor,M.dashed)for(var Y=Math.sqrt(j),Q=1/Y,J=_*Q,K=G*Q,bt=Math.max(5,3*W),gt=0;gt<=Y/bt;gt+=2){
var vt=gt*bt,St=Math.min((gt+1)*bt,Y);r.moveTo(P+vt*J,I+vt*K),
r.lineTo(P+St*J,I+St*K)}else r.moveTo(P,I),r.lineTo(D,N);r.stroke(),
M.renderPointsX?(M.renderPointsX[0]=P,M.renderPointsX[1]=D):M.renderPointsX=[P,D],
M.renderPointsY?(M.renderPointsY[0]=I,M.renderPointsY[1]=N):M.renderPointsY=[I,N],
M.renderBounds?(M.renderBounds.x0=Math.min(P,D),M.renderBounds.x1=Math.max(P,D),
M.renderBounds.y0=Math.min(I,N),M.renderBounds.y1=Math.max(I,N)):M.renderBounds=new d.Rect(P,I,D,N);
}}}}},i.prototype.paintNodesImpl=function(e,i,n,r){var s=!1,a=e.context,o=n.geometry.txm,l=n.geometry.txa,h=n.geometry.tym,u=n.geometry.tya,c=n.geometry.zoom,p=n.geometry.x0s,f=n.geometry.x1s,g=n.geometry.y0s,m=n.geometry.y1s,v=1/o,y=n.paintDetails,S=this.style.nodeDetailMinSize*this.style.nodeDetailMinSize*v*v,b=this.style.hiddenLinks,C=this.style.nodeLabelScaleBase;
a.textAlign="center",a.textBaseline="middle";for(var x=this.style.removedColor,w=0;w<i.length;w++){
var L=i[w];L.data&&!L.invisible&&this.paintSelfLinks(e,L,n)}for(var w=0;w<i.length;w++){
var L=i[w];if(L.data&&!L.invisible){var T=L.shape;if(T.adaptToViewport(o,l,h,u,c),
null!=L.anchorX&&null!=L.anchorY&&L.anchorMode===t.NodeAnchorMode.Floating){
var k=L.anchorX*o+l,A=L.anchorY*h+u,M=T.getAnchor(),P=T.x+M.x,I=T.y+M.y,D=P-k,N=I-A,F=I;
N<0&&(F=Math.max(F,A-N*Math.min(.3,Math.abs(D)/N))),a.beginPath(),
a.moveTo(P,I),a.lineTo(P,F),a.lineTo(k,A),d.Graphics.stroke(a,L.anchorStyle);
}}}for(var w=0;w<i.length;w++){var L=i[w],T=L.shape;if(L.data&&!L.invisible&&T.isInViewport(p,f,g,m,c)){
var E=L.opacity,O=L.outerBounds.w(),R=L.outerBounds.h(),B=y&&O*R>S||L.hovered;
if(E<1&&(a.globalAlpha=E),B&&!L.removed){var H=L.dataLinks.length-L.links.length;
if(H>0)if(this.useFadeout&&L.relevance<1){var z=b.lineColor;b.lineColor=d.Colors.blend(x,z,L.relevance),
this.paintHiddenLinks(a,L,T.x,T.y,T.hWidth,T.hHeight,H,b,b.size*c),
b.lineColor=z}else this.paintHiddenLinks(a,L,T.x,T.y,T.hWidth,T.hHeight,H,b,b.size*c);
L.items.sort(function(t,e){return t.zIndex-e.zIndex}),this.paintNodeDetails(L,T.x,T.y,T.hHeight,T.hWidth,c,C,e,!0);
}T.paint(a,e.labelRenderer,B),B&&!L.removed&&this.paintNodeDetails(L,T.x,T.y,T.hHeight,T.hWidth,c,C,e,!1),
E<1&&(a.globalAlpha=1)}}if(this.scene.settings.advanced.perNodeLoadingIndicator){
var U=this.scene.settings.advanced.style.loadingArcStyle;a.save(),
a.lineCap="round",a.lineWidth=U.lineWidth,a.strokeStyle=U.lineColor;
var _=r/1400;_=(_-Math.floor(_))*(2*Math.PI);for(var G=_+Math.PI/2,w=0;w<i.length;w++){
var L=i[w];if(!L.invisible){var T=L.shape;if(L.loading||L.image&&null===this.getNodeImage(L,!1,!0)){
if(!T.isInViewport(p,f,g,m,c))continue;s=!0,a.beginPath(),a.arc(T.x,T.y,T.hWidth,_,G),
a.stroke()}}}d.Graphics.restore(a)}return s},i.prototype.paintLinkDecoration=function(t,e,i,n,r,s,a,o){
t.fillStyle=o,"circle"===a?(t.moveTo(e+s,i),t.arc(e,i,s,0,2*Math.PI,!0)):"arrow"===a?(t.moveTo(e-n*s,i-r*s),
t.lineTo(e+n*s-r*s,i+r*s+n*s),t.lineTo(e+n*s+r*s,i+r*s-n*s)):d.Helpers.error("Unrecognized link decoration value. Valid values are 'circle' and 'arrow'.");
},i.prototype.paintLinkPie=function(t,e,i,n,r,s,a,o){var l=(n+r)/2,h=r-n;
t.beginPath(),t.arc(e,i,l,s,a),d.Graphics.paint(t,{lineColor:o,
lineWidth:h})},i.prototype.paintLinkItems=function(t,e,i,n,r,s,a,o,l,h,u,c,p,f){
var g,m;p?(g=d.Helpers.toleranceMax(i,1,.9),m=d.Helpers.toleranceMax(n,1,.9)):(g=i,
m=n);for(var v=0;v<u.length;v++){var y=u[v];if(f){if(y.style.zIndex>=0)break;
}else if(y.style.zIndex<0)continue;var S=y.x||0,b=y.y||0,C=y.style.px||0,x=y.style.py||0,w=y.style.lx||0,L=y.style.ly||0;
C=l*(C+1)*.5+w,x=x*h+L;var T=r+a*C-o*x+S,k=s+o*C+a*x+b,A=0;A=y.style.scaleWithSize?y.style.hoverEffect?m:n:y.style.scaleWithZoom?y.style.hoverEffect?g:i:1,
e.paint(t,T,k,A,y)}},i.prototype.paintBezierLinkItems=function(t,e,i,n,r,s,a,o,l,h,u){
var c,p;h?(c=d.Helpers.toleranceMax(i,1,.9),p=d.Helpers.toleranceMax(n,1,.9)):(c=i,
p=n);for(var f=0;f<o.length;f++){var g=o[f];if(u){if(g.style.zIndex>=0)break;
}else if(g.style.zIndex<0)continue;var m=g.x||0,v=g.y||0,y=g.style.px||0,S=g.style.py||0,b=g.style.lx||0,C=g.style.ly||0,x=0;
y<=0?y=1+y:x=2;var w=1-y,L=r[x]*w+r[x+1]*y,T=s[x]*w+s[x+1]*y,k=r[x+1]*w+r[x+2]*y,A=s[x+1]*w+s[x+2]*y,M=k-L,P=A-T,I=Math.sqrt(M*M+P*P),D=M/I,N=P/I,F=L*w+k*y+D*b-N*(S*a+C)+m,E=T*w+A*y+N*b+D*(S*a+C)+v,O=0;
O=g.style.scaleWithSize?g.style.hoverEffect?p:n:g.style.scaleWithZoom?g.style.hoverEffect?c:i:1,
g.style.rotateWithLink&&(g.style.angle=180*Math.atan2(N,D)/Math.PI),
e.paint(t,F,E,O,g),l.addRect(g.currentBounds)}},i.prototype.paintSelfLinks=function(t,e,i){
var n=this.multilinks[e.id+d.Helpers.SeparatorChar+e.id];if(null!=n){
n instanceof u&&(n=[n]),n=n.filter(function(t){return!t.invisible;
});var r=n.length;if(!(r<1)){for(var s,a,o,l=e.dataLinks.length>e.links.length,h=0,c=0,p=0,f=0;f<e.links.length;f++){
var g=e.links[f];if(g.from!==g.to){var m=g.otherEnd(e);h+=m.x,
c+=m.y,p++}}if(0===p)s=-1,a=0,o=l?4*Math.PI/3:2*Math.PI;else{
h=e.x-h/p,c=e.y-c/p;var v=1/Math.sqrt(h*h+c*c);if(s=h*v,a=c*v,
l){o=Math.PI/2;var y=Math.SQRT2/2,S=y*(s-a);a=y*(a+s),s=S}else o=Math.PI;
}var b,C,x,w,L=this.style.selfLinkAngle;L<=0?L=60:L>90&&(L=90);
var T=Math.PI*L/180,k=Math.cos(T),A=Math.sin(T),M=Math.cos(T/2),P=Math.sin(T/2);
if(o>=T*r){o/=r;var I=-(o*(r-1)+T)/2;x=Math.cos(I),w=Math.sin(I),
b=s*x-a*w,C=s*w+a*x,x=Math.cos(o),w=Math.sin(o)}else{var I=-o/2;
x=Math.cos(I),w=Math.sin(I),b=s*x-a*w,C=s*w+a*x;var D=(o-T)/(r-1);
x=Math.cos(D),w=Math.sin(D)}var N=t.context,F=i.geometry.txm,E=i.geometry.txa,O=i.geometry.tym,R=i.geometry.tya,B=i.geometry.linkZoom;
N.textAlign="center",N.textBaseline="middle";for(var H=this.style,z=H.linkDetailMinSize*H.linkDetailMinSize,U=i.paintDetails&&this.chart.assetsLoaded,_=H.linkDecorationScale,G=H.linkDecorationMinSize,j=H.linkLabelScaleBase,W=2,V=5,Z=.1,Y=5,q=e.x*F+E,X=e.y*O+R,Q=1+(this.style.selfLinkHeightFactor<=0?1:this.style.selfLinkHeightFactor),J=Math.max(this.style.selfLinkWidthFactor,0),K=[0,0,0,0,0],$=[0,0,0,0,0],tt=[0,0,0,0,0],et=[0,0,0,0,0],it=[0,0,0,0,0],nt=[0,0,0,0,0],rt=0;rt<r;rt++){
var g=n[rt];if(!g.invisible){var st=Math.max(e.renderHheight,e.renderHwidth);
st*=st;var at=e.renderHheight;if(st>25&&g.toPieValue>0){var ot=at+W,lt=ot+V+Z*at;
this.paintLinkPie(N,q,X,ot,lt,g.toPie0,g.toPie1,g.toPieColor),
at=lt}var ht=b*k-C*A,ut=b*A+C*k,ct=b*M-C*P,dt=b*P+C*M,pt=e.shape.distanceToEdge(at,e.renderHwidth,b,C),ft=e.shape.distanceToEdge(at,e.renderHwidth,ht,ut),gt=Math.max(pt,ft)*Q,mt=Math.max(.25,g.currentRadius*B*.5),vt=Math.min((gt-Math.max(pt,ft)-mt)/2,Math.max(G,mt*_));
g.fromDecoration&&(pt+=vt),g.toDecoration&&(ft+=vt),tt[0]=q+b*pt,
et[0]=X+C*pt,tt[2]=q+ct*gt,et[2]=X+dt*gt,tt[4]=q+ht*ft,et[4]=X+ut*ft,
K[2]=q+ct*(gt-mt),$[2]=X+dt*(gt-mt),it[2]=q+ct*(gt+mt),nt[2]=X+dt*(gt+mt);
var yt=void 0,St=void 0,bt=void 0,Ct=void 0;if("parabolic"===this.style.selfLinkShape){
yt=b,St=C,bt=ht,Ct=ut,K[0]=tt[0]-C*mt,$[0]=et[0]+b*mt,K[4]=tt[4]+ut*mt,
$[4]=et[4]-ht*mt;var xt=((gt-mt)*P-mt)/M*J;K[1]=K[2]+dt*xt,$[1]=$[2]-ct*xt,
K[3]=K[2]-dt*xt,$[3]=$[2]+ct*xt,it[0]=tt[0]+C*mt,nt[0]=et[0]-b*mt,
it[4]=tt[4]-ut*mt,nt[4]=et[4]+ht*mt,xt=((gt+mt)*P+mt)/M*J,it[1]=it[2]+dt*xt,
nt[1]=nt[2]-ct*xt,it[3]=it[2]-dt*xt,nt[3]=nt[2]+ct*xt,xt=gt*P/M*J,
tt[1]=tt[2]+dt*xt,et[1]=et[2]-ct*xt,tt[3]=tt[2]-dt*xt,et[3]=et[2]+ct*xt;
}else{yt=ct,St=dt,bt=ct,Ct=dt,K[0]=tt[0]-dt*mt,$[0]=et[0]+ct*mt,
K[4]=tt[4]+dt*mt,$[4]=et[4]-ct*mt;var wt=(K[4]-K[0])*J/2,Lt=($[4]-$[0])*J/2;
K[1]=K[2]-wt,$[1]=$[2]-Lt,K[3]=K[2]+wt,$[3]=$[2]+Lt,it[0]=tt[0]+dt*mt,
nt[0]=et[0]-ct*mt,it[4]=tt[4]-dt*mt,nt[4]=et[4]+ct*mt,wt=(it[4]-it[0])*J/2,
Lt=(nt[4]-nt[0])*J/2,it[1]=it[2]-wt,nt[1]=nt[2]-Lt,it[3]=it[2]+wt,
nt[3]=nt[2]+Lt,wt=(tt[4]-tt[0])*J/2,Lt=(et[4]-et[0])*J/2,tt[1]=tt[2]-wt,
et[1]=et[2]-Lt,tt[3]=tt[2]+wt,et[3]=et[2]+Lt}g.renderBounds||(g.renderBounds=new d.Rect(0,0,0,0)),
g.renderBounds.x0=Math.min.apply(Math,it),g.renderBounds.y0=Math.min.apply(Math,nt),
g.renderBounds.x1=Math.max.apply(Math,it),g.renderBounds.y1=Math.max.apply(Math,nt),
g.renderPointsX||(g.renderPointsX=new Array(2*Y),g.renderPointsY=new Array(2*Y));
for(var Tt=0;Tt<Y;Tt++){var kt=Tt/(Y-1),At=1-kt;g.renderPointsX[Tt]=At*At*tt[0]+2*At*kt*tt[1]+kt*kt*tt[2],
g.renderPointsY[Tt]=At*At*et[0]+2*At*kt*et[1]+kt*kt*et[2],g.renderPointsX[Tt+Y]=At*At*tt[2]+2*At*kt*tt[3]+kt*kt*tt[4],
g.renderPointsY[Tt+Y]=At*At*et[2]+2*At*kt*et[3]+kt*kt*et[4]}if(st>25){
var Mt=g.hovered||g.from.hovered||g.to.hovered,Pt=Mt||U&&st>z;
Pt&&g.currentItems&&!g.removed&&(g.currentItems.sort(function(t,e){
return t.style.zIndex-e.style.zIndex}),this.paintBezierLinkItems(N,t.labelRenderer,B,mt/j,tt,et,mt,g.currentItems,g.renderBounds,Mt,!0)),
N.beginPath(),g.fromDecoration&&this.paintLinkDecoration(N,tt[0],et[0],yt,St,vt,g.fromDecoration,g.fillColor),
g.toDecoration&&this.paintLinkDecoration(N,tt[4],et[4],bt,Ct,vt,g.toDecoration,g.fillColor),
N.moveTo(K[0],$[0]),N.quadraticCurveTo(K[1],$[1],K[2],$[2]),N.quadraticCurveTo(K[3],$[3],K[4],$[4]),
N.lineTo(it[4],nt[4]),N.quadraticCurveTo(it[3],nt[3],it[2],nt[2]),
N.quadraticCurveTo(it[1],nt[1],it[0],nt[0]),N.closePath(),d.Graphics.fill(N,g),
Pt&&g.currentItems&&!g.removed&&(g.currentItems.sort(function(t,e){
return t.style.zIndex-e.style.zIndex}),this.paintBezierLinkItems(N,t.labelRenderer,B,mt/j,tt,et,mt,g.currentItems,g.renderBounds,Mt,!1));
}else g.fillColor&&(N.beginPath(),N.lineWidth=Math.max(.1,2*mt),
N.strokeStyle=g.fillColor,N.moveTo(tt[0],et[0]),N.quadraticCurveTo(tt[1],et[1],tt[2],et[2]),
N.quadraticCurveTo(tt[3],et[3],tt[4],et[4]),N.stroke());var S=b*x-C*w;
C=b*w+C*x,b=S}}}}},i.prototype.paintHiddenLinks=function(t,e,i,n,r,s,a,o,l){
for(var h,u,c,d=0,p=0,f=0,g=!1,m=0;m<e.links.length;m++){var v=e.links[m];
if(v.from===v.to)g=!0;else{var y=v.otherEnd(e);d+=y.x,p+=y.y,
f++}}if(0===f)h=1,u=0,c=2*Math.PI/a/3;else{d=e.x-d/e.links.length,
p=e.y-p/e.links.length;var S=1/Math.sqrt(d*d+p*p);if(h=d*S,u=p*S,
g){c=Math.PI/a/2;var b=Math.SQRT2/2,C=b*(h+u);u=b*(u-h),h=C}else c=2*Math.PI/a/3;
}var x=Math.cos(-c*(a-1)/2),w=Math.sin(-c*(a-1)/2),L=h*x-u*w,T=h*w+u*x,k=L;
x=Math.cos(c),w=Math.sin(c),t.beginPath();for(var A=1;A<=a;A++){
var M=e.shape.distanceToEdge(r,s,k,T);t.moveTo(i+k*M,n+T*M),t.lineTo(i+k*(M+l),n+T*(M+l)),
L=k*x-T*w,T=k*w+T*x,k=L}t.strokeStyle=o.lineColor,t.lineWidth=o.lineWidth,
t.stroke()},i.prototype.findObjectAt=function(t,e,i){var n=this.scene,r=n.fromDisplay(t,e),s=r.x,a=r.y,o=1/n.zoom,l=this.scaleLinksWithZoom?o:1,h=null,u=[],c=null,p=i,f=n.hoverNode;
if(f&&f.layer===this&&!f.invisible){var g=f.shape.hitTest(s,a,o,p*o);
if(g/o<p){p=g/o,h=f;var m=this.findItem(t,e,h,i);if(m&&(c=m.item,
p=Math.min(p,m.distance)),p<=0)return{object:h,details:c}}}for(var v=this.nodes(),y=v.length-1;y>=0;y--){
var S=v[y];if(!S.removed&&!S.invisible&&d.Geometry.distanceToRect(s-S.x,a-S.y,S.outerBounds)<p*o){
var g=S.shape.hitTest(s,a,o,p*o);if(g<=0){p=0,h=S;break}g/o<p&&(p=g/o,
h=S),u.push(S)}}if(p>0){var b=n.hoverLink;if(b&&b.layer===this&&!b.invisible)for(var C=b.targetRadius/2*l,y=1;y<b.renderPointsX.length;y++){
var x=d.Geometry.distanceToSegmentSq(b.renderPointsX[y-1],b.renderPointsY[y-1],b.renderPointsX[y],b.renderPointsY[y],t,e);
if(x<=(p+C)*(p+C)){p=0,h=b;var m=this.findItem(t,e,h,i);if(m&&(c=m.item,
p=Math.min(p,m.distance)),p<=0)return{object:h,details:c};break;
}}}if(p>0)for(var w=0,L=this.links();w<L.length;w++){var T=L[w];
if(!T.removed&&!T.invisible&&T.renderPointsX&&d.Geometry.distanceToRect(t,e,T.renderBounds)<p){
for(var C=T.targetRadius/l*2,k=Math.min(p*p,C*C),y=1;y<T.renderPointsX.length;y++){
var x=d.Geometry.distanceToSegmentSq(T.renderPointsX[y-1],T.renderPointsY[y-1],T.renderPointsX[y],T.renderPointsY[y],t,e);
if(x<k){p=Math.sqrt(x),h=T;break}}u.push(T)}}if(0===p){var m=this.findItem(t,e,h,i);
return{object:h,details:m?m.item:null}}for(var y=0;y<u.length;y++){
var A=u[y],m=this.findItem(t,e,A,i);m&&m.distance<p&&(p=m.distance,
h=A,c=m.item)}return p>i&&(h=null,c=null),{object:h,details:c
}},i.prototype.findItem=function(t,e,i,n){if(!i)return null;var r=n*n,s=this.scene.hoverItem;
if(s&&s.hwidth&&i.currentItems.indexOf(s)>-1){var a=d.Geometry.distanceToRect(t,e,s.currentBounds,!0);
if(a<=r)return{item:s,distance:Math.sqrt(a)}}var o=null,l=n*n;
if(i instanceof h){var u=i.shape.currentLabel;if(u&&u.currentBounds){
var a=d.Geometry.distanceToRect(t,e,u.currentBounds,!0);a<l&&(o=u,
l=a)}}for(var c=0;c<i.currentItems.length;c++){var p=i.currentItems[c];
if(p.hwidth){var a=d.Geometry.distanceToRect(t,e,p.currentBounds,!0);
a<=l&&(o=p,l=a)}}return l>r||!o?null:{item:o,distance:Math.sqrt(l)
}},i.prototype.getGraphBounds=function(t){if(void 0===t&&(t=this.nodes()),
!t||!t.length)return new d.Rect(0,0,0,0);for(var e=d.Rect.createEmpty(),i=0;i<t.length;i++){
var n=t[i];if(!n.removed){var r=n.x,s=n.y,a=n.outerBounds;e.addBounds(a.x0+r,a.y0+s,a.x1+r,a.y1+s);
}}return e},i.prototype.getNodeNeighborsBounds=function(t){if(!t||0===this.nodes().length)return new d.Rect(0,0,0,0);
for(var e=t.outerBounds.clone().moveBy(t.x,t.y),i=t,n=0;n<t.links.length;n++){
var r=t.links[n];if(i=r.otherEnd(t),!i.removed){var s=i.outerBounds,a=i.x,o=i.y;
e.addBounds(s.x0+a,s.y0+o,s.x1+a,s.y1+o)}}return e},i.prototype.placePies=function(){
for(var t=2*Math.PI,e=[],i=0,n=this.nodes();i<n.length;i++){for(var r=n[i],s=0,a=0;a<r.links.length;a++){
var o=r.links[a];o.to===r&&o.toPieValue>0&&(s+=o.toPieValue,e.push(o),
o._angle=Math.atan2(o.to.y-o.from.y,o.to.x-o.from.x))}if(s>0){
e.sort(function(t,e){return t._angle-e._angle});for(var l=t/s,h=0,u=0,c=0;c<e.length;c++){
var d=e[c];d.toPie0=h,h+=d.toPieValue*l,d.toPie1=h;var p=d._angle-(d.toPie0+d.toPie1)/2;
p<0&&(p+=2*Math.PI),u+=p}u/=e.length,u-=Math.PI;for(var f=0;f<e.length;f++){
var g=e[f];g.toPie0+=u,g.toPie1+=u}e=[]}}},i}(c);t.NodesLayer=V;
var Z=function(t){function e(e,i,n){return t.call(this,e,i,n)||this;
}return n(e,t),e.prototype.zoomOut=function(){},e.prototype.zoomOutPossible=function(){
return!1},e.prototype.setSelection=function(t){for(var e,i=[],n=0;n<t.length;n++){
var r=t[n];r instanceof h||r instanceof u?i.push(r):d.Helpers.isString(r)&&(e=this.getNode(r)||this.getLink(r))?i.push(e):this.error("setSelection: Could not find a chart object with the ID `"+r+"`.");
}this.scene.setSelection(i)&&(this.events.notifySceneChanges({
selection:!0}),this.notifySelectionChanged(this.createEventArguments(null,"api")));
},e.prototype.createEventArguments=function(t,e){var i=null,n=null;
if(t&&(t.x||t.y)){var r=this.scene.fromDisplay(t.x,t.y);i=r.x,
n=r.y}return{chart:this.api,origin:e,chartX:i,chartY:n,hoverLink:this.scene.hoverLink,
hoverNode:this.scene.hoverNode,hoverItem:this.scene.hoverItem,
selection:this.scene.selection.slice()}},e}(d.Impl);t.Impl=Z}(u=i.ItemsChart||(i.ItemsChart={})),
function(t){var e,i=t.Gestures||(t.Gestures={}),r=t.Layouts||(t.Layouts={}),s=t.Bar||(t.Bar={});
!function(t){t[t.NodeClass=0]="NodeClass",t[t.LinkClass=1]="LinkClass",
t[t.Aura=2]="Aura"}(e=t.LegendItemType||(t.LegendItemType={}));
var a=function(t){function e(e,i,n,r,s,a,o,l,h){var u=t.call(this,i,n,r,s)||this;
return u.itemId=e,u.enabled=a,u.node=o,u.link=l,u.aura=h,u}return n(e,t),
e}(d.LegendEntry),o=function(t){function e(e,i){var n=t.call(this,e,null)||this;
return n.halfSize=i,n}return n(e,t),e.prototype.distanceToEdge=function(){
return this.halfSize},e}(u.Shape),l=function(t){function e(e,i){
var n=t.call(this,null,null,!0)||this;return n.data={id:null,
loaded:!0},n.hHeight=e,n.hWidth=e,n.renderHheight=e,n.renderHwidth=e,
n.x=i?2*-e:e+e/2,n.y=0,n.shape=new o(n,e),n}return n(e,t),e}(u.Node),h=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.textColorDisabled="rgba(64,62,62,0.3)",
e.showItemsWithClasses="any",e}return n(e,t),e}(d.SettingsLegendAdvanced);
t.SettingsLegendAdvanced=h;var c=function(t){function e(){var e=t.call(this)||this;
return e.panel=new d.SettingsLegendPanel("bottom","left"),e.advanced=new h,
e.marker.size=30,e.padding=15,e}return n(e,t),e}(d.SettingsLegend);
t.SettingsLegend=c;var p=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.paintOrder=51,e.updateOrder=100,e.linkClassState=Object.create(null),
e.nodeClassState=Object.create(null),e.allNodeClassesEnabled=!0,
e.allLinkClassesEnabled=!0,e}return n(e,t),e.prototype.onSceneChange=function(e){
t.prototype.onSceneChange.call(this,e);var i=e.changes.settingsChanges;
(e.changes.auras||i&&(i.style&&(i.style.nodeClasses||i.style.linkClasses)||i.legend&&i.legend.text))&&(this.rebuildItems(),
e.changes.bounds=!0,e.changes.filters=!0)},e.prototype.doAnimations=function(){
return 1},e.prototype.paintMarker=function(t,e,i,n,r){if(r.node){
var s={geometry:this.getGeometry(e,i,.6),paintDetails:!1};this.chart.renderer.paintNodes(t,[r.node],s,0);
}else if(r.link){var s={geometry:this.getGeometry(e,i,1),paintDetails:!0
};this.chart.renderer.paintLinks(t,[r.link],{},s)}else this.paintAuraMarker(t.context,e,i,n,r.aura);
},e.prototype.paintAuraMarker=function(t,e,i,n,r){var s=n/527,a=e-n,o=i-n,l=d.Graphics.beginStrokeAndFill(t,r);
l.moveTo(878.4*s+a,413.8*s+o),l.bezierCurveTo(856.4*s+a,404.2*s+o,817.1*s+a,388.9*s+o,769.7*s+a,378.2*s+o),
l.bezierCurveTo(696.1*s+a,361.5*s+o,679.5*s+a,324.1*s+o,676.7*s+a,308.7*s+o),
l.bezierCurveTo(674.4*s+a,296.1*s+o,652.9*s+a,188.3*s+o,589.9*s+a,107*s+o),
l.bezierCurveTo(543*s+a,42.5*s+o,466.9*s+a,.6*s+o,381*s+a,.6*s+o),
l.bezierCurveTo(238.4*s+a,.6*s+o,122.8*s+a,116.2*s+o,122.8*s+a,258.8*s+o),
l.bezierCurveTo(122.8*s+a,264.7*s+o,123*s+a,270.5*s+o,123.4*s+a,276.3*s+o),
l.lineTo(122.8*s+a,276.9*s+o),l.bezierCurveTo(122.8*s+a,276.9*s+o,127*s+a,333.8*s+o,136.7*s+a,389.3*s+o),
l.bezierCurveTo(146.4*s+a,444.8*s+o,138.1*s+a,500.4*s+o,106.2*s+a,543.4*s+o),
l.bezierCurveTo(74.3*s+a,586.4*s+o,2.1*s+a,689.2*s+o,4.9*s+a,754.4*s+o),
l.bezierCurveTo(5*s+a,755.9*s+o,5.2*s+a,757.3*s+o,5.4*s+a,758.8*s+o),
l.bezierCurveTo(4.1*s+a,769.2*s+o,3.5*s+a,779.8*s+o,3.5*s+a,790.5*s+o),
l.bezierCurveTo(3.5*s+a,933.1*s+o,119.1*s+a,1048.7*s+o,261.7*s+a,1048.7*s+o),
l.bezierCurveTo(349.6*s+a,1048.7*s+o,427.2*s+a,1004.7*s+o,473.9*s+a,937.6*s+o),
l.lineTo(474.1*s+a,937.6*s+o),l.bezierCurveTo(474.1*s+a,937.6*s+o,510.2*s+a,891.8*s+o,518.5*s+a,884.8*s+o),
l.bezierCurveTo(526.8*s+a,877.9*s+o,568.5*s+a,854.3*s+o,608.7*s+a,869.5*s+o),
l.bezierCurveTo(631.7*s+a,878.2*s+o,675.6*s+a,894.2*s+o,719.1*s+a,905*s+o),
l.bezierCurveTo(743.4*s+a,912.6*s+o,769.3*s+a,916.7*s+o,796.1*s+a,916.7*s+o),
l.bezierCurveTo(938.7*s+a,916.7*s+o,1054.3*s+a,801.1*s+o,1054.3*s+a,658.5*s+o),
l.bezierCurveTo(1054.3*s+a,544.8*s+o,980.6*s+a,448.1*s+o,878.4*s+a,413.8*s+o),
l.closePath(),d.Graphics.endStrokeAndFill(t,l,r),l=d.Graphics.beginStrokeAndFill(t,{
fillColor:"white"}),l.moveTo(796.1*s+a,825.2*s+o),l.bezierCurveTo(718.8*s+a,825.2*s+o,653.8*s+a,772.6*s+o,635*s+a,701.2*s+o),
l.lineTo(423.3*s+a,750*s+o),l.bezierCurveTo(426.5*s+a,763*s+o,428.3*s+a,776.5*s+o,428.3*s+a,790.5*s+o),
l.bezierCurveTo(428.3*s+a,882.5*s+o,353.7*s+a,957.1*s+o,261.7*s+a,957.1*s+o),
l.bezierCurveTo(169.7*s+a,957.1*s+o,95.1*s+a,882.5*s+o,95.1*s+a,790.5*s+o),
l.bezierCurveTo(95.1*s+a,698.5*s+o,169.7*s+a,623.9*s+o,261.7*s+a,623.9*s+o),
l.bezierCurveTo(270.7*s+a,623.9*s+o,279.4*s+a,624.6*s+o,288*s+a,626*s+o),
l.lineTo(331.2*s+a,417.8*s+o),l.bezierCurveTo(263.6*s+a,396.6*s+o,214.5*s+a,333.4*s+o,214.5*s+a,258.8*s+o),
l.bezierCurveTo(214.5*s+a,166.8*s+o,289.1*s+a,92.2*s+o,381.1*s+a,92.2*s+o),
l.bezierCurveTo(473.1*s+a,92.2*s+o,547.7*s+a,166.8*s+o,547.7*s+a,258.8*s+o),
l.bezierCurveTo(547.7*s+a,298.1*s+o,534.1*s+a,334.1*s+o,511.4*s+a,362.6*s+o),
l.lineTo(684*s+a,535.3*s+o),l.bezierCurveTo(713.6*s+a,508.4*s+o,752.9*s+a,492*s+o,796.1*s+a,492*s+o),
l.bezierCurveTo(888.1*s+a,492*s+o,962.7*s+a,566.6*s+o,962.7*s+a,658.6*s+o),
l.bezierCurveTo(962.7*s+a,750.6*s+o,888.1*s+a,825.2*s+o,796.1*s+a,825.2*s+o),
l.closePath(),l.moveTo(381*s+a,425.4*s+o),l.bezierCurveTo(374.2*s+a,425.4*s+o,367.6*s+a,425*s+o,361*s+a,424.2*s+o),
l.lineTo(317.5*s+a,633.5*s+o),l.bezierCurveTo(359.9*s+a,648.6*s+o,394.3*s+a,680.4*s+o,413*s+a,721*s+o),
l.lineTo(630*s+a,671*s+o),l.bezierCurveTo(629.7*s+a,666.9*s+o,629.5*s+a,662.8*s+o,629.5*s+a,658.6*s+o),
l.bezierCurveTo(629.5*s+a,620.8*s+o,642.1*s+a,585.9*s+o,663.4*s+a,557.9*s+o),
l.lineTo(490.2*s+a,384.6*s+o),l.bezierCurveTo(460.9*s+a,410*s+o,422.8*s+a,425.4*s+o,381*s+a,425.4*s+o),
l.closePath(),d.Graphics.endStrokeAndFill(t,l,{fillColor:"white"
})},e.prototype.rebuildItems=function(){var t=this.chart.scene.settings.style,e=[],i=this.settings.marker.size/2,n=this.settings.text.fillColor,r=this.settings.advanced.textColorDisabled,s=this.nodeClassState,o=this.linkClassState;
this.nodeClassState=Object.create(null),this.linkClassState=Object.create(null),
this.allLinkClassesEnabled=!0,this.allNodeClassesEnabled=!0;for(var h=0;h<t.nodeClasses.length;h++){
var c=t.nodeClasses[h];if(c.showInLegend&&null!=c.style){var p=d.Helpers.clone(t.node);
d.Helpers.extendStyleTo(c.style,p);var f=new l(i,(!1));d.Helpers.extendStyleTo(p,f),
this.chart.layer.styleUpdater.postprocessNode(f);var g=!d.Helpers.hasProperty(s,c.className)||s[c.className];
this.nodeClassState[c.className]=g,g||(this.allNodeClassesEnabled=!1),
e.push(new a(c.className,c.nameLegend||c.className,n,r,c.legendGroupId,g,f,null,null));
}}for(var m=0;m<t.linkClasses.length;m++){var v=t.linkClasses[m];
if(v.showInLegend&&null!=v.style){var p=d.Helpers.clone(t.link);
d.Helpers.extendStyleTo(v.style,p);var y=new u.Link(null,null);
d.Helpers.extendStyleTo(p,y),y.currentRadius=y.radius,y.from=new l(i,(!0)),
y.to=new l(i,(!1));var g=!d.Helpers.hasProperty(o,v.className)||o[v.className];
this.linkClassState[v.className]=g,this.allLinkClassesEnabled=this.allLinkClassesEnabled&&g,
e.push(new a(v.className,v.nameLegend||v.className,n,r,v.legendGroupId,g,null,y,null));
}}for(var S=this.chart.settings.auras._calculatedStyles,b=Object.keys(S),C=0;C<b.length;C++){
var x=b[C],w=S[x];w.enabled||(this.allNodeClassesEnabled=!1),
(w.showInLegend||null==w.showInLegend)&&e.push(new a(x,w.nameLegend||x,n,r,w.legendGroupId,w.enabled,null,null,w));
}this.resetEntries(e)},e.prototype.getGeometry=function(t,e,i){
var n=this.settings.marker.size,r=-n,s=n,a=-n,o=n,l=i,h=i,u=t,c=e,d=t-n,p=t+n,f=e-n,g=e+n;
return{txm:l,txa:u,tym:h,tya:c,zoom:i,x0s:d,x1s:p,y0s:f,y1s:g,
x0w:r,y0w:a,x1w:s,y1w:o,linkZoom:i}},e.prototype.itemClicked=function(e,i){
t.prototype.itemClicked.call(this,e,i),this.nodeClassState=Object.create(null),
this.linkClassState=Object.create(null),this.allLinkClassesEnabled=!0,
this.allNodeClassesEnabled=!0;for(var n=0;n<this.entries.length;n++){
var r=this.entries[n];if(r.node)this.nodeClassState[r.itemId]=r.enabled,
r.enabled||(this.allNodeClassesEnabled=!1);else if(r.link)this.linkClassState[r.itemId]=r.enabled,
r.enabled||(this.allLinkClassesEnabled=!1);else{var s=this.chart.settings.auras;
s._calculatedStyles[r.itemId].enabled=r.enabled,s.style[r.itemId].enabled=r.enabled,
s._defaultStyles[r.itemId].enabled=r.enabled,this.chart.events.notifySceneChanges({
settingsChanges:{auras:{}}}),r.enabled||(this.allNodeClassesEnabled=!1);
}}this.chart.events.notifySceneChanges({filters:!0})},e.prototype.isNodeVisible=function(t){
if(this.allNodeClassesEnabled)return!0;var e=t.className,i=t.style?t.style.aura:null;
if(!e&&!i)return!0;var n=u.ItemsStyle.getClasses(e),r=Array.isArray(i)?i:[i],s=this.chart.settings.auras._calculatedStyles;
if("any"===this.settings.advanced.showItemsWithClasses){for(var a=!1,o=!1,l=0;l<n.length;l++)if(d.Helpers.hasProperty(this.nodeClassState,n[l])){
if(this.nodeClassState[n[l]]){o=!0;break}a=!0}for(var l=0;l<r.length;l++)if(d.Helpers.hasProperty(s,r[l])){
if(s[r[l]].enabled){o=!0;break}a=!0}return o||!a}for(var l=0;l<n.length;l++)if(d.Helpers.hasProperty(this.nodeClassState,n[l])&&!this.nodeClassState[n[l]])return!1;
for(var l=0;l<r.length;l++)if(d.Helpers.hasProperty(s,r[l])&&!s[r[l]].enabled)return!1;
return!0},e.prototype.isLinkVisible=function(t){if(this.allLinkClassesEnabled)return!0;
var e=t.className;if(!e)return!0;var i=u.ItemsStyle.getClasses(e);
if("any"===this.settings.advanced.showItemsWithClasses){for(var n=!1,r=!1,s=0;s<i.length;s++)if(d.Helpers.hasProperty(this.linkClassState,i[s])){
if(this.linkClassState[i[s]]){r=!0;break}n=!0}return r||!n}for(var s=0;s<i.length;s++)if(d.Helpers.hasProperty(this.linkClassState,i[s])&&!this.linkClassState[i[s]])return!1;
return!0},e}(d.Legend);t.Legend=p,function(e){var i=function(t){
function e(e,i){var n=t.call(this,e,i)||this;n.scene=e.scene,
n.events=e.events;var r=d.Helpers.createDom("li",null,null,null),s=d.Helpers.createDom("span","DVSL-NC-zoom",null,r);
return n.handle=d.Helpers.createDom("em",null,null,s),n.mouse=new d.MouseEvents(r,n.scene.settings.advanced.pointer),
n.mouse.listen("drag",function(t){return n.zoomMove(t)}),n.mouse.listen("down",function(t){
return n.zoomDown(t)}),n.domElement=r,n}return n(e,t),e.prototype.zoomDown=function(t){
t.y<100&&this.zoomMove(t)},e.prototype.zoomMove=function(t){var e=t.y-10;
e=Math.max(0,Math.min(80,e)),this.handle.style.top=e+"px";var i=this.getZoomValue(e/80);
this.chart.autoZoom.manualZoom(i/this.scene.zoom),this.events.notifySceneChanges({
position:!0}),t.consumed=!0},e.prototype.getSliderPosition=function(){
var t=this.scene.settings.interaction.zooming.zoomExtent,e=Math.min(t[0],this.chart.autoZoom.minimumAutoZoom),i=t[1],n=Math.log(Math.max(e,Math.min(i,this.scene.zoom)));
return e=Math.log(e),i=Math.log(i),1-(n-e)/(i-e)},e.prototype.getZoomValue=function(t){
var e=this.scene.settings.interaction.zooming.zoomExtent,i=Math.min(e[0],this.chart.autoZoom.minimumAutoZoom),n=e[1];
i=Math.log(i),n=Math.log(n);var r=(1-t)*(n-i)+i;return Math.exp(r);
},e.prototype.doAnimations=function(t){var e=this.getSliderPosition();
this.handle.style.top=80*e+"px"},e.prototype.remove=function(){
this.mouse.remove()},e}(d.Bar.Item);e.ZoomControl=i,d.Bar.ToolbarItemNames.zoomControl=d.Bar.ToolbarItemNames.zoomcontrol=function(e,i){
return new t.Bar.ZoomControl(e,i)},d.Bar.ToolbarItemNames.rearrange=function(t,e){
var i=t.settings.localization.toolbar;e.label=e.label||i.rearrangeButton,
e.title=e.title||i.rearrangeTitle,e.cssClass=e.cssClass||"DVSL-bar-btn-rearrange";
var n=e.onClick;return e.onClick=function(e,i){t.resetLayout(),
n&&n(e,i)},new d.Bar.Button(t,e)},d.Bar.ToolbarItemNames.freeze=function(t,e){
var i=t.settings.localization.toolbar;return new d.Bar.ToggleButton(t,e,{
labelDisabled:e.label||i.freezeButton,cssClassEnabled:"DVSL-bar-btn-lock-all-active",
cssClassDisabled:e.cssClass||"DVSL-bar-btn-lock-all",titleEnabled:i.unfreezeTitle,
titleDisabled:i.freezeTitle,getChartState:function(){return t.isLayoutFrozen;
},onEnable:function(){return t.freezeLayout()},onDisable:function(){
return t.unfreezeLayout()}})},d.Bar.ToolbarItemNames.fit=function(t,e){
var i=t.settings.localization.toolbar;return new d.Bar.ToggleButton(t,e,{
labelDisabled:e.label||i.fitButton,cssClassEnabled:"DVSL-bar-btn-fit-active",
cssClassDisabled:e.cssClass||"DVSL-bar-btn-fit",titleDisabled:e.title||i.fitTitle,
getChartState:function(){return"overview"===t.scene.autoZoomMode;
},onEnable:function(){return t.autoZoom.setZoom("overview")},
onDisable:function(){return t.autoZoom.setZoom("auto")}})};var r=function(t){
function e(){var e=t.call(this)||this;return e.zoomControl=!0,
e.enabled=!0,e.side="bottom",e.align="left",e.showLabels=!1,e.fullscreen=!0,
e["export"]=!1,e.items=[new d.SettingsToolbarItem("fit"),new d.SettingsToolbarItem("rearrange"),new d.SettingsToolbarItem("freeze"),new d.SettingsToolbarItem("back"),new d.SettingsToolbarItem("fullscreen"),new d.SettingsToolbarItem("export"),new d.SettingsToolbarItem("zoomControl","bottom","left")],
e}return n(e,t),e}(d.SettingsToolbar);e.SettingsToolbar=r;var s=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.rearrangeButton="Rearrange",
e.rearrangeTitle="Rearrange elements",e.freezeButton="Freeze",
e.freezeTitle="Lock all",e.unfreezeTitle="Unlock all",e.fitButton="Fit",
e.fitTitle="Fit to screen",e}return n(e,t),e}(d.SettingsLocalizationToolbar);
e.SettingsLocalizationToolbar=s}(s=t.Bar||(t.Bar={}));var f=function(t){
function e(i){var n=t.call(this,d.SettingsMapping.NetChartSettings)||this;
return n.theme=e.FlatTheme,n.data=[],n.area=new m,n.events=new L,
n.style=new w,n.auras=new u.SettingsNodesLayerAuras,n.layout=new x,
n.filters={nodeFilter:null,linkFilter:null,nodeLinksProcessor:null,
multilinkProcessor:null},n.interaction=new v,n.navigation=new b,
n.toolbar=new s.SettingsToolbar,n.localization=new g,n.legend=new c,
n.nodeMenu.buttons=["hide","expand","focus","lock"],n.apply(i),
n._initializing=!1,n}return n(e,t),e.prototype.apply=function(e){
return this.applyCompatibility(e,[{from:"interaction.zooming.autoZoomPositionEllasticity",
to:"interaction.zooming.autoZoomPositionElasticity"},{from:"navigation.nodeExpansionRadius",
to:"navigation.focusNodeExpansionRadius"},{from:"localization.menu.dynaminc",
to:"localization.menu.dynamic"}]),t.prototype.apply.call(this,e);
},e}(u.Settings);f.FlatTheme={advanced:{themeCSSClass:"DVSL-flat"
}},f.DarkTheme={advanced:{themeCSSClass:"DVSL-dark"},area:{style:{
fillColor:"rgba(28,26,28,1)"}},title:{margin:15,style:{fillColor:"#A8A7A8"
}},legend:{text:{fillColor:"#A8A7A8"}},style:{node:{fillColor:"gray"
},link:{fillColor:"#09c"},linkHovered:{shadowColor:"#09c"},hiddenLinks:{
lineColor:"#A8A7A8"},nodeHovered:{shadowColor:"#fff",shadowOffsetY:0,
shadowBlur:12},nodeLabel:{padding:4,borderRadius:10,textStyle:{
fillColor:"rgba(180,180,180,1)"},backgroundStyle:{fillColor:"rgba(60,60,60,0.8)",
lineColor:null}},linkLabel:{padding:.6,backgroundStyle:{lineColor:"#09c",
fillColor:"#333333"},textStyle:{fillColor:"#A8A7A8"}},selection:{
fillColor:"white",shadowColor:"rgba(255,255,255,0.6)",sizeConstant:4,
shadowBlur:24,shadowOffsetY:4}}},t.Settings=f;var g=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.toolbar=new s.SettingsLocalizationToolbar,
e.menu={dynamic:"Pin",fixed:"Unpin",focus:"Focus",unfocus:"Unfocus",
collapse:"Collapse",close:"Close",expand:"Expand",hide:"Hide"
},e}return n(e,t),e}(d.SettingsLocalization);t.SettingsLocalization=g;
var m=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.centerX=.5,e.centerY=.5,e.paddingTop=0,e.paddingLeft=0,
e.paddingRight=0,e.paddingBottom=0,e}return n(e,t),e}(d.SettingsArea);
t.SettingsArea=m;var v=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.zooming=new S,e.selection=new y,e.rotation={fingers:!1
},e}return n(e,t),e}(u.SettingsInteraction);t.SettingsInteraction=v;
var y=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.dragSelect=!0,e}return n(e,t),e}(u.SettingsInteractionSelection);
t.SettingsInteractionSelection=y;var S=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.initialAutoZoom="overview",
e.zoomExtent=[.5,4],e.autoZoomExtent=[null,1],e.autoZoomSize=.9,
e.autoZoomPositionElasticity=2.5e-7,e}return n(e,t),e}(u.SettingsInteractionZooming);
t.SettingsInteractionZooming=S;var b=function(){function t(){
this.mode="showall",this.initialNodes=null,this.focusNodeExpansionRadius=2,
this.focusNodeTailExpansionRadius=null,this.focusAutoFadeout=!1,
this.numberOfFocusNodes=3,this.minNumberOfFocusNodes=1,this.expandDelay=0,
this.expandOnClick=!0,this.autoZoomOnFocus=!1,this.autoUnfocus=!0;
}return t}();t.SettingsNavigation=b;var C=function(){function t(){
this.strength=.01,this.from="auto",this.fromCenter="weighted",
this.to="graph",this.toCenter="weighted"}return t}();t.GravitySettings=C;
var x=function(){function t(){this.mode="dynamic",this.nodeSpacing=16,
this.rowSpacing=null,this.groupSpacing=null,this.incrementalLayoutMaxTime=300,
this.initialLayoutMaxTime=2e3,this.layoutFreezeTimeout=1e4,this.layoutFreezeMinTimeout=1500,
this.aspectRatio=!1,this.globalLayoutOnChanges=!0,this.advanced={
adaptiveFreezeTreshold:1.2},this.twoRingRadialLayout=!1,this.rotation=0,
this.gravity=new C}return t}();t.SettingsLayout=x;var w=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.dragSelection={
fillColor:"rgba(30,160,220,0.15)",lineColor:"#000000",lineWidth:1,
lineDash:[1,2]},e}return n(e,t),e}(u.SettingsNodesLayerStyle);
t.SettingsStyle=w;var L=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.onPointerDown=null,e.onPointerUp=null,e.onPointerDrag=null,
e.onPointerMove=null,e.onDataUpdated=null,e}return n(e,t),e}(d.SettingsEvents);
t.SettingsEvents=L;var T=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e}(u.Scene);t.Scene=T,function(t){function e(t){
if(0===t.children.length)return 0;var e=t.children[0],i=t.children[t.children.length-1];
return(e.node.x-e.hWidth+(i.node.x+i.hWidth))/2}function i(t,e,i,n,r){
null==e&&(t[0].node.x=0,e=t[0]);for(var s=e.levelIndex+1,a=null===i?t.length:i.levelIndex,o=e.node.x+e.hWidth,l=s;l<a;l++){
var h=t[l];o+=h.hWidth+(null==t[l].parent||t[l-1].parent!==t[l].parent?r:n),
h.node.x=o,o+=h.hWidth}}var r=function(){function t(){this.forceLinkList=null,
this.fx=0,this.fy=0,this.sizeEstimate=0,this.left=null,this.right=null,
this.leafCount=0,this.leaves=null,this.x=0,this.y=0,this.z=0,
this.r=1,this.repulsiveForceX=0,this.repulsiveForceY=0,this.repulsiveForceZ=0;
}return t}(),s=function(){function t(){this.maxLeafCount=5,this.root=null,
this.freeNodeRoot=null,this.temperature=0,this.nodeCount=0}return t._swap=function(t,e,i){
var n=t[e];t[e]=t[i],t[i]=n},t.prototype.buildTree=function(t){
this.iters=0;var e=t.length;this.root&&this.freeNode(this.root),
this.root=this.newNode(),e>0&&this.buildTreeRecursive(t,0,e,this.root);
for(var i=0;i<=e-1;i++)t[i].repulsiveForceX=0,t[i].repulsiveForceY=0,
t[i].repulsiveForceZ=0;this.calculateForces()},t.prototype.freeNode=function(t){
t.left&&this.freeNode(t.left),t.right&&this.freeNode(t.right),
t.left=this.freeNodeRoot,this.freeNodeRoot=t},t.prototype.newNode=function(){
var t;return this.freeNodeRoot?(t=this.freeNodeRoot,this.freeNodeRoot=t.left,
t.left=null,t.right=null,t.leafCount=0,t.sizeEstimate=0,t.forceLinkList.length=0):(t=new r,
t.forceLinkList=[],t.leaves=new Array(this.maxLeafCount)),t.repulsiveForceX=0,
t.repulsiveForceY=0,t.repulsiveForceZ=0,t},t.prototype.addForceLink=function(t,e){
t.forceLinkList.push(e)},t.prototype.getMedianX=function(e,i,n){
n-=1;for(var r=(i+n)/2|0;;){if(n<=i)return r;if(n===i+1&&e[i].x>e[n].x)return t._swap(e,i,n),
r;var s=(i+n)/2|0;e[s].x>e[n].x&&t._swap(e,s,n),e[i].x>e[n].x&&t._swap(e,i,n),
e[s].x>e[i].x&&t._swap(e,s,i),t._swap(e,s,i+1);for(var a=i+1,o=n;;){
for(;a+=1,e[i].x>e[a].x;);for(;o-=1,e[o].x>e[i].x;);if(o<a)break;
var l=e[a];e[a]=e[o],e[o]=l}t._swap(e,i,o),o<=r&&(i=a),o>=r&&(n=o-1);
}},t.prototype.getMedianY=function(e,i,n){n-=1;for(var r=(i+n)/2|0;;){
if(n<=i)return r;if(n===i+1)return e[i].y>e[n].y&&t._swap(e,i,n),
r;var s=(i+n)/2|0;e[s].y>e[n].y&&t._swap(e,s,n),e[i].y>e[n].y&&t._swap(e,i,n),
e[s].y>e[i].y&&t._swap(e,s,i),t._swap(e,s,i+1);for(var a=i+1,o=n;;){
for(;a+=1,e[i].y>e[a].y;);for(;o-=1,e[o].y>e[i].y;);if(o<a)break;
var l=e[a];e[a]=e[o],e[o]=l}t._swap(e,i,o),o<=r&&(i=a),o>=r&&(n=o-1);
}},t.prototype.buildTreeRecursive=function(t,e,i,n){for(var r=t[e].x,s=t[e].y,a=r,o=s,l=e+1;l<i;l++){
var h=t[l],u=h.x,c=h.y;u<r&&(r=u),u>a&&(a=u),c<s&&(s=c),c>o&&(o=c);
}n.sizeEstimate=Math.max(a-r,o-s),n.sizeEstimate=n.sizeEstimate*n.sizeEstimate+.1,
n.sizeEstimate*=2;var d=i-e;if(d<=this.maxLeafCount){n.leafCount=d;
for(var u=0,c=0,p=0,f=0,l=0;l<d;l++){var g=t[l+e];u+=g.x,c+=g.y,
p+=g.z,f+=g.r,n.leaves[l]=g}var m=1/d;return n.r=f,n.x=u*m,n.y=c*m,
void(n.z=p*m)}var v;v=a-r>o-s?this.getMedianX(t,e,i):this.getMedianY(t,e,i),
v++;var y=this.newNode();n.left=y,this.buildTreeRecursive(t,e,v,y),
y=this.newNode(),n.right=y,this.buildTreeRecursive(t,v,i,y);var S=1/d;
n.r=n.right.r+n.left.r,n.x=(n.left.x*(v-e)+n.right.x*(i-v))*S,
n.y=(n.left.y*(v-e)+n.right.y*(i-v))*S,n.z=(n.left.z*(v-e)+n.right.z*(i-v))*S;
},t.prototype.calculateForces=function(){var t=new Array(this.nodeCount),e=0,i=0;
for(null!==this.root.left?(t[i]=this.root.left,i++,t[i]=this.root.right,
i++,this.addForceLink(this.root.left,this.root.right)):(t[i]=this.root,
i++);e<i;){var n=t[e];e++;var r=1/n.r;if(null!==n.left){this.processTreeNode(n,n.left),
this.processTreeNode(n,n.right),t[i]=n.left,i++,t[i]=n.right,
i++;var s=n.left.r*r,a=n.repulsiveForceX*s,o=n.repulsiveForceY*s;
n.left.repulsiveForceX+=a,n.left.repulsiveForceY+=o,n.right.repulsiveForceX+=n.repulsiveForceX-a,
n.right.repulsiveForceY+=n.repulsiveForceY-o,this.addForceLink(n.left,n.right);
}else for(var l=0;l<=n.leafCount-1;l++){var h=n.leaves[l];this.processLeafNode(n,h);
var s=h.r*r;h.repulsiveForceX+=n.repulsiveForceX*s,h.repulsiveForceY+=n.repulsiveForceY*s;
for(var u=l+1;u<=n.leafCount-1;u++){var c=n.leaves[u];this.forceBetweenParticles(h,c);
}}n.forceLinkList.length=0}},t.prototype.processTreeNode=function(t,e){
for(var i=t.forceLinkList.length,n=0;n<i;n++){var s=t.forceLinkList[n],a=e.x-s.x,o=e.y-s.y,l=a*a+o*o,h=e.sizeEstimate;
if(s instanceof r&&(h+=s.sizeEstimate),h<l){var u=e.r*s.r/(l*Math.sqrt(l)),c=a*u;
e.repulsiveForceX+=c,s.repulsiveForceX-=c;var d=o*u;e.repulsiveForceY+=d,
s.repulsiveForceY-=d}else s instanceof r?this.addForceLink(s,e):this.addForceLink(e,s);
}},t.prototype.processLeafNode=function(t,e){for(var i=0;i<t.forceLinkList.length;i++){
var n=t.forceLinkList[i];if(n instanceof r){var s=e.x-n.x,a=e.y-n.y,o=s*s+a*a,l=n.sizeEstimate;
if(l<o){var h=e.r*n.r/(o*Math.sqrt(o)),u=s*h;e.repulsiveForceX+=u,
n.repulsiveForceX-=u;var c=a*h;e.repulsiveForceY+=c,n.repulsiveForceY-=c;
}else this.addForceLink(n,e)}else this.forceBetweenParticles(e,n);
}},t.prototype.forceBetweenParticles=function(t,e){var i,n=t.x-e.x,r=t.y-e.y,s=t.z-e.z,a=n*n+r*r+s*s,o=t.r+e.r;
i=a*this.temperature<o?.25*this.temperature*Math.sqrt(this.temperature*o):.25*o*o/(a*Math.sqrt(a)),
t.repulsiveForceX+=n*i,e.repulsiveForceX-=n*i,t.repulsiveForceY+=r*i,
e.repulsiveForceY-=r*i,t.repulsiveForceZ+=s*i,e.repulsiveForceZ-=s*i;
},t}();t.BHTree=s;var a=function(t){function e(e){var i=t.call(this)||this;
return i.animationOrder=600,i.paintOrder=10,i.updateOrder=1600,
i.chart=e,i}return n(e,t),e.ConstructLayout=function(t){switch(t.settings.layout.mode){
case"dynamic":return new y(t);case"radial":return new S(t);case"hierarchy":
return new C(t);case"static":return new x(t);default:return t.error("Unknown layout mode: '"+t.settings.layout.mode+"'"),
new y(t)}},e}(d.ChartElement);t.LayoutBase=a;var o=function(){
function t(t,e){this.strength=t,this.nodes=e}return t.prototype.filterLockedNodes=function(t){
for(var e=new Array(t.length),i=0,n=0;n<t.length;n++)t[n].layerNode.locked&&(e[i++]=t[n]);
return e.length=i,e},t.prototype.filterUnlockedNodes=function(t){
for(var e=new Array(t.length),i=0,n=0;n<t.length;n++)t[n].layerNode.locked||(e[i++]=t[n]);
return e.length=i,e},t}(),l=function(t){function e(e,i){var n=t.call(this,e,i)||this;
return n.clusters=n.calculateClusters(i),n}return n(e,t),e.prototype.calculateClusters=function(t){
for(var e=[],i=new Array(t.length),n=new Object(null),r=0;r<t.length;r++){
var s=t[r],a=s.layerNode.id;if(!n[a]){var o=[s];e.push(o),n[a]=!0;
var l=0,h=0;for(i[h]=s,h++;l<h;){s=i[l],l++;for(var u=0;u<s.edges.length;u++){
var c=s.edges[u],d=c.to,p=d.layerNode.id;n[p]||(n[p]=!0,o.push(d),
i[h]=d,h++)}}}}return e},e}(o),h=function(t){function e(e,i,n,r){
var s=t.call(this,e,i)||this;return s.toCenter=n,s.lockedOnly=r,
s}return n(e,t),e.prototype.recalculate=function(){for(var t=0;t<this.clusters.length;t++)for(var e=this.clusters[t],i=this.lockedOnly?this.toCenter(this.filterLockedNodes(e)):this.toCenter(e),n=0;n<e.length;n++){
var r=e[n];r.layerNode.userLock||(r.gravityForceX=(i.x-r.x)*this.strength,
r.gravityForceY=(i.y-r.y)*this.strength)}},e}(l),u=function(t){
function e(e,i,n,r){var s=t.call(this,e,i)||this;return s.toCenter=n,
s.lockedOnly=r,s}return n(e,t),e.prototype.recalculate=function(){
for(var t=this.lockedOnly?this.toCenter(this.filterLockedNodes(this.nodes)):this.toCenter(this.nodes),e=0;e<this.nodes.length;e++){
var i=this.nodes[e];i.layerNode.userLock||(i.gravityForceX=(t.x-i.x)*this.strength,
i.gravityForceY=(t.y-i.y)*this.strength)}},e}(o),c=function(t){
function e(e,i,n,r,s){var a=t.call(this,e,i)||this;return a.fromCenter=n,
a.toCenter=r,a.lockedOnly=s,a}return n(e,t),e.prototype.recalculate=function(){
for(var t=0;t<this.clusters.length;t++){var e=this.clusters[t],i=this.filterUnlockedNodes(e);
if(!(i.length<1)){var n=this.fromCenter(i),r=void 0;if(this.lockedOnly){
var s=this.filterLockedNodes(e);r=s.length<1?this.toCenter(e):this.toCenter(s);
}else r=this.toCenter(e);if(r.x!==n.x||r.y!==n.y)for(var a=Math.min(10,Math.sqrt(i.length))*this.strength,o=(r.x-n.x)*a,l=(r.y-n.y)*a,h=0;h<e.length;h++){
var u=e[h];u.gravityForceX=o,u.gravityForceY=l}}}},e}(l),p=function(t){
function e(e,i,n,r,s){var a=t.call(this,e,i)||this;return a.fromCenter=n,
a.toCenter=r,a.lockedOnly=s,a}return n(e,t),e.prototype.recalculate=function(){
var t;if(this.lockedOnly){var e=this.filterLockedNodes(this.nodes);
t=e.length<1?this.toCenter(this.nodes):this.toCenter(e)}else t=this.toCenter(this.nodes);
for(var i=0;i<this.clusters.length;i++){var n=this.clusters[i],r=this.filterUnlockedNodes(n);
if(!(r.length<1)){var s=this.fromCenter(r);if(t.x!==s.x||t.y!==s.y)for(var a=Math.min(10,Math.sqrt(r.length))*this.strength,o=(t.x-s.x)*a,l=(t.y-s.y)*a,h=0;h<n.length;h++){
var u=n[h];u.gravityForceX=o,u.gravityForceY=l}}}},e}(l),f=function(t){
function e(){return t.apply(this,arguments)||this}return n(e,t),
e.prototype.recalculate=function(){for(var t=new Object(null),e=new Array(this.nodes.length),i=0,n=0,r=0;r<this.nodes.length;r++){
var s=this.nodes[r];s.layerNode.userLock&&(e[n++]=s,t[s.layerNode.id]=s);
}for(;i<n;)for(var s=e[i++],a=t[s.layerNode.id],r=0;r<s.edges.length;r++){
var o=s.edges[r].to;t[o.layerNode.id]||(t[o.layerNode.id]=a,e[n++]=o);
}for(var l=null,r=0;r<this.nodes.length;r++){var s=this.nodes[r];
if(!s.layerNode.userLock){var h=t[s.layerNode.id];h?(s.gravityForceX=(h.x-s.x)*this.strength,
s.gravityForceY=(h.y-s.y)*this.strength):(null==l&&(l=d.Geometry.findWeightedCenter(this.nodes)),
s.gravityForceX=(l.x-s.x)*this.strength,s.gravityForceY=(l.y-s.y)*this.strength);
}}},e}(o),g=function(){function t(t){this._needsReset=!0,this._calculation=null,
this._chart=t}return t.prototype.reset=function(){this._needsReset=!0;
},t.prototype.guessBestMode=function(t){if(t.length<1)return"node";
var e=new Object(null),i=new Array(t.length),n=0,r=1;for(e[t[0].layerNode.id]=!0,
i[0]=t[0];n<r;)for(var s=i[n++],a=0;a<s.edges.length;a++){var o=s.edges[a].to;
e[o.layerNode.id]||(e[o.layerNode.id]=!0,i[r++]=o)}return r<t.length?"node":"cluster";
},t.prototype.resetCalculation=function(t){var e=this._chart.settings.layout.gravity;
if(this._calculation=null,0!==e.strength){var i=e.from;if("nearestLockedNode"===e.to)return void("node"!==i&&"auto"!==i||(this._calculation=new f(e.strength,t)));
var n="weighted"===e.toCenter?d.Geometry.findWeightedCenter:d.Geometry.circumscribeCircle;
if("auto"===i&&(i=this.guessBestMode(t)),"cluster"===i){var r="weighted"===e.fromCenter?d.Geometry.findWeightedCenter:d.Geometry.circumscribeCircle;
"cluster"===e.to?this._calculation=new c(e.strength,t,r,n,(!1)):"clusterLockedNodes"===e.to?this._calculation=new c(e.strength,t,r,n,(!0)):"graph"===e.to?this._calculation=new p(e.strength,t,r,n,(!1)):"graphLockedNodes"===e.to&&(this._calculation=new p(e.strength,t,r,n,(!0)));
}else"node"===i&&("cluster"===e.to?this._calculation=new h(e.strength,t,n,(!1)):"clusterLockedNodes"===e.to?this._calculation=new h(e.strength,t,n,(!0)):"graph"===e.to?this._calculation=new u(e.strength,t,n,(!1)):"graphLockedNodes"===e.to&&(this._calculation=new u(e.strength,t,n,(!0))));
}},t.prototype.recalculate=function(t){t.length<2||(this._needsReset&&(this.resetCalculation(t),
this._needsReset=!1),this._calculation&&this._calculation.recalculate());
},t}();t.Gravity=g;var m=function(){function t(t,e,i){this.pair=null,
this.K=null,this.len=null,this.strength=null,this.visibility=null,
this.to=t,this.direction=e,this.links=i}return t}(),v=function(){
function t(){this.layerNode=null,this.x=0,this.y=0,this.z=0,this.r=1,
this.zattr=1,this.repulsiveForceX=0,this.repulsiveForceY=0,this.repulsiveForceZ=0,
this.gravityForceX=0,this.gravityForceY=0,this.forceX=null,this.forceY=null,
this.forceZ=null,this.forceSum=null,this.oldForceX=null,this.oldForceY=null,
this.oldForceZ=null,this.locked=!1,this.offsetX=0,this.offsetY=0,
this.minr=0,this.fsum=0,this.edges=[]}return t}(),y=function(t){
function e(e){var i=t.call(this,e)||this;return i.enableDebugState=!1,
i.debugState=[],i.nodeRepulsionFactor=15,i.linkForceFactor=.2,
i.nodeDegreeModifier=1,i.forceReductionFactor=1,i.random=new d.Random(1),
i.nodeCount=0,i.nodes=[],i.edges=[],i.nodesAspect=1,i.idToNode={},
i.temperature=0,i.unitTemperature=0,i.randomLayoutRadius=0,i.zAxisAttraction=1,
i.repulsiveForceTree=new s,i.aspectRatio=null,i.idleSince=0,i.noMovementSince=0,
i.layoutMovement=0,i.gravity=null,i.gravity=new g(e),i}return n(e,t),
e.prototype.updateGraph=function(t,e,i){(i||t.length!==this.nodeCount)&&(this.rebuildGraph(t,e),
i=!0);for(var n=0;n<this.edges.length;n++){for(var r=this.edges[n],s=r.links,a=0;a<s.length;a++){
var o=s[a],l=o.targetStrength,h=o.targetLength,u=o.visibility;
if(o.added){var c=o.from.links.length>1&&o.to.links.length>1,d=c||o.removed?.2:l;
h=.2+(h-.2)*u,l=l*u+d*(1-u)}0===a?(r.strength=l,r.len=h,r.visibility=u):(r.strength=Math.max(l,r.strength),
r.len=Math.max(h,r.len),r.visibility=Math.max(u,r.visibility));
}r.pair.strength=r.strength,r.pair.len=r.len,r.pair.visibility=r.visibility,
r.K=r.pair.K=0}for(var p=this.chart.settings.layout.nodeSpacing/2,n=0;n<t.length;n++){
var f=this.nodes[n],g=f.layerNode,m=g.outerBounds.w(),v=g.outerBounds.h();
f.offsetX=g.outerBounds.x0+g.outerBounds.x1,f.offsetY=g.outerBounds.y0+g.outerBounds.y1,
f.x=g.x+f.offsetX,f.y=g.y+f.offsetY,f.zattr=g.visibility,f.locked=g.locked,
f.forceX=0,f.forceY=0,f.forceZ=0,f.forceSum=0;for(var y=0,S=0;S<f.edges.length;S++){
var b=f.edges[S];y+=b.to.edges.length*b.visibility}var C=Math.sqrt(y);
f.r=.5*Math.max(1,m)+p,f.minr=Math.max(1,(v+.5*m)/3)+p,C>4&&(f.r+=(C-4)*f.r/4*this.nodeDegreeModifier,
f.minr+=(C-4)*f.minr/4*this.nodeDegreeModifier)}for(var x=0,w=0,L=0,n=0;n<this.nodes.length;n++){
for(var f=this.nodes[n],T=0,a=0;a<f.edges.length;a++){var b=f.edges[a],k=b.to;
if(!(f.locked&&k.locked||f===k)){L++;var A=f.minr+k.minr;b.len>0?(b.len=Math.max(1,A*b.len),
b.K=30*Math.min(20,b.strength)/b.len,T+=b.K,x+=b.len):(b.K=b.strength,
T+=b.K,x+=A)}}f.fsum=T,w+=f.r*f.r}L>0?(this.randomLayoutRadius=Math.max(1,x/10),
this.unitTemperature=x/(50*L)):(this.randomLayoutRadius=Math.max(1,Math.sqrt(w)),
this.unitTemperature=1),i&&this.saveDebugState("updateGraph: Graph rebuilt.");
},e.prototype.rebuildGraph=function(t,e){var i=this.idToNode;this.nodeCount=t.length,
this.nodes=new Array(this.nodeCount),this.idToNode={};for(var n=0,r=0,s=0;s<t.length;s++){
var a=t[s],o=a.id,l=new v;l.layerNode=a;var h=a.outerBounds.w(),u=a.outerBounds.h();
if(u>0&&(n+=u/h,r+=1),this.idToNode[o]=l,this.nodes[s]=l,d.Helpers.hasProperty(i,o)){
var c=i[o];l.z=c.z,l.oldForceX=c.oldForceX,l.oldForceY=c.oldForceY,
l.oldForceZ=c.oldForceZ}else l.oldForceX=0,l.oldForceY=0,l.oldForceZ=0;
}r>0?this.nodesAspect=Math.max(.3,n/r):this.nodesAspect=1;var p={},f={
U:"D",null:null,D:"U",L:"R",R:"L"};this.edges=[];for(var s=0;s<e.length;s++){
var g=e[s],y=g.multiId;if(d.Helpers.hasProperty(p,y))p[y].push(g);else{
var S=this.idToNode[g.from.id],b=this.idToNode[g.to.id],C=[g],x=new m(b,g.direction,C),w=new m(S,f[g.direction],C);
x.pair=w,w.pair=x,p[y]=C,S.edges.push(x),b.edges.push(w),this.edges.push(x);
}}this.gravity.reset()},e.prototype.saveDebugState=function(t){
this.enableDebugState&&this.debugState.push({extra:{comment:t
},nodes:this.nodes.map(function(t){return{id:t.layerNode.id,x:t.x-t.offsetX,
y:t.y-t.offsetY,style:t.layerNode.data.style,extra:t.layerNode.data.extra,
loaded:!0}}),links:this.edges.map(function(t){return{from:t.to.layerNode.id,
to:t.pair.to.layerNode.id}})})},e.prototype.globalLayout=function(t,e){
if(!(this.nodeCount<=0)){if(e){if(1===this.nodeCount)return this.nodes[0].locked||(this.nodes[0].layerNode.x=this.nodes[0].layerNode.y=0),
void this.saveDebugState("globalLayout: resetPositions");this.initialRandomLayout(),
this.saveDebugState("globalLayout: resetPositions")}for(var i=0,n=0;n<this.nodes.length;n++){
var r=this.nodes[n];r.locked||i++}var s=Math.floor(Math.sqrt(i)+10),a=2*s;
this.forceReductionFactor=1,this.temperature=(2*Math.sqrt(i)+20)*this.unitTemperature,
this.zAxisAttraction=.02;for(var o=d.Helpers.performanceNow(),l=3;this.temperature>this.unitTemperature&&(a--<=0&&(a=3*s/l++,
this.temperature=this.temperature/1.5-.5,this.temperature<20*this.unitTemperature&&(this.zAxisAttraction=1.5*this.zAxisAttraction+.02)),
this.randomnodesForRepulsion(),this.repulsiveForceTree.temperature=1.75*this.zAxisAttraction,
this.repulsiveForceTree.buildTree(this.nodes),this.moveNodesGlobal(),
this.saveDebugState("globalLayout: iteration"),!(d.Helpers.performanceNow()>o+t)););
e&&(this.centerNodes(),this.saveDebugState("globalLayout: centerNodes")),
this.storeNodes()}},e.prototype.initialRandomLayout=function(){
for(var t=this.nodeCount,e=new Array(t),i=0;i<=t-1;i++)e[i]=this.nodes[i];
for(var i=0;i<t;i++){var n=Math.floor(this.random.get()*(t-i))+i,r=e[i];
e[i]=e[n],e[n]=r}for(var s=this.randomLayoutRadius,a=2*Math.PI/this.nodeCount,o=0;o<t;o++){
var l=e[o];if(l.oldForceX=0,l.oldForceY=0,l.oldForceZ=0,l.z=this.random.get()-.5,
!l.locked){var h=s+l.r;l.x=h*Math.cos(o*a),l.y=h*Math.sin(o*a);
}}},e.prototype.timedLayout=function(t){if(!(this.nodeCount<=1)&&t>0){
var e=0;t<.1?(e=2,this.forceReductionFactor=Math.max(.002,Math.min(this.forceReductionFactor,10*t))):e=Math.min(6,Math.round(2+10*t)),
this.zAxisAttraction=this.nodeRepulsionFactor/28,this.temperature=this.unitTemperature;
for(var i=0;i<=e-1;i++)this.randomnodesForRepulsion(),this.applyAspect(1/this.nodesAspect),
this.repulsiveForceTree.temperature=1.75*this.zAxisAttraction,
this.repulsiveForceTree.buildTree(this.nodes),this.applyAspect(this.nodesAspect),
this.moveNodesIncremental(),this.saveDebugState("timedLayout: iteration");
this.storeNodes()}},e.prototype.prepareAspectRatio=function(t){
for(var e,i,n,r,s,a,o,l=this.nodes,h=l[0].x,u=l[0].y,c=h,d=u,p=!0,f=1;f<=this.nodeCount-1;f++)h=Math.min(h,l[f].x),
c=Math.max(c,l[f].x),u=Math.min(u,l[f].y),d=Math.max(d,l[f].y);
var g=(h+c)/2,m=(u+d)/2,v=c-h,y=d-u;return 0===v||0===y?p=!1:(e=Math.sqrt(this.aspectRatio),
i=Math.sqrt(v*y),n=i*e/v,r=i/e/y,n=t*n+(1-t),r=t*r+(1-t),s=g-g*n,
a=m-m*r,o=1/this.forceReductionFactor),{scaleX:n,incX:s,scaleY:r,
incY:a,invForce:o,aspectRatioPrepared:p}},e.prototype.updateAspectRatioNode=function(t,e){
e.forceX+=(e.x*(t.scaleX-1)+t.incX)*t.invForce,e.forceY+=(e.y*(t.scaleY-1)+t.incY)*t.invForce;
},e.prototype.updateAspectRatio=function(t){for(var e=this.prepareAspectRatio(t),i=this.nodes,n=0;n<=this.nodeCount-1;n++)this.updateAspectRatioNode(e,i[n]);
},e.prototype.moveNodesGlobal=function(){this.gravity.recalculate(this.nodes);
var t,e=.5*this.temperature,i=this.forceReductionFactor;this.aspectRatio&&(t=this.prepareAspectRatio(.005),
t.aspectRatioPrepared||(this.aspectRatio=null));for(var n=0;n<=this.nodeCount-1;n++){
var r=this.nodes[n];if(!r.locked){this.calculateForce(r,.5),this.aspectRatio&&this.updateAspectRatioNode(t,r);
var s=r.oldForceX=r.forceX,a=r.oldForceY=r.forceY,o=r.oldForceZ=r.forceZ,l=r.forceSum;
s*=l,a*=l,o*=l;var h=s*s+a*a+o*o;h<this.temperature*this.temperature&&h>.001&&(h=this.temperature/Math.sqrt(h),
s*=h,a*=h,o*=h),r.x+=s*i+(this.random.get()-.5)*e,r.y+=a*i+(this.random.get()-.5)*e,
r.z+=o*i+(this.random.get()-.5)*e}}},e.prototype.moveNodesIncremental=function(){
this.gravity.recalculate(this.nodes);for(var t=0;t<=this.nodeCount-1;t++)this.nodes[t].locked||this.calculateForce(this.nodes[t],0);
if(this.aspectRatio){var e=Math.min(.4,.5/Math.pow(this.nodeCount,.5));
this.updateAspectRatio(e)}for(var i=0,n=0,r=0,s=0,a=new Array(this.nodeCount),t=0;t<=this.nodeCount-1;t++){
var o=this.nodes[t];if(!o.locked){var l=o.forceX,h=o.forceY,u=o.forceZ,c=o.forceSum,d=l*l+h*h+u*u;
if(d*c*c>this.unitTemperature*this.unitTemperature*.05*.05){s+=d;
var p=o.oldForceX*l+o.oldForceY*h+o.oldForceZ*u;r+=p,p>0?n+=p:i-=p;
}else a[t]=!0}}this.layoutMovement=(n-5*i)/this.nodeCount,r>1e-7?this.forceReductionFactor*=1+.4/1.618033989:r<-1e-7&&(this.forceReductionFactor/=1.4),
this.forceReductionFactor=Math.min(1,this.forceReductionFactor),
this.forceReductionFactor=Math.max(.002,this.forceReductionFactor);
for(var t=0;t<=this.nodeCount-1;t++){var f=this.nodes[t];if(!f.locked&&!a[t]){
var c=f.forceSum*this.forceReductionFactor;f.x+=f.forceX*c,f.y+=f.forceY*c,
f.z+=f.forceZ*c}f.oldForceX=f.forceX,f.oldForceY=f.forceY,f.oldForceZ=f.forceZ;
}},e.prototype.applyAspect=function(t){for(var e=0;e<this.nodes.length;e++){
var i=this.nodes[e];i.y*=t}},e.prototype.calculateForce=function(t,e){
for(var i=t.oldForceX*e,n=t.oldForceY*e,r=t.oldForceZ*e,s=0;s<t.edges.length;s++){
var a=t.edges[s],o=a.to,l=a.len,h=t.x-t.offsetX-o.x+o.offsetX,u=t.y-t.offsetY-o.y+o.offsetY,c=t.z-o.z;
a.direction&&("U"===a.direction?(u-=l,l=0):"D"===a.direction?(u+=l,
l=0):"L"===a.direction?(h-=l,l=0):"R"===a.direction&&(h+=l,l=0));
var d=Math.sqrt(h*h+u*u+c*c);d<.01&&(d=.01);var p=(l-d)*a.K/d*this.linkForceFactor;
i+=p*h,n+=p*u,r+=p*c}i+=t.repulsiveForceX*this.nodeRepulsionFactor,
n+=t.repulsiveForceY*this.nodeRepulsionFactor,r+=t.repulsiveForceZ*this.nodeRepulsionFactor;
var f=t.zattr*this.zAxisAttraction;if(r-=t.z*f,i+=t.gravityForceX,
n+=t.gravityForceY,isNaN(i))throw"Internal error: Nan in layout";
t.forceX=i,t.forceY=n,t.forceZ=r,t.fsum+f!==0&&(t.forceSum=1/(t.fsum+f));
},e.prototype.storeNodes=function(){for(var t=0;t<=this.nodeCount-1;t++){
var e=this.nodes[t];e.locked||(e.layerNode.x=e.x-e.offsetX,e.layerNode.y=e.y-e.offsetY);
}},e.prototype.centerNodes=function(){for(var t=new d.Random(243178931),e=this.nodes,i=e[0].x,n=i,r=e[0].y,s=r,a=1;a<=this.nodeCount-1;a++)i=Math.min(i,e[a].x),
n=Math.max(n,e[a].x),r=Math.min(r,e[a].y),s=Math.max(s,e[a].y);
for(var o=(i+n)/2,l=(r+s)/2,a=0;a<=this.nodeCount-1;a++){var h=e[a];
if(h.x-=o,h.y-=l,!h.locked){var u=.3*h.r;h.x+=t.get()*u,h.y+=t.get()*u;
}}},e.prototype.randomnodesForRepulsion=function(){for(var t=0;t<=this.nodeCount-1;t++){
var e=Math.floor(this.random.get()*(this.nodeCount-t))+t,i=this.nodes[t];
this.nodes[t]=this.nodes[e],this.nodes[e]=i}},e.prototype.onSceneChange=function(t){
var e=t.changes.settingsChanges;if(e&&e.layout||t.changes.navigation||this.chart.layer.hasTopologyChanges())for(var i=this.chart.layer,n=i.links(),r=0;r<n.length;r++){
var s=n[r];s.background&&(s.background=!1,i.touchLink(s))}e&&e.layout&&this.gravity.reset();
},e.prototype.doAnimations=function(t){var e=this.chart.settings.layout,i=this.chart.layer,n=e.layoutFreezeTimeout,r=e.layoutFreezeMinTimeout,s=i.hasTopologyChanges(),a=t.dtime;
(0===this.idleSince||t.changes.dynamicLayout||s||t.changes.coordinates||t.changes.layout||t.changes.bounds)&&(this.idleSince=t.timeStamp,
this.noMovementSince=0);var o=1;if(!s){var l=t.timeStamp-this.idleSince;
if(this.layoutMovement<e.advanced.adaptiveFreezeTreshold)if(0!==this.noMovementSince){
var h=t.timeStamp-this.noMovementSince;o=Math.min((r-h)/r,o)}else this.noMovementSince=t.timeStamp;
o=Math.min((n-l)/n,o)}o>0&&(this.doForceLayout(a*o,!1),t.animating=!0,
t.changes.position=!0)},e.prototype.placeNewNodes=function(){
for(var t={},e=this.chart.layer,i=!1,n=0,r=e.nodes();n<r.length;n++){
var s=r[n];null!==s.x&&null!==s.y||(t[s.id]=!0)}for(var n=0,r=e.nodes();n<r.length;n++){
var s=r[n],a=1;if(t.hasOwnProperty(s.id)){var o=0,l=0,h=0;a=1;
for(var u=void 0,c=0;c<s.links.length;c++){var d=s.links[c],p=d.otherEnd(s);
t.hasOwnProperty(p.id)||(u=p,l+=p.x,h+=p.y,o+=1)}var f=void 0,g=void 0;
if(o>1)f=l/o,g=h/o,a=.5;else if(1===o){for(var m=0,v=0,y=0,c=0;c<u.links.length;c++){
var d=u.links[c],S=d.otherEnd(u);S===s||t.hasOwnProperty(S.id)||(v+=S.x-u.x,
y+=S.y-u.y,m+=1)}if(m>0){var b=Math.sqrt(v*v+y*y);if(b>0){var C=1/(b*m);
v*=C,y*=C,f=u.x-v*u.hHeight*1.2,g=u.y-y*u.hHeight*1.2,a=.2}else f=u.x,
g=u.y}else i=!0,f=u.x,g=u.y}else i=!0,f=0,g=0;s.x=f+(this.random.get()-.5)*a*(s.hHeight+1),
s.y=g+(this.random.get()-.5)*a*(s.hHeight+1)}}return{newNodes:t,
majorChanges:i}},e.prototype.doForceLayout=function(t,e){var i,n=this.chart.scene,r=this.chart.layer,s=this.chart.settings.layout,a=r.nodes(),o=r.links(),l={},h=!1;
if(e){this.random=new d.Random(1);for(var u=0;u<a.length;u++){
var c=a[u];l[c.id]=!0,c.x=0,c.y=0,c.userLock=!1}i=!0,h=!0}else if(r.hasTopologyChanges()){
i=!0,this.random=new d.Random(1);var p=this.placeNewNodes();l=p.newNodes,
h=p.majorChanges}var f=(n.width+1)/(n.height+1);f>0||(f=null);
var g=n.settings.layout.aspectRatio?f:null;this.aspectRatio=g;
for(var m=!1,u=0;u<a.length;u++){var c=a[u];c.locked=c.userLock||c.locks>0,
m=m||c.locked}if(d.Helpers.hasProperties(l)){for(var u=0;u<a.length;u++){
var c=a[u];c.locked=c.locked||!d.Helpers.hasProperty(l,c.id)}
this.updateGraph(a,o,i),h||n.settings.layout.globalLayoutOnChanges?(this.aspectRatio=f,
this.globalLayout(h?s.initialLayoutMaxTime:s.incrementalLayoutMaxTime,h&&!m)):this.timedLayout(.001*t);
}else this.updateGraph(a,o,i),this.timedLayout(.001*t)},e.prototype.resetLayout=function(){
this.doForceLayout(1,!0),this.idleSince=0},e}(a);t.TimedSpringEmbedder=y;
var S=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.twoCircles=!1,e}return n(e,t),e.getNodeSize=function(t){
return Math.max(t.hHeight,t.hWidth)*t.visibility*2},e.getNodesBounds=function(t){
if(t.length<1)return new d.Rect(0,0,0,0);for(var e=t[0],i=new d.Rect(e.x-e.hWidth,e.y-e.hHeight,e.x+e.hWidth,e.y+e.hHeight),n=1;n<t.length;n++)e=t[n],
i.addBounds(e.x-e.hWidth,e.y-e.hHeight,e.x+e.hWidth,e.y+e.hHeight);
return i},e.prototype.onSceneChange=function(t){var e=t.changes.settingsChanges;
(e&&e.layout||t.changes.navigation||this.chart.layer.hasTopologyChanges()||t.changes.highlight)&&this.updateBackgroundLinks(this.chart.getLastFocusNode(),!1);
},e.prototype.doAnimations=function(t){var e=t.changes.settingsChanges,i=null!=e&&null!=e.layout||t.changes.navigation||this.chart.layer.hasTopologyChanges(),n=t.changes.position||t.changes.dynamicLayout;
(i||n)&&(this.performLayout(i),t.changes.position=!0)},e.prototype.resetLayout=function(){
for(var t=this.chart.layer.nodes(),e=0;e<t.length;e++)t[e].userLock=!1;
this.performLayout(!0)},e.prototype.performLayout=function(t){
var i=[];this.visitedNodes={},this.subnodes={},this.minAngle={},
this.radiuses=[];var n=this.chart.getLastFocusNode();if(n){i.push(this.layoutCircle(n,t));
for(var r=this.chart.layer.nodes(),s=0;s<r.length;s++){var a=r[s];
d.Helpers.hasProperty(this.visitedNodes,a.id)||i.push(this.layoutCircle(a,t));
}if(i.length>1)for(var o=2*this.chart.settings.layout.nodeSpacing,l=e.getNodesBounds(i[0]).x1+o,s=1;s<i.length;s++){
var h=i[s];if(!(h.length<1)){var u=e.getNodesBounds(h);l-=u.x0;
for(var c=0;c<h.length;c++)h[c].x+=l;l+=u.x1+o}}this.updateBackgroundLinks(n,!0)&&this.chart.events.notifySceneChanges({
highlight:!0})}},e.prototype.layoutCircle=function(t,e){var i=[];
return this.visitedNodes[t.id]=!0,this.computeMaxRadius(t,e),
this.placeNodeRec(t,0,.5*-Math.PI,2*Math.PI,i),i},e.prototype.updateBackgroundLinks=function(t,e){
if(t){if(this.visitedNodes={},this.updateBackgroudLinkCircle(t,e)&&e)return!0;
for(var i=this.chart.layer.nodes(),n=0;n<i.length;n++){var r=i[n];
if(!d.Helpers.hasProperty(this.visitedNodes,r.id)&&this.updateBackgroudLinkCircle(r,e)&&e)return!0;
}return!1}},e.prototype.updateBackgroudLinkCircle=function(t,e){
var i=[t];this.visitedNodes[t.id]=!0;for(var n={},r=this.chart.layer;i.length>0;){
for(var s=[],a=0;a<i.length;a++)for(var o=i[a],l=0;l<o.links.length;l++){
var h=o.links[l];if(!d.Helpers.hasProperty(n,h.id)){n[h.id]=!0;
var u=h.otherEnd(o),c=!0;if(d.Helpers.hasProperty(this.visitedNodes,u.id)||(this.visitedNodes[u.id]=!0,
s.push(u),c=!1),h.background!==c){if(e)return!0;h.background=c,
r.touchLink(h)}}}i=s}return!1},e.prototype.getSubnodes=function(t){
var e=t.id;if(this.subnodes[e])return this.subnodes[e];for(var i=[],n=0;n<t.links.length;n++){
var r=t.links[n],s=r.otherEnd(t);d.Helpers.hasProperty(this.visitedNodes,s.id)||(i.push(s),
this.visitedNodes[s.id]=!0)}return this.subnodes[e]=i,i},e.prototype.computeMaxRadius=function(t,i){
var n=this.chart.settings.layout.nodeSpacing,r=0;this.radiuses[0]=r;
for(var s=1,a=[t];a.length>0;){var o=void 0;if(1===s&&this.chart.settings.layout.twoRingRadialLayout){
t=a[0];var l=e.getNodeSize(t);o=this.getSubnodes(t);for(var h=Math.floor(o.length/2),u=new Array(h),c=new Array(o.length-h),d=0;d<o.length;d++)(d%2===0?c:u)[Math.floor(d/2)]=o[d];
for(var p=0,f=0,d=0;d<u.length;d++){var g=u[d],m=e.getNodeSize(g);
p=Math.max(p,m),f+=n+m}for(var v=0,y=0,d=0;d<c.length;d++){var g=c[d],m=e.getNodeSize(g);
v=Math.max(v,m),y+=n+m}var S=Math.max(.5*(Math.max(p,v)+l)+n,(f+y)/(2*Math.PI)),b=Math.max(.5*(p+l)+n,f/(2*Math.PI)),C=Math.max(b+.5*(v+p),y/(2*Math.PI));
i&&(this.twoCircles=C<S),this.twoCircles?(this.radiuses[1]=b,
this.radiuses[2]=C):(this.radiuses[1]=S,this.radiuses[2]=S),r=this.radiuses[2],
s=3}else{var x=0,w=0;o=[];for(var L=0;L<a.length;L++){t=a[L];for(var l=e.getNodeSize(t),T=0,k=this.getSubnodes(t);T<k.length;T++){
var g=k[T],m=e.getNodeSize(g);x=Math.max(x,m+l),w+=n+m,o.push(g);
}}var A=r+.5*x+n,M=w/(2*Math.PI),P=Math.max(A,M);this.radiuses[s]=P,
r=P,s+=1}a=o}},e.prototype.computeMinAngle=function(t,i){var n=t.id;
if(d.Helpers.hasProperty(this.minAngle,n))return this.minAngle[n];
for(var r=this.chart.settings.layout.nodeSpacing,s=this.radiuses[i],a=e.getNodeSize(t),o=(a+r)/s,l=0,h=this.chart.settings.layout.twoRingRadialLayout&&1===i?3:i+1,u=0,c=this.getSubnodes(t);u<c.length;u++){
var p=c[u];l+=this.computeMinAngle(p,h)}return o=Math.max(o,l),
this.minAngle[n]=o,o},e.prototype.placeNodeRec=function(t,e,i,n,r){
var s=i+.5*n,a=this.radiuses[e];t.userLock||(t.x=a*Math.cos(s),
t.y=a*Math.sin(s),r.push(t));var o=this.getSubnodes(t),l=e+1,h=!1;
if(this.chart.settings.layout.twoRingRadialLayout&&(0===e?h=!0:1===e&&(l=3)),
o.length>0){for(var u=0,c=0;c<o.length;c++){var d=o[c];u+=this.computeMinAngle(d,h?c%2===0?2:1:l);
}for(var p=n/u,f=i,c=0;c<o.length;c++){var d=o[c];h&&(l=c%2===0?2:1);
var g=this.computeMinAngle(d,l)*p;this.placeNodeRec(d,l,f,g,r),
f+=g}}},e}(a);t.RadialLayout=S;var b=function(){function t(t,e){
this.children=[],this.parent=null,this.node=t,this.level=e,this.reset();
}return t.prototype.reset=function(){this.hWidth=this.node.hWidth,
this.origX=this.node.x,this.shift=0},t}(),C=function(t){function r(){
var e=t.apply(this,arguments)||this;return e.forest=null,e}return n(r,t),
r.prototype.wrapNodes=function(){for(var t=d.Helpers.clone(this.chart.layer.idToNode),e=[];;){
var i=null;for(var n in t)if(d.Helpers.hasProperty(t,n)){i=t[n],
delete t[n];break}if(null==i)return e;var r={},s=[new b(i,0)],a=0,o=0;
r[i.id]=s[0];for(var l=0;l<s.length;l++)for(var h=s[l],u=h.node,c=0;c<u.links.length;c++){
var p=u.links[c];if(p.to===u){var f=void 0;d.Helpers.hasProperty(r,p.from.id)?f=r[p.from.id]:(f=new b(p.from,h.level-1),
a===h.level&&a--,r[p.from.id]=f,s.push(f)),null===h.parent&&h.level===f.level+1&&(h.parent=f,
f.children.push(h))}else{var f=void 0;d.Helpers.hasProperty(r,p.to.id)?f=r[p.to.id]:(f=new b(p.to,h.level+1),
o===h.level&&o++,r[p.to.id]=f,s.push(f)),null===f.parent&&f.level===h.level+1&&(h.children.push(f),
f.parent=h)}}for(var g=new Array(o-a+1),l=0;l<g.length;l++)g[l]=[];
for(var l=0;l<s.length;l++){var h=s[l];delete t[h.node.id],h.level-=a,
null===h.parent&&(h.levelIndex=g[h.level].length,g[h.level].push(h));
}for(var m=0;m<g.length;m++)for(var v=g[m],y=0;y<v.length;y++)for(var S=v[y],C=0;C<S.children.length;C++){
var x=m+1,w=S.children[C];w.level=x,w.levelIndex=g[x].length,
g[x].push(w)}e.push({levels:g,levelStarts:new Array(g.length),
levelEnds:new Array(g.length)})}},r.prototype.layoutNodes=function(t){
var n=t.levels,r=this.chart.settings.layout,s=r.nodeSpacing,a=null===r.groupSpacing?2*s:r.groupSpacing,o=null===r.rowSpacing?s:r.rowSpacing;
i(n[n.length-1],null,null,s,a);for(var l=n.length-2;l>=0;l--){
for(var h=n[l],u=null,c=void 0,d=0;d<h.length;d++)if(h[d].children.length>0){
c=h[d];break}if(c.node.x=e(c),c.levelIndex>0){i(h,null,c,s,a);
var p=h[c.levelIndex-1],f=p.node.x+p.hWidth+s+c.hWidth;f>c.node.x&&(c.shift=f-c.node.x,
c.node.x+=c.shift)}for(;;){u=c,c=null;for(var d=u.levelIndex+1;d<h.length;d++)if(h[d].children.length>0){
c=h[d];break}if(null===c)break;c.node.x=e(c)+u.shift,c.shift=u.shift;
for(var g=0,m=0,d=u.levelIndex+1;d<c.levelIndex;d++)g+=2*h[d].hWidth,
null!=h[d].parent&&h[d].parent===h[d-1].parent||m++;null!=c.parent&&c.parent===h[c.levelIndex-1].parent||m++;
var v=c.levelIndex-u.levelIndex,y=u.hWidth+c.hWidth+g+(v-m)*s+m*a,S=c.node.x-u.node.x;
if(y>S){var b=y-S;c.node.x+=b,c.shift+=b,S=y,i(h,u,c,s,a)}else if(0===m){
var C=(S-u.hWidth-c.hWidth-g)/(c.levelIndex-u.levelIndex);i(h,u,c,C,0);
}else{var x=(S-u.hWidth-c.hWidth-g-(v-m)*s)/m;i(h,u,c,s,x)}}i(h,u,null,s,a);
}for(var w=0,l=0;l<n.length;l++){for(var h=n[l],L=0,d=0;d<h.length;d++)L=Math.max(L,2*h[d].node.hHeight);
w+=L/2,t.levelStarts[l]=h[0].node.x-h[0].hWidth,t.levelEnds[l]=h[h.length-1].node.x+h[h.length-1].hWidth;
for(var d=0;d<h.length;d++){var T=h[d];T.node.userLock?T.node.x=T.origX:T.node.y=w;
for(var k=0;k<T.children.length;k++){var A=T.children[k];A.node.x+=T.shift,
A.shift+=T.shift}}w+=L/2+o}},r.prototype.layoutTrees=function(t){
var e=this.chart.settings.layout;t.sort(function(t,e){var i=e.levels.length-t.levels.length;
return 0!==i?i:t.levels[0][0].node.id.localeCompare(e.levels[0][0].node.id);
});for(var i=t[0].levelEnds.slice(),n=null==e.groupSpacing?4*e.nodeSpacing:2*e.groupSpacing,r=1;r<t.length;r++){
for(var s=t[r],a=0,o=0;o<s.levels.length;o++){var l=i[o]+n,h=a+s.levelStarts[o];
h<l&&(a+=l-h)}for(var o=0;o<s.levels.length;o++){for(var u=s.levels[o],c=0;c<u.length;c++){
var d=u[c];d.node.userLock||(d.node.x+=a)}i[o]=a+s.levelEnds[o];
}}var p=(e.rotation||0)%360;if(0!==p){p=p*Math.PI/180;for(var f=Math.sin(p),g=Math.cos(p),m=this.chart.layer.nodes(),r=0;r<m.length;r++){
var d=m[r];if(!d.userLock){var c=d.x,o=d.y;d.x=c*g-o*f,d.y=c*f+o*g;
}}}},r.prototype.performLayout=function(t){if(t||null==this.forest)this.forest=this.wrapNodes();else for(var e=0;e<this.forest.length;e++)for(var i=this.forest[e],n=0;n<i.levels.length;n++)for(var r=i.levels[n],s=0;s<r.length;s++)r[s].reset();
if(!(this.forest.length<1)){for(var e=0;e<this.forest.length;e++)this.layoutNodes(this.forest[e]);
this.layoutTrees(this.forest),this.setBackgroundFlag(!0)&&this.chart.events.notifySceneChanges({
highlight:!0})}},r.prototype.setBackgroundFlag=function(t){for(var e=d.Helpers.clone(this.chart.layer.idToNode);;){
var i=null;for(var n in e)if(d.Helpers.hasProperty(e,n)){i=e[n],
delete e[n];break}if(null==i)return!1;var r={},s={},a=[{node:i,
level:0,hasParent:!1}],o=this.chart.layer;r[i.id]=a[0];for(var l=0;l<a.length;l++)for(var h=a[l],u=h.node,c=0;c<u.links.length;c++){
var p=u.links[c];if(!d.Helpers.hasProperty(s,p.id)){s[p.id]=!0;
var f=!0;if(p.to===u){var g=void 0;d.Helpers.hasProperty(r,p.from.id)?g=r[p.from.id]:(g={
node:p.from,level:h.level-1,hasParent:!1},delete e[g.node.id],
r[p.from.id]=g,a.push(g)),h.hasParent||h.level!==g.level+1||(h.hasParent=!0,
f=!1)}else{var g=void 0;d.Helpers.hasProperty(r,p.to.id)?g=r[p.to.id]:(g={
node:p.to,level:h.level+1,hasParent:!1},delete e[g.node.id],r[p.to.id]=g,
a.push(g)),g.hasParent||g.level!==h.level+1||(g.hasParent=!0,
f=!1)}if(p.background!==f){if(t)return!0;p.background=f,o.touchLink(p);
}}}}},r.prototype.onSceneChange=function(t){var e=t.changes.settingsChanges;
(e&&e.layout||t.changes.navigation||this.chart.layer.hasTopologyChanges()||t.changes.highlight)&&this.setBackgroundFlag(!1);
},r.prototype.doAnimations=function(t){var e=t.changes.settingsChanges,i=this.chart.layer.hasTopologyChanges();
(e&&e.layout||t.changes.navigation||i||t.changes.position||t.changes.dynamicLayout)&&(this.performLayout(i),
t.changes.position=!0)},r.prototype.resetLayout=function(){for(var t=this.chart.layer.nodes(),e=0;e<t.length;e++)t[e].userLock=!1;
this.performLayout(!1)},r}(a);t.HierarchyLayout=C;var x=function(t){
function e(){return t.apply(this,arguments)||this}return n(e,t),
e.prototype.resetLayout=function(){for(var t=this.chart.layer.nodes(),e=0;e<t.length;e++){
var i=t[e],n=i.data;d.Helpers.isNumber(n.x)&&(i.x=n.x),d.Helpers.isNumber(n.y)&&(i.y=n.y),
i.userLock=!1}},e}(a);t.StaticLayout=x}(r=t.Layouts||(t.Layouts={}));
var k=function(t){function e(e){var i=t.call(this)||this;return i.animationOrder=500,
i.paintOrder=35,i.updateOrder=1800,i.chart=e,i.scene=e.scene,
i.events=e.events,i}return n(e,t),e.prototype.doAnimations=function(t){
var e=this.chart.layer;e.updateStyle(t),e.postprocessStyle(t);
},e.prototype.paintScene=function(t){d.Graphics.pushClip(t,this.scene.x0,this.scene.y0,this.scene.width,this.scene.height);
var e=this.chart.layer;e.setBounds(this.scene.x0,this.scene.y0,this.scene.x0+this.scene.width,this.scene.y0+this.scene.height),
e.paint(t),d.Graphics.popClip(t)},e.prototype.paintLinks=function(t,e,i,n){
this.chart.layer.paintLinksImpl(t,e,i,n)},e.prototype.paintNodes=function(t,e,i,n){
this.chart.layer.paintNodesImpl(t,e,i,n)},e.prototype.findObjectAt=function(t,e,i){
return this.chart.layer.findObjectAt(t,e,i)},e}(d.ChartElement);
t.Renderer=k;var A=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.dataFunction=null,e.preloaded=null,e}return n(e,t),e;
}(u.SettingsData);t.SettingsData=A;var M=function(t){function e(e,i){
var n=t.call(this,e,i)||this;return n.nodes={},n.links={},n.nodeToLinks={},
n.pendingNodes={},n.requestedNodes={},n.pendingAllData=!1,n.requestedAllData=!1,
n.nextLinkId=0,n.hasAllData=!n.hasDataFunc(),n}return n(e,t),
e.otherEnd=function(t,e){return e===t.from?t.to:e===t.to?t.from:null;
},e.multiLinkId=function(t){return t.from<t.to?t.from+d.Helpers.SeparatorChar+t.to:t.to+d.Helpers.SeparatorChar+t.from;
},e.prototype.buildRequest=function(){if(this.pendingAllData)return this.requestedAllData?null:(this.requestedAllData=!0,
{nodes:[]});var t=[];for(var e in this.pendingNodes)if(t.push(e),
delete this.pendingNodes[e],this.requestedNodes[e]=!0,t.length>=this.dataSettings.requestMaxUnits)break;
return 0===t.length?null:{nodes:t}},e.prototype.dataFunc=function(t,e,i){
var n=this.dataSettings;if(n.dataFunction)n.dataFunction(t.nodes||null,e,i);else if(n.url){
var r=[];if(t.nodes){for(var s="",a=0;a<t.nodes.length;a++)s.length&&(s+=","),
s+=encodeURIComponent(t.nodes[a]);r.push(["nodes",s])}d.Data.doRequest(n.url,n,r,e,i);
}else i({error:"Chart configuration does not define data retrieval function"
})},e.prototype.verifyData=function(t,e){d.Helpers.hasProperty(e,"links")||(e.links=[]),
d.Helpers.hasProperty(e,"nodes")||(e.nodes=[]);var i=!0;if(!Array.isArray(e.nodes)){
var n=e.nodes;e.nodes=[];for(var r=Object.keys(n),s=0;s<r.length;s++){
var a=r[s],o=n[a];o.id=a,e.nodes.push(o)}}if(!Array.isArray(e.links)){
var l=e.links;e.links=[];for(var r=Object.keys(l),s=0;s<r.length;s++){
var a=r[s],h=l[a];h.id=a,e.links.push(h)}}for(var u={},c=!t&&!this.hasDataFunc(),s=0;s<e.nodes.length;s++){
var o=e.nodes[s];null==o.id?(o.id=d.Helpers.getIdentifierStr(),
d.Helpers.warn("Data response: `id` property is mandatory for all nodes in the NetChart data object.",null,!0)):o.id=o.id.toString(),
u.hasOwnProperty(o.id)&&d.Helpers.warn('Data response: Multiple nodes with the same ID: "'+o.id+'". Data will be merged.'),
u[o.id]=!0,c?o.loaded=!0:d.Helpers.hasProperty(o,"loaded")?o.loaded=!!o.loaded:(d.Helpers.warn('Data response: Node with ID "'+o.id+'" does not have the "loaded" flag. Assuming "false".'),
o.loaded=!1),d.Helpers.hasProperty(o,"className")&&null!=o.className&&!d.Helpers.isString(o.className)&&(d.Helpers.warn('Data response: Node property "className" must be a string. Node ID: "'+o.id+'".'),
o.className=""+o.className),d.Helpers.hasProperty(o,"error")&&null!=o.error&&!d.Helpers.isString(o.error)&&(d.Helpers.warn('Data response: Node property "error" must be a string. Node ID: "'+o.id+'".'),
o.error=""+o.error),d.Helpers.hasProperty(o,"x")&&null!=o.x&&!d.Helpers.isNumber(o.x)&&(d.Helpers.warn('Data response: Node property "x" must be a number. Node ID: "'+o.id+'".'),
o.x=d.Helpers.tryParseFloat(o.x,null)),d.Helpers.hasProperty(o,"y")&&null!=o.y&&!d.Helpers.isNumber(o.y)&&(d.Helpers.warn('Data response: Node property "y" must be a number. Node ID: "'+o.id+'".'),
o.y=d.Helpers.tryParseFloat(o.y,null))}for(var p={},s=0;s<e.links.length;s++){
var h=e.links[s];null!=h.from?(h.from=h.from.toString(),null!=h.to?(h.to=h.to.toString(),
null==h.id?(h.id=d.Helpers.SeparatorChar+this.nextLinkId,this.nextLinkId+=1):h.id=h.id.toString(),
p.hasOwnProperty(h.id)&&d.Helpers.warn('Data response: Multiple links with the same ID: "'+h.id+'". Data will be merged.'),
p[h.id]=!0,d.Helpers.hasProperty(h,"className")&&null!=h.className&&!d.Helpers.isString(h.className)&&(d.Helpers.warn('Data response: Link property "className" must be a string. Link ID: "'+h.id+'".'),
h.className=""+h.className),d.Helpers.hasProperty(h,"error")&&null!=h.error&&!d.Helpers.isString(h.error)&&(d.Helpers.warn('Data response: Link property "error" must be a string. Link ID: "'+h.id+'".'),
h.error=""+h.error),d.Helpers.hasProperty(this.nodes,h.from)||d.Helpers.hasProperty(u,h.from)||e.nodes.push({
id:h.from,loaded:c}),d.Helpers.hasProperty(this.nodes,h.to)||d.Helpers.hasProperty(u,h.to)||e.nodes.push({
id:h.to,loaded:c})):d.Helpers.warn('Data response: Link missing property "to" and will be ignored. Link id: "'+h.id+'"')):d.Helpers.warn('Data response: Link missing property "from" and will be ignored. Link id: "'+h.id+'"');
}if(t?this.chart.log("Got "+e.nodes.length+" nodes on ["+t.nodes.join(", ")+"]"):this.chart.log("Got "+e.nodes.length+" nodes on all nodes"),
t&&t.nodes.length>0){for(var f=!1,g=!1,m=0;m<e.nodes.length;m++){
var o=e.nodes[m];t.nodes.indexOf(o.id)>-1&&(f=!0,g=g||o.loaded);
}f?g||(this.chart.error("Data response: loaded field was not set on any of the requested nodes!"),
i=!1):(this.chart.error("Data response: Results set did not contain any of requested nodes!",t.nodes),
i=!1)}return i},e.prototype.addVerifiedData=function(t,e){for(var i=this.updateGraph(e),n=0;n<e.nodes.length;n++){
var r=e.nodes[n];(r.loaded||r.error)&&(delete this.requestedNodes[r.id],
delete this.pendingNodes[r.id])}if(t)if(0===t.nodes.length)this.hasAllData=!0,
this.pendingAllData=!1,this.requestedAllData=!1;else for(var n=0;n<t.nodes.length;n++){
var s=t.nodes[n];this.requestedNodes[s]&&(this.pendingNodes[s]=!0,
delete this.requestedNodes[s])}return i},e.prototype.requestFailedPermanently=function(t){
if(t.nodes){for(var e=[],i=0;i<t.nodes.length;i++){var n=t.nodes[i];
e.push({id:n,error:"Bad response",loaded:!0})}var r=this.addVerifiedData(t,{
nodes:e,links:[]});r.dataArrived||(r.dataArrived={}),r.dataArrived[this.dataSettings.id]=!0,
this.chart.events.notifySceneChanges(r)}this.chart.error("Failed data request, giving up on nodes: ",t.nodes);
},e.prototype.removeData=function(t){var e={},i=[];if(t.nodes)for(var n=0;n<t.nodes.length;n++){
var r=t.nodes[n];e[r.id]=!0,i=this.removeNode(r.id,i)}if(t.links)for(var s=0;s<t.links.length;s++){
var a=t.links[s],o=this.links[a.id];o&&(e[o.from]=!0,e[o.to]=!0,
this.removeLink(o))}for(var l=0;l<i.length;l++){var o=i[l];e[o.from]=!0,
e[o.to]=!0,this.removeLink(o)}var h=this.chart.createEventArguments(null,"api");
return h.dataArrived=null,h.dataRemoved=t,this.chart.notifyDataUpdated(h),
{netChartDataNodes:e}},e.prototype.exportData=function(){var t=[],e=[];
for(var i in this.nodes){var n=this.nodes[i];t.push(n)}for(var i in this.links){
var r=this.links[i];e.push(r)}return{nodes:t,links:e}},e.prototype.applyPreloadedData=function(){
this.dataSettings.randomNodes>0?this.addData(this.genRandomGraph(this.dataSettings)):t.prototype.applyPreloadedData.call(this);
},e.prototype.getNode=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=null);
var n=d.Helpers.hasProperty(this.nodes,t)?this.nodes[t]:null;if(i&&(i.loading=!1),
n){if(this.settings.legend.enabled&&!this.chart.legend.isNodeVisible(n))return null;
var r=this.settings.filters.nodeFilter;if(r){var s=d.Helpers.hasProperty(this.nodeToLinks,t)?this.nodeToLinks[t]:null;
if(!r(n,s))return null}!n.loaded&&e&&(i&&(i.loading=!0),this.requestNodeData(t));
}else e?(i&&(i.loading=!0),this.requestNodeData(t)):i&&(i.loading=this.isNodeLoading(t));
return n},e.prototype.isNodeLoading=function(t){return this.pendingAllData||this.requestedAllData||d.Helpers.hasProperty(this.pendingNodes,t)||d.Helpers.hasProperty(this.requestedNodes,t);
},e.prototype.getLinks=function(t,i){void 0===i&&(i=!0);var n=this.settings.legend.enabled,r=d.Helpers.hasProperty(this.nodes,t)?this.nodes[t]:null;
if(!r)return i&&this.requestNodeData(t),[];if(n&&!this.chart.legend.isNodeVisible(r))return[];
var s=d.Helpers.hasProperty(this.nodeToLinks,t)?this.nodeToLinks[t]:[],a=this.settings.filters.nodeFilter;
if(a&&!a(r,s))return[];!r.loaded&&i&&this.requestNodeData(t);var o=this.settings.filters.linkFilter,l=this.settings.filters.nodeLinksProcessor,h=this.settings.filters.multilinkProcessor,u={};
if(u[t]=!0,s.length>0&&(a||o||n)){for(var c=new Array(s.length),p=0,f=0;f<s.length;f++){
var g=s[f],m=e.otherEnd(g,t);if(null!=m)if(d.Helpers.hasProperty(this.nodes,m)){
var v=this.nodes[m];if(a||n)if(d.Helpers.hasProperty(u,m)){if(!u[m])continue;
}else{var y=!n||this.chart.legend.isNodeVisible(v);if(y&&a&&(y=a(v,d.Helpers.hasProperty(this.nodeToLinks,m)?this.nodeToLinks[m]:null)),
u[m]=y,!y)continue}if(o||n){var S=void 0,b=void 0;if(g.from===t?(S=r,
b=v):(S=v,b=r),n&&!this.chart.legend.isLinkVisible(g))continue;
if(o&&!o(g,S,b))continue}c[p++]=g}else d.Helpers.error("Invalid situation: link data found from '"+t+"' to '"+m+"', but no node data found for '"+m+"'");else d.Helpers.error("Invalid situation: link data found from '"+g.from+"' to '"+g.to+"' in the collection of links for '"+t+"'");
}c.length=p,s=c}if(l&&(s=l(r,s)),!Array.isArray(s))return[];if(h){
for(var C={},x=!1,f=0;f<s.length;f++){var w=e.otherEnd(s[f],t);
if(w){if(d.Helpers.hasProperty(C,w)){x=!0;break}C[w]=!0}}if(x){
for(var c=[],L={},T={},f=0;f<s.length;f++){var k=s[f],A=e.multiLinkId(k);
L.hasOwnProperty(A)?T.hasOwnProperty(A)?T[A].push(k):T[A]=[L[A],k]:L[A]=k;
}for(var f=0;f<s.length;f++){var k=s[f],A=e.multiLinkId(k);T.hasOwnProperty(A)||c.push(k);
}for(var M=Object.keys(T),f=0;f<M.length;f++){var P=T[M[f]],k=P[0],I=h(P,this.nodes[k.from],this.nodes[k.to]);
Array.isArray(I)?c=c.concat(I):I&&c.push(I)}s=c}}return s},e.prototype.getAllNodes=function(t){
void 0===t&&(t=!0);for(var e=this.settings.filters.nodeFilter,i=Object.keys(this.nodes),n=new Array(i.length),r=0,s=0;s<i.length;s++){
var a=i[s],o=this.nodes[a];this.settings.legend.enabled&&!this.chart.legend.isNodeVisible(o)||e&&!e(o,d.Helpers.hasProperty(this.nodeToLinks,a)?this.nodeToLinks[a]:null)||(n[r++]=o);
}return n.length=r,this.hasAllData||this.pendingAllData||!t||(this.pendingAllData=!0,
this.scheduleRequests()),n},e.prototype.requestNodeData=function(t){
return this.hasDataFunc()?void(this.pendingNodes.hasOwnProperty(t)||this.requestedNodes.hasOwnProperty(t)||(this.pendingNodes[t]=!0,
this.scheduleRequests())):void this.chart.error("Cannot request node data! Please specify either data function or data URL in the settings!");
},e.prototype.hasDataFunc=function(){return null!=this.dataSettings.dataFunction||null!=this.dataSettings.url;
},e.prototype.updateGraph=function(t){for(var e={},i=0;i<t.nodes.length;i++){
var n=t.nodes[i];if(d.Helpers.hasProperty(this.nodes,n.id)){var r=this.nodes[n.id];
n.error||r.loaded&&!n.loaded||(d.Helpers.extendDataItem(r,n),
r.resetCoordinates=(null!=n.x||null!=n.y)&&null!=r.x&&null!=r.y,
r.resetLocked=null!=n.locked,e[n.id]=!0)}else{var s=d.Helpers.extendDataItem({},n);
s.resetCoordinates=null!=s.x&&null!=s.y,s.resetLocked=null!=s.locked,
this.nodes[n.id]=s,this.nodeToLinks[n.id]=[],e[n.id]=!0}}for(var a=0;a<t.links.length;a++){
var o=t.links[a];if(d.Helpers.hasProperty(this.links,o.id)){var r=this.links[o.id];
if(o.from&&r.from!==o.from||o.to&&r.to!==o.to){this.chart.error('Changing link from/to not supported. Link ignored. Link ID: "'+o.id+'"');
continue}d.Helpers.extendDataItem(r,o)}else{if(!o.from||!o.to)continue;
this.links[o.id]=o,this.nodeToLinks[o.from].push(o),o.from!==o.to&&this.nodeToLinks[o.to].push(o);
}e[o.from]=!0,e[o.to]=!0}return{netChartDataNodes:e}},e.prototype.removeNode=function(t,e){
return delete this.pendingNodes[t],delete this.requestedNodes[t],
d.Helpers.hasProperty(this.nodes,t)&&delete this.nodes[t],d.Helpers.hasProperty(this.nodeToLinks,t)&&(e=e.concat(this.nodeToLinks[t]),
delete this.nodeToLinks[t]),e},e.prototype.removeLink=function(t){
delete this.links[t.id],d.Helpers.hasProperty(this.nodeToLinks,t.from)&&d.Helpers.removeFromArrayHasty(this.nodeToLinks[t.from],t),
d.Helpers.hasProperty(this.nodeToLinks,t.to)&&d.Helpers.removeFromArrayHasty(this.nodeToLinks[t.to],t);
},e.prototype.genRandomGraph=function(t){var e,i=t.randomNodes,n=t.randomLinks;
e="grid"===t.random?this.genRandomGrid(i,t.randomGridLinkProbability):"tree"===t.random?this.genRandomTree(i,t.randomTreeDensity):this.genRandomUniform(i,n);
for(var r=0;r<e.nodes.length;r++){var s=e.nodes[r];s.style={label:"Node "+s.id
}}for(var a=0;a<e.links.length;a++){var o=e.links[a];o.style={
label:"Link "+o.id}}return e},e.prototype.genRandomGrid=function(t,e){
for(var i=[],n=[],r=0;r<=t-1;r++){var s={id:"n"+r,loaded:!0};i.push(s);
}for(var a=Math.ceil(Math.sqrt(t)),o=new d.Random(32131),l=0;l<=a-1;l++)for(var h=0;h<=a-1;h++){
var u=h+l*a;u>=t||(h>0&&o.get()<=e&&n.push({from:"n"+u,to:"n"+(u-1)
}),l>0&&o.get()<=e&&n.push({from:"n"+u,to:"n"+(u-a)}))}for(var c=0;c<n.length;c++){
var p=n[c];p.id=""+c}return{nodes:i,links:n}},e.prototype.genRandomUniform=function(t,e){
for(var i=new d.Random(32131),n=[],r=[],s=0;s<t;s++){var a={id:"n"+s,
loaded:!0};if(n.length>0){var o={id:"l"+s,from:a.id,to:n[i.get()*n.length|0].id
};r.push(o)}n.push(a)}for(var s=r.length;s<=e-1;s++){var o={id:"l"+(s+1),
from:n[i.get()*n.length|0].id,to:n[i.get()*n.length|0].id};r.push(o);
}return{nodes:n,links:r}},e.prototype.genRandomTree=function(t,e){
for(var i=new d.Random(31927832),n={id:"n0",loaded:!0},r=[n],s=[n],a=[];s.length<t;){
var o=i.getArrayElement(r);d.Helpers.removeFromArrayHasty(r,o);
for(var l=Math.max(1,Math.ceil(i.get()*e)),h=0;h<l;h++){var u={
id:"n"+s.length,loaded:!0},c={id:"l"+s.length,from:o.id,to:u.id
};a.push(c),s.push(u),r.push(u)}}return{nodes:s,links:a}},e}(d.Data);
t.Data=M;var P=function(){function t(t){this.restoredState={},
this.chart=t}return t.prototype.exportCoordinates=function(t){
for(var e=this.chart.layer.idToNode,i=0;i<t.length;i++){var n=t[i],r=n.id;
if(d.Helpers.hasProperty(e,r)){var s=e[r];s.removed||(n.x=s.x,
n.y=s.y)}}},t.prototype.save=function(){for(var t={},e=this.chart.layer.idToNode,i=Object.keys(e),n=0;n<i.length;n++){
var r=e[i[n]];r.removed||(t[r.id]={x:r.x,y:r.y,r:r.hHeight,w:r.hWidth
})}return t},t.prototype.restore=function(t){this.restoredState={};
for(var e=this.chart.layer.idToNode,i=Object.keys(t),n=0;n<i.length;n++){
var r=i[n],s=t[r];if(d.Helpers.hasProperty(e,r)){var a=e[r];a.x=s.x,
a.y=s.y,a.hHeight=s.r,a.hWidth=s.w?s.w:s.r}else this.restoredState[r]=s;
}},t.prototype.applyRestoredCoordinates=function(t){if(d.Helpers.hasProperty(this.restoredState,t.id)){
var e=this.restoredState[t.id];delete this.restoredState[t.id],
t.x=e.x,t.y=e.y,t.hHeight=e.r,t.hWidth=e.w?e.w:e.r}},t.prototype.lockNode=function(t,e,i){
void 0===e&&(e=null),void 0===i&&(i=null);var n=this.chart.layer.idToNode;
if(d.Helpers.hasProperty(n,t)){var r=n[t];r.userLock=!0,null!==e&&null!==i&&(r.x=e,
r.y=i),this.chart.layer.touchNode(r)}else this.chart.error("Locking nonexistant node: "+t);
},t.prototype.unlockNode=function(t){var e=this.chart.layer.idToNode;
if(d.Helpers.hasProperty(e,t)){var i=e[t];i.userLock&&(i.userLock=!1,
this.chart.layer.touchNode(i),this.chart.events.notifySceneChanges({
dynamicLayout:!0}))}else this.chart.error("Unlocking nonexistant node: "+t);
},t.prototype.exportData=function(){for(var t=this.chart.layer.idToNode,e=Object.keys(t),i=new Array(e.length),n=0,r=0;r<e.length;r++){
var s=t[e[r]];s.removed||(i[n++]=s.data)}i.length=n;var a=this.chart.layer.idToLink;
e=Object.keys(a);var o=new Array(e.length);n=0;for(var r=0;r<e.length;r++){
var l=a[e[r]];l.removed||(o[n++]=l.data)}return o.length=n,{nodes:i,
links:o}},t}();t.Graph=P;var I=function(t){function e(e){var i=t.call(this)||this;
i.numPointers=0,i.resetZoom=!1,i.minimumAutoZoom=1/0,i.animationOrder=700,
i.paintOrder=20,i.updateOrder=2e3,i.chart=e,i.scene=e.scene,i.layer=e.layer,
i.events=e.events,i.settings=i.scene.settings;var n=i._getInertiaAccelerations();
return i.inertiaX=new d.Inertia(n.x,0),i.inertiaY=new d.Inertia(n.y,0),
i.inertiaZ=new d.Inertia(n.z,1),i}return n(e,t),e.prototype.setZoom=function(t,e){
void 0===e&&(e=!0);var i=1+this.scene.settings.interaction.zooming.sensitivity;
if("auto"===t)this.scene.autoZoomMode=!0,this.autoZoom(e);else if("overview"===t)this.scene.autoZoomMode="overview",
this.autoZoom(e);else{var n=void 0;"in"===t?n=1/this.inertiaZ.getTargetValue()*i:"out"===t?n=1/this.inertiaZ.getTargetValue()/i:null===(n=d.Helpers.tryParseFloat(t,null))&&(this.chart.error("Invalid zoom value: "+t),
n=1/this.inertiaZ.getTargetValue()),this.manualZoom(n/this.scene.zoom,void 0,void 0,e);
}this.chart.events.notifySceneChanges({position:!0})},e.prototype.previewPointerDown=function(){
this.numPointers+=1},e.prototype.previewPointerUp=function(){
this.numPointers-=1},e.prototype.previewPointerCancel=function(){
this.numPointers-=1},e.prototype.doAnimations=function(t){var e=t.changes.settingsChanges;
if(e&&e.interaction&&e.interaction.zooming){this.minimumAutoZoom=1/0;
var i=e.interaction.zooming.initialAutoZoom;"true"===i?i=!0:"false"===i&&(i=!1),
this.scene.autoZoomMode=i,i&&this.autoZoom(!0)}if(this.resetZoom||t.changes.newGraph)this.resetZoom=!1,
this.setZoom("overview",!1);else if(0===this.numPointers&&this.layer.nodes().length>0){
this.scene.autoZoomMode&&this.autoZoom(!0)&&(t.changes.position=!0);
var n=t.timeStamp,r=this.inertiaX.getValue(n),s=this.inertiaY.getValue(n),a=1/this.inertiaZ.getValue(n);
r===this.scene.centerX&&s===this.scene.centerY&&a===this.scene.zoom||(this.scene.centerX=r,
this.scene.centerY=s,this.scene.zoom=a,t.changes.position=!0),
this.inertiaX.finished(n)&&this.inertiaY.finished(n)&&this.inertiaZ.finished(n)||(t.animating=!0);
}else this.inertiaX.jump(this.scene.centerX),this.inertiaY.jump(this.scene.centerY),
this.inertiaZ.jump(1/this.scene.zoom)},e.prototype._getInertiaAccelerations=function(){
var t=this.scene.settings.interaction.zooming.autoZoomPositionElasticity,e=.5*(this.scene.width+this.scene.height)*t;
return{x:e,y:e,z:2*t}},e.prototype.autoZoom=function(t,e){var i=!1,n=this.computeAutoZoom("overview"===this.scene.autoZoomMode);
if(null==n)return!1;var r=n.centerX,s=n.centerY,a=n.zoom,o=.01,l=1+o,h=1-o,u=1/this.inertiaZ.getTargetValue()/a,c=this._getInertiaAccelerations();
(u>l||u<h)&&(t?this.inertiaZ.setTarget(1/a,e,c.z):(this.inertiaZ.jump(1/a),
this.scene.zoom=a),i=!0);var d=this.scene.width,p=(this.inertiaX.getTargetValue()-r)*a/d;
(p>o||p<-o)&&(t?this.inertiaX.setTarget(r,e,c.x):(this.inertiaX.jump(r),
this.scene.centerX=r),i=!0);var f=this.scene.height,g=(this.inertiaY.getTargetValue()-s)*a/f;
return(g>o||g<-o)&&(t?this.inertiaY.setTarget(s,e,c.y):(this.inertiaY.jump(s),
this.scene.centerY=s),i=!0),i},e.prototype.computeAutoZoom=function(t,e,i){
var n,r=this.scene;n=t?this.layer.getGraphBounds(e):this.layer.getNodeNeighborsBounds(r.lastClickedNode);
var s=n.x0,a=n.y0,o=n.x1,l=n.y1;if(0===s&&0===o&&0===a&&0===l)return null;
i&&(n.y0-=i[0],n.x1+=i[1],n.y1+=i[2],n.x0-=i[3]);var h=r.getVisibleBounds(),u=r.settings.interaction.zooming,c=(1-u.autoZoomSize)/2,d=c*n.w(),p=c*n.h(),f=n.clone();
if(f.x0-=d,f.x1+=d,f.y0-=p,f.y1+=p,n.isInside(h)&&!f.isInside(h))return null;
var g=Math.min(r.width/f.w(),r.height/f.h()),m=u.autoZoomExtent;
m&&(g=Math.min(m[1],g),null===m[0]?this.minimumAutoZoom=Math.min(g,this.minimumAutoZoom):g=Math.max(m[0],g));
var v=(f.x0+f.x1)/2,y=(f.y0+f.y1)/2,S=(h.x0+h.x1)/2,b=(h.y0+h.y1)/2;
return this.scene.zoom===g&&Math.abs(v-S)<=d&&Math.abs(y-b)<=p?null:{
centerX:v,centerY:y,zoom:g}},e.prototype.manualZoom=function(t,e,i,n){
void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1);var r=this.scene,s=this.settings.interaction.zooming.zoomExtent,a=this.layer.getGraphBounds(),o=a.x0,l=a.y0,h=a.x1,c=a.y1,d=r.zoom*t;
d=Math.min(d,Math.max(r.zoom,s[1])),d=Math.max(d,Math.min(r.zoom,Math.min(this.minimumAutoZoom,s[0]))),
t=d/r.zoom;var p,f;if(null!==e&&null!==i){var g=r.fromDisplay(e,i);
p=g.x,f=g.y}else if(r.selection.length>0){for(var m=0,v=0,y=0,S=0;S<r.selection.length;S++){
var b=r.selection[S];b instanceof u.Node&&(m+=b.x,v+=b.y,y+=1);
}y>0&&(p=m/y,f=v/y)}var C,x;p&&f?(C=(r.centerX-p)/t+p,x=(r.centerY-f)/t+f):(C=p=r.centerX,
x=f=r.centerY);var w=r.zoom*t,L=r.getVisibleBounds();if(p<o||p>h){
var T=void 0;T=L.x0>o&&L.x1>h?Math.max(h-L.x1,o-L.x0):L.x1<h&&L.x0<o?Math.min(h-L.x1,o-L.x0):0,
C+=T}if(f<l||f>c){var k=void 0;k=L.y0>l&&L.y1>c?Math.max(c-L.y1,l-L.y0):L.y1<c&&L.y0<o?Math.min(c-L.y1,l-L.y0):0,
x+=k}if(n&&w!==r.zoom?this.inertiaZ.setTarget(1/w):(this.inertiaZ.jump(1/w),
r.zoom=w),!n||C===r.centerX&&x===r.centerY)r.centerX=C,r.centerY=x,
this.inertiaX.jump(C),this.inertiaY.jump(x);else{var A=this._getInertiaAccelerations();
this.inertiaX.setTarget(C,null,A.x),this.inertiaY.setTarget(x,null,A.y);
}r.autoZoomMode=!1},e.prototype.scrollIntoView=function(t,e){
if(t&&t.length){var i=d.Helpers.performanceNow();this.scene.autoZoomMode=!1;
var n=this._getInertiaAccelerations(),r=this.computeAutoZoom(!0,t,e);
r&&(this.inertiaX.setTarget(r.centerX,i,n.x),this.inertiaY.setTarget(r.centerY,i,n.y),
this.inertiaZ.setTarget(1/r.zoom,i,n.z),this.chart.events.notifySceneChanges({
position:!0}))}},e}(d.ChartElement);t.AutoZoom=I;var D=function(t){
function e(e){var i=t.call(this)||this;return i.updateOrder=150,
i.chart=e,i}return n(e,t),e.CreateNavigator=function(t){switch(t.settings.navigation.mode){
case"manual":return new N(t);case"showall":return new F(t);case"focusnodes":
return new O(t);default:return t.error("Unknown navigation mode: '"+t.settings.navigation.mode+"'"),
new F(t)}},e.prototype.updateGraphWithNewData=function(t,e){for(var i=this.chart.layer,n=this.chart.scene.mainData,r=i.idToNode,s=Object.keys(t?t:r),a={
loading:!1},o=0;o<s.length;o++){var l=s[o];if(d.Helpers.hasProperty(r,l)){
var h=r[l];if(!h.removed){var u=n.getNode(l,!1,a);u?(this.updateNodeWithNewData(h,u,n.getLinks(l,!1)),
i.touchNode(h)):a.loading?h.loading||(h.loading=!0,i.touchNode(h)):this.ensureNodeRemoved(h);
}}}},e.prototype.calcExpanded=function(t){var e=t.expanded;if(t.links.length<t.dataLinks.length)return t.expanded=!1,
e;for(var i=0;i<t.links.length;i++)if(t.links[i].removed)return t.expanded=!1,
e;return t.expanded=!0,!e},e.prototype.syncNodeLinks=function(t){
for(var e=this.chart.layer,i=t.links,n=t.dataLinks,r={},s=0;s<n.length;s++)r[n[s].id]=n[s];
for(var a=0;a<i.length;a++){var o=i[a];o.removed||(d.Helpers.hasProperty(r,o.id)?(o.data=r[o.id],
e.touchLink(o),delete r[o.id]):this.ensureLinkRemoved(o))}for(var l=Object.keys(r),h=t.id,s=0;s<l.length;s++){
var o=r[l[s]],u=M.otherEnd(o,h);d.Helpers.hasProperty(e.idToNode,u)&&!e.idToNode[u].removed&&this.ensureLink(o);
}this.calcExpanded(t)},e.prototype.updateNodeWithNewData=function(t,e,i){
t.data=e,e.resetCoordinates&&(t.x=e.x,t.y=e.y,e.resetCoordinates=!1),
e.resetLocked&&(t.userLock=e.locked,e.resetLocked=!1),e.loaded&&(t.loading=!1),
t.dataLinks=i,this.syncNodeLinks(t)},e.prototype.ensureNode=function(t,e){
var i=this.chart.layer,n=d.Helpers.hasProperty(i.idToNode,t.id)?i.idToNode[t.id]:null;
return!(n&&!n.removed||(n=i.addNode(t.id),null!=t.x&&(n.x=t.x),
null!=t.y&&(n.y=t.y),null!=t.locked&&(n.userLock=t.locked),t.resetCoordinates=!1,
n.loading=!t.loaded,n.data=t,n.dataLinks=e,this.chart.graph.applyRestoredCoordinates(n),
this.syncNodeLinks(n),0))},e.prototype.ensureLink=function(t){
var e=this.chart.layer,i=d.Helpers.hasProperty(e.idToLink,t.id)?e.idToLink[t.id]:null;
if(i&&!i.removed)return!1;var n=d.Helpers.hasProperty(e.idToNode,t.from)?e.idToNode[t.from]:null,r=d.Helpers.hasProperty(e.idToNode,t.to)?e.idToNode[t.to]:null;
return!(!n||n.removed||!r||r.removed||(i=e.addLink(t.id,t.from,t.to),
i.data=t,this.calcExpanded(n),this.calcExpanded(r),0))},e.prototype.ensureNodeRemoved=function(t){
if(!t||t.removed)return!1;for(var e=this.chart.layer,i=t.links,n=i.length-1;n>=0;n--){
var r=i[n];if(!r.removed){var s=r.otherEnd(t);s!==t&&!s.removed&&s.expanded&&(s.expanded=!1,
e.touchNode(s)),e.removeLink(r)}}return e.removeNode(t),!0},e.prototype.ensureLinkRemoved=function(t){
if(!t||t.removed)return!1;var e=this.chart.layer;return!t.from.removed&&t.from.expanded&&(t.from.expanded=!1,
e.touchNode(t.from)),!t.to.removed&&t.to.expanded&&(t.to.expanded=!1,
e.touchNode(t.to)),e.removeLink(t),!0},e}(d.Navigator);t.Navigator=D;
var N=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.saveHack=null,e.retryList=[],e}return n(e,t),e.prototype.executeAllSceneChanges=function(t){
var e=this.retryList;this.retryList=[];for(var i=0;i<e.length;i++){
var n=e[i].fun(t);null===n?this.retryList.push(e[i]):n&&e[i].origin&&this.chart.notifyChartUpdate(e[i].origin);
}},e.prototype.notifyNavigation=function(t,e){this.chart.events.notifySceneChanges({
navigation:!0}),this.retryList.push({fun:e,origin:t})},e.prototype.clearFocusNodes=function(t){
var e=this;this.notifyNavigation(t,function(){for(var t=!1,i=e.chart.layer,n=i.idToNode,r=Object.keys(n),s=0;s<r.length;s++){
var a=n[r[s]];a.focused&&!a.removed&&(t=!0,a.focused=!1,i.touchNode(a));
}return t})},e.prototype.hideNode=function(t,e){var i=this;this.notifyNavigation(e,function(){
return i.ensureNodeRemoved(d.Helpers.hasProperty(i.chart.layer.idToNode,t)?i.chart.layer.idToNode[t]:null);
})},e.prototype.showNode=function(t,e){var i=this;this.notifyNavigation(e,function(){
var e={loading:!1},n=i.chart.scene.mainData,r=n.getNode(t,!0,e);
return r?(i.ensureNode(r,n.getLinks(t)),!0):!!e.loading&&null;
})},e.prototype.collapseNode=function(t,e){var i=this;this.notifyNavigation(e,function(){
var e=i.chart.layer,n=d.Helpers.hasProperty(e.idToNode,t)?e.idToNode[t]:null;
if(!n||n.removed)return!1;for(var r=!1,s=0;s<n.links.length;s++){
var a=n.links[s];if(!a.removed){var o=a.otherEnd(n);o!==n&&(r=i.ensureNodeRemoved(o)||r);
}}return i.canHideNode(n)&&(r=i.ensureNodeRemoved(n)||r),r})},
e.prototype.calculateCloseNodes=function(t){for(var e={},i=[],n=0;n<t.links.length;n++){
var r=t.links[n];if(!r.removed){var s=r.otherEnd(t);s===t||s.removed||(i.push(s),
e[s.id]=!0)}}e[t.id]=!0;for(var a=[],n=0;n<i.length;n++){for(var o=i[n],l=!0,h=0;h<o.links.length;h++){
var s=o.links[h].otherEnd(o);if(!d.Helpers.hasProperty(e,s.id)){
l=!1;break}}l&&a.push(o)}return a},e.prototype.closeNode=function(t,e){
var i=this;this.notifyNavigation(e,function(){var e=i.chart.layer,n=d.Helpers.hasProperty(e.idToNode,t)?e.idToNode[t]:null;
if(!n||n.removed)return!1;for(var r=!1,s=i.calculateCloseNodes(n),a=0;a<s.length;a++)r=i.ensureNodeRemoved(s[a])||r;
return r})},e.prototype.focusNode=function(t,e,i){var n=this;this.chart.settings.navigation.autoUnfocus&&this.clearFocusNodes("single"),
this.notifyNavigation(i,function(){var e=n.chart.layer.idToNode[t];
return e instanceof u.Node&&!e.removed&&!e.focused&&(e.focused=!0,
n.chart.layer.touchNode(e),!0)})},e.prototype.expandNode=function(t,e){
var i=this,n={},r=!1;this.notifyNavigation(e,function(){var e=i.chart.layer,s=e.idToNode[t];
if(!(s instanceof u.Node)||s.removed)return!1;var a=i.chart.scene.mainData,o=s.dataLinks;
if(null!=o)for(var l=0;l<o.length;l++){var h=o[l];if(!d.Helpers.hasProperty(n,h.id)){
n[h.id]=!0;var c=d.Helpers.hasProperty(e.idToLink,h.id)?e.idToLink[h.id]:null;
if(!c||c.removed){var p=M.otherEnd(h,t);if(p!==t){var f=d.Helpers.hasProperty(e.idToNode,p)?e.idToNode[p]:null;
if(!f||f.removed){var g=a.getNode(p);if(!g)continue;i.ensureNode(g,a.getLinks(p));
}}r=!0}}}return s.data.loaded?r:null})},e.prototype.unfocusNode=function(t,e){
var i=this;this.notifyNavigation(e,function(){var e=i.chart.layer.idToNode[t];
return e instanceof u.Node&&!e.removed&&!!e.focused&&(e.focused=!1,
i.chart.layer.touchNode(e),!0)})},e.prototype.save=function(){
if(this.saveHack)return this.saveHack;for(var t={},e=this.chart.layer.idToNode,i=Object.keys(e),n=0;n<i.length;n++){
var r=e[i[n]];r.removed||(t[r.id]=r.focused)}return t},e.prototype.restore=function(t){
var e=this,i=t;if(i){this.saveHack=i,this.chart.notifyChartUpdate("restore"),
this.saveHack=null;var n={},r=!1,s=!1;this.notifyNavigation(null,function(){
var t,a=e.chart.layer,o=e.chart.scene.mainData,l=!1,h={loading:!1
},u=a.idToNode;if(!s){t=Object.keys(u);for(var c=0;c<t.length;c++){
var p=t[c];d.Helpers.hasProperty(i,p)||u[p].removed||(r=e.ensureNodeRemoved(u[p])||r);
}s=!0}t=Object.keys(i);for(var c=0;c<t.length;c++){var p=t[c];
if(!d.Helpers.hasProperty(n,p)){var f=d.Helpers.hasProperty(a.idToNode,p)?a.idToNode[p]:null;
if(!f||f.removed){var g=o.getNode(p,!0,h);if(!g){h.loading?l=!0:n[p]=!0;
continue}e.ensureNode(g,o.getLinks(p)),a.idToNode[p].focused=i[p],
r=!0}else f&&f.focused!==i[p]&&(f.focused=i[p],a.touchNode(f),
r=!0);n[p]=!0}}return l?null:r})}},e.prototype.onNewDataObject=function(){
for(var t=this,e=this.save(),i=this.chart.scene.mainData,n=Object.keys(e),r=0;r<n.length;r++)i.getNode(n[r]);
this.notifyNavigation(null,function(){var n,r=t.chart.layer,s=r.idToNode,a={
loading:!1};n=Object.keys(e);for(var o=0;o<n.length;o++){var l=n[o];
if(d.Helpers.hasProperty(s,l)&&!s[l].removed){var h=i.getNode(l,!0,a);
if(h)delete e[l];else if(a.loading)return null}else delete e[l];
}return!0})},e.prototype.showInitialNodes=function(){var t=this,e=!1,i=this.chart.settings.navigation.initialNodes,n=!1,r=!1;
this.retryList=[],this.notifyNavigation("init",function(s){var a=t.chart.layer;
if(e||(d.Helpers.hasProperties(a.nodes)&&(a.clearObjects(),n=!0),
e=!0),null==i||i.length<1)return n;var o={loading:!1},l=t.chart.scene.mainData,h=!1,u=i;
i=[];for(var c=0;c<u.length;c++){var p=u[c],f=l.getNode(p,!0,o);
f?(n=t.ensureNode(f,l.getLinks(p))||n,r||(r=!0,s.changes.newGraph=!0)):o.loading&&(i.push(p),
h=!0)}return h?null:n})},e.prototype.onSceneChange=function(t){
t.changes.filters?this.updateGraphWithNewData(null,t):(t.changes.dataArrived||t.changes.data)&&this.updateGraphWithNewData(t.changes.netChartDataNodes,t),
this.retryList.length>0&&(t.changes.navigation||t.changes.dataArrived)&&this.executeAllSceneChanges(t);
},e.prototype.canFocusNode=function(t){return!t.focused},e.prototype.canUnfocusNode=function(t){
return t.focused},e.prototype.canExpandNode=function(t){return!t.expanded;
},e.prototype.canCollapseNode=function(t){return this.canHideNode(t);
},e.prototype.canHideNode=function(t){for(var e=this.chart.layer,i=Object.keys(e.idToNode),n=0;n<i.length;n++){
var r=e.idToNode[i[n]];if(r!==t&&!r.removed)return!0}return!1;
},e.prototype.canCloseNode=function(t){return this.calculateCloseNodes(t).length>0;
},e}(D);t.ManualNavigator=N;var F=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.hiddenNodes={},e.isInitialized=!1,e}return n(e,t),e.prototype.showNode=function(e,i){
delete this.hiddenNodes[e],t.prototype.showNode.call(this,e,i);
},e.prototype.hideNode=function(e,i){var n=this.chart.layer.idToNode;
d.Helpers.hasProperty(n,e)&&(this.hiddenNodes[e]=!0,t.prototype.hideNode.call(this,e,i));
},e.prototype.collapseNode=function(e,i){var n=this.chart.layer.idToNode;
if(d.Helpers.hasProperty(n,e)){this.hiddenNodes[e]=!0;for(var r=n[e],s=0;s<r.links.length;s++){
var a=r.links[s];if(!a.removed){var o=a.otherEnd(r);o!==r&&(this.hiddenNodes[o.id]=!0);
}}t.prototype.collapseNode.call(this,e,i)}},e.prototype.closeNode=function(e,i){
var n=this.chart.layer.idToNode;if(d.Helpers.hasProperty(n,e)){
for(var r=this.calculateCloseNodes(n[e]),s=0;s<r.length;s++)this.hiddenNodes[r[s].id]=!0;
t.prototype.closeNode.call(this,e,i)}},e.prototype.save=function(){
if(this.saveHack)return this.saveHack;var t;t=[];for(var e=this.chart.layer.idToNode,i=Object.keys(e),n=0;n<i.length;n++){
var r=e[i[n]];!r.removed&&r.focused&&t.push(r.id)}return{hidden:Object.keys(this.hiddenNodes),
focused:t}},e.prototype.restore=function(t){var e=this,i=t;this.hiddenNodes={};
for(var n=0;n<i.hidden.length;n++)this.hiddenNodes[i.hidden[n]]=!0;
this.saveHack=i,this.chart.notifyChartUpdate("restore"),this.saveHack=null,
this.notifyNavigation(null,function(t){e.updateGraphWithNewData(null,t);
for(var n={},r=0;r<i.focused.length;r++)n[i.focused[r]]=!0;for(var s=e.chart.layer,a=s.idToNode,o=Object.keys(a),r=0;r<o.length;r++){
var l=a[o[r]],h=d.Helpers.hasProperty(n,o[r]);l.removed||l.focused===h||(l.focused=h,
s.touchNode(l))}return!1})},e.prototype.expandNode=function(e,i){
var n=this.chart.layer.idToNode;if(d.Helpers.hasProperty(n,e)){
for(var r=n[e],s=0;s<r.dataLinks.length;s++){var a=r.dataLinks[s],o=M.otherEnd(a,e);
o!==e&&delete this.hiddenNodes[o]}t.prototype.expandNode.call(this,e,i);
}},e.prototype.showInitialNodes=function(){var t=this;this.retryList=[],
this.notifyNavigation("init",function(e){var i=t.chart.layer,n=t.chart.scene.mainData;
t.hiddenNodes={},i.clearObjects(),t.isInitialized=!0;var r,s=t.chart.settings.navigation.initialNodes,a={};
if(null==s||s.length<1){r=n.getAllNodes();for(var o=0;o<r.length;o++)a[r[o].id]=!0;
}else{r=n.getAllNodes(!1);for(var o=0;o<r.length;o++)a[r[o].id]=!0;
for(var o=0;o<s.length;o++){var l=s[o];if(!d.Helpers.hasProperty(a,l)){
var h=n.getNode(l);h&&(r.push(h),a[l]=!0)}}}for(var o=0;o<r.length;o++){
var u=r[o],c=n.getLinks(u.id);t.ensureNode(u,c);for(var p=0;p<c.length;p++){
var f=M.otherEnd(c[p],u.id);if(f&&f!==u.id&&!d.Helpers.hasProperty(a,f)){
a[f]=!0;var g=n.getNode(f);g&&r.push(g)}}}return r.length>0&&(e.changes.newGraph=!0),
!0})},e.prototype.onNewDataObject=function(){var t=this,e=this.chart.settings.navigation.initialNodes;
(null==e||e.length<1)&&this.chart.scene.mainData.getAllNodes(),
this.notifyNavigation(null,function(e){return t.updateGraphWithNewData(null,e),
!1})},e.prototype.updateGraphWithNewData=function(t,e){if(this.isInitialized){
var i,n=this.chart.layer,r=this.chart.scene.mainData,s=n.idToNode,a={};
if(t){i=Object.keys(t);for(var o=0;o<i.length;o++)a[i[o]]=r.getNode(i[o],!1);
}else{for(var l=r.getAllNodes(!1),o=0;o<l.length;o++)a[l[o].id]=l[o];
for(var h=Object.keys(s),o=0;o<h.length;o++)d.Helpers.hasProperty(a,h[o])||(a[h[o]]=null);
h=Object.keys(this.hiddenNodes);for(var o=0;o<h.length;o++)d.Helpers.hasProperty(a,h[o])||(a[h[o]]=null);
i=Object.keys(a)}for(var u=!1,c=Object.keys(s),o=0;o<c.length;o++)if(!s[c[o]].removed){
u=!0;break}for(var p=!1,o=0;o<i.length;o++){var f=i[o],g=a[f],m=d.Helpers.hasProperty(s,f)?s[f]:null;
if(g){if(d.Helpers.hasProperty(this.hiddenNodes,f)){this.ensureNodeRemoved(m);
continue}var v=r.getLinks(f,!1);m&&!m.removed?(this.updateNodeWithNewData(m,g,v),
n.touchNode(m)):(this.ensureNode(g,v),m=s[f],p=!0);for(var y=0;y<v.length;y++){
var S=M.otherEnd(v[y],f);if(S&&S!==f&&!d.Helpers.hasProperty(this.hiddenNodes,S)){
var b=d.Helpers.hasProperty(s,S)?s[S]:null;if(!b||b.removed){
var C=r.getNode(S);C&&this.ensureNode(C,r.getLinks(S))}}}}else r.isNodeLoading(f)?m&&!m.loading&&(m.loading=!0,
n.touchNode(m)):(this.ensureNodeRemoved(m),delete this.hiddenNodes[f]);
}!u&&p&&(e.changes.newGraph=!0)}},e}(N);t.ShowAllNavigator=F;var E;
!function(t){t[t.Hidden=1]="Hidden",t[t.Expanded=2]="Expanded";
}(E||(E={}));var O=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.focusNodes=[],e.extraFlags={},e.needsFullRecalculate=!1,
e.wasReset=!1,e}return n(e,t),e.prototype.expandNode=function(t,e){
var i=this.chart.layer.idToNode,n=d.Helpers.hasProperty(i,t)?i[t]:null,r=!1;
if(n&&!n.removed){n.relevance<2&&(this.extraFlags[t]=E.Expanded,
r=!0);for(var s=0;s<n.dataLinks.length;s++){var a=M.otherEnd(n.dataLinks[s],t);
a&&a!==t&&d.Helpers.hasProperty(this.extraFlags,a)&&this.extraFlags[a]===E.Hidden&&(delete this.extraFlags[a],
r=!0)}r&&(this.scheduleFullRecalculate(),this.chart.notifyChartUpdate(e));
}},e.prototype.collapseNode=function(t,e){var i=this.chart.layer.idToNode,n=d.Helpers.hasProperty(i,t)?i[t]:null,r=!1;
if(n&&!n.removed){d.Helpers.hasProperty(this.extraFlags,t)&&(delete this.extraFlags[t],
r=!0);for(var s=0;s<n.links.length;s++){var a=n.links[s].otherEnd(n);
a&&a!==n&&!a.removed&&a.baseRelevance<n.baseRelevance&&(this.extraFlags[a.id]=E.Hidden,
r=!0)}r&&(this.scheduleFullRecalculate(),this.chart.notifyChartUpdate(e));
}},e.prototype.closeNode=function(t,e){},e.prototype.focusNode=function(t,e,i){
for(var n=0;n<this.focusNodes.length;n++)if(this.focusNodes[n].id===t)return;
if(this.focusNodes.length>=this.chart.settings.navigation.numberOfFocusNodes){
if(!this.chart.settings.navigation.autoUnfocus)return;this.focusNodes.pop();
}this.focusNodes.unshift({id:t,assignedRelevance:e,calculatedRelevance:null
}),d.Helpers.hasProperty(this.extraFlags,t)&&this.extraFlags[t]===E.Hidden&&delete this.extraFlags[t];
var r=this.chart.scene.mainData.getLinks(t,!1);if(r)for(var n=0;n<r.length;n++){
var s=M.otherEnd(r[n],t);s&&s!==t&&d.Helpers.hasProperty(this.extraFlags,s)&&this.extraFlags[s]===E.Hidden&&delete this.extraFlags[s];
}this.chart.notifyChartUpdate(i),this.scheduleFullRecalculate();
},e.prototype.unfocusNode=function(t,e){if(!(this.focusNodes.length<=Math.max(this.chart.settings.navigation.minNumberOfFocusNodes,1)))for(var i=0;i<this.focusNodes.length;i++)if(this.focusNodes[i].id===t)return this.focusNodes.splice(i,1),
this.chart.notifyChartUpdate(e),void this.scheduleFullRecalculate();
},e.prototype.clearFocusNodes=function(t){this.focusNodes=[],
this.extraFlags={},this.wasReset=!0,this.chart.notifyChartUpdate(t),
this.scheduleFullRecalculate()},e.prototype.hideNode=function(t,e){
var i=this.chart.layer.idToNode,n=d.Helpers.hasProperty(i,t)?i[t]:null;
n&&!n.removed&&this.canHideNode(n)&&(this.extraFlags[t]=E.Hidden,
this.chart.notifyChartUpdate(e),this.scheduleFullRecalculate());
},e.prototype.showNode=function(t,e){d.Helpers.hasProperty(this.extraFlags,t)&&this.extraFlags[t]===E.Hidden&&(delete this.extraFlags[t],
this.scheduleFullRecalculate())},e.prototype.showInitialNodes=function(){
this.extraFlags={};var t=this.chart.settings.navigation.initialNodes;
if(t){var e={};this.focusNodes=new Array(t.length);for(var i=0,n=0;n<t.length;n++){
var r=t[n];d.Helpers.hasProperty(e,r)||(e[r]=!0,this.focusNodes[i++]={
id:r,assignedRelevance:-1,calculatedRelevance:null})}i<this.chart.settings.navigation.minNumberOfFocusNodes&&this.chart.error("Too few initialNodes. minNumberOfFocusNodes is "+this.chart.settings.navigation.minNumberOfFocusNodes+" but there are only "+i+" nodes in initialNodes"),
i>this.chart.settings.navigation.numberOfFocusNodes&&(this.chart.error("Too many initialNodes. numberOfFocusNodes is "+this.chart.settings.navigation.numberOfFocusNodes+" but there are "+i+" nodes in initialNodes. Discarding excess focus nodes."),
i=this.chart.settings.navigation.numberOfFocusNodes),this.focusNodes.length=i;
}else this.focusNodes=[];this.wasReset=!0,this.chart.notifyChartUpdate("init"),
this.scheduleFullRecalculate()},e.prototype.save=function(){return{
focusNodes:this.focusNodes,extraFlags:this.extraFlags}},e.prototype.restore=function(t){
this.focusNodes=d.Helpers.realClone(t.focusNodes),this.extraFlags=d.Helpers.clone(t.extraFlags),
this.scheduleFullRecalculate(),this.chart.notifyChartUpdate("restore");
},e.prototype.onNewDataObject=function(){for(var t=this.chart.scene.mainData,e=Object.keys(this.chart.layer.idToNode),i=0;i<e.length;i++)t.getNode(e[i]);
},e.prototype.onSceneChange=function(t){t.changes.filters?(this.updateGraphWithNewData(null,t),
this.needsFullRecalculate=!0):t.changes.dataArrived||t.changes.data?(this.updateGraphWithNewData(t.changes.netChartDataNodes,t),
this.needsFullRecalculate=!0):t.changes.settings&&t.changes.settingsChanges.navigation&&(this.needsFullRecalculate=!0),
this.needsFullRecalculate&&(this.needsFullRecalculate=!1,this.fullRecalculate(t.timeStamp,t));
},e.prototype.scheduleFullRecalculate=function(){this.needsFullRecalculate=!0,
this.chart.events.notifySceneChanges({navigation:!0})},e.prototype.fullRecalculate=function(t,e){
var i=this,n=this.chart.settings.navigation,r=this.chart.layer,s=this.chart.scene.mainData;
if(this.focusNodes.length<1)return r.clearObjects(),this.wasReset&&(e.changes.newGraph=!0),
void(this.wasReset=!1);for(var a=t-this.chart.settings.navigation.expandDelay,o=r.idToNode,l=Object.keys(o),h=r.idToLink,u=0;u<l.length;u++){
var c=o[l[u]];c.baseRelevance=-(1/0),c.relevance=-(1/0),c.focused=!1,
r.touchNode(c)}if(n.numberOfFocusNodes>1)for(var p=null==n.focusNodeTailExpansionRadius?n.focusNodeExpansionRadius:n.focusNodeTailExpansionRadius,f=Math.max(n.focusNodeExpansionRadius+1,1),g=Math.max(p+1,1),m=(f-g)/(n.numberOfFocusNodes-1),u=0;u<this.focusNodes.length;u++)this.focusNodes[u].calculatedRelevance=f-u*m;else this.focusNodes[0].calculatedRelevance=Math.max(n.focusNodeExpansionRadius+1,1);
for(var v=[],y={},S={},u=0;u<this.focusNodes.length;u++){var b=this.focusNodes[u],c=d.Helpers.hasProperty(o,b.id)?o[b.id]:null;
if(!c||c.removed){var C=s.getNode(b.id);if(!C)continue;this.ensureNode(C,s.getLinks(b.id)),
c=o[b.id]}c.focused=!0,c.baseRelevance=b.assignedRelevance>=1?b.assignedRelevance:b.calculatedRelevance,
c.relevance=c.baseRelevance,c.showTimestamp=-(1/0),v.push(c),
y[b.id]=!0,S[b.id]=!0,this.wasReset&&(this.wasReset=!1,e.changes.newGraph=!0);
}for(var x=Object.keys(this.extraFlags),u=0;u<x.length;u++){var w=x[u],c=d.Helpers.hasProperty(o,w)?o[w]:null;
if(c&&!c.removed)if(this.extraFlags[w]===E.Hidden)c.relevance=-100;else if(c.relevance<2){
c.relevance=2;for(var L=0;L<c.links.length;L++){var T=c.links[L].otherEnd(c);
T&&T!==c&&T.relevance<1&&T.relevance!==-100&&(T.relevance=1)}
}else delete this.extraFlags[w]}for(var k=1/0,u=0;u<v.length;u++){
var c=v[u];delete y[c.id];for(var w=c.id,A=c.baseRelevance-1,P=c.relevance-1,I=d.Helpers.hasProperty(S,w)&&c.relevance>0,L=0;L<c.dataLinks.length;L++){
var D=c.dataLinks[L],N=M.otherEnd(D,w);if(N&&N!==w){I&&(S[N]=!0);
var F=d.Helpers.hasProperty(this.extraFlags,N)?this.extraFlags[N]:null;
if(F!==E.Hidden){var O=P;F===E.Expanded&&P>=2&&delete this.extraFlags[N];
var T=d.Helpers.hasProperty(o,N)?o[N]:null,R=!1;if(!T||T.removed){
if(O<=0)continue;var C=s.getNode(N);if(!C)continue;if(c.showTimestamp>a){
k>c.showTimestamp&&(k=c.showTimestamp);continue}this.ensureNode(C,s.getLinks(N)),
T=o[N],T.relevance=O,T.baseRelevance=A,T.showTimestamp=t,R=!0;
}else T.relevance<O&&(T.relevance=O,r.touchNode(T),R=!0),T.baseRelevance<A&&(T.baseRelevance=A,
r.touchNode(T),R=!0);var B=h[D.id],H=Math.min(c.relevance,T.relevance);
B.relevance!==H&&(B.relevance=H,r.touchLink(B)),R&&!d.Helpers.hasProperty(y,N)&&(y[N]=!0,
v.push(T))}}}}for(var u=0;u<l.length;u++){var w=l[u],c=o[w];c.removed||(d.Helpers.hasProperty(S,w)?c.relevance<=0&&this.ensureNodeRemoved(c):(this.ensureNodeRemoved(c),
delete this.extraFlags[w]))}k<1/0&&window.setTimeout(function(){
return i.scheduleFullRecalculate()},k+this.chart.settings.navigation.expandDelay-t);
},e.prototype.canFocusNode=function(t){return!t.focused&&(this.focusNodes.length<this.chart.settings.navigation.numberOfFocusNodes||this.chart.settings.navigation.autoUnfocus);
},e.prototype.canUnfocusNode=function(t){return t.focused&&this.focusNodes.length>Math.max(this.chart.settings.navigation.minNumberOfFocusNodes,1);
},e.prototype.canExpandNode=function(t){return!t.expanded},e.prototype.canCollapseNode=function(t){
for(var e=0;e<t.links.length;e++){var i=t.links[e].otherEnd(t);
if(i&&i!==t&&!i.removed&&i.baseRelevance<t.baseRelevance)return!0;
}return!1},e.prototype.canHideNode=function(t){return!t.focused||this.canUnfocusNode(t);
},e.prototype.canCloseNode=function(t){return!1},e}(D);t.FocusNodesNavigator=O,
function(t){var e=function(){function t(t){this.pointers=[],this.manager=t;
}return t.prototype.addPointer=function(t,e){this.pointers.push(t.identifier),
t.consumed=!0},t.prototype.removePointer=function(t){d.Helpers.removeFromArrayHasty(this.pointers,t.identifier),
t.consumed=!0},t.prototype.movePointer=function(t){t.consumed=!0;
},t}();t.Gesture=e;var i=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.startX=0,e.startY=0,e.lastX=0,e.lastY=0,e.selectedNodes=null,
e}return n(e,t),e.prototype.addPointer=function(e,i){t.prototype.addPointer.call(this,e,i),
this.startX=this.lastX=e.x,this.startY=this.lastY=e.y,this.selectedNodes=new Object(null),
e.cursor="crosshair";var n=this.manager.chart.scene;n.disableSelectionChangeNotification();
var r=n.selection.filter(function(t){return t.dragging});r.length!==n.selection.length&&n.setSelection(r),
this.manager.chart.events.requestPaint()},e.prototype.movePointer=function(e){
t.prototype.movePointer.call(this,e),this.lastX=e.x,this.lastY=e.y,
this.manager.chart.events.requestPaint(),e.cursor="crosshair",
this.updateSelection()},e.prototype.removePointer=function(e){
t.prototype.removePointer.call(this,e);for(var i in this.selectedNodes)this.selectedNodes[i].selectionLock=!1;
this.manager.chart.scene.enableSelectionChangeNotification(),
this.manager.chart.scene.notifySelectionChangesIfNeeded(this.manager.chart,"user"),
this.manager.chart.events.requestPaint()},e.prototype.doAnimations=function(t){
this.pointers.length>0&&(t.changes.position||t.changes.selection||this.manager.chart.layer.hasTopologyChanges())&&this.updateSelection();
},e.prototype.updateSelection=function(){for(var t=this.manager.chart.layer.nodes(),e=this.manager.chart.scene,i=e.fromDisplay(this.startX,this.startY),n=e.fromDisplay(this.lastX,this.lastY),r=Math.min(i.x,n.x),s=Math.min(i.y,n.y),a=Math.max(i.x,n.x),o=Math.max(i.y,n.y),l=0;l<t.length;l++){
var h=t[l];h.removed?this.selectedNodes[h.id]&&delete this.selectedNodes[h.id]:h.dragging||(h.x>=r&&h.x<=a&&h.y>=s&&h.y<=o?this.selectedNodes[h.id]||(this.selectedNodes[h.id]=h,
h.selectionLock=!0,h.selected||e.addToSelection(h)):this.selectedNodes[h.id]&&(delete this.selectedNodes[h.id],
h.selectionLock=!1,h.selected&&e.removeFromSelection(h)))}},e.prototype.paintScene=function(t){
if(this.pointers.length>0){var e=this.manager.chart.settings.style.dragSelection,i=d.Graphics.beginStrokeAndFill(t.context,e);
i.rect(this.startX-.5,this.startY-.5,this.lastX-this.startX,this.lastY-this.startY),
d.Graphics.endStrokeAndFill(t.context,i,e)}},e}(e);t.MultiSelectGesture=i;
var r=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.dragPointers={},e}return n(e,t),e.prototype.addPointer=function(e,i){
t.prototype.addPointer.call(this,e,i);var n=this.manager.chart.scene.selection.filter(function(t){
return!t.dragging});n.indexOf(i.object)<0&&n.push(i.object);for(var r=n.filter(function(t){
return t instanceof u.Node}),s=0;s<r.length;s++)r[s].locks++;for(var s=0;s<n.length;s++)n[s].dragging=!0;
var a=this.manager.chart.scene.fromDisplay(e.x,e.y);this.dragPointers[e.identifier]={
nodes:r,all:n,mainNode:i.object,startPointerX:e.x,startPointerY:e.y,
lastPointerX:e.x,lastPointerY:e.y,lastSceneX:a.x,lastSceneY:a.y
}},e.prototype.removePointer=function(e){t.prototype.removePointer.call(this,e);
var i=this.dragPointers[e.identifier];delete this.dragPointers[e.identifier];
for(var n=0;n<i.nodes.length;n++)i.nodes[n].locks--;for(var n=0;n<i.all.length;n++)i.all[n].dragging=!1;
this.manager.autoZoomIn(e,i.mainNode)},e.prototype.movePointer=function(e){
t.prototype.movePointer.call(this,e);var i=this.dragPointers[e.identifier];
i.lastPointerX=e.x,i.lastPointerY=e.y;var n=this.manager.chart.settings.interaction.selection,r=this.manager.chart.scene,s=r.fromDisplay(e.x,e.y),a=s.x-i.lastSceneX,o=s.y-i.lastSceneY;
if(0!==a||0!==o){i.lastSceneX=s.x,i.lastSceneY=s.y;var l=n.lockNodesOnMove;
if(l){var h=e.x-i.startPointerX,u=e.y-i.startPointerY,c=this.manager.chart.settings.advanced.pointer,d=Math.max(c.clickSensitivity,c.longPressSensitivity);
l=h*h+u*u>d*d}this.moveNodes(i.nodes,a,o,l),this.manager.chart.events.notifySceneChanges({
coordinates:!0})}},e.prototype.moveNodes=function(t,e,i,n){for(var r=this.manager.chart.scene,s=r.getVisibleBounds(),a=r.zoom,o=this.manager.chart.settings.interaction.selection.allowMoveNodesOffscreen,l=this.manager.chart.layer,h=0;h<t.length;h++){
var u=t[h];if(u.x+=e,u.y+=i,n&&!u.userLock&&(u.userLock=!0,l.touchNode(u)),
!o){var c=1.2*u.renderHwidth/a,d=1.2*u.renderHheight/a;u.x=Math.min(Math.max(u.x,s.x0+c),s.x1-c),
u.y=Math.min(Math.max(u.y,s.y0+d),s.y1-d)}}},e.prototype.doAnimations=function(t){
for(var e=this.manager.chart.scene,i=0;i<this.pointers.length;i++){
var n=this.dragPointers[this.pointers[i]],r=e.fromDisplay(n.lastPointerX,n.lastPointerY),s=r.x-n.lastSceneX,a=r.y-n.lastSceneY;
0===s&&0===a||(n.lastSceneX=r.x,n.lastSceneY=r.y,this.moveNodes(n.nodes,s,a,!1),
t.changes.coordinates=!0)}},e}(e);t.NodeDragGesture=r;var s=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.pinnedSceneX=0,
e.pinnedSceneY=0,e}return n(e,t),e.prototype.addPointer=function(e,i){
t.prototype.addPointer.call(this,e,i);var n=this.manager.chart.scene.fromDisplay(e.x,e.y);
this.pinnedSceneX=n.x,this.pinnedSceneY=n.y},e.prototype.movePointer=function(e){
t.prototype.movePointer.call(this,e);var i=this.manager.chart.scene;
i.autoZoomMode=!1;var n=i.fromDisplay(e.x,e.y);i.centerX+=this.pinnedSceneX-n.x,
i.centerY+=this.pinnedSceneY-n.y,e.changes.position=!0},e}(e);
t.PanGesture=s;var a=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.centerX=0,e.centerY=0,e.centerDistance=0,
e}return n(e,t),e.prototype.addPointer=function(e,i){if(t.prototype.addPointer.call(this,e,i),
1===this.pointers.length)this.x1=e.x,this.y1=e.y;else{this.x2=e.x,
this.y2=e.y;var n=this.manager.chart.scene,r=n.fromDisplay((this.x1+this.x2)/2,(this.y1+this.y2)/2);
this.centerX=r.x,this.centerY=r.y;var s=this.x1-this.x2,a=this.y1-this.y2,o=Math.sqrt(s*s+a*a);
this.centerDistance=o/n.zoom}},e.prototype.movePointer=function(e){
t.prototype.movePointer.call(this,e),e.identifier===this.pointers[0]?(this.twoFingerDrag(e.x,e.y,this.x2,this.y2),
this.x1=e.x,this.y1=e.y):(this.twoFingerDrag(this.x1,this.y1,e.x,e.y),
this.x2=e.x,this.y2=e.y),e.changes.position=!0},e.prototype.twoFingerDrag=function(t,e,i,n){
var r=this.manager.chart.settings.interaction,s=this.manager.chart.scene;
s.autoZoomMode=!1;var a=i-t,o=n-e,l=this.manager.chart.settings.layout.mode;
!r.rotation.fingers||"static"!==l&&"dynamic"!==l||this._twoFingerRotation(t,e,i,n);
var h=Math.sqrt(a*a+o*o)/s.zoom,u=(i+t)/2,c=(n+e)/2;if(!r.rotation.fingers&&r.panning.enabled){
var d=s.fromDisplay(u,c);s.centerX+=this.centerX-d.x,s.centerY+=this.centerY-d.y;
}if(r.zooming.fingers){var p=h/this.centerDistance;this.manager.chart.autoZoom.manualZoom(p,u,c);
}},e.prototype._twoFingerRotation=function(t,e,i,n){var r=i-t,s=n-e,a=Math.atan2(s,r),o=Math.atan2(this.y2-this.y1,this.x2-this.x1),l=a-o;
if(0===l)return!1;var h,u,c,p,f,g=t-this.x1,m=e-this.y1,v=i-this.x2,y=n-this.y2,S=g*g+m*m,b=v*v+y*y;
S>=b?(h=this.x1,u=this.y1,c=t,p=e,f=Math.sqrt(S)):(h=this.x2,
u=this.y2,c=i,p=n,f=Math.sqrt(b));var C=c-h,x=p-u,w=C/f,L=x/f,T=(Math.PI+l)/2,k=Math.PI-T,A=d.Geometry.rotateVector(w,L,Math.sin(k),Math.cos(k)),M=d.Geometry.rotateVector(w,L,Math.sin(T),Math.cos(T)),P=d.Geometry.lineIntersectsLine(0,0,A.x,A.y,C,x,C+M.x,x+M.y);
if(P===1/0)return!1;for(var I,D=h+A.x*P,N=u+A.y*P,F=this.manager.chart.scene.fromDisplay(D,N),E=F.x,O=F.y,R=this.manager.chart.layer.nodes(),B=Math.sin(l),H=Math.cos(l),z=0;z<R.length;z++){
var U=R[z];U.dragging||(I=d.Geometry.rotateVector(U.x-E,U.y-O,B,H),
U.x=E+I.x,U.y=O+I.y)}return!0},e}(e);t.TwoFingerGesture=a;var o={
object:null,details:null},l=function(t){function l(n){var o=t.call(this)||this;
return o.animationOrder=2e3,o.updateOrder=1100,o.paintOrder=37,
o.hoverPointer=null,o.ignoreGesture=new e(o),o.postponeGesture=new e(o),
o.multiSelectGesture=new i(o),o.nodeDragGesture=new r(o),o.panGesture=new s(o),
o.twoFingerGesture=new a(o),o.pointerMap={},o.chart=n,o}return n(l,t),
l.prototype.findObject=function(t){var e=this.chart.renderer.findObjectAt(t.x,t.y,this.chart.settings.interaction.selection.tolerance);
return e||o},l.prototype.assignPointer=function(t,e,i){var n=this.pointerMap[t.identifier];
return n?(n.gesture.removePointer(t),n.gesture=i):n=this.pointerMap[t.identifier]={
gesture:i,lastX:t.x,lastY:t.y,longPressGesture:null},i.addPointer(t,e),
n},l.prototype.reassignToTwoFinger=function(t,e,i){var n=this.pointerMap[t],r=new d.MouseEvent(n.lastX,n.lastY,e.timeStamp,t);
n.longPressGesture=null,this.assignPointer(r,o,this.twoFingerGesture),
this.assignPointer(e,i,this.twoFingerGesture)},l.prototype.assignUnknownPointer=function(t,e){
e.object instanceof u.Node&&this.chart.settings.interaction.nodesMovable&&e.object.draggable?this.assignNodePointer(t,e):this.assignEmptyPointer(t,e);
},l.prototype.assignEmptyPointer=function(t,e){var i=this.chart.settings.interaction,n=i.rotation.fingers||i.zooming.fingers,r=i.selection.enabled&&i.selection.dragSelect;
if(this.twoFingerGesture.pointers.length>0){var s=this.assignPointer(t,e,this.ignoreGesture);
r&&(s.longPressGesture=this.multiSelectGesture)}else if(n&&this.panGesture.pointers.length>0)this.reassignToTwoFinger(this.panGesture.pointers[0],t,e);else if(n&&this.postponeGesture.pointers.length>0)this.reassignToTwoFinger(this.postponeGesture.pointers[0],t,e);else if(n&&this.nodeDragGesture.pointers.length>0)this.reassignToTwoFinger(this.nodeDragGesture.pointers[0],t,e);else{
var s=this.assignPointer(t,e,i.panning.enabled&&this.panGesture.pointers.length<1?this.panGesture:this.postponeGesture);
r&&(s.longPressGesture=this.multiSelectGesture)}},l.prototype.assignNodePointer=function(t,e){
var i=this.chart.settings.interaction,n=i.rotation.fingers||i.zooming.fingers;
if(n&&this.panGesture.pointers.length>0)this.reassignToTwoFinger(this.panGesture.pointers[0],t,e);else if(n&&this.postponeGesture.pointers.length>0&&this.twoFingerGesture.pointers.length<1)this.reassignToTwoFinger(this.postponeGesture.pointers[0],t,e);else if(e.object.dragging){
var r=this.assignPointer(t,e,this.postponeGesture);r.longPressGesture=this.ignoreGesture;
}else{var r=this.assignPointer(t,e,this.nodeDragGesture);r.longPressGesture=this.ignoreGesture;
}},l.prototype.updateSelection=function(t,e){var i=this.chart.settings.interaction.selection;
if(i.enabled&&(e.object instanceof u.Node&&i.nodesSelectable||e.object instanceof u.Link&&i.linksSelectable)&&!e.object.selectionLock&&!e.object.dragging){
var n=!1;if(t.shiftKey||t.ctrlKey)n=e.object.selected?this.chart.scene.removeFromSelection(e.object):this.chart.scene.addToSelection(e.object);else if(!e.object.selected){
var r=this.chart.scene.selection.filter(function(t){return t.dragging||t.selectionLock;
});r.push(e.object),n=this.chart.scene.setSelection(r)}n&&this.chart.scene.notifySelectionChangesIfNeeded(this.chart,"user");
}},l.prototype.onPointerDown=function(t){var e=this.findObject(t);
this.chart.notifyPointerDown(t,this.buildClickEventArgs(t)),t.defaultPrevented&&(t.consumed=!0),
this.updateSelection(t,e),this.assignUnknownPointer(t,e)},l.prototype.onPointerUp=function(t){
this.chart.notifyPointerUp(t,this.buildClickEventArgs(t)),t.defaultPrevented&&(t.consumed=!0);
var e=this.pointerMap[t.identifier];if(e.gesture.removePointer(t),
delete this.pointerMap[t.identifier],e.gesture===this.twoFingerGesture){
var i=this.twoFingerGesture.pointers[0],n=this.pointerMap[i];delete this.pointerMap[i];
var r=new d.MouseEvent(n.lastX,n.lastY,t.timeStamp,i);this.twoFingerGesture.removePointer(r),
this.assignPointer(r,o,this.chart.settings.interaction.panning.enabled?this.panGesture:this.postponeGesture);
}},l.prototype.onPointerDrag=function(t){this.chart.notifyPointerDrag(t,this.buildClickEventArgs(t)),
t.defaultPrevented&&(t.consumed=!0);var e=this.findObject(t);t.cursor=e.object&&e.object.cursor||"default";
var i=this.pointerMap[t.identifier];i.lastX=t.x,i.lastY=t.y,i.gesture.movePointer(t);
},l.prototype.onPointerCancel=function(t){this.onPointerUp(t);
},l.prototype.onInstantClick=function(t){if(!t.shiftKey&&!t.ctrlKey&&!this.findObject(t).object){
var e=this.chart.scene.selection.filter(function(t){return t.dragging||t.selectionLock;
});e.length!==this.chart.scene.selection.length&&(this.chart.scene.setSelection(e),
this.chart.scene.notifySelectionChangesIfNeeded(this.chart,"user"));
}},l.prototype.doAnimations=function(t){this.nodeDragGesture.doAnimations(t),
this.multiSelectGesture.doAnimations(t)},l.prototype.paintScene=function(t){
this.multiSelectGesture.paintScene(t)},l.prototype.buildClickEventArgs=function(t){
var e=this.chart.createEventArguments(t,"user"),i=this.findObject(t);
e.clickItem=i.details;var n=i.object;return n instanceof u.Node?(e.clickNode=n,
this.autoZoomIn(t,n)):e.clickLink=n,e},l.prototype.updateHover=function(t,e){
t.changes.current=!0,this.chart.scene.setActiveObject(e.object,e.details),
this.chart.notifyHoverChanged(t,this.chart.createEventArguments(null,"api"));
},l.prototype.autoZoomIn=function(t,e){this.chart.scene.lastClickedNode=e,
this.chart.settings.interaction.zooming.autoZoomAfterClick&&(this.chart.scene.autoZoomMode=!0,
t.changes.zoom=!0)},l.prototype.onPointerMove=function(t){if(this.chart.notifyPointerMove(t,this.chart.createEventArguments(null,"user")),
t.defaultPrevented&&(t.consumed=!0),!this.chart.scene.xyInChart(t.x,t.y))return void this.onPointerOut(t);
this.hoverPointer=t.identifier;var e=this.findObject(t);t.cursor=e.object&&e.object.cursor||"default",
e.object===(this.chart.scene.hoverLink||this.chart.scene.hoverNode)&&e.details===this.chart.scene.hoverItem||this.updateHover(t,e);
},l.prototype.onPointerOut=function(t){this.hoverPointer===t.identifier&&(this.hoverPointer=null,
this.updateHover(t,o)),this.pointerMap[t.identifier]&&this.onPointerUp(t);
},l.prototype.onWheel=function(t){if(this.chart.scene.xyInChart(t.x,t.y)&&this.chart.settings.interaction.zooming.wheel){
var e=Math.pow(1+this.chart.settings.interaction.zooming.sensitivity,.004*t.wheely);
this.chart.autoZoom.manualZoom(e,t.x,t.y),t.consumed=!0,t.changes.position=!0;
}},l.prototype.onClick=function(t){this.chart.scene.xyInChart(t.x,t.y)&&(this.chart.notifyClick(t,this.buildClickEventArgs(t)),
t.defaultPrevented&&(t.consumed=!0))},l.prototype.onRightClick=function(t){
this.chart.scene.xyInChart(t.x,t.y)&&(this.chart.notifyRightClick(t,this.buildClickEventArgs(t)),
t.defaultPrevented&&(t.consumed=!0))},l.prototype.onLongPress=function(t){
if(this.chart.scene.xyInChart(t.x,t.y)){var e=this.pointerMap[t.identifier];
e&&(e.longPressGesture&&(e.longPressGesture===this.multiSelectGesture&&this.multiSelectGesture.pointers.length>0&&(e.longPressGesture=this.ignoreGesture),
this.assignPointer(t,o,e.longPressGesture),e.longPressGesture=null),
t.consumed=e.gesture!==this.ignoreGesture)}},l.prototype.onDoubleClick=function(t){
if(this.chart.scene.xyInChart(t.x,t.y))if(this.chart.notifyDoubleClick(t,this.buildClickEventArgs(t)),
t.defaultPrevented)t.consumed=!0;else{var e=this.chart.settings.interaction.zooming.doubleClickZoom;
e&&this.chart.settings.interaction.zooming.zoomInOnDoubleClick&&(this.chart.autoZoom.manualZoom(e,t.x,t.y),
t.changes.position=!0,t.consumed=!0)}},l}(d.ChartElement);t.GestureManager=l;
}(i=t.Gestures||(t.Gestures={}));var R=function(t){function e(){
return t.apply(this,arguments)||this}return n(e,t),e.prototype.showHide=function(t,e){
t.style.display=e?"":"none"},e.prototype.btnExpand=function(t){
var e=this;this.buildButton(t,"DVSL-NC-button-expand",this.scene.settings.localization.menu.expand,this.scene.settings.localization.menu.expand,null,function(t,i){
e.chart.expandNode(t.id)},function(t,i){e.showHide(i,e.chart.navigator.canExpandNode(t));
})},e.prototype.btnCollapse=function(t){var e=this;this.buildButton(t,"DVSL-NC-button-collapse",this.scene.settings.localization.menu.collapse,this.scene.settings.localization.menu.collapse,null,function(t,i){
e.chart.collapseNode(t.id)},function(t,i){e.showHide(i,e.chart.navigator.canCollapseNode(t));
})},e.prototype.btnClose=function(t){var e=this;this.buildButton(t,"DVSL-NC-button-collapse",this.scene.settings.localization.menu.close,this.scene.settings.localization.menu.close,null,function(t,i){
e.chart.closeNode(t.id)},function(t,i){e.showHide(i,e.chart.navigator.canCloseNode(t));
})},e.prototype.btnFocus=function(t){var e=this;this.buildButton(t,"DVSL-NC-button-focus",this.scene.settings.localization.menu.focus,this.scene.settings.localization.menu.focus,null,function(t,i){
e.chart.addFocusNode(t.id,-1)},function(t,i){e.showHide(i,e.chart.navigator.canFocusNode(t));
})},e.prototype.btnUnfocus=function(t){var e=this;this.buildButton(t,"DVSL-NC-button-unfocus",this.scene.settings.localization.menu.unfocus,this.scene.settings.localization.menu.unfocus,null,function(t,i){
e.chart.removeFocusNode(t.id)},function(t,i){e.showHide(i,e.chart.navigator.canUnfocusNode(t));
})},e.prototype.btnLock=function(t){var e=this;this.buildButton(t,"DVSL-NC-button-lock",this.scene.settings.localization.menu.fixed,this.scene.settings.localization.menu.fixed,null,function(t,i){
e.chart.unlockNode(t.id)},function(t,i){e.showHide(i,t.userLock);
})},e.prototype.btnUnlock=function(t){var e=this;this.buildButton(t,"DVSL-NC-button-unlock",this.scene.settings.localization.menu.dynamic,this.scene.settings.localization.menu.dynamic,null,function(t,i){
e.chart.lockNode(t.id)},function(t,i){e.showHide(i,!t.userLock);
})},e.prototype.btnHide=function(t){var e=this;this.buildButton(t,"DVSL-NC-button-hide",this.scene.settings.localization.menu.hide,this.scene.settings.localization.menu.hide,null,function(t,i){
e.chart.hideNode(t.id)},function(t,i){e.showHide(i,e.chart.navigator.canHideNode(t));
})},e.prototype.buildDefaultButton=function(t,e){if(t instanceof u.Node)switch(e){
case"btn:expand":this.btnExpand(t);break;case"btn:collapse":this.btnCollapse(t);
break;case"btn:close":this.btnClose(t);break;case"btn:focus":
this.btnFocus(t);break;case"btn:unfocus":this.btnUnfocus(t);break;
case"btn:lock":this.btnLock(t);break;case"btn:unlock":this.btnUnlock(t);
break;case"btn:hide":this.btnHide(t);break;case"expand":this.btnExpand(t),
this.btnCollapse(t),this.btnClose(t);break;case"focus":this.btnFocus(t),
this.btnUnfocus(t);break;case"lock":this.btnLock(t),this.btnUnlock(t);
break;case"hide":this.btnHide(t);break;default:this.chart.error("The node menu button with name `"+e+"` was not recognized.");
}else this.chart.error("The link menu does not support any named buttons.");
},e}(u.Menu);t.Menu=R;var B=function(e){function s(n,s){var a=e.call(this,new f(n),new T,s)||this;
a.isLayoutFrozen=!1,a.focusNodeStack=[];var o="focusnodes"===a.settings.navigation.mode&&a.settings.navigation.focusAutoFadeout;
return a.layer=new u.NodesLayer(a,a.settings,o),a.graph=new P(a),
a.navigator=a.events.addElement(D.CreateNavigator(a)),a.gestures=a.events.addElement(new i.GestureManager(a)),
a.layout=a.events.addElement(r.LayoutBase.ConstructLayout(a)),
a.info=a.events.addElement(new u.InfoPopup(a)),a.menu=a.events.addElement(new t.Menu(a)),
a.autoZoom=a.events.addElement(new I(a)),a.renderer=a.events.addElement(new k(a)),
a.legend=a.events.addElement(new p(a)),a.autoZoom.resetZoom=!0,
a.scene.loading=!1,a.navigator.showInitialNodes(),a.finalInitialize(),
a}return n(s,e),s.prototype.createDataObj=function(t){return new M(this,t);
},s.prototype.getData=function(t){return e.prototype.getData.call(this,t);
},s.prototype.onSettingsChanged=function(t){var e={};this.layer.onSettingsChanged(t),
t.navigation&&t.navigation.mode&&(this.events.removeElement(this.navigator),
this.navigator=D.CreateNavigator(this),this.events.addElement(this.navigator));
var i=!(!t.navigation||!t.navigation.mode&&!t.navigation.initialNodes);
if(t.data&&t.data.length){var n=t.data[0];(n.dataFunction||n.format||n.preloaded||n.url||n.randomNodes)&&(i=!0);
}i&&(this.navigator.showInitialNodes(),this.autoZoom.resetZoom=!0),
t.filters&&(e.filters=!0),t.style&&(e.style=!0),t.layout&&t.layout.mode&&(this.events.removeElement(this.layout),
this.layout=r.LayoutBase.ConstructLayout(this),this.events.addElement(this.layout),
this.isLayoutFrozen=!1),this.events.notifySceneChanges(e)},s.prototype.save=function(){
var t=this.graph.save(),e=this.navigator.save();return JSON.stringify({
xy:t,nav:e})},s.prototype.restore=function(t,e){if(t){var i=JSON.parse(t),n=i.xy,r=i.nav;
r&&this.navigator.restore(r),n&&this.graph.restore(n),this.autoZoom.resetZoom=!0;
}},s.prototype.saveNavigation=function(){var t=JSON.stringify(this.navigator.save());
return"{}"===t?null:t},s.prototype.restoreNavigation=function(t){
this.navigator.restore(JSON.parse(t))},s.prototype.getCurrentNodes=function(){
for(var t=[],e=0,i=this.layer.nodes();e<i.length;e++){var n=i[e];
n.removed||t.push(n)}return t},s.prototype.getCurrentLinks=function(){
for(var t=[],e=0,i=this.layer.links();e<i.length;e++){var n=i[e];
n.removed||t.push(n)}return t},s.prototype.getNodeDimensions=function(t){
var e;if(e=d.Helpers.isString(t)?this.getNode(t):t,!e)return null;
var i=this.scene.toDisplay(e.x,e.y),n=i.x,r=i.y,s=e.hHeight*this.scene.zoom,a=e.hWidth*this.scene.zoom;
return{x:n,y:r,radius:s,hwidth:a}},s.prototype.lockNode=function(t,e,i){
void 0===e&&(e=null),void 0===i&&(i=null),d.Helpers.isObjectOrArray(t)&&(t=t.id),
this.graph.lockNode(t,e,i)},s.prototype.unlockNode=function(t){
t.id&&(t=t.id),this.graph.unlockNode(t)},s.prototype.addFocusNode=function(t,e){
return t.id&&(t=t.id),this.settings.navigation.autoZoomOnFocus&&(this.scene.autoZoomMode=!0),
this.focusNodeStack.push(t),this.navigator.focusNode(t,e,"api");
},s.prototype.getLastFocusNode=function(){for(;this.focusNodeStack.length>0;){
var t=this.focusNodeStack[this.focusNodeStack.length-1],e=d.Helpers.hasProperty(this.layer.idToNode,t)?this.layer.idToNode[t]:null;
if(e&&e.focused)return e;this.focusNodeStack.pop()}if(this.settings.navigation.initialNodes)for(var i=0;i<this.settings.navigation.initialNodes.length;i++){
var t=this.settings.navigation.initialNodes[i],e=d.Helpers.hasProperty(this.layer.idToNode,t)?this.layer.idToNode[t]:null;
if(e)return e}var n=this.layer.nodes();return n.length>0?n[0]:null;
},s.prototype.clearFocus=function(){this.navigator.clearFocusNodes("api");
},s.prototype.removeFocusNode=function(t){return t.id&&(t=t.id),
this.navigator.unfocusNode(t,"api")},s.prototype.expandNode=function(t){
return t.id&&(t=t.id),this.navigator.expandNode(t,"api")},s.prototype.collapseNode=function(t){
return t.id&&(t=t.id),this.navigator.collapseNode(t,"api")},s.prototype.closeNode=function(t){
return t.id&&(t=t.id),this.navigator.closeNode(t,"api")},s.prototype.hideNode=function(t){
return t.id&&(t=t.id),this.navigator.hideNode(t,"api")},s.prototype.showNode=function(t){
return this.navigator.showNode(t,"api")},s.prototype.getNode=function(t){
return this.layer.idToNode[t]},s.prototype.getLink=function(t){
return this.layer.idToLink[t]},s.prototype.touchObjects=function(t){
for(var e=0;e<t.length;e++){var i=this.layer,n=i.findObjectById(t[e]);
n&&i.touchNodeOrLink(n)}},s.prototype.setZoom=function(t,e){this.autoZoom.setZoom(t,e);
},s.prototype.resetLayout=function(){this.layout.resetLayout(),
this.autoZoom.setZoom("overview",!1),this.events.notifySceneChanges({
layout:!0})},s.prototype.removeData=function(t,e){if(void 0===e&&(e="default"),
null==e&&(e="default"),!this.removed){var i=this.getData(e),n=i.removeData(t);
n.data={},n.data[e]=!0,this.events.notifySceneChanges(n)}},s.prototype.exportData=function(t,e){
var i;return i=t?this.graph.exportData():this.scene.mainData.exportData(),
e&&this.graph.exportCoordinates(i.nodes),i},s.prototype.hideMenu=function(){
this.menu.hideMenu()},s.prototype.createEventArguments=function(t,i){
var n=e.prototype.createEventArguments.call(this,t,i),r=this.layer;
return r&&(n.nodes=r.nodes(),n.links=r.links()),n},s.prototype.defaultClick=function(t,e){
if(!t.shiftKey&&!t.ctrlKey){var i=e.clickNode;i&&this.scene.settings.navigation.expandOnClick&&(i.expanded||(this.expandNode(i.id),
t.preventDefault()))}},s.prototype.defaultRightClick=function(t,e){
e.clickNode&&(this.scene.mainData.getLinks(e.clickNode.id),this.menu.toggleNodeMenu(e.clickNode),
t.preventDefault()),e.clickLink&&(this.menu.toggleLinkMenu(t.x,t.y,e.clickLink),
t.preventDefault())},s.prototype.defaultDoubleClick=function(t,e){
var i=e.clickNode;i&&(this.addFocusNode(i.id,-1),t.preventDefault());
},s.prototype.scrollIntoView=function(t,e){for(var i,n=[],r=0;r<t.length;r++){
var s=t[r];s instanceof u.Node?n.push(s):d.Helpers.isString(s)&&(i=this.getNode(s))?n.push(i):this.error("scrollIntoView: the argument is not a node or the ID cannot be found: `"+s+"`.");
}this.autoZoom.scrollIntoView(n,e)},s.prototype.freezeLayout=function(){
this.isLayoutFrozen||(this.events.removeElement(this.layout),
this.isLayoutFrozen=!0,this.events.notifySceneChanges({layout:!0
}))},s.prototype.unfreezeLayout=function(){this.isLayoutFrozen&&(this.events.addElement(this.layout),
this.isLayoutFrozen=!1,this.events.notifySceneChanges({layout:!0
}))},s.prototype.remove=function(){e.prototype.remove.call(this),
this.info.remove(),this.menu.remove()},s}(u.Impl);t.Impl=B}(h=i.NetChart||(i.NetChart={})),
function(t){var e=t.Bar||(t.Bar={}),i=t.Series||(t.Series={}),r=t.Renderers||(t.Renderers={}),s=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.panel=new d.SettingsLegendPanel("bottom","left",(void 0),95),
e.advanced=new o,e.marker=new a,e}return n(e,t),e}(d.SettingsLegend);
t.SettingsLegend=s;var a=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.shape=null,e}return n(e,t),e}(d.SettingsLegendMarker);
t.SettingsLegendMarker=a;var o=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.disabledSeries={fillColor:"rgba(191,187,185,0.3)",lineColor:"rgba(64,62,62,0.3)",
textColor:"rgba(64,62,62,0.3)"},e}return n(e,t),e}(d.SettingsLegendAdvanced);
t.SettingsLegendAdvanced=o;var l=function(t){function e(e,i,n,r,s,a,o){
var l=t.call(this,i,n,r,s)||this;return l.seriesHovered=!1,l.disabledSeries=o,
l.series=e,l.enabled=a,l}return n(e,t),e.prototype.isHovered=function(){
return this.hoverCount>0||this.seriesHovered},e}(d.LegendEntry),h=function(t){
function e(e){var i=t.call(this,e)||this;return i.paintOrder=75,
i.updateOrder=100,i}return n(e,t),e.prototype.notifyHoveredSeries=function(t){
for(var e=0;e<this.entries.length;e++){var i=this.entries[e];i.seriesHovered=i.series.indexOf(t)>=0;
}},e.prototype.getLastHoveredSeries=function(){var t=this.getLastHoveredEntry();
return t?t.series[0]:null},e.prototype.onSceneChange=function(e){
t.prototype.onSceneChange.call(this,e);var i=e.changes;i.linearChartSeries&&(this.rebuildItems(e),
i.bounds=!0)},e.prototype.paintMarker=function(t,e,i,n,s){var a=t.context,o=s.isEnabled()?s.series[0]:s.disabledSeries,l=this.settings.marker,h=o.style.legend.marker,u=h.shape||l.shape;
if(a.beginPath(),u){var c={fillColor:h.fillColor||o.style.fillColor||o.style.lineColor,
lineColor:h.lineColor||l.lineColor,lineWidth:h.lineWidth||1};null!=h.width&&(n=h.width/2),
d.Graphics.strokeMarker(a,u,e,i,n),d.Graphics.paint(a,c)}else{
var p=l.size,f=e-p/2,g=e,m=e+p/2,v=p/2.1,y=p/2,S=3*p/4,b=i+p/2;
if(o instanceof x){var L=o.style.marker.width;o.style.marker.width*=.8;
var T=[[v,y,S]],k=[f,g,m],A=[k,[b-v,b-y,b-S]],M=b-y,P=new r.Line(null,[o]);
P.paintLines(a,[o],[{markerY:null,segments:A}],k,[null],T,b),
P.paintMarkers(a,o,[g],[y],[M]),o.style.marker.width=L}else if(o instanceof C){
var T=[p,p],I=new r.Columns(this.chart.scene,[o]);I.paintStack(t,[e],[p/2],[T],[null],b);
}else if(o instanceof w){var D=new r.Candlestick(this.chart.scene,[o]),N=[[0],[p/3],[2*p/3],[p]];
D.paintStack(t,[e],[p/2],N,[null],b)}}},e.prototype.rebuildItems=function(t){
for(var e=[],n=this.chart.scene.settings._computedSeries,r=this.settings.advanced.disabledSeries,s={},a=this.settings.text.fillColor,o=0;o<n.length;o++){
var h=n[o];if(h.showInLegend){var u=void 0;if(h instanceof w){
if(d.Helpers.hasProperty(s,h.stack)){s[h.stack].push(h);continue;
}u=[h],s[h.stack]=u}else u=[h];var c=h.nameLegend||h.name||this.chart.settings.localization.unnamedSeries,p=d.Helpers.realClone(h),f=p.style;
f.fillColor=f._currentFillStyle=f.fillColor&&r.fillColor,f._currentFillStyleKey=null,
f.fillPattern&&(f._fillPatternOpacity=.3,i.Stack.computeFillPattern(this.chart,t.context,f)),
f.lineColor=r.lineColor;var g=f.legend.marker;g.fillColor=g.fillColor&&r.fillColor,
g.lineColor=g.lineColor&&r.lineColor,e.push(new l(u,c,h.style.legend.textColor||a,r.textColor,h.legendGroupId,h.enabled,p));
}}this.resetEntries(e)},e.prototype.itemClicked=function(e,i){
t.prototype.itemClicked.call(this,e,i);for(var n=0;n<this.entries.length;n++)for(var r=this.entries[n],s=0;s<r.series.length;s++)r.series[s].enabled=r.enabled;
this.chart.events.notifySceneChanges({linearChartSeries:!0})},
e}(d.Legend);t.Legend=h;var u=function(){function t(){this.enabled=!0,
this.animate="auto",this.initialAnimationValue=null,this.initialAnimationValueMultiplier=4.5,
this.logScale=!1,this.position="outside",this.side="left",this.title=null,
this.minValue=null,this.maxValue=null,this.size=null,this.hgrid=null,
this.axisLine=!1,this.scaleAdjustmentTolerance=.3,this.scaleAdjustmentAnimationDelay=200,
this.scaleAdjustmentAnimation="=",this.scaleStep=null,this.scaleMinStep=0,
this.zeroLine="visible",this.valueFormatterFunction=null,this.style={
title:{textStyle:{fillColor:"#000000",font:"13px Arial"},reverseDirection:!1,
align:"center",margin:5},tick:{lineColor:"#AAAAAA"},axisLine:{
lineColor:"rgba(127,127,127,0.5)",lineWidth:1},valueLabel:{textStyle:{
fillColor:"#000000",font:"11px Arial"},margin:0},labelSpacing:25,
baseLine:{lineColor:"rgba(127,127,127,0.5)",depthColor:"rgba(127,127,127,0.5)",
lineWidth:1,lineDepth:0,showLabel:1},hgrid:{lineColor:"rgba(255,255,255,0.2)"
}},this.thresholds=[]}return t}();t.SettingsValueAxis=u;var c=function(){
function t(){this.from=-(1/0),this.to=1/0,this.position="under",
this.style={fillColor:"rgba(255,133,152,0.2)",lineColor:"rgba(255,0,0,0.5)",
lineWidth:1,lineDash:null}}return t}();t.SettingsValueAxisThreshold=c;
var p=function(){function t(t,e){var i=this;this.locations=[],
this.values=[],this.labels=[],this.title=null,this.cachedUnits={
lin:[],log:[]},this.isPrimary=!1,this._chart=t,this.options=e,
this.events=t.events,this.scene=t.scene,this.isLogScale=this.options.logScale,
this.isInside="inside"===this.options.position,this.panel=new d.ChartPanel,
this.panel.packingOrder=110,this.panel.computeSize=function(t,e,n,r){
return i.computePanelSize(t,e,n,r)},this.lastMaxValue=0,this.lastMinValue=0,
this.minValue=0,this.maxValue=0,this.scale=0,this.zeroY=0,this.logOffset=1,
this.minValueAnimation=null,this.maxValueAnimation=null,this.axisChanged=!1,
this.seriesDepth=0,this.seriesMinValue=null,this.seriesMaxValue=null,
this.series=0,this.createTitle()}return t.prototype.createTitle=function(){
var t=this.options,e=t.style.title,i=this.title=new d.Label(e);
i.text=t.title,i.allowCache=!1;var n=i.style.angle;null==n&&(n="right"===t.side?90:-90),
e.reverseDirection&&(n=-n),i.style.angle=n},t.prototype.getPanel=function(){
var t=this.options;return t.enabled?(this.panel.location=t.position,
this.panel.side=t.side,this.panel):null},t.prototype.setPanel=function(t){
null!=t&&(this.panel=t)},t.prototype.computePanelSize=function(t,e,i,n){
if(!this._chart.assetsLoaded)return{width:0,height:0};var r=8,s=this.title;
s&&(s.style.maxWidth=e);var a=this.options;if(a.size)r=a.size;else{
var o=a.style.valueLabel,l="9999 M";a.valueFormatterFunction?l=a.valueFormatterFunction(1e7-1-2e-4,"M",1e6,l)||l:r++,
r+=2*o.margin+d.Graphics.getTextWidth(i,o.textStyle,l),s&&s.text&&(n.measure(i,s),
r+=2*(s.style.margin+s.hheight))}return{width:Math.ceil(r),height:e
}},t.prototype.receiveSeriesGeometry=function(t,e,i){null!==this.options.minValue?this.seriesMinValue=this.options.minValue:void 0!==t&&(null!==this.seriesMinValue?this.seriesMinValue=Math.min(t,this.seriesMinValue):this.seriesMinValue=t),
null!==this.options.maxValue?this.seriesMaxValue=this.options.maxValue:void 0!==e&&(null!==this.seriesMaxValue?this.seriesMaxValue=Math.max(e,this.seriesMaxValue):this.seriesMaxValue=e),
this.seriesDepth=Math.max(i,this.seriesDepth)},t.prototype.updateMinMax=function(t){
var e=t.changes,i=e.bounds||e.assets||0===this.locations.length;
if(e.settings&&(this.isLogScale=this.options.logScale,this.isInside="inside"===this.options.position,
i=!0),this.shouldChangeScale()&&(this.seriesMinValue!==this.lastMinValue&&(i=!0,
"always"===this.options.animate||null!==this.lastMinValue&&!e.displayUnit&&this.minValue!==this.maxValue?this.minValueAnimation?this.minValueAnimation.retarget(this.seriesMinValue,t.timeStamp):this.minValueAnimation=new d.Animator(this.lastMinValue,this.seriesMinValue,this.options.scaleAdjustmentAnimationDelay,this.options.scaleAdjustmentAnimation,t.timeStamp):this.minValueAnimation=null,
this.lastMinValue=this.seriesMinValue),this.seriesMaxValue!==this.lastMaxValue)){
if(i=!0,"always"===this.options.animate||null!==this.lastMaxValue&&!e.displayUnit&&this.minValue!==this.maxValue)if(this.maxValueAnimation)this.maxValueAnimation.retarget(this.seriesMaxValue,t.timeStamp);else{
var n=this.lastMaxValue;this.lastMaxValue||(null!==this.options.initialAnimationValue?n=this.options.initialAnimationValue:this.seriesMaxValue&&(n=this.seriesMaxValue*this.options.initialAnimationValueMultiplier)),
this.maxValueAnimation=new d.Animator(n,this.seriesMaxValue,this.options.scaleAdjustmentAnimationDelay,this.options.scaleAdjustmentAnimation,t.timeStamp);
}else this.maxValueAnimation=null;this.lastMaxValue=this.seriesMaxValue;
}this.seriesMaxValue=this.options.minValue,this.seriesMinValue=this.options.maxValue;
var r,s;this.minValueAnimation?(i=!0,r=this.minValueAnimation.get(t.timeStamp),
this.minValueAnimation.finished(t.timeStamp)&&(this.minValueAnimation=null)):r=this.lastMinValue,
this.maxValueAnimation?(i=!0,s=this.maxValueAnimation.get(t.timeStamp),
this.maxValueAnimation.finished(t.timeStamp)&&(this.maxValueAnimation=null)):s=this.lastMaxValue,
this.axisChanged=i,i&&this.computeNewScale(r,s),(this.minValueAnimation||this.maxValueAnimation)&&(t.animating=!0);
},t.prototype.doAnimations=function(t){if(this.axisChanged&&this._chart.assetsLoaded){
this.axisChanged=!1;var e=this.options;if(e.enabled){this.locations=[],
this.values=[];var i,n="right"===e.side,r=this.scene.y0,s=r+this.scene.height;
if(this.scale<=0){i=e.scaleStep?e.scaleStep:100;var a=e.style.labelSpacing,o=s-a,l=1;
for(e.logScale||(l=i);o>r;)this.locations.push(o),this.values.push(l),
e.logScale?l*=10:l+=i,o-=a}else{if(this.fontHeight||(this.fontHeight=1.4*d.Graphics.getTextHeight(t.context,e.style.valueLabel.textStyle.font)||0),
0===r&&(r+=this.fontHeight/2),this.scene.bottomAxisSize<this.fontHeight&&(s-=this.fontHeight/2),
this.isLogScale){for(var h=this.calcExpValuePerLine(),u=h.unit,c=h.valueMultiplier,p=1/u;;){
p*=c;var f=this.zeroY-this.valueToRelativeY(p);if(f<=r)break;f>=s||(this.locations.push((0|f)-.5),
this.values.push(p))}for(p=-1/u;;){p*=c;var f=this.zeroY-this.valueToRelativeY(p);
if(f>=s)break;this.locations.push((0|f)-.5),this.values.push(p);
}}else{i=this.calcLinearValuePerLine();var p=0;for(e.scaleStep&&(i=Math.max(i,this.fontHeight/this.scale));;){
p+=i;var f=this.zeroY-this.valueToRelativeY(p);if(f<=r)break;f>=s||(this.locations.push(0|f),
this.values.push(p))}for(p=0;;){p-=i;var f=this.zeroY-this.valueToRelativeY(p);
if(f>=s)break;this.locations.push(0|f),this.values.push(p)}}var g=this.minValue,m=this.maxValue;
if(g<=0&&m>=0){var v=e.style.baseLine.showLabel;(2===v||1===v&&(g<0||!this.isInside&&0===g))&&(this.locations.push(0|this.zeroY),
this.values.push(0))}}var y,S,b,C=e.valueFormatterFunction;if(!this.isLogScale){
var x=this.getUnitAndName(i,this.scene.settings);y=x.unit,S=x.digitsAfterComma,
b=x.name}for(var w=0;w<this.values.length;w++){var p=this.values[w];
if(this.isLogScale){var x=this.getUnitAndName(p,this.scene.settings);
y=x.unit,S=x.digitsAfterComma,b=x.name}var L=(p/y).toFixed(S);
if(p&&(L=L+" "+b),C&&(L=C(p,b,y,L)),!C&&e.valueFormat){var T=d.Helpers.matchPercentFormat(e.valueFormat),k=d.Helpers.matchCurrencyFormat(e.valueFormat);
if(T){var x=this.getUnitAndName(100*p,this.scene.settings);y=x.unit,
b=x.name,L=d.Helpers.printPercentValue(p/y,T,b)}else{var x=this.getUnitAndName(p,this.scene.settings);
y=x.unit,b=x.name,L=d.Helpers.printCurrencyValue(p/y,k,b)}}var A=new d.Label(e.style.valueLabel);
A.text=L.toString(),this.isInside||(A.style.align=n?"left":"right"),
this.labels[w]=A}}}},t.prototype.paintUnder=function(t){var e=this.options;
if(e.enabled){var i=t.context;if(e.thresholds)for(var n=0;n<e.thresholds.length;n++){
var r=e.thresholds[n];"under"===r.position&&this.paintThreshold(i,r);
}this.paintZeroLineDepth(i)}},t.prototype.paint=function(t){var e=this.options;
if(e.enabled){var i=t.context;if(e.thresholds)for(var n=0;n<e.thresholds.length;n++){
var r=e.thresholds[n];"above"===r.position&&this.paintThreshold(i,r);
}if(this.locations.length>0&&(this.paintGrid(i),this.paintZeroLine(i),
this.paintLabels(i,t.labelRenderer)),e.axisLine){var s=d.Graphics.beginStrokeAndFill(i,e.style.axisLine);
this.paintAxisLine(s),d.Graphics.endStrokeAndFill(i,s,e.style.axisLine);
}}},t.prototype.shouldChangeScale=function(){var t=this.seriesMinValue,e=this.seriesMaxValue;
if(null===t||null===e)return!1;if(null===this.lastMinValue||null===this.lastMaxValue||!(this.lastMinValue<this.lastMaxValue))return!0;
if("center"===this.options.zeroLine?(e=Math.max(e,-t),t=-e):"visible"===this.options.zeroLine&&(t=Math.min(t,0),
e=Math.max(e,0)),t<this.minValue||e>this.maxValue)return!0;var i=(this.lastMaxValue-this.lastMinValue)*this.options.scaleAdjustmentTolerance;
return t>this.lastMinValue+i||e<this.lastMaxValue-i},t.prototype.computeNewScale=function(t,e){
var i=this.scene.height,n=this.scene.y0;if("center"===this.options.zeroLine?(e=Math.max(e,-t),
t=-e):"visible"===this.options.zeroLine&&(t=Math.min(t,0),e=Math.max(e,0)),
null!==this.options.minValue&&(t=this.options.minValue),null!==this.options.maxValue&&(e=this.options.maxValue),
!(i>0&&t<e))return this.minValue=0,this.maxValue=0,this.logOffset=1,
this.scale=0,void(this.zeroY=n+i);var r=0;this.options.scaleStep>0?r=this.options.scaleStep:this.options.scaleMinStep>0&&(r=this.options.scaleMinStep),
r>0&&(t<0&&(t=Math.floor(t/r)*r),e>0&&(e=Math.ceil(e/r)*r));var s=e-t;
if(0!==t&&t!==-100)if(this.isLogScale)t=d.Helpers.sign(t)*Math.pow(Math.abs(t),1-d.Helpers.sign(t)*this.options.scaleAdjustmentTolerance);else{
var a=t-s*this.options.scaleAdjustmentTolerance;t>0?t=Math.max(0,a):t<0&&(t=Math.min(0,a));
}if(0!==e&&100!==e)if(this.isLogScale)e=d.Helpers.sign(e)*Math.pow(Math.abs(e),1+d.Helpers.sign(e)*this.options.scaleAdjustmentTolerance);else{
var o=e+s*this.options.scaleAdjustmentTolerance;e>0?e=Math.max(0,o):e<0&&(e=Math.min(0,o));
}null!==this.options.minValue&&(t=this.options.minValue),null!==this.options.maxValue&&(e=this.options.maxValue),
this.minValue=t,this.maxValue=e;var l;this.isLogScale?t<=0&&e>=0?(this.logOffset=1,
l=Math.log(e+this.logOffset)+Math.log(-t+this.logOffset)):t<0?(this.logOffset=1-t,
l=Math.log(-t+this.logOffset)):e>0&&(this.logOffset=1+e,l=Math.log(e+this.logOffset)):l=e-t,
this.scale=i/l;var h=this.valueToRelativeY(t);this.zeroY=n+i+h;
},t.prototype.valueToRelativeY=function(t){return this.isLogScale?t>0?this.scale*Math.log(t+this.logOffset):t<0?-this.scale*Math.log(-t+this.logOffset):0:this.scale*t;
},t.prototype.calcLinearValuePerLine=function(){if(this.options.scaleStep)return this.options.scaleStep;
var t=this.options.style.labelSpacing/this.scale,e=Math.log(t)/Math.log(10),i=Math.pow(10,Math.floor(e-1));
for(i=Math.max(i,this.options.scaleMinStep);i<t;){if(2*i>=t)return 2*i;
if(i>10&&2.5*i>=t)return 2.5*i;if(5*i>=t)return 5*i;i*=10}return i;
},t.prototype.calcExpValuePerLine=function(){var t=this.valueToRelativeY(10)-this.valueToRelativeY(1),e=10,i=10,n=t;
if(n>4*this.options.style.labelSpacing)return{unit:2,valueMultiplier:2
};for(;n<this.options.style.labelSpacing;)e*=10,n+=t;return{unit:i,
valueMultiplier:e}},t.prototype.getUnitAndName=function(t,e){
t=Math.abs(t);var i=this.isLogScale?this.cachedUnits.log:this.cachedUnits.lin,n=1,r="";
if(i[t])return i[t];for(var s in e.localization.valueUnits){var a=e.localization.valueUnits[s],o=Math.abs(t/a);
if(this.isLogScale)t===Math.round(t/a)*a&&n<a&&(n=a,r=s);else if(o<1e3&&o>=1){
n=a,r=s;break}}var l=0;if(t>0)for(var h=1;t<h;)l+=1,h/=10;return i[t]={
unit:n,digitsAfterComma:l,name:r}},t.prototype.paintGrid=function(t){
if(this.options.hgrid!==!1&&(null!=this.options.hgrid||this.isPrimary)){
var e=this.options.style.hgrid.lineColor;this.options.style.hgrid.lineWidth=1,
d.Graphics.clearShadow(t);for(var i=d.Graphics.beginStrokeAndFill(t,this.options.style.hgrid),n=this.scene.x0,r=this.scene.x0+this.scene.width,s=0;s<this.locations.length;s++){
var a=this.locations[s];0!==this.values[s]&&(i.moveTo(n,a+.5),
i.lineTo(r,a+.5))}d.Graphics.endStrokeAndFill(t,i,this.options.style.hgrid);
var o=d.Colors.colorTone(e,.5,.5);if(o.opacity<.3){this.options.style.hgrid.lineColor=o.color,
i=d.Graphics.beginStrokeAndFill(t,this.options.style.hgrid);for(var s=0;s<this.locations.length;s++){
var a=this.locations[s];0!==this.values[s]&&(i.moveTo(n,a-.5),
i.lineTo(r,a-.5))}d.Graphics.endStrokeAndFill(t,i,this.options.style.hgrid),
this.options.style.hgrid.lineColor=e}}},t.prototype.paintAxisLine=function(t){
var e,i=this.options.side,n=this.panel.left,r=this.panel.right,s=this.scene.y0+this.scene.height;
this.isInside?("right"===i&&(e=n),"left"===i&&(e=r)):e="right"===i?n-.5:r+.5,
t.moveTo(e,this.scene.y0),t.lineTo(e,s)},t.prototype.paintZeroLineDepth=function(t){
if(!(this.zeroY>this.scene.chartHeight)){var e=this.options.style.baseLine,i=Math.max(e.lineDepth,this.seriesDepth);
if(i>0){var n=d.Graphics.beginStroke(t,this.options.style.baseLine),r=this.scene.x0,s=r+this.scene.width,a=Math.round(this.zeroY)-.5*(e.lineWidth||1);
n.moveTo(r,a),n.lineTo(r+i,a-i),n.lineTo(s,a-i),n.lineTo(s,a),
t.fillStyle=e.depthColor,t.fill(),d.Graphics.endStroke(t,n,e);
}}},t.prototype.paintZeroLine=function(t){if(!(this.zeroY>this.scene.chartHeight)){
var e=this.options.style.baseLine,i=this.scene.x0,n=i+this.scene.width,r=Math.round(this.zeroY)-.5*(e.lineWidth||1),s=d.Graphics.beginStroke(t,e);
s.moveTo(i,r),s.lineTo(n,r),d.Graphics.endStroke(t,s,e)}},t.prototype.paintThreshold=function(t,e){
if(0!==this.scale){var i=this.scene.x0,n=this.scene.x0+this.scene.width,r=this.scene.y0,s=r+this.scene.height,a=this.zeroY-this.valueToRelativeY(e.from),o=this.zeroY-this.valueToRelativeY(e.to);
a=a>=s-.5?(0|s)+.5:(this.zeroY-this.valueToRelativeY(e.from)|0)-.5,
o=o<=r-.5?(0|r)+.5:(this.zeroY-this.valueToRelativeY(e.to)|0)-.5,
e.style.fillColor&&(t.fillStyle=e.style.fillColor,t.beginPath(),
t.rect(i,o,this.scene.width,a-o),t.fill(),t.closePath());var l=d.Graphics.beginStroke(t,e.style);
a-.5!==s&&(l.moveTo(i,a),l.lineTo(n,a)),o-.5!==r&&(l.moveTo(i,o),
l.lineTo(n,o)),d.Graphics.endStroke(t,l,e.style)}},t.prototype.paintLabels=function(t,e){
if(this._chart.assetsLoaded){var i=this.scene,n=this.panel.left,r=this.panel.right,s="right"===this.options.side,a=this.title;
if(this.options.title&&a){var o=i.y0,l=i.height,h=a.hheight,u=a.style.margin||0,c=o+.5*l,p=void 0;
s?(p=r-u-h,r-=h+2*u):(p=n+u+h,n+=h+2*u),e.paint(t,p,c,1,a)}var f,g=(n+r)/2;
if(f=s?n:r-4,!this.isInside){t.beginPath();for(var m=0;m<this.locations.length;m++){
var v=this.locations[m];t.moveTo(f,v),t.lineTo(f+4,v)}d.Graphics.stroke(t,this.options.style.tick);
}for(var y=0;y<this.locations.length;y++){var S=this.locations[y],b=this.labels[y],C=void 0;
e.measure(t,b),C=this.isInside?g:s?f+b.hwidth+7:f-b.hwidth-3,
C=Math.min(C,i.chartLeft+i.chartWidth-b.hwidth),C=Math.max(C,i.chartLeft+b.hwidth),
e.paint(t,C,S,1,b)}}},t}();t.ValueAxis=p,function(t){var e=function(){
function t(t,e){this.series=e,this.scene=t,this.prevy=[]}return t.prototype.paintStack=function(t,e,i,n,r,s,a){
if(this.zeroY=s,e.length>0){var o=this.series,l=this.prevy;l.length<e.length&&(l=this.prevy=new Array(e.length));
for(var h=0;h<=e.length-1;h++)l[h]=s;for(var u=0;u<o.length;u++){
var c=o[u],d=r[u],p=a&&a.length?a[u]:null;this.plainColumns(t,c.style,e,i,l,n,d,u,p);
}}},t.prototype.hitTest=function(t,e,i,n,r,s,a,o){var l=t.length;
if(!(l>1))return{result:null,distance:1/0};var h=this.series,u=d.Helpers.binSearch(t,s),c=t[u]-e[u],p=t[u]+e[u];
if(c>s&&u>0){var f=t[u-1]-e[u-1],g=t[u-1]+e[u-1];(g>s||Math.abs(g-s)<Math.abs(c-s))&&(u-=1,
c=f,p=g)}for(var m=null,v=1/0,y=r,S=0;S<h.length;S++){var b=i[S][u];
if(d.Helpers.isNumber(b)){var C=y-b,x=Math.min(y,C),w=Math.max(y,C),L=d.Geometry.distanceToRect(s,a,c,x,p,w);
L<v&&(v=L,m={x0:c,y0:x,x1:p,y1:w,seriesIndex:S,isMarker:!1}),
y=C}}return{result:m,distance:v}},t.prototype.plainColumns=function(t,e,i,n,r,s,a,o,l){
for(var h,u,c,p,f,g=t.context,m=this.scene.y0,v=this.scene.height,y=e.minHeight,S=m+v,b=s[o],C=null,x=0;x<i.length;x++){
var w=i[x],L=b[x];if(d.Helpers.isNumber(L)){var T=n[x],k=r[x],A=k-L;
r[x]=A;var M=w-T,P=T+T,I=void 0,D=void 0,N=void 0;if(k<A){I=Math.max(A-k,y),
D=k;for(var F=!0,E=o-1;E>0;){if(null!==s[E][x]){F=!1;break}E--;
}N=F}else{if(!(k>A))continue;I=Math.max(k-A,y),D=k-I;for(var O=!0,E=o+1;E<s.length;){
if(null!==s[E][x]){O=!1;break}E++}N=O}var R=a?a[x]||e:e;if(C!==R){
C=R,f=C.lineColor?C.lineWidth:0,u=C.shadowColor,h=C.depth,c=C._currentFillStyle;
var B=C.gradient,H=d.Helpers.isString(c);if(H&&h?(p=C.fillColor,
d.Helpers.isNumber(C.depthBrightness)&&(p=d.Colors.derive(p,C.depthBrightness,1))):p=null,
B&&1!==B&&H){var z=g.createLinearGradient(0,S,0,S-2*v/3);z.addColorStop(0,d.Colors.derive(c,B,1)),
z.addColorStop(1,c),c=z}g.fillStyle=c}if(e.fillGradientMode){
var U=null,_=e.fillGradient?e.fillGradient:[];if("horizontal"===e.fillGradientMode&&P>2?U=g.createLinearGradient(w-P/2,0,w+P/2,0):"vertical"===e.fillGradientMode&&I>2&&(U=g.createLinearGradient(0,D,0,D+I)),
"cylinder"===e.fillGradientType){var G=d.Colors.parse(e.fillColor);
_.push([0,d.Colors.format(d.Colors.derive(G,.6,1))]),_.push([.25,d.Colors.format(d.Colors.derive(G,.8,1))]),
_.push([.75,d.Colors.format(d.Colors.derive(G,1.1,1))]),_.push([1,d.Colors.format(d.Colors.derive(G,.8,1))]);
}if(U){for(var j=0,W=_;j<W.length;j++){var V=W[j];U.addColorStop(V[0],V[1]);
}g.fillStyle=U}}if(p&&(g.beginPath(),d.Graphics.applyShadow(g,C),
N?(g.moveTo(M+h,D-h),g.lineTo(M+P+h,D-h),g.lineTo(M+P+h,D+I-h),
g.lineTo(M+P,D+I),g.lineTo(M+P,D),g.lineTo(M,D)):(g.moveTo(M+P,D),
g.lineTo(M+P+h,D-h),g.lineTo(M+P+h,D+I-h),g.lineTo(M+P,D+I),g.lineTo(M+P,D)),
g.closePath(),g.fillStyle=p,g.fill(),d.Graphics.clearShadow(g),
g.fillStyle=c),!p&&u&&d.Graphics.applyShadow(g,C),c&&(g.fillRect(M,D,P,I),
!p&&u&&d.Graphics.clearShadow(g)),f>0){D+=f/2,M+=f/2,P-=f,I-=f;
var Z=d.Graphics.beginStroke(g,C);P>0?I>0?(Z.moveTo(M,D),Z.lineTo(M+P,D),
Z.lineTo(M+P,D+I),Z.lineTo(M,D+I),Z.lineTo(M,D)):f>0&&(g.moveTo(M,k),
g.lineTo(M+P,k)):f>0&&(g.moveTo(w,D),g.lineTo(w,D+I)),d.Graphics.endStroke(g,Z,C);
}c||p||!u||d.Graphics.clearShadow(g);var Y=C.previewLineColor;
if(l&&l[x]){g.beginPath();for(var q=0,X=A-k,Q=l[x],J=0;J<Q.length;J++){
var K=Q[J];q+=K,L=k+q*X,g.moveTo(M,L),g.lineTo(M+P,L)}g.lineWidth=1,
g.strokeStyle=Y,g.stroke()}}}},t}();t.Columns=e;var i=function(){
function t(t,e){this.stack=t,this.series=e,this.seriesData=[];
for(var i=0;i<e.length;i++)this.seriesData.push({markerY:[],segments:[]
});this.prevyL=[],this.prevyR=[]}return t.prototype.paintStack=function(t,e,i,n,r,s){
if(0!==e.length){var a=t.context;this.paintLines(a,this.series,this.seriesData,e,i,n,s);
for(var o=0;o<this.series.length;o++){var l=this.series[o];l.style.markerStyleFunction?this.paintCustomMarkers(a,l,e,n[o],this.seriesData[o].markerY):this.paintMarkers(a,l,e,n[o],this.seriesData[o].markerY);
}}},t.prototype.paintLines=function(t,e,i,n,r,s,a){this.computeLineSegments(n,r,a,s);
for(var o=[[-(1/0),0,1/0],[a,a,a]],l=0;l<e.length;l++){var h=e[l];
this.paintLine(t,h.style,o,i[l].segments,a),l<e.length-1&&(o=this.mergePreviousSegments(o,this.seriesData[l].segments));
}},t.prototype.mergePreviousSegments=function(t,e){for(var i=[],n=[],r=0,s=t[0],a=t[1],o=0;o<e.length;o+=2){
for(var l=e[o],h=e[o+1];s[r]<=l[0];)i.push(s[r]),n.push(a[r]),
r++;for(s[r-1]!==l[0]&&(i.push(l[0]),n.push(a[r-1])),i.push.apply(i,l),
n.push.apply(n,h);s[r]<l[l.length-1];)r++;l[l.length-1]!==s[r]&&(i.push(l[l.length-1]),
n.push(a[r]))}for(;r<s.length;)i.push(s[r]),n.push(a[r]),r++;return[i,n];
},t.prototype.paintCustomMarkers=function(t,e,i,n,r){var s=e.style.markerStyleFunction(this.stack.externalItems(),n);
if(!s||s.length!==n.length)return void d.Helpers.error("markerStyleFunction() must return an array with the same number of elements as the input arrays.");
for(var a=e.style.marker,o=0;o<n.length;o++){var l=s[o];l&&l.shape&&(l.fillColor||(l.fillColor=a.fillColor||e.style.lineColor||e.style.fillColor),
l.width||(l.width=a.width||10),t.beginPath(),d.Graphics.strokeMarker(t,l.shape,i[o],r[o],l.width/2),
d.Graphics.paint(t,l))}},t.prototype.paintMarkers=function(t,e,i,n,r){
var s=e.style.marker;if(s.shape){var a={fillColor:s.fillColor||e.style.lineColor||e.style.fillColor,
lineColor:s.lineColor,lineWidth:s.lineWidth},o=s.width/2,l=s.shape;
t.beginPath();for(var h=0;h<n.length;h++){var u=n[h];null!==u&&d.Graphics.strokeMarker(t,l,i[h],r[h],o);
}d.Graphics.paint(t,a)}},t.prototype.hitTest=function(t,e,i,n,r,s,a,o){
var l=this.series,h=t.length;if(0===h)return{result:null,distance:1/0
};for(var u=Math.min(d.Helpers.binSearch(t,s),h-2),c=null,p=1/0,f=r-a,g=0;g<l.length;g++){
for(var m=l[g],v=m.style,y=this.seriesData[g],S=Math.max(0,u-2);S<Math.min(h,u+3);S++){
var b=i[g][S];if(null!==b&&v.marker){var C=t[S],x=y.markerY[S],w=v.marker.width/2,L=s-C,T=a-x,k=Math.sqrt(L*L+T*T);
k<w+o&&p>k-w&&(p=k-w,c={x0:C,y0:x,x1:C,y1:x,seriesIndex:g,isMarker:!0
})}}for(var A=null,M=y.segments,S=0;S<M.length;S+=2)for(var P=M[S],I=M[S+1],D=P[0],N=1;N<P.length;N++){
var F=P[N];if(D<=s+o&&F>=s-o){var E=I[N-1],O=I[N],R=Math.sqrt(d.Geometry.distanceToSegmentSq(D,E,F,O,s,a));
R<o&&R<=p&&(p=R,c={x0:D,y0:E,x1:F,y1:O,seriesIndex:g,isMarker:!1
})}if(D<=s&&F>=s){var E=I[N-1],O=I[N],B=d.Geometry.lineIntersectsSegment(s,a,0,1,D,E,F,O);
B!==1/0&&(A=B)}D=F}null!==A&&(d.Helpers.sign(A)!==d.Helpers.sign(f)&&(v.fillColor||v.fillGradient)&&p>=0&&(p=0,
c={x0:0,y0:0,x1:1,y1:1,seriesIndex:g,isMarker:!1}),f=A)}return{
result:c,distance:Math.max(p,0)}},t.prototype.computeLineSegments=function(t,e,i,n){
var r=t.length,s=this.prevyL,a=this.prevyR;s.length<r&&(s.length=r,
a.length=r);for(var o=0;o<r;o++)s[o]=i,a[o]=i;for(var l=s,h=0;h<this.series.length;h++){
var u=this.series[h],c=this.seriesData[h];if(c.segments.length=0,
c.markerY.length<r&&(c.markerY.length=r),u.style.steps){var d=this.buildStepSegments(t,e,i,s,a,l,n[h],u.data.noDataPolicy);
c.segments=d.segments,c.markerY=d.markerY}else{var p=this.buildLineSegments(t,i,s,a,l,n[h],u.data.noDataPolicy);
if(c.segments=p.segments,c.markerY=p.markerY,u.style.smoothing)for(var f=0;f<c.segments.length;f+=2){
var g=this.smoothLine(c.segments[f],c.segments[f+1]);c.segments[f]=g.x,
c.segments[f+1]=g.y}}l=c.markerY}},t.prototype.buildLineSegments=function(t,e,i,n,r,s,a){
var o=[],l=[],h=[];if("zero"===a){for(var u=0;u<t.length;u++){
var c=t[u],d=s[u],p=i[u],f=n[u];null!==d?(o.push(r[u]-d),l.push(c),
h.push(p-d),p!==f&&(l.push(c),h.push(f-d)),i[u]-=d,n[u]-=d):(o.push(r[u]),
p!==f?(h.push(p),h.push(f),l.push(c),l.push(c)):(h.push(p),l.push(c)));
}return{segments:[l,h],markerY:o}}if("join"===a){for(var g=null,u=0;u<t.length;u++){
var c=t[u],d=s[u],p=i[u],f=n[u];if(null!==d){if(null===g)o.push(r[u]-d),
l.push(c),h.push(f-d),n[u]-=d;else{if(g<u-1)for(var m=s[g],v=t[g],y=(d-m)/(c-v),S=g+1;S<u;S++){
var b=t[S],C=m+y*(b-v);o.push(r[S]-C);var x=i[S],w=n[S];l.push(b),
h.push(x-C),x!==w&&(l.push(b),h.push(w-C)),i[S]-=C,n[S]-=C}o.push(r[u]-d),
l.push(c),h.push(p-d),p!==f&&(l.push(c),h.push(f-d)),i[u]-=d,
n[u]-=d}g=u}else null===g&&o.push(r[u])}return l.length>2&&l[l.length-1]===l[l.length-2]&&(l.pop(),
h.pop()),{segments:[l,h],markerY:o}}for(var L=!1,T=[],u=0;u<t.length;u++){
var c=t[u],d=s[u],p=i[u],f=n[u];null!==d?(o.push(r[u]-d),L?(l.length>1&&i[u-1]!==n[u-1]&&(l.push(t[u-1]),
h.push(n[u-1])),l.push(c),h.push(p-d),i[u]-=d,n[u]-=d):(l.push(c),
h.push(f-d),n[u]-=d),L=!0):(o.push(r[u]),L&&(l.length>0&&(1===l.length&&(l.push(l[0]),
h.push(h[0])),T.push(l,h),l=[],h=[]),n[u-1]+=s[u-1]),L=!1)}return l.length>0&&(1===l.length&&(l.push(l[0]),
h.push(h[0])),T.push(l,h)),{segments:T,markerY:o}},t.prototype.buildStepSegments=function(t,e,i,n,r,s,a,o){
for(var l=[],h=[],u=[],c=[],d=null,p=0,f=0;f<t.length;f++){var g=t[f]-e[f],m=a[f];
if(null!==m){null!==d&&(u.push(g),c.push(d));var v=s[f]-m;u.push(g),
c.push(v),d=v,p=g+2*e[f],h.push(v),n[f]=r[f]=v}else if("zero"===o){
var v=s[f];h.push(v),r[f]=n[f]=v,null!==d&&(u.push(p),c.push(d)),
u.push(g),c.push(v),d=v,p=g+2*e[f]}else if("join"===o){var v=null!==d?d:s[f];
h.push(v),r[f]=n[f]=v}else{var v=s[f];h.push(v),r[f]=n[f]=v,u.length>0&&(null!==d&&(u.push(p),
c.push(d)),d=null,l.push(u,c),u=[],c=[])}}return u.length>0&&(null!==d&&(u.push(p),
c.push(d)),l.push(u,c)),{segments:l,markerY:h}},t.prototype.smoothLine=function(t,e){
var i=t[0],n=t[t.length-1],r=(n-i)/t.length;if(r<2)return{x:t,
y:e};var s=[],a=[];s.push(i),a.push(e[0]);for(var o=0;o+1<t.length;){
var l=o+1;if(t[o]!==t[l])for(;l+1<t.length&&t[l]!==t[l+1];)l+=1;
if(l-o===1)s.push(t[l]),a.push(e[l]);else{var h=new d.MonotoneCurve(t,e,o,l+1);
n=t[o];for(var u=o+1;u<=l;u++){i=n,n=t[u];var c=e[u];r=n-i;for(var p=Math.ceil(Math.min(50,Math.max(2,r/3))),f=r/p,g=s.length;(i+=f)<n;)s.push(i);
h.interpolateArray(u-1,s,g,s.length,a),s.push(n),a.push(c)}h.clear();
}o=l}return t.length=0,e.length=0,{x:s,y:a}},t.prototype.paintLine=function(t,e,i,n,r){
if(e._currentFillStyle){e.shadowColor&&d.Graphics.applyShadow(t,e),
t.fillStyle=e._currentFillStyle,t.beginPath();for(var s=0;s<n.length;s+=2)this.paintArea(t,n[s],n[s+1],i,r);
t.fill(),e.shadowColor&&d.Graphics.clearShadow(t)}if(e.lineColor){
!e.fillColor&&e.shadowColor&&d.Graphics.applyShadow(t,e);for(var a=d.Graphics.beginStroke(t,e),s=0;s<n.length;s+=2){
var o=n[s],l=n[s+1];a.moveTo(o[0],l[0]);for(var h=1;h<o.length;h++)a.lineTo(o[h],l[h]);
}d.Graphics.endStroke(t,a,e),!e.fillColor&&e.shadowColor&&d.Graphics.clearShadow(t);
}},t.prototype.paintArea=function(t,e,i,n,r){t.moveTo(e[0],i[0]);
for(var s=1;s<e.length;s++)t.lineTo(e[s],i[s]);for(var a=e[0],o=e[e.length-1],l=r,h=o,u=n.length-2;u>=0;u+=-2){
var c=n[u],d=n[u+1];if(!(c.length<2||c[0]>h||c[c.length-1]<a)){
var p=c.length-1,f=c[p];f<h&&(t.lineTo(h,l),t.lineTo(f,l),h=f);
var s=void 0,g=void 0;for(s=p;s>=0;s--){if(g=c[s],h===f)t.lineTo(f,d[s+1]),
h=g;else if(h<f&&h>g){var m=d[s],v=d[s+1],y=(h-g)/(f-g),S=m+y*(v-m);
t.lineTo(h,S),h=g}if(h<=a){h=a;var m=d[s],v=d[s+1],y=(h-g)/(f-g),S=m+y*(v-m);
t.lineTo(h,S);break}f=g}s===-1&&h===g&&t.lineTo(h,d[0])}}h!==a&&(t.lineTo(h,l),
t.lineTo(a,l)),t.closePath()},t}();t.Line=i;var n=function(){
function t(t,e){this.series=e,this.scene=t,this.prevy=[]}return t.prototype.paintStack=function(t,e,i,n,r,s){
if(e.length>0){var a=this.series[0];this.seriesEnabled=a.enabled;
var o=this.prevy;o.length<e.length&&(o=this.prevy=new Array(e.length));
for(var l=0;l<=e.length-1;l++)o[l]=s;this.plainBar(t.context,a.style,e,i,o,n);
}},t.prototype.hitTest=function(t,e,i,n,r,s,a,o){var l=t.length;
if(!(l>1))return{result:null,distance:1/0};var h=this.series,u=d.Helpers.binSearch(t,s),c=t[u]-e[u],p=t[u]+e[u];
if(c>s&&u>0){var f=t[u-1]-e[u-1],g=t[u-1]+e[u-1];(g>s||Math.abs(g-s)<Math.abs(c-s))&&(u-=1,
c=f,p=g)}for(var m=null,v=1/0,y=r,S=0;S<h.length;S++){var b=i[S][u];
if(null!==b){var C=y-b,x=Math.min(y,C),w=Math.max(y,C),L=d.Geometry.distanceToRect(s,a,c,x,p,w);
L<v&&(v=L,m={x0:c,y0:x,x1:p,y1:w,seriesIndex:S,isMarker:!1}),
y=C}}return{result:m,distance:v}},t.prototype.plainBar=function(t,e,i,n,r,s){
for(var a=0;a<i.length;a++){var o=i[a],l=r[a],h=s[0][a],u=s[1][a],c=s[2][a],p=s[3][a];
if(void 0!==p&&null!==p||void 0!==h&&null!==h||void 0!==u&&null!==u||void 0!==c&&null!==c){
var f=(o-n[a]||0)+.5,g=(o+n[a]||0)+.5,m=(l-p||0)+.5,v=(l-h||0)+.5,y=(l-u||0)+.5,S=(l-c||0)+.5,b=this.applyPatternStyle(t,e,y,S);
if("bar"===e.pattern){var C=d.Graphics.beginStroke(t,b);C.moveTo(o,v),
C.lineTo(o,m),C.moveTo(f,y),C.lineTo(o,y),C.moveTo(g,S),C.lineTo(o,S),
d.Graphics.endStroke(t,C,b)}else{var C=d.Graphics.beginStroke(t,b);
C.moveTo(o,v),C.lineTo(o,y),C.moveTo(o,S),C.lineTo(o,m),d.Graphics.endStroke(t,C,b),
C=d.Graphics.beginStroke(t,b,!0),C.moveTo(f,y),C.lineTo(g,y),
C.lineTo(g,S),C.lineTo(f,S),C.closePath(),d.Graphics.endStroke(t,C,b,!0);
}e.shadowColor&&d.Graphics.clearShadow(t)}}},t.prototype.applyPatternStyle=function(t,e,i,n){
var r=i>=n?e.increase:e.decrease,s="candlestick"===e.pattern?r.candlestick:r.bar,a=s;
if(!this.seriesEnabled){a=d.Helpers.realClone(s);var o=this.scene.settings.legend.advanced.disabledSeries;
a.lineColor=o.lineColor,void 0!==a.fillColor&&(a.fillColor=o.fillColor);
}return e.lineColor&&e.shadowColor&&d.Graphics.applyShadow(t,e),
a},t}();t.Candlestick=n}(r=t.Renderers||(t.Renderers={}));var f=function(){
function t(t,e,i){this.scene=e,this.chart=t,this.valueAxis=i}
return t.prototype.setSeriesFont=function(t,e,i,n,r,s){var a=this.scene.dataLabels.metaData,o=2*n[0];
null===a.styles&&(a.styles={});for(var l=0;l<i.length;l++){var h=i[l],u=this.getLongestNumber(r[l]);
if(a.styles[h.id]=null,u.max===-(1/0))break;var c=this.createContent(u.max,s[u.index],h.valueLabels.contentsFunction)||"",d=this.reduceFontWidth(t,e,h.id,h.valueLabels,o,c);
d&&(a.styles[h.id]=d)}},t.prototype.scanValueLabels=function(t,e,i,n,r,s,a,o,l){
for(var h=this.chart.shell.getChartInnerArea(),u=this.chart.getBottomHeight(),c=0;c<2;c++){
var d=0===c?s:a;if(null!==d)for(var p=0;p<n.length;p++)for(var f=n[p],g=this.valueAxis.zeroY,m=0,v=0;v<d.length;v++){
var y=o[v][p],S=d[v][p];if(null!==S&&null!==y){m+=y,g-=S;var b=r[v];
if(b.valueLabels&&b.valueLabels.enabled){var x=b.valueLabels.useStackedValue,w=this.chart.settings._computedStacks[b.stack],L=w&&"based"===w.type;
if(null===x&&(x=!L),!L||0!==S||0===m){if(b instanceof C){var T=S>=0?1:-1,k=b.style.minHeight;
k&&(S=S*T<k?k*T:S)}this.createDrawingSpots(t,h,S,g+S,f,b,x?m:y,u,i[0],l[p]);
}}}}}this.paintDataLabels(t,e,i[0],r.length)},t.prototype.createDrawingSpots=function(t,e,i,n,r,s,a,o,l,h){
var u=s.id,c=s.valueLabels.position,p=this.scene.dataLabels,f=r.toFixed(1),g=this.scene.dataLabels.spots[f];
if(null!==p.metaData.styles[u]){var m=this.createContent(a,h,s.valueLabels.contentsFunction);
if(null!=m){var v=(new d.LabelLayoutBase).totalPadding(s.valueLabels.style);
i=Math.abs(i);var y=this.getPositionVerticalDimensions(t,a,n,i,p.metaData.styles[u],s.valueLabels.minFontSize,c,v);
if(null!==y){var S=y.min,b=y.max,C=e.findTopPosition(r,Math.min(r+l,this.scene.x0+this.scene.width));
C>S&&(b=b-S+C,S=C);var x=this.scene.chartTop+this.scene.chartHeight-this.scene.bottomAxisSize;
if(b>x&&(S=S-b+x,b=x),g)for(var w=0;w<g.length;w++){var L=g[w];
if(null!=L){var T=L.edges[0],k=L.edges[1];if(S<k&&b>T){if(!(s.type===L.type&&a>L.value))return;
g[w]=null}}}g||(g=this.scene.dataLabels.spots[f]=[]),g.push({
value:a,type:s.type,edges:[S,b],x:parseInt(f,10),y:S+y.fontHeight/2,
font:y.font,id:u,style:s.valueLabels.style,function:s.valueLabels.contentsFunction,
timestamp:h})}}}},t.prototype.reduceFontSize=function(t,e,i,n,r){
var s=e.match(/^([^\"\d]*)(\d+\.?\d*)(.*)$/i);if(!s)return d.Helpers.warn("Could not parse the font size from the value `"+e+"`."),
{font:e,value:n(e)};for(var a=s[2],o=s[1],l=s[3],h=parseFloat(a);h>=i;){
var u=o+h+l,c=n(u);if(c<=r)return{font:u,value:c};if(h===i)break;
h=Math.round((h-1)*r/c*100)/100,h<i&&(h=i)}return null},t.prototype.getPositionVerticalDimensions=function(t,e,i,n,r,s,a,o){
var l=e>=0?-1:1,h=null,u=null,c=l*n,p=d.Graphics.getTextHeight(t,r)+2*o+4,f=p<n;
if(!f&&("insideTop"===a||"insideCenter"===a||"insideBase"===a)){
var g=this.reduceFontSize(t,r,s,function(e){return d.Graphics.getTextHeight(t,e);
},n);if(!g)return null;r=g.font,p=g.value+2*o+4}switch(a){case"outside":
h=i+c,u=h+l*p;break;case"insideTop":h=i+c,u=h-l*p;break;case"insideCenter":
h=i+c/2+p/2,u=h-p;break;case"insideBase":h=i+l*p,u=i;break;case"aboveValue":
h=i+c,u=h-p;break;case"belowValue":h=i+c,u=h+p;break;case"insideTopAuto":
f?(h=i+c,u=h-l*p):(h=i+c,u=h+l*p);break;case"value":f&&(h=i+c-p/2,
u=h+p);break;default:d.Helpers.warn("Invalid position: '"+a+"'. Possible values: outside, insideTop, insideCenter, insideBase, aboveValue, belowValue, belowValueAuto, value."),
h=i+c,u=h+l*p}return null===h?null:h>u?{min:u,max:h,font:r,fontHeight:p
}:{min:h,max:u,font:r,fontHeight:p}},t.prototype.reduceFontWidth=function(t,e,i,n,r,s){
var a=this.scene.dataLabels.fontWidths,o=n.style.textStyle;if(s=s.replace(/\d/g,"9"),
(a[o.font+";"+s]||1/0)<=r)return o.font;var l=new d.Label(n.style),h=l.style.textStyle,u=h.font;
l.text=s;var c=this.reduceFontSize(t,u,n.minFontSize,function(i){
var n=a[i+";"+s];return n||(h.font=i,e.labelRenderer.measure(t,l),
a[i+";"+s]=n=2*l.hwidth),n},r);return c?c.font:null},t.prototype.getLongestNumber=function(t){
for(var e=0,i=-1,n=0;n<t.length;n++){var r=t[n];r<0&&(r*=-10),
e<=r&&(e=r,i=n)}return{max:i===-1||null===t[i]?-(1/0):t[i],index:i
}},t.prototype.createContent=function(t,e,i){if(i){var n=i.call(this.chart.api,t,e)||null;
return null!=n&&"string"!=typeof n?void d.Helpers.warn("`valueLabels.contentsFunction` has to return `null` or a string value."):n;
}return t===(0|t)?t.toFixed(0):t.toFixed(2)},t.prototype.paintDataLabels=function(t,e,i,n){
var r=this.scene,s=r.dataLabels.metaData,a=2*i,o=s.availableWidth!==a;
if(s.processed+=n,s.processed>=r.seriesWithLabels){s.processed=0;
for(var l=r.dataLabels.spots,h=Object.keys(l),u=0,c=h.length;u<c;u++){
var p=l[h[u]];if(p)for(var f=0;f<p.length;f++){var g=p[f];if(null!=g){
var m=new d.Label(g.style);m.text=this.createContent(g.value,g.timestamp,g["function"]),
m.style.textStyle.font=g.font,e.labelRenderer.paint(t,g.x,g.y,1,m);
}}}r.dataLabels.spots={},o&&(s.availableWidth=a)}},t}();t.ValueLabels=f,
function(t){var e=function(){function t(t,e,i,n,r){this.series=[],
this.seriesId=[],this.min=0,this.max=0,this.renderingType=null,
this.needsAfterProcess=!1,this.paddingLeft=0,this.paddingRight=0,
this.centers=[],this.radii=[],this.vstack=[],this.countStack=[],
this.ystack=[],this.xes=[],this.times=[],this.styles=[],this.previewData=[],
this.calculatedDepth=0,this.ystackNegative=null,this.valueLabels=null,
this.externalItems=null,this.externalItemsCache=null,this.va=r,
this.options=n,this.cluster=i,this.scene=e,this.chart=t,this.va.series++;
}return t.computeFillPattern=function(t,e,i){var n=i.fillPattern,r=i._currentFillStyleKey,s=i.fillColor,a=s+"|"+n;
if(!r||r.pattern!==a){var o,l,h=t.assetsLoader.getAssetImage(i.fillPattern);
if(h){var u=i._fillPatternOpacity;if(s||u){var c=document.createElement("canvas");
c.width=h.width,c.height=h.height;var d=c.getContext("2d");s&&(d.fillStyle=s,
d.fillRect(0,0,h.width,h.height)),d.globalAlpha=i._fillPatternOpacity,
d.drawImage(h,0,0),h=c}o=e.createPattern(h,"repeat"),l={pattern:a
}}else o=s||null,l=null;i._currentFillStyle=o,i._currentFillStyleKey=l;
}},t.prototype.addSeries=function(t,e){this.renderingType||(this.renderingType=e.type),
this.series.push(e),this.seriesId.push(t);var i=e;this.calculatedDepth=Math.max(this.calculatedDepth,i.style.depth),
"columns"===this.renderingType&&(this.paddingLeft=Math.max(this.paddingLeft,i.style.padding[0]),
this.paddingRight=Math.max(this.paddingRight,i.style.padding[1]));
},t.prototype.afterInit=function(){"line"===this.renderingType?this.renderer=new r.Line(this,this.series):"columns"===this.renderingType?this.renderer=new r.Columns(this.scene,this.series):"candlestick"===this.renderingType&&(this.candleStacks=!0,
this.renderer=new r.Candlestick(this.scene,this.series))},t.prototype.process=function(t){
this.processData(t),this.computeMinMax(),this.addLeads(t),this.needsAfterProcess=!0;
},t.prototype.afterProcess=function(){if(this.needsAfterProcess||this.va.axisChanged)return this.needsAfterProcess=!1,
this.computeY()},t.prototype.paint=function(t,e){if(0!==this.ystack.length&&!isNaN(this.radii[0])){
for(var i=0;i<this.series.length;i++){var n=this.series[i];this.computeFillStyle(e,n.style),
this.chart.assetsLoaded&&n.valueLabels&&n.valueLabels.enabled&&(null===this.valueLabels&&(this.valueLabels=new f(this.chart,this.scene,this.va)),
this.valueLabels.setSeriesFont(e,t,this.series,this.radii,this.vstack,this.times));
}var r=this.styles;if(r)for(var s=0;s<r.length;s++){var a=r[s];
if(a)for(var o=0;o<a.length;o++)this.computeFillStyle(e,a[o]);
}this.ystackNegative&&this.renderer.paintStack(t,this.centers,this.radii,this.ystackNegative,this.styles,this.va.zeroY,this.previewData),
this.renderer.paintStack(t,this.centers,this.radii,this.ystack,this.styles,this.va.zeroY,this.previewData),
null!==this.valueLabels&&this.valueLabels.scanValueLabels(e,t,this.radii,this.centers,this.series,this.ystack,this.ystackNegative,this.vstack,this.times);
}},t.prototype.hitTestStack=function(t,e){var i=d.Helpers.binSearch(this.centers,t),n=this.centers[i]-this.radii[i],r=this.centers[i]+this.radii[i];
if(n>t&&i>0){var s=this.centers[i-1]-this.radii[i-1],a=this.centers[i-1]+this.radii[i-1];
(a>t||Math.abs(a-t)<Math.abs(n-t))&&(i-=1,n=s,r=a)}return{result:{
x0:n,y0:0,x1:r,y1:0,seriesIndex:null,isMarker:!1,stack:this},
distance:d.Geometry.distanceToRect(t,0,n,0,r,0)}},t.prototype.hitTest=function(t,e,i){
var n=this.renderer.hitTest(this.centers,this.radii,this.ystack,this.styles,this.va.zeroY,t,e,i),r=n.result,s=n.distance;
return this.ystackNegative&&(n=this.renderer.hitTest(this.centers,this.radii,this.ystackNegative,this.styles,this.va.zeroY,t,e,i),
n.distance<s&&(r=n.result,s=n.distance)),null!==r&&(r.seriesIndex=this.seriesId[r.seriesIndex],
r.stack=this),{result:r,distance:s}},t.prototype.computeFillStyle=function(e,i){
if(i)if(i.fillPattern)t.computeFillPattern(this.chart,e,i);else{
if(i.fillGradient)return void this.computeFillGradient(e,i);i._currentFillStyle=i.fillColor||null,
i._currentFillStyleKey=null}},t.prototype.computeFillGradient=function(t,e){
var i=e.fillGradient,n=this.va,r=n.zeroY,s=this.scene.y0,a=this.scene.x0,o=this.scene.height,l=e._currentFillStyleKey,h=n.scale+"|"+r+"|"+s+"|"+a+"|"+o+"|"+r;
if(!l||!e._currentFillStyle||i!==l.gradient||h!==l.hash){for(var u=[],c=0;c<i.length;c++){
var p=i[c],f=r-n.valueToRelativeY(p[0]),g=(f-s)/o;u.push([g,p[1]]);
}u.sort(function(t,e){return t[0]-e[0]});for(var m=t.createLinearGradient(a,s,a,s+o),v=null,y=0;y<u.length;y++){
var S=u[y],b=S[0],C=S[1];if(b>0){if(v&&v[0]<0&&m.addColorStop(0,d.Colors.blend(v[1],C,(0-v[0])/(b-v[0]),!1)),
b>1){v&&m.addColorStop(1,d.Colors.blend(v[1],C,(1-v[0])/(b-v[0]),!1));
break}m.addColorStop(b,C)}v=S}e._currentFillStyle=m,e._currentFillStyleKey={
hash:h,gradient:i}}},t.prototype.processData=function(t){var e=this;
this.vstack=[],this.countStack=[],this.styles=[];var i=t[this.seriesId[0]];
if(0!==i.times.length){this.xes=i.xes.slice(i.fromIndex,i.toIndex),
this.times=i.times.slice(i.fromIndex,i.toIndex),this.centers=new Array(this.xes.length-1),
this.radii=new Array(this.xes.length-1),this.cluster.computeStackCenterRadius(this,this.xes,this.centers,this.radii),
this.externalItemsCache=null,this.externalItems=function(){var t=e.externalItemsCache;
return null===t&&(t=e.externalItemsCache=i.externalItems(i.fromIndex,i.toIndex-1)),
t},this.previewData=[];for(var n=0;n<this.seriesId.length;n++){
var r=this.seriesId[n];if(i=t[r],this.vstack.push(i.values.slice(i.fromIndex,i.toIndex-1)),
this.countStack.push(i.counts.slice(i.fromIndex,i.toIndex-1)),
i.config){for(var s=[],a=[],o=i.fromIndex;o<i.toIndex-1;o++){
var l=i.config[o];l&&(s.push(l.style),a.push(l.previewData))}
this.styles.push(s),this.previewData.push(a)}else this.styles.push(null);
}}},t.prototype.addLeads=function(t){for(var e=0;e<this.seriesId.length;e++){
var i=this.seriesId[e],n=t[i];n.leadIn&&this.injectLead(n.leadIn,e),
n.leadOut&&this.injectLead(n.leadOut,e)}},t.prototype.injectLead=function(t,e){
var i=this.series.length,n=t.values[0],r=t.times[0],s=[0],a=[0];
this.cluster.computeStackCenterRadius(this,t.xes,s,a);for(var o=s[0],l=a[0],h=0;h<this.centers.length&&this.centers[h]<o;)h++;
if(h===this.centers.length||this.centers[h]>o){this.centers.splice(h,0,o),
this.radii.splice(h,0,l),this.times.splice(h,0,r);for(var u=0;u<=i-1;u++)this.vstack[u].splice(h,0,null),
this.countStack[u].splice(h,0,null),this.styles[u]&&this.styles[u].splice(h,0,null);
}this.vstack[e][h]=n,this.countStack[e][h]=t.counts[0]},t.prototype.getSeparateNegative=function(){
var t=this.options.separateNegativeValues;return null===t&&(t="line"!==this.renderingType),
t},t.prototype.computeMinMax=function(){var t=1/0,e=-(1/0);if(this.vstack.length>0){
for(var i=this.vstack,n=i[0].length,r=i.length,s=this.options.type,a=this.getSeparateNegative(),o=this.scene.x0,l=o+this.scene.width,h=0,u=n-1;h<n&&this.centers[h]+this.radii[h]<o;)h+=1;
for(;u>=h&&this.centers[u]-this.radii[u]>l;)u-=1;if("proportional"===s)t=0,
e=100;else if(this.candleStacks)for(var c=h;c<=u;c++)for(var p=0;p<=r-1;p++){
var f=i[p][c];d.Helpers.isNumber(f)&&(t=Math.min(t,f),e=Math.max(e,f));
}else if(1===r)for(var g=i[0],c=h;c<=u;c++){var f=g[c];d.Helpers.isNumber(f)&&(t=Math.min(t,f),
e=Math.max(e,f))}else if("based"===s)for(var c=h;c<=u;c++)for(var p=0;p<=r-1;p++){
var f=i[p][c];d.Helpers.isNumber(f)&&(t=Math.min(t,f),e=Math.max(e,f));
}else if("normal"!==s||a){if("normal"!==s)throw"stack.type unknown value: "+s;
for(var c=h;c<=u;c++)for(var m=0,v=0,p=0;p<=r-1;p++){var f=i[p][c];
d.Helpers.isNumber(f)&&(f>0?v+=f:f<0&&(m+=f),t=Math.min(t,m),
e=Math.max(e,v))}}else for(var c=h;c<=u;c++)for(var y=0,p=0;p<=r-1;p++){
var f=i[p][c];d.Helpers.isNumber(f)&&(null!==f&&(y+=f),t=Math.min(t,y),
e=Math.max(e,y))}}this.min=t,this.max=e,t<=e?this.va.receiveSeriesGeometry(t,e,this.calculatedDepth):this.va.receiveSeriesGeometry(void 0,void 0,this.calculatedDepth);
},t.prototype.computeY=function(){var t=this.vstack,e=t.length;
if(0!==e){var i,n=this.options.type,r=this.getSeparateNegative(),s=t[0].length,a=this.va,o=null;
if("proportional"===n){i=t.map(function(){return[]});for(var l=0;l<=s-1;l++){
for(var h=0,u=0;u<=e-1;u++){var c=t[u][l];null!==c&&(h+=Math.abs(c));
}if(h>0){h*=.01;for(var u=0;u<=e-1;u++){var c=t[u][l];null!==c?i[u].push(a.valueToRelativeY(Math.abs(c)/h)):i[u].push(null);
}}else for(var u=0;u<=e-1;u++)i[u].push(null)}}else if("based"===n||1===e){
i=[];for(var d=t[0].map(function(){return 0}),p=0;p<t.length;p++){
for(var f=t[p],g=new Array(s),m=0;m<f.length;m++){var c=f[m];if(null!==c){
var v=a.valueToRelativeY(c),y=d[m];c>=0&&v<=y||c<0&&v>=y?g[m]=0:(g[m]=v-y,
d[m]=v)}else g[m]=null}i.push(g)}}else if("normal"===n&&r&&this.min<0&&this.max>0){
i=t.map(function(){return[]}),o=t.map(function(){return[]});for(var l=0;l<=s-1;l++)for(var u=0;u<=e-1;u++){
var c=t[u][l];c>0?(i[u].push(a.valueToRelativeY(c)),o[u].push(null)):c<0?(i[u].push(null),
o[u].push(a.valueToRelativeY(c))):(i[u].push(null),o[u].push(null));
}}else if("candlestick"===this.renderingType){i=t.map(function(){
return[]});for(var l=0;l<=s-1;l++)for(var u=0;u<=e-1;u++){var c=t[u][l];
null!==c?i[u].push(a.valueToRelativeY(c)):i[u].push(null)}}else{
if("normal"!==n)throw"stack.type unknown value: "+n;var S=0,b=0,C=0;
i=t.map(function(){return[]});for(var l=0;l<=s-1;l++)for(var u=0;u<=e-1;u++){
var c=t[u][l];if(0===u&&(S=b=C=0),null!==c){b+=c;var x=a.valueToRelativeY(b);
i[u].push(x-C),C=x}else i[u].push(null)}}this.ystackNegative=o,
this.ystack=i}},t.prototype.exportData=function(t,e){var i;if(this.times&&this.vstack){
for(var n=this.times,r=this.centers.length,s=0;s<r&&n[s+1]<=t;)s++;
for(var a=s;a<r&&n[a+1]<e;)a++;i=[];for(var o=0;o<this.vstack.length;o++){
var l=this.vstack[o],h=this.countStack[o],u=0,c=-(1/0),d=1/0,p=null,f=null;
r=0;var g=this.series[o].data.aggregation,m=!1,v=!1;"sum"===g?(m=!1,
v=!0):"avg"===g&&(m=!0,v=!0);for(var y=s;y<=a;y++){var S=l[y],b=0|h[y];
null==S||isNaN(S)||(u+=m?S*b:S,c=Math.max(c,S),d=Math.min(d,S),
null===p&&(p=S),f=S,r+=b)}r>0?i.push({sum:u,max:c,min:d,first:p,
last:f,count:r,avg:v?u/r:null,change:f-p}):i.push(null)}}else i=this.series.map(function(){
return null});for(var C=[],x=this.series.length-1;x>=0;x--){var w=this.series[x];
C.push({name:w.name||"",values:i[x],config:w})}return{name:this.options.name,
stack:this,config:this.options,data:C}},t}();t.Stack=e}(i=t.Series||(t.Series={}));
var g=function(t){function e(){var e=t.apply(this,arguments)||this;
return e._computedValueAxisList=[],e._computedValueAxis={},e._computedSeries=[],
e._computedStacks={},e.area=new F,e.legend=new s,e.valueAxisDefault=new u,
e.valueAxis={},e.chartTypes={columns:{type:"columns"},line:{type:"line"
},candlestick:{type:"candlestick"}},e.stacks={},e.seriesDefault={
type:"columns"},e.series=[],e.info=new A,e.events=new m,e.interaction=new I,
e.localization=new M,e.style={columnColors:["#32CD32","#36BEFF","#FBBD30","#EE3431","#894BBC","#0EC9AC","#524BBC"],
lineColors:["#32CD32","#36BEFF","#FBBD30","#EE3431","#894BBC","#0EC9AC","#524BBC"]
},e}return n(e,t),e.addSeparateSeries=function(t,e,i,n,r,s,a){
var o=d.Helpers.extendCopy({},t);o.stack=r,o.id="series"+d.Helpers.SeparatorChar+s,
o.name=e,o.data={aggregation:n,index:i},o.style=t.style,a.push(o);
},e._hasSeriesSettingsChanged=function(t){return t.series||t.chartTypes||t.seriesDefault||t.stacks||t.style;
},e.prototype.apply=function(i,n){var r=i.valueAxis;if(r){var s=[{
from:"style.baseLineColor",to:"style.baseLine.lineColor"},{from:"style.baseLineWidth",
to:"style.baseLine.lineWidth"},{from:"style.hgridLineColor",to:"style.hgrid.lineColor"
},{from:"style.title.alignment",to:"style.title.align"},{from:"style.title.font",
to:"style.title.textStyle.font"},{from:"style.title.fillColor",
to:"style.title.textStyle.fillColor"},{from:"style.valueLabel.font",
to:"style.valueLabel.textStyle.font"},{from:"style.valueLabel.fillColor",
to:"style.valueLabel.textStyle.fillColor"}];for(var a in r)this.applyCompatibility(r[a],s,"valueAxis["+a+"]");
}this.applyCompatibility(i,[{from:"valueAxis.default",to:"valueAxisDefault"
},{from:"valueAxisDefault.style.baseLineColor",to:"valueAxisDefault.style.baseLine.lineColor"
},{from:"valueAxisDefault.style.baseLineWidth",to:"valueAxisDefault.style.baseLine.lineWidth"
},{from:"valueAxisDefault.style.hgridLineColor",to:"valueAxisDefault.style.hgrid.lineColor"
},{from:"valueAxisDefault.style.title.alignment",to:"valueAxisDefault.style.title.align"
},{from:"valueAxisDefault.style.title.font",to:"valueAxisDefault.style.title.textStyle.font"
},{from:"valueAxisDefault.style.title.fillColor",to:"valueAxisDefault.style.title.textStyle.fillColor"
},{from:"valueAxisDefault.style.valueLabel.font",to:"valueAxisDefault.style.valueLabel.textStyle.font"
},{from:"valueAxisDefault.style.valueLabel.fillColor",to:"valueAxisDefault.style.valueLabel.textStyle.fillColor"
}]);var o=t.prototype.apply.call(this,i);if(this._initializing||e._hasSeriesSettingsChanged(o)){
this._initializing&&!o.series&&(o.series=[]);var l=this.series,h=[],c=null,p=0;
this._computedStacks=d.Helpers.clone(this.stacks);for(var f=0;f<l.length;f++){
var g=l[f];if(!g.valueAxis||"default"===g.valueAxis||this.valueAxis[g.valueAxis])if(g.data&&0===g.data.index)d.Helpers.error("Value `0` references the timestamp and cannot be used when specifying `series.data.index`.");else if(g.data&&0===g.data.countIndex)d.Helpers.error("Value `0` references the timestamp and cannot be used when specifying `series.data.countIndex`.");else if("candlestick"!==g.type||g.data&&g.data.index)h.push(g);else{
if(void 0===g.stack||null===g.stack){c="default"+d.Helpers.SeparatorChar+p++;
var m=new v;m.name=g.name,this._computedStacks[c]=m}var y=g.data;
if(null==y||null==y.high||null==y.low||null==y.open||null==y.close){
d.Helpers.error("Each candlestick series should define four data properties: low, high, open, close");
continue}var S=g.localization;S||(S=this.chartTypes.candlestick.localization),
S||(S=(new w).localization),e.addSeparateSeries(g,S.high||"high",y.high,"max",c,p++,h),
e.addSeparateSeries(g,S.open||"open",y.open,"first",c,p++,h),
e.addSeparateSeries(g,S.close||"close",y.close,"last",c,p++,h),
e.addSeparateSeries(g,S.low||"low",y.low,"min",c,p++,h)}else d.Helpers.error("The series reference a non-existant value axis `"+g.valueAxis+"`.");
}this._computedSeries=d.SettingsHelper.mergeDefaultValues(h,this.seriesDefault,this.chartTypes,n.createInstance,n.getMapping,"series"),
this.applySeriesColor(this._computedSeries)}if(this._initializing||o.valueAxis||o.valueAxisDefault||!this._computedValueAxisList.length){
this._initializing&&!o.valueAxis&&(o.valueAxis={});for(var b=!1,C=0;C<this._computedSeries.length;C++){
var x=this._computedSeries[C];b=b||"default"===x.valueAxis}this._computedValueAxisList=[],
this._computedValueAxis={};var L=this.valueAxisDefault;for(var T in this.valueAxis){
var k=new u,A=this.valueAxis[T];this.applyCompatibility(A,[{from:"style.baseLineColor",
to:"style.baseLine.lineColor"},{from:"style.baseLineWidth",to:"style.baseLine.lineWidth"
},{from:"style.hgridLineColor",to:"style.hgrid.lineColor"}]),
d.SettingsHelper.updateRecursive(k,L,d.SettingsMapping.LinearChartSettingsValueAxis,{},"valueAxisDefault"),
d.SettingsHelper.updateRecursive(k,A,d.SettingsMapping.LinearChartSettingsValueAxis,{},"valueAxis["+T+"]"),
k.id=T,this._computedValueAxis[T]=k,this._computedValueAxisList.push(k);
}if(b&&!this.valueAxis["default"]){var M=d.Helpers.realClone(L);
M.id="default",this._computedValueAxis[M.id]=M,this._computedValueAxisList.push(M);
}this._computedValueAxisList.sort(function(t,e){return t.id.localeCompare(e.id);
})}return o},e.prototype.applySeriesColor=function(t){for(var e=0,i=0,n=this.style.columnColors,r=this.style.lineColors,s=0;s<t.length;s++){
var a=t[s];"columns"===a.type&&null==a.style.fillColor?(a.style.fillColor=n[e],
e=(e+1)%n.length):"line"===a.type&&null==a.style.lineColor&&(a.style.lineColor=r[i],
i=(i+1)%r.length)}},e}(d.Settings);t.Settings=g;var m=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.onAnimationDone=null,
e}return n(e,t),e}(d.SettingsEvents);t.SettingsEvents=m;var v=function(){
function t(){this.name="",this.type="normal",this.separateNegativeValues=null;
}return t}();t.SettingsStack=v;var y=function(){function t(){
this.id=null,this.enabled=!0,this.data=new b,this.type="columns",
this.valueAxis="default",this.name=null,this.nameLegend=null,
this.showInLegend=!0,this.legendGroupId=null,this.stack=null,
this.cluster=null,this.style=new S}return t.getMapping=function(t,e){
throw new Error("This method is abstract.")},t.createInstance=function(t,e){
throw new Error("This method is abstract.")},t}();t.SettingsSeries=y;
var S=function(){function t(){this.fillColor=null,this.lineColor=null,
this.fillGradient=null,this.fillPattern=null,this._fillPatternOpacity=1,
this._currentFillStyleKey=null,this.lineDash=null,this.lineWidth=1,
this.shadowOffsetX=1,this.shadowOffsetY=-1,this.shadowColor=null,
this.legend={textColor:null,marker:{shape:null}},this.depth=0;
}return t}();t.SettingsSeriesStyle=S;var b=function(){function t(){
this.source="default",this.valueFunction=null,this.aggregation="sum",
this.aggregatedValueFunction=null,this.noDataPolicy="join"}return t;
}();t.SettingsSeriesData=b;var C=function(t){function e(){var e=t.call(this)||this;
return e.valueLabels={enabled:!1,style:{padding:1,margin:0,aspectRatio:3,
align:"center",textStyle:{fillColor:"black",font:"12px Arial"
},backgroundStyle:{lineColor:"rgba(255,255,255,0.4)",fillColor:"rgba(255,255,255,0.4)"
}},position:"insideTopAuto",minFontSize:7,contentsFunction:null,
useStackedValue:null},e.style=new L,e.type="columns",e}return n(e,t),
e}(y);t.SettingsSeriesColumns=C;var x=function(t){function e(){
var e=t.call(this)||this;return e.valueLabels={enabled:!1,style:{
padding:2,margin:0,aspectRatio:3,align:"center",textStyle:{fillColor:"black",
font:"12px Arial"},backgroundStyle:{lineColor:"rgba(255,255,255,0.4)",
fillColor:"rgba(255,255,255,0.4)"}},position:"value",minFontSize:7,
contentsFunction:null,useStackedValue:null},e.style=new T,e.type="line",
e}return n(e,t),e}(y);t.SettingsSeriesLines=x;var w=function(t){
function e(){var e=t.call(this)||this;return e.style=new k,e.localization={
high:"high",low:"low",open:"open",close:"close"},e.type="candlestick",
e}return n(e,t),e}(y);t.SettingsSeriesCandleStick=w;var L=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.minHeight=4,
e.gradient=.8,e.fillGradientMode=null,e.fillGradientType=null,
e.lineColor="",e.padding=[3,3],e.shadowBlur=3,e.depth=0,e.depthBrightness=.5,
e}return n(e,t),e}(S);t.SettingsSeriesColumnsStyle=L;var T=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.shadowBlur=5,
e.smoothing=!1,e.steps=!1,e.marker={shape:null,width:10,fillColor:null,
lineColor:null,lineWidth:1},e.markerStyleFunction=null,e}return n(e,t),
e}(S);t.SettingsSeriesLinesStyle=T;var k=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.pattern="candlestick",
e.padding=[1,1],e.increase={bar:{lineColor:"green",shadowColor:null,
lineDash:null,lineWidth:1,shadowOffsetX:1,shadowOffsetY:-1,shadowBlur:0
},candlestick:{lineColor:"#000",shadowColor:null,lineDash:null,
lineWidth:1,shadowOffsetX:1,shadowOffsetY:-1,shadowBlur:0,fillColor:"yellow"
}},e.decrease={bar:{lineColor:"red",shadowColor:null,lineDash:null,
lineWidth:1,shadowOffsetX:1,shadowOffsetY:-1,shadowBlur:0},candlestick:{
lineColor:"#000",shadowColor:null,lineDash:null,lineWidth:1,shadowOffsetX:1,
shadowOffsetY:-1,shadowBlur:0,fillColor:"black"}},e}return n(e,t),
e}(S);t.SettingsSeriesCandleStickStyle=k;var A=function(){function t(){
this.enabled=!0,this.showNoData=!0,this.position="inside",this.valueFormatterFunction=null,
this.aggregations=null,this.style={highlight:{fillColor:"rgba(30,160,220,0.15)",
fadeIn:200,fadeOut:200}},this.advanced={contentsFunction:null,
showOnlyHoveredSeries:!1,scope:null,showHeader:!0}}return t}();
t.SettingsInfoPopup=A;var M=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.valueUnits={K:1e3,M:1e6,B:1e9,T:1e12,P:1e15},e.noDataLabel="No data",
e.unnamedSeries="Unnamed",e.toolbar=new P,e}return n(e,t),e}(d.SettingsLocalization);
t.SettingsLocalization=M;var P=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.linButton="Lin",e.logButton="Log",e.linLogTitle="Switch lin/log scale",
e}return n(e,t),e}(d.SettingsLocalizationToolbar);t.SettingsLocalizationToolbar=P;
var I=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.swipeSensitivity=.6,e.ignoreBottomAxis=!1,e.scrolling=new N,
e.zooming=new D,e}return n(e,t),e}(d.SettingsInteraction);t.SettingsInteraction=I;
var D=function(){function t(){this.enabled=!0,this.wheel=!1,this.swipe=!0,
this.fingers=!0,this.fingersMaxZoom=10,this.sensitivity=2,this.wheelSensitivity=1.5,
this.keyboardFactor=2,this.upDownTreshold=10,this.zoomHighlightThreshold=1.5;
}return t}();t.SettingsInteractionZooming=D;var N=function(){
function t(){this.enabled=!0,this.swipePageFlipping=!0,this.keyboardScrollingFactor=1,
this.kineticFriction=1e-6,this.maxAnimationLength=1500}return t;
}();t.SettingsInteractionScrolling=N;var F=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.style=new E,e}return n(e,t),
e}(d.SettingsArea);t.SettingsArea=F;var E=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.noData={fillColor:"#888",
image:null},e.zoomHighlight={fillColor:"rgba(30,160,220,0.15)",
fadeIn:100,fadeOut:500},e.zoomHighlightInactive={fillColor:"rgba(30,160,220,0.08)"
},e}return n(e,t),e}(d.SettingsAreaStyle);t.SettingsAreaStyle=E,
function(e){var i=function(t){function e(e,i){var n,r=e.settings.localization.toolbar;
i.title=i.title||r.linLogTitle,i.label=i.label||r.linButton,n=t.call(this,e,i)||this;
var s=(i.cssClass||"")+" DVSL-bar-btn DVSL-bar-btn-l";return n.linClass=s+"in",
n.logClass=s+"og",n.logScale=n.chart.scene.settings.valueAxisDefault.logScale,
n.updateElements(),n}return n(e,t),e.prototype.onClick=function(e){
this.chart.setLogScale(!this.chart.scene.settings.valueAxisDefault.logScale,"user"),
t.prototype.onClick.call(this,e)},e.prototype.updateElements=function(){
var t=this.chart.settings.localization.toolbar,e=this.logScale;
this.a.className=e?this.logClass:this.linClass,this.options.showLabel!==!1&&(this.p.innerHTML=e?t.logButton:t.linButton);
},e.prototype.onSceneChange=function(t){var e=this.chart.scene.settings.valueAxisDefault.logScale;
t.settings&&e!==this.logScale&&(this.logScale=e,this.updateElements());
},e}(d.Bar.Button);e.LinLogButton=i,d.Bar.ToolbarItemNames.logScale=function(e,i){
return new t.Bar.LinLogButton(e,i)}}(e=t.Bar||(t.Bar={}));var O=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.enabled=!0,
e["export"]=!0,e.back=!0,e.zoomOut=!0,e.logScale=!0,e}return n(e,t),
e}(d.SettingsToolbar);t.SettingsToolbar=O;var R=function(t){function e(e){
var i=t.call(this)||this;return i.animationOrder=1e3,i.chart=null,
i.scene=null,i.events=null,i.pointer1=null,i.pointer2=null,i.t1=0,
i.t2=0,i.x1=0,i.x2=0,i.scaleOrigin=null,i.initialZoom=null,i.dragStartFrom=null,
i.dragStartTo=null,i.active=!1,i.lastScrollingY=0,i.scrollingActive=!1,
i.scalingActive=0,i.hadSecondPointer=!1,i.wheelOrigin=null,i.wheelProportion=null,
i.highlight=null,i.highlightRemoveWhenDone=!1,i._animationsDone=!0,
i.chart=e,i.scene=e.scene,i.events=e.events,i._settings=e.settings.interaction,
i.inertiaF=new d.Inertia(1,0,(!0)),i.inertiaT=new d.Inertia(1,0,(!0)),
i}return n(e,t),e.prototype.getVisibleRange=function(){return this._currentTo-this._currentFrom;
},e.prototype.onZoomOut=function(t,e,i,n){return null==n&&(n=2),
{from:i-(i-t)*n,to:i+(e-i)*n,center:i}},e.prototype.onZoomIn=function(t,e,i,n){
return void 0===n&&(n=.5),null==n&&(n=.5),{from:i-(i-t)*n,to:i+(e-i)*n,
center:i}},e.prototype.onScroll=function(t,e,i){return"<"===i?{
from:2*t-e,to:t}:{from:e,to:2*e-t}},e.prototype.onGoHome=function(t,e){
return{from:t,to:e,origin:e}},e.prototype.getFrom=function(t){
return null==t||t===1/0?this.inertiaF.getTargetValue():this.inertiaF.getValue(t);
},e.prototype.getTo=function(t){return null==t||t===1/0?this.inertiaT.getTargetValue():this.inertiaT.getValue(t);
},e.prototype.setFrom=function(t,e,i,n){void 0===e&&(e=!1),void 0===n&&(n=!1),
e?(this.inertiaF.setTarget(t,i,void 0,n?this._settings.scrolling.maxAnimationLength:null),
this._animationsDone=!1):(this._currentFrom=t,this.inertiaF.jump(t));
},e.prototype.setTo=function(t,e,i,n){void 0===e&&(e=!1),void 0===n&&(n=!1),
e?(this.inertiaT.setTarget(t,i,void 0,n?this._settings.scrolling.maxAnimationLength:null),
this._animationsDone=!1):(this._currentTo=t,this.inertiaT.jump(t));
},e.prototype.onWheel=function(t){if(null===this.pointer1){var e=this.getFrom(),i=this.getTo();
if(!(e>=i)){var n=this._settings;if(n.zooming.wheel&&n.zooming.enabled&&this.xyInArea(t.x,t.y)){
this.active=!0;var r=this.wheelOrigin;null===r&&(this.wheelOrigin=this.scaleOrigin=r=this.xyToPosition(t.x,t.y),
this.wheelProportion=(r-e)/(i-e),this.x1=t.x);var s=this.wheelProportion,a=Math.pow(Math.max(1.1,n.zooming.wheelSensitivity),.004*t.wheely);
e=r-(i-e)*s*a,i=r+(i-e)*(1-s)*a;var o=t.wheely<0?1:-1,l=d.Helpers.performanceNow();
this.handleZoomWheel(e,i,r,l,o),t.consumed=!0,this.active=!1}
}}},e.prototype.onPointerDown=function(t){this.wheelOrigin=null;
var e=this._settings;if(this.xyInArea(t.x,t.y)&&(e.scrolling.enabled||e.zooming.enabled)){
var i=this.xyToPosition(t.x,t.y),n=d.Helpers.performanceNow(),r=this.getFrom(n),s=this.getTo(n);
if(r>s){var a=s;s=r,r=a}null===this.pointer1?(this.pointer1=t.identifier,
this.x1=t.x,this.t1=i,this.scaleOrigin=i,this.onStartDragging(r,s,i),
this.lastScrollingY=t.y,this.dragStartFrom=r,this.dragStartTo=s,
this.dragCurFrom=r,this.dragCurTo=s,t.consumed=!0,this.inertiaF.finished(n)&&this.inertiaT.finished(n)||(this.setFrom(r),
this.setTo(s),this.stopAnimations(),this.scrollingActive=!0),
this.chart.cancelChartUpdateNotify(),t.consumed=!0):null===this.pointer2?(this.pointer2=t.identifier,
this.x2=t.x,this.t2=i,this.initialZoom=s-r,this.scaleOrigin=(this.t1+this.t2)/2,
t.consumed=!0):(this.scalingActive||this.scrollingActive)&&(t.consumed=!0);
}},e.prototype.xyToDragPosition=function(t,e){return this.dragCurFrom+(t-this.scene.x0)/this.scene.width*(this.dragCurTo-this.dragCurFrom);
},e.prototype.scaleViewRange=function(t,e,i){var n=Math.pow(1+this._settings.zooming.sensitivity,-t.dy/this.scene.height);
return e=(e-this.scaleOrigin)*n+this.scaleOrigin,i=(i-this.scaleOrigin)*n+this.scaleOrigin,
{from:e,to:i}},e.prototype.onPointerMove=function(t){null!==this.wheelOrigin&&Math.abs(this.x1-t.x)>this._settings.zooming.sensitivity&&(this.wheelOrigin=null);
},e.prototype.onPointerDrag=function(t){var e=this.dragCurFrom,i=this.dragCurTo,n=this._settings;
if(t.identifier===this.pointer1&&null===this.pointer2){this.scaleOrigin=this.t1,
this.x1=t.x;var r=t.y-this.lastScrollingY;if(Math.abs(t.dx)>4*Math.abs(t.dy)&&n.scrolling.enabled&&(this.scrollingActive=!0),
!this.hadSecondPointer&&(n.zooming.enabled&&n.zooming.swipe&&Math.abs(r)>n.zooming.upDownTreshold?this.scalingActive=r>0?1:-1:this.scalingActive=0,
this.scalingActive)){this.clearZoomHighlight();var s=this.scaleViewRange(t,e,i);
e=s.from,i=s.to,t.consumed=!0}if(this.scrollingActive){var a=this.xyToDragPosition(t.x,t.y),o=this.t1-a;
e+=o,i+=o}}else if(t.identifier===this.pointer1&&n.scrolling.enabled){
this.x1=t.x,this.clearZoomHighlight();var l=this.twoPointerDrag();
e=l.from,i=l.to}else{if(t.identifier!==this.pointer2||!n.scrolling.enabled)return void((this.scalingActive||this.scrollingActive)&&(t.consumed=!0));
this.x2=t.x,this.clearZoomHighlight();var l=this.twoPointerDrag();
e=l.from,i=l.to}this.dragCurFrom=e,this.dragCurTo=i;var h=this.onSnapWhileDragging(e,i,this.scaleOrigin,this.scrollingActive,this.scalingActive);
this.goToPositionDragging(h.from,h.to),t.consumed=!0},e.prototype.twoPointerDrag=function(){
var t=this._settings,e=t.zooming.fingersMaxZoom;this.scaleOrigin=(this.t1+this.t2)/2;
var i=this.t2-this.t1,n=this.dragCurFrom,r=this.dragCurTo,s=this.xyToDragPosition(this.x1,0),a=this.xyToDragPosition(this.x2,0);
if(t.scrolling.enabled&&t.zooming.enabled&&t.zooming.fingers&&0!==i){
var o=this.initialZoom,l=((s+a)/2-this._currentFrom)/(this._currentTo-this._currentFrom),h=(a-s)/(this._currentTo-this._currentFrom),u=void 0;
u=i*h>0?i/h:1/0;var c=o*e,d=o/e;u=Math.max(d,Math.min(c,u)),n=this.scaleOrigin-l*u,
r=this.scaleOrigin+(1-l)*u,this.scalingActive=u<o?1:-1,this.scrollingActive=!0,
this.hadSecondPointer=!0}else if(t.scrolling.enabled){var p=(this.t1+this.t2)/2,f=(s+a)/2,g=p-f;
n+=g,r+=g,this.scrollingActive=!0}return{from:n,to:r}},e.prototype.onPointerUp=function(t){
var e=this._settings,i=d.Helpers.performanceNow(),n=this.scrollingActive,r=this.scalingActive;
if(t.identifier===this.pointer2)this.pointer2=null,t.consumed=!0,
this.scaleOrigin=this.t1;else if(t.identifier===this.pointer1&&null!==this.pointer2)this.pointer1=this.pointer2,
this.pointer2=null,this.t1=this.t2,this.scaleOrigin=this.t1,t.consumed=!0;else if(t.identifier===this.pointer1){
this.pointer1=null,this.active=!0;var s=void 0,a=void 0,o=void 0;
if(e.scrolling.enabled){o=-t.vx,o=o>0?Math.min(o,.002*this.scene.width):Math.max(o,.002*-this.scene.width);
var l=this.getVisibleRange();o=o*l/this.scene.width}else o=0;if(this.updateFriction(i),
this.inertiaF.jump(this._currentFrom,o,i),this.inertiaT.jump(this._currentTo,o,i),
this._animationsDone=!1,e.scrolling.swipePageFlipping&&t.swipeUp&&this.scalingActive&&t.swipeSpeed>this.scene.height/e.swipeSensitivity){
var h=this.onZoomOut(this.dragStartFrom,this.dragStartTo,this.scaleOrigin);
s=h.from,a=h.to}else if(e.scrolling.swipePageFlipping&&t.swipeDown&&this.scalingActive&&t.swipeSpeed>this.scene.height/e.swipeSensitivity){
var u=this.onZoomIn(this.dragStartFrom,this.dragStartTo,this.scaleOrigin);
s=u.from,a=u.to}else if(n||r){if(n&&!r&&e.scrolling.swipePageFlipping&&(t.swipeLeft||t.swipeRight)&&t.swipeSpeed>this.scene.width/e.swipeSensitivity*.7){
var c=t.swipeLeft?"<":">",p=this.onScroll(this.dragStartFrom,this.dragStartTo,c);
s=p.from,a=p.to}else s=this._currentFrom,a=this._currentTo;this.scaleOrigin=(s+a)/2;
}if(s||a){var f=this.onSnapAfterDragging(this.inertiaF.getTargetValue(),this.inertiaT.getTargetValue(),this.scaleOrigin,n||0!==r,r);
f&&this.goToPosition(f.from,f.to,!0,i,!1),t.consumed=!0,this.scaleOrigin=null;
}this.hadSecondPointer=!1,this.active=!1,this.dragStartFrom=null,
this.dragStartTo=null,this.scalingActive=0,this.scrollingActive=!1;
}else(r||n)&&(t.consumed=!0)},e.prototype.onPointerCancel=function(t){
t.identifier===this.pointer2?(this.pointer2=null,this.scaleOrigin=this.t1):t.identifier===this.pointer1&&null!==this.pointer2?(this.pointer1=this.pointer2,
this.t1=this.t2,this.scaleOrigin=this.t1,this.pointer2=null,this.t2=null):t.identifier===this.pointer1&&(this.active=!0,
this.pointer1=null,this.t1=null,this.scaleOrigin=null,this.dragStartFrom=null,
this.dragStartTo=null,this.scalingActive=0,this.scrollingActive=!1,
this.active=!1,this.hadSecondPointer=!1)},e.prototype.onKeyDown=function(t){},
e.prototype.goToPositionDragging=function(t,e){this.setFrom(t),
this.setTo(e),this.clearZoomHighlight(),this.onPositionChanged(t,e);
},e.prototype.goToPosition=function(t,e,i,n,r){if(t<e)if(this._currentFrom<this._currentTo||(i=!1),
this.stopAnimations(),i){var s=this._settings.zooming.zoomHighlightThreshold,a=this._currentFrom,o=this._currentTo;
this.updateFriction(n,t,e),this.setFrom(t,!0,n,r),this.setTo(e,!0,n,r);
var l=Math.abs((t-e)/(a-o+1));if(l<1/s)this.setZoomHighlight(t,e,!0);else if(l>s){
var h=null!==this.dragStartFrom?this.dragStartFrom:a,u=null!==this.dragStartTo?this.dragStartTo:o;
this.setZoomHighlight(h,u,!1)}this.events.notifySceneChanges({
requestPaint:!0})}else this.setFrom(t),this.setTo(e),this.clearZoomHighlight(),
this.onPositionChanged(t,e),this.onAnimationDone(t,e),this._animationsDone=!0;
},e.prototype.doAnimations=function(t){if(!this._animationsDone){
var e=t.timeStamp,i=this.inertiaF.finished(e),n=this.inertiaT.finished(e);
this._animationsDone=i&&n;var r=this._currentFrom=this.getFrom(e),s=this._currentTo=this.getTo(e);
this._animationsDone||isNaN(r+s)?(this.stopAnimations(),this.onPositionChanged(r,s,!1),
this.onAnimationDone(r,s)):(this.onPositionChanged(r,s,!0),t.animating=!0);
}},e.prototype.stopAnimations=function(){this.highlight&&(this.highlightRemoveWhenDone?this.clearZoomHighlight():(this.highlight.style.fillColor=this.scene.settings.area.style.zoomHighlightInactive.fillColor,
this.events.notifySceneChanges({highlight:!0})))},e.prototype.abort=function(){
this.isActive()&&(this.pointer2&&this.onPointerCancel({identifier:this.pointer2
}),this.pointer1&&this.onPointerCancel({identifier:this.pointer1
}),this.setFrom(this._currentFrom),this.setTo(this._currentTo),
this.clearZoomHighlight(),this._animationsDone=!0)},e.prototype.isActive=function(){
return this.active||null!=this.pointer1||!this._animationsDone;
},e.prototype.clearZoomHighlight=function(){this.highlight&&(this.scene.removeHighlight("zoomTrace"),
this.highlight=null,this.events.notifySceneChanges({highlight:!0
}))},e.prototype.setZoomHighlight=function(t,e,i){this.highlight=this.scene.setHighlight("zoomTrace",t,e,this.scene.settings.area.style.zoomHighlight),
this.highlightRemoveWhenDone=i,this.events.notifySceneChanges({
highlight:!0})},e.prototype.updateFriction=function(t,e,i){var n=this.getVisibleRange();
if(null!=e&&null!=i){var r=i-e,s=.3,a=n*(1-s)>r,o=n*(1+s)<r;o&&(n=r),
(a||o)&&(n*=2)}var l=n*this._settings.scrolling.kineticFriction;
this.inertiaF.setAcceleration(l,t),this.inertiaT.setAcceleration(l,t);
},e}(d.ChartElement);t.Scrolling=R;var B=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.highlights={},e.seriesWithLabels=0,
e.dataLabels={spots:{},fontWidths:Object.create(null),metaData:{
availableWidth:0,processed:0,styles:null}},e.bottomAxisSize=0,
e}return n(e,t),e.prototype.xyInChart=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height;
},e.prototype.xyInChartOrBottom=function(t,e){var i=this.settings.interaction.ignoreBottomAxis?0:this.bottomAxisSize;
return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height+i;
},e.prototype.xyInBottom=function(t,e){return!this.settings.interaction.ignoreBottomAxis&&t>=this.x0&&t<this.x0+this.width&&e>=this.y0+this.height&&e<this.y0+this.height+this.bottomAxisSize;
},e.prototype.timeToX=function(t){throw"Need to implement timeToX";
},e.prototype.xToTime=function(t){throw"Need to implement xToTime";
},e.prototype.setHighlight=function(t,e,i,n){var r=this.highlights[t];
return r?(r.from=e,r.to=i,r.style=n,r.removed=!1):(r={from:e,
to:i,style:n,removed:!1},this.highlights[t]=r),r},e.prototype.removeHighlight=function(t){
var e=this.highlights[t];e&&(e.removed=!0,delete this.highlights[t]);
},e}(d.Scene);t.Scene=B;var H=function(t){function e(e){var i=t.call(this)||this;
return i.animationOrder=2e3,i.paintOrder=45,i.updateOrder=700,
i.scene=null,i.customId=0,i.animating=!1,i.highlights={},i.chart=e,
i.scene=e.scene,i}return n(e,t),e.prototype.doAnimations=function(t){
if(t.changes.highlight){var e=[];for(var i in this.highlights){
var n=this.highlights[i];n.exiting=!0,n.origin.removed&&(delete this.highlights[i],
n.animator=null,e.push(n))}for(var r=0;r<e.length;r++){var n=e[r];
this.highlights["__"+ ++this.customId]=n}for(var i in this.scene.highlights){
var s=this.scene.highlights[i];if(this.highlights[i]){var n=this.highlights[i];
n.exiting=!1,n.from=s.from,n.to=s.to,n.style=d.Helpers.clone(s.style);
}else{var n={from:s.from,to:s.to,style:d.Helpers.clone(s.style),
animator:null,exiting:!1,origin:s};this.highlights[i]=n,s.style.fadeIn>0&&(this.animating=!0,
n.animator=new d.ColorAnimator(d.Colors.derive(d.Colors.parse(n.style.fillColor),1,0),n.style.fillColor,n.style.fadeIn,"=",t.timeStamp));
}}for(var i in this.highlights){var n=this.highlights[i];if(n.exiting&&!n.animator){
var a=n.style;a.fadeOut>0?(this.animating=!0,n.animator=new d.ColorAnimator(a.fillColor,d.Colors.derive(d.Colors.parse(a.fillColor),1,0),a.fadeOut,"=",t.timeStamp)):delete this.highlights[i];
}}}if(this.animating){var o=!1,l=t.timeStamp;for(var i in this.highlights){
var n=this.highlights[i];n.animator&&(n.style.fillColor=n.animator.get(l),
n.animator.finished(l)?(n.animator=null,n.exiting&&delete this.highlights[i]):o=!0);
}this.animating=o,t.animating=t.animating||o}},e.prototype.paintScene=function(t){
var e=this.scene.x0,i=e+this.scene.width,n=Math.round(this.scene.y0),r=this.scene.height,s=t.context;
for(var a in this.highlights){var o=this.highlights[a],l=Math.max(this.scene.timeToX(o.from),e),h=Math.min(this.scene.timeToX(o.to),i);
h<e||l>i||(d.Graphics.rectStyle(s,o.style),s.fillRect(l,n,h-l,r));
}},e}(d.ChartElement);t.Highlights=H;var z=function(t){function e(e){
var i=t.call(this,e)||this;return i.rightAxis=null,i.leftAxis=null,
i.timeAxisPanel=null,i}return n(e,t),e.prototype.createDom=function(e){
t.prototype.createDom.call(this,e),this.timeAxisPanel=d.Helpers.createDom("div","DVSL-TC-timeAxis",null,this.backgroundContainer),
d.DomLayer.setContainerStyle(this.timeAxisPanel),this.leftAxis=d.Helpers.createDom("div","DVSL-valueAxis",null,this.backgroundContainer),
d.DomLayer.setContainerStyle(this.leftAxis),this.rightAxis=d.Helpers.createDom("div","DVSL-valueAxis",null,this.backgroundContainer),
d.DomLayer.setContainerStyle(this.rightAxis)},e.prototype.doAnimations=function(e){
t.prototype.doAnimations.call(this,e),e.changes.bounds&&(this.background.style.left=this.scene.x0+"px",
this.background.style.right=this.scene.chartWidth-(this.scene.x0+this.scene.width)+"px",
this.leftAxis.style.width=this.scene.leftMargin+"px",this.leftAxis.style.bottom=this.scene.bottomMargin+"px",
this.rightAxis.style.width=this.scene.rightMargin+"px",this.rightAxis.style.bottom=this.scene.bottomMargin+"px",
this.timeAxisPanel.style.top=this.scene.y0+this.scene.height+"px",
this.timeAxisPanel.style.left=this.scene.x0+"px",this.timeAxisPanel.style.width=this.scene.width+"px",
this.outerBorder.style.left=this.scene.x0+"px",this.outerBorder.style.width=this.scene.width+"px");
},e}(d.DomLayer);t.DomLayer=z;var U=function(t){function e(e,i,n){
var r=t.call(this,e,i,n)||this;return r.scrolling=null,r.renderer=null,
r}return n(e,t),e.prototype.createDomLayer=function(){return new z(this);
},e.prototype.notifyAnimationDone=function(){var t=this;window.setTimeout(function(){
t.removed||t.dispatchEventParams("animationDone",t.createEventArguments(null,"api"),null);
},0)},e.prototype.processChangedSettings=function(t){var e=t.settingsChanges;
e&&(g._hasSeriesSettingsChanged(e)&&(t.linearChartSeries=!0),
(e.valueAxis||e.valueAxisDefault)&&(t.linearChartValueAxis=!0));
},e.prototype.updateSettings=function(e,i){t.prototype.updateSettings.call(this,e,i);
},e.prototype.setLogScale=function(t,e){var i={};for(var n in this.settings.valueAxis)i[n]={
logScale:t};this.updateSettings({valueAxisDefault:{logScale:t
},valueAxis:i},e)},e.prototype.finalInitialize=function(){t.prototype.finalInitialize.call(this),
this.legend=this.events.addElement(new h(this))},e.prototype.getEnabledSeries=function(){
for(var t=[],e=this.settings._computedSeries,i=0,n=e.length;i<n;i++)e[i].enabled&&t.push(e[i]);
return t},e}(d.Impl);t.Impl=U;var _=function(t){function e(e){
var i=t.call(this)||this;return i.animationOrder=10,i.t0=0,i.t1=0,
i.object=null,i.activePointer=null,i.pointerX=0,i.pointerY=0,
i.chart=e,i.container=e.shell.interactiveContainer,i.scene=e.scene,
i.events=e.events,i.popup=new d.InfoPopup(i.chart),i.settings=e.scene.settings.info,
i}return n(e,t),e.prototype.getPopupAreaMouseMoved=function(t,e){
return null},e.prototype.buildHeader=function(t,e){return""},
e.prototype.show=function(t){this.settings.enabled&&(this.pointerX=t.x,
this.pointerY=t.y,this.updatePopup(t))},e.prototype.previewPointerMove=function(t){
!this.settings.enabled||null!==this.activePointer&&this.activePointer!==t.identifier||(this.pointerX=t.x,
this.pointerY=t.y,this.updatePopup(t))},e.prototype.previewPointerDrag=function(t){
!this.settings.enabled||null!==this.activePointer&&this.activePointer!==t.identifier||(this.activePointer=t.identifier,
this.pointerX=t.x,this.pointerY=t.y)},e.prototype.previewPointerCancel=function(t){
null!==this.activePointer&&this.activePointer===t.identifier&&(this.activePointer=null);
},e.prototype.previewPointerUp=function(t){null!==this.activePointer&&this.activePointer===t.identifier&&(this.activePointer=null);
},e.prototype.previewPointerOut=function(t){!this.settings.enabled||null!==this.activePointer&&this.activePointer!==t.identifier||t.touch||(this.activePointer=null,
this.pointerX=null,this.pointerY=null,d.Helpers.isParentOf(this.popup.popup,t.target)||this.hideInfoPopup(t));
},e.prototype.previewRightClick=function(t){this.settings.enabled&&t.touch&&(this.activePointer=t.identifier,
this.previewPointerMove(t))},e.prototype.previewPointerDown=function(t){
this.settings.enabled&&null===this.activePointer&&(this.activePointer=t.identifier,
this.hideInfoPopup(t))},e.prototype.updatePopup=function(t){if(!this.pointerX&&!this.pointerY)return void this.hideInfoPopup(t);
var e=this.getPopupMouseMoved(this.pointerX,this.pointerY,this.t0,this.t1,this.object,this.contents);
e?this.showInfoPopup(e.t0,e.t1,e.obj,e.contents,t):this.hideInfoPopup(t);
},e.prototype.manualShowInfoPopup=function(t,e,i){this.showInfoPopup(t,e,null,i||this.buildContent(t,e,null,null),null);
},e.prototype.showInfoPopup=function(t,e,i,n,r){if(!this.popup.visible||t!==this.t0||e!==this.t1||i!==this.object||this.contents!==n){
var s=this.scene,a=this.settings;this.t0=t,this.t1=e,this.object=i,
this.contents=n,s.setHighlight("infoRange",t,e,a.style.highlight),
this.popup.show(s.timeToX(this.t0),s.timeToX(this.t1),s.y0,n,d.InfoPopupPosition[a.position]),
this.notifyChanges(r)}},e.prototype.notifyChanges=function(t){
t?(t.changes.infoLabel=!0,t.changes.highlight=!0):this.events.notifySceneChanges({
infoLabel:!0,highlight:!0})},e.prototype.hideInfoPopup=function(t){
this.popup.visible&&(this.popup.hide(),this.t0=0,this.t1=0,this.scene.removeHighlight("infoRange"),
this.notifyChanges(t))},e.prototype.paintScene=function(t){this.popup.visible&&this.updateXY();
},e.prototype.updateXY=function(){var t=this.scene;this.popup.updateXY(t.timeToX(this.t0),t.timeToX(this.t1),t.y0,d.InfoPopupPosition[t.settings.info.position]);
},e.prototype.getPopupMouseMoved=function(t,e,i,n,r,s){if(this.scene.displayUnit&&!this.scene.xyInChartOrBottom(t,e))return null;
var a=this.getPopupAreaMouseMoved(t,e);if(!a)return null;var o=a.t0,l=a.t1,h=null,u=null,c=this.scene.hoverSeriesItem,d=this.settings.advanced.scope,p=o,f=l;
if(c&&(u=c.seriesIndex,("stack"===d||"value"===d||"auto"===d&&void 0!==u&&null!==u)&&(p=this.scene.xToTime(c.x0),
f=this.scene.xToTime(c.x1)),h=c.stack),null===p)return null;if(p===i&&f===n&&u===r)return{
t0:i,t1:n,obj:r,contents:s};var g=this.buildContent(o,l,u,h);return{
t0:p,t1:f,obj:u,contents:g}},e.prototype.getContentsFunctionRange=function(t,e){
return[t,e]},e.prototype.buildContent=function(t,e,i,n){var r,s=this.settings.advanced,a=this.chart.renderer.exportData(t,e);
if(s.contentsFunction){var o=null;null!==i&&this.scene.settings._computedSeries.length>i&&(o=this.scene.settings._computedSeries[i]),
r=s.contentsFunction.call(this.chart.api,a,o,this.getContentsFunctionRange(t,e));
}else r=this.buildValues(a,i,n);if(!s.showHeader)return r;var l=this.buildHeader(t,e);
return l+r},e.prototype.buildValues=function(t,e,i){var n=this.chart.settings,r={},s=0;
for(var a in n.valueAxis)if(n.valueAxis[a].valueFormat){var o=d.Helpers.matchPercentFormat(n.valueAxis[a].valueFormat);
r[a]=o,s++}var l=void 0;n.valueAxisDefault&&n.valueAxisDefault.valueFormat&&(l=d.Helpers.matchPercentFormat(n.valueAxisDefault.valueFormat));
var h={},u=0;for(var a in n.valueAxis)if(n.valueAxis[a].valueFormat){
var o=d.Helpers.matchCurrencyFormat(n.valueAxis[a].valueFormat);
h[a]=o,u++}var c=void 0;n.valueAxisDefault&&n.valueAxisDefault.valueFormat&&(c=d.Helpers.matchCurrencyFormat(n.valueAxisDefault.valueFormat));
for(var p=n.localization.noDataLabel,f=n.info.valueFormatterFunction,g=n.info.advanced.showOnlyHoveredSeries?n.info.advanced.scope:null,m=i&&("stack"===g||"value"===g)||"auto"===g&&void 0!==e&&null!==e,v="value"===g,y="",S=!1,b=0;b<t.length;b++){
var x=t[b];if(m){for(var w=!1,L=0;L<x.data.length;L++){var T=x.data[L];
T.config.showInLegend&&(T.values||n.info.showNoData)&&(w=w||null!==e&&T.config===n._computedSeries[e]||i===x.stack);
}if(!w)continue}var k=t.length+x.data.length===2?"":n.localization.unnamedSeries;
x.name&&(S&&(y+="</table>",S=!1),x.data.length>1?y+="<h3>"+x.name+"</h3>":k=x.name),
S||(y+='<table cellspacing="0">',S=!0);for(var L=0;L<x.data.length;L++){
var T=x.data[L],A=null!==e&&T.config===this.scene.settings._computedSeries[e];
if(T.config.showInLegend&&(T.values||n.info.showNoData)&&(!v||A)){
y+="<tr><td";var M=void 0,P=void 0,I=T.config;if(n instanceof C?(M=I.style.fillColor,
P=I.style.lineColor):(M=I.style.lineColor,P=I.style.fillColor),
M&&"transparent"!==M||(M=P),M&&(y+=' data-color="'+M+'"'),A&&(y+=" data-selected"),
y+=">",y+=T.name||k,y+="</td><td>",f)y+=f.call(this.chart.api,T.values,T.config);else if(s>0||l||u>0||c)if(T.values){
var D=I.data.aggregation?T.values[I.data.aggregation]:T.values.sum;
y+=r[T.config.valueAxis]?d.Helpers.printPercentValue(D,r[T.config.valueAxis]):l?d.Helpers.printPercentValue(D,l):h[T.config.valueAxis]?d.Helpers.printCurrencyValue(D,h[T.config.valueAxis]):c?d.Helpers.printPercentValue(D,c):d.Helpers.numberFormat(D);
}else y+=n.localization.noDataLabel;else if(T.values)if(T.values.count>1&&n.info.aggregations&&n.info.aggregations.length>0)for(var N=0;N<n.info.aggregations.length;N++){
var F=n.info.aggregations[N];y+=""+d.Helpers.numberFormat(T.values[F])+("&nbsp;("+F+")");
}else y+=I.data.aggregation?d.Helpers.numberFormat(T.values[I.data.aggregation]):d.Helpers.numberFormat(T.values.sum);else y+=p;
y+="</td></tr>"}}}return S&&(y+="</table>"),y},e.prototype.remove=function(){
this.popup.remove()},e}(d.ChartElement);t.InfoPopup=_;var G=function(){
function t(t,e){if(this.axisConfigList=e,this.chart=t,this.axis=Object.create(null),
0!==e.length)for(var i=!1,n=0;n<e.length;n++){var r=e[n];this.axis[r.id]=new p(t,r),
!i&&r.enabled&&(i=!0,this.axis[r.id].isPrimary=!0)}}return t.prototype.getAxis=function(t){
return this.axis[t]},t.prototype.getPanels=function(t){for(var e=[],i=0;i<this.axisConfigList.length;i++){
var n=this.axisConfigList[i],r=this.axis[n.id].getPanel();(r||t)&&e.push(r);
}return e},t.prototype.setPanels=function(t){for(var e=0;e<this.axisConfigList.length;e++){
var i=this.axisConfigList[e];this.axis[i.id].setPanel(t[e])}},
t.prototype.updateMinMax=function(t){for(var e in this.axis)this.axis[e].updateMinMax(t);
},t.prototype.doAnimations=function(t){for(var e in this.axis)this.axis[e].doAnimations(t);
},t.prototype.paintUnder=function(t){for(var e in this.axis)this.axis[e].paintUnder(t);
},t.prototype.paint=function(t){for(var e in this.axis)this.axis[e].paint(t);
},t}();t.ValueAxisSet=G,function(t){var e=function(){function e(t,e){
this.stacks=[],this.idToStack={},this.paddingSum=0,this.scene=e,
this.chart=t}return e.prototype.addSeries=function(e,i,n,r){var s;
if(i.stack){var a=i.stack+"#"+i.type;s=this.idToStack[a],s||(s=this.idToStack[a]=new t.Stack(this.chart,this.scene,this,n,r),
this.stacks.push(s))}else s=new t.Stack(this.chart,this.scene,this,n,r),
this.stacks.push(s);s.addSeries(e,i)},e.prototype.afterInit=function(){
for(var t=0;t<this.stacks.length;t++){var e=this.stacks[t];e.afterInit();
}},e.prototype.process=function(t){for(var e=0;e<this.stacks.length;e++){
var i=this.stacks[e];i.process(t)}},e.prototype.afterProcess=function(){
for(var t=0;t<this.stacks.length;t++){var e=this.stacks[t];e.afterProcess();
}},e.prototype.paint=function(t,e){for(var i=0;i<this.stacks.length;i++){
var n=this.stacks[i];n.paint(t,e)}},e.prototype.hitTestStack=function(t,e){
for(var i=null,n=1/0,r=0;r<this.stacks.length;r++){var s=this.stacks[r],a=s.hitTestStack(t,e),o=a.result,l=a.distance;
l<n&&(n=l,i=o)}return{result:i,distance:n}},e.prototype.hitTest=function(t,e,i){
for(var n=null,r=1/0,s=0;s<this.stacks.length;s++){var a=this.stacks[s],o=a.hitTest(t,e,i),l=o.result,h=o.distance;
h<r&&(r=h,n=l)}return{result:n,distance:r}},e.prototype.exportData=function(t,e,i){
for(var n=0;n<this.stacks.length;n++){var r=this.stacks[n];i.push(r.exportData(t,e));
}},e.prototype.computeStackCenterRadius=function(t,e,i,n){if(!(e.length<2)){
for(var r=this.stacks.length,s=this.stacks.indexOf(t),a=(s+.5)/r,o=.5/r,l=0,h=0,u=0;u<this.stacks.length;u++){
var c=this.stacks[u];l+=c.paddingLeft+c.paddingRight}for(var u=0;u<this.stacks.length;u++){
var c=this.stacks[u];if(h+=c.paddingLeft,c===t)break;h+=c.paddingRight;
}var d=e[1]-e[0];l>d/2&&(l=d/2,h=h/d*(d-l));for(var u=0;u<e.length-1;u++){
var p=e[u],f=e[u+1]-p-l;i[u]=p+f*a+h,n[u]=f*o}}},e}();t.Cluster=e;
}(i=t.Series||(t.Series={}));var j=function(){function t(t,e){
this.valueAxisSet=e,this.chart=t,this.scene=this.chart.scene,
this.clusters=[],this.buildSeries()}return t.prototype.buildSeries=function(){
this.clusters=[];for(var t={},e=null,n={},r=new v,s=this.scene.settings,a=0;a<s._computedSeries.length;a++){
var o=s._computedSeries[a];if(o.enabled){var l=void 0;o.cluster?(l=t[o.cluster],
l||(l=t[o.cluster]=new i.Cluster(this.chart,this.scene),this.clusters.push(l))):"line"===o.type?o.stack?n.hasOwnProperty(o.stack)?l=n[o.stack]:(l=n[o.stack]=new i.Cluster(this.chart,this.scene),
this.clusters.push(l)):(l=new i.Cluster(this.chart,this.scene),
this.clusters.push(l)):(e||(e=new i.Cluster(this.chart,this.scene),
this.clusters.push(e)),l=e);var h=s._computedStacks[o.stack]||r;
l.addSeries(a,o,h,this.valueAxisSet.getAxis(o.valueAxis))}}for(var u=0;u<this.clusters.length;u++){
var l=this.clusters[u];l.afterInit()}},t.prototype.process=function(t){
for(var e=0;e<this.clusters.length;e++){var i=this.clusters[e];
i.process(t)}},t.prototype.afterProcess=function(){for(var t=0;t<this.clusters.length;t++){
var e=this.clusters[t];e.afterProcess()}},t.prototype.paint=function(t){
var e=t.context;this.scene.seriesWithLabels=0;for(var i=0;i<this.clusters.length;i++)for(var n=this.clusters[i],r=0;r<n.stacks.length;r++)for(var s=n.stacks[r].series,a=0;a<s.length;a++){
var o=s[a];o.valueLabels&&o.valueLabels.enabled&&this.scene.seriesWithLabels++;
}for(var l=0;l<this.clusters.length;l++){var h=this.clusters[l];
h.paint(t,e)}},t.prototype.hitTest=function(t,e,i){void 0===i&&(i=4);
for(var n=null,r=1/0,s=0;s<this.clusters.length;s++){var a=this.clusters[s],o=a.hitTest(t,e,i),l=o.result,h=o.distance;
h<r&&(n=l,r=h)}if(r>i){r=1/0,n=null;for(var s=0;s<this.clusters.length;s++){
var a=this.clusters[s],u=a.hitTestStack(t,e),l=u.result,h=u.distance;
h<r&&(n=l,r=h)}}return n},t.prototype.exportData=function(t,e){
for(var i=[],n=0;n<this.clusters.length;n++){var r=this.clusters[n];
r.exportData(t,e,i)}return i},t}();t.Renderer=j}(l=i.LinearChart||(i.LinearChart={})),
function(t){var e=t.Bar||(t.Bar={}),i=864e5,r=function(){function e(t,i,n){
this.count=i;var r=e.parsingMap[t];if(!r)throw new Error("Time unit `"+t+"` is not recognized.");
this.unit=r,this.name=void 0===n?i+" "+r:n}return e.isGoodUnit=function(t){
return e.parsingMap.hasOwnProperty(t)},e.parse=function(t,i,n){
if(void 0===n&&(n=!0),null==t)return null;if(d.Helpers.isString(t)){
var r=1,s=void 0,a=t.split(" ");if(2===a.length){if(r=d.Helpers.tryParseFloat(a[0],null),
null===r||(0|r)!==r){if(n)throw new Error("Cannot parse the time unit - the correct format is `1 s`: "+t);
return null}s=a[1]}else{if(1!==a.length){if(n)throw new Error("Cannot parse the time unit - the correct format is `1 s`: "+t);
return null}r=1,s=a[0]}if(!this.isGoodUnit(s)){if(n)throw new Error("Cannot parse the time unit - unrecognized time unit: "+t);
return null}return new e(s,r,i||t)}if(t instanceof e)return t;
if(n)throw new Error("Cannot parse the unit text because it is not a string: "+t);
return null},e.prototype.clone=function(){return new e(this.unit,this.count,this.name);
},e.prototype.add=function(t,e){void 0===e&&(e=1);var n=this.unit,r=this.count*e;
if("ms"===n)t+=r;else if("s"===n)t+=1e3*r;else if("m"===n)t+=6e4*r;else if("h"===n)t+=36e5*r;else if("d"===n)t+=r*i;else if("w"===n)t+=r*i*7;else{
var s=new Date(t);"y"===n?s.setUTCFullYear(s.getUTCFullYear()+r):"M"===n&&s.setUTCMonth(s.getUTCMonth()+r),
t=s.getTime()}return t},e.prototype.sub=function(t,e){return void 0===e&&(e=1),
this.add(t,-1*e)},e.prototype.numberOfUnits=function(i,n){return Math.round(t.moment(n).utc().diff(t.moment(i).utc(),e.unitsTranslation[this.unit],!0)/this.count);
},e.prototype.toShortString=function(){return 1===this.count?this.unit:this.toString();
},e.prototype.toString=function(){return this.count+" "+this.unit;
},e.prototype.approxTime=function(){return e.timeUnitDiffs[this.unit]*this.count;
},e.prototype.isSmallerOrEqual=function(t){return this.approxTime()<=t.approxTime();
},e.prototype.isSmaller=function(t){return this.approxTime()<t.approxTime();
},e.prototype.isBigger=function(t){return this.approxTime()>t.approxTime();
},e.prototype.isEqual=function(t){return!!t&&this.approxTime()===t.approxTime();
},e.prototype.getBigger=function(){return"y"===this.unit?new e(this.unit,10*this.count):new e(e.toBiggerUnit[this.unit],1);
},e.prototype.roundTimeDown=function(t,e){if(null==t)return null;
t=Math.round(t);var n=this.count,r=this.unit;if("ms"===r)return Math.floor(t/n)*n;
if("s"===r)return Math.floor(t/1e3/n)*n*1e3;if("m"===r)return Math.floor(t/6e4/n)*n*6e4;
if("h"===r)return Math.floor(t/36e5/n)*n*36e5;if("d"===r){if(n%7!==0)return Math.floor(t/i/n)*n*i;
r="w",n/=7}if("w"===r){var s=e.week.dow+3,a=t;return t=(t/i-s)/7+1,
t=(Math.floor(t/n)*n*7+s)*i,t>a&&(t-=7*i),t}var o=new Date(Math.floor(t/i)*i);
if("y"===r)return o.setUTCFullYear(Math.floor(o.getUTCFullYear()/n)*n,0,1),
o.getTime();if("M"===r){var l=12*o.getUTCFullYear()+o.getUTCMonth();
return o.setUTCMonth(o.getUTCMonth()+Math.floor(l/n)*n-l,1),o.getTime();
}throw new Error("Unrecognized unit: `"+this.unit+"`")},e.prototype.roundTimeUp=function(t,e){
return null==t?null:this.roundTimeDown(this.add(t)-1,e)},e.prototype.roundTimeRound=function(t,e){
return null==t?null:this.roundTimeDown((this.add(t)+t-1)/2,e);
},e.prototype.isMultipleOf=function(t){var e=this.unit,i=t.unit,n=this.approxTime(),r=t.approxTime(),s=n/r;
if(s<1||(0|s)!==s)return!1;if(e===i)return!0;if(1===t.count&&"w"!==i)return!0;
var a=864e5,o=a/r;return o>=1&&(0|o)===o||("y"===e?"M"===i:"M"!==e&&"w"!==e);
},e}();r.parsingMap={milliseconds:"ms",millisecond:"ms",sec:"s",
second:"s",seconds:"s",min:"m",minute:"m",minutes:"m",hour:"h",
hours:"h",day:"d",days:"d",week:"w",weeks:"w",mon:"M",month:"M",
months:"M",year:"y",years:"y",ms:"ms",s:"s",m:"m",h:"h",d:"d",
D:"d",w:"w",W:"w",M:"M",y:"y",Y:"y"},r.knownUnits=["ms","s","m","h","d","w","M","y"],
r.timeUnitDiffs={ms:1,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5,M:2592e6,
y:31104e6},r.unitsTranslation={ms:"millisecond",s:"second",m:"minute",
h:"hour",d:"day",w:"week",M:"month",y:"year"},r.toBiggerUnit={
ms:"s",s:"m",m:"h",h:"d",d:"w",w:"M",M:"y",y:null},r.toSmallerUnit={
ms:null,s:"ms",m:"s",h:"m",d:"h",w:"d",M:"d",y:"M"},t.TimeStep=r,
function(e){var i=function(t){function e(e,i){var n;return i.cssClass=i.cssClass||"DVSL-bar-btn-month",
i.title=i.title||e.settings.localization.toolbar.periodDropdownTitle,
n=t.call(this,e,i)||this,n._getItemsCache=null,n.custom={displayAnchor:null,
disabled:!1,displayPeriod:null,displayPeriodStr:null,displayUnit:null,
displayUnitStr:null,selected:!1,name:e.settings.localization.toolbar.customPeriod
},n.updateSelectedItem(),n}return n(e,t),e.prototype.onSelectionChange=function(t){
this.chart.setDisplayPeriod(t.displayPeriodStr,t.displayAnchor,null==t.displayUnit?null:t.displayUnit.toString(),!0,"user");
},e.prototype.onSceneChange=function(t){t.settings&&(this._getItemsCache=null),
(t.settingsChanges&&(t.settingsChanges.area||t.settingsChanges.toolbar)||t.time)&&this.updateSelectedItem();
},e.prototype.updateSelectedItem=function(){var t=this._lastSelectedItem;
if(t&&t!==this.custom&&this.chart.isThisDisplayPeriod(t.displayPeriodStr,t.displayAnchor,t.displayUnitStr))return void this.setSelectedItem(t);
for(var e=this.getItems(),i=0;i<e.length;i++){var n=e[i];if(n!==t&&this.chart.isThisDisplayPeriod(n.displayPeriodStr,n.displayAnchor,n.displayUnitStr))return void this.setSelectedItem(n);
}this.setSelectedItem(this.custom)},e.prototype.setSelectedItem=function(e){
this._lastSelectedItem&&(this._lastSelectedItem.selected=!1),
e.selected=!0,t.prototype.setSelectedItem.call(this,e),this._lastSelectedItem=e;
},e.prototype.getItems=function(){if(this._getItemsCache)return this._getItemsCache;
for(var t=[],e=this.chart.settings._minUnit,i=this.custom,n=0;n<this.chart.settings.toolbar.periods.length;n++){
var r=this.chart.settings.toolbar.periods[n],s=r.parse(),a=s.displayPeriod,o=s.displayUnit;
o&&o.isSmaller(e)||a&&a.isSmallerOrEqual(e)||(t.push(s),this.chart.isThisDisplayPeriod(r.displayPeriod,s.displayAnchor,r.displayUnit)&&(i=s));
}return this._lastSelectedItem=i,i.selected=!0,this._getItemsCache=t,
t},e}(d.Bar.Combobox);e.DisplayPeriodDropdown=i,d.Bar.ToolbarItemNames.displayPeriod=function(e,i){
return new t.Bar.DisplayPeriodDropdown(e,i)};var r=function(t){
function e(e,i){var n;return i||(i={}),i.cssClass=i.cssClass||"DVSL-bar-btn-bars",
i.title=i.title||e.settings.localization.toolbar.unitDropdownTitle,
n=t.call(this,e,i)||this,n.updateSelectedItem(),n}return n(e,t),
e.prototype.onSelectionChange=function(t){this.chart.setDisplayUnit(t.value,!0,"user");
},e.prototype.onSceneChange=function(t){t.settings&&(this._getItemsCache=null),
(t.settingsChanges&&(t.settingsChanges.area||t.settingsChanges.toolbar)||t.time)&&this.updateSelectedItem();
},e.prototype.updateSelectedItem=function(){var t=this.chart.displayUnit;
if(t){for(var e=this.getItems(),i=0;i<e.length;i++){var n=e[i];
if(n.value.isEqual(t))return void this.setSelectedItem(n)}this.setSelectedItem({
name:t.name,value:t,disabled:!1,selected:!0})}},e.prototype.getItems=function(){
if(this._getItemsCache)return this._getItemsCache;for(var t=this.chart.scene,e=[],i=(t.timeEnd-t.timeStart)/t.width*this.chart.settings.timeAxis.minUnitWidth,n=!1,r=0;r<this.chart.settings._displayUnitsParsed.length;r++){
var s=this.chart.settings._displayUnitsParsed[r];s.approxTime()<i?n||(e.push({
name:this.chart.settings.localization.toolbar.unavailableUnitTitle,
value:s,disabled:!0,selected:!1}),n=!0):e.push({name:s.name,value:s,
disabled:!1,selected:s.isEqual(t.displayUnit)})}return e},e}(d.Bar.Combobox);
e.DisplayUnitDropdown=r,d.Bar.ToolbarItemNames.displayUnit=function(e,i){
return new t.Bar.DisplayUnitDropdown(e,i)}}(e=t.Bar||(t.Bar={}));
var s=function(){function t(t,e,i,n){this.name=null,this.displayAnchor=null,
this.displayPeriod=null,this.displayUnit=null,void 0===e?this.displayPeriod=t:(this.name=t,
this.displayAnchor=e,this.displayPeriod=i,this.displayUnit=n);
}return t.prototype.parse=function(){var t=this.displayPeriod,e=this.displayUnit;
return{name:this.name,displayAnchor:this.displayAnchor,displayPeriod:"max"===t?null:r.parse(t),
displayPeriodStr:t,displayUnit:"auto"===e?null:r.parse(e),displayUnitStr:e,
selected:!1,disabled:!1}},t}();t.SettingsAreaDisplayPeriod=s;var a=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.enabled=!0,
e.zoomOut=!0,e.logScale=!0,e.displayUnit=!0,e.displayPeriod=!0,
e.zoomOutFunction=null,e.periods=[new s("Last second","now","1 s","25 ms"),new s("Last minute","now","1 m","1 s"),new s("Last hour","now","1 h","1 m"),new s("Last day","now","1 d","1 h"),new s("Last week","now","1 w","6 h"),new s("Last month","now","1 M","1 d"),new s("Last year","now","1 y","1 M"),new s("All data","newestData","max","auto")],
e.items=[new d.SettingsToolbarItem("fullscreen","left"),new d.SettingsToolbarItem("back","left"),new d.SettingsToolbarItem("zoomOut","left"),new d.SettingsToolbarItem("logScale","right"),new d.SettingsToolbarItem("displayPeriod","right"),new d.SettingsToolbarItem("displayUnit","right"),new d.SettingsToolbarItem("export","right")],
e}return n(e,t),e}(d.SettingsToolbar);t.SettingsToolbar=a;var o=function(){
function t(t){this.settings=t.settings,this.chart=t,this.scene=t.scene;
}return t.prototype.toBiggerDisplayUnit=function(t){for(var e=null,i=0;i<this.settings._displayPeriodsParsed.length;i++){
var n=this.settings._displayPeriodsParsed[i];n.approxTime()>t.approxTime()&&(null===e||n.approxTime()<e.approxTime())&&(e=n);
}return e},t.prototype.getMinRangeForUnit=function(t,e,i,n){var r=i.approxTime(),s=this.scene.settings.timeAxis.minUnitWidth,a=this.scene.settings.timeAxis.maxUnitWidth,o=this.verifyUnitWidth(t,e,i);
if(o.min||o.max){d.Helpers.warn("Could not show all data as requested by `navigation.initialDisplayPeriod`. Please adjust either `navigation.initialDisplayPeriod` or `timeAxis.minUnitWidth` and `timeAxis.maxUnitWidth`.");
var l=void 0;o.min?l=this.scene.width/s*r:o.max&&(l=this.scene.width/a*r),
"oldestData"===n?e=t+l:t=e-l}return{from:t,to:e}},t.prototype.verifyUnitWidth=function(t,e,i){
var n=i.approxTime(),r=this.scene.settings.timeAxis.minUnitWidth,s=this.scene.settings.timeAxis.maxUnitWidth,a=(e-t)/this.scene.width;
return{min:!(r*a<n),max:!(s*a>n)}},t.prototype.adjustTimeRangeToUnits=function(t,e,i,n){
var r,s=i-(i-e)/2,a=n.approxTime(),o=this.getUnitRange(t,[n]),l=i-e;
r=l<o.minTime?Math.ceil(o.minTime/a):Math.min((i-e)/a,Math.floor(o.maxTime/a));
var h=r*a;return e=s-h/2+1,i=s+h/2-1,{from:e,to:i}},t.prototype.preventUnitWidthViolation=function(t,e){
var i=this.scene,n=i.width,r=(t-e)/n,s=r*i.settings.timeAxis.minUnitWidth;
return s>i.displayUnit.approxTime()},t.prototype.getBiggerDisplayPeriod=function(t,e){
for(var i=Math.abs(e-t),n=0,r=null,s=0;s<this.settings._displayPeriodsParsed.length;s++){
var a=this.settings._displayPeriodsParsed[s],o=a.approxTime(),l=i/o;
l<.9&&l>n&&(n=l,r=a)}return r},t.prototype.getBiggerDisplayUnit=function(t){
for(var e=this.settings._displayUnitsParsed,i=t.approxTime(),n=0;n<e.length;n++){
var r=e[n];if(r.approxTime()>i)return r}return t},t.prototype.getSmallerDisplayUnit=function(t){
for(var e=this.settings._displayUnitsParsed,i=t.approxTime(),n=e.length-1;n>=0;n--){
var r=e[n];if(r.approxTime()<i)return r}return null},t.prototype.getClosestDisplayPeriod=function(t,e,i){
for(var n=null,r=0,s=null,a=1/0,o=0;o<this.settings._displayPeriodsParsed.length;o++){
var l=this.settings._displayPeriodsParsed[o],h=l.approxTime();
h<=t&&(null===n||r<h)&&(n=l,r=h),h>=t&&(null===s||a>h)&&(s=l,
a=h)}return i?e&&e.approxTime()<.8*t?e:null!==s&&a<1.2*t||null===n?s:n:null!==n&&(r>.8*t||a>1.2*t)?n:s;
},t.prototype.isAllowedDisplayUnit=function(t){for(var e=0;e<this.settings._displayUnitsParsed.length;e++){
var i=this.settings._displayUnitsParsed[e];if(i.isEqual(t))return!0;
}return!1},t.prototype.adjustTimeAfterScale=function(t,e,i,n){
var r=this.scene,s=(e-t)/r.width,a=r.settings.timeAxis.minUnitWidth,o=r.displayUnit.approxTime();
if(!(a*s<=o)){var l=i+(n-i)/2,h=r.width/a|0;t=l-h/2*o,e=l+h/2*o;
}return{from:t,to:e}},t.prototype.computeDisplayUnit=function(t,e,i,n,r,s,a){
var o={from:n,to:r,unit:null};if(null!=n&&null!=r||d.Helpers.error("`computeDisplayUnit` called with invalid arguments."),
a&&!a.scale&&a.scroll)return o.unit=i||this.scene.displayUnit,
o;if(null!==t&&null!==e&&i&&Math.abs(e-t-(r-n))<.001)return o.unit=i,
o;var l=this.scene.displayUnit,h=this.scene.settings,u=Math.max(s.width,10),c=h.timeAxis,p=Math.max(c.minUnitWidth,Math.min(u/3,c.maxUnitWidth)),f=(r-n)/u*c.minUnitWidth,g=(r-n)/u*p,m=null,v=0,y=h._displayUnitsParsed,S=h._minUnit.approxTime(),b="min"===c.unitSizePolicy;
if(a&&a.scale){var C=1/0;i&&2!==a.scale&&(a.scale===-1?S=i.approxTime():C=i.approxTime());
for(var x=0;x<y.length;x++){var w=y[x],L=w.approxTime();if(!(L<S||L>C)){
var T=void 0;T=null===m||(b?L>=f&&L<v||v<f&&L>v:L<=g&&L>v||v>g&&L<v),
T&&(m=w,v=L)}}m||(l.approxTime()!==y[y.length-1].approxTime()&&(d.Helpers.warn("`computeDisplayUnit` could not lookup the new unit - no units available matching the `minUnitWidth` and `maxUnitWidth` for the current range.",null,!0),
this.scene.disableScaleLimiter=!0),m=this.scene.displayUnit)}else{
var k=n,A=r,M=h.navigation.initialDisplayAnchor,P=this.chart.getDisplayLimits(),I=r===P.to&&("now"===M||"newestData"===M),D=n===P.from&&"oldestData"===M;
l&&l.unit===h._minUnit.unit&&1===l.count&&(m=l);for(var N=50;--N>0;){
for(var F=!1,x=0;x<y.length;x++){var w=y[x],L=w.approxTime();if(!(L<S))if(L<f)F=!0;else{
if(!(L<=g))break;var T=void 0;T=null==m||(b?L<v:L>v),T&&(m=w,
v=L)}}if(!m&&!F){var E=(k+A)/2,O=u/p*S/2;m=h._minUnit,k=E-O,A=E+O;
}if(m){var R=this.scene.timeStepSettings;return{from:m.roundTimeDown(k,R),
to:m.roundTimeUp(A,R),unit:m}}var B=A-k,H=B-B/4>=S,z=H?B/4:B-S;
I?k+=z:D?A-=z:(k+=z/2,A-=z/2),f=(A-k)/u*c.minUnitWidth,g=(A-k)/u*p;
}0===N&&d.Helpers.warn("`computeDisplayUnit` could not lookup the new unit. It is possible that the chart did not load the data properly.");
}if(!m)throw d.Helpers.error("",t,e,i,n,r,u),new Error("Could not calculate displayUnit");
return o.unit=m,o},t.prototype.tryComputeDisplayPeriod=function(t,e,i,n,s,a,o){
var l="auto"===i?null:r.parse(i),h=null,u=null;if(t&&t.indexOf(">")>-1){
var c=t.split(">",2);h=parseInt(c[0],10),u=parseInt(c[1],10);var p=r.timeUnitDiffs,f=!l||p[l.unit]<p.d;
h=this.scene.timestampToInternal(h,f),u=this.scene.timestampToInternal(u,f);
}else if("max"===t&&null!==n&&null!==s)h=n,u="now"===e?o:s;else if("max"!==t){
var g=r.parse(t),m=void 0;m="now"===e?o:"newestData"===e&&null!==s?s:d.Helpers.tryParseFloat(e,null),
g&&null!==m&&(h=g.sub(m),u=m)}if(null===h||null===u)return{from:null,
to:null,unit:null};var v=this.getUnitRange(a),y=v.minTime,S=v.maxTime,b=v.minUnit,C=v.maxUnit;
return u-h>S&&(l=C,h=u-S),u-h<y&&(l=b,h=u-y),{from:h,to:u,unit:l
}},t.prototype.resolveFromTo=function(t,e,i){var n,r,s,a=this.scene,o=a.timeStepSettings,l=null,h=a.majorTimeUnit||i;
return d.Helpers.isNumber(t)?n=t:(s="oldestDataRounded"===t)||"oldestData"===t?(null===l&&(l=this.chart.getDisplayLimits(i)),
n=l.from,s&&(n=h.roundTimeDown(n,o))):(t&&d.Helpers.error("Invalid `interaction.scrolling.limitFrom` value '"+t+"'."),
n=null),d.Helpers.isNumber(e)?r=e:(s="newestDataRounded"===e)||"newestData"===e?(null===l&&(l=this.chart.getDisplayLimits(i)),
r=l.to,s&&(r=h.roundTimeUp(r,o))):"now"===e?r=a.getCurTime():(e&&d.Helpers.error("Invalid `interaction.scrolling.limitTo` value '"+e+"'."),
r=null),{from:i.roundTimeDown(n,o),to:i.roundTimeUp(r,o)}},t.prototype.getUnitRange=function(t,e){
void 0===e&&(e=this.settings._displayUnitsParsed);var i=e[e.length-1],n=i.approxTime(),r=e[0],s=r.approxTime(),a=Math.max(10,t.width),o=a/this.settings.timeAxis.minUnitWidth*n,l=a/this.settings.timeAxis.maxUnitWidth*s;
return{minTime:l,maxTime:o,minUnit:r,maxUnit:i}},t.prototype.getLimits=function(t,e){
var i=this.settings.interaction.scrolling,n=i.limitMode,r=e?null!==n:"block"===n;
return r&&t?this.resolveFromTo(i.limitFrom,i.limitTo,t):{from:null,
to:null}},t.prototype.preventOverscale=function(t,e,i,n,r,s,a){
var o=this.getLimits(s,a),l=o.from,h=o.to,u=this.getUnitRange(t,e),c=u.minTime,p=u.maxTime;
if(null!==l&&null!==h&&r-n>h-l){var f=(l+h)/2,g=(h-l)/2;return g=Math.max(g,c/2),
this.adjustTimeRangeToUnits(t,f-g,f+g,s)}p*=.99,c*=1.01;var m=r-n;
m=Math.min(m,p),m=Math.max(m,c);var v=m===c?m/(r-n):1;return null===i&&(i=(n+r)/2),
n===r&&n>0&&d.Helpers.error("From = To, trouble",n,r),{from:i+(n-i)*v,
to:i+(r-i)*v}},t.prototype.preventOverscroll=function(t,e,i,n){
var r=this.getLimits(t,n),s=r.from,a=r.to,o=this.settings.interaction.scrolling,l=i-e;
return null!==s&&null!==a&&(l=Math.min(l,a-s)),l*=o.overscrollProportion,
null!==s&&(s-=l),null!==a&&(a+=l),null!==s&&null!==a&&a-s<i-e?(s<e?l=e-s:a>i&&(l=i-a),
e-=l,i-=l):null!==a&&a<i?(l=i-a,e-=l,i-=l):null!==s&&s>e&&(l=s-e,
e=s,i+=l),{from:e,to:i}},t.prototype.scroll=function(t,e,i,n,s,a){
var o;if("displayUnit"===a)o=i.clone();else if("page"===a)o=this.getTimeRangeStep(t,e);else{
if(!r.isGoodUnit(a))return void d.Helpers.error("Incorrect scroll unit: "+a);
o=r.parse(a)}return o.count*=s,"<"===n?{from:o.sub(t),to:o.sub(e)
}:{from:o.add(t),to:o.add(e)}},t.prototype.getTimeRangeStep=function(t,e){
t=Math.round(t),e=Math.round(e);for(var i=null,n=this.scene.timeStepSettings,s=0;s<r.knownUnits.length;s++){
var a=r.knownUnits[s],o=new r(a,1),l=o.roundTimeRound(t,n),h=o.roundTimeRound(e,n);
t===l&&e===h&&(null===i||i.approxTime()<o.approxTime())&&(i=o);
}return i.count=Math.max(1,i.numberOfUnits(t,e)),i},t}();t.TimeSetup=o;
var h;h="undefined"!=typeof Float64Array?function(t){return Array.isArray(t)||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Int16Array||t instanceof Uint16Array;
}:function(t){return Array.isArray(t)};var u=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.units=["ms","s","m","h","d","M","y"],
e.url=null,e.urlByUnit=null,e.requestMaxUnits=1e4,e.prefetchRatio=1,
e.minimizeRequests=!1,e.cacheSize=5e5,e.timestampInSeconds=!1,
e.stringTimestampFormat=null,e.timeZoneOffset=null,e.dataFunction=null,
e.preloaded=null,e.suppressWarnings=!1,e.useSmallerUnitCache=!0,
e._skipRequestRangeRounding=!1,e}return n(e,t),e}(d.SettingsData);
t.SettingsData=u;var c=function(){function e(t,e){this.chart=null,
this.scene=null,this.settings=null,this.noData=!1,this.dataLimitFrom=null,
this.dataLimitTo=null,this.dataLimitFromUnit=null,this.dataLimitToUnit=null,
this.dataFrom=null,this.dataTo=null,this.error=null,this.cache={},
this.requests={},this._pendingAddData=[],this.dataSettings=e,
this.scene=t.scene,this.settings=t.settings,this.chart=t,this.dataId="data"+e.id,
this._prepareUsableUnits(),this.updateDataLimit(null,null,null,null,new r("ms",1));
}return e.binSearch=function(t,e){var i=0;if(!t)throw"no data";
for(var n=t.length-1;i<n;){var r=(n+i)/2|0;if(t[r][0]<e)i=r+1;else{
if(!(t[r][0]>e)){for(;r>0&&t[r-1][0]===e;)r-=1;return r}n=r}}
return i<t.length&&t[i][0]<e?i+1:i},e.linSearchUp=function(t,e,i,n){
if(n){for(var r=e+1;r<=t.length-1;r++)if(null!==n(t[r]))return r;
}else for(var r=e+1;r<=t.length-1;r++)if(null!==t[r][i])return r;
return-1},e.linSearchDown=function(t,e,i,n){if(n){for(var r=e-1;r>=0;r--)if(null!==n(t[r]))return r;
}else for(var r=e-1;r>=0;r--)if(null!==t[r][i])return r;return-1;
},e.findSubrange=function(t,i,n){var r=e.binSearch(t,i),s=e.binSearch(t,n);
return{i0:r,i1:s}},e.prototype.notifyAssetsLoaded=function(){
if(t.moment&&t.moment.tz){for(var e=this._pendingAddData,i=0;i<e.length;i++){
var n=e[i];this.addDataInt(n.request,n.parsedData,n.append)}this._pendingAddData=[];
}},e.prototype.applyPreloadedData=function(){this.dataSettings.preloaded&&this.addData(this.dataSettings.preloaded);
},e.prototype.remove=function(){this.scene.setMessage(this.dataId,null);
for(var t in this.requests){var e=this.requests[t];e&&(e.callback=null);
}},e.prototype._prepareUsableUnits=function(){var t=this.dataSettings.units;
if(0===t.length)throw new Error("The `data.units` array must contain at least one value.");
for(var e=this._units=new Array(t.length),i=0;i<t.length;i++){
var n=t[i],s=r.parse(n,n,!0);s&&(e[i]={size:s.approxTime(),unit:s,
key:s.toString()})}e.sort(function(t,e){return e.size-t.size});
},e.prototype._findUsableUnit=function(t){for(var e=this._units,i=this.cache,n=0;n<e.length;n++){
var r=e[n];if(null!==i[r.key]&&t.isMultipleOf(r.unit))return r.unit;
}this.chart.error("Cannot load data - no suitable data unit configured for the requested `"+t+"`.");
},e.prototype.determineDataLimits=function(t,e,i,n){var r=this;
if(t){if(t=this._findUsableUnit(t),!t)return}else t=this._units[0].unit;
var s=null,a=null,o=t.approxTime();if(this.dataLimitFromUnit&&this.dataLimitFromUnit.approxTime()<=o&&(s=this.dataLimitFrom),
this.dataLimitToUnit&&this.dataLimitToUnit.approxTime()<=o&&(a=this.dataLimitTo),
!(e&&null==s||i&&null==a))return void n(this.dataLimitFrom,this.dataLimitTo,t);
this.scene.setMessage(this.dataId,this.settings.localization.determiningDataBounds,999);
var l=function(t,i,s,a){if(!a)return void r.scene.setMessage(r.dataId,null);
if(null===r.dataLimitFrom&&e){if(t!==i)return void r.scheduleDataLoading(a,null,i,!1,function(t,e,n){
return l(i,t,e,n)});r.dataLimitFrom=i}r.scene.setMessage(r.dataId,null),
n(r.dataLimitFrom,r.dataLimitTo,a)},h=function(t,e,n,s,a){if(!a)return void r.scene.setMessage(r.dataId,null);
if(null===r.dataLimitTo&&i){if(e!==s)return void r.scheduleDataLoading(a,s,null,!1,function(e,i,n){
return h(t,s,e,i,n)});r.dataLimitTo=s}l(t+1,t,s,a)};this.scheduleDataLoading(t,null,null,!1,function(t,e,i){
return h(t,e,t,e,i)})},e.prototype.getDataForRange=function(t,i,n,r){
var s=this.dataSettings,a=null,o=t,l=i;null!==this.dataLimitFrom&&(o=Math.max(this.dataLimitFrom,o),
l=Math.max(l,this.dataLimitFrom)),null!==this.dataLimitTo&&(l=Math.min(this.dataLimitTo,l),
o=Math.min(o,this.dataLimitTo));var h=o!==l;if(h)for(var u=0;u<this._units.length;u++){
var c=this._units[u],p=this.cache[c.key];if(p&&n.isMultipleOf(c.unit)&&p.from<i&&p.to>t){
(s.useSmallerUnitCache||p.unit.approxTime()===n.approxTime())&&(a=p,
h=o<p.from||l>p.to);break}}var f=!1;if(h&&(h=!!s.dataFunction||!!s.url||!!s.urlByUnit,
h&&(!s.minimizeRequests||!this.chart.scrolling.isActive()))){
var g=this._findUsableUnit(n),m=!1;a&&g.approxTime()===a.unit.approxTime()&&(o>=a.from&&(m=!0,
o=Math.max(o,a.to)),(l<=a.to||o<a.from)&&(l=Math.min(l,a.from)));
var v=g.numberOfUnits(t,i),y=s.cacheSize;v>y&&(d.Helpers.warn("The chart requires "+v+" values (using data unit `"+g+"`) to display the current time range. `data.cacheSize` limit (currently "+y+") will be automatically increased to allow this."),
s.cacheSize=1.2*v|0),f=this.scheduleDataLoading(g,o,l,m,r)}if(a){
var S=e.findSubrange(a.values,t,i),b=S.i0,C=S.i1;return{unit:n.unit,
count:n.count,from:a.from,to:a.to,values:a.values,startIndex:b,
endIndex:C,loading:f}}return f?{unit:n.unit,count:n.count,from:o,
to:l,values:[],startIndex:0,endIndex:0,loading:!0}:(o!==l&&d.Helpers.warn("The datasource `"+s.id+"` cannot return data for unit "+n,null,!0),
{unit:null,count:null,from:null,to:null,values:[],startIndex:0,
endIndex:0,loading:!1})},e.prototype.updateData=function(t,e,i){
var n=this._findUsableUnit(t),r=n.toString();if(this.cache[r]&&!this.requests[r]){
var s=this.scene.timeStepSettings,a=n.roundTimeUp(e,s),o=n.roundTimeDown(this.cache[r].lastTimestamp,s);
o<=a&&this.scheduleDataLoading(t,o,a,!1,i)}},e.prototype.scheduleDataLoading=function(t,e,i,n,s){
var a=this;if(!t)throw"No unit";if(e>i)return!1;this.chart.log("Scheduling data loading "+t+","+e+","+i);
var o=d.Helpers.performanceNow(),l=t.toString(),h=this.requests[l];
if(h){if(!(h.time+this.dataSettings.requestTimeout<o))return this.chart.log("Already loading for selected period"),
!0;h.callback=null,delete this.requests[l]}var u=e,c=i,p=this.scene.timeStepSettings;
if(this.dataSettings._skipRequestRangeRounding||(null!==u&&(u=t.roundTimeDown(u,p)),
null!==c&&(c=t.roundTimeUp(c,p))),null!==u&&null!==c){var g=(c-u)/t.approxTime();
g>this.dataSettings.requestMaxUnits&&(n?c=t.add(u,this.dataSettings.requestMaxUnits):u=t.sub(c,this.dataSettings.requestMaxUnits));
}var m=this.getDataFunction();if(!m)return this.chart.log("No data function. Cannot load data?"),
!1;var v=r.timeUnitDiffs[t.unit]<r.timeUnitDiffs.d,y=v?null:this.settings.timeAxis.timeZone;
this.requests[l]=h=new f(t,u,c,s,o,y);var S=function(t){return a.dataReceivedRaw(h,t);
},b=function(){return a.dataFailed(h)};u=this.convertTimestampFromInternal(u,v),
c=this.convertTimestampFromInternal(c,v),u===c&&null!==c&&c++;
var C=m(u,c,t.toShortString(),S,b,y);return this.chart.log("Data requested "+t+", "+u+", "+c),
(d.Helpers.isObjectOrArray(C)||d.Helpers.isString(C))&&(this.dataSettings.suppressWarnings||d.Helpers.warn("Data object should not be returned directly from the `dataFunction` delegate - instead call the `success` callback."),
this.dataReceivedRaw(h,C)),!0},e.prototype.dataReceivedRaw=function(t,e){
if(!this.chart.removed){this.scene.setMessage(this.dataId,null),
delete this.requests[t.unitStr],this.chart.log("Data arrived");
var i=d.Helpers.parseData(e,this.dataSettings.format);d.Helpers.isObjectOrArray(e)&&(i=this.cloneDataObject(i)),
this.addDataInt(t,i,!1)}},e.prototype.cloneDataObject=function(t){
t=d.Helpers.clone(t);var e=t.values;if(!t.error&&e)if(Array.isArray(e)){
t.values=e=e.slice();for(var i=0;i<e.length;i++){var n=e[i];if(!h(n)){
t.error="The `values` in the TimeChart data object must be an array of arrays. The value at index "+i+" is not an array.";
break}e[i]=Array.prototype.slice.call(n)}}else t.error="The `values` in the TimeChart data object must be an array or arrays.";
return t},e.prototype.addData=function(t){t=this.cloneDataObject(t),
this.addDataInt(null,t,!0)},e.prototype.addDataInt=function(e,i,n){
if(void 0===n&&(n=!1),null!==i){if(!t.moment||!t.moment.tz)return void this._pendingAddData.push({
request:e,parsedData:i,append:n});var r=this.cleanupData(i);if(r.error)return"no-unit"===r.error&&e&&(this.cache[e.unitStr]=null),
void this.chart.error(r.error);var s;if(s=e?this.analyzeData(r,e):this.analyzeDataNoRequest(r,n),
e&&!e.unit.isMultipleOf(s.unit))this.chart.error("Incorrect data - requested unit `"+e.unit+"`, got `"+s.unit+"`. The requested unit must be a multiple of returned unit."),
this.cache[e.unitStr]=null,e.callback&&e.callback(null,null,null);else{
var a=s.unitStr;if(e&&a!==e.unitStr){this.cache[e.unitStr]=null;
for(var o=!0,l=this._units,h=0;h<l.length;h++)if(l[h].unit.isEqual(s.unit)){
o=!1;break}o&&(d.Helpers.warn("The data source returned unit `"+a+"` which was not declared in `data.units`."),
this.dataSettings.units.push(a),this._prepareUsableUnits())}if(s.unit&&null!=s.from&&null!=s.to){
var u=this.cache[s.unitStr];u?this.cache[s.unitStr].merge(s,this.dataSettings.cacheSize,this.chart,n):this.cache[s.unitStr]=s;
}e&&e.callback&&e.callback(s.from,s.to,s.unit)}this.chart.events.notifySceneChanges({
data:(c={},c[this.dataSettings.id]=!0,c)});var c}},e.prototype.dataFailed=function(t){
this.cache[t.unitStr]||(this.cache[t.unitStr]=null),this.scene.setMessage(this.dataId,this.settings.localization.dataRequestFailed,1e3),
this.chart.error("Failed data loading request"),t.callback&&t.callback(null,null,null);
},e.prototype.updateDataLimit=function(t,e,i,n,r){this.chart.invalidateDataLimits(),
void 0!==t&&null!==t&&(null===this.dataFrom||this.dataFrom>t)&&(this.dataFrom=t),
void 0!==e&&null!==e&&(null===this.dataTo||this.dataTo<e)&&(this.dataTo=e),
null!=i&&(this.dataLimitFrom=i,this.dataLimitFromUnit=r,this.dataFrom=null==this.dataFrom?i:Math.max(this.dataFrom,i)),
null!=n&&(this.dataLimitTo=n,this.dataLimitToUnit=r,this.dataTo=null==this.dataTo?n:Math.min(this.dataTo,n));
},e.prototype.cleanupData=function(e){if(e.error)return e;"local"===e.timeZone&&(d.Helpers.error("The data source has to specify a timezone that is not `local` so that it works independent of the browser settings."),
e.timeZone=t.moment.tz.guess()),e.error="bad-response";var i=!this.dataSettings.suppressWarnings,n="";
e.data&&!e.values&&(i&&d.Helpers.warn("Use of property `data` in the TimeChart data object (returned from the URL, dataFunction or preloaded property) is deprecated. Please use `values` instead.",null,!0),
e.values=e.data),null==e.unit&&(n+="\nRequired field 'unit' not set in data"),
null==e.values&&(n+="\nRequired field 'values' not set in data");
var s=r.parse(e.unit,void 0,!1);if(null===s&&(n+="\nData error: unrecognized data unit: "+e.unit),
n.length)return e.error=n.substr(1),e;e.error=null;var a=e.timeZone||"UTC",o=r.timeUnitDiffs[s.unit]<r.timeUnitDiffs.d,l=t.moment.defaultZone,h=t.moment.locale();
t.moment.locale(this.scene.momentLocale),t.moment.tz.setDefault(a),
e.from=this.convertTimestampToInternal(e.from,o),e.to=this.convertTimestampToInternal(e.to,o),
e.dataLimitFrom=this.convertTimestampToInternal(e.dataLimitFrom,o),
e.dataLimitTo=this.convertTimestampToInternal(e.dataLimitTo,o);
var u,c,p=-1e30,f=!1;null!=e.from&&null!=e.to&&e.from>=e.to&&(this.chart.error("Data logic error. from >= to: "+e.from+", "+e.to+". The values will be ignored."),
e.from=null,e.to=null),null!=e.dataLimitFrom&&null!=e.dataLimitTo&&e.dataLimitFrom>=e.dataLimitTo&&(this.chart.error("Data logic error. dataLimitFrom >= dataLimitTo: "+e.dataLimitFrom+", "+e.dataLimitTo+". The values will be ignored."),
e.dataLimitFrom=null,e.dataLimitTo=null);var g=e.dataLimitFrom,m=e.dataLimitTo;
null==g&&(g=-(1/0)),null==m&&(m=1/0);var v=0;if("UTC"===a&&"UTC"===this.settings.timeAxis.timeZone&&(v=this.dataSettings.timestampInSeconds?1e3:1),
e.values.length>0){for(var y=[],S=0;S<e.values.length;S++){var b=e.values[S];
if(Array.isArray(b)){for(var C=b.length,x=1;x<C;x++){var w=b[x];
null!=w?"number"!=typeof w&&isNaN(b[x]=parseFloat(w))?(this.chart.error("Data error: the value is not a number: values["+S+"]["+x+"] = "+w),
b[x]=null):isNaN(w)&&(b[x]=null):b[x]=null}var L=C?b[0]:null;if(null!=L){
if(b[0]=L=v&&"number"==typeof L?L*v:this.convertTimestampToInternal(L,o),
null===L)continue;(L<g||L>m)&&this.chart.error("Data error: value timestamp outside data limits. values["+S+"][0] = "+b[0]+". Limits: "+g+"..."+m),
i&&p===L&&d.Helpers.warn("There are multiple values given for the same timestamp "+b[0]+" which might produce invalid results."),
p>L&&!f&&(i&&d.Helpers.warn("Data values are not sorted on timestamp in ascending order (timestamp "+b[0]+"). TimeChart will sort the data automatically but to achieve better performance the data source should be sorted."),
f=!0),p=b[0],y.push(b)}}else this.chart.error("Data error: the value at index "+S+" is not an array.");
}e.values=y,f&&y.sort(function(t,e){return t[0]-e[0]}),u=y[0][0],
c=y[y.length-1][0]}return null!=e.from&&u<e.from&&(d.Helpers.warn("Data logic error. Data time "+u+" outside [from, to) range: "+e.from+", "+e.to),
e.from=u),null!=e.to&&c>=e.to&&(d.Helpers.warn("Data logic error. Data time "+c+" outside [from, to) range: "+e.from+", "+e.to),
e.to=c+1),t.moment.defaultZone=l,t.moment.locale(h),e},e.prototype.analyzeDataNoRequest=function(t,e){
var i=this.dataSettings,n=t.from,s=t.to,a=r.parse(t.unit),o=null,l=null;
if((null==n||null==s)&&t.values.length>0){var h=this.scene.timeStepSettings;
o=t.values[0][0],l=t.values[t.values.length-1][0],o=a.roundTimeDown(o,h),
l=a.roundTimeUp(l+1,h),null==n&&(n=o),null==s&&(s=l)}null!=i.dataFunction||null!=i.url||null!=t.dataLimitFrom||null!=t.dataLimitTo||d.Helpers.hasProperties(i.urlByUnit)||(d.Helpers.warn("Using preloaded data without specifying `dataLimitFrom` and `dataLimitTo` is not recommended - these values will be implied from the data and might result in invalid behavior.",null,1e30),
null==t.dataLimitFrom&&(t.dataLimitFrom=Math.min((e?this.dataLimitFrom:0)||1e30,t.from||o)),
null==t.dataLimitTo&&(t.dataLimitTo=Math.max((e?this.dataLimitTo:0)||-1e30,t.to||l))),
this.updateDataLimit(o,l,t.dataLimitFrom,t.dataLimitTo,a);var u=new p(a,n,s,t.values);
return null!=t.error&&(u.error=t.error),u},e.prototype.analyzeData=function(t,e){
null===e.from&&null==t.from&&null!=t.dataLimitFrom&&(t.from=t.dataLimitFrom,
d.Helpers.warn("`from` is not set in the data response - using `dataLimitFrom` instead. This may produce unexpected results.")),
null===e.to&&null==t.to&&null!=t.dataLimitTo&&(t.to=t.dataLimitTo,
d.Helpers.warn("`to` is not set in the data response - using `dataLimitTo` instead. This may produce unexpected results."));
var i=t.from,n=t.to,s=null,a=null;null!=i&&null!=n&&i>=n&&this.chart.error("Data logic error. from >= to: "+i+", "+n);
var o=r.parse(t.unit),l=this.scene.timeStepSettings;if(t.values.length>0?(s=t.values[0][0],
a=t.values[t.values.length-1][0],s=o.roundTimeDown(s,l),a=o.roundTimeUp(a+1,l),
null==i&&(i=null!==e.from?Math.min(e.from,s):s),null==n&&(n=null!==e.to?Math.max(e.to,a):a),
e.from&&a<=e.unit.add(e.from)&&(this.dataSettings._skipRequestRangeRounding=!0)):(null==i&&(i=e.from),
null==n&&(n=e.to),null!=t.from&&null!=t.to?(s=t.from,a=t.to):(s=e.from,
a=e.to,null===e.from&&null===e.to&&null==i&&null==n&&null==t.dataLimitFrom&&null==t.dataLimitTo&&(this.noData=!0))),
this.updateDataLimit(s,a,t.dataLimitFrom,t.dataLimitTo,o),null!==e.from&&null!=t.to){
var h=o.roundTimeDown(t.to,l);h<=e.from&&this.updateDataLimit(null,null,null,t.to,o);
}if(null!==e.to&&null!=t.from){var u=o.roundTimeUp(t.from,l);u>=e.to&&this.updateDataLimit(null,null,t.from,null,o);
}null==t.from&&null==t.dataLimitFrom&&(null!==this.dataLimitFrom&&(null===e.from||e.from<=this.dataLimitFrom&&s>this.dataLimitFrom)||null===this.dataLimitFrom&&(void 0===e.from||null===e.from))&&(this.updateDataLimit(null,null,s,null,o),
i=s),null==t.to&&null==t.dataLimitTo&&(null!==this.dataLimitTo&&(null===e.to||e.to>=this.dataLimitTo&&a<this.dataLimitTo)||null===this.dataLimitTo&&(void 0===e.to||null===e.to))&&(this.updateDataLimit(null,null,null,a,o),
n=a);var c=new p(o,i,n,t.values);return t.error&&(c.error=t.error),
c},e.prototype.getDataFunction=function(){var t=this,e=this.dataSettings;
if(e.dataFunction)return e.dataFunction;var i=d.Helpers.hasProperties(e.urlByUnit);
return e.url||i?function(n,r,s,a,o,l){var h;if(i){if(h=e.urlByUnit[s],
!h)return'{"error":"no-unit", "errormessage":"no data url for this time unit: '+s+'"}';
}else h=e.url;var u=[];null!==n&&u.push(["from",n.toString(10)]),
null!==r&&u.push(["to",r.toString(10)]),u.push(["unit",s]),null!==l&&u.push(["timeZone",l]),
d.Data.doRequest(h,t.dataSettings,u,a,o)}:null},e.prototype.hasPendingRequests=function(){
return d.Helpers.hasProperties(this.requests)},e.prototype.convertTimestampToInternal=function(e,i){
if(null==e)return null;var n=this.dataSettings,r=this.settings.timeAxis,s=d.Helpers.isNumber(e);
s&&n.timestampInSeconds&&(e=1e3*e);var a=t.moment(e,s?null:n.stringTimestampFormat);
if(!a.isValid()){var o=parseFloat(e);return s||isNaN(o)?(d.Helpers.error("Could not parse timestamp value `"+e+"`. The value will be ignored."),
null):(d.Helpers.warn("Numeric timestamp value `"+e+"` was passed as string. This has been deprecated starting from version 1.12."),
this.convertTimestampToInternal(o,i))}i&&(a=a.tz(r.timeZone));
var l=a.utcOffset?a.utcOffset():a.zone();return e=+a+6e4*l,e+6e4*(r.timeZoneOffset-n.timeZoneOffset);
},e.prototype.convertTimestampFromInternal=function(t,e){if(null==t)return null;
var i=this.dataSettings;return t=this.scene.timestampFromInternal(t,e),
t+=6e4*i.timeZoneOffset,i.timestampInSeconds&&(t/=1e3),t},e}();
t.Data=c;var p=function(){function t(t,e,i,n){this.values=null,
this.error=null,this.values=n,this.to=i,this.from=e,this.unit=t,
this.unitStr=t.toString(),this.updateLastTimestamp()}return t.prototype.updateLastTimestamp=function(){
this.values.length>0?this.lastTimestamp=this.values[this.values.length-1][0]:this.lastTimestamp=0;
},t.prototype.merge=function(t,e,i,n){if(t.unit.approxTime()!==this.unit.approxTime())throw new Error("merge unit mismatch");
if(!n&&(this.from>t.to||this.to<t.from))return this.values=t.values,
this.from=t.from,void(this.to=t.to);t.values.length>0&&t.from>t.values[0][0]&&i.error("Data merge - oldest data before from"),
t.values.length>0&&t.to<t.values[t.values.length-1][0]&&i.error("Data merge - newest data after to");
for(var r=0;r<this.values.length&&this.values[r][0]<t.from;)r+=1;
for(var s=this.values.length;s>0&&this.values[s-1][0]>=t.to;)s-=1;
var a=t.values;if(this.from=Math.min(this.from,t.from),this.to=Math.max(this.to,t.to),
r>0){var o=Math.max(0,a.length+r-e);a=this.values.slice(o,r-1+1).concat(a),
o>0&&(this.from=this.values[o-1][0]+1)}if(s<this.values.length){
var l=this.values.length-s;l=Math.min(l,e-a.length),a=a.concat(this.values.slice(s,s+l+1)),
l<this.values.length-s&&(this.to=this.values[s+l][0])}this.values=a,
this.updateLastTimestamp()},t}();t.TimeData=p;var f=function(){
function t(t,e,i,n,r,s){this.time=r,this.callback=n,this.to=i,
this.from=e,this.unit=t,this.unitStr=t.toString(),this.timeZone=s;
}return t}(),g=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.limitMode="snapBack",e.limitFrom="oldestData",e.limitTo="newestData",
e.overscrollProportion=0,e}return n(e,t),e}(l.SettingsInteractionScrolling);
t.SettingsInteractionScrolling=g;var m=function(t){function e(e){
var i=t.call(this,e)||this;return i.animationOrder=600,i.paintOrder=10,
i.updateOrder=1400,i.animationUnit=null,i.targetUnit=null,i.dragStartBar0=null,
i.dragStartBar1=null,i.dragStartUnit=null,i.timeSetup=new o(e),
i}return n(e,t),e.prototype.onSceneChange=function(e){t.prototype.onSceneChange.call(this,e);
var i=this.scene,n=this.scene.displayUnit;!this.scalingActive&&i.timeScale&&i.lastUnit===n||!n||this.timeSetup.preventUnitWidthViolation(this.chart.timeEnd,this.chart.timeStart)||(i.timeScale=(i.timeEnd-i.timeStart)/i.width),
i.lastUnit!==n&&(i.lastUnit=n)},e.prototype.scaleViewRange=function(e,i,n){
var r=t.prototype.scaleViewRange.call(this,e,i,n),s=this.scene,a=s.settings.timeAxis,o=(r.to-r.from)/s.width*a.minUnitWidth/1.5;
return s.disableScaleLimiter||o<=s.displayUnit.approxTime()?r:{
from:i,to:n}},e.prototype.setTimeRangeSnap=function(t,e,i,n,r,s,a,o){
var l=this.snap(t,e,i,n,a,o);t=l.from,e=l.to;var h=l.unit,u=l.period,c=l.anchor;
this.setTimeRange(t,e,h,r,s,c,u)},e.prototype.computeDisplayPeriod=function(t,e,i,n,r){
var s=this.timeSetup.tryComputeDisplayPeriod(t,e,i,n,r,this.scene,this.scene.getCurTime()),a=s.from,o=s.to,l=s.unit;
return null===a||null===o?{from:null,to:null,unit:null}:this.computeTimeRangeExtend(a,o,l);
},e.prototype.computeTimeRangeExtend=function(t,e,i){var n=this.scene;
if(!i){var r=this.timeSetup.computeDisplayUnit(n.timeStart,n.timeEnd,n.displayUnit,t,e,n);
t=r.from,e=r.to,i=r.unit}var s=n.timeStepSettings;t=i.roundTimeDown(t,s),
e=i.roundTimeUp(e,s),e===t&&(e=i.add(e,1));var a=this._preventOverscroll(t,e,i,!0);
return t=a.from,e=a.to,{from:t,to:e,unit:i}},e.prototype.computeDisplayUnit=function(t,e,i){
var n=null!==this.dragStartFrom?this.dragStartFrom:this.scene.timeStart,r=null!==this.dragStartTo?this.dragStartTo:this.scene.timeEnd,s=this.dragStartUnit?this.dragStartUnit:this.scene.displayUnit,a=this.chart.scrolling,o={
scroll:a.scrollingActive,scale:a.scalingActive,animate:i};return this.timeSetup.computeDisplayUnit(n,r,s,t,e,this.scene,o);
},e.prototype.setTimeRange=function(t,e,i,n,r,s,a){if(void 0===s&&(s=null),
void 0===a&&(a=null),t=Math.round(t),e=Math.round(e),!(t>e)){
if(!i){var o=this.computeDisplayUnit(t,e);t=o.from,e=o.to,i=o.unit;
}if("init"===r){var o=this.timeSetup.getMinRangeForUnit(t,e,i,s);
t=o.from,e=o.to}t===this.getFrom()&&e===this.getTo()&&i.isEqual(this.scene.displayUnit)||(n&&this.abort(),
this.scene.anchor=s,this.scene.period=a,this.targetUnit=i,this.animationUnit=!i||this.scene.displayUnit&&i.toString()!==this.scene.displayUnit.toString()?null:i,
this.goToPosition(t,e,n,d.Helpers.performanceNow(),!0),this.events.notifySceneChanges({
time:!0}),r&&this.chart.notifyTimeChanged(t,e,i,r))}},e.prototype.zoomOut=function(t,e,i,n,r){
if(this.scene.displayUnit){var s=this.computeZoomOut(e,i);this.scene.displayUnit=s.unit,
this.setTimeRangeSnap(s.from,s.to,s.center,s.unit,n,r,!1,!0)}
},e.prototype.zoomIn=function(t,e,i,n,r,s){if(this.scene.displayUnit){
null===e&&(e=(i+n)/2);var a=this.onZoomIn(i,n,e,.5);this.setTimeRangeSnap(a.from,a.to,a.center,t,r,s,!1,!0);
}},e.prototype.handleZoomWheel=function(t,e,i,n,r){var s=this.onSnapWhileDragging(t,e,i,this.scrollingActive,r);
t=s.from,e=s.to;var a=s.unit;if(this.scene.displayUnit=a,null===this.pointer1){
var o=this.onSnapAfterDragging(t,e,i,this.scrollingActive,r);t=o.from,
e=o.to,a=o.unit,this.scene.displayUnit=a}this.goToPosition(t,e,!0,n,!0);
},e.prototype.xyInArea=function(t,e){return this.scene.xyInChart(t,e);
},e.prototype.xyToPosition=function(t,e){return this.scene.xToTime(t);
},e.prototype.onZoomOut=function(e,i,n,r){return void 0===r&&(r=null),
r?t.prototype.onZoomOut.call(this,e,i,n,r):this.computeZoomOut(e,i);
},e.prototype.onZoomIn=function(e,i,n,r){if(void 0===r&&(r=null),
r)return t.prototype.onZoomIn.call(this,e,i,n,r);if(this.dragStartBar0&&(e=this.dragStartBar0,
i=this.dragStartBar1,i-e>this.scene.timeEnd-this.scene.timeStart)){
var s=this.scene.getClickBar(n);e=s.time0,i=s.time1}return{from:e,
to:i,center:(e+i)/2}},e.prototype.onScroll=function(t,e,i){return this.timeSetup.scroll(t,e,this.scene.displayUnit,i,1,"page");
},e.prototype.onGoHome=function(t,e){var i=this.chart.getDisplayLimits().to;
if(null===i)return{from:t,to:e,origin:null};this.scene.anchor="newestData";
var n=e-t;return{from:i-n,to:i,origin:i}},e.prototype.onStartDragging=function(t,e,i){
this.scene.anchor=null,this.animationUnit=null,this.dragStartUnit=this.scene.displayUnit;
var n=this.scene.getClickBar(i);this.dragStartBar0=n.time0,this.dragStartBar1=n.time1;
},e.prototype.onSnapWhileDragging=function(t,e,i,n,r){if(t>e){
var s=e;e=t,t=s}var a=this._preventOverscale(t,e,null,i,!1);t=a.from,
e=a.to;var o=this.computeDisplayUnit(t,e).unit,l=this._preventOverscroll(t,e,o,!1);
return t=l.from,e=l.to,this.events.notifySceneChanges({time:!0
}),{from:t,to:e,unit:o}},e.prototype.onSnapAfterDragging=function(t,e,i,n,r){
if(r){var s=this.timeSetup.adjustTimeAfterScale(t,e,this.dragStartBar0,this.dragStartBar1);
t=s.from,e=s.to}var a=this.snap(t,e,i,null,n,!1),o=a.unit,l=a.period,h=a.anchor;
return this.targetUnit=o,this.animationUnit=this.scene.displayUnit,
this.scene.period=l,this.scene.anchor=h,this.dragStartBar0=null,
this.dragStartBar1=null,this.dragStartFrom=null,this.dragStartTo=null,
this.dragStartUnit=null,this.events.notifySceneChanges({time:!0
}),this.chart.notifyTimeChanged(t,e,o,"user"),{from:a.from,to:a.to,
unit:o}},e.prototype.onPositionChanged=function(t,e,i){if(!isNaN(t)||!isNaN(e)){
var n;n=this.animationUnit?this.animationUnit:this.computeDisplayUnit(t,e).unit,
this.scene.setTimeRange(t,e,n),this.chart.timeStart=t,this.chart.timeEnd=e,
this.chart.displayUnit=n,this.events.notifySceneChanges({position:!0,
time:!0})}},e.prototype.onAnimationDone=function(t,e){if(this.targetUnit){
var i=this.targetUnit?this.targetUnit:this.computeDisplayUnit(t,e).unit;
this.chart.displayUnit=i,this.scene.setTimeRange(t,e,i)}this.targetUnit=null,
this.animationUnit=null,this.chart.notifyAnimationDone()},e.prototype.onPointerDown=function(e){
null!==this.pointer1&&null===this.pointer2&&(this.dragStartUnit=this.scene.displayUnit),
t.prototype.onPointerDown.call(this,e)},e.prototype.onPointerDrag=function(e){
this.scene.displayUnit&&t.prototype.onPointerDrag.call(this,e);
},e.prototype.computeZoomOut=function(t,e){var i,n=this.scene.settings.toolbar.zoomOutFunction,s=this.scene.displayUnit,a=null,o=null,l=e-t,h=e-l/2;
n&&(o=n(s.unit,s.count,t,e)),null!=o&&o.unit&&(a=new r(o.unit,o.count||1)),
a||(a=this.timeSetup.getBiggerDisplayUnit(s));var u=a.approxTime(),c=this.timeSetup.getUnitRange(this.scene,[a]),d=null!=o&&(null!=o.from||null!=o.to);
if(d){i=Math.min(c.maxTime,o.to-o.from);var p=this.timeSetup.verifyUnitWidth(o.from,o.to,a);
if(p.min||p.max){var f=this.timeSetup.adjustTimeRangeToUnits(this.chart.scene,o.from,o.to,a);
t=f.from,e=f.to}}else{var g=Math.min(30*l/u,Math.floor(c.maxTime/u));
i=u*g}return(!o||o&&!o.from)&&(t=h-i/2,e=h+i/2),{from:t,to:e,
center:h,unit:a}},e.prototype.snap=function(t,e,i,n,r,s){if((s||r)&&this.scene.settings.interaction.scrolling.limitMode){
var a=this._preventOverscale(t,e,n,i,!0);t=a.from,e=a.to}var o,l;
if(n?o=n:!s||!s&&r?o=this.scene.displayUnit:(l=this.computeDisplayUnit(t,e),
o=l.unit,t=l.from,e=l.to),r||s){var h=e-t,u=this._preventOverscroll(t,e,o,!1);
t=u.from,e=u.to,u=this._preventOverscroll(t,e,o,!0),t=u.from,
e=u.to,s=s||e-t!==h}if(!n&&s)return l=this.computeDisplayUnit(t,e),
t=l.from,e=l.to,this.snap(t,e,i,o,r,s);var c=s?null:this.scene.period,d=this.scene.anchor,p=this.scene.settings.interaction.snapMode;
if(p){var f=this.scene.majorTimeUnit&&"y"===this.scene.majorTimeUnit.unit,g=void 0;
if("displayUnit"===p)g=o;else if("multiperiod"===p||"period"===p){
var m=e-t,v=this.chart.getDisplayLimits(),y=v.from,S=v.to;null!==y&&(m=Math.min(m,S-y));
var b=this.timeSetup.getClosestDisplayPeriod(m,this.scene.majorTimeUnit,"multiperiod"===p||f);
g=b,c=b.toString()}var C=this.scene.timeStepSettings;if("period"!==p||f)if(s)t=g.roundTimeRound(t,C),
e=g.roundTimeRound(e,C);else{var x=Math.max(g.numberOfUnits(t,e),1),w=Math.abs(g.roundTimeRound(t,C)-t),L=Math.abs(g.roundTimeRound(e,C)-e);
w<L?(t=g.roundTimeRound(t,C),e=g.add(t,x)):(e=g.roundTimeRound(e,C),
t=g.sub(e,x))}else t=g.roundTimeDown(i,C),e=g.add(t,1)}else t=Math.round(t),
e=Math.round(e);return{from:t,to:e,unit:o,period:c,anchor:d}},
e.prototype._preventOverscroll=function(t,e,i,n){return this.timeSetup.preventOverscroll(i,t,e,n);
},e.prototype._preventOverscale=function(t,e,i,n,r){var s;return i?s=[i]:(i=this.scene.displayUnit,
s=this.scene.settings._displayUnitsParsed),this.timeSetup.preventOverscale(this.scene,s,n,t,e,i,r);
},e}(l.Scrolling);t.Scrolling=m;var v=function(){function t(){
this.enabled=!0,this.tolerance=6,this.moveByDragging=!1,this.resizeSensitivity=2,
this.resizeTolerance=20,this.clearOnRightClick=!0}return t}();
t.SettingsInteractionSelection=v;var y=function(){function t(){
this.lineColor="rgba(0,0,0,0.5)",this.lineWidth=2,this.fillColor="rgba(30,160,220,0.15)",
this.behindSeries=!1}return t}();t.SettingsAreaStyleSelection=y;
var S=function(e){function i(t){var i=e.call(this)||this;i.selectStart=null,
i.selectingPointer=null,i.isSelecting=!1,i.isHoveringEdge=!1,
i.lastX=0,i.lastY=0,i.roundAround=!1,i.selectionRemoved=!1,i.animationOrder=500,
i.updateOrder=1300,i.isMoving=!1,i.moveStartX=0,i.moveStartY=0,
i.moveSelectionStart=null,i.moveSelectionEnd=null,i.chart=t,i.scene=t.scene;
var n=t.settings;return i.settings=n.interaction.selection,i.styleSettings=n.area.style.selection,
i.labelStyle=n.area.style.selectionLabel,i.paintOrder=i.styleSettings.behindSeries?3:15,
i}return n(i,e),i.prototype.onSceneChange=function(t){if((t.changes.time||t.changes.bounds)&&null!==this.selectStart&&this.dragPointer(null,this.lastX,this.lastY,t.changes),
t.changes.settings){var e=this.styleSettings.behindSeries?3:15;
this.paintOrder!==e&&(this.paintOrder=e,this.chart.events.refreshElementOrder());
}},i.prototype.getLineCoordinates=function(){var t=this.scene,e=this.styleSettings,i=Math.round(t.timeToX(t.selectionStart)),n=Math.round(t.timeToX(t.selectionEnd)),r=e.lineWidth,s=Math.round(t.x0),a=Math.round(s+t.width);
return i-r<s&&i>s-4*r&&(i=s+r),n+r>a&&n<a+4*r&&(n-=r),{start:i,
end:n}},i.prototype.paintScene=function(e){var i=this.scene;if(null!=i.minorTimeUnit&&null!=i.selectionStart&&null!=i.selectionEnd&&this.chart.assetsLoaded){
var n=this.styleSettings,r=n.lineWidth,s=Math.round(i.x0),a=Math.round(s+i.width),o=Math.round(i.y0),l=Math.round(o+i.height+i.bottomAxisSize),h=this.getLineCoordinates(),u=h.start,c=h.end,p=i.minorTimeUnit.roundTimeRound(i.selectionStart,i.timeStepSettings),f=i.minorTimeUnit.roundTimeRound(Math.max(i.selectionStart,i.selectionEnd-1),i.timeStepSettings),g=i.height+i.bottomAxisSize,m=t.moment.utc(p).locale(i.momentLocale).format(i.minorTimeFormat),v=t.moment.utc(f).locale(i.momentLocale).format(i.minorTimeFormat),y=e.context;
d.Graphics.pushClip(e,s,o,i.width,g),d.Graphics.rectStyle(y,n);
var S=u+r%2/2,b=c+r%2/2;y.fillRect(S+r/2,o,c-u-r,g),y.beginPath(),
y.moveTo(S,o),y.lineTo(S,l),y.moveTo(b,o),y.lineTo(b,l),d.Graphics.stroke(y,n);
var C=e.labelRenderer,x=this.labelStyle,w=d.Graphics.getTextWidth(y,x,m),L=d.Graphics.getTextWidth(y,x,v),T=new d.Label({
text:m,textStyle:x},(!0)),k=new d.Label({text:v,textStyle:x},(!0)),A=10,M=5;
u<s&&(u=s),c>a&&(c=a),w+L+20<c-u?(u+=M,c=c-L-M):(u=u-w-M,c+=M);
var P=this.chart.shell.getChartInnerArea(),I=P.findTopPosition(u,u+w),D=P.findTopPosition(c,c+L);
C.paint(y,u+w/2,I+A,1,T),C.paint(y,c+L/2,D+A,1,k),d.Graphics.popClip(e);
}},i.prototype.onPointerMove=function(t){var e=this.scene,i=this.settings;
if(i.enabled){e.xyInBottom(t.x,t.y)&&(t.cursor="text");var n=!1;
if(null!=e.selectionStart&&null!=e.selectionEnd&&e.xyInChartOrBottom(t.x,t.y)&&e.timeStart<e.timeEnd){
var r=this.getLineCoordinates();Math.abs(r.start-t.x)<=i.tolerance?(t.cursor="e-resize",
t.consumed=!0,n=!0):Math.abs(r.end-t.x)<=i.tolerance?(t.cursor="w-resize",
t.consumed=!0,n=!0):i.moveByDragging&&r.start<t.x&&r.end>t.x&&(t.cursor="move",
t.consumed=!0)}this.isHoveringEdge=n}},i.prototype.onPointerDown=function(t){
var e=this.scene,i=this.settings;if(e.xyInChartOrBottom(t.x,t.y)&&null===this.selectingPointer&&i.enabled){
this.selectionRemoved=!1,this.lastX=t.x;var n=null,r=null;if(null!==e.selectionStart||null!==e.selectionEnd){
var s=this.getLineCoordinates(),a=Math.abs(s.start-t.x),o=Math.abs(s.end-t.x),l=!1;
if(a<i.tolerance&&a<=o?(this.selectStart=e.selectionEnd,l=!0):o<i.tolerance&&o<=a?(this.selectStart=e.selectionStart,
l=!0):i.moveByDragging&&s.start<t.x&&s.end>t.x&&(this.isMoving=!0,
this.moveStartX=t.x,this.moveStartY=t.y,this.moveSelectionStart=e.selectionStart,
this.moveSelectionEnd=e.selectionEnd,this.selectStart=e.xToTime(t.x),
l=!0),l)return this.selectingPointer=t.identifier,t.consumed=!0,
this.roundAround=!0,void(this.isSelecting=!0)}e.xyInBottom(t.x,t.y)&&(this.selectingPointer=t.identifier,
this.selectStart=e.xToTime(t.x),t.capture=!0,this.roundAround=!0,
this.isSelecting=!0,t.x>=n&&t.x<=r||null!==e.selectionStart&&(this.selectionRemoved=!0,
e.selectionStart=null,e.selectionEnd=null,t.changes.selection=!0));
}},i.prototype.onPointerDrag=function(t){this.scene.displayUnit&&this.selectingPointer===t.identifier&&(this.dragPointer(t,t.x,t.y,t.changes),
t.consumed=!0)},i.prototype.dragPointer=function(t,e,i,n){var r,s,a=this.scene;
if(this.isMoving){var o=a.dxToDtime(e-this.moveStartX);r=this.moveSelectionStart+o,
s=this.moveSelectionEnd+o;var l=i-this.moveStartY,h=this.settings.resizeTolerance;
if(Math.abs(l)>h){l=l<0?l+h:l-h;var u=this.moveSelectionEnd-this.moveSelectionStart,c=Math.min(u,a.dxToDtime(l*this.settings.resizeSensitivity)),p=0===u?.5:(this.selectStart-this.moveSelectionStart)/u;
r+=c*p,s-=c*(1-p)}}else{var f=this.selectStart,g=this.scene.xToTime(e),m=Math.abs(f-g),v=a.snapTimeRound(f),o=v-f,y=d.Helpers.sign(o);
v=f+Math.min(o*y,.9*m)*y,v<g?(r=v,s=g):(r=g,s=v)}this.lastX=e,
this.lastY=i,a.selectionStart=r,a.selectionEnd=s,n.selection=!0,
a.settings.events.selectionChangeDuringInteraction&&this.chart.notifySelectionChanged(this.chart.createEventArguments(t,"user"));
},i.prototype.onPointerUp=function(t){if(this.selectingPointer===t.identifier){
if(this.isSelecting){var e=this.snapSelection(),i=e.st,n=e.en;
i===n&&(i=null,n=null);var r=this.scene;r.selectionStart=i,r.selectionEnd=n,
null!=i&&(r.hoverFrom=i,r.hoverTo=n),this.chart.notifySelectionChanged(this.chart.createEventArguments(t,"user")),
t.changes.selection=!0}(this.isSelecting||this.selectionRemoved)&&(t.consumed=!0),
this.isSelecting=!1,this.isMoving=!1,this.selectStart=null,this.selectingPointer=null;
}},i.prototype.onPointerCancel=function(t){this.onPointerUp(t);
},i.prototype.snapSelection=function(){var t,e,i=this.scene;return null!=i.selectionStart?this.roundAround?(t=i.snapTimeRound(i.selectionStart),
e=i.snapTimeRound(i.selectionEnd)):(t=i.snapTimeDown(i.selectionStart),
e=i.snapTimeUp(i.selectionEnd)):(t=null,e=null),{st:t,en:e}},
i}(d.ChartElement);t.Selection=S;var b=function(e){function i(){
var t=e.apply(this,arguments)||this;return t.timeStart=0,t.timeEnd=0,
t.anchor=null,t.period=null,t.displayUnit=null,t.data={},t.markers=[],
t.mainData=null,t.selectionStart=null,t.selectionEnd=null,t.minorTimeFormat=null,
t.minorTimeUnit=null,t.majorTimeUnit=null,t.majorTimeFormat=null,
t.hoverFrom=null,t.hoverTo=null,t.timeScale=0,t.lastUnit=null,
t.disableScaleLimiter=!1,t.momentLocale="zc"+(i._momentLocaleCounter++).toFixed(0),
t}return n(i,e),i.prototype.setTimeRange=function(t,e,i){i||d.Helpers.error("Scene.setTimeRange: no display unit"),
this.timeStart=t,this.timeEnd=e,this.displayUnit=i},i.prototype.pixelsPerTime=function(){
return this.width/(this.timeEnd-this.timeStart)},i.prototype.getScale=function(){
return(this.timeEnd-this.timeStart)/this.width},i.prototype.timeToX=function(t){
return this.x0+this.width*(t-this.timeStart)/(this.timeEnd-this.timeStart);
},i.prototype.timeToXCoefs=function(){return{tadd:this.x0-this.timeStart*this.width/(this.timeEnd-this.timeStart),
tmul:this.width/(this.timeEnd-this.timeStart)}},i.prototype.xToTime=function(t){
return this.timeStart+(this.timeEnd-this.timeStart)*(t-this.x0)/this.width;
},i.prototype.xToFraction=function(t){return(t-this.x0)/this.width;
},i.prototype.dTimeToDx=function(t){return this.width*t/(this.timeEnd-this.timeStart);
},i.prototype.dxToDtime=function(t){return t/this.width*(this.timeEnd-this.timeStart);
},i.prototype.snapTimeDown=function(t){return this.displayUnit.roundTimeDown(t,this.timeStepSettings);
},i.prototype.snapTimeUp=function(t){return this.displayUnit.roundTimeUp(t,this.timeStepSettings);
},i.prototype.snapTimeRound=function(t){return this.displayUnit.roundTimeRound(t,this.timeStepSettings);
},i.prototype.getClickBar=function(t){var e=this.displayUnit;return e?{
time0:e.roundTimeDown(t,this.timeStepSettings),time1:e.roundTimeUp(t+1,this.timeStepSettings)
}:{time0:null,time1:null}},i.prototype.getCurTime=function(){
var t,e=this.settings.currentTime;return t=null!=e.time?e.time:(new Date).getTime(),
this.timestampToInternal(t,!0)},i.prototype.timestampToInternal=function(e,i){
if(null==e)return null;e=+e;var n=this.settings.timeAxis;if(i){
if(!t.moment||!t.moment.tz)return null;var r=t.moment.utc(e).tz(n.timeZone),s=r.utcOffset?r.utcOffset():r.zone();
e=+r+6e4*s}return e+6e4*n.timeZoneOffset},i.prototype.timestampFromInternal=function(e,i){
if(null==e)return null;var n=this.settings.timeAxis;if(i){if(!t.moment||!t.moment.tz)return null;
var r=t.moment.utc(e).tz(n.timeZone),s=r.utcOffset?r.utcOffset():r.zone();
e=+r-6e4*s}return e-=6e4*n.timeZoneOffset},i}(l.Scene);b._momentLocaleCounter=0,
t.Scene=b;var C=function(){function e(t,e,i,n,r,s,a){void 0===i&&(i=[]),
void 0===n&&(n=null),void 0===r&&(r=null),void 0===s&&(s=!0),
void 0===a&&(a=2),this.scene=null,this.step=null,this.uniform=!1,
this.currentFrom=0,this.currentTo=0,this.fromBar=null,this.toBar=null,
this.fromIndex=0,this.toIndex=0,this.times=[],this.xes=[],this.oldMul=0,
this.oldAdd=0,this.values=[],this.counts=[],this.arrays=[],this.extraArrays=[],
this.bufExpandSize=100,this.extraSteps=2,this.uniformTolerance=0,
this.approxExtraTime=0,this.extraSteps=a,this.uniform=s,this.step=e,
this.scene=t,n=n||this.scene.timeStart,r=r||this.scene.timeEnd,
this.extraArrays=i.slice(0),this.arrays=i.slice(0),this.arrays.push("xes"),
this.arrays.push("times"),this.uniformTolerance=Math.min(1,this.step.count-2),
this.approxExtraTime=this.extraSteps*e.approxTime(),this.init(n-this.approxExtraTime,r+this.approxExtraTime);
}return e.prototype.getArray=function(t){switch(t){case"xes":
return this.xes;case"times":return this.times;case"values":return this.values;
case"counts":return this.counts;default:return d.Helpers.error("TimeSlicer: Invalid get array: '"+t+"'"),
null}},e.prototype.setArray=function(t,e){switch(t){case"xes":
return void(this.xes=e);case"times":return void(this.times=e);
case"values":return void(this.values=e);case"counts":return void(this.counts=e);
default:return void d.Helpers.error("TimeSlicer: Invalid set array: '"+t+"'");
}},e.prototype._getOrigin=function(t){var e=this.scene.timeStepSettings;
if(1===this.step.count||this.uniform)return this.step.roundTimeDown(t,e);
var i=this.step.getBigger().roundTimeDown(t,e),n=this.step.numberOfUnits(i,t);
return this.step.add(i,n)},e.prototype._add=function(t){if(this.uniform||1===this.step.count||"d"!==this.step.unit)return t.add(this.step.count,this.step.unit);
var e=t.daysInMonth(),i=t.date();return i+2*this.step.count>e+1+this.uniformTolerance?t.add(e-i+1,"d"):t.add(this.step.count,this.step.unit);
},e.prototype._sub=function(t){if(this.uniform||1===this.step.count||"d"!==this.step.unit)return t.subtract(this.step.count,this.step.unit);
var e=t.date();if(e<=this.step.count){t.subtract(1,"M");var i=t.daysInMonth()-1,n=i+1-this.step.count+this.uniformTolerance;
return t.date(1+n-(n%this.step.count|0))}return t.subtract(this.step.count,this.step.unit);
},e.prototype.init=function(e,i){for(var n=this,r=0;r<this.arrays.length;r++){
var s=this.arrays[r];this.setArray(s,[])}if(e>=i)return this.fromIndex=0,
this.toIndex=0,this.fromBar=null,void(this.toBar=null);this.fromBar=t.moment(this._getOrigin(e)).utc(),
this.fromIndex=0;var a=t.moment(this.fromBar).utc();for(this.times.push(a.valueOf());a.valueOf()<i;)this._add(a),
this.times.push(a.valueOf());this.toIndex=this.times.length,this.toBar=a,
this.currentFrom=e,this.currentTo=i,this.xes=this.times.map(function(t){
return n.scene.timeToX(t)});for(var o=0;o<this.extraArrays.length;o++){
var l=this.extraArrays[o],h=[];h.length=this.times.length,this.setArray(l,h);
}},e.prototype.makeMiniSlice=function(e){var i=this.scene.timeToXCoefs(),n=i.tadd,r=i.tmul,s=t.moment(this._getOrigin(e)).utc(),a=s.valueOf(),o=n+a*r;
this._add(s);var l=s.valueOf(),h=n+l*r;return{t0:a,x0:o,t1:l,
x1:h}},e.prototype.update=function(t,e){if(void 0===t&&(t=this.scene.timeStart),
void 0===e&&(e=this.scene.timeEnd),null==e&&(e=this.scene.timeEnd),
null==t&&(t=this.scene.timeStart),t-=this.approxExtraTime,e+=this.approxExtraTime,
t===this.currentFrom&&e===this.currentTo)return this.updateXes(this.fromIndex,this.toIndex),
{offset:0,newBefore:this.fromIndex,newAfter:this.toIndex};if(null===this.fromBar||t>this.toBar.valueOf()||e<this.fromBar.valueOf())return this.init(t,e),
{offset:0,newBefore:this.toIndex,newAfter:this.toIndex};var i=0,n=this.fromIndex,r=this.toIndex,s=this.scene.timeToXCoefs(),a=s.tadd,o=s.tmul,l=this.fromBar.valueOf()-t;
if(l>0){var h=(l/this.step.approxTime()|0)+2;if(this.fromIndex<h){
var u=[];u.length=h+this.bufExpandSize;for(var c=0;c<this.arrays.length;c++){
var d=this.arrays[c];this.setArray(d,u.concat(this.getArray(d)));
}i+=u.length,n+=u.length,r+=u.length,this.fromIndex+=u.length,
this.toIndex+=u.length}for(var p=this.fromBar.valueOf();p>t;)this._sub(this.fromBar),
this.fromIndex-=1,p=this.fromBar.valueOf(),this.times[this.fromIndex]=p,
this.xes[this.fromIndex]=a+p*o}var f=e-this.toBar.valueOf();if(f>0){
var h=(f/this.step.approxTime()|0)+2;if(this.times.length<this.toIndex+h)for(var g=this.toIndex+h+this.bufExpandSize,c=0;c<this.arrays.length;c++){
var d=this.arrays[c];this.getArray(d).length=g}for(var p=this.toBar.valueOf();p<e;)this._add(this.toBar),
p=this.toBar.valueOf(),this.times[this.toIndex]=p,this.xes[this.toIndex]=a+p*o,
this.toIndex+=1}for(this._add(this.fromBar);this.fromBar.valueOf()<t;)this.fromIndex+=1,
this._add(this.fromBar);for(this._sub(this.fromBar),this._sub(this.toBar);this.toBar.valueOf()>=e;)this.toIndex-=1,
this._sub(this.toBar);this._add(this.toBar);var m=this.toIndex-this.fromIndex+this.bufExpandSize;
if(this.fromIndex>m){for(var v=this.fromIndex-this.bufExpandSize,c=0;c<this.arrays.length;c++){
var d=this.arrays[c];this.getArray(d).splice(0,v)}i-=v,n-=v,r-=v,
this.fromIndex-=v,this.toIndex-=v}if(this.toIndex<this.times.length-m)for(var c=0;c<this.arrays.length;c++){
var d=this.arrays[c];this.getArray(d).length=this.toIndex+this.bufExpandSize;
}return this.updateXes(n,r),this.currentFrom=t,this.currentTo=e,
{offset:i,newBefore:n,newAfter:r}},e.prototype.updateXes=function(t,e){
var i=this.scene.timeToXCoefs(),n=i.tadd,r=i.tmul;if(this.oldAdd!==n||this.oldMul!==r){
this.oldAdd=n,this.oldMul=r;for(var s=t;s<=e-1;s++)this.xes[s]=n+this.times[s]*r;
}},e}();t.TimeSlicer=C;var x=function(){function t(){this.enabled=!0,
this.vgrid=!0,this.minUnitWidth=1,this.maxUnitWidth=200,this.showHolidays=!0,
this.miniTimeRuler=!0,this.unitSizePolicy="auto",this.timeZoneOffset=null,
this.timeZone="UTC",this.style={showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,
minorTimeBalloonStyle:{fillColor:"#FFF"},majorTimeBalloonStyle:{
fillColor:null},minorTimeLabel:{fillColor:"#000000",font:"12px Arial"
},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial"},dateLighten:{
fillColor:"rgba(255,255,255,0.2)"},dateHolidays:{fillColor:"rgba(230,230,230,0.2)"
},minorTimeRuler:{lineColor:"rgba(0,0,0,0.2)"},vgrid:{lineColor:"rgba(0,0,0,0.1)"
}}}return t}();t.SettingsTimeAxis=x;var w=function(e){function i(t){
var i=e.call(this)||this;return i.curSceneScale=0,i.minorFormat=null,
i.majorFormat=null,i.minorTimeUnit=null,i.majorTimeUnit=null,
i.minorLabelHeight=null,i.majorLabelHeight=null,i.minorLabelWidths=null,
i.minorLabelBallonWidths=null,i.majorLabelWidths=null,i.fullLabelWidths=null,
i.multiYearWidth=0,i.majorSlices=null,i.minorSlices=null,i.animationOrder=610,
i.paintOrder=30,i.updateOrder=1e3,i.multiples={ms:[1,10,100],
s:[1,2,5,15,30],m:[1,2,5,15,30],h:[1,3,6,12,24],d:[1,2,5,10],
w:[1,5,10,20],M:[1,3,6],y:[1,10,100,1e3]},i.chart=t,i.scene=i.chart.scene,
i.tt=new o(t),i.options=i.scene.settings.timeAxis,i.panel=new d.ChartPanel,
i.panel.side="bottom",i.panel.packingOrder=100,i.panel.computeSize=function(t,e,n,r){
return i.computeSize(t,e,n,r)},i}return n(i,e),i.prototype.computeSize=function(e,i,n,s){
if(!this.options.enabled)return this.scene.bottomAxisSize=0,{
width:e,height:0};var a=t.moment(0xc694d6e77ef8).utc(),o=this.scene.settings.localization.timeAxisDates,l=this.options.style.minorTimeLabel;
this.minorLabelHeight=.8*d.Graphics.getTextHeight(n,this.options.style.minorTimeLabel.font),
this.minorLabelWidths={},this.minorLabelBallonWidths={};var h;
for(h=0;h<r.knownUnits.length;h++){var u=r.knownUnits[h],c=d.Graphics.getTextWidth(n,l,a.format(o.minorLabelTimeFormats[u]));
this.minorLabelWidths[u]=c,this.minorLabelBallonWidths[u]=c+this.minorLabelHeight;
}for(l=this.options.style.majorTimeLabel,this.majorLabelHeight=.8*d.Graphics.getTextHeight(n,this.options.style.majorTimeLabel.font),
this.majorLabelWidths={},this.fullLabelWidths={},h=0;h<r.knownUnits.length;h++){
var u=r.knownUnits[h];this.majorLabelWidths[u]=this.majorLabelHeight+d.Graphics.getTextWidth(n,l,a.format(o.majorLabelTimeFormats[u])),
this.fullLabelWidths[u]=this.majorLabelHeight+d.Graphics.getTextWidth(n,l,a.format(o.majorLabelFullTimeFormats[u]));
}this.multiYearWidth=d.Graphics.getTextWidth(n,l,"8888 - 8888")+this.majorLabelHeight;
var p=Math.round(Math.min(2.3913043*(this.minorLabelHeight+this.majorLabelHeight),i));
return this.scene.bottomAxisSize=p,{width:e,height:p}},i.prototype.onSceneChange=function(t){
var e=t.changes.settingsChanges;e&&e.timeAxis&&(t.changes.bounds=!0);
},i.prototype.getPanels=function(){return[this.panel]},i.prototype.getMajorLabelWidth=function(t,e){
return"y"===t.unit&&t.count>1?this.multiYearWidth:e?this.majorLabelWidths[t.unit]:null!==this.fullLabelWidths?this.fullLabelWidths[t.unit]||null:null;
},i.prototype.computeLabels=function(t){var e,i,n=new o(this.chart),s=this.scene.timeEnd-this.scene.timeStart,a=n.toBiggerDisplayUnit(t);
if(a){var l=new r("s",1);for(e=a.isSmaller(l)?l:a,i=this.computeMinorUnit(e),
a=n.toBiggerDisplayUnit(e);a&&(a.approxTime()<=.5*s||e.approxTime()<this.scene.dxToDtime(this.getMajorLabelWidth(e,null!=i)));)e=a,
i=this.computeMinorUnit(e),a=n.toBiggerDisplayUnit(a)}if(!a){
e="y"===t.unit?t:new r("y",1);for(var h=0;h<this.multiples.y.length;h++){
var u=this.multiples.y[h];if(e=new r("y",u),i=this.computeMinorUnit(e),
e.approxTime()>this.scene.dxToDtime(this.getMajorLabelWidth(e,null!=i)))break;
}}return{minorUnit:i,majorUnit:e}},i.prototype.computeMinorUnit=function(t){
var e=this.scene.displayUnit.clone(),i=new r(r.toSmallerUnit[t.unit],1);
i.unit&&i.isBigger(e)&&(e=i);var n=e.approxTime(),s=null;if(null===this.minorLabelWidths)return null;
for(var a=1.5*this.scene.dxToDtime(this.minorLabelWidths[e.unit]),o=0;o<this.multiples[e.unit].length;o++){
var l=this.multiples[e.unit][o];if(l<e.count&&(l=e.count),e.count=l,
n=e.approxTime(),a<=n){s=e;break}}return s&&s.isEqual(t)&&(s=null),
s},i.prototype.doAnimations=function(t){if(this.scene.displayUnit&&this.scene.timeStart<this.scene.timeEnd){
var e=this.scene.getScale();if(!(Math.abs(1-this.curSceneScale/e)<.001)){
this.curSceneScale=e;var i=this.computeLabels(this.scene.displayUnit),n=i.minorUnit,r=i.majorUnit;
n?(this.minorFormat=this.scene.settings.localization.timeAxisDates.minorLabelTimeFormats[n.unit],
this.majorFormat=this.scene.settings.localization.timeAxisDates.majorLabelTimeFormats[r.unit]):(this.minorFormat=null,
this.majorFormat=this.scene.settings.localization.timeAxisDates.majorLabelFullTimeFormats[r.unit]),
this.minorTimeUnit=n,this.majorTimeUnit=r,null!==this.majorSlices&&r.approxTime()===this.majorSlices.step.approxTime()||(this.majorSlices=new C(this.scene,r)),
!n||null!==this.minorSlices&&n.approxTime()===this.minorSlices.step.approxTime()?null===n&&(this.minorSlices=null):this.minorSlices=new C(this.scene,n,[],null,null,(!1));
}this.majorSlices.update(),this.minorSlices&&this.minorSlices.update(),
this.minorTimeUnit?(this.scene.minorTimeFormat=this.minorFormat,
this.scene.minorTimeUnit=this.minorTimeUnit):this.scene.displayUnit&&(this.scene.minorTimeUnit=this.scene.displayUnit,
this.scene.minorTimeFormat=this.scene.settings.localization.timeAxisDates.minorLabelTimeFormats[this.scene.displayUnit.unit]),
this.scene.majorTimeFormat=this.majorFormat,this.scene.majorTimeUnit=this.majorTimeUnit;
}},i.prototype.paintScene=function(e){if(this.scene.displayUnit&&this.options.enabled&&this.scene.timeStart<this.scene.timeEnd){
var i=this.scene.settings.timeAxis.style,n=e.context,r=e.labelRenderer,s=this.scene.x0,a=s+this.scene.width,o=this.panel.top+1,l=this.panel.bottom,h=l-o,u=this.scene.y0,c=this.scene.height,p=l-1.8*this.majorLabelHeight;
d.Graphics.pushClip(e,s,u,this.scene.width,h+c);var f=this.majorSlices.xes,g=this.majorSlices.times,m=this.majorSlices.fromIndex,v=this.majorSlices.toIndex,y=i.dateLighten;
if(y&&y.fillColor){var S=this.majorSlices.step.numberOfUnits(0,g[m]);
n.beginPath();for(var b=m+(0|S)%2;b<=v-2;b+=2){var C=(0|Math.max(f[b],s))+1,x=0|Math.min(f[b+1],a);
n.rect(C,o-1,x-C,h)}d.Graphics.fill(n,y)}if(this.options.showHolidays&&this.minorSlices&&("w"===this.minorSlices.step.unit||"d"===this.minorSlices.step.unit||"h"===this.minorSlices.step.unit)){
var w=this.scene.timeToXCoefs(),L=w.tadd,T=w.tmul,k=864e5,A=this.scene.timeStart;
A=Math.round(A-A%k);for(var M=t.moment(A).utc().isoWeekday(),P=this.scene.settings.localization.holidayWeekdays,I=i.dateHolidays,D=d.Graphics.beginStrokeAndFill(n,I),C=A*T+L;C<=a;){
var x=C+T*k;P.indexOf(M)>-1&&D.rect(C,u,x-C,Math.min(5,h)+c),
M=M%7+1,C=x}d.Graphics.endStrokeAndFill(n,D,I)}if(this.options.vgrid){
for(var N=d.Graphics.beginStrokeAndFill(n,this.options.style.vgrid),b=m+1;b<=v-2;b++){
var F=(0|f[b])+.5;if(F>=a)break;N.moveTo(F,u),N.lineTo(F,l)}d.Graphics.endStrokeAndFill(n,N,this.options.style.vgrid);
}var E="y"===this.majorSlices.step.unit&&this.majorSlices.step.count>1,O=this.getMajorLabelWidth(this.majorSlices.step,null!=this.minorFormat),R=this.scene.momentLocale;
if(!this.minorSlices||this.majorSlices.step.unit!==this.minorSlices.step.unit){
if(i.showMajorTimeBalloons){n.beginPath();for(var b=m;b<=v-2;b++){
var B=f[b],H=f[b+1];if(!(B>=a||H<=s)){var z=(B+H)/2;B<s&&(B=s,
z=Math.min((B+H)/2,H-O)),H>a&&(H=a,z=Math.max((B+H)/2,B+O)),d.Graphics.strokeBalloon2(n,z,p+1,O,this.majorLabelHeight);
}}d.Graphics.paint(n,i.majorTimeBalloonStyle)}for(var b=m;b<=v-2;b++){
var B=f[b],H=f[b+1];if(!(B>=a||H<=s)){var A=g[b],U=void 0;if(E){
var _=g[b+1]-1;U=t.moment.utc(A).locale(R).format(this.majorFormat)+" - "+t.moment(_).locale(R).utc().format(this.majorFormat);
}else U=t.moment.utc(A).locale(R).format(this.majorFormat);var z=(B+H)/2;
B<s&&(B=s,z=Math.min((B+H)/2,H-O)),H>a&&(H=a,z=Math.max((B+H)/2,B+O));
var G=new d.Label({text:U,textStyle:i.majorTimeLabel},(!0));r.paint(n,z,p,1,G);
}}}var j=this.scene.settings.timeAxis,W=j.style.minorTimeRuler;
if(this.minorSlices){g=this.minorSlices.times,f=this.minorSlices.xes,
m=this.minorSlices.fromIndex,v=this.minorSlices.toIndex,O=this.minorLabelWidths[this.minorSlices.step.unit];
var V=o+.4*this.minorLabelHeight|0,Z=o-1,Y=V+1.6*this.minorLabelHeight|0;
if(i.showMinorTimeBalloons){n.beginPath();for(var b=m;b<=v-1;b++){
var F=f[b];d.Graphics.strokeBalloon(n,F,o-5,O,this.minorLabelHeight);
}d.Graphics.paint(n,i.minorTimeBalloonStyle)}else{var q=this.majorSlices.fromIndex,X=this.majorSlices.xes;
n.beginPath();for(var Q=q,b=m;b<=v-1;b++){for(var F=f[b];F>X[Q];)Q+=1;
if(X[Q]!==F){if(F>=a)break;F=(0|F)-.5,n.moveTo(F,Z),n.lineTo(F,Y);
}}d.Graphics.stroke(n,W)}for(var J=i.showMinorTimeBalloons?"center":"left",K=i.showMinorTimeBalloons?0:3,b=m;b<=v-1;b++){
var F=f[b],A=g[b],U=t.moment(A).locale(R).utc().format(this.minorFormat),G=new d.Label({
text:U,aspectRatio:1e9,align:J,textStyle:i.minorTimeLabel});r.measure(n,G);
var $=F+K+G.hwidth;r.paint(n,$,V+G.hheight,1,G)}}var tt=this.chart.dataWarehouse.getDisplayUnitsSlicer();
if(j.miniTimeRuler&&W&&tt&&tt.xes[tt.fromIndex+1]-tt.xes[tt.fromIndex]>4){
var et=o-1,it=o+3;f=tt.xes;var nt=this.majorSlices.fromIndex,rt=this.minorSlices?this.minorSlices.fromIndex:nt,st=this.majorSlices.xes,at=this.minorSlices?this.minorSlices.xes:st;
n.beginPath();for(var ot=nt,lt=rt,ht=0,b=tt.fromIndex;b<=tt.toIndex-2;b++){
for(var F=f[b];F>st[ot];)ot+=1;if(st[ot]!==F){for(;F>at[lt];)lt+=1;
if(at[lt]!==F){if(F>=a)break;F=(0|F)-.5,n.moveTo(F,et),n.lineTo(F,it),
ht++}}}if(ht&&d.Graphics.stroke(n,W),this.scene.settings.advanced.themeCSSClass.indexOf("gradient")!==-1){
var ut=d.Colors.colorTone(W.lineColor,2,2);ht=0,n.beginPath(),
ot=nt,lt=rt;for(var b=tt.fromIndex;b<=tt.toIndex-2;b++){for(var F=f[b];F>st[ot];)ot+=1;
if(st[ot]!==F){for(;F>at[lt];)lt+=1;if(at[lt]!==F){if(F>=a)break;
F=(0|F)+.5,n.moveTo(F,et),n.lineTo(F,it),ht++}}}ht&&d.Graphics.stroke(n,{
lineColor:ut.color})}}d.Graphics.popClip(e)}},i}(d.ChartElement);
t.TimeAxis=w;var L=function(){function t(){this.enabled=!0,this.label={
padding:3,margin:3,aspectRatio:3,align:"center",textStyle:{fillColor:"white",
font:"12px Arial"},backgroundStyle:{lineColor:"#0099cc",fillColor:"#0099cc"
}},this.align="left",this.side="top",this.style={lineColor:"#0099cc"
},this.time=null,this.overrideLimits=!1,this.showTime=!1}return t;
}();t.SettingsMarker=L;var T=function(){function t(t,e,i){if(this.labelCacheUnit=null,
this.labelCacheTime=null,this.initialText=null,this.isMilestone=!0,
this.settings=e,this.label=new d.Label(e.label),i){var n=d.Helpers.clone(i);
d.Helpers.extendStyleTo(this.label.style.textStyle,n),n.fillColor||(n.fillColor=e.style.lineColor),
this.label.style.textStyle=n}null!=e.time?this.time=t.timestampToInternal(e.time,!0):this.time=null,
this.initialText=this.label.text||null}return t}();t.Marker=T;
var k=function(e){function i(t){var i=e.call(this)||this;return i.animationOrder=2e3,
i.paintOrder=40,i.updateOrder=800,i.scene=null,i._initialized=!1,
i.chart=t,i.scene=i.chart.scene,i}return n(i,e),i.prototype.onSceneChange=function(t){
if(this.chart.assetsLoaded){var e=t.changes,i=e.settingsChanges,n=i&&i.milestones;
(!this._initialized||n||e.assets)&&(this.createMarkers(),this._initialized=!0),
(e.time||n)&&this.scene.markers.sort(function(t,e){return t.time-e.time;
})}},i.prototype.paintScene=function(t){var e=this.scene,i=e.markers,n=t.labelRenderer,r=t.context;
if(0!==i.length&&e.displayUnit){var s=Math.round(e.y0);r.textBaseline="middle",
d.Graphics.pushClip(t,e.x0,Math.round(e.y0),e.width,e.height+e.bottomAxisSize);
for(var a=this.getRenderingParts(t,i),o=a.lines,l=0;l<o.length;l++){
var h=o[l],u=d.Graphics.beginStrokeAndFill(r,h.style),c="bottom"===h.side?this.getTopPos(h.x,0):s+e.height;
c=Math.round(c),u.moveTo(h.x,c),u.lineTo(h.x,h.y),d.Graphics.endStrokeAndFill(r,u,h.style);
}for(var p=a.labels,f=0;f<p.length;f++){var g=p[f];n.paint(r,g.x,g.y,1,g.label);
}d.Graphics.popClip(t)}},i.prototype.getRenderingParts=function(e,i){
for(var n=e.context,r=this.scene,s=e.labelRenderer,a=r.displayUnit.unit,o=r.settings.localization.markerDates.timeFormats[a],l=r.x0,h=l+r.width,u=Math.round(r.y0),c=Math.round(u+r.height),d=[],p=[],f=[],g=[],m=[],v=[],y=[],S=[],b=this.scene.momentLocale,C=0;C<i.length;C++){
var x=i[C],w=r.timeToX(x.time);w=Math.floor(w)+.5,x.labelCacheUnit===a&&x.labelCacheTime===x.time||(null!==x.initialText?(x.label.text=x.initialText,
x.settings.showTime&&(x.label.text+=" "+t.moment(x.time).locale(b).utc().format(o).replace(/ /g," "))):x.settings.showTime&&(x.label.text=t.moment(x.time).locale(b).utc().format(o).replace(/ /g," ")),
s.measure(n,x.label),x.labelCacheUnit=a,x.labelCacheTime=x.time);
var L=x.label.style.margin||0,T=x.label.hwidth+L,k=x.label.hheight+L,A=2*T,M=2*k;
if(w+T>=l-1&&w-T<=h+1){var P=x.settings.align,I="center"===P?T:A;
w+I>=h?(P="left",w-=2):w-I<=l&&(P="right",w+=2);var D=w-T,N=w+T,F=w;
"left"===P?(F=w-T+L,N=w,D=w-A):"right"===P&&(F=w+T-L,N=w+A,D=w);
var E=[],O=-1,R=D<l?Math.max(l,D):D>h?Math.min(h,D):D,B=this.getTopPos(R,I),H="top"===x.settings.side?B:Math.round(r.height+.5*r.bottomAxisSize);
if(0!==d.length)for(;;){var z=O!==-1?f[O]+m[O]:H,U=z+M;O=-1;for(var _=0;_<d.length;_++)if(E.indexOf(_)===-1){
var G=p[_],j=d[_],W=f[_],V=g[_],Z=D>=j&&D<=G||N>=j&&N<=G||D<=j&&N>=G,Y=z>=W&&z<=V||U>=W&&U<=V||z<=W&&U>=V;
if(Z&&Y){E.push(_),H=f[_]+m[_],O=_;break}}if(O===-1)break}var q=void 0;
"top"===x.settings.side?q=H+k:(c=u+r.height-k+L,q=Math.min(H,r.height+.5*r.bottomAxisSize)),
q=(0|q)+.5,m.push(M),v.push(A),f.push(H),g.push(H+M),d.push(D),
p.push(D+A);var X={value:c,changes:!1};null!=x.animator&&(X=x.animator.updateAndGet(q,e.timeStamp)),
y.push({x:w,y:X.value+k-L,style:x.settings.style,side:x.settings.side
}),S.push({x:F,y:X.value,label:x.label}),X.changes&&(e.animating=!0);
}}return{lines:y,labels:S}},i.prototype.getTopPos=function(t,e){
var i=this.scene.x0+this.scene.width,n=this.chart.shell.getChartInnerArea();
return n.findTopPosition(t,Math.min(t+e,i))},i.prototype.createMarkers=function(){
var t=this.scene,e=t.markers.filter(function(t){return!t.isMilestone;
}),i=t.settings,n=i.milestones;for(var r in n){var s=n[r];if(s.enabled){
var a=new T(t,s,i.area.style.markerText);a.animator=new d.Animator(0,0,200),
e.push(a)}}t.markers=e},i}(d.ChartElement);t.Markers=k;var A=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.showTime=!0,
e.align="left",e.side="bottom",e.label={margin:4,padding:3,textStyle:{
font:"12px Arial",fillColor:"red"}},e.style={lineColor:"red"},
e}return n(e,t),e}(L);t.SettingsCurrentTime=A;var M=function(t){
function e(e){var i=t.call(this)||this;return i.animationOrder=100,
i.paintOrder=35,i.updateOrder=900,i.marker=null,i.timeTimerUnit=null,
i.timeTimer=null,i.timeTimerTarget=-(1/0),i.timeTickerEnabled=!1,
i.timeTimerCheckAlways=!1,i._lastAnchor=null,i.chart=e,i.settings=i.chart.settings,
i.scene=i.chart.scene,i.events=i.chart.events,i.createMarker(),
i.updateTimers(),i}return n(e,t),e.prototype.updateTimers=function(){
var t=this,e=this.settings.advanced;this.timeTickerEnabled=e.timeUpdateInterval&&(this.settings.currentTime.enabled||"now"===this.scene.anchor),
this.timeTickerEnabled?this.updateCurTime():this.timeTimer&&(clearTimeout(this.timeTimer),
this.timeTimer=null),e.dataUpdateInterval?this.dataTimer=setInterval(function(){
return t.dataTick()},e.dataUpdateInterval):this.dataTimer&&(clearInterval(this.dataTimer),
this.dataTimer=null)},e.prototype.createMarker=function(){var t=this.settings.currentTime,e=this.marker,i=this.scene.markers;
e&&(i.splice(i.indexOf(e),1),this.marker=null),t.enabled&&(e=this.marker=new T(this.scene,t,null),
e.isMilestone=!1,i.push(e))},e.prototype.onSceneChange=function(t){
var e=!1,i=t.changes.settingsChanges;i&&((i.advanced||i.currentTime)&&(this.updateTimers(),
e=!0),i.currentTime&&this.createMarker()),this._lastAnchor!==this.scene.anchor&&(e||this.updateTimers(),
this._lastAnchor=this.scene.anchor),this.timeTickerEnabled&&(t.changes.timeMarker||t.changes.time&&(this.timeTimerCheckAlways||!this.timeTimer||this.scene.getScale()<this.timeTimerUnit))&&(this.updateCurTime(),
this.updateVisiblePeriod())},e.prototype.timerTick=function(){
this.timeTimer=null,this.chart.removed||(this.updateCurTime(),
this.updateVisiblePeriod())},e.prototype.dataTick=function(){
var t=this;if(this.dataTimer=null,!this.chart.removed&&this.scene.displayUnit){
var e=this.scene.getCurTime(),i=function(){t.updateVisiblePeriod();
};for(var n in this.chart.data){var r=this.chart.data[n];r.updateData(this.scene.displayUnit,e,i);
}}},e.prototype.doAnimations=function(t){t.changes.data&&this.updateVisiblePeriod();
},e.prototype.updateCurTime=function(t){var e=this,i=this.scene;
this.timeTimerUnit=i.getScale();var n=i.getCurTime();this.marker&&(this.marker.time=n);
var r=i.timeToX(n);if(!isNaN(r)){var s=r+200>i.x0&&r-200<i.x0+i.width,a=this.settings.advanced.timeUpdateInterval,o=0;
if(s)this.timeTimerCheckAlways=!1,void 0===t&&this.events.notifySceneChanges({
requestPaint:!0}),i.displayUnit.approxTime()>=36e5&&(o=(i.xToTime(r+1|0)-n)/2,
a=Math.max(a,o),o/=4);else{if(r>0)return;a=Math.max(a,i.dxToDtime(-r-200)/2),
this.timeTimerCheckAlways=!0}var l=+new Date;if(this.timeTimer){
var h=this.timeTimerTarget-l;if(h<a+o)return;window.clearTimeout(this.timeTimer);
}s&&i.dTimeToDx(a)>1?this.events.notifySceneChanges({timeMarker:!0
}):(this.timeTimerTarget=l+a,this.timeTimer=setTimeout(function(){
return e.timerTick()},a))}},e.prototype.updateVisiblePeriod=function(){
var t=this.scene,e=t.displayUnit;if(e&&this.settings.navigation.followAnchor){
var i=null;if("now"===t.anchor){var n=t.getCurTime();i=n}else if("newestData"===t.anchor){
var r=this.chart.getDataLimits().to;i=r}if(null!==i){var s=this.chart.scrolling,a=s.getTo();
if(a<i){var o=s.getFrom(),l=e.roundTimeUp(i,t.timeStepSettings)-a;
this.chart.scrolling.setTimeRangeSnap(o+l,a+l,a+l,t.displayUnit,!0,"timer",!0,!1);
}}}},e}(d.ChartElement);t.TimeUpdater=M;var P=function(t){function e(i){
var n=t.call(this,d.SettingsMapping.TimeChartSettings)||this;return n._minUnit=null,
n._displayUnitsParsed=[],n._displayPeriodsParsed=[],n._computedDataMap={},
n.theme=e.FlatTheme,n.navigation={initialDisplayAnchor:"newestData",
initialDisplayPeriod:"max",initialDisplayUnit:"auto",followAnchor:!1
},n.area=new j,n.chartTypes={columns:{type:"columns"},line:{type:"line"
},candlestick:{type:"candlestick"}},n.currentTime=new A,n.milestones=[],
n.timeAxis=new x,n.data=[],n.toolbar=new a,n.localization=new z,
n.interaction=new _,n.advanced=new H,n.events=new B,n.advanced.assets.push({
url:"assets://moment.js",required:function(){return!window.moment;
}}),n.advanced.assets.push({url:"assets://moment-tz.js",required:function(){
return!window.moment||!window.moment.tz}}),n.apply(i),n._initializing=!1,
n}return n(e,t),e.prototype.timeZoneCompatibility=function(){
var t=this.timeAxis;null==t.timeZone&&(t.timeZone="UTC",d.Helpers.warn("`null` is not a valid value for `timeAxis.timeZone`, using `UTC`")),
"local"===t.timeZoneOffset&&(t.timeZoneOffset=-(new Date).getTimezoneOffset());
for(var e=this.data,i=0;i<e.length;i++){var n=e[i];null!=n.timeZoneOffset&&(d.Helpers.error("Setting `data.timeZoneOffset` has been deprecated. Please use `timeZone` in the data response instead."),
"local"===n.timeZoneOffset&&(n.timeZoneOffset=-(new Date).getTimezoneOffset()));
}},e.prototype.apply=function(e){this.applyCompatibility(e,[{
from:"toolbars",to:"toolbar"},{from:"toolbar.periodSelection",
to:"toolbar.displayPeriod"},{from:"toolbar.zoomOutButton",to:"toolbar.zoomOut"
},{from:"toolbar.backButton",to:"toolbar.back"},{from:"interaction.scrolling.noData",
to:"interaction.scrolling.limitMode"},{from:"interaction.scrolling.noDataSnapBackProportion",
to:"interaction.scrolling.overscrollProportion",transform:function(t){
return 1-t}},{from:"area.initialDisplayPeriod",to:"navigation.initialDisplayPeriod"
},{from:"area.initialDisplayAnchor",to:"navigation.initialDisplayAnchor"
},{from:"area.initialDisplayUnit",to:"navigation.initialDisplayUnit"
},{from:"area.followAnchor",to:"navigation.followAnchor"},{from:"timeAxis.timeZoneOffset",
alternative:"timeAxis.timeZone"},{from:"timeAxis.style.vgrid",
to:"timeAxis.style.vgrid.lineColor",filter:function(t){return"string"==typeof t;
}},{from:"currentTime.overrideCurTime",to:"currentTime.time"},{
from:"advanced.maxUnitsToDisplay",alternative:"timeAxis.minUnitWidth"
}]);var i=t.prototype.apply.call(this,e,I);return this.timeZoneCompatibility(),
this._calcMinUnit(),this._displayUnitsParsed=this._parseUnits(this.area.displayUnits),
this._displayPeriodsParsed=this._parsePeriods(this.area.displayPeriods),
i},e.prototype._parseUnits=function(t){for(var e=[],i=0;i<t.length;i++){
var n=t[i],s=r.parse(n.unit,n.name);this._minUnit.isSmallerOrEqual(s)&&e.push(s);
}return e.sort(function(t,e){return t.approxTime()-e.approxTime();
})},e.prototype._parsePeriods=function(t){for(var e=[],i=0;i<t.length;i++){
var n=r.parse(t[i].unit);n&&this._minUnit.isSmallerOrEqual(n)&&e.push(n);
}return e.sort(function(t,e){return t.approxTime()-e.approxTime();
})},e.prototype._calcMinUnit=function(){for(var t=new r("y",1e6),e=t,i=0;i<this.area.displayUnits.length;i++){
var n=this.area.displayUnits[i],s=r.parse(n.unit,n.name);s.isSmaller(t)&&(t=s);
}for(var i=0;i<this._computedSeries.length;i++){var a=this._computedSeries[i],o=this._computedDataMap[a.data.source];
if(!o)throw new Error("Data source `"+a.data.source+"` for series not found!");
for(var l=0;l<o.units.length;l++){var h=o.units[l],u=r.parse(h);
u.isSmaller(e)&&(e=u)}}e.isBigger(t)&&(t=e),this._minUnit=t},
e}(l.Settings);P.StaticChart={interaction:{zooming:{enabled:!1,
click:!1},selection:{enabled:!1},scrolling:{enabled:!1},resizing:{
enabled:!1}},toolbar:{items:["export"]}},P.DarkTheme={advanced:{
themeCSSClass:"DVSL-flat DVSL-dark",style:{loadingArcStyle:{lineColor:"#EEE"
},messageTextStyle:{fillColor:"#EEE"}}},area:{style:{fillColor:"rgba(28,26,28,1)",
noData:{fillColor:"#DDD",image:"builtin://linearchart-no-data-light"
},selection:{lineColor:"#838283"},selectionLabel:{fillColor:"#BFBBB9"
},zoomHighlight:{fillColor:"rgba(142,142,142,0.15)"},zoomHighlightInactive:{
fillColor:"rgba(142,142,142,0.15)"}}},title:{margin:15,style:{
fillColor:"#A8A7A8"}},chartTypes:{columns:{style:{gradient:1,
depth:0}}},valueAxisDefault:{style:{valueLabel:{textStyle:{fillColor:"#A8A7A8"
}},title:{textStyle:{fillColor:"#A8A7A8"}}}},timeAxis:{style:{
majorTimeLabel:{fillColor:"#A8A7A8",shadowColor:null},minorTimeLabel:{
fillColor:"#A8A7A8",shadowColor:null},minorTimeRuler:{lineColor:"#838283"
},dateLighten:{fillColor:"rgba(142,142,142,0.15)"},dateHolidays:{
fillColor:"rgba(139,139,139,0.11)"}}},info:{style:{highlight:{
fillColor:"rgba(142,142,142,0.15)"}}},currentTime:{style:{lineColor:"#D12E2B"
}},legend:{text:{fillColor:"#A8A7A8"},advanced:{disabledSeries:{
textColor:"rgba(168,167,168,0.5)",lineColor:"rgba(117,117,117,0.8)"
}}}},P.FlatTheme={advanced:{themeCSSClass:"DVSL-flat"},area:{
style:{noData:{fillColor:"#DDD",image:"builtin://linearchart-no-data-light"
}}},chartTypes:{columns:{style:{gradient:1,depth:0}}},timeAxis:{
style:{showMajorTimeBalloons:!1,showMinorTimeBalloons:!1,majorTimeLabel:{
fillColor:"#000",shadowColor:null},minorTimeLabel:{fillColor:"#000",
shadowColor:null},dateLighten:{fillColor:"rgba(0,0,0,0.05)"}}
}},P.RoundTheme={advanced:{themeCSSClass:"DVSL-round"},valueAxisDefault:{
style:{valueLabel:{textStyle:{fillColor:"#000000",font:"11px Arial",
shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"
}}}},timeAxis:{style:{showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,
minorTimeBalloonStyle:{fillColor:"#FFF",shadowOffsetX:0,shadowOffsetY:2,
shadowBlur:2,shadowColor:"#888"},majorTimeBalloonStyle:{fillColor:"#AAA",
shadowOffsetX:0,shadowOffsetY:-1,shadowBlur:0,shadowColor:"rgba(0,0,0,0.3)"
},minorTimeLabel:{fillColor:"#000000",font:"12px Arial",shadowOffsetX:0,
shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"
},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial",shadowOffsetX:0,
shadowOffsetY:1,shadowBlur:1,shadowColor:"#7c7c7c"},minorTimeRuler:{
lineColor:"rgba(0,0,0,0.2)"},dateLighten:{fillColor:"rgba(0,0,0,0.05)"
}}},chartTypes:{columns:{style:{gradient:.8,depth:3}}},area:{
style:{noData:{image:"builtin://linearchart-no-data-dark"}}}},
P.GradientTheme={advanced:{themeCSSClass:"DVSL-gradient"},valueAxisDefault:{
style:{valueLabel:{textStyle:{fillColor:"#000000",font:"11px Arial",
shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"
}}}},timeAxis:{style:{showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,
minorTimeBalloonStyle:{fillColor:"#FFF",shadowOffsetX:0,shadowOffsetY:2,
shadowBlur:2,shadowColor:"#888"},majorTimeBalloonStyle:{fillColor:"AAA",
shadowOffsetX:0,shadowOffsetY:-1,shadowBlur:0,shadowColor:"rgba(0,0,0,0.3)"
},minorTimeLabel:{fillColor:"#000000",font:"12px Arial",shadowOffsetX:0,
shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"
},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial",shadowOffsetX:0,
shadowOffsetY:1,shadowBlur:1,shadowColor:"#7c7c7c"},minorTimeRuler:{
lineColor:"rgba(0,0,0,0.2)"},dateLighten:{fillColor:"rgba(255,255,255,0.2)"
}}},chartTypes:{columns:{style:{gradient:.8,depth:3}}},area:{
style:{noData:{image:"builtin://linearchart-no-data-dark"}}}},
t.Settings=P;var I=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.data=new D,e}return n(e,t),e.getMapping=function(t,e){
if(t&&e.type&&t.type!==e.type)throw new Error("It is not possible to change the value of `type` property for an existing layer.");
switch(t?t.type:e.type){case"columns":case void 0:return d.SettingsMapping.TimeChartSettingsSeriesColumns;
case"candlestick":return d.SettingsMapping.TimeChartSettingsSeriesCandleStick;
case"line":return d.SettingsMapping.TimeChartSettingsSeriesLines;
default:throw new Error("The value '"+e.type+"' is not valid for the `type` property of a series. Valid values are: columns, candlestick, line.");
}},e.createInstance=function(t,e){switch(e||t.type){case"columns":
case void 0:return new N;case"candlestick":return new R;case"line":
return new F;default:throw new Error("The value '"+(e||t.type)+"' is not valid for the `type` property of a series. Valid values are: columns, candlestick, line.");
}},e}(l.SettingsSeries);t.SettingsSeries=I;var D=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.index=1,
e.countIndex=null,e}return n(e,t),e}(l.SettingsSeriesData);t.SettingsSeriesData=D;
var N=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.data=new D,e}return n(e,t),e}(l.SettingsSeriesColumns);
t.SettingsSeriesColumns=N;var F=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.data=new D,e.style=new E,e}return n(e,t),e}(l.SettingsSeriesLines);
t.SettingsSeriesLines=F;var E=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.markerStyleFunction=null,e}return n(e,t),e}(l.SettingsSeriesLinesStyle);
t.SettingsSeriesLinesStyle=E;var O=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.high=null,e.open=null,e.close=null,e.low=null,e}return n(e,t),
e}(D);t.SettingsSeriesCandleStickData=O;var R=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.data=new O,e}return n(e,t),
e}(l.SettingsSeriesCandleStick);t.SettingsSeriesCandleStick=R;
var B=function(t){function e(){var e=t.call(this)||this;return e.selectionChangeDuringInteraction=!1,
e.onTimeChange=null,e.chartUpdateDelay=400,e}return n(e,t),e}(l.SettingsEvents);
t.SettingsEvents=B;var H=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.timeUpdateInterval=900,e.dataUpdateInterval=null,e.maxUnitsToDisplay=2e4,
e}return n(e,t),e}(d.SettingsAdvanced);t.SettingsAdvanced=H;var z=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.calendar={
parentLocale:null},e.holidayWeekdays=[6,7],e.toolbar=new U,e.timeUnitsNames={
ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",
M:"month",y:"year"},e.timeUnitsNamesPlural={ms:"milliseconds",
s:"seconds",m:"minutes",h:"hours",d:"days",w:"weeks",M:"months",
y:"years"},e.markerDates={timeFormats:{ms:"HH:mm:ss",s:"HH:mm:ss",
m:"HH:mm:ss",h:"HH:mm",d:"D, HH:mm",w:"MMM D",M:"MMM D",y:"YYYY, MMM D"
}},e.infoDates={majorTimeFormats:{y:null,M:"YYYY",w:"GGGG",d:"YYYY",
h:"MMM D, YYYY",m:"MMM D, YYYY",s:"MMM D, YYYY",ms:"MMM D, YYYY"
},minorTimeFormats:{y:"YYYY",M:"MMM",w:"[Week] W",d:"MMM D",h:"HH:mm",
m:"HH:mm",s:"HH:mm:ss",ms:"ss.SSS"},fullTimeFormats:{ms:"MMM D, YYYY HH:mm:ss",
s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY, HH:mm",h:"MMM D, YYYY HH:00",
d:"MMM D, YYYY",w:"[Week] W, GGGG",M:"MMM YYYY",y:"YYYY"}},e.timeAxisDates={
minorLabelTimeFormats:{ms:"ss.SSS",s:"HH:mm:ss",m:"HH:mm",h:"HH:00",
d:"MMM D",w:"MMM D",M:"MMM",y:"YYYY"},majorLabelTimeFormats:{
ms:"MMM D, YYYY HH:mm:ss",s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY",
h:"MMM D, YYYY HH:00",d:"MMM D, YYYY",w:"[Week] W, GGGG",M:"MMM YYYY",
y:"YYYY"},majorLabelFullTimeFormats:{ms:"MMM D, YYYY HH:mm:ss",
s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY",h:"MMM D, YYYY HH:00",
d:"MMM D, YYYY",w:"[Week] W, GGGG",M:"MMM YYYY",y:"YYYY"}},e.determiningDataBounds="Determining data bounds",
e.loadingLabel="Loading...",e}return n(e,t),e}(l.SettingsLocalization);
t.SettingsLocalization=z;var U=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.customPeriod="Custom",e.periodDropdownTitle="Select units in which to show the data",
e.unitDropdownTitle="Select units in which to show the data",
e.zoomoutButton="Zoom-out",e.zoomoutTitle="Zoom out",e.unavailableUnitTitle="zoom in for more",
e}return n(e,t),e}(l.SettingsLocalizationToolbar);t.SettingsLocalizationToolbar=U;
var _=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.snapMode="displayUnit",e.selection=new v,e.scrolling=new g,
e.zooming=new G,e}return n(e,t),e}(l.SettingsInteraction);t.SettingsInteraction=_;
var G=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.enabled=!0,e.click=!0,e}return n(e,t),e}(l.SettingsInteractionZooming);
t.SettingsInteractionZooming=G;var j=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.displayUnits=[{unit:"1 ms",
name:"millisecond"},{unit:"1 s",name:"second"},{unit:"5 s",name:"5 seconds"
},{unit:"1 m",name:"minute"},{unit:"5 m",name:"5 minutes"},{unit:"1 h",
name:"hour"},{unit:"6 h",name:"6 hours"},{unit:"1 d",name:"day"
},{unit:"1 M",name:"month"},{unit:"1 y",name:"year"}],e.displayPeriods=[{
unit:"10 ms"},{unit:"100 ms"},{unit:"s"},{unit:"m"},{unit:"h"
},{unit:"d"},{unit:"M"},{unit:"y"},{unit:"10 y"},{unit:"100 y"
}],e.style=new W,e}return n(e,t),e}(l.SettingsArea);t.SettingsArea=j;
var W=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.markerText={font:"12px Arial"},e.selection=new y,e.selectionLabel={
fillColor:"#000000",font:"12px Arial"},e}return n(e,t),e}(l.SettingsAreaStyle);
t.SettingsAreaStyle=W;var V=function(e){function i(t){var i=e.call(this,t)||this;
return i.animationOrder=700,i.paintOrder=25,i.updateOrder=1100,
i}return n(i,e),i.prototype.doAnimations=function(t){var e=this.scene;
if(null!=e.selectionStart&&this.chart.selection.isSelecting&&e.settings.info.enabled){
var i=e.selectionStart,n=e.selectionEnd;this.showInfoPopup(i,n,null,this.buildContent(i,n,null,null),t);
}},i.prototype.getPopupAreaMouseMoved=function(t,e){var i=this.scene;
if(!i.displayUnit||!i.xyInChartOrBottom(t,e))return null;var n=i.hoverFrom,r=i.hoverTo;
return{t0:n,t1:r}},i.prototype.getContentsFunctionRange=function(t,e){
var i=r.timeUnitDiffs,n=this.scene,s=!n.displayUnit||i[n.displayUnit.unit]<i.d;
return[n.timestampFromInternal(t,s),n.timestampFromInternal(e,s)];
},i.prototype.buildContent=function(t,i,n,r){return t=this.scene.displayUnit.roundTimeRound(t,this.scene.timeStepSettings),
i=this.scene.displayUnit.roundTimeRound(i,this.scene.timeStepSettings),
e.prototype.buildContent.call(this,t,i,n,r)},i.prototype.buildHeader=function(e,i){
var n=this.scene.displayUnit;if(!n)return"";var r,s=this.scene.settings.localization,a=s.infoDates,o=Math.max(1,Math.ceil(n.numberOfUnits(e,i))),l=o*n.count|0,h=l%10===1&&l%100!==11?s.timeUnitsNames[n.unit]:s.timeUnitsNamesPlural[n.unit],u=this.scene.momentLocale;
if(1===o){var c=t.moment(e).locale(u).utc(),d=c.format(a.fullTimeFormats[n.unit]);
r=""+d}else{"d"!==n.unit&&"M"!==n.unit&&"y"!==n.unit&&"ms"!==n.unit||(i-=1);
var c=t.moment.utc(e).locale(u),p=t.moment.utc(i).locale(u),f=n.getBigger()||n;
"w"===f.unit&&(f=f.getBigger());var g=this.scene.timeStepSettings;
if("y"!==n.unit&&f.roundTimeDown(e,g)===f.roundTimeDown(i,g)){
var m=c.format(a.majorTimeFormats[n.unit]),v=c.format(a.minorTimeFormats[n.unit]),y=p.format(a.minorTimeFormats[n.unit]);
r=v+" - "+y+", "+m}else{var v=c.format(a.fullTimeFormats[n.unit]),y=p.format(a.fullTimeFormats[n.unit]);
r=v+" - "+y}}return"<em></em><strong>"+r+("<small>("+l+" "+h+")</small></strong>");
},i}(l.InfoPopup);t.InfoPopup=V;var Z=function(t){function e(e){
var i=t.call(this)||this;return i.animationOrder=600,i.paintOrder=20,
i.updateOrder=1200,i.chart=null,i.scene=null,i.pointer=null,i.chart=e,
i.scene=e.scene,i}return n(e,t),e.prototype.previewPointerMove=function(t){
this.pointer=null,this.updateHover(t)},e.prototype.onPointerOut=function(t){
var e=this.scene;e.hoverFrom=null,e.hoverTo=null,e.hoverSeriesItem=null,
t.changes.hover=!0,this.chart.notifyHoverChanged(t,this.chart.createEventArguments(t,"user"));
},e.prototype.previewPointerDown=function(t){this.pointer=t.identifier,
this.updateHover(t)},e.prototype.updateHover=function(t){var e=this.chart,i=e.scene,n=this.getClickRange(t.x,t.y),r=null,s=null,a=null;
if(n&&(r=n.t0,s=n.t1,a=e.renderer.hitTest(t.x,t.y)),e.legend)if(a)e.legend.notifyHoveredSeries(i.settings._computedSeries[a.seriesIndex]);else{
e.legend.notifyHoveredSeries(null);var o=e.legend.getLastHoveredSeries();
o&&(a={x0:null,y0:null,x1:null,y1:null,isMarker:!1,seriesIndex:i.settings._computedSeries.indexOf(o)
})}(r!==i.hoverFrom||s!==i.hoverTo||!a!=!i.hoverSeriesItem||a&&(a.seriesIndex!==i.hoverSeriesItem.seriesIndex||a.x0!==i.hoverSeriesItem.x0))&&(i.hoverFrom=r,
i.hoverTo=s,i.hoverSeriesItem=a,t.changes.hover=!0,e.notifyHoverChanged(t,e.createEventArguments(t,"user")));
},e.prototype.onClick=function(t){t.identifier===this.pointer&&this.chart.notifyClick(t,this.chart.createEventArguments(t,"user"));
},e.prototype.defaultClick=function(t,e){var i=this.scene,n=this.chart,r=i.settings.interaction;
if(r.zooming.click){var s=i.xToTime(t.x);if(null!==i.selectionStart&&(i.selectionStart>s||i.selectionEnd<s))this.clearSelection(t,"user");else if(null!==i.hoverFrom&&!n.selection.isHoveringEdge){
var a=i.displayUnit,o=n.scrolling,l=i.hoverFrom,h=i.hoverTo,u=o.timeSetup.getLimits(a,!0);
null!=u.from&&(l=Math.max(l,u.from)),null!=u.to&&(h=Math.min(h,u.to)),
o.setTimeRangeSnap(l,h,null,null,!0,"user",!1,!0);var c=o.targetUnit||i.displayUnit;
a.isSmallerOrEqual(c)&&(c=o.timeSetup.getSmallerDisplayUnit(c),
c&&o.setTimeRangeSnap(l,h,null,c,!0,"user",!1,!0)),null!==i.selectionStart&&this.clearSelection(t,"user"),
t.consumed=!0}}},e.prototype.onRightClick=function(t){var e=this.chart.settings.interaction.selection.clearOnRightClick;
null!==this.scene.selectionStart&&e&&this.clearSelection(t,"user"),
null!==this.scene.hoverFrom&&(this.chart.notifyRightClick(t,this.chart.createEventArguments(t,"user")),
t.defaultPrevented&&(t.consumed=!0))},e.prototype.onDoubleClick=function(t){
null!==this.scene.hoverFrom&&(this.chart.notifyDoubleClick(t,this.chart.createEventArguments(t,"user")),
t.consumed=!0)},e.prototype.clearSelection=function(t,e){this.scene.selectionStart=null,
this.scene.selectionEnd=null,this.chart.notifySelectionChanged(this.chart.createEventArguments(t,e)),
t.changes.selection=!0,t.consumed=!0},e.prototype.onTripleClick=function(t){
void 0!==this.scene.hoverFrom&&null!==this.scene.hoverFrom&&(this.chart.notifyTripleClick(t,this.chart.createEventArguments(t,"user")),
t.consumed=!0)},e.prototype.getClickRange=function(t,e){var i=this.scene;
if(!i.xyInChartOrBottom(t,e))return null;var n,r,s,a=this.scene.xToTime(t);
if(null!==i.selectionStart&&a>=i.selectionStart&&a<i.selectionEnd)n=i.selectionStart,
r=i.selectionEnd,s=Math.max(2,i.displayUnit.numberOfUnits(n,r));else if(i.displayUnit){
var o=!0,l=i.timeStepSettings;if(i.majorTimeUnit){var h=i.majorTimeUnit.roundTimeDown(a,l),u=i.majorTimeUnit.roundTimeUp(a+1,l);
e>i.y0+i.height&&(h>i.timeStart||u<i.timeEnd)&&(n=h,r=u,n=i.displayUnit.roundTimeDown(n,l),
r=i.displayUnit.roundTimeUp(r,l),s=i.displayUnit.numberOfUnits(n,r),
o=!1)}o&&(n=i.displayUnit.roundTimeDown(a,l),r=i.displayUnit.roundTimeUp(a+1,l),
s=1)}else n=null,r=null,s=null;return{t0:n,t1:r,numBars:s}},e;
}(d.ChartElement);t.ClickNotifier=Z;var Y=function(){function t(t){
this.requests={},this.results={},this.dataSlicesCache={},this.nextRequestId=0,
this.hasNewRequests=!1,this.lastSlicer=null,this.chart=t,this.scene=this.chart.scene;
}return t.prototype.registerDataProcessingRequest=function(t){
this.requests[this.nextRequestId]=t;var e=this.chart;return this.results[this.nextRequestId]={
leadIn:null,leadOut:null,times:[],xes:[],values:[],counts:[],
fromIndex:0,toIndex:0,data:[],from:0,to:0,slicer:null,dataExistsFrom:null,
dataExistsTo:null,externalItems:function(t,i){for(var n=r.timeUnitDiffs,s=!e.displayUnit||n[e.displayUnit.unit]<n.d,a=new Array(i-t),o=t;o<i;o++)a[o-t]=e.scene.timestampFromInternal(this.times[o],s);
return a}},this.hasNewRequests=!0,this.nextRequestId++},t.prototype.removeDataProcessingRequest=function(t){
delete this.requests[t],delete this.results[t]},t.prototype.getDisplayUnitsSlicer=function(){
return this.lastSlicer},t.prototype.getData=function(t){return this.results[t];
},t.prototype.clear=function(){this.requests={},this.results={};
},t.prototype.process=function(t){var e=t.changes;if(e.time||e.data||e.displayUnit||e.bounds||e.settings||this.hasNewRequests)if(this.scene.timeStart>=this.scene.timeEnd)for(var i in this.requests){
var n=this.results[i];n.dataExistsFrom=null,n.dataExistsTo=null;
}else{this.hasNewRequests=!1,this.loading=!1,this.hasSomeData=!1;
var r=!!e.data||e.time;for(var i in this.requests){var s=this.requests[i],n=this.results[i],a=this.updateData(r,s,n);
this.updateSlices(a,i,s,n)}this.scene.loading=this.loading,this.loading?this.scene.setMessage("noData",this.scene.settings.localization.loadingLabel,10):this.hasSomeData?this.scene.setMessage("noData",null):this.scene.setMessage("noData",this.scene.settings.localization.noDataLabel,999);
}},t.prototype.exportData=function(t,e,i,n){for(var r=new C(this.scene,i,[],t,e,(!0),0),s=r.times,a=[],o=0;o<n.length;o++){
var l=n[o],h=l.data,u=this.chart.getData(h.source),c=u.getDataForRange(t,e,i,null),d=new Array(s.length-1);
this.fillValues(c.values,r.times,d,r.counts,r.fromIndex,r.toIndex,h,i),
a.push(d)}return{timestamps:r.times.slice(r.fromIndex,r.toIndex-1),
values:a}},t.prototype.updateData=function(t,e,i){var n=this,r=e.source,s=this.chart.getData(r),a=this.getUnitToUse(e),o=(this.scene.timeEnd-this.scene.timeStart)*s.dataSettings.prefetchRatio;
if(t||!i.from&&this.scene.timeStart||!i.to&&this.scene.timeEnd||i.from>=i.to||this.scene.timeStart-o<i.from||this.scene.timeEnd+o>i.to||null!==i.dataExistsFrom&&i.dataExistsFrom>this.scene.timeEnd||null!==i.dataExistsTo&&i.dataExistsTo<this.scene.timeStart){
t=!0;var l=this.scene.timeStart-2*o,h=this.scene.timeEnd+2*o,u=s.getDataForRange(l,h,a,function(){
return n._newDataArrived(r)});s.noData||(this.hasSomeData=!0),
u.from>this.scene.timeEnd||u.to<this.scene.timeStart?(i.data=[],
i.from=0,i.to=0,i.dataExistsFrom=null,i.dataExistsTo=null,this.loading=this.loading||u.loading):(this.loading=this.loading||u.loading&&(u.from>this.scene.timeStart||u.to<this.scene.timeEnd),
i.data=u.values,i.from=l,i.to=h,i.dataExistsFrom=u.from,i.dataExistsTo=u.to);
}return t},t.prototype.updateSlices=function(t,e,i,n){var r=this.getUnitToUse(i),s=i.index,a=i.valueFunction,o=n.data,l=n.slicer=this.getSlice(e,i,r),h=l.update(this.scene.timeStart,this.scene.timeEnd),u=h.newBefore,c=h.newAfter,d=n.times=l.times,p=n.counts=l.counts;
n.xes=l.xes;var f=n.values=l.values;if(o=n.data,n.fromIndex=l.fromIndex,
n.toIndex=l.toIndex,o)o.length>0&&!a&&s>=o[0].length?this.chart.error("No data for this DataIndex: "+s+", only "+(o[0].length-1)+" values present"):(t?this.fillValues(o,d,f,p,l.fromIndex,l.toIndex,i,r):(this.fillValues(o,d,f,p,l.fromIndex,u+1,i,r),
this.fillValues(o,d,f,p,c-1,l.toIndex,i,r)),this.setLeads(i,n,r));else{
f=n.values=new Array(d.length);for(var g=0;g<f.length;g++)f[g]=null;
n.leadIn=null,n.leadOut=null}},t.prototype.getSlice=function(t,e,i){
var n,r=t+"-"+i.toString();return n=this.dataSlicesCache.hasOwnProperty(r)?this.dataSlicesCache[r]:this.dataSlicesCache[r]=new C(this.scene,i,["values","counts"]),
this.lastSlicer=n,n},t.prototype.getUnitToUse=function(t){return this.scene.displayUnit;
},t.prototype.setLeads=function(t,e,i){var n=t.noDataPolicy,r=t.index,s=t.valueFunction,a=e.data,o=e.values,l=e.times,h=null,u=null;
if("join"===n&&a){var d=e.fromIndex;if(null===o[d]){var p=c.binSearch(a,l[d]);
if(p=c.linSearchDown(a,p,r,s),p!==-1){var f=a[p][0],g=e.slicer.makeMiniSlice(f),m=[g.t0,g.t1],v=[g.x0,g.x1],y=[null,null],S=[null,null];
this.fillValues(a,m,y,S,0,2,t,i),h={times:m,xes:v,values:y,counts:S,
fromIndex:0,toIndex:2}}}var b=e.toIndex;if(null===o[b-2]){var p=c.binSearch(a,l[b-1]);
if(p=c.linSearchUp(a,p,r,s),p!==-1){var f=a[p][0],g=e.slicer.makeMiniSlice(f),m=[g.t0,g.t1],v=[g.x0,g.x1],y=[null,null],S=[null,null];
this.fillValues(a,m,y,S,0,2,t,i),u={times:m,xes:v,values:y,counts:S,
fromIndex:0,toIndex:2}}}}e.leadIn=h,e.leadOut=u},t.prototype.fillValues=function(t,e,i,n,r,s,a,o){
var l=a.aggregation,h=0|a.index,u=0|a.countIndex,c=a.valueFunction,d=a.aggregatedValueFunction;
if(!(r+1>=s)&&("sum"===l?this.fillValueSum(t,e,i,n,r,s,h,u,c):"min"===l?this.fillValueMin(t,e,i,n,r,s,h,u,c):"max"===l?this.fillValueMax(t,e,i,n,r,s,h,u,c):"avg"===l?this.fillValueAvg(t,e,i,n,r,s,h,u,c):"count"===l?this.fillValueCount(t,e,i,n,r,s,h,u,c):"first"===l?this.fillValueFirst(t,e,i,n,r,s,h,u,c):"last"===l?this.fillValueLast(t,e,i,n,r,s,h,u,c):this.chart.error("Unrecognized aggregation function: "+l),
d))for(var p=r;p<=s-2;p++)i[p]=d(i[p],e[p],o?o.toString():null);
},t.prototype.fillValueSum=function(t,e,i,n,r,s,a,o,l){for(var h=t.length,u=c.binSearch(t,e[r]),d=r;d<=s-2;d++){
for(var p=e[d+1],f=0,g=0,m=void 0;u<h&&t[u][0]<p;)m=l?l(t[u]):t[u][a],
null!=m&&(f+=m,g+=0===o?1:t[u][o]),u+=1;n[d]=g,i[d]=0===g?null:f;
}},t.prototype.fillValueMin=function(t,e,i,n,r,s,a,o,l){for(var h=t.length,u=c.binSearch(t,e[r]),d=r;d<=s-2;d++){
for(var p=e[d+1],f=1/0,g=0,m=void 0;u<h&&t[u][0]<p;)m=l?l(t[u]):t[u][a],
null!=m&&(f=Math.min(f,m),g+=0===o?1:t[u][o]),u+=1;n[d]=g,i[d]=0===g?null:f;
}},t.prototype.fillValueMax=function(t,e,i,n,r,s,a,o,l){for(var h=t.length,u=c.binSearch(t,e[r]),d=r;d<=s-2;d++){
for(var p=e[d+1],f=-(1/0),g=0,m=void 0;u<h&&t[u][0]<p;)m=l?l(t[u]):t[u][a],
null!=m&&(f=Math.max(f,m),g+=0===o?1:t[u][o]),u+=1;n[d]=g,i[d]=0===g?null:f;
}},t.prototype.fillValueCount=function(t,e,i,n,r,s,a,o,l){for(var h=t.length,u=c.binSearch(t,e[r]),d=r;d<=s-2;d++){
for(var p=e[d+1],f=0,g=void 0;u<h&&t[u][0]<p;)g=l?l(t[u]):t[u][a],
null!=g&&(f+=o?t[u][o]:1),u+=1;n[d]=f,i[d]=f}},t.prototype.fillValueAvg=function(t,e,i,n,r,s,a,o,l){
for(var h=t.length,u=c.binSearch(t,e[r]),d=r;d<=s-2;d++){for(var p=e[d+1],f=0,g=0,m=void 0;u<h&&t[u][0]<p;)m=l?l(t[u]):t[u][a],
null!=m&&(f+=m,g+=o?t[u][o]:1),u+=1;n[d]=g,i[d]=0===g?null:f/g;
}},t.prototype.fillValueFirst=function(t,e,i,n,r,s,a,o,l){for(var h=t.length,u=c.binSearch(t,e[r]),d=r;d<=s-2;d++){
for(var p=e[d+1],f=null,g=0,m=void 0;u<h&&t[u][0]<p;)m=l?l(t[u]):t[u][a],
null!=m&&(null===f&&(f=m),g+=o?t[u][o]:1),u+=1;n[d]=g,i[d]=f}
},t.prototype.fillValueLast=function(t,e,i,n,r,s,a,o,l){for(var h=t.length,u=c.binSearch(t,e[r]),d=r;d<=s-2;d++){
for(var p=e[d+1],f=null,g=0,m=void 0;u<h&&t[u][0]<p;)m=l?l(t[u]):t[u][a],
null!=m&&(f=m,g+=o?t[u][o]:1),u+=1;n[d]=g,i[d]=f}},t.prototype._newDataArrived=function(t){
var e={};e[t]=!0,this.chart.events.notifySceneChanges({data:e
})},t}();t.DataWarehouse=Y;var q=function(t){function e(e,i){
var n=t.call(this)||this;return n.animationOrder=400,n.paintOrder=5,
n.updateOrder=1500,n.dataWarehouse=i,n.chart=e,n.scene=n.chart.scene,
n.events=n.chart.events,n.buildSeries(),n}return n(e,t),e.prototype.buildSeries=function(){
this.valueAxis=new l.ValueAxisSet(this.chart,this.scene.settings._computedValueAxisList),
this.r=new l.Renderer(this.chart,this.valueAxis),this.dataWarehouse.clear(),
this.requestIds=[];for(var t=0;t<this.scene.settings._computedSeries.length;t++){
var e=this.scene.settings._computedSeries[t];this.requestIds.push(this.dataWarehouse.registerDataProcessingRequest(e.data));
}},e.prototype.onSceneChange=function(t){var e=t.changes;(e.linearChartSeries||e.linearChartValueAxis)&&this.buildSeries(),
e.linearChartValueAxis&&(e.bounds=!0),(e.bounds||e.settings)&&(e.time=!0),
e.data&&d.Helpers.hasProperties(e.data)&&this.chart.notifyChartUpdate("data",!0);
},e.prototype.getPanels=function(){return this.valueAxis.getPanels(!1);
},e.prototype.doAnimations=function(t){var e=t.changes;if(this.dataWarehouse.process(t),
this.scene.displayUnit){if(this.displayUnit!==this.scene.displayUnit&&(this.displayUnit=this.scene.displayUnit,
e.displayUnit=!0),e.time||e.data||e.displayUnit||e.bounds){for(var i=[],n=0;n<this.requestIds.length;n++)i.push(this.dataWarehouse.getData(this.requestIds[n]));
this.r.process(i)}this.valueAxis.updateMinMax(t),this.r.afterProcess(),
this.valueAxis.doAnimations(t)}},e.prototype.paintScene=function(t){
this.valueAxis.paintUnder(t),d.Graphics.pushClip(t,this.scene.x0,this.scene.y0,this.scene.width,this.scene.height),
this.r.paint(t),d.Graphics.popClip(t),this.valueAxis.paint(t);
},e.prototype.hitTest=function(t,e){return this.scene.xyInChart(t,e)?this.r.hitTest(t,e,this.scene.settings.interaction.selection.tolerance):null;
},e.prototype.exportData=function(t,e){return this.r.exportData(t,e);
},e}(d.ChartElement);t.Renderer=q;var X=function(t){function e(e){
var i=t.call(this)||this;return i.chart=e,i.scene=e.scene,i.settings=e.settings,
i.reinitializePeriod=!0,i}return n(e,t),e.prototype.onSceneChange=function(t){
var e=t.changes.settingsChanges;e&&e.navigation&&(this.reinitializePeriod=!0),
this.reinitializePeriod&&this.chart.assetsLoaded&&this.setupInitialDisplayPeriod();
},e.prototype.onNewDataObject=function(){},e.prototype.setupInitialDisplayPeriod=function(){
var t=this;if(this.scene.width){this.reinitializePeriod=!1;var e=this.settings.navigation.initialDisplayAnchor,i=this.settings.navigation.initialDisplayPeriod,n=this.settings.navigation.initialDisplayUnit;
this.computeDisplayPeriod(i,e,n,function(n,r,s){if(t.scene.setMessage("impl",null,0),
t.scene.loading=!1,t.scene.displayUnit&&(s=t.scene.displayUnit),
!t.scene.timeStart&&!t.scene.timeEnd){var a=t.chart.scrolling.timeSetup,o=a.getLimits(s,!0);
null!==o.from&&(n=Math.round(Math.max(n,o.from))),null!==o.to&&(r=Math.round(Math.min(r,o.to))),
t.chart.scrolling.setTimeRange(n,r,s,!1,"init",e,i)}})}},e.prototype.computeDisplayPeriod=function(t,e,i,n){
var r=this,s=this.chart.scrolling.computeDisplayPeriod(t,e,i,this.scene.mainData.dataFrom,this.scene.mainData.dataTo),a=s.from,o=s.to,l=s.unit;
if(null!==a&&null!==o&&l)return n(a,o,l);if(!(this.scene.mainData.dataSettings.dataFunction||this.scene.mainData.dataSettings.url||this.scene.mainData.dataSettings.urlByUnit||this.scene.mainData.dataSettings.preloaded))return void this.chart.error("Cannot compute data dependant display period, no data given. DisplayPeriod = "+t+", DisplayAnchor = "+e);
var h=function(l,u,c,d,p,f){if(!r.chart.removed){if(null===l||null===u||0===l&&0===u&&r.scene.mainData.noData)return void n(d,p,f);
s=r.chart.scrolling.computeDisplayPeriod(t,e,i,l,u),a=s.from,
o=s.to;var g=s.unit;return null===a||null===o?void r.chart.error("Could not setup display time interval. Check your configuration."):void(g.isMultipleOf(c)?n(a,o,g):r.scene.mainData.determineDataLimits(g,!0,!0,function(t,e,i){
return h(t,e,i,l,u,g)}))}};this.scene.mainData.determineDataLimits(null,!0,!0,function(t,e,i){
return h(t,e,i,0,0,null)})},e}(d.Navigator);t.Navigator=X,t.moment=null;
var Q=!1,J=function(e){function i(i,n){var r=e.call(this,new P(i),new b,n)||this;
return r.timeAxis=null,r.timeStart=0,r.timeEnd=0,r.displayUnit=null,
r.selectionStart=0,r.selectionEnd=0,r._cachedDataLimits=null,
r.dataWarehouse=new Y(r),r.renderer=r.events.addElement(new q(r,r.dataWarehouse)),
r.scrolling=r.events.addElement(new m(r)),r.selection=r.events.addElement(new S(r)),
r.navigator=r.events.addElement(new X(r)),r.clickNotifier=r.events.addElement(new Z(r)),
r.infoPopup=r.events.addElement(new V(r)),r.events.addElement(new M(r)),
r.events.addElement(new t.Markers(r)),r.events.addElement(new l.Highlights(r)),
r.finalInitialize(),r}return n(i,e),i.prototype.notifyAssetsLoaded=function(){
if(!this.removed){if(!t.moment){if(t.moment=window.moment,!t.moment)return void this.error("Unable to load moment library. Please check that the assets are configured properly.");
d.Helpers.compareVersions(t.moment.version,[2,9])||this.error("ZoomCharts requires moment version 2.9.0 or newer. The loaded version is "+t.moment.version);
}!Q&&t.moment.tz&&(d.Helpers.compareVersions(t.moment.tz.version,[0,5])||this.error("ZoomCharts requires moment-timezone version 0.5.0 or newer. The loaded version is "+t.moment.tz.version),
Q=!0),this.setMomentLocale();var i=this.settings.timeAxis;t.moment.tz&&"local"===i.timeZone&&(i.timeZone=t.moment.tz.guess(),
d.Helpers.warn("Instead of using `local` for `timeAxis.timeZone` it is recommended to specify the exact timezone since the local timezone detection is error prone. The timezone was detected as `"+i.timeZone+"`.")),
this.timeAxis||(this.timeAxis=this.events.addElement(new w(this)));
for(var n=Object.keys(this.data),r=0;r<n.length;r++)this.data[n[r]].notifyAssetsLoaded();
e.prototype.notifyAssetsLoaded.call(this),this.api._notifyAssetsLoaded();
}},i.prototype.createDataObj=function(t){return new c(this,t);
},i.prototype.getData=function(t){return e.prototype.getData.call(this,t);
},i.prototype.setMomentLocale=function(){var e=this.scene.momentLocale,i=t.moment.locale(),n=this.settings.localization.calendar;
n.parentLocale&&!d.Helpers.compareVersions(t.moment.version,[2,12])&&this.error("Using `parentLocale` requires moment.js 2.12.0 or newer. The loaded version is "+t.moment.version),
t.moment.locale(e,null),t.moment.locale(e,n),this.scene.timeStepSettings={
week:{dow:t.moment.localeData().firstDayOfWeek()}},t.moment.locale(i);
},i.prototype.remove=function(){t.moment&&t.moment.locale(this.scene.momentLocale,null),
e.prototype.remove.call(this),this.infoPopup.remove()},i.prototype.onSettingsChanged=function(t){
if(t.data&&(t.toolbar=!0),t.area&&t.area.displayUnits){var e=this.scene,i=new o(this);
if(e.displayUnit&&!i.isAllowedDisplayUnit(e.displayUnit)){var n=i.computeDisplayUnit(e.timeStart,e.timeEnd,e.displayUnit,e.timeStart,e.timeEnd,e);
this.scrolling.setTimeRangeSnap(e.timeStart,e.timeEnd,null,n.unit,!0,"api",!0,!0);
}}this.assetsLoaded&&t.localization&&t.localization.calendar&&this.setMomentLocale(),
this.events.notifySceneChanges({time:!0})},i.prototype.save=function(){
var t=this.scene;return JSON.stringify({from:this.timeStart,to:this.timeEnd,
unit:this.displayUnit.toString(),selFrom:t.selectionStart,selTo:t.selectionEnd,
anchor:t.anchor,period:t.period})},i.prototype.restore=function(t,e){
if(t){var i=JSON.parse(t),n=r.parse(i.unit);n&&(this.scrolling.setTimeRange(i.from,i.to,n,e,"api",i.anchor,i.period),
this.setSelection(i.selFrom,i.selTo))}},i.prototype.warnInvisibleChart=function(t){
this.scene.width||d.Helpers.warn("`"+t+"()` method has been called on a hidden chart. This might produce invalid results since the chart width impacts the calculations.");
},i.prototype.setSelection=function(t,e,i){void 0===i&&(i="api");
var n=this.scene;n.selectionStart===t&&n.selectionEnd===e||(n.selectionStart=t,
n.selectionEnd=e,this.events.notifySceneChanges({selection:!0
}),this.notifySelectionChanged(this.createEventArguments(null,i)));
},i.prototype.setTimeRange=function(t,e,i,n){void 0===n&&(n="api"),
this.warnInvisibleChart("time"),this.setSelection(null,null,n);
var s=this.displayUnit;if(!s){var a=this.settings.navigation.initialDisplayUnit;
a&&"auto"!==a&&(s=r.parse(a))}if(this.scene.displayUnit=s,this.scene.width){
var o=this.scrolling.onSnapWhileDragging(t,e,null,!0,2);o.unit&&(this.scene.displayUnit=o.unit,
o=this.scrolling.onSnapAfterDragging(o.from,o.to,null,!0,2)),
t=o.from,e=o.to,s=o.unit}this.scrolling.setTimeRange(t,e,s,i,n);
},i.prototype.setDisplayPeriod=function(t,e,i,n,r){var s=this;
return void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!0),
void 0===r&&(r="api"),this.warnInvisibleChart("setDisplayPeriod"),
null===e&&(e=this.scene.anchor),this.setSelection(null,null),
"string"==typeof e&&(e=e.trim()),"string"==typeof t&&(t=t.trim()),
this.navigator.computeDisplayPeriod(t,e,i,function(i,a,o){return s.scrolling.setTimeRange(i,a,o,n,r,e,t);
})},i.prototype.scroll=function(t,e,i){void 0===i&&(i=!1);var n=t.trim().split(" ");
if(3!==n.length)return void this.error("Incorrect scroll format: "+t);
var r=n[0],s=parseInt(n[1],10),a=n[2];if("<"!==r&&">"!==r||"number"!=typeof s)return void this.error("Scroll:Incorrect scroll format: "+t);
var l=new o(this),h=l.scroll(this.timeStart,this.timeEnd,this.displayUnit,r,s,a),u=h.from,c=h.to;
i?this.scrolling.setTimeRangeSnap(u,c,0,this.displayUnit,e,"api",null,null):this.scrolling.setTimeRange(u,c,this.displayUnit,e,"api",null,this.scene.period);
},i.prototype.zoomOut=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e="api"),
void 0===i&&(i=null),this.setSelection(null,null),this.scrolling.zoomOut(i,this.scene.timeStart,this.scene.timeEnd,t,e),
this.scene.period=null},i.prototype.zoomOutPossible=function(){
return!!this.scene.displayUnit},i.prototype.zoomIn=function(t,e,i,n){
void 0===e&&(e=null),void 0===i&&(i=!0),void 0===n&&(n="api"),
this.setSelection(null,null),this.scrolling.zoomIn(t,e,this.scene.timeStart,this.scene.timeEnd,i,n),
this.scene.period=null},i.prototype.setDisplayUnit=function(t,e,i,n){
void 0===i&&(i="api"),void 0===n&&(n=!1),this.warnInvisibleChart("displayUnit");
var s,a,o;if("auto"===t){var l=this.scrolling.timeSetup.computeDisplayUnit(null,null,null,this.timeStart,this.timeEnd,this.scene);
s=l.unit,a=l.from,o=l.to}else{if(s=r.parse(t),!s)return;if(n){
for(var h=s.toString(),u=this.scene.settings._displayUnitsParsed,c=!1,p=0;p<u.length;p++)if(u[p].toString()===h){
c=!0;break}c||d.Helpers.warn("The display unit `"+h+"` does not match a display unit configured in `area.displayUnits`.");
}var f=this.scene.timeStepSettings;a=s.roundTimeDown(this.timeStart,f),
o=s.roundTimeUp(this.timeEnd,f)}var g=this.scrolling.snap(a,o,null,s,!1,!0);
this.scrolling.setTimeRange(g.from,g.to,s,e,i,g.anchor,g.period);
},i.prototype.invalidateDataLimits=function(){this._cachedDataLimits=null;
},i.prototype.getDataLimits=function(t){void 0===t&&(t=this.displayUnit);
var e=this._cachedDataLimits;if(e&&e.unit===t)return e;for(var i=this.settings._computedSeries,n=Object.create(null),r=0;r<i.length;r++){
var s=i[r];s.enabled&&(n[s.data.source]=!0)}var a=1/0,o=-(1/0);
for(var l in n){var h=this.data[l];h&&(h.dataLimitFrom||h.dataLimitTo)&&(a=Math.min(a,h.dataLimitFrom),
o=Math.max(o,h.dataLimitTo))}return a>o?(a=null,o=null):t&&(a=t.roundTimeDown(a,this.scene.timeStepSettings),
o=t.roundTimeUp(o,this.scene.timeStepSettings)),this._cachedDataLimits={
from:a,to:o,unit:t}},i.prototype.getDisplayLimits=function(t){
var e=this.getDataLimits(t),i=e.from,n=e.to;if(null===i)return e;
for(var r=0;r<this.scene.markers.length;r++){var s=this.scene.markers[r];
s.settings.overrideLimits&&(i=Math.min(i,s.time),n=Math.max(n,s.time));
}return{from:i,to:n}},i.prototype.exportVisibleData=function(){
if(!this.displayUnit)return[];for(var e=this.settings._computedSeries,i=this.dataWarehouse.exportData(this.timeStart,this.timeEnd,this.displayUnit,e),n=this.settings.localization.infoDates.fullTimeFormats[this.displayUnit.unit],r=i.timestamps,s=i.values,a=["timestamp","time"],o=0;o<e.length;o++){
var l=e[o];a.push(l.name||l.id||"")}for(var h=[a],u=this.scene.momentLocale,c=0;c<r.length;c++){
for(var d=r[c],p=[d,t.moment.utc(d).locale(u).format(n)],f=0;f<e.length;f++)p.push(s[f][c]);
h.push(p)}return h},i.prototype.isThisDisplayPeriod=function(t,e,i){
if(!this.displayUnit)return!1;var n=this.scene.mainData.dataFrom,r=this.scene.mainData.dataTo,s=this.scrolling.computeDisplayPeriod(t,e,i,n,r);
n=s.from,r=s.to;var a=this.scrolling.getFrom(),o=this.scrolling.getTo(),l=o-a,h=Math.abs(a-n)/l;
if(h>.1)return!1;var u=Math.abs(o-r)/l;return!(u>.1)},i.prototype.notifyTimeChanged=function(t,e,i,n){
this.timeStart=t,this.timeEnd=e,this.displayUnit=i,this.notifyChartUpdate(n);
},i.prototype.saveNavigation=function(){return this.displayUnit?{
timeStart:this.timeStart,timeEnd:this.timeEnd,displayUnit:this.displayUnit,
anchor:this.scene.anchor,period:this.scene.period}:null},i.prototype.restoreNavigation=function(t,e,i){
this.timeStart=t.timeStart,this.timeEnd=t.timeEnd,this.displayUnit=t.displayUnit,
this.scrolling.setTimeRange(this.timeStart,this.timeEnd,this.displayUnit,e,i,t.anchor,t.period);
},i.prototype.doChartUpdateNotify=function(t){e.prototype.doChartUpdateNotify.call(this,t),
this.dispatchEventParams("timeChange",this.createEventArguments(null,t),null);
},i.prototype.createEventArguments=function(t,e){var i=this.scene,n=i.hoverSeriesItem,s=n&&null!=n.seriesIndex?i.settings._computedSeries[n.seriesIndex]:null,a=!!n&&n.isMarker,o=r.timeUnitDiffs,l=!this.displayUnit||o[this.displayUnit.unit]<o.d,h=i.timestampFromInternal(i.hoverFrom,l),u=i.timestampFromInternal(i.hoverTo,l);
return{chart:this.api,origin:e,timeStart:i.timestampFromInternal(this.timeStart,l),
timeEnd:i.timestampFromInternal(this.timeEnd,l),displayUnit:this.displayUnit?this.displayUnit.toString():null,
selectionStart:i.timestampFromInternal(i.selectionStart,l),selectionEnd:i.timestampFromInternal(i.selectionEnd,l),
hoverStart:h,hoverEnd:u,hoverSeries:s,hoverMarker:a,clickStart:h,
clickEnd:u,clickSeries:s,clickMarker:a}},i.prototype.defaultClick=function(t,i){
e.prototype.defaultClick.call(this,t,i),this.clickNotifier.defaultClick(t,i);
},i.prototype.defaultRightClick=function(t){this.infoPopup.show(t),
t.preventDefault()},i.prototype.getBottomHeight=function(){return this.scene.height-this.scene.bottomAxisSize;
},i.prototype.showInfoPopup=function(t,e,i){if(null==t)return void this.infoPopup.hideInfoPopup(null);
if(null==e||t===e)e=t+1;else if(t>e){var n=t;t=e,e=n}var r=this.displayUnit,s=this.scene.timeStepSettings;
t=r.roundTimeDown(t,s),e=r.roundTimeUp(e,s),e<this.scene.timeStart||t>this.scene.timeEnd||this.infoPopup.manualShowInfoPopup(t,e,i);
},i}(l.Impl);t.Impl=J}(o=i.TimeChart||(i.TimeChart={})),function(t){
var e=t.Renderers||(t.Renderers={}),i=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.itemsToLoad=50,e.partialLoad=!0,
e.autoCategories=null,e.sortField=null,e.dataFunction=null,e.preloaded=null,
e}return n(e,t),e}(d.SettingsData);t.SettingsData=i;var r={values:1,
id:1,offset:1,limit:1,afterSum:1,beforeSum:1,subvalues:1,sum:1,
extra:1,name:1,totalCount:1,total:1,valuesSum:1,done:1,afterFraction:1,
beforeFraction:1},s=function(){function t(){this.name=null,this.values=[],
this.offset=0,this.totalCount=null,this.total=0,this.valuesSum=0,
this.beforeSum=0,this.afterSum=0,this.done=!1,this.extra=null;
}return t}();t.PieData=s;var a=function(t){function e(e,i,n){
var r=t.call(this,e,i)||this;return r.pies={},r.pendingPies={},
r.requestedPies={},r.nextId=0,r._isFacetChart=n,r}return n(e,t),
e.exportValues=function(t){var e=["id","name","value"],i={id:0,
name:1,value:2},n=3,r=t.values,s=new Array(r.length+1);s[0]=e;
for(var a=0;a<r.length;a++){var o=r[a],l=new Array(n);s[a+1]=l;
for(var h=Object.keys(o),u=0;u<h.length;u++){var c=h[u];if("_"!==c.charAt(0)&&"fraction"!==c){
var p=o[c];if(Array.isArray(p))p=p.length;else if(d.Helpers.isObjectOrArray(p))continue;
var f=i[c];void 0===f&&(i[c]=f=n++,e.push(c)),l[f]=p}}}return s;
},e.prototype.hasDataFunc=function(){return!!this.dataSettings.dataFunction||!!this.dataSettings.url;
},e.prototype.applyPreloadedData=function(){if(t.prototype.applyPreloadedData.call(this),
!this.hasDataFunc()){for(var e=Object.keys(this.pies),i=0;i<e.length;i++){
var n=this.pies[e[i]];n.done||(n.done=!0,n.afterSum=0,n.totalCount=n.offset+n.values.length);
}this.chart.scene.loading=!1}},e.prototype.getRootId=function(){
return this.settings.navigation.initialDrilldown&&this.settings.navigation.initialDrilldown.length>0?this.settings.navigation.initialDrilldown[0]:"";
},e.prototype.canExpand=function(t){return!!d.Helpers.hasProperty(this.pies,t)||!(!this.hasDataFunc()||this.dataSettings.autoCategories)&&!(!t||t[0]===d.Helpers.SeparatorChar);
},e.prototype.getPieData=function(t){if(!d.Helpers.hasProperty(this.pies,t))return null;
var e=this.pies[t];return this.needPostprocessing()&&(e=this.filterAndSortData(e)),
e},e.prototype.requestMorePieData=function(t,e){return void 0===e&&(e=this.dataSettings.itemsToLoad),
null==e&&(e=this.dataSettings.itemsToLoad),!(!d.Helpers.hasProperty(this.pies,t)||this.pies[t].done||(this.requestPieData(t,this.pies[t].offset+this.pies[t].values.length,e),
0))},e.prototype.requestLessPieData=function(t,e){if(void 0===e&&(e=this.dataSettings.itemsToLoad),
!d.Helpers.hasProperty(this.pies,t))return!1;var i=this.pies[t];
return!(0===i.offset&&(i.done||i.values.length>1)||(this.requestPieData(t,Math.max(i.offset-this.dataSettings.itemsToLoad,0),e),
0))},e.prototype.requestPieData=function(t,e,i){if(void 0===i&&(i=this.dataSettings.itemsToLoad),
this.dataSettings.autoCategories){if(d.Helpers.hasProperties(this.pies))throw new Error("Cannot request additional data when autoCategories is in use!");
t=""}if(t[0]===d.Helpers.SeparatorChar)throw new Error("Invalid Id: "+t);
if(d.Helpers.hasProperty(this.pies,t)){var n=this.pies[t],r=n.offset,s=r+n.values.length;
if(e<r)i=r-e;else{if(!(e+i>s))return;i=e+i-s,e=s}}else(this.needPostprocessing()||!this.dataSettings.partialLoad||this.dataSettings.autoCategories)&&(i=2147483647,
e=0);if(!d.Helpers.hasProperty(this.requestedPies,t))if(d.Helpers.hasProperty(this.pendingPies,t)){
var a=this.pendingPies[t],o=Math.min(a.offset,e),l=Math.max(a.offset+a.limit,e+i);
a.offset=o,a.limit=l-o}else this.dataFunc&&(this.pendingPies[t]={
id:t,offset:e,limit:i},this.scheduleRequests())},e.prototype.autoCategorize=function(t,e){
if(0===e.length)return t;for(var i=d.Helpers.clone(t),n=[i],r=0;r<e.length;r++){
for(var s=e[r],a=[],o=0;o<n.length;o++){for(var l=n[o],h=[],u={},c=0;c<l.subvalues.length;c++){
var p=l.subvalues[c],f=void 0;f=d.Helpers.isFunction(s)?s(p):p[s],
f=void 0===f||null===f?"None":f.toString();var g=void 0;d.Helpers.hasProperty(u,f)?g=u[f]:(g={
id:l.id+d.Helpers.SeparatorChar+f,__id:l.id+d.Helpers.SeparatorChar+f,
value:0,subvalues:[],name:f,__category:s},u[f]=g,h.push(g),a.push(g)),
g.subvalues.push(p),g.value+=d.Helpers.tryParseFloat(p.value,0);
}l.subvalues=h}n=a}return i},e.prototype.valueSum=function(t){
if(this._isFacetChart)return 0;for(var e=0,i=0;i<t.length;i++)e+=t[i].value;
return e},e.prototype.addDataInt=function(t,e,i,n,a,o,l,h,u){
var c;c=d.Helpers.hasProperty(this.pies,t)?this.pies[t]:this.pies[t]=new s;
var p=c.offset+c.values.length,f=i+e.length;if(0===c.values.length||f<c.offset||p<i)c.offset=i,
c.done=n>e.length,c.values=e.slice(),c.valuesSum=this.valueSum(e),
c.totalCount=c.done?c.values.length+c.offset:null,c.afterSum=c.done?0:a,
c.beforeSum=0===c.offset?0:o,c.total=c.done&&0===c.offset?c.valuesSum:l;else{
var g=null,m=null,v=0,y=0;c.offset<i&&(i===p?(g=c.values,v=c.valuesSum):(g=c.values.slice(0,i-c.offset),
v=this.valueSum(g))),p>f&&e.length>=n&&(c.offset===f?(m=c.values,
y=c.valuesSum):(m=c.values.slice(f-c.offset),y=this.valueSum(m))),
m?c.values=g?g.concat(e,m):e.concat(m):c.values=g?g.concat(e):e.slice(),
c.offset=Math.min(c.offset,i),c.valuesSum=this.valueSum(e)+v+y,
e.length<n&&(c.done=!0),g||(c.beforeSum=o),m||(c.afterSum=a),
c.total=l,c.done&&(c.afterSum=0),0===c.offset&&(c.beforeSum=0),
c.done&&0===c.offset&&(c.total=c.valuesSum)}if(c.extra=h.extra,
c.name=h.name,h)for(var S in h)d.Helpers.hasProperty(r,S)||(c[S]=h[S]);
for(var b=0;b<e.length;b++){var C=e[b];C.subvalues&&(u[C.__id]=!0,
this.addDataInt(C.__id,C.subvalues,0,1/0,null,null,null,C,u));
}},e.prototype.needPostprocessing=function(){var t=this.chart.settings.filters;
return!!t.sliceFilter||!t.allowZeroValues||!!this.dataSettings.sortField;
},e.prototype.filterAndSortData=function(t){var e=this.chart.settings.filters,i=e.allowZeroValues,n=e.sliceFilter;
if(!i||n){for(var r=t.total||0,a=[],o=0;o<t.values.length;o++){
var l=t.values[o];n&&!n(l)||!i&&0===l.value?r-=l.value:a.push(l);
}var h=new s;h.values=a,h.done=t.done,h.beforeSum=t.beforeSum,
h.afterSum=t.afterSum,h.total=t.total||null,h.totalCount=t.totalCount||null,
h.extra=t.extra,t=h}return this.dataSettings.sortField&&this.sortData(t),
t},e.prototype.sortData=function(t){var e=this.dataSettings.sortField;
if(d.Helpers.isFunction(e))return void t.values.sort(e);var i;
i=Array.isArray(e)?e.slice():[e];for(var n=new Array(i.length),r=0;r<i.length;r++){
var s=i[r];"-"===s.charAt(0)?(i[r]=s.substr(1),n[r]=-1):n[r]=1;
}var a=function(t,e){for(var r=0;r<i.length;r++){var s=t[i[r]],a=e[i[r]],o=void 0;
if(null==s?o=null==a?0:a<0?-1:1:null==a?o=s<0?1:-1:(o=a-s,isNaN(o)&&(o=(""+a).localeCompare(s))),
0!==o)return n[r]*o}return 0};t.values.sort(a)},e.prototype.buildRequest=function(){
if(!d.Helpers.hasProperties(this.pendingPies))return null;var t=d.Helpers.removePropertyValue(this.pendingPies),e=t.key,i=t.value;
return this.requestedPies[e]=i,i},e.prototype.dataFunc=function(t,e,i){
var n=this.dataSettings;if(n.dataFunction)n.dataFunction(t.id,t.limit,t.offset,e,i);else if(n.url){
var r=[];t.id&&r.push(["id",t.id]),r.push(["limit",t.limit.toString(10)]),
r.push(["offset",t.offset.toString(10)]),d.Data.doRequest(n.url,n,r,e,i);
}else i({error:"Chart configuration does not define data retrieval function"
})},e.prototype.verifySlices=function(t,e,i){for(var n=!0,r=0;r<t.length;r++){
var s=t[r],a=s.id?" Slice id: `"+s.id+"`":"";if(d.Helpers.isObjectOrArray(s)){
if(!this._isFacetChart)if(s.value=d.Helpers.tryParseFloat(s.value,null),
null===s.value){if(!i){d.Helpers.warn("Slices must have a numeric `value` property!"+a),
t.splice(r,1),r--;continue}this.chart.error("Slices must have a numeric `value` property!"+a),
n=!1}else if(s.value<0){if(!i){d.Helpers.warn("Slice values cannot be negative."+a),
t.splice(r,1),r--;continue}this.chart.error("Slice values cannot be negative."+a),
n=!1}d.Helpers.hasProperty(s,"id")?(s.__id=""+s.id,d.Helpers.hasProperty(e,s.__id)&&(this.chart.error("Multiple slices with the same ID."+a),
n=!1),e[s.__id]=!0):(s.__id=d.Helpers.SeparatorChar+this.nextId,
this.nextId++),d.Helpers.hasProperty(s,"subvalues")&&(Array.isArray(s.subvalues)?this.verifySlices(s.subvalues,e,i)||(n=!1):(this.chart.error("Field `subvalues` is not an array!"+a),
n=!1))}else this.chart.error("Slices must be objects!"),n=!1}
return n},e.prototype.verifyData=function(t,e){if(d.Helpers.hasProperty(e,"id")||(e.id=t?t.id:this.getRootId()),
t&&e.id&&e.id!==t.id)return this.chart.error("Requested data for ID `"+t.id+"` but got data with ID `"+e.id+"`. Consider specifying `navigation.initialDrilldown`."),
!1;if(delete this.requestedPies[e.id],e.limit=d.Helpers.tryParseInt(e.limit,1/0),
e.offset=d.Helpers.tryParseInt(e.offset,0),e.beforeSum=d.Helpers.tryParseFloat(e.beforeSum,null),
e.afterSum=d.Helpers.tryParseFloat(e.afterSum,null),e.sum=d.Helpers.tryParseFloat(e.sum,null),
!d.Helpers.hasProperty(e,"subvalues")){if(!d.Helpers.hasProperty(e,"values"))return this.chart.error("Field `subvalues` not set in root data object"),
!1;d.Helpers.warn("Use of property `values` within PieChart data object is being deprecated. Please use `subvalues` instead.",null,!0),
e.subvalues=e.values}if(!Array.isArray(e.subvalues))return this.chart.error("Field `subvalues` is not an array!"),
!1;var i=!0;e.offset<0&&(this.chart.error("Data `offset` must be greater or equal to 0."),
i=!1),e.limit<1&&(this.chart.error("Data `limit` must be greater than 0."),
i=!1);var n=e.offset>0||e.limit<=e.subvalues.length;if(!this.verifySlices(e.subvalues,{},n))return!1;
var r=e.limit>e.subvalues.length,s=e.offset+e.subvalues.length;
if(t&&(e.offset>=t.offset+t.limit||t.offset>=s&&!r)&&(this.chart.error("Response and request do not overlap. Requested "+t.limit+" items starting at "+t.offset+". Received "+e.subvalues.length+" items starting at "+e.offset),
i=!1),d.Helpers.hasProperty(this.pies,e.id)){var a=this.pies[e.id];
if(a.values.length>0){var o=a.offset+a.values.length;(o<e.offset||s<a.offset&&!r)&&(this.chart.error("Data cannot be merged - there is a gap between old data and new data! Old data spans slices from "+a.offset+" to "+(o-1)+"; new data spans slices from "+e.offset+" to "+(s-1)+"."),
i=!1)}}if(n&&this.dataSettings.autoCategories&&(this.chart.error("Cannot auto categorize partial data"),
i=!1),!this._isFacetChart&&n){var l=(null==e.beforeSum?0:1)+(null==e.afterSum?0:1)+(null==e.sum?0:1);
l<2?(this.chart.error("For partial loading, at least 2 of the following need to be set: beforeSum, afterSum, sum."),
i=!1):(e.__valuesSum=this.valueSum(e.subvalues),null==e.beforeSum?e.beforeSum=e.sum-e.afterSum-e.__valuesSum:null==e.afterSum?e.afterSum=e.sum-e.beforeSum-e.__valuesSum:null==e.sum&&(e.sum=e.beforeSum+e.afterSum+e.__valuesSum),
e.sum!==e.beforeSum+e.afterSum+e.__valuesSum&&(this.chart.error("For partial loading, beforeSum + (sum of subvalues) + afterSum must equal sum!"),
i=!1),this._isFacetChart||(e.beforeSum<0&&(this.chart.error("beforeSum cannot be negative!"),
i=!1),e.afterSum<0&&(this.chart.error("afterSum cannot be negative!"),
i=!1),e.sum<0&&(this.chart.error("sum cannot be negative!"),i=!1)));
}return i},e.prototype.addVerifiedData=function(t,e){this.chart.scene.loading=this.hasPendingRequests();
var i=e.id,n={};return n[i]=!0,t?this.chart.log("Data arrived, id="+i+", offset="+t.offset+", len="+e.subvalues.length+" of "+(t.limit||"unset")):this.chart.log("Data arrived, id="+i+", offset="+e.offset+", len="+e.subvalues.length+" of "+(e.limit||"unset")),
this.dataSettings.autoCategories&&(e=this.autoCategorize(e,this.dataSettings.autoCategories)),
this.addDataInt(i,e.subvalues,e.offset,e.limit,e.afterSum,e.beforeSum,e.sum,e,n),
{pieChartPieIds:n}},e.prototype.requestFailedPermanently=function(t){
if(this.chart.scene.loading=this.hasPendingRequests(),t){var e=new s;
e.done=!0,this.pies[t.id]=e,this.chart.error("Data request failed for pie with ID `"+t.id+"`."),
delete this.requestedPies[t.id]}else this.chart.error("Data request failed.");
},e}(d.Data);t.Data=a;var o=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.marker=new l,e.showOthers=!1,e}return n(e,t),e}(d.SettingsLegend);
t.SettingsLegend=o;var l=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.shape="square",e}return n(e,t),e}(d.SettingsLegendMarker);
t.SettingsLegendMarker=l;var h=function(t){function e(e,i,n){
var r=t.call(this,e,i,null,null)||this;return r.sliceHovered=!1,
r.data=n,r}return n(e,t),e.prototype.isHovered=function(){return this.hoverCount>0||this.sliceHovered;
},e}(d.LegendEntry),u=function(t){function e(e){var i=t.call(this,e)||this;
return i.paintOrder=20,i.updateOrder=1e3,i}return n(e,t),e.prototype.onSceneChange=function(e){
t.prototype.onSceneChange.call(this,e);var i=e.changes;i.pie&&(this.rebuildItems(),
i.bounds=!0)},e.prototype.getLastHoveredSlice=function(){var t=this.getLastHoveredEntry();
return t?t.data:null},e.prototype.doAnimations=function(){for(var t=this.chart.scene.hoverSlice,e=0;e<this.entries.length;e++)this.entries[e].sliceHovered=this.entries[e].data===t;
for(var i=this.chart.scene.selection,e=0;e<i.length;e++){var n=this.entryIndex[i[e].id];
n&&(n.sliceHovered=!0)}},e.prototype.paintMarker=function(t,e,i,n,r){
var s=r.data,a={fillColor:s.currentFillColor,lineColor:this.settings.marker.lineColor
},o=t.context;o.beginPath();var l=this.settings.marker.shape;l||(l="circle"),
d.Graphics.strokeMarker(o,l,e,i,n),d.Graphics.paint(o,a)},e.prototype.rebuildItems=function(){
var t=[],e=this.chart.scene.peek();if(e){var i=this.settings.text.fillColor,n=function(t){
return new h(t.data.nameLegend||t.label.text||t.data.name,i,t);
},r=this.settings.showOthers,s=e.slices,a=e.previousSlice,o=e.othersSlice;
r&&a&&!a.removed&&t.push(n(a)),t.push.apply(t,s.map(n)),r&&o&&!o.removed&&t.push(n(o));
}this.entryIndex={};for(var l=0;l<t.length;l++)this.entryIndex[t[l].data.id]=t[l];
this.resetEntries(t)},e.prototype.itemClicked=function(t,e){},
e}(d.Legend);t.Legend=u;var p=function(){function t(){this.hwidth=0,
this.hheight=0,this.x=null,this.y=null,this.userPlaced=!1,this.inside=!0;
}return t}();t.Icon=p;var f=function(){function t(t,e){this.id=null,
this.pie=null,this.data=null,this.index=0,this.value=0,this.percent=null,
this.fraction=0,this.cutoutDistance=0,this.selectDistance=15,
this.selection=0,this.brightness=1,this.expandable=!0,this.selected=!1,
this.active=!1,this.removed=!1,this.icon=null,this.iconOffset=null,
this.url=null,this.urlTarget=null,this.userPlaced=!1,this.inside=!0,
this.x=0,this.y=0,this.originalId=null,this.currentCutoutDistance=null,
this.currentFraction=null,this.currentInsideLabel=null,this.currentLabel=null,
this.currentIcon=null,this.currentLineColor=null,this.currentFillColor=null,
this.targetFillColor=null,this.targetLineColor=null,this._resetLabelText=!1,
this._label={textStyle:{}},this._insideLabel={textStyle:{}},this.lineColor=null,
this.fillColor=null,this.fillColor2=null,this.lineWidth=1,this.lineDash=null,
this.lineBrightness=0,this._animatorF=null,this._animatorLineColor=null,
this._animatorFillColor=null,this._animatorCutout=null,this._renderParams=null,
this.index=e,this.pie=t}return Object.defineProperty(t.prototype,"label",{
get:function(){return this._label},set:function(t){d.Helpers.isObjectOrArray(t)?this._label=t:(d.Helpers.warn("Slice.label should no longer be set to the text value - instead use Slice.label.text."),
this._label.text=t?""+t:null,this._resetLabelText=!1)},enumerable:!0,
configurable:!0}),Object.defineProperty(t.prototype,"insideLabel",{
get:function(){return this._insideLabel},set:function(t){d.Helpers.isObjectOrArray(t)?this._insideLabel=t:(d.Helpers.warn("Slice.insideLabel should no longer be set to the text value - instead use Slice.insideLabel.text."),
this._insideLabel.text=t?""+t:null,this._resetLabelText&&(this._resetLabelText=!1,
this._label.text=null))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{
get:function(){return d.Helpers.warn("Slice.labelStyle is deprecated - use Slice.label instead."),
this._label},set:function(t){d.Helpers.warn("Slice.labelStyle is deprecated - use Slice.label instead."),
t&&(t.text||(t.text=this._label.text),d.Helpers.extendDeep(this._label,t));
},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"insideLabelStyle",{
get:function(){return d.Helpers.warn("Slice.insideLabelStyle is deprecated - use Slice.insideLabel instead."),
this._insideLabel},set:function(t){d.Helpers.warn("Slice.insideLabelStyle is deprecated - use Slice.insideLabel instead."),
t&&(t.text||(t.text=this._insideLabel.text),d.Helpers.extendDeep(this._insideLabel,t));
},enumerable:!0,configurable:!0}),t}();t.Slice=f;var g=function(){
function t(){this.id=null,this.data=null,this.total=1,this.parentSlice=null,
this.othersSlice=null,this.previousSlice=null,this.slices=[],
this.allSlices=[],this.offset=0,this.count=0,this.background=!1,
this.activeSliceId=null,this.brightness=1,this.loading=!1,this.scrollOffset=0,
this.fillColor=null,this.x=0,this.y=0,this.startAngle=0,this.endAngle=0,
this.rotationSpeed=0,this.currentlyRotating=!1,this.currentStartAngle=null,
this.currentEndAngle=null,this.currentRadius=0,this.innerRadius=0,
this.radius=0,this.currentInnerRadius=0,this.colorDistribution=null,
this.sliceColors=null,this.removed=!1,this.visibleFraction=1,
this.removeTime=null,this._animatorA0=null,this._animatorA1=null,
this._animatorR0=null,this._animatorR1=null}return t.prototype.getActiveSlice=function(){
if(!this.activeSliceId)return null;for(var t=0;t<this.slices.length;t++){
var e=this.slices[t];if(e.id===this.activeSliceId)return e}return null;
},t}();t.Pie=g;var m=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.radius=100,e.innerRadius=0,e.currentRadius=null,e.currentInnerRadius=null,
e.pies=[],e.stack=[],e.selectionIds=[],e.hoverBack=!1,e.hoverSlice=null,
e.hoverLabel=null,e.hoverPie=null,e.view=null,e.selection=[],
e.pendingAction=null,e.pendingOffset=null,e}return n(e,t),e.prototype.addPie=function(t){
return this.pies.push(t),this.stack.push(t),t},e.prototype.removePie=function(t){
if(null!==t){t.removed=!0,t.removeTime=null,d.Helpers.removeFromArray(this.stack,t);
for(var e=0;e<this.selection.length;){var i=this.selection[e];
i.pie===t?d.Helpers.removeFromArray(this.selection,i):e++}}},
e.prototype.deletePie=function(t){return d.Helpers.removeFromArray(this.pies,t),
d.Helpers.removeFromArray(this.stack,t)},e.prototype.length=function(){
return this.stack.length},e.prototype.peek=function(){return 0===this.stack.length?null:this.stack[this.stack.length-1];
},e.prototype.push=function(t,e){void 0===e&&(e=null);var i=this.peek();
if(i&&!e)for(var n=0;n<i.slices.length;n++){var r=i.slices[n];
if(r.id===t.id){e=r;break}}if(e){t.parentSlice=e;var s=e.pie,a=this.getSliceAngles(e);
t.currentStartAngle=a.a0,t.currentEndAngle=a.a1,t.currentRadius=s.currentRadius,
t.currentInnerRadius=s.currentInnerRadius,i.activeSliceId=e.id;
for(var n=0;n<t.allSlices.length;n++){var r=t.allSlices[n];r.currentFillColor=e.currentFillColor,
r.currentLineColor=e.currentLineColor}}else i&&(i.activeSliceId=null);
return i&&(i.background=!0),this.addPie(t)},e.prototype.pop=function(){
if(0!==this.stack.length){this.removePie(this.peek());var t=this.peek();
t&&(t.background=!1,t.brightness=1)}},e.prototype.getParent=function(t){
for(var e=null,i=0;i<this.stack.length;i++){var n=this.stack[i];
if(n===t)return e;e=n}return null},e.prototype.getChild=function(t){
for(var e=null,i=0;i<this.stack.length;i++){var n=this.stack[i];
if(e===t)return n;e=n}return null},e.prototype.updateOnPieChanged=function(t){
var e=this.getParent(t),i=this.getChild(t);if(e&&!t.parentSlice)for(var n=0;n<e.slices.length;n++){
var r=e.slices[n];if(r.id===t.id){t.parentSlice=r,e.activeSliceId=r.id;
break}}if(i&&!i.parentSlice)for(var n=0;n<t.slices.length;n++){
var r=t.slices[n];if(r.id===i.id){i.parentSlice=r,t.activeSliceId=r.id;
break}}},e.prototype.findPieAt=function(t,e,i){return this.view.findPieAt(t,e,i);
},e.prototype.findSliceAt=function(t,e,i,n){return this.view.findSliceAt(t,e,i,n);
},e.prototype.findLabelAt=function(t,e,i){return this.view.findLabelAt(t,e,i);
},e.prototype.getSliceAngles=function(t){for(var e=0,i=t.pie,n=0,r=0;r<i.allSlices.length;r++){
var s=i.allSlices[r];if(n=e,e+=s.currentFraction,s.id===t.id)break;
}var a=i.currentEndAngle-i.currentStartAngle,o=i.currentStartAngle;
return{a0:o+a*n,a1:o+a*e}},e.prototype.getSliceTargetAngles=function(t){
for(var e=0,i=t.pie,n=0,r=0;r<i.allSlices.length;r++){var s=i.allSlices[r];
if(n=e,e+=s.currentFraction,s.id===t.id)break}var a=i.currentEndAngle-i.currentStartAngle,o=i.currentStartAngle;
return{a0:o+a*n,a1:o+a*e}},e}(d.Scene);t.Scene=m;var v=function(t){
function e(i){var n=t.call(this,d.SettingsMapping.PieChartSettings)||this;
return n.theme=e.FlatTheme,n.data=[],n.legend=new o,n.navigation={
initialDrilldown:[""],initialOffset:0},n.pie={radius:null,adaptiveRadius:!0,
outerMargin:1,margin:2,centerMargin:5,showInnerPiesExport:!0,
showInnerPies:!0,innerRadius:.3,innerRadiusWhenDrilldown:.2,startAngle:-Math.PI/2,
endAngle:1.5*Math.PI,rotationSpeed:0,theme:"flat",depth:0,x:null,
y:null,style:{fillColor:"transparent",sliceColors:["#2fc32f","#b0dc0b","#eab404","#de672c","#ec2e2e","#d5429b","#6f52b8","#1c7cd5","#56b9f7","#0ae8eb"],
colorDistribution:"list",brightness:1},noDataStyle:{fillColor:"#ddd"
},backgroundStyle:{},backgroundHoveredStyle:{brightness:.7},styleFunction:null
},n.slice={margin:2,minFraction:0,style:{lineBrightness:0,brightness:1,
lineWidth:1,label:{backgroundStyle:null,textStyle:{fillColor:"#000",
font:"12px Arial"},lineSpacing:.2,margin:4,padding:0,borderRadius:999,
text:null},insideLabel:{textStyle:{fillColor:"#fff",font:"12px Arial"
},lineSpacing:.2,margin:4,padding:0,borderRadius:0,text:null}
},hoverStyle:{brightness:1.2,lineBrightness:2,lineWidth:.35},
selectedStyle:null,backgroundStyle:{fillColor:"#e2e2e2",fillColor2:"#e0e0e0"
},backgroundActiveStyle:{brightness:1.3},othersStyle:{fillColor:"#ccc",
lineDecoration:"zigzag"},previousStyle:{fillColor:"#ccc",lineDecoration:"zigzag"
},connectorStyle:{lineColor:"#333",lineWidth:1},expandableMarkStyle:{
lineWidth:1,lineColor:"rgba(255,255,255,0.8)",distance:4,lineDash:null
},styleFunction:null},n.filters={sliceFilter:null,allowZeroValues:!1
},n.labels=new y,n.icons={sizeExtent:[16,64],placement:"auto",
autohideWhenTooSmall:!0},n.advanced=new x,n.interaction=new C,
n.info={enabled:!0,contentsFunction:null},n.events=new S,n.toolbar=new d.SettingsToolbar((!1),[new d.SettingsToolbarItem("back"),new d.SettingsToolbarItem("export"),new d.SettingsToolbarItem("zoomOut"),new d.SettingsToolbarItem("fullscreen")]),
n.localization=new b,n.toolbar.zoomOut=!1,n.apply(i),n._initializing=!1,
n}return n(e,t),e.prototype.apply=function(e){this.applyCompatibility(e,[{
from:"slice.labelStyle",to:"slice.style.label"},{from:"slice.insideLabelStyle",
to:"slice.style.insideLabel"},{from:"labels.connectorStyle",to:"slice.connectorStyle"
},{from:"labels.textStyle",to:"slice.style.label.textStyle"},{
from:"labels.backgroundStyle",to:"slice.style.label.backgroundStyle"
},{from:"labels.insideTextStyle",to:"slice.style.insideLabel.textStyle"
},{from:"labels.padding",to:"slice.style.label.padding"},{from:"labels.borderRadius",
to:"slice.style.label.borderRadius"},{from:"area.initialPieId",
to:"navigation.initialDrilldown"},{from:"area.initialPieOffset",
to:"navigation.initialOffset"},{from:"area.initialAnimation",
to:"advanced.initialAnimation"},{from:"advanced.iconMinSize",
alternative:"icons.sizeExtent[0]"},{from:"advanced.pointer.dragSensitivity",
to:"interaction.selection.swipeSensitivity"}]);var i=t.prototype.apply.call(this,e);
return i},e}(d.Settings);v.FlatTheme={advanced:{themeCSSClass:"DVSL-flat",
assets:[]},pie:{theme:"flat",depth:0}},v.DarkTheme={advanced:{
themeCSSClass:"DVSL-dark",assets:[]},area:{style:{fillColor:"rgba(28,26,28,1)"
}},title:{margin:15,style:{fillColor:"#A8A7A8"}},pie:{theme:"flat",
depth:0,style:{sliceColors:["#32CD32","#36BEFF","#FBBD30","#EE3431","#894BBC","#0EC9AC","#524BBC","#0b83ea","#3ca20d","#BC438F"]
}},slice:{connectorStyle:{lineColor:"#4C4C4C"},style:{label:{
textStyle:{fillColor:"#A8A7A8"}}}},legend:{text:{fillColor:"#A8A7A8"
},marker:{lineColor:null}}},v.BevelTheme={advanced:{themeCSSClass:"DVSL-flat",
assets:[]},pie:{theme:"bevel",depth:0}},v.GradientTheme={advanced:{
themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"smoothy",depth:0
}},v.CanTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},
pie:{theme:"can",depth:10}},t.Settings=v;var y=function(){function t(){
this.enabled=!0,this.connectors=!0,this.connectorLength=20,this.angle=0,
this.insideLabel="append",this.insideLabelVisibilityFraction=.8,
this.interLabelSpacing=.6,this.placement="aligned"}return t}();
t.SettingsLabels=y;var S=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.onPieChange=null,e.onPieReadyStateChanged=null,e}return n(e,t),
e}(d.SettingsEvents);t.SettingsEvents=S;var b=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.othersLabel="Others",
e.previousLabel="Previous",e}return n(e,t),e}(d.SettingsLocalization);
t.SettingsLocalization=b;var C=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.mode="drilldown",e.coverCenter=!1,e.selection={enabled:!0,
tolerance:2,swipe:!1,swipeSensitivity:10,partialSwipe:!1,maxSwipeDistance:45
},e.animation={scrollDuration:500,hoverDuration:200},e.others={
enabled:!0,centerGoesToPrevious:!1,navigationFraction:.15,maxSlicesVisible:15,
minSlices:1,maxOthersFraction:.6,minSliceFraction:.01},e.scrolling={
enabled:!1},e}return n(e,t),e}(d.SettingsInteraction);t.SettingsInteraction=C;
var x=function(t){function e(){var e=t.call(this)||this;return e.iconMinSize=null,
e.initialAnimation=!0,e.renderQuality=1,e.backImage="builtin://piechart-back",
e.backImageBackground=null,e.backAlwaysVisible=!1,e.labelInsideTreshold=1,
e.builtinAssets["piechart-back"]=c.PiechartBack,e.pointer.noClickOnDoubleClick=!1,
e}return n(e,t),e}(d.SettingsAdvanced);t.SettingsAdvanced=x;var w=function(e){
function i(i){var n=e.call(this)||this;return n.animationOrder=1100,
n.paintOrder=10,n.updateOrder=1200,n.currentSlice=null,n.currentLabel=null,
n.currentPie=null,n.hoveringLegend=!1,n.draggedLabelSlice=null,
n.draggedLabel=null,n.hoverEvent=null,n.dragStartConditions={
angle:1/0,distance:1/0,slice:null,pie:null},n.isScrolling=!1,
n.px=0,n.py=0,n.chart=i,n.scene=i.scene,n.events=i.events,n.scrolling=new t.Scrolling(i),
n}return n(i,e),i.prototype.doAnimations=function(t){this.hoverEvent&&this.onPointerMove(this.hoverEvent);
},i.prototype.previewPointerDrag=function(t){this.hoverEvent=t;
},i.prototype.onPointerMove=function(t){this.hoverEvent=t,this.updateCurrentObject(t);
},i.prototype.onPointerOut=function(t){this.updateCurrentObject(t),
this.switchCurrentSlice(null,null,!1,t),this.hoverEvent=null},
i.prototype.onPointerDown=function(t){this.handlePointerDown(t),
this.scrolling.handlePointerDown(t)},i.prototype.handlePointerDown=function(t){
this.updateCurrentObject(t);var e=this.currentSlice;(e||this.currentPie)&&(t.consumed=!0),
this.px=t.x,this.py=t.y;var i=this.scene.settings.interaction.selection;
if(i.swipe||i.partialSwipe){var n=this.scene.settings.interaction,r=this.scene.pies[0],s=r&&n.others.centerGoesToPrevious&&r.previousSlice,a=n.coverCenter&&!s&&(!r||!r.background),o=this.scene.findSliceAt(t.x,t.y,n.selection.tolerance,a);
if(this.dragStartConditions.slice=null,this.dragStartConditions.pie=null,
this.dragStartConditions.distance=1/0,this.dragStartConditions.angle=0,
o&&null!==o.id){this.dragStartConditions.slice=e,this.dragStartConditions.pie=r;
var l=t.x-r.x,h=t.y-r.y,u=Math.sqrt(l*l+h*h);this.dragStartConditions.distance=u-e.currentCutoutDistance,
this.dragStartConditions.angle=180*Math.atan2(h,l)/Math.PI}}var c=this.scene.findLabelAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance);
this.draggedLabelSlice=c.slice,this.draggedLabel=c.label,this.draggedLabel=null,
this.draggedLabelSlice=null},i.prototype.onPointerDrag=function(t){
this.handlePointerDrag(t),this.scrolling.handlePointerDrag(t);
},i.prototype.handlePointerDrag=function(t){var e=this.scene.settings.interaction.selection;
if(!this.isScrolling){if(t.distance({x:this.px,y:this.py})<e.swipeSensitivity)return;
this.isScrolling=!0}if((e.swipe||e.partialSwipe)&&(this.currentSlice||this.dragStartConditions.slice)){
var i=this.dragStartConditions.slice;if(null!==i){var n=this.dragStartConditions.pie,r=this.dragStartConditions.distance,s=this.dragStartConditions.angle;
s===1/0&&(s=180*Math.atan2(t.y-n.y,t.x-n.x)/Math.PI);var a=t.x-n.x,o=t.y-n.y,l=180*Math.atan2(o,a)/Math.PI,h=Math.abs(s-l);
if(h<=90){var u=Math.sqrt(a*a+o*o);this.dragStartConditions.distance===1/0&&(r=u-i.currentCutoutDistance);
var c=this.scene.innerRadius>=i.selectDistance/2?-i.selectDistance/2:0,d=u*Math.cos(h*Math.PI/180),p=d-r>e.maxSwipeDistance,f=d-r>c;
i.userPlaced=!0,p?i.currentCutoutDistance=e.maxSwipeDistance:f&&(i.currentCutoutDistance=d-r>c?d-r|0:0),
i.selection=i.currentCutoutDistance>0?i.currentCutoutDistance/e.maxSwipeDistance*100:0,
t.changes.pie=!0}}}if(this.draggedLabel){var g=this.draggedLabel;
g.userPlaced=!0,g.x+=t.dx,g.y+=t.dy,t.consumed=!0,t.changes.pie=!0;
}},i.prototype.onPointerUp=function(t){this.handlePointerUp(t),
this.scrolling.handlePointerUp(t)},i.prototype.handlePointerUp=function(t){
this.isScrolling=!1;var e=this.scene.settings.interaction.selection;
if(e.swipe||e.partialSwipe){var i=this.dragStartConditions.slice;
if(i){var n=i.currentCutoutDistance>=i.selectDistance/2&&!i.selected,r=i.currentCutoutDistance<i.selectDistance/2&&i.selected;
e.swipe||i.currentCutoutDistance<=0&&e.partialSwipe?i.userPlaced=!1:e.partialSwipe&&(i.userPlaced=!0),
r||n?this.updateSelection(t,i,!1):i.currentCutoutDistance>=i.selectDistance/2&&i.selected&&this.setSelection([i],[],!0);
}}this.draggedLabel&&(this.draggedLabel=null,t.consumed=!0)},
i.prototype.onPointerCancel=function(t){this.onPointerUp(t)},
i.prototype.defaultClick=function(t,e){var i=this.chart,n=e.clickSlice,r=e.clickPie,s="drilldown"===i.settings.interaction.mode;
if(s||n&&(n===n.pie.othersSlice||n===n.pie.previousSlice))if(n)if(n.url)d.Helpers.openUrl(n.url,n.urlTarget),
t.preventDefault();else{var a=i.settings.interaction.selection.enabled;
a&&t.ctrlKey||!this.chart.navigator.expandSlice(n,"user")||t.preventDefault();
}else r&&"back"===e.clickOrigin&&(this.setSelection([],[],!1,"user"),
this.chart.navigator.goCenter("user"),t.preventDefault())},i.prototype.onClick=function(t){
this.onPointerMove(t);var e=this.createClickArgs(t);if(("legend"!==e.clickOrigin||this.chart.settings.legend.interaction.click)&&(this.chart.notifyClick(t,this.createClickArgs(t)),
(this.currentSlice||this.currentPie)&&(t.consumed=!0),t.defaultPrevented||this.updateSelection(t,this.currentSlice,!1)),
t.touch){var i=t.x;t.x=1e9,this.onPointerOut(t),t.x=i}},i.prototype.onLongPress=function(t){
this.updateSelection(t,this.currentSlice,!1)},i.prototype.onRightClick=function(t){
this.onPointerMove(t),(this.currentSlice||this.currentPie)&&(t.consumed=!0),
this.chart.notifyRightClick(t,this.createClickArgs(t)),t.defaultPrevented&&(t.consumed=!0);
},i.prototype.onDoubleClick=function(t){this.onPointerMove(t),
this.chart.notifyDoubleClick(t,this.createClickArgs(t)),t.consumed=!0;
},i.prototype.onTripleClick=function(t){this.onPointerMove(t),
this.chart.notifyTripleClick(t,this.createClickArgs(t)),t.consumed=!0;
},i.prototype.createClickArgs=function(t){var e=this.chart.createEventArguments(t,"user"),i=e.hoverSlice;
if(e.clickSlice=i,e.clickPie=i?i.pie:e.hoverPie,e.clickLabel=e.hoverLabel,
i){var n=e.clickLabel;this.hoveringLegend?e.clickOrigin="legend":n?n===i.currentInsideLabel?e.clickOrigin="insideLabel":e.clickOrigin="label":e.clickOrigin="slice";
}else this.scene.hoverBack&&(e.clickOrigin="back");return e},
i.prototype.updateSelection=function(t,e,i){var n=this.scene,r=n.settings.interaction;
if(r.selection.enabled){var s=t.shiftKey,a="toggle"===r.mode||t.ctrlKey;
e?s||i&&e.selected||a&&!e.selected?e.selected||(this.scene.selection.push(e),
e.selected=!0,this.setSelection(n.selection,n.selectionIds,!0)):a&&e.selected?(d.Helpers.removeFromArray(n.selection,e),
e.selected=!1,this.setSelection(n.selection,n.selectionIds,!0)):!e.selected||n.selection.length>1?this.setSelection([e]):this.setSelection([]):s||a||this.setSelection([]);
}},i.prototype.switchCurrentSlice=function(t,e,i,n){t===this.currentSlice&&e===this.currentLabel&&this.hoveringLegend===i||(n.changes.current=!0,
this.scene.hoverSlice&&(this.scene.hoverSlice.active=!1),this.scene.hoverPie&&(this.scene.hoverPie.active=!1),
this.scene.hoverSlice=t,this.scene.hoverPie=null,this.scene.hoverLabel=e,
this.currentSlice=t,this.currentLabel=e,this.currentPie=null,
this.hoveringLegend=i,t&&(t.active=!0),this.events.notifySceneChanges({
pie:!0}),this.chart.notifyHoverChanged(n,this.chart.createEventArguments(n,"user")));
},i.prototype.switchCurrentPie=function(t,e){t!==this.currentPie&&(e.changes.current=!0,
this.scene.hoverSlice&&(this.scene.hoverSlice.active=!1),this.scene.hoverPie&&(this.scene.hoverPie.active=!1),
this.scene.hoverPie=t,this.scene.hoverSlice=null,this.currentSlice=null,
this.currentPie=t,this.hoveringLegend=!1,t&&(t.active=!0),this.events.notifySceneChanges({
pie:!0}),this.chart.notifyHoverChanged(e,this.chart.createEventArguments(e,"user")));
},i.prototype.onSceneChange=function(t){t.changes.pie&&this.updateSelectionIds()&&(this.events.notifySceneChanges({
selection:!0}),this.chart.notifySelectionChanged(this.chart.createEventArguments(null,"api")));
},i.prototype.updateSelectionIds=function(){for(var t=[],e=0;e<this.scene.selectionIds.length;e++)for(var i=this.scene.selectionIds[e],n=0;n<this.scene.pies.length;n++){
var r=this.scene.pies[n];if(!r.background)for(var s=0;s<r.slices.length;s++){
var a=r.slices[s];if(a.id===i){t.push(a);break}}}if(t.length>0)for(var s=0;s<t.length;s++){
var a=t[s];a.selected||(a.selected=!0,this.scene.selection.push(a)),
d.Helpers.removeFromArray(this.scene.selectionIds,a.id)}return t.length>0;
},i.prototype.setSelection=function(t,e,i,n){void 0===e&&(e=[]),
void 0===i&&(i=!1),void 0===n&&(n="user"),this.scene.selectionIds=e;
var r;if(i)r=!0;else{for(var s=0;s<this.scene.selection.length;s++){
var a=this.scene.selection[s];t.indexOf(a)<0&&(a.selected=!1,
r=!0)}for(var s=0;s<t.length;s++){var a=t[s];a.selected||(a.selected=!0,
r=!0)}this.scene.selection=t}var o=this.updateSelectionIds();r=r||o,
r&&(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(this.chart.createEventArguments(null,n)));
},i.prototype.updateCurrentObject=function(t){var e,i=this.scene,n=i.settings.interaction,r=i.findPieAt(t.x,t.y,n.selection.tolerance),s=r&&n.others.centerGoesToPrevious&&r.previousSlice,a=n.coverCenter&&!s&&(!r||!r.background),o=i.findLabelAt(t.x,t.y,n.selection.tolerance),l=!1;
e=o.slice?o.slice:i.findSliceAt(t.x,t.y,n.selection.tolerance,a);
var h=this.chart.legend;!e&&h&&(e=h.getLastHoveredSlice(),e&&(l=!0)),
e&&(this.chart.settings.legend.interaction.click&&(t.cursor="pointer"),
t.hovered=!0),this.switchCurrentSlice(e,o.label,l,t),r&&(r.background||s)&&!e?(t.cursor="pointer",
t.hovered=!0,r.background?this.switchCurrentPie(r,t):(this.switchCurrentSlice(r.previousSlice,null,!1,t),
this.switchCurrentPie(null,t)),i.hoverBack=!0):(this.switchCurrentPie(null,t),
i.hoverBack=!1)},i}(d.ChartElement);t.Selection=w;var L=function(t){
function e(e){var i=t.call(this)||this;return i.animationOrder=100,
i.paintOrder=25,i.updateOrder=900,i.chart=e,i.scene=e.scene,i;
}return n(e,t),e.needStyleUpdate=function(t){return t.settings||t.pie||t.selection||t.style;
},e.prototype.onSceneChange=function(t){if(e.needStyleUpdate(t.changes))for(var i=0;i<this.scene.pies.length;i++){
var n=this.scene.pies[i];this.updatePie(n),this.computePieColors(n);
for(var r=0;r<n.allSlices.length;r++){var s=n.allSlices[r];this.updateSlice(s,r);
}}},e.prototype.updatePie=function(t){d.Helpers.extendStyleTo(this.scene.settings.pie.style,t),
0===t.slices.length&&d.Helpers.extendStyleTo(this.scene.settings.pie.noDataStyle,t),
t.background&&d.Helpers.extendStyleTo(this.scene.settings.pie.backgroundStyle,t),
this.scene.hoverPie===t&&d.Helpers.extendStyleTo(this.scene.settings.pie.backgroundHoveredStyle,t),
this.scene.settings.pie.styleFunction&&this.scene.settings.pie.styleFunction.call(this.chart.api,t,t.data);
},e.prototype.computePieColors=function(t){for(var e=t.sliceColors,i=t.colorDistribution,n=0,r=0;r<t.slices.length;r++){
var s=t.slices[r];s.removed||(n+=1)}if(1===n)return void(t.slices[0].fillColor=e[0]);
if(1===e.length){var a=e[0];e=[a,d.Colors.blend(a,"#fff",.8)];
}var o=e.length;if("gradient"===i)for(var l=0,r=0;r<t.slices.length;r++){
var s=t.slices[r];if(!s.removed){var h=e[l*(o-1)|0],u=e[l*(o-1)+1|0],c=l*(o-1);
c-=Math.floor(c);var a=d.Colors.blend(h,u,c,!1);s.fillColor=a,
l+=1/(n-.9)}}else if("gradientProportional"===i)for(var l=0,r=0;r<t.slices.length;r++){
var s=t.slices[r];if(!s.removed){var h=e[l*(o-1)|0],u=e[l*(o-1)+1|0],c=l*(o-1);
c-=Math.floor(c);var a=d.Colors.blend(h,u,c,!1);s.fillColor=a,
l+=s.fraction}}else for(var p=0;p<t.slices.length;p++){var s=t.slices[p];
if(!s.removed){var a=e[(t.offset+p)%o],f=p/o|0;1===f?a=d.Colors.derive(a,1.5,1):f>=2&&(a=d.Colors.derive(a,.5,1)),
s.fillColor=a}}},e.prototype.updateSlice=function(t,e){if(!t.removed){
var i=t.pie,n=this.scene.settings.slice,r=n.styleFunction;t.expandable=this.scene.mainData.canExpand(t.id),
d.Helpers.extendDeep(t,n.style),t===i.othersSlice?d.Helpers.extendDeep(t,n.othersStyle):t===i.previousSlice&&d.Helpers.extendDeep(t,n.previousStyle),
i.total>0?t.percent=t.value/i.total*100:t.percent=0;var s=t.label;
s.text?s.text+=" ":s.text="",t.data.name&&(s.text+=t.data.name+" "),
s.text+=t.percent.toFixed(1)+"%",t.cutoutDistance=t.selected?t.selectDistance:0,
this.scene.hoverSlice===t&&d.Helpers.extendDeep(t,n.hoverStyle),
t.data.style&&d.SettingsHelper.updateRecursive(t,t.data.style,d.SettingsMapping.PieChartSettingsSliceStyle,{}),
r&&(t._resetLabelText=!0,r.call(this.chart.api,t,t.data)),i.background&&(i.activeSliceId!==t.id?(d.Helpers.extendDeep(t,n.backgroundStyle),
e%2===1&&(t.fillColor=t.fillColor2)):d.Helpers.extendDeep(t,n.backgroundActiveStyle));
var a="rgba(255,255,255,0)";t.fillColor&&(a=t.fillColor);var o="rgba(255,255,255,0)";
t.lineColor?o=t.lineColor:t.lineBrightness&&(o=d.Colors.derive(a,t.lineBrightness,1));
var l=t.brightness*i.brightness;1!==l&&(a=d.Colors.derive(a,l,1),
o=d.Colors.derive(o,l,1),a.indexOf("255,255,255")!==-1&&o.indexOf("255,255,255")!==-1&&(o="rgb(200,200,200)")),
i.removed&&i.parentSlice?(t.targetFillColor=i.parentSlice.targetFillColor,
t.targetLineColor=i.parentSlice.targetLineColor):(t.targetFillColor=d.Colors.normalize(a),
t.targetLineColor=d.Colors.normalize(o))}},e}(d.ChartElement);
t.Styles=L;var T=function(t){function e(e){return t.call(this,e)||this;
}return n(e,t),e.prototype.createDom=function(e){t.prototype.createDom.call(this,e),
this.backgroundImage.className+=" DVSL-PC-background-image",this.backgroundImage.style.display="none";
},e.prototype.doAnimations=function(e){if(t.prototype.doAnimations.call(this,e),
this.scene.settings.area.style.image&&this.scene.pies.length>0){
var i=this.scene.currentInnerRadius-this.scene.settings.pie.margin,n=this.scene.pies[0].x,r=this.scene.pies[0].y;
(0!==n||0!==r)&&i>0?(this.backgroundImage.style.left=Math.round(n-i)+"px",
this.backgroundImage.style.top=Math.round(r-i)+"px",this.backgroundImage.style.width=Math.round(2*i)+"px",
this.backgroundImage.style.height=Math.round(2*i)+"px",this.backgroundImage.style.display=""):this.backgroundImage.style.display="none";
}},e}(d.DomLayer);t.DomLayer=T;var k=function(){function t(t){
this.pie=null,this.chart=t,this.scene=t.scene,this.events=t.events;
}return t.prototype.handlePointerDown=function(t){this.scene.settings.interaction.scrolling.enabled&&(this.pointer||(this.pointer=t.identifier,
this.pie=this.scene.peek()))},t.prototype.handlePointerDrag=function(t){
this.pie&&this.scene.settings.interaction.scrolling.enabled&&(t.consumed=!0,
t.identifier===this.pointer&&(this.pie.scrollOffset+=this.scene.view.getMovement(this.pie,t).dfraction,
this.updatePieScrolling(this.pie),t.changes.pie=!0))},t.prototype.handlePointerUp=function(t){
this.scene.settings.interaction.scrolling.enabled&&t.identifier===this.pointer&&(this.updatePieAfterScroll(this.pie),
this.pie=null,this.pointer=null)},t.prototype.updatePieScrolling=function(t){
if(t.scrollOffset>0&&0===t.offset&&(t.scrollOffset=0),0!==t.scrollOffset)return this.scene.view.updatePie(this.pie,!1);
},t.prototype.updatePieAfterScroll=function(t){return t.scrollOffset=0,
this.scene.view.updatePie(t,!0)},t}();t.Scrolling=k;var A=function(t){
function e(e){var i=t.call(this)||this;return i.animationOrder=250,
i.paintOrder=30,i.updateOrder=650,i.chart=e,i.scene=e.scene,i.events=e.events,
i}return n(e,t),e.prototype.onNewDataObject=function(){},e.prototype.setPie=function(t,e,i){
Array.isArray(t)||(t=[t]),this.scene.pendingAction=null;for(var n=0;this.scene.length()>t.length;)this.scene.pop(),
n++;for(;this.scene.length()>0&&this.scene.peek().id!==t[this.scene.length()-1];)this.scene.pop(),
n++;for(;this.scene.length()<t.length;){var r=new g;r.id=t[this.scene.length()],
r.offset=this.scene.length()+1===t.length?e:0,this.scene.push(r),
this.scene.view.updatePie(r),n++}var s=this.scene.peek();s&&s.offset!==e?(this.scroll(s,e),
n++):n&&s&&this.scene.view.updatePie(s),n&&(this.chart.notifyChartUpdate(i),
this.events.notifySceneChanges({pie:!0}))},e.prototype.getPie=function(){
return this.scene.stack.map(function(t){return t.id})},e.prototype.getPieOffset=function(){
return this.scene.peek().offset},e.prototype.goBack=function(t){
var e=this.scene.length();1===e?this.goPrevious(this.scene.peek(),t,0):e>1&&(this.scene.pop(),
this.scene.pendingAction=null,this.updateAndNotifyCurrent(t));
},e.prototype.goCenter=function(t){var e=this.scene.peek();e.offset>0&&this.scene.settings.interaction.others.centerGoesToPrevious?this.goPrevious(e,t):this.scene.length()>1&&(this.scene.pop(),
this.scene.pendingAction=null,this.updateAndNotifyCurrent(t));
},e.prototype.drillDown=function(t,e){this.scene.pendingAction=null;
var i=new g;i.id=t,i.offset=0,this.scene.push(i),this.updateAndNotifyCurrent(e);
},e.prototype.goOthers=function(t,e){var i=this.scene.view.scrollForward(t,t.offset+t.count);
i||(this.scene.pendingAction="forward",this.scene.pendingOffset=null),
this.events.notifySceneChanges({pie:!0}),this.chart.notifyChartUpdate(e);
},e.prototype.goPrevious=function(t,e,i){if(void 0===i&&(i=null),
!(t.offset<=0)){var n=this.scene.view.scrollBackward(t,i);n||(this.scene.pendingAction="back",
this.scene.pendingOffset=null),this.chart.notifyChartUpdate(e),
this.events.notifySceneChanges({pie:!0})}},e.prototype.scroll=function(t,e){
var i=!0;t.offset>e?(i=this.scene.view.scrollBackward(t,e),i||(this.scene.pendingAction="back",
this.scene.pendingOffset=e)):t.offset<e&&(i=this.scene.view.scrollForward(t,e),
i||(this.scene.pendingAction="forward",this.scene.pendingOffset=e));
},e.prototype.updateAndNotifyCurrent=function(t){var e=this.scene.peek();
this.scene.view.updatePie(e),this.chart.notifyChartUpdate(t),
this.events.notifySceneChanges({pie:!0})},e.prototype.expandSlice=function(t,e){
var i=t.pie;if(i!==this.scene.peek())return this.chart.setSelection([]),
this.goBack(e),!0;if(t===i.othersSlice)return this.chart.setSelection([]),
this.goOthers(i,e),!0;if(t===i.previousSlice)return this.chart.setSelection([]),
this.goPrevious(i,e),!0;var n=t.id;return!(!t.expandable||!this.scene.mainData.canExpand(n)||(this.chart.setSelection([]),
this.drillDown(n,e),0))},e.prototype.onSceneChange=function(t){
var e=!1,i=this.scene.peek();if(t.changes.data||t.changes.pieChartPieIds||t.changes.dataArrived)for(var n=t.changes.pieChartPieIds||Object.create(null),r=0;r<this.scene.stack.length;r++){
var s=this.scene.stack[r];if(n[s.id]||!s.data||s===i||t.changes.dataDeep){
if(s===i){var a=void 0;a="forward"===this.scene.pendingAction?this.scene.view.scrollForward(s,this.scene.pendingOffset):"back"===this.scene.pendingAction?this.scene.view.scrollBackward(s,this.scene.pendingOffset):this.scene.view.updatePie(s),
a&&(this.scene.pendingAction=null,this.scene.pendingOffset=null),
e=a}else this.scene.view.updatePie(s);t.changes.pie=!0}}e&&this.chart.notifyChartUpdate("data",!0);
},e}(d.Navigator);t.Navigator=A;var M=function(t){function e(e){
var i=t.call(this)||this;return i.currentSlice=null,i.animationOrder=500,
i.paintOrder=15,i.updateOrder=1100,i.activePointer=null,i.chart=e,
i.scene=e.scene,i.options=i.scene.settings,i.events=e.events,
i.popup=new d.InfoPopup(e),i}return n(e,t),e.prototype.previewPointerMove=function(t){
if(null===this.activePointer||this.activePointer===t.identifier){
var e=t.y,i=t.x;if(this.options.info.enabled&&(!this.chart.legend||!this.chart.legend.containsCoordinate(i,e))){
var n=this.scene.hoverSlice,r=this.scene.hoverPie;r&&!n&&(n=r.getActiveSlice()),
this.setCurrentObject(i,e,n)}}},e.prototype.previewRightClick=function(t){
t.touch&&(this.activePointer=t.identifier,this.previewPointerMove(t));
},e.prototype.previewPointerCancel=function(t){null!==this.activePointer&&this.activePointer===t.identifier&&(this.activePointer=null);
},e.prototype.previewPointerUp=function(t){null!==this.activePointer&&this.activePointer===t.identifier&&(this.activePointer=null);
},e.prototype.previewPointerDown=function(t){null===this.activePointer&&(this.activePointer=t.identifier,
this.hide())},e.prototype.previewPointerDrag=function(t){null!==this.activePointer&&this.activePointer!==t.identifier||this.hide();
},e.prototype.previewPointerOut=function(t){null!==this.activePointer&&this.activePointer!==t.identifier||t.touch||this.hide();
},e.prototype.hide=function(){this.activePointer=null,this.setCurrentObject(0,0,null);
},e.prototype.setCurrentObject=function(t,e,i){if(i){if(i!==this.currentSlice){
var n=this.buildContents(i);this.popup.show(t,t,e,n)}else this.popup.updateXY(t,t,e);
this.currentSlice=i}else this.currentSlice=null,this.popup.hide();
},e.prototype.buildContents=function(t){var e=this;if(this.options.info.contentsFunction){
var i=function(i){if(t===e.currentSlice)return e.popup.updateContents(i);
};return this.options.info.contentsFunction.call(this.chart.api,t.data,t,i);
}return t.label.text},e.prototype.remove=function(){this.popup.remove();
},e}(d.ChartElement);t.InfoPopup=M;var P=function(){function t(t){
this.prevTime=0,this.radiusAnimator=null,this.innerRadiusAnimator=null,
this.chart=t,this.scene=t.scene,this.events=t.events}return t.prototype.doAnimations=function(t){
var e=0;this.prevTime&&(e=Math.min(30,t.timeStamp-this.prevTime));
var i=this.scene.settings.interaction.animation.scrollDuration,n=this.scene.settings.interaction.animation.hoverDuration,r=t.timeStamp,s=[],a=[],o=!1;
if(this.scene.settings.pie.adaptiveRadius){this.innerRadiusAnimator||(this.innerRadiusAnimator=new d.Animator(0,this.scene.innerRadius,i,"<>",r),
this.radiusAnimator=new d.Animator(0,this.scene.radius,i,"<>",r));
var l=this.radiusAnimator.updateAndGet(this.scene.radius,r);this.scene.currentRadius=l.value;
var h=l.changes;l=this.innerRadiusAnimator.updateAndGet(this.scene.innerRadius,r),
this.scene.currentInnerRadius=l.value;var u=l.changes;o=o||h||u,
t.animating=t.animating||o}else this.scene.currentRadius===this.scene.radius&&this.scene.currentInnerRadius===this.scene.innerRadius||(o=!0,
this.scene.currentRadius=this.scene.radius,this.scene.currentInnerRadius=this.scene.innerRadius);
for(var c=0;c<this.scene.pies.length;c++){var p=this.scene.pies[c],f=t.changes.bounds||L.needStyleUpdate(t.changes),g=!1;
if(p.removed===!0&&null===p.removeTime&&(p.removeTime=r+i),p.removed&&(t.animating=!0,
g=p.removeTime<r),g)s.push(p);else{if(p._animatorA0||(f=!0,p._animatorA0=new d.Animator(p.currentStartAngle,p.startAngle,i,"<>",r),
p._animatorA1=new d.Animator(p.currentEndAngle,p.endAngle,i,"<>",r),
p._animatorR0=new d.Animator(p.currentInnerRadius,p.innerRadius,i,"<>",r),
p._animatorR1=new d.Animator(p.currentRadius,p.radius,i,"<>",r),
this.scene.settings.advanced.initialAnimation||(p._animatorA0.jump(p.startAngle),
p._animatorA1.jump(p.endAngle),p._animatorR0.jump(p.innerRadius),
p._animatorR1.jump(p.radius))),p.rotationSpeed){if(null===p.currentStartAngle)p.currentStartAngle=p.startAngle,
p.currentEndAngle=p.endAngle;else{var m=t.dtime*p.rotationSpeed/1e3;
p.currentStartAngle+=m,p.currentEndAngle+=m}p.currentlyRotating=!0,
f=!0}else if(p.currentlyRotating){var v=2*Math.PI;p._animatorA0.reset(p.currentStartAngle%v-v,p.startAngle,t.timeStamp),
p._animatorA1.reset(p.currentEndAngle%v,p.endAngle,t.timeStamp),
p.currentlyRotating=!1,f=!0}else{var y=p._animatorA0.updateAndGet(p.startAngle,r);
p.currentStartAngle=y.value,f=f||y.changes;var S=p._animatorA1.updateAndGet(p.endAngle,r);
p.currentEndAngle=S.value,f=f||S.changes}var b=p._animatorR1.updateAndGet(p.radius,r);
p.currentRadius=b.value,f=f||b.changes,b=p._animatorR0.updateAndGet(p.innerRadius,r),
p.currentInnerRadius=b.value,f=f||b.changes,p.currentInnerRadius=Math.min(p.currentInnerRadius,p.currentRadius);
for(var C=[],x=0,w=0;w<p.allSlices.length;w++){var T=p.allSlices[w];
T._animatorF||(f=!0,T._animatorF=new d.Animator(T.currentFraction,T.fraction,i,"<>",r));
var k=T._animatorF.updateAndGetFixed(T.fraction,r);T.currentFraction=k.value,
f=f||k.changes,T.removed&&0===T.currentFraction&&C.push(T),x+=T.currentFraction;
}if(Math.abs(x-1)>.001){x=1/x;for(var w=0;w<p.allSlices.length;w++){
var T=p.allSlices[w];T.currentFraction*=x}}if(C.length>0){f=!0;
for(var w=0;w<C.length;w++){var T=C[w];d.Helpers.removeFromArray(p.slices,T),
d.Helpers.removeFromArray(p.allSlices,T),T===p.othersSlice&&(p.othersSlice=null),
T===p.previousSlice&&(p.previousSlice=null)}}for(var w=0;w<p.allSlices.length;w++){
var T=p.allSlices[w];T._animatorLineColor||(f=!0,T._animatorLineColor=new d.ColorAnimator(T.currentLineColor,T.targetLineColor,n,"<>",r),
T._animatorFillColor=new d.ColorAnimator(T.currentFillColor,T.targetFillColor,n,"<>",r),
T._animatorCutout=new d.Animator(T.currentCutoutDistance,T.cutoutDistance,n,"<>",r));
var A=T._animatorLineColor,M=T._animatorFillColor,P=T._animatorCutout,I=A.updateAndGet(T.targetLineColor,r);
if(T.currentLineColor=I.value,f=f||I.changes,I=M.updateAndGet(T.targetFillColor,r),
T.currentFillColor=I.value,f=f||I.changes,T.userPlaced)P.jump(T.currentCutoutDistance);else{
var l=P.updateAndGet(T.cutoutDistance,r);T.currentCutoutDistance=l.value,
f=f||l.changes}}(f||o)&&a.push(p),t.animating=t.animating||f}
}for(var c=0;c<s.length;c++){var p=s[c];this.scene.deletePie(p);
}return this.prevTime=r,a},t}();t.Animations=P;var I=function(){
function t(t,e){this.view=e,this.chart=t,this.scene=t.scene,this.events=t.events;
}return t.prototype.placeStack=function(t,e){var i=this.scene,n=i.settings,r=n.pie,s=i.stack,a=r.depth,o=!1,l=i.height-2*a;
l=Math.max(2,l);var h=r.x,u=r.y;null===h?h=i.x0+i.width/2:h>=0&&h<=1&&(h=i.x0+i.width*h),
null===u?u=i.y0+l/2:u>=0&&u<=1&&(u=i.y0+i.height*u);var c=n.pie.startAngle,d=n.pie.endAngle,p=n.pie.rotationSpeed;
t.x===h&&t.y===u&&c===t.startAngle&&d===t.endAngle&&p===t.rotationSpeed||(o=!0,
t.x=h,t.y=u,t.startAngle=c,t.endAngle=d,t.rotationSpeed=p);var f=Math.min(l/2,i.width/2);
f-=n.pie.outerMargin;var g=n.pie.radius;if(g)g<=1&&(g=f*g);else if(n.labels.enabled&&n.pie.adaptiveRadius){
var m=this.computeDesiredRadiusFromLabels(t,e);m=Math.min(f,m),
m-=n.labels.connectorLength,m=Math.max(m,f/3),g=m}else g=f;var v=n.pie.innerRadius;
if(v<1&&(v=g*v),s.length>1){var y=n.pie.innerRadiusWhenDrilldown;
y<1&&(y=g*y),v=Math.max(v,y)}var S=0,b=0;g!==v&&(S=1/(g-v),b=-v*S),
i.radius===g&&i.innerRadius===v||(o=!0,i.radius=g,i.innerRadius=v),
t.radius=1,t.innerRadius=v*S+b;var C=s.length-1;if(C>0){v-=n.pie.margin;
for(var x=C,w=Math.max(0,Math.min(g-v,(v-n.pie.centerMargin)/x)),L=C-1;L>=0;L--)g=v,
v-=w,t=s[L],u+=a,t.x=h,t.y=u,t.radius=g*S+b,t.innerRadius=(v+n.pie.margin)*S+b,
t.brightness=.8-.8*(x-L-1)/x,t.startAngle=n.pie.startAngle,t.endAngle=n.pie.endAngle;
}for(C=0;C<i.pies.length;C++)if(t=i.pies[C],t.removed&&t.parentSlice){
var T=i.getSliceTargetAngles(t.parentSlice);t.startAngle=T.a0,
t.endAngle=T.a1}return o},t.prototype.computeDesiredRadiusFromLabels=function(t,e){
for(var i=this.scene.settings.slice.style.label,n=new D(e,1,0,100,0,100,i,this.scene.settings.labels),r=2*i.padding,s=n.lineHeight+r,a=0,o=0,l=0,h=0,u=0,c=t.startAngle,p=t.endAngle,f=p-c,g=t.startAngle,m=g,v=0;v<t.slices.length;v++){
var y=t.slices[v],S=m;u=Math.min(1,u+y.fraction),m=g+u*f;var b=Math.max(S,c),C=Math.min(m,p);
if(!(b>=p||C<=c)&&y.label.text){for(var x="",w=0,L=y.label.text.split(" ");w<L.length;w++){
var T=L[w];T.length>x.length&&(x=T)}var k=d.Graphics.getTextWidth(e,y.label.textStyle,x)+r,A=d.Graphics.getTextWidth(e,y.label.textStyle,y.label.text)+r,M=s*A*1.2,P=((b+C)/2+Math.PI/2)%(2*Math.PI)<=Math.PI;
P?(h+=M,o=Math.max(o,k)):(l+=M,a=Math.max(a,k))}}d.Graphics.clearShadow(e);
var I=Math.min(this.scene.width,this.scene.height),N=this.scene.width*I,F=Math.max(1,N-2*Math.max(l,h)*1.2),E=Math.sqrt(F/Math.PI),O=Math.max(a,o),R=this.scene.width/2-1.1*O;
return Math.min(E,R)},t.prototype.placeLabels=function(t,e){if(this.chart.assetsLoaded){
var i=this.scene.settings.icons,n=this.scene.settings.labels,r=this.scene.settings.slice,s=n.enabled,a=i.sizeExtent[0],o=i.sizeExtent[1],l=i.placement,h=i.autohideWhenTooSmall;
this.scene.settings.advanced.iconMinSize&&(a=this.scene.settings.advanced.iconMinSize);
for(var u=r.margin,c=t.x,f=t.y,g=this.scene.currentInnerRadius,m=this.scene.currentRadius-g,v=t.currentInnerRadius*m+g,y=t.currentRadius*m+g,S=0,b=t.currentStartAngle,C=t.currentEndAngle,x=C-b,w=t.currentStartAngle,L=this.scene.x0-c,T=L+this.scene.width,k=this.scene.y0-f,A=k+this.scene.height,M=new D(e,y,L,T,k,A,r.style.insideLabel,this.scene.settings.labels),P=new D(e,y,L,T,k,A,r.style.label,this.scene.settings.labels),I=[],N=[],F=w,E=0;E<t.allSlices.length;E++){
var O=t.allSlices[E],R=F;S=Math.min(1,S+O.currentFraction),F=w+S*x;
var B=Math.max(R,b),H=Math.min(F,C),z=v+O.currentCutoutDistance,U=y+O.currentCutoutDistance,_=(B+H)/2;
if(O.removed||t.background)O.currentLabel=null,O.currentInsideLabel=null;else{
if(O.insideLabel.text&&s){var G=O.insideLabel.text,j=void 0;j=O.currentInsideLabel?O.currentInsideLabel:O.currentInsideLabel=new d.Label(O.insideLabel,(!0)),
O.currentInsideLabel.text!==G&&(j.text=G);var W=M.fitLabelInSlice(e,j,z,U,B,H);
j.shouldBeVisible=j.visible="always"===n.insideLabel||W>=n.insideLabelVisibilityFraction;
}else O.currentInsideLabel=null;var V=O.label.text&&s?O.label.text:"";
if("append"===n.insideLabel&&O.insideLabel.text&&s&&!O.currentInsideLabel.userPlaced&&!O.currentInsideLabel.shouldBeVisible&&(V?(c=Math.cos(_),
V=c>0?O.insideLabel.text+", "+V:V+", "+O.insideLabel.text):V=O.insideLabel.text),
V){var j=null;j=O.currentLabel?O.currentLabel:O.currentLabel=new d.Label(O.label,(!0)),
O.currentLabel.text!==V&&(j.text=V),j.userPlaced||P.placeOutsideLabelInitial(j,_),
j.x>0?(j.style.align="left",N.push(j)):(j.style.align="right",
I.push(j))}else O.currentLabel=null}var Z=null;if(O.icon&&(!t.background||O.id===t.activeSliceId)){
var Y=M.fitBoxInSlice(1,1,z,U,B,H);c=Y.x,f=Y.y;var q=Y.prop;q-=u,
(!h||2*q>=a)&&(q=Math.max(Math.min(q,o/2),a/2),Z=new p,Z.hwidth=q,
Z.hheight=q,Z.inside=!0,O.iconOffset?(Z.x=0,Z.y=0,this.applyOffset(Z,O.iconOffset,z,U,B,H)):"center"===l?(Z.x=0,
Z.y=0,this.applyOffset(Z,[0,0,0,0],z,U,B,H)):(Z.x=c,Z.y=f))}O.currentIcon=Z;
}P.computeOutsideLabelLocations(e,I,N)}},t.prototype.applyOffset=function(t,e,i,n,r,s){
var a=0,o=0;e.length>=2&&(a=e[0],o=e[1]);var l=0,h=0;e.length>=4&&(l=e[2],
h=e[3]);var u=i+(n-i)*(l+1)/2,c=r+(s-r)*(h+1)/2;a+=Math.cos(c)*u,
o+=Math.sin(c)*u,t.x+=a,t.y+=o},t}();t.PieLayout=I;var D=function(t){
function e(e,i,n,r,s,a,o,l){var h=t.call(this)||this;return h.config=l,
h.bottom=a,h.top=s,h.right=r,h.left=n,h.margin=o.margin||0,h.rr=i+l.connectorLength,
h.lineHeight=d.Graphics.getTextHeight(e,o.textStyle.font),h.interLabelSpacing=Math.max(l.interLabelSpacing*h.lineHeight,h.margin),
h}return n(e,t),e.prototype.placeOutsideLabelInitial=function(t,e){
var i=this.rr*Math.cos(e),n=this.rr*Math.sin(e),r=1;n<this.top&&(r=Math.min(r,this.top/n)),
n>this.bottom&&(r=Math.min(r,this.bottom/n)),i<this.left&&(r=Math.min(r,this.left/i)),
i>this.right&&(r=Math.min(r,this.right/i)),t.x=i*r,t.y=n*r},e.prototype.computeOutsideLabelLocations=function(t,e,i){
var n=this.bottom-this.margin,r=this.top+this.margin,s=this.interLabelSpacing;
e.sort(function(t,e){return e.y-t.y}),i.sort(function(t,e){return t.y-e.y;
});for(var a=0;a<e.length;a++){var o=e[a];o.originX=o.x}for(var a=0;a<i.length;a++){
var o=i[a];o.originX=o.x}for(var l="wrap"===this.config.placement?[!1]:[!0,!1],h=0;h<l.length;h++){
for(var u=l[h],c=100,d=!1,p=0;p<2;p++){for(var f=0===p?e:i,a=0;a<f.length;a++){
var o=f[a];o.prop=this.fitLabelOutside(t,o,u)}for(var g=n-r,m=[],v=0,a=0;a<f.length;a++){
var o=f[a];if(o.visible){var y=2*o.hheight+s;v+y<g?(m.push(o),
v+=y):(o.visible=o.userPlaced,c=.5)}}var S=n,b=r;f===e?b+=v:S-=v;
for(var a=0;a<m.length;a++){var o=m[a];if(f===e?b-=2*o.hheight+s:S+=2*o.hheight+s,
!o.userPlaced&&(o.y+o.hheight>S||o.y-o.hheight<b)){o.y=Math.min(Math.max(o.y,b+o.hheight),S-o.hheight);
var C=this.fitLabelOutside(t,o,u);c=Math.min(C,c),d=d||o.rows&&o.rows.subLines[o.rows.subLines.length-1].row>0;
}else c=Math.min(c,o.prop);f===e?S=o.y-o.hheight-s:b=o.y+o.hheight+s;
}}if(c>=1||!d)break}},e.prototype.fitLabelOutside=function(t,e,i){
var n=this;void 0===i&&(i=!1),null==i&&(i=!1);var r=function(t){
return e.userPlaced?n.getOutsideMaxWidth(e.x,e.y,t,!1):n.placeOutsideMaxWidth(e.originX,e.y,t,i);
};return this.fitLabelInRect(t,e,r)},e.prototype.fitLabelInSlice=function(t,e,i,n,r,s){
var a,o=this,l=Math.cos(r),h=Math.cos(s),u=Math.min(l,h),c=Math.max(l,h);
a=u<0&&c<0||-u>2*c?"right":u>0&&c>0||2*-u<c?"left":"center";var d,p;
if(e.userPlaced)d=e.x,p=e.y;else{var f=void 0;f=2*i>=n?.5:.5+(n-2*i)/n/4;
var g=i+(n-i)*f,m=(r+s)/2,v=Math.cos(m),y=Math.sin(m);d=g*v,p=g*y;
}var S=p-this.rayIntersectsSlice(d,p,0,-1,i,n,r,s),b=p+this.rayIntersectsSlice(d,p,0,1,i,n,r,s),C=function(t,e){
if(!(n>0)||e<=S||e>=b)return[1e-5,1e-5];var a=o.rayIntersectsSlice(t,e,-1,0,i,n,r,s),l=o.rayIntersectsSlice(t,e,1,0,i,n,r,s);
return[a,l]};return this.fitLabelInLines(t,e,d,p,"center",a,C);
},e.prototype.placeOutsideMaxWidth=function(t,e,i,n){var r=this.rr,s=e-i/2,a=s+i;
if(s<this.top){var o=this.top-s;s+=o,a+=o}if(a>this.bottom){var o=this.bottom-a;
s+=o,a+=o}var l,h=this.left,u=this.right;return l=n?r:s>r||a<-r?0:s>0?Math.sqrt(r*r-s*s):a<0?Math.sqrt(r*r-a*a):r,
t>0?h=Math.max(l,t):u=Math.min(t,-l),{x:(h+u)/2,y:(s+a)/2,dx:1,
dy:0,width:u-h}},e.prototype.getOutsideMaxWidth=function(t,e,i,n){
var r,s=e-i/2,a=s+i,o=this.left,l=this.right,h=this.rr;r=n?h:s>h||a<-h?0:s>0?Math.sqrt(h*h-s*s):a<0?Math.sqrt(h*h-a*a):h,
t>0?o=r:l=-r;var u=Math.min(Math.abs(t-o),Math.abs(t-l));return{
x:t,y:e,dx:1,dy:0,width:2*u}},e.prototype.fitBoxInSlice=function(t,e,i,n,r,s){
var a=.5+(n-i)/n/4,o=i+(n-i)*a,l=(r+s)/2,h=Math.cos(l),u=Math.sin(l),c=o*h,d=o*u,p=t,f=e,g=this.rayIntersectsSlice(c,d,p,f,i,n,r,s),m=this.rayIntersectsSlice(c,d,-p,f,i,n,r,s),v=this.rayIntersectsSlice(c,d,-p,-f,i,n,r,s),y=this.rayIntersectsSlice(c,d,p,-f,i,n,r,s),S=Math.min(g,m,v,y);
return{x:c,y:d,prop:S}},e.prototype.rayIntersectsSlice=function(t,e,i,n,r,s,a,o){
var l=d.Geometry.rayIntersectsCircle(t,e,i,n,r);l=Math.min(l,d.Geometry.rayIntersectsCircle(t,e,i,n,s));
var h=Math.cos(a),u=Math.sin(a);return l=Math.min(l,d.Geometry.rayIntersectsSegment(t,e,i,n,r*h,r*u,s*h,s*u)),
h=Math.cos(o),u=Math.sin(o),l=Math.min(l,d.Geometry.rayIntersectsSegment(t,e,i,n,r*h,r*u,s*h,s*u));
},e}(d.LabelLayoutBase);t.LabelLayout=D,function(t){var e=function(){
function t(t){this.renderer=t,this.settings=this.renderer.settings;
}return t.prototype.paintPie=function(t,e,i,n,r,s,a,o){o.fillColor&&(t.beginPath(),
t.arc(e,i,r,s,a,!1),t.arc(e,i,n,a,s,!0),t.closePath(),d.Graphics.fill(t,o));
},t.prototype.paintExpandableHilights=function(t,e,i,n){var r=this.settings.slice.expandableMarkStyle.distance,s=this.settings.slice.expandableMarkStyle;
if(!(s.lineWidth<=0))for(var a=0;a<n.length;a++){var o=n[a];if(o.expandable){
var l=o._renderParams,h=e+o.x,u=i+o.y,c=l[0],p=l[1],f=Math.max((c+p)/2,p-r),g=l[2],m=l[3];
t.beginPath(),t.arc(h,u,f,g,m),d.Graphics.paint(t,s)}}},t.prototype.strokeSlice=function(t,e,i,n){
var r=n._renderParams;e+=n.x,i+=n.y;var s=r[0],a=r[1],o=r[2],l=r[3],h=r[4],u=r[5],c=a*Math.abs(l-o),d=a-s,p=Math.min(.1*Math.min(c,d),3);
s+a===-2&&(s=0,a=0),t.beginPath(),"zigzag"===n.lineDecoration?this.strokeZigZag(t,e,i,a,p,o,l):t.arc(e,i,a,o,l,!1),
h===u?t.lineTo(e+Math.cos(u)*s,i+Math.sin(h)*s):t.arc(e,i,s,u,h,!0),
t.closePath()},t.prototype.strokeZigZag=function(t,e,i,n,r,s,a){
var o=5/n,l=s;for(t.moveTo(e+n*Math.cos(s),i+n*Math.sin(s));l+o<a;)l+=o,
t.lineTo(e+(n+r)*Math.cos(l),i+(n+r)*Math.sin(l)),r=-r;t.lineTo(e+n*Math.cos(a),i+n*Math.sin(a));
},t.prototype.strokeAndPaint=function(t,e,i,n){var r=d.Graphics.beginStrokeAndFill(t,n);
this.strokeSlice(r,e,i,n),d.Graphics.endStrokeAndFill(t,r,n)},
t}();t.CommonBase=e;var i=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e.prototype.paintSlices=function(t,e,i,n){for(var r=0;r<n.length;r++){
var s=n[r];this.strokeAndPaint(t,e,i,s)}},e}(e);t.Flat=i;var r=function(t){
function e(){return t.apply(this,arguments)||this}return n(e,t),
e.prototype.paintPie=function(e,i,n,r,s,a,o,l){t.prototype.paintPie.call(this,e,i,n,r,s,a,o,l);
var h=this.settings.pie.depth;if(h>0&&l.allSlices.length>0){e.fillStyle="rgba(0,0,0,0.05)";
for(var u=0;u<[5,10,18].length;u++){var c=[5,10,18][u];e.beginPath(),
e.arc(i,n+c+h,s,a,o,!1),e.arc(i,n+c+h,r,o,a,!0),e.closePath(),
e.fill()}}},e.prototype.paintSlices=function(t,e,i,n){var r=this.settings.pie.depth,s=2*this.settings.advanced.renderQuality,a=1/s,o=r*s;
t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=1.5*r,t.shadowColor="black",
t.fillStyle="black";for(var l=0;l<n.length;l++){var h=n[l];this.strokeSlice(t,e,i+r,h),
t.fill()}t.shadowColor=null,t.shadowBlur=0,t.lineWidth=1;for(var u=0;u<=o;u++)for(var l=0;l<n.length;l++){
var h=n[l];h.fillColor instanceof CanvasGradient?d.Helpers.error("slice.fillColor cannot be gradient if `can` renderer is used"):(this.strokeSlice(t,e,i+r-u*a,h),
u>=o-1?t.strokeStyle=d.Colors.derive(h.fillColor,1.35,1):t.strokeStyle=d.Colors.derive(h.fillColor,.5+u/o*.2,1),
t.stroke())}var c=Math.PI;t.shadowBlur=r,t.shadowColor="rgba(0,0,0,0.1)",
t.fillStyle="black";for(var l=0;l<n.length;l++){var h=n[l],p=h._renderParams,f=p[4],g=p[5];
if(f!==g){for(;f>c;)f-=2*c,g-=2*c;f<0?g>0&&(g=Math.min(g,c),this.strokeInnerShadowSlice(t,e,i,h,0,g)&&t.fill()):g<c?this.strokeInnerShadowSlice(t,e,i,h,f,g)&&t.fill():(f<c&&this.strokeInnerShadowSlice(t,e,i,h,f,c)&&t.fill(),
g>2*c&&this.strokeInnerShadowSlice(t,e,i,h,2*c,g)&&t.fill())}
}for(var l=0;l<n.length;l++){var h=n[l];this.strokeAndPaint(t,e,i,h);
}},e.prototype.strokeInnerShadowSlice=function(t,e,i,n,r,s){var a=n._renderParams,o=a[0]+1,l=Math.min(a[1]-1,o+10);
return!(o>=a[1]||l<=a[0])&&(r+=1/o,s-=1/o,r>=s?void 0:(t.beginPath(),
t.arc(e,i,l,r,s,!1),t.arc(e,i,o,s,r,!0),t.closePath(),!0))},e;
}(e);t.Can=r;var s=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e.prototype.paintSlices=function(t,e,i,n){this.g=t;
for(var r=0;r<n.length;r++){var s=n[r];this.strokeAndPaint(t,e,i,s),
this.elegantGradient(e,i,s)}},e.prototype.getRadialGradient=function(t,e,i,n,r,s,a){
var o=Math.abs(Math.sin(a)),l=this.g.createRadialGradient(t,e,i,n,r,s);
return this.addColorStops(l,o,a),l},e.prototype.getLinearGradient=function(t,e,i,n,r,s,a,o){
var l=a-n,h=Math.sin(o),u=Math.cos(o),c=e+u*n,d=i+h*n,p=c+u*l,f=d+h*l,g=Math.abs(h),m=this.g.createLinearGradient(c,d,p,f);
return this.addColorStops(m,g,o),m},e.prototype.addColorStops=function(t,e,i){
var n="0,0,0",r="255,255,255",s=r,a=n;(i<=0||i>Math.PI)&&(s=n,
a=r);var o=.4*e,l=.2*e,h=.1*e,u=.3*e,c=.5*e;t.addColorStop(0,"rgba("+s+","+o.toFixed(3)+")"),
t.addColorStop(.1,"rgba("+s+","+l.toFixed(3)+")"),t.addColorStop(.1,"rgba("+s+","+h.toFixed(3)+")"),
t.addColorStop(.4,"rgba("+n+",0.1)"),t.addColorStop(.9,"rgba("+a+","+h.toFixed(3)+")"),
t.addColorStop(.95,"rgba("+a+","+u.toFixed(3)+")"),t.addColorStop(1,"rgba("+a+","+c.toFixed(3)+")");
},e.prototype.elegantGradient=function(t,e,i){for(var n=i._renderParams[0],r=i._renderParams[1],s=i._renderParams[2],a=i._renderParams[3],o=this.settings.advanced.renderQuality,l=Math.PI/Math.max(1,180*o),h=s;h<a;){
var u=Math.min(h+l,a);this.g.beginPath(),this.g.arc(t,e,r,h,u),
this.g.arc(t,e,n,u,h,!0),this.g.closePath(),d.Graphics.paint(this.g,{
fillColor:this.getRadialGradient(t,e,n,t,e,r,h)}),h=u}},e}(e);
t.Smoothy=s;var a=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e.prototype.paintSlices=function(t,e,i,n){this.g=t;
for(var r=0;r<n.length;r++){var s=n[r];this.strokeAndPaint(t,e,i,s),
this.smartGradient(e,i,s)}},e.prototype.getSmartGradient=function(t,e,i,n,r,s){
var a,o,l=0,h=0,u=0,c=0;"inside"===r?"top"===s?(u=n-i,c=e,a="rgba(0,0,0,0.3)",
o="rgba(0,0,0,0)"):(u=e,c=e+i,a="rgba(255,255,255,0)",o="rgba(255,255,255,0.3)"):"top"===s?(c=e,
a="rgba(255,255,255,0.3)",o="rgba(255,255,255,0)"):(u=e,c=e+n,
a="rgba(0,0,0,0)",o="rgba(0,0,0,0.3)");try{var d=this.g.createLinearGradient(l,u,h,c);
return d.addColorStop(0,a),d.addColorStop(1,o),d}catch(t){throw"Could not create linear gradient: "+t;
}},e.prototype.smartOuterShineTop=function(t,e,i,n,r,s,a,o){if(!(r>0&&s<Math.PI)){
s>0&&r<0&&(s=0,o=0),r>0&&r<Math.PI&&(r=Math.PI,a=Math.PI);var l={
_renderParams:[n-.1*(n-i),n,r,s,a,o,null,null],x:0,y:0,fillColor:this.getSmartGradient(t,e,i,n,"outside","top")
};this.strokeAndPaint(this.g,t,e,l)}},e.prototype.smartOuterShineBottom=function(t,e,i,n,r,s,a,o){
if(!(s<0||r>Math.PI)){r<0&&(r=0,a=0),s>Math.PI&&(s=Math.PI,o=Math.PI);
var l={_renderParams:[n-.1*(n-i),n,r,s,a,o,null,null],x:0,y:0,
fillColor:this.getSmartGradient(t,e,i,n,"outside","bottom")};this.strokeAndPaint(this.g,t,e,l);
}},e.prototype.smartInnerShineTop=function(t,e,i,n,r,s,a,o){if(!(r>0&&s<Math.PI)){
s>0&&r<0&&(s=0,o=0),r>0&&r<Math.PI&&(r=Math.PI,a=Math.PI);var l={
_renderParams:[i,i+.1*(n-i),r,s,a,o,null,null],x:0,y:0,fillColor:this.getSmartGradient(t,e,i,n,"inside","top")
};this.strokeAndPaint(this.g,t,e,l)}},e.prototype.smartInnerShineBottom=function(t,e,i,n,r,s,a,o){
if(!(s<0||r>Math.PI)){r<0&&(r=0,a=0),s>Math.PI&&(s=Math.PI,o=Math.PI);
var l={_renderParams:[i,i+.1*(n-i),r,s,a,o,null,null],x:0,y:0,
fillColor:this.getSmartGradient(t,e,i,n,"inside","bottom")};this.strokeAndPaint(this.g,t,e,l);
}},e.prototype.smartGradient=function(t,e,i){t+=i.x,e+=i.y;var n=i._renderParams[0],r=i._renderParams[1],s=i._renderParams[2],a=i._renderParams[3],o=i._renderParams[4],l=i._renderParams[5];
this.smartOuterShineTop(t,e,n,r,s,a,o,l),this.smartOuterShineBottom(t,e,n,r,s,a,o,l),
this.smartInnerShineTop(t,e,n,r,s,a,o,l),this.smartInnerShineBottom(t,e,n,r,s,a,o,l);
},e}(e);t.Bevel=a}(e=t.Renderers||(t.Renderers={}));var N=function(){
function t(t){this.renderer=null,this.chart=t,this.settings=t.settings,
this.scene=t.scene}return t.prototype.onSceneChange=function(t){
t.changes.settings&&this.buildSeries()},t.prototype.buildSeries=function(){
var t=this.settings.pie.theme,i=t.charAt(0).toUpperCase()+t.slice(1);
try{this.renderer=new e[i](this)}catch(e){throw"Renderer "+t+" is not available: "+e;
}},t.prototype.paintScene=function(t){for(var e=t.context,i=t.labelRenderer,n=t.isExport?this.settings.pie.showInnerPiesExport:this.settings.pie.showInnerPies,r=!1,s=0;s<this.scene.pies.length;s++){
var a=this.scene.pies[s];!n&&a.background||this.paintPie(e,i,a),
r=r||a.background}!t.isExport&&(this.scene.hoverBack||this.scene.settings.advanced.backAlwaysVisible&&r)&&this.paintBackArrow(t);
},t.prototype.paintBackArrow=function(t){var e=this.scene.assetsLoader.getAssetImage(this.scene.settings.advanced.backImage);
if(e){var i=this.scene.pies[this.scene.pies.length-1],n=.707106781186547,r=i.x,s=i.y,a=this.settings.pie.depth;
s+=(this.scene.pies.length-1)*a;var o=e.width/2,l=e.height/2,h=i.innerRadius*n,u=Math.min(o,Math.max(h,o/2))/o,c=Math.min(l,Math.max(h,l/2))/l,p=Math.min(u,c),f=t.context;
if(this.settings.advanced.backImageBackground){var g=this.settings.slice.margin,m=this.scene.currentInnerRadius,v=this.scene.currentRadius-m,y=Math.max(this.scene.pies[0].currentInnerRadius*v+m,g/2);
f.beginPath(),f.arc(r,s,y,0,2*Math.PI),f.closePath(),f.fillStyle=this.settings.advanced.backImageBackground,
f.fill()}f.globalAlpha=.5,d.Graphics.drawImageHighQuality(f,e,r-o*p,s-l*p,2*o*p,2*l*p),
f.globalAlpha=1}},t.prototype.paintPie=function(t,e,i){var n=this.settings.slice.margin;
i.allSlices.length<2&&(n=0);var r=this.scene.currentInnerRadius,s=this.scene.currentRadius-r,a=Math.max(i.currentInnerRadius*s+r,n/2),o=i.currentRadius*s+r,l=i.currentStartAngle,h=i.currentEndAngle,u=h-l,c=l;
if(o>0&&u>0){for(var p=a>0?1/a:0,f=1/o,g=n/2*p,m=n/2*f,v=[],y=0;y<i.allSlices.length;y++){
var S=i.allSlices[y],b=S.currentFraction*u;if(!(S.currentFraction<=0)){
var C=c;c+=b;var x=a+S.currentCutoutDistance,w=o+S.currentCutoutDistance,L=void 0,T=void 0;
if(b<=4*m){var k=(C+c)/2,A=b/4;L=k-A,T=k+A}else L=C+m,T=c-m;var M=C+g,P=c-g;
M>P&&(M=P=(M+P)/2),T<l||L>h||(L=Math.max(L,l),T=Math.min(T,h),
M=Math.max(M,l),P=Math.min(P,h),M>P&&(M=P=(M+P)/2),S._renderParams=[x,w,L,T,M,P,S.fillColor,S.lineColor],
S.fillColor=S.currentFillColor,S.lineColor=S.currentLineColor,
v.push(S))}}var I=i.x,D=i.y;this.renderer.paintPie(t,I,D,a,o,i.currentStartAngle,i.currentEndAngle,i),
this.renderer.paintSlices(t,I,D,v),i===this.scene.peek()&&this.renderer.paintExpandableHilights(t,I,D,v);
for(var N=0;N<v.length;N++){var F=v[N];F.fillColor=F._renderParams[6],
F.lineColor=F._renderParams[7]}if(!i.removed){d.Graphics.clearShadow(t);
for(var y=0;y<i.allSlices.length;y++){var S=i.allSlices[y];if(S.currentIcon){
var E=this.scene.assetsLoader.getAssetImage(S.icon);if(E){var O=S.currentIcon,R=I+O.x,B=D+O.y,H=Math.min(E.width/2,O.hwidth),z=Math.min(E.height/2,O.hheight);
d.Graphics.drawImageHighQuality(t,E,R-H,B-z,2*H,2*z)}}}c=l;for(var y=0;y<i.allSlices.length;y++){
var S=i.allSlices[y],b=S.currentFraction*u,C=c;c=C+b;var U=Math.max(C,l),_=Math.min(c,h),G=(U+_)/2,j=S===this.scene.hoverSlice,W=o+S.currentCutoutDistance;
S.currentInsideLabel&&S.currentInsideLabel.visible&&this.paintLabel(t,e,I,D,W,G,S.currentInsideLabel,j),
S.currentLabel&&S.currentLabel.visible&&this.paintLabel(t,e,I,D,W,G,S.currentLabel,j);
}}}},t.prototype.paintLabel=function(t,e,i,n,r,s,a,o){var l,h,u=this.scene.y0+3,c=u+this.scene.height-6,p=this.settings.labels,f=a.x,g=a.y,m=a.hwidth,v=r+p.connectorLength;
if(f<0?(l=f+m,h=g):f>=0&&(l=f-m,h=g),p.connectors&&l*l+h*h>r*r){
var y=Math.sin(s),S=Math.cos(s);t.beginPath();var b=i+r*S,C=n+r*y;
t.moveTo(b,C);var x=i+v*S,w=n+v*y;w=Math.min(Math.max(w,u),c),
l+=i,h+=n,h=Math.min(Math.max(h,u),c);var L=(r+v)/2,T=d.Geometry.rayIntersectsCircle(l-i,h-n,b-l,C-h,r),k=d.Geometry.lineTouchingCircle(l-i,h-n,x-i,w-n,v);
if(T<.9&&k){for(var A=k.x,M=k.y,P=Math.atan2(M,A);P-s>Math.PI;)P-=2*Math.PI;
for(;P-s<-Math.PI;)P+=2*Math.PI;var I=P-s;A+=i,M+=n,x=i+L*S,w=n+L*y,
w=Math.min(Math.max(w,u),c);var D=i+L*Math.cos(s+.2*I),N=n+L*Math.sin(s+.2*I);
N=Math.min(Math.max(N,u),c),t.quadraticCurveTo(x,w,D,N);var F=i+v*Math.cos(P),E=n+v*Math.sin(P);
E=Math.min(Math.max(E,u),c),d.Graphics.arcBetweenTwoPoints(t,i,n,L,D,N,F,E),
t.lineTo(l,h)}else t.quadraticCurveTo(x,w,l,h);var O=this.settings.slice.connectorStyle,R=O.lineWidth;
o&&(O.lineWidth+=2),d.Graphics.stroke(t,O),O.lineWidth=R}e.paint(t,i+a.x,n+a.y,1,a),
d.Graphics.clearShadow(t)},t}();t.PieRenderer=N;var F=function(){
function t(t){this.chart=t,this.scene=t.scene}return t.prototype.updatePie=function(t,e){
var i=this.getPieData(t);this.rectifyScrollOffsets(t,i);var n=this.getForwardCount(t.id,i,t.offset),r=n.numberOfSlices,s=n.isReady;
if(t.data=i,t.loading=!s,s){var a=this.buildSlices(t,t.offset,r),o=a.slices,l=a.othersSlice,h=a.previousSlice;
this.applyNewSlices(t,o,l,h,e)}return s},t.prototype.scrollForward=function(t,e){
var i=this.getPieData(t);t.data=i;var n,r=!0;if(null===e||void 0===e){
var s=this.getForwardCount(t.id,i,t.offset);n=s.numberOfSlices,
r=s.isReady,e=t.offset+n}if(r){var s=this.getForwardCount(t.id,i,e);
n=s.numberOfSlices,r=s.isReady}if(r){var a=this.buildSlices(t,e,n),o=a.slices,l=a.othersSlice,h=a.previousSlice;
if(t.othersSlice){var u=Math.min(o.length,Math.max(0,t.offset+t.count-e));
this.fitSlicesInOrigin(t.othersSlice,o.slice(u),l),l||(l=t.othersSlice,
l.fraction=0,l.currentFraction=0,l.removed=!0)}return t.offset=e,
this.applyNewSlices(t,o,l,h),t.loading=!1,!0}return t.loading=!0,
!1},t.prototype.scrollBackward=function(t,e){var i=this.getPieData(t);
t.data=i;var n=!0,r=0;if(i&&i.done&&t.offset>i.offset+i.values.length&&(t.offset=i.offset+i.values.length),
null==e){var s=this.getBackOffset(t.id,i,t.offset);if(e=s.newOffset,
n=s.isReady)do{e+=r;var a=this.getForwardCount(t.id,i,e);r=a.numberOfSlices,
n=a.isReady}while(n&&e+r<t.offset)}else{var a=this.getForwardCount(t.id,i,e);
r=a.numberOfSlices,n=a.isReady}if(n){var o=this.buildSlices(t,e,r),l=o.slices,h=o.othersSlice,u=o.previousSlice;
if(t.previousSlice){var c=Math.min(l.length,Math.max(0,t.offset-e));
this.fitSlicesInOrigin(t.previousSlice,l.slice(0,c),u),u||(u=t.previousSlice,
u.fraction=0,u.currentFraction=0,u.removed=!0)}return t.offset=e,
this.applyNewSlices(t,l,h,u),t.loading=!1,!0}return t.loading=!0,
!1},t.prototype.fitSlicesInOrigin=function(t,e,i){for(var n=Math.max(1e-6,t.currentFraction),r=0,s=0;s<e.length;s++){
var a=e[s];r+=a.fraction}i&&(r+=i.fraction);for(var o=n/r,s=0;s<e.length;s++){
var a=e[s];a.currentFraction=a.fraction*o,a.currentFillColor=t.currentFillColor,
a.currentLineColor=t.currentLineColor}i&&(i.currentFraction=i.fraction*o,
i.currentFillColor=t.currentFillColor,i.currentLineColor=t.currentLineColor);
},t.prototype.rectifyScrollOffsets=function(t,e){if(null==e)return void(t.scrollOffset=0);
var i,n=t.offset;if(t.scrollOffset<0){for(0===n&&(t.scrollOffset-=this.scene.settings.interaction.others.navigationFraction);t.scrollOffset<0&&n-e.offset<e.values.length;)i=e.values[n-e.offset],
t.scrollOffset+=i.fraction/t.visibleFraction,n++;var r=this.scene.settings.interaction.others.maxSlicesVisible+1;
n+r>e.values.length&&(t.scrollOffset=0,n=Math.max(e.values.length-r,0));
}else if(t.scrollOffset>0){var s=0;for(1===n&&(s=this.scene.settings.interaction.others.navigationFraction);n>0&&t.scrollOffset+s>e.values[n-e.offset-1].fraction/t.visibleFraction;)i=e.values[n-e.offset-1],
t.scrollOffset-=i.fraction/t.visibleFraction,n--;0===n&&(t.scrollOffset=0);
}t.offset=n},t.prototype.getForwardCount=function(t,e,i){if(!e||e.offset>i||e.offset+e.values.length<=i)return!e||!e.done||e.offset>i?(this.scene.mainData.requestPieData(t,i),
{numberOfSlices:0,isReady:!1}):{numberOfSlices:0,isReady:!0};var n=e.offset,r=n+e.values.length,s=this.scene.settings.interaction.others,a=s.minSliceFraction,o=s.maxOthersFraction,l=s.maxSlicesVisible;
if(!s.enabled||r-i<=s.minSlices)return e.done||this.scene.mainData.requestMorePieData(t),
{numberOfSlices:Math.max(r-i,0),isReady:e.done};for(var h=e.afterFraction,u=i;u<=r-1;u++)h+=e.values[u-n].fraction;
for(var c=0,d=0,p=e.done;c+i<r;){c++;var f=e.values[i+c-n-1].fraction;
d+=f,h-=f;var g=h/(h+d),m=Math.min(g,o),v=f/d*(1-m);if(c>l||v<a){
e.done&&c+i!==r&&c--,p=!0;break}}return p||this.scene.mainData.requestMorePieData(t),
{numberOfSlices:c,isReady:p}},t.prototype.getBackOffset=function(t,e,i){
if(0===i)return{newOffset:0,isReady:!0};if(!e||e.offset>=i||!e.done&&e.offset+e.values.length<i)return this.scene.mainData.requestPieData(t,Math.max(0,i-this.scene.mainData.dataSettings.itemsToLoad)),
{newOffset:0,isReady:!1};if(0===i)return{newOffset:0,isReady:!0
};for(var n=e.offset,r=n+e.values.length,s=this.scene.settings.interaction.others.minSliceFraction,a=this.scene.settings.interaction.others.maxOthersFraction,o=this.scene.settings.interaction.others.maxSlicesVisible,l=e.afterFraction,h=i;h<r;h++)l+=e.values[h-n].fraction;
for(var u=i,c=e.values[i-n-1].fraction,d=0,p=0===e.offset;u>e.offset;){
u--,d+=e.values[u-n].fraction;var f=i-u,g=Math.min(l/(l+d),a),m=c/d*(1-g);
if(0===u||f>o||m<s){0!==u&&u++,p=!0;break}}return p||this.scene.mainData.requestLessPieData(t),
{newOffset:u,isReady:p}},t.prototype.buildSlices=function(t,e,i){
var n=this.scene.settings,r=t.data;if(!r)throw new Error("Internal error - buildSlices");
for(var s=0,a=[],o=e;o<e+i;o++){var l=new f(t,o);l.data=r.values[o-r.offset],
l.id=l.data.__id,s+=l.data.fraction,a.push(l)}for(var h=n.interaction.others,u=r.afterFraction,c=r.afterSum,o=e+i;o<r.offset+r.values.length;o++){
var d=r.values[o-r.offset];c+=d.value,u+=d.fraction}var p;u>0&&(e>0||r.values.length>h.minSlices)?(p=new f(t,1/0),
p.data={value:c,fraction:u,name:n.localization.othersLabel}):p=null;
var g=null,m=0;if(e>0){for(var v=r.beforeSum,o=r.offset;o<=Math.min(e,r.offset+r.values.length)-1;o++)v+=Math.abs(r.values[o-r.offset].value);
g=new f(t,(-1)),m=h.navigationFraction,m+=t.scrollOffset,g.data={
value:v,name:n.localization.previousLabel},g.fraction=m}t.visibleFraction=(s+u)*(1+m/(1-m)),
p&&(u=Math.max(h.navigationFraction,u),u=Math.min(h.maxOthersFraction,u),
p.fraction=u);var y=(1-m-u)/s;s=1-m-u;for(var S=0;S<a.length;S++){
var b=a[S];b.fraction=b.data.fraction*y}var C=n.slice.minFraction;
if(C>0)for(var x=0;;){for(var w=0,L=0,S=0;S<a.length;S++){var b=a[S];
b.fraction<=C&&(w+=1,L+=b.fraction)}if(w===a.length){for(var T=s/a.length,S=0;S<a.length;S++){
var b=a[S];b.fraction=T}break}y=(s-w*C)/(s-L);for(var S=0;S<a.length;S++){
var b=a[S];b.fraction<=C?b.fraction=C:b.fraction=b.fraction*y;
}if(w===x)break;x=w}return{slices:a,othersSlice:p,previousSlice:g
}},t.prototype.applyNewSlices=function(t,e,i,n,r){void 0===r&&(r=!0);
var s=t.allSlices,a=0===s.length,o=[],l=[],h=0,u=0,c=s.length,p=e.length+(i?1:0)+(n?1:0);
for(n?(t.previousSlice?(t.previousSlice.removed=n.removed,t.previousSlice.data=n.data,
t.previousSlice.fraction=n.fraction,t.previousSlice.value=n.value,
r||this.jumpSliceToAnimationEnd(t.previousSlice)):(a||(n.currentFraction=0),
t.previousSlice=n),l.push(t.previousSlice)):t.previousSlice&&(t.previousSlice.removed=!0,
t.previousSlice.fraction=0,l.push(t.previousSlice));h<s.length||u<e.length;){
var f=s[h],g=e[u];!f||f.index!==1/0&&f.index!==-1?f&&g&&(f.originalId||f.id)===g.id?(f.removed=!1,
f.fraction=g.fraction,f.data=g.data,g.currentFraction&&r&&(f.currentFraction=g.currentFraction,
f._animatorF=null),r||this.jumpSliceToAnimationEnd(f),o.push(f),
l.push(f),h++,u++):!g||f&&(f.index<g.index||c>p)?(f.removed=!0,
f.fraction=0,f.originalId||(f.originalId=f.id),f.id=d.Helpers.getIdentifierStr(),
r&&l.push(f),h++):(g.currentFraction||a||(g.currentFraction=0),
r||this.jumpSliceToAnimationEnd(g),o.push(g),l.push(g),u++):h++;
}i?(t.othersSlice?(t.othersSlice.removed=i.removed,t.othersSlice.data=i.data,
t.othersSlice.fraction=i.fraction,t.othersSlice.value=i.value,
r||this.jumpSliceToAnimationEnd(t.othersSlice)):(a||(i.currentFraction=0),
t.othersSlice=i),l.push(t.othersSlice)):t.othersSlice&&(l.push(t.othersSlice),
t.othersSlice.removed=!0,t.othersSlice.fraction=0),!r&&t.othersSlice&&this.jumpSliceToAnimationEnd(t.othersSlice),
t.total=t.data?t.data.total:0,t.count=e.length,t.slices=o,t.allSlices=l;
for(var m=0;m<l.length;m++){var v=l[m];v.value=v.data.value,r||this.jumpSliceToAnimationEnd(v);
}this.scene.updateOnPieChanged(t),this.resetSelection()},t.prototype.resetSelection=function(){
for(var t=this.scene,e=0,i=t.selection;e<i.length;e++){var n=i[e];
t.selectionIds.push(n.id),n.selected=!1}return t.selection=[],
t.selectionIds.length>0},t.prototype.jumpSliceToAnimationEnd=function(t){
t._animatorF?t._animatorF.jump(t.fraction):t._animatorF=new d.Animator(t.fraction,t.fraction,this.scene.settings.interaction.animation.scrollDuration,"<>",0),
t.currentFraction=t.fraction},t.prototype.getPieData=function(t){
var e=this.scene.mainData.getPieData(t.id);if(!e)return null;var i=e.total;
if(i>0)for(var n=0;n<e.values.length;n++){var r=e.values[n];r.fraction=Math.max(1e-9,r.value/i);
}else{i=e.values.length;for(var n=0;n<e.values.length;n++){var r=e.values[n];
r.fraction=1/i}}return e.afterSum>0?e.afterFraction=e.afterSum/i:e.afterFraction=0,
e.beforeSum>0?e.beforeFraction=e.beforeSum/i:e.beforeFraction=0,
e},t}();t.PieBuilder=F;var E=function(t){function e(e){var i=t.call(this)||this;
return i.animationOrder=500,i.paintOrder=30,i.updateOrder=700,
i.chart=e,i.scene=e.scene,i.renderer=new N(e),i.animator=new P(e),
i.layout=new I(e,i),i.builder=new F(e),i}return n(e,t),e.prototype.updatePie=function(t,e){
return void 0===e&&(e=!0),this.builder.updatePie(t,e)},e.prototype.scrollForward=function(t,e){
return this.builder.scrollForward(t,e)},e.prototype.scrollBackward=function(t,e){
return this.builder.scrollBackward(t,e)},e.prototype.onSceneChange=function(t){
this.renderer.onSceneChange(t)},e.prototype.doAnimations=function(t){
var e=!1;if(t.changes.settings||t.changes.pie||t.changes.bounds||t.changes.assets){
var i=this.scene.peek();i&&this.chart.assetsLoaded&&(e=this.layout.placeStack(i,t.context));
}for(var n=this.animator.doAnimations(t),r=0;r<n.length;r++){
var i=n[r];this.layout.placeLabels(i,t.context)}(e||n)&&(t.changes.position=!0);
},e.prototype.paintScene=function(t){this.renderer.paintScene(t);
},e.prototype.getMovement=function(t,e){var i=e.x-e.dx-t.x,n=e.y-e.dy-t.y,r=e.x-t.x,s=e.y-t.y,a=d.Geometry.normalizeAngle(Math.atan2(n,i)),o=d.Geometry.normalizeAngle(Math.atan2(s,r)),l=d.Geometry.subtractAngle(o,a)/(t.currentEndAngle-t.currentStartAngle),h=Math.sqrt(i*i+n*n),u=Math.sqrt(r*r+s*s),c=u-h;
return{dfraction:l,doffset:c}},e.prototype.findPieAt=function(t,e,i){
for(var n=this.scene.currentInnerRadius,r=this.scene.currentRadius-n,s=this.scene.pies.length-1;s>=0;s--){
var a=this.scene.pies[s],o=a.x,l=a.y,h=a.currentInnerRadius*r+n,u=a.currentRadius*r+n,c=Math.max(0,h-i);
c=u+i;var d=c*c,p=t-o,f=e-l,g=p*p+f*f;if((a.background||1===this.scene.pies.length)&&g<=d)return a;
}return null},e.prototype.findSliceAt=function(t,e,i,n){for(var r=this.scene.currentInnerRadius,s=this.scene.currentRadius-r,a=this.scene.pies.length-1;a>=0;a--){
var o=this.scene.pies[a];if(!o.background){var l=o.x,h=o.y,u=n?0:o.currentInnerRadius*s+r,c=o.currentRadius*s+r,d=Math.max(0,u-i);
d=c+i;var p=t-l,f=e-h,g=p*p+f*f,m=Math.sqrt(g);p/=m,f/=m;for(var v=o.currentStartAngle,y=o.currentEndAngle-v,S=Math.cos(v),b=Math.sin(v),C=0;C<o.allSlices.length;C++){
var x=o.allSlices[C],w=S,L=b;if(v+=y*x.currentFraction,S=Math.cos(v),
b=Math.sin(v),m>=u+x.currentCutoutDistance&&m<=c+x.currentCutoutDistance){
var T=L*p-w*f,k=b*p-S*f;if(T<0&&k>0)return x;if(Math.abs(y*x.currentFraction)>Math.PI&&(T<0&&k<0||T>0&&k>0))return x;
}}}}return null},e.prototype.findLabelAt=function(t,e,i){for(var n=this.scene.pies.length-1;n>=0;n--)for(var r=this.scene.pies[n],s=t-r.x,a=e-r.y,o=0;o<r.allSlices.length;o++){
var l=r.allSlices[o];if(l.currentLabel){var h=l.currentLabel;if(h.visible&&h.x-h.hwidth<=s&&h.x+h.hwidth>=s&&h.y-h.hheight<=a&&h.y+h.hheight>=a)return{
slice:l,label:h}}if(l.currentInsideLabel){var h=l.currentInsideLabel;
if(h.visible&&h.x-h.hwidth<=s&&h.x+h.hwidth>=s&&h.y-h.hheight<=a&&h.y+h.hheight>=a)return{
slice:l,label:h}}}return{slice:null,label:null}},e}(d.ChartElement);
t.PieView=E;var O=function(t){function e(e,i){var n=t.call(this,new v(e),new m,i)||this;
return n.scene.loading=!1,n.selection=n.events.addElement(new w(n)),
n.scene.view=new E(n),n.popup=n.events.addElement(new M(n)),n.legend=n.events.addElement(new u(n)),
n.events.addElement(new L(n)),n.navigator=n.events.addElement(new A(n)),
n.events.addElement(n.scene.view),n.finalInitialize(),n.navigator.setPie(n.settings.navigation.initialDrilldown,n.settings.navigation.initialOffset,"init"),
n}return n(e,t),e.prototype.createDataObj=function(t){return new a(this,t,(!1));
},e.prototype.getData=function(e){return t.prototype.getData.call(this,e);
},e.prototype.createDomLayer=function(){return new T(this)},e.prototype.onSettingsChanged=function(t){
t.navigation&&(t.navigation.initialDrilldown||t.navigation.initialOffset)&&this.navigator.setPie(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset),
(t.labels||t.icons||t.pie||t.slice||t.interaction)&&this.events.notifySceneChanges({
pie:!0})},e.prototype.save=function(){var t=this.saveSelection();
return JSON.stringify({pie:this.navigator.getPie(),offset:this.navigator.getPieOffset(),
selection:t})},e.prototype.zoomOut=function(t,e){void 0===t&&(t=!0),
void 0===e&&(e="api"),this.setSelection([]),this.navigator.goBack(e);
},e.prototype.zoomOutPossible=function(){var t=this.scene;return t.length()>1||t.peek().offset>0;
},e.prototype.restore=function(t,e){if(t){var i=JSON.parse(t);
this.setPie(i.pie,i.offset,e),this.setSelection(i.selection)}
},e.prototype.updateFilters=function(){this.updateFilter(!0)},
e.prototype.updateFilter=function(t){void 0===t&&(t=!1),this.log("Update filter");
var e={};for(var i in this.settings._computedDataMap)e[i]=!0;this.events.notifySceneChanges({
data:e,dataDeep:t})},e.prototype.setSelection=function(t,e){void 0===e&&(e="api"),
this.log("Set selection");for(var i=[],n=[],r=0;r<t.length;r++){
var s=t[r];s instanceof f?i.push(s):d.Helpers.isString(s)?n.push(s):this.error("SetSelection: Selection contents must be Piechart_Slice object or string, got "+s);
}this.selection.setSelection(i,n,!1,e)},e.prototype.saveSelection=function(){
for(var t=this.scene.selectionIds.splice(0),e=0;e<this.scene.selection.length;e++){
var i=this.scene.selection[e];t.push(i.id)}return t},e.prototype.exportVisibleData=function(){
var t=this.scene.peek();return t?a.exportValues(t.data):[]},e.prototype.setPie=function(t,e,i,n){
void 0===i&&(i=!0),void 0===n&&(n="api"),this.log("Set pie"),
this.navigator.setPie(t,e,n)},e.prototype.setPieOffset=function(t,e,i){
void 0===e&&(e=!0),void 0===i&&(i="api"),this.log("Set pie offset"),
this.navigator.setPie(this.getPie(),t,i)},e.prototype.getPie=function(){
return this.navigator.getPie()},e.prototype.getActiveSlices=function(){
for(var t=[],e=0;e<this.scene.stack.length;e++){var i=this.scene.stack[e];
i.parentSlice&&t.push(i.parentSlice)}return t},e.prototype.getActivePies=function(){
return this.scene.stack},e.prototype.expandSlice=function(t,e){
return void 0===e&&(e="api"),this.navigator.expandSlice(t,e)},
e.prototype.getSliceDimensions=function(t,e){if(!Array.isArray(t))return this.error("getSliceDimensions: slice Id must be an array"),
null;if(t.length<2)return null;if(!e&&this.scene.stack.length+1<t.length)return null;
for(var i,n=0,r=0;r<this.scene.stack.length;r++){if(i=this.scene.stack[r],
i.id!==t[n])return null;if(n+=1,n===t.length-1)break}for(var s=t[n],a=0;a<i.slices.length;a++){
var o=i.slices[a];if(o.id===s){var l=o._renderParams;return l?{
centerX:i.x,centerY:i.y,r0:l[0],r1:l[1],a0:l[2],a1:l[3]}:null;
}}return null},e.prototype.saveNavigation=function(){var t=this.scene.peek();
return!t||t.loading?null:{pie:this.navigator.getPie(),offset:this.navigator.getPieOffset()
}},e.prototype.restoreNavigation=function(t,e,i){this.navigator.setPie(t.pie,t.offset,i);
},e.prototype.doChartUpdateNotify=function(e){t.prototype.doChartUpdateNotify.call(this,e);
var i=this.createEventArguments(null,e);this.dispatchEventParams("pieChange",i,null),
this.dispatchEventParams("pieReadyStateChanged",i,null)},e.prototype.createEventArguments=function(t,e){
var i=this.scene;if(!i)return{chart:this.api,origin:e};var n=i.peek();
return{chart:this.api,origin:e,pie:n,offset:n&&n.offset,count:n&&n.count,
selection:i.selection.slice(),slice:i.hoverSlice,hoverSlice:i.hoverSlice,
hoverPie:i.hoverPie,label:i.hoverLabel,hoverLabel:i.hoverLabel
}},e.prototype.defaultClick=function(t,e){this.selection.defaultClick(t,e);
},e.prototype.remove=function(){t.prototype.remove.call(this),
this.popup.remove()},e}(d.Impl);t.Impl=O}(a=i.PieChart||(i.PieChart={})),
function(t){var e=function(){function t(){this.enabled=!0,this.size=40,
this.defaultUnitWidth=50,this.maxUnitWidth=400,this.zoomOutUnitWidth=20,
this.labels={enabled:!0,angle:0,lineSpacing:.2,interLabelSpacing:.6,
textStyle:{fillColor:"#000",font:"12px Arial"},margin:4,padding:0,
aspectRatio:3,allowOverflow:!1},this.title={enabled:!1,aspectRatio:0,
align:"center",useFacetName:!0,textStyle:{font:"13px Arial",fillColor:"#000"
}}}return t}();t.SettingsFacetAxis=e;var i=function(){function t(t,e){
this.title=null,this.titleHeight=null,this.facet=e,this.chart=t,
this.scene=this.chart.scene,this.options=this.scene.settings.facetAxis,
this.currentItemWidth=1,this.currentItemHeight=1,this.panel=new d.ChartPanel,
this.panel.side="bottom",this.createTitle(),this.panel.packingOrder=100;
}return t.prototype.getPanel=function(){var t=this.options,e=this.panel;
return t.enabled&&t.size>0?(e.desiredHeight=t.size,e.visible=!0,
this.scene.bottomAxisSize=t.size):(e.desiredHeight=0,e.visible=!1,
this.scene.bottomAxisSize=0),e.enableClipping=!t.labels.allowOverflow,
e},t.prototype.createTitle=function(){this.options.title.enabled?this.title=new d.Label(this.options.title):(this.title=null,
this.titleHeight=0)},t.prototype.updateTitle=function(t,e){var i=this.title,n=this.options.title,r=this.facet.data?this.facet.data.name:"",s=(n.useFacetName?r||n.text:n.text)||"";
i&&(i.text=s,e.measure(t,i),s?this.titleHeight=2*((i.style.margin||0)+i.hheight):this.titleHeight=0);
},t.prototype.paintTitle=function(t,e){var i=this.title;if(i){
this.updateTitle(t,e);var n=this.titleHeight;if(n){var r=this.panel.left,s=this.panel.right,a=this.scene.y0,o=this.scene.height,l=a+o+this.scene.bottomAxisSize-n/2,h=void 0,u=i.style.align;
h=(r+s)/2,"left"===u&&(h=r+i.hwidth),"right"===u&&(h=s-i.hwidth),
e.paint(t,h,l,1,i)}}},t.prototype.paint=function(t,e,i,n){var r=this.options.labels;
if(n.length>1&&this.panel.visible&&r.enabled&&this.chart.assetsLoaded){
var s=t.context,a=t.labelRenderer,o=n[1]-n[0],l=this.panel.top,h=n[0];
this.paintTitle(s,a);var u=this.panel.bottom-this.panel.top-this.titleHeight,c=!1;
(Math.abs(1-this.currentItemWidth/o)>.01||Math.abs(1-this.currentItemHeight/u)>.01)&&(this.currentItemWidth=o,
this.currentItemHeight=u,c=!0),t.changes&&t.changes.settings&&(c=!0),
this.layout=new d.LabelLayoutBase;var p=this.facet.items,f=(r.angle||0)*Math.PI/180,g=Math.abs(Math.sin(f));
this.panel.pushClip(t);for(var m=0;m<p.length;m++){var v=n[m];
if(!(h>v)){var y=p[m],S=y.currentLabel,b=this.htmlDecodeLabel(y.label||y.data.name||r.text,this.layout,s);
if(y.currentLabel=null,b){(null===y.currentLabel||c||y.currentLabel.text!==b)&&(S=this.buildLabel(s,b,o,u),
y.currentLabel=S);var C=Math.max.apply(Math,S.rows.rowWidths);
if(h=v+S.x+C/2,0!==f){for(var x=1,w=g*(n[m+1]-n[m]);w<S.lineHeight+(r.margin||0)+(r.padding||0);)x++,
w=g*(n[m+x]-n[m]);h=n[m+x],void 0===n[m+x]&&(h=1/0)}a.paint(s,v+S.x,l+S.y,1,S);
}}}this.panel.popClip(t)}},t.prototype.htmlDecodeLabel=function(t,e,i){
if(null==t||0===t.length)return"";for(var n=e.styleTagParser2(i,t,{}),r="",s=0,a=n.words,o=0;o<a.length;o++){
var l=a[o];if(r+=l.word,o===a.length-1)break;n.breaks[s]===o+1?(r+=" ",
s++):l.spaceWidth&&(r+=" ")}return r},t.prototype.buildLabel=function(t,e,i,n){
var r=new d.Label(this.options.labels),s=r.style;r.text=e;var a=(s.angle||0)*Math.PI/180,o=s.align;
o||(o=a>0?"left":a<0?"right":"center",s.align=o);var l=function(t,e,r){
var s,o,l=0,h=1;0!==a?(l=Math.sin(a),h=Math.cos(a),o=r/Math.abs(l),
s=i/2):(s=e/2,o=2*t<=n?e:0);var u,c;return a>0?(u=s+o/2*h-2*t*h,
c=e/2*l):a<0?(u=s-o/2*h+2*t*h,c=-e/2*l):(u=s,c=t),{x:u,y:c,dx:h,
dy:l,width:o}};return this.layout.getFormatedText(t,r,i,n,l),
r},t}();t.FacetAxis=i;var r=function(){function t(){this.enabled=!0,
this.tolerance=4}return t}();t.SettingsInteractionSelection=r;
var s=function(){function t(){this.lineColor="rgba(0,0,0,0.5)",
this.lineWidth=2,this.fillColor="rgba(30,160,220,0.15)",this.behindSeries=!1;
}return t}();t.SettingsAreaStyleSelection=s;var o=function(t){
function e(e){var i=t.call(this)||this;return i.animationOrder=2e3,
i.paintOrder=15,i.updateOrder=1e3,i.scene=null,i.events=null,
i.currentItem=null,i.currentFacet=null,i.hoverEvent=null,i.chart=e,
i.scene=e.scene,i.events=e.events,i.settings=e.settings.interaction.selection,
i.styleSettings=e.settings.area.style.selection,i.paintOrder=i.styleSettings.behindSeries?3:15,
i}return n(e,t),e.prototype.paintScene=function(t){var e=this.scene,i=e.selection,n=!this.settings.enabled;
if(n||i&&i.length){var r=e.width,s=this.styleSettings,a=s.lineWidth,o=Math.round(e.x0),l=Math.round(e.y0),h=Math.round(l+e.height+e.bottomAxisSize),u=e.height+e.bottomAxisSize,c=[],p=e.activeFacet;
if(n)for(var f=0,g=p.items;f<g.length;f++){var m=g[f];m.selected&&c.push(m.index);
}else for(var v=0;v<i.length;v++){var y=i[v];y.facet===p&&c.push(y.index);
}c.sort(function(t,e){return t-e});for(var S,v=0;v<c.length;){
for(var b=c[v],C=b;++v<c.length&&(S=c[v])===C+1;)C=S;var x=e.getItemPlacement(p,b,C),w=Math.round(o+r*x.left),L=Math.round(o+r*x.right),T=t.context;
d.Graphics.pushClip(t,o,l,r,u),d.Graphics.rectStyle(T,s);var k=w+a%2/2,A=L+a%2/2;
T.fillRect(k+a/2,l,L-w-a,u),T.beginPath(),T.moveTo(k,l),T.lineTo(k,h),
T.moveTo(A,l),T.lineTo(A,h),d.Graphics.stroke(T,s),d.Graphics.popClip(t);
}}},e.prototype.doAnimations=function(t){this.hoverEvent&&this.onPointerMove(this.hoverEvent);
},e.prototype.previewPointerDrag=function(t){this.hoverEvent=t;
},e.prototype.onPointerMove=function(t){var e=this.chart,i=e.scene;
this.hoverEvent=t;var n=i.findItemAt(t.x,t.y);n&&(t.cursor="pointer");
var r=e.renderer.hitTest(t.x,t.y);if(e.legend)if(r)e.legend.notifyHoveredSeries(i.settings._computedSeries[r.seriesIndex]);else{
e.legend.notifyHoveredSeries(null);var s=e.legend.getLastHoveredSeries();
s&&(r={x0:null,y0:null,x1:null,y1:null,isMarker:!1,seriesIndex:i.settings._computedSeries.indexOf(s)
})}(!r!=!i.hoverSeriesItem||r&&(r.seriesIndex!==i.hoverSeriesItem.seriesIndex||r.x0!==i.hoverSeriesItem.x0))&&(i.hoverSeriesItem=r,
t.changes.hover=!0),this.switchCurrentItem(n,t)},e.prototype.onPointerOut=function(t){
this.hoverEvent=this.scene.hoverSeriesItem=null,this.events.notifySceneChanges({
selection:!0}),this.switchCurrentItem(null,t)},e.prototype.defaultClick=function(t,e){
var i=e.clickItem;i&&(i.url?(d.Helpers.openUrl(i.url,i.urlTarget),
t.preventDefault()):this.settings.enabled&&t.ctrlKey||"drilldown"!==this.chart.settings.interaction.mode||!this.chart.expandItem(i,"user")||t.preventDefault());
},e.prototype.getClickArgs=function(t){var e=this.scene.findItemAt(t.x,t.y,!0),i=this.chart.createEventArguments(t,"user",e);
return e&&(t.cursor="pointer",i.clickOrigin=this.scene.xyInBottom(t.x,t.y)?"label":"item"),
i},e.prototype.onClick=function(t){var e=this.getClickArgs(t);
t.consumed=!0,this.chart.notifyClick(t,e),t.defaultPrevented||this.updateSelection(t,e.clickItem);
},e.prototype.onLongPress=function(t){var e=this.scene.findItemAt(t.x,t.y);
this.updateSelection(t,e)},e.prototype.onRightClick=function(t){
var e=this.getClickArgs(t);this.chart.notifyRightClick(t,e),t.defaultPrevented&&(t.consumed=!0);
},e.prototype.onDoubleClick=function(t){var e=this.getClickArgs(t);
this.chart.notifyDoubleClick(t,e),t.consumed=!0},e.prototype.onTripleClick=function(t){
var e=this.getClickArgs(t);this.chart.notifyTripleClick(t,e),
t.consumed=!0},e.prototype.updateSelection=function(t,e){if(this.settings.enabled){
var i=this.scene,n=i.selection;if(t.ctrlKey||"toggle"===this.chart.settings.interaction.mode)e&&(e.selected=!e.selected,
e.selected?n.push(e):d.Helpers.removeFromArray(n,e),this.setSelection(n,i.selectionIds,!0));else if(t.shiftKey){
var r=i.activeFacet;if(e&&e.facet===r){for(var s=0,a=0;a<n.length;a++){
var o=n[a];if(o.facet===r){s=o.index;break}}var l=Math.min(e.index,s),h=Math.max(e.index,s);
n=new Array(h-l+1);for(var a=l;a<=h;a++)n[a-l]=r.items[a];this.setSelection(n);
}}else!e||e.selected&&1===n.length?this.setSelection([]):this.setSelection([e]);
}},e.prototype.switchCurrentItem=function(t,e){if(t!==this.currentItem){
var i=this.chart.createEventArguments(e,"user");e.changes.current=!0,
this.scene.hoverItem&&(this.scene.hoverItem.active=!1),this.scene.hoverItem=t,
this.currentItem=t,this.currentFacet=null,this.currentItem&&(this.scene.hoverItem.active=!0,
i.hoverItem=this.currentItem),this.events.notifySceneChanges({
items:!0}),this.chart.notifyHoverChanged(e,i)}},e.prototype.onSceneChange=function(t){
if(t.changes.items){var e=this.chart;this.updateSelectionIds()&&(this.events.notifySceneChanges({
selection:!0}),e.notifySelectionChanged(e.createEventArguments(null,"api")));
}},e.prototype.updateSelectionIds=function(){for(var t=this.scene,e=[],i=0,n=t.selectionIds;i<n.length;i++)for(var r=n[i],s=0,a=t.stack;s<a.length;s++)for(var o=a[s],l=0,h=o.items;l<h.length;l++){
var u=h[l];if(u.id===r){e.push(u);break}}if(0===e.length)return!1;
for(var c=0,p=e;c<p.length;c++){var f=p[c];f.selected||(f.selected=!0,
t.selection.push(f)),d.Helpers.removeFromArrayHasty(t.selectionIds,f.id);
}return!0},e.prototype.setSelection=function(t,e,i,n){void 0===e&&(e=[]),
void 0===i&&(i=!1),void 0===n&&(n="user"),this.scene.selectionIds=e;
var r=!1;if(i)r=!0;else{for(var s=0;s<this.scene.selection.length;s++){
var a=this.scene.selection[s];t.indexOf(a)<0&&(a.selected=!1,
r=!0)}for(var s=0;s<t.length;s++){var a=t[s];a.selected||(a.selected=!0,
r=!0)}this.scene.selection=t}var o=this.updateSelectionIds();r=r||o,
r&&(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(this.chart.createEventArguments(null,n)));
},e}(d.ChartElement);t.Selection=o;var h=function(t){function e(e){
var i=t.call(this,e)||this;return i.animationOrder=500,i.paintOrder=25,
i.updateOrder=800,i}return n(e,t),e.prototype.doAnimations=function(t){
(t.changes.position||t.changes.navigation)&&this.updatePopup(t);
},e.prototype.getPopupAreaMouseMoved=function(t,e){if(!this.scene.xyInChartOrBottom(t,e)||!this.scene.activeFacet)return null;
var i=this.scene.activeFacet,n=this.scene.xToPosition(t);if(isNaN(n))return null;
var r=Math.floor(n),s=Math.ceil(n);return r===s&&(s=r+1),r<i.offset||r>=i.items.length+i.offset?null:{
t0:r,t1:s}},e.prototype.buildHeader=function(t,e){var i=this.scene.activeFacet,n=i.items[t-i.offset],r=n.label||n.data.name||"";
return"<em></em><strong>"+r+"</strong>"},e}(l.InfoPopup);t.InfoPopup=h;
var u=function(){function t(){this.enabled=!0,this.enabledOnExport=!1,
this.size=28,this.style={fillColor:"rgba(255,255,255,0.5)",lineColor:"rgba(0,0,0,0.5)",
hoverFillColor:"rgba(255,255,255,0.9)",hoverLineColor:"rgba(0,0,0,0.9)"
}}return t}();t.SettingsScrollButtons=u;var c=function(t){function e(e){
var i=t.call(this)||this;i.paintOrder=75,i.chart=e,i.scene=e.scene,
i.settings=e.settings.scrollButtons,i.panels=[];for(var n=0;n<2;n++){
var r=new d.ChartPanel;r.packingOrder=115,r.side=1===n?"left":"right",
r.location="inside",r.align="center",i.panels.push(r)}return i;
}return n(e,t),e.prototype.onSceneChange=function(t){this.settings.enabled&&(this.activeFacet=this.chart.scene.activeFacet,
this.showLeft=Math.floor(this.activeFacet.from)>0,this.showRight=Math.ceil(this.activeFacet.to)<this.activeFacet.totalCount);
},e.prototype.getPanels=function(t){for(var e=0;e<2;e++){var i=this.panels[e];
i.visible=t?this.settings.enabledOnExport:this.settings.enabled,
i.desiredWidth=i.desiredHeight=this.settings.size}return this.panels;
},e.prototype.paintScene=function(t){if(this.panels[0].visible){
var e=this.settings.style,i=t.context;i.fillStyle=e.fillColor,
i.strokeStyle=e.lineColor;for(var n=this.settings.size,r=n/2,s=n/4,a=this.scene.y0+this.scene.height/2-n/2,o=0;o<this.panels.length;o++){
var l=this.panels[o],h=l.left;this.showRight&&"right"===l.side&&(this.rightActive&&(i.fillStyle=e.hoverFillColor,
i.strokeStyle=e.hoverLineColor),i.beginPath(),i.fillRect(h,a,n,n),
i.moveTo(h+r-s/2+2,a+s),i.lineTo(h+r+s-3,a+r),i.lineTo(h+r-s/2+2,a+n-s),
i.stroke()),this.showLeft&&"left"===l.side&&(this.leftActive&&(i.fillStyle=e.hoverFillColor,
i.strokeStyle=e.hoverLineColor),i.beginPath(),i.fillRect(h,a,n,n),
i.moveTo(h+r+s/2-2,a+s),i.lineTo(h+r-s+3,a+r),i.lineTo(h+r+s/2-2,a+n-s),
i.stroke()),i.fillStyle=e.fillColor,i.strokeStyle=e.lineColor;
}}},e.prototype.findItemAt=function(t,e,i){if(!this.panels[0].visible)return null;
for(var n=i.touch?10:0,r=0;r<2;r++){var s=this.panels[r];if(t>=s.left-n&&t<=s.right+n&&e>=s.top-n&&e<=s.bottom+n&&("left"===s.side&&this.showLeft||"right"===s.side&&this.showRight))return s.side;
}return null},e.prototype.onClick=function(t){if(this.panels[0].visible){
var e=d.Helpers.performanceNow(),i=this.findItemAt(t.x,t.y,t);
if(null!==i){var n=this.chart.scrolling,r=this.activeFacet,s=r.from,a=r.to,o=r.totalCount,l=a-s;
"right"===i&&(a+l>o?(a=a-l+(o-a),n.goToPosition(a,o,!0,e,!0)):n.goToPosition(a,a+l,!0,e,!0)),
"left"===i&&(s-l<0?n.goToPosition(0,l,!0,e,!0):n.goToPosition(s-l,s,!0,e,!0)),
t.consumed=!0}}},e.prototype.onPointerMove=function(t){var e=this.findItemAt(t.x,t.y,t);
null!==e?("left"===e&&(this.leftActive=!0),"right"===e&&(this.rightActive=!0),
t.changes.hover=!0,t.consumed=!0):(this.leftActive=!1,this.rightActive=!1);
},e}(d.ChartElement);t.ScrollButtons=c;var p="#A8A7A8",f=function(t){
function i(i){var n=t.call(this,d.SettingsMapping.FacetChartSettings)||this;
return n.area=new g,n.data=[],n.filters={sliceFilter:null,allowZeroValues:!0
},n.navigation={initialDrilldown:[""],initialOffset:0},n.items={
style:{label:null,expandable:!0},styleFunction:null},n.chartTypes={
columns:{type:"columns"},line:{type:"line"},candlestick:null},
n.facetAxis=new e,n.interaction=new y,n.toolbar=new v,n.legend=new l.SettingsLegend,
n.scrollButtons=new u,n.localization.toolbar.zoomoutTitle="Zoom-out to previous level",
n.apply(i),n._initializing=!1,n}return n(i,t),i.prototype.apply=function(e){
if(this.applyCompatibility(e,[{from:"area.initialPieId",to:"navigation.initialDrilldown"
},{from:"area.initialPieOffset",to:"navigation.initialOffset"
}]),e.series)for(var i=0;i<e.series.length;i++){var n=e.series[i];
n&&void 0!==n.styleFunction&&d.Helpers.error("Setting `series["+i+"].styleFunction` is no longer supported. Consider using `items.styleFunction` instead. See the example: https://zoomcharts.com/developers/en/facet-chart/examples/series/stacked-colored.html");
}return t.prototype.apply.call(this,e,S)},i}(l.Settings);f.DarkTheme={
advanced:{themeCSSClass:"DVSL-dark"},area:{style:{fillColor:"rgba(28,26,28,1)",
selection:{lineColor:"#838283"}}},title:{margin:15,style:{fillColor:p
}},valueAxisDefault:{style:{valueLabel:{textStyle:{fillColor:p
}},title:{textStyle:{fillColor:p}}}},facetAxis:{labels:{textStyle:{
fillColor:p}},title:{textStyle:{fillColor:p}}},legend:{text:{
fillColor:p},advanced:{disabledSeries:{textColor:"rgba(168,167,168,0.5)",
lineColor:"rgba(117,117,117,0.3)"}}}},t.Settings=f;var g=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.style=new m,
e}return n(e,t),e}(l.SettingsArea);t.SettingsArea=g;var m=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.selection=new s,
e}return n(e,t),e}(l.SettingsAreaStyle);t.SettingsAreaStyle=m;
var v=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.logScale=!0,e.zoomOut=!0,e.enabled=!0,e.items=[new d.SettingsToolbarItem("fullscreen","left"),new d.SettingsToolbarItem("back","left"),new d.SettingsToolbarItem("zoomOut","left"),new d.SettingsToolbarItem("logScale","right"),new d.SettingsToolbarItem("export","right")],
e}return n(e,t),e}(d.SettingsToolbar);t.SettingsToolbar=v;var y=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.selection=new r,
e.mode="drilldown",e.animation={scrollDuration:500},e}return n(e,t),
e}(l.SettingsInteraction);t.SettingsInteraction=y;var S=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.type="columns",
e.data=new b,e}return n(e,t),e.getMapping=function(t,e){if(t&&e.type&&t.type!==e.type)throw new Error("It is not possible to change the value of `type` property for an existing layer.");
switch(t?t.type:e.type){case"columns":case void 0:return d.SettingsMapping.FacetChartSettingsSeriesColumns;
case"line":return d.SettingsMapping.FacetChartSettingsSeriesLines;
default:throw new Error("The value '"+e.type+"' is not valid for the `type` property of a series. Valid values are: columns, line.");
}},e.createInstance=function(t,e){switch(e||t.type){case"columns":
case void 0:return new C;case"line":return new x;default:throw new Error("The value '"+(e||t.type)+"' is not valid for the `type` property of a series. Valid values are: columns, line.");
}},e}(l.SettingsSeries);t.SettingsSeries=S;var b=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.field=null,
e.valueFunction=null,e}return n(e,t),e}(l.SettingsSeriesData);
t.SettingsSeriesData=b;var C=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.style=new L,e.data=new b,e}return n(e,t),e}(l.SettingsSeriesColumns);
t.SettingsSeriesColumns=C;var x=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.data=new b,e.style=new w,e}return n(e,t),e}(l.SettingsSeriesLines);
t.SettingsSeriesLines=x;var w=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.markerStyleFunction=null,e}return n(e,t),e}(l.SettingsSeriesLinesStyle);
t.SettingsSeriesLinesStyle=w;var L=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.previewContents=!1,e.previewLineColor="rgba(255,255,255,.5)",
e}return n(e,t),e}(l.SettingsSeriesColumnsStyle);t.SettingsSeriesColumnsStyle=L;
var T=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e}(L);t.SettingsFacetStyle=T;var k=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.sortField=null,
e.dataFunction=null,e.preloaded=null,e}return n(e,t),e}(a.SettingsData);
t.SettingsData=k;var A=function(){function t(){this.id=null,this.data=null,
this.items=[],this.parentItem=null,this.activeItemId=null,this.offset=0,
this.count=0,this.totalCount=0,this.from=0,this.to=0,this.left=0,
this.right=1,this.opacity=1,this.loading=null,this.rebuild=!0;
}return t.prototype.getActiveItem=function(){if(!this.activeItemId)return null;
for(var t=0;t<this.items.length;t++){var e=this.items[t];if(e.id===this.activeItemId)return e;
}return null},t}();t.Facet=A;var M=function(){function t(t,e,i,n){
this.expandable=!0,this.selected=!1,this.active=!1,this.url=null,
this.urlTarget=null,this.values=[],this.innerFacet=null,this.label=null,
this.currentLabel=null,this.facet=t,this.id=e,this.index=i,this.data=n;
}return t}();t.Item=M;var P=function(){function t(t,e,i,n,r){
this.value=0,this.label=null,this.currentLabel=null,this.style=new T,
this.previewData=null,this.data=n,this.index=i,this.id=e,this.facet=t,
this.seriesId=r}return t}();t.ItemValue=P;var I=function(t){function e(){
var e=t.apply(this,arguments)||this;return e.data=null,e.stack=[],
e.activeFacet=null,e.hoverItem=null,e.selection=[],e.selectionIds=[],
e}return n(e,t),e.prototype.xToPosition=function(t){var e=this.activeFacet,i=this.x0+e.left*this.width,n=this.x0+e.right*this.width,r=e.from+(t-i)/(n-i)*(e.to-e.from);
return r},e.prototype.positionToX=function(t){var e=this.activeFacet,i=this.x0+e.left*this.width,n=this.x0+e.right*this.width;
return i+(t-e.from)*(n-i)/(e.to-e.from)},e.prototype.timeToX=function(t){
return this.positionToX(t)},e.prototype.xToTime=function(t){return this.xToPosition(t);
},e.prototype.length=function(){return this.stack.length},e.prototype.peek=function(){
return 0===this.stack.length?null:this.stack[this.stack.length-1];
},e.prototype.push=function(t,e){var i=this.peek();if(i&&!e)for(var n=0;n<i.items.length;n++){
var r=i.items[n];if(r.data.__id===t.id){e=r;break}}if(e){t.parentItem=e,
e.innerFacet=t;var s=this.getItemPlacement(e.facet,e.index);t.left=s.left,
t.right=s.right,i.activeItemId=e.id}else i&&(i.activeItemId=null);
this.stack.push(t),this.activeFacet=t},e.prototype.pop=function(){
if(this.stack.length>0){var t=this.stack.pop();t.parentItem&&(t.parentItem.facet.activeItemId=null);
}return this.stack.length>0?this.activeFacet=this.peek():this.activeFacet=null,
this.activeFacet},e.prototype.getParent=function(t){for(var e=null,i=0;i<this.stack.length;i++){
var n=this.stack[i];if(n===t)return e;e=n}return null},e.prototype.getChild=function(t){
for(var e=null,i=0;i<this.stack.length;i++){var n=this.stack[i];
if(e===t)return n;e=n}return null},e.prototype.updateLinks=function(t){
var e=this.getParent(t),i=this.getChild(t);if(e&&!t.parentItem)for(var n=0;n<e.items.length;n++){
var r=e.items[n];if(r.id===t.id){t.parentItem=r,e.activeItemId=r.id;
break}}if(i&&!i.parentItem)for(var n=0;n<t.items.length;n++){
var r=t.items[n];if(r.id===i.id){i.parentItem=r,t.activeItemId=r.id;
break}}},e.prototype.getItemPlacement=function(t,e,i){void 0===i&&(i=e);
var n=t.to-t.from,r=t.from,s=(e-r)/n,a=(i-r+1)/n;return{left:t.left+s*(t.right-t.left),
right:t.left+a*(t.right-t.left)}},e.prototype.getFacetPlacementFromItem=function(t,e,i){
var n=t.facet,r=t.index,s=r+1,a=(r-n.from)/(n.to-n.from),o=(s-n.from)/(n.to-n.from),l=e-a*(e-i)/(a-o),h=l+(e-i)/(a-o);
return{left:l,right:h}},e.prototype.findItemAt=function(t,e,i){
var n=this.activeFacet;if(n){if(!i&&!this.xyInChart(t,e))return null;
if(i&&!this.xyInChartOrBottom(t,e))return null;var r=Math.floor(this.xToPosition(t));
if(r>=n.offset&&r<n.offset+n.count)return n.items[r-n.offset];
}return null},e}(l.Scene);t.Scene=I;var D=function(t){function e(e){
var i=t.call(this,e)||this;return i.animationOrder=100,i.paintOrder=10,
i.updateOrder=1100,i.animatingFacet=null,i.leftAnimator=null,
i.rightAnimator=null,i.activePieReady=!1,i._shouldZoomOut=!1,
i}return n(e,t),e.prototype.setState=function(t,e,i,n){if(0===t.length)return void this.chart.error("setPie - array needs at least one item.");
for(var r=0;this.scene.length()>t.length;)this.scene.pop(),r++;
for(;this.scene.length()>0&&this.scene.peek().id!==t[this.scene.length()-1];)this.scene.pop(),
r++;for(;this.scene.length()<t.length;){var s=t[this.scene.length()];
this.drillDown(s,null),r++}var a=this.scene.peek();if(this.facet=a,
r&&this.goToPositionDragging(a.from,a.to),a.offset!==e||i&&a.count!==i){
var o=e,l=void 0;l=i>0?o+i:e+a.count,r?(this.goToPositionDragging(o,l),
this.animateFillChart()):this.goToPosition(o,l,!0,d.Helpers.performanceNow(),!0);
}else r&&this.animateFillChart();this.chart.notifyChartUpdate(n),
r&&this.events.notifySceneChanges({navigation:!0})},e.prototype.getState=function(){
for(var t=[],e=0;e<this.scene.stack.length;e++){var i=this.scene.stack[e];
t.push(i.id)}var n=this.scene.peek();return{idArray:t,offset:n.offset,
count:n.count}},e.prototype.goUp=function(t){if(this.scene.length()>1){
this.scene.pop();var e=this.facet=this.scene.peek();this.goToPositionDragging(e.from,e.to),
this.animateFillChart(),this.events.notifySceneChanges({navigation:!0
}),this.updateAndNotifyCurrent(t)}else this.goToPosition(0,this.getMaxItems(),!0,d.Helpers.performanceNow(),!0);
},e.prototype.getMaxItems=function(){var t=this.scene.width/this.scene.settings.facetAxis.defaultUnitWidth;
return this.facet.data.totalCount&&(t=Math.min(t,this.facet.data.totalCount)),
t},e.prototype.drillDown=function(t,e){this.stopAnimations();var i=new A;
i.id=t,this.scene.push(i,null),this.chart.builder.updateFacet(i),
this.facet=i,this.setFrom(i.from),this.setTo(i.to),this.animateFillChart(),
this.events.notifySceneChanges({navigation:!0}),this.updateAndNotifyCurrent(e);
},e.prototype.updateAndNotifyCurrent=function(t){this.chart.builder.updateFacet(this.facet),
this.chart.notifyChartUpdate(t)},e.prototype.onSceneChange=function(t){
var e=this.facet,i=t.timeStamp,n=t.changes.settingsChanges;if(n&&n.series){
t.changes.items=!0;for(var r=0;r<this.scene.stack.length;r++){
var s=this.scene.stack[r];this.chart.builder.rebuildValues(s);
}}if((t.changes.pieChartPieIds||t.changes.dataArrived||t.changes.data)&&(this.activePieReady=!1,
t.changes.data||t.changes.dataArrived))for(var a=t.changes.pieChartPieIds||Object.create(null),o=0;o<this.scene.stack.length;o++){
var s=this.scene.stack[o],l=!s.data||s===e||a[s.id]||t.changes.dataDeep;
l&&(s.rebuild=!0,this.chart.builder.updateFacet(s,t),t.changes.items=!0,
this.activePieReady=this.activePieReady||s===e&&!s.loading)}this.activePieReady&&this.scene.width>0&&(this.activePieReady=!1,
this.inertiaT.finished(i)&&e.from<e.to&&(this.setFrom(e.from),
this.setTo(e.to),this.animateFillChart()),this.chart.notifyChartUpdate(null));
},e.prototype.doAnimations=function(e){var i=this.facet;if(this.animatingFacet){
i.left=this.leftAnimator.get(e.timeStamp),i.right=this.rightAnimator.get(e.timeStamp);
var n=this.leftAnimator.finished(e.timeStamp)||this.rightAnimator.finished(e.timeStamp);
n&&(this.animatingFacet=null,this.leftAnimator=null,this.rightAnimator=null),
this.events.notifySceneChanges({position:!0}),e.animating=!0}else i.opacity=1;
this.layoutFacets();for(var r=0;r<this.scene.stack.length;r++)i=this.scene.stack[r],
this.chart.builder.updateFacet(i,e);t.prototype.doAnimations.call(this,e);
},e.prototype.xyInArea=function(t,e){return this.scene.xyInChartOrBottom(t,e);
},e.prototype.xyToPosition=function(t,e){return this.scene.xToPosition(t);
},e.prototype.onGoHome=function(t,e){return{from:0,to:e-t,origin:0
}},e.prototype.handleZoomWheel=function(t,e,i,n,r){t<0&&(e-=t,
t=0);var s=this.onSnapWhileDragging(t,e,i,this.scrollingActive,r);
t=s.from,e=s.to;var a=this.onSnapAfterDragging(t,e,i,this.scrollingActive,r);
return a?void this.goToPosition(a.from,a.to,!0,n,!0):void(this.wheelOrigin=null);
},e.prototype.onStartDragging=function(t,e,i){this.stopAnim();
},e.prototype.onSnapWhileDragging=function(t,e,i,n,r){var s=e-t,a=this.facet,o=a.totalCount,l=0,h=1,u=!1;
return this.scene.stack.length>1&&(s>2*o||this.scene.width/s<this.scene.settings.facetAxis.zoomOutUnitWidth)&&(u=!0),
this._shouldZoomOut=u,a.left=l,a.right=h,{from:t,to:e}},e.prototype.onSnapAfterDragging=function(t,e,i,n,r){
if(this._shouldZoomOut)return this._shouldZoomOut=!1,this.goUp("user"),
null;var s=this.snap(t,e,i,n,r);return t=s.from,e=s.to,this.animateFillChart(),
this.chart.notifyChartUpdate("user"),{from:t,to:e}},e.prototype.onPositionChanged=function(t,e){
var i=this.facet;i.from=t,i.to=e,this.chart.builder.updateFacet(i),
this.events.notifySceneChanges({position:!0})},e.prototype.onAnimationDone=function(t,e){
this.chart.notifyChartUpdate(null),this.chart.notifyAnimationDone();
},e.prototype.snap=function(t,e,i,n,r){var s=this.facet,a=s.totalCount;
s.right<1&&(0===s.right&&(s.right=1e-10),e=t+(e-t)/s.right),s.left>0&&(1===s.left&&(s.left=1-1e-10),
t=e-(e-t)/(1-s.left));var o=this.scene.width/(e-t),l=o;a>0&&(l=Math.max(l,this.scene.width/a)),
l=Math.min(this.scene.settings.facetAxis.maxUnitWidth,l);var h=o/l;
if(t=i+(t-i)*h,e=i+(e-i)*h,t=Math.round(t),e=Math.round(e),t<0)e-=t,
t=0;else if(e>a){var u=Math.max(0,a-(e-t));e=e-t+u,t=u}return{
from:t,to:e}},e.prototype.animateFillChart=function(){0===this.facet.left&&1===this.facet.right&&this.animatingFacet===this.facet||(this.animatingFacet=this.facet,
this.leftAnimator=new d.Animator(this.facet.left,0,this.scene.settings.interaction.animation.scrollDuration,"<>"),
this.rightAnimator=new d.Animator(this.facet.right,1,this.scene.settings.interaction.animation.scrollDuration,"<>"),
this.events.notifySceneChanges({requestPaint:!0}))},e.prototype.stopAnim=function(){
var t=this.facet;this.animatingFacet&&(t.opacity=1,this.animatingFacet=null),
this.leftAnimator&&(t.left=this.leftAnimator.get(1/0),this.leftAnimator=null),
this.rightAnimator&&(t.right=this.rightAnimator.get(1/0),this.rightAnimator=null),
this.layoutFacets()},e.prototype.layoutFacets=function(){for(var t=this.scene.stack.length-2;t>=0;t--){
var e=this.scene.stack[t+1],i=this.scene.stack[t];if(e.parentItem){
var n=this.scene.getFacetPlacementFromItem(e.parentItem,e.left,e.right);
i.left=n.left,i.right=n.right}i.opacity=e.left>0||e.right<1?.5:0;
}this._shouldZoomOut?(this.facet.opacity=.65,this.facet.parentItem.facet.opacity=1):this.facet.opacity=1;
},e}(l.Scrolling);t.Scrolling=D;var N=function(){function t(t,e,n){
this.bounds={x0:0,y0:0,width:0,height:0},this.facet=n,this.chart=e,
this.scene=this.chart.scene,this.valueAxis=new l.ValueAxisSet(this.chart,this.scene.settings._computedValueAxisList),
this.xes=[],this.facetAxis=new i(e,n),this.r=new l.Renderer(this.chart,this.valueAxis);
}return t.prototype.getPanels=function(){var t=this.valueAxis.getPanels(!0);
return t.push(this.facetAxis.getPanel()),t},t.prototype.setPanels=function(t){
this.valueAxis.setPanels(t),this.facetAxis.panel=t[t.length-1];
},t.prototype.doAnimations=function(t,e){var i=e.x0,n=e.y0,r=e.width,s=e.height,a=this.facet,o=a.offset,l=a.left,h=a.right;
l=i+r*l,h=i+r*h;var u=Math.max(i,l),c=Math.min(i+r,h);this.bounds={
x0:u,y0:n,width:c-u,height:s};var d=t.changes;if(d.position||d.data||d.bounds||d.items){
for(var p=(h-l)/(a.to-a.from),f=l-a.from*p,g=a.count,m=o,v=o+g,y=new Array(g+1),S=new Array(g+1),b=m;b<v+1;b++)y[b-m]=b,
S[b-m]=b*p+f;this.xes=S;for(var C=new Array(this.scene.settings._computedSeries.length),x=0;x<C.length;x++){
for(var w=new Array(g),L=new Array(g),T=new Array(g),b=m;b<v;b++){
var k=this.facet.items[b-o],A=k.values[x];w[b-m]=A.value,T[b-m]=1,
L[b-m]=A}C[x]={xes:S,times:y,counts:T,fromIndex:0,toIndex:g+1,
values:w,config:L,externalItems:function(t,e){return this.config.slice(t,e);
}}}this.r.process(C)}this.valueAxis.updateMinMax(t),this.r.afterProcess(),
this.valueAxis.doAnimations(t)},t.prototype.paintScene=function(t){
var e=t.context,i=this.bounds,n=this.facet.opacity,r=1===n?n:.2;
0!==n&&(e.globalAlpha=r,this.valueAxis.paintUnder(t),e.globalAlpha=n,
d.Graphics.pushClip(t,i.x0,i.y0,i.width,i.height),this.r.paint(t),
d.Graphics.popClip(t),e.globalAlpha=r,this.facetAxis.paint(t,i.x0,i.width,this.xes),
this.valueAxis.paint(t),e.globalAlpha=1)},t}();t.Layer=N;var F=function(t){
function e(e){var i=t.call(this)||this;return i.animationOrder=400,
i.paintOrder=5,i.updateOrder=1200,i.chart=e,i.scene=i.chart.scene,
i.events=i.chart.events,i.layers=[],i.panels=[],i}return n(e,t),
e.prototype.onSceneChange=function(t){var e=t.changes;if(e.settings||e.navigation||e.linearChartSeries||e.linearChartValueAxis){
var i=e.settingsChanges;e.linearChartValueAxis||i&&i.facetAxis?(e.bounds=!0,
this.layers=[]):e.linearChartSeries&&(this.layers=[]);for(var n=0;n<this.layers.length;n++){
var r=this.layers[n];r.facet!==this.scene.stack[n]&&(this.layers=this.layers.slice(0,n));
}for(;this.layers.length<this.scene.stack.length;){var s=this.scene.stack[this.layers.length],a=new N(t,this.chart,s);
this.layers.push(a)}0===this.layers.length&&this.layers.push(new N(t,this.chart,new A));
var o=this.layers[0].getPanels();this.panels=o.filter(function(t){
return null!=t});for(var l=0;l<this.layers.length;l++)this.layers[l].setPanels(o);
}},e.prototype.getPanels=function(){return this.panels},e.prototype.doAnimations=function(t){
for(var e=0;e<this.layers.length;e++){var i=this.layers[e];i.doAnimations(t,this.scene);
}},e.prototype.paintScene=function(t){for(var e=0;e<this.layers.length;e++){
var i=this.layers[e];i.paintScene(t)}},e.prototype.exportData=function(t,e){
return this.layers[this.layers.length-1].r.exportData(t,e)},e.prototype.hitTest=function(t,e){
var i=this.scene,n=this.layers;return i.xyInChart(t,e)&&n.length>0?n[n.length-1].r.hitTest(t,e,i.settings.interaction.selection.tolerance):null;
},e}(d.ChartElement);t.Renderer=F;var E=function(){function t(t){
this.chart=t,this.scene=t.scene,this.loading=!1}return t.prototype.updateFacet=function(t,e){
void 0===e&&(e=null);var i=this.chart.getData("default"),n=t.data;
if((!n||e&&(e.changes.data||e.changes.dataArrived||e.changes.filters))&&(n=t.data=i.getPieData(t.id),
!n))return t.loading=!0,void i.requestPieData(t.id,Math.floor(t.from));
var r=!1;if(this.scene.width&&(!(t.from<t.to)||t.rebuild)){t.rebuild=!1;
var s=Math.max(1,Math.floor(this.scene.width/this.scene.settings.facetAxis.maxUnitWidth)),a=Math.max(1,Math.floor(this.scene.width/this.scene.settings.facetAxis.defaultUnitWidth));
n.totalCount&&(a=Math.min(n.totalCount,a)),a=Math.max(s,a),t.offset=Math.floor(t.from),
t.count=0,t.to=t.from+(0|a),t.items=[]}var o=Math.max(0,(0|t.from)-2),l=Math.ceil(t.to+2),h=n.values.length+n.offset,u=n.offset;
t.loading=!1,u>o&&(o=u,i.requestLessPieData(t.id),t.loading=!0),
h<l&&(l=h,n.done||(i.requestMorePieData(t.id),t.loading=!0));var c=t.offset+t.items.length;
if((l<t.offset||o>c)&&(t.offset=o,t.items=[],c=o),o>t.offset)t.items=t.items.slice(o-t.offset);else if(o<t.offset){
for(var d=[],p=o;p<=t.offset-1;p++)d.push(this.buildItem(t,n,p));
t.items=d.concat(t.items),r=!0}if(t.offset=o,l<c)t.items=t.items.slice(0,l-t.offset);else if(l>c){
for(var p=c;p<l;p++)t.items.push(this.buildItem(t,n,p));r=!0}
if(t.count=t.items.length,t.totalCount=Math.max(t.offset+t.count,n.totalCount||0),
r){if(e)e.changes.items=!0,e.changes.changedItems||(e.changes.changedItems={}),
e.changes.changedItems[t.id]=!0;else{var f={};f[t.id]=!0,this.chart.events.notifySceneChanges({
items:!0,changedItems:f})}this.resetSelection()&&this.chart.events.notifySceneChanges({
items:!0})}this.scene.updateLinks(t)},t.prototype.resetSelection=function(){
for(var t=this.scene,e=0,i=t.selection;e<i.length;e++){var n=i[e];
t.selectionIds.push(n.id),n.selected=!1}return t.selection=[],
t.selectionIds.length>0},t.prototype.rebuildValues=function(t){
for(var e=0;e<t.items.length;e++){var i=t.items[e];this.updateItem(i);
}},t.prototype.buildItem=function(t,e,i){var n=e.values[i-e.offset],r=new M(t,n.__id,i,n);
return this.updateItem(r),r},t.prototype.updateItem=function(t){
for(var e=[],i=0;i<this.scene.settings._computedSeries.length;i++){
var n=this.scene.settings._computedSeries[i],r=new P(t.facet,t.id,t.index,t.data,n.id);
t.data?r.value=this.getSeriesValue(t.data,n):r.value=null,e.push(r);
}t.values=e},t.prototype.getSeriesValue=function(t,e){var i=e.data.valueFunction,n=null;
if(i)n=i(t);else{var r=e.data.field||"value";n=t[r]}return d.Helpers.tryParseFloat(n,null);
},t.prototype.buildPreviewData=function(t,e){var i=t.id,n=this.scene.mainData,r=n.getPieData(i),s=null;
if(r)if(r.offset>0)n.requestLessPieData(t.id);else{s=[];for(var a=0,o=0;o<r.values.length;o++){
var l=r.values[o],h=this.getSeriesValue(l,e);s.push(h),a+=h}if(a>0){
a=1/a;for(var u=0;u<s.length;u++)s[u]=s[u]*a}else s=null}else t.expandable&&n.canExpand(i)&&n.requestPieData(t.id,0);
return s},t}();t.Builder=E;var O=function(t){function e(e){var i=t.call(this)||this;
return i.animationOrder=200,i.paintOrder=20,i.updateOrder=900,
i.chart=e,i.scene=e.scene,i}return n(e,t),e.prototype.doAnimations=function(t){
var e=t.changes;if(e.settings||e.items||e.selection||e.navigation||e.style){
var i=this.scene.activeFacet;if(i)for(this.computeFacetStyleRec(i);i&&i.parentItem;)i=i.parentItem.facet,
this.computeFacetStyleRec(i)}},e.prototype.computeFacetStyleRec=function(t){
this.computeFacetStyle(t);for(var e=0;e<t.items.length;e++){var i=t.items[e];
this.computeItemStyle(t,i),i.innerFacet&&this.computeFacetStyleRec(i.innerFacet);
}},e.prototype.computeFacetStyle=function(t){},e.prototype.computeItemStyle=function(t,e){
var i=this.scene.settings._computedSeries;if(d.Helpers.extendStyleTo(this.scene.settings.items.style,e),
e.data.style&&d.SettingsHelper.updateRecursive(e,e.data.style,d.SettingsMapping.FacetChartSettingsFacetStyle,{}),
e.id===e.facet.activeItemId)for(var n=0;n<e.values.length;n++){
var r=e.values[n];r.style.fillColor=null,r.style.lineColor=null;
}else for(var n=0;n<e.values.length;n++){var r=e.values[n];d.Helpers.extendStyleTo(i[n].style,r.style);
}if(this.scene.settings.items.styleFunction?(this.scene.settings.items.styleFunction(e,e.data),
e.label&&!d.Helpers.isString(e.label)&&(e.label=""+e.label)):e.data.name&&(e.label=e.data.name),
e.id!==e.facet.activeItemId)for(var n=0;n<e.values.length;n++){
var r=e.values[n],s=i[n];r.style.previewContents?r.previewData=this.chart.builder.buildPreviewData(e,s):r.previewData=null;
}else e.values[e.values.length-1].previewData=null},e}(d.ChartElement);
t.Styles=O;var R=function(t){function e(e,i){var n=t.call(this,new f(e),new I,i)||this;
return n.builder=new E(n),n.renderer=n.events.addElement(new F(n)),
n.scrolling=n.events.addElement(new D(n)),n.selection=n.events.addElement(new o(n)),
n.events.addElement(new O(n)),n.infoPopup=new h(n),n.events.addElement(n.infoPopup),
n.events.addElement(new l.Highlights(n)),n.scrollButtons=n.events.addElement(new c(n)),
n.finalInitialize(),n.scrolling.setState(n.settings.navigation.initialDrilldown,n.settings.navigation.initialOffset,0,"init"),
n}return n(e,t),e.prototype.createDataObj=function(t){return new a.Data(this,t,(!0));
},e.prototype.getData=function(e){return t.prototype.getData.call(this,e);
},e.prototype.onSettingsChanged=function(t){var e={settings:!0,
settingsChanges:t,items:!1};t.navigation&&this.scrolling.setState(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset,null,"api"),
(t.series||t.interaction)&&(e.items=!0),this.events.notifySceneChanges(e),
(t.data||t.facetAxis)&&this.updateSize(!0)},e.prototype.updateFilters=function(){
return this.updateFilter(!0)},e.prototype.updateFilter=function(t){
void 0===t&&(t=!1),this.log("Update filter");var e={};for(var i in this.settings._computedDataMap)e[i]=!0;
this.events.notifySceneChanges({data:e,dataDeep:t})},e.prototype.setSelection=function(t,e){
void 0===e&&(e="api"),this.log("Set selection");for(var i=[],n=[],r=0;r<t.length;r++){
var s=t[r];s instanceof M?i.push(s):d.Helpers.isString(s)?n.push(s):this.error("SetSelection: Selection contents must be FacetChart.Item object or string, got "+typeof s);
}this.selection.setSelection(i,n,!1,e)},e.prototype.exportVisibleData=function(){
var t=this.scene.peek();return t?a.Data.exportValues(t.data):[];
},e.prototype.setPie=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=!0),
this.log("Set pie"),this.scrolling.setState(t,e,i,"api")},e.prototype.getPie=function(){
return this.scrolling.getState().idArray},e.prototype.getPieOffset=function(){
return this.scrolling.getState().offset},e.prototype.getActiveItems=function(){
for(var t=[],e=0;e<this.scene.stack.length;e++){var i=this.scene.stack[e];
i.parentItem&&t.push(i.parentItem)}return t},e.prototype.getActiveFacets=function(){
return this.scene.stack},e.prototype.zoomOut=function(t,e){void 0===t&&(t=!0),
void 0===e&&(e="api"),this.setSelection([]),this.scrolling.goUp(e);
},e.prototype.zoomOutPossible=function(){var t=this.scene;return t.length()>1||t.peek()&&t.peek().offset>0;
},e.prototype.getBottomHeight=function(){return this.scene.chartHeight-this.settings.facetAxis.size;
},e.prototype.expandItem=function(t,e){var i=t.facet;if(i===this.scene.peek()){
var n=t.id;if(t.expandable&&this.scene.mainData.canExpand(n))return this.setSelection([]),
this.scrolling.drillDown(n,e),!0}return!1},e.prototype.saveNavigation=function(){
var t=this.scene.peek();return!t||this.scrolling.isActive()?null:this.scrolling.getState();
},e.prototype.restoreNavigation=function(t,e,i){return this.scrolling.setState(t.idArray,t.offset,t.count,i);
},e.prototype.save=function(){for(var t=this.scene.selectionIds.splice(0),e=0;e<this.scene.selection.length;e++){
var i=this.scene.selection[e];t.push(i.id)}var n=this.scrolling.getState();
return JSON.stringify({pie:n.idArray,offset:n.offset,count:n.count,
selection:t})},e.prototype.restore=function(t,e){if(t){var i=JSON.parse(t);
this.setPie(i.pie,i.offset,i.count,e),this.setSelection(i.selection);
}},e.prototype.createEventArguments=function(t,e,i){var n=this.scene;
if(!n)return{chart:this.api,origin:e};var r=n.peek(),s=i&&i.facet,a=n.hoverSeriesItem,o=a&&null!=a.seriesIndex?n.settings._computedSeries[a.seriesIndex]:null;
return{chart:this.api,origin:e,facet:r,offset:r&&r.offset,count:r&&r.count,
hoverItem:n.hoverItem,hoverSeries:o,hoverMarker:!!a&&a.isMarker,
selection:n.selection.slice(),clickItem:i,clickFacet:s,clickOrigin:null
}},e.prototype.defaultClick=function(t,e){this.selection.defaultClick(t,e);
},e.prototype.remove=function(){t.prototype.remove.call(this),
this.infoPopup.remove()},e}(l.Impl);t.Impl=R}(s=i.FacetChart||(i.FacetChart={})),
function(e){function r(t){return t?t.properties&&t.properties.id&&d.Helpers.isString(t.properties.id)?t.properties.id:t.id:null;
}function s(t){if(!Array.isArray(t))return"GeoJSON LineString data contained invalid coordinate collection.";
if(t.length<2)return"GeoJSON LineString data must contain at least 2 points.";
for(var e=new Array(2*t.length),i=0;i<t.length;i++){var n=t[i];
if(!n||!d.Helpers.isNumber(n[0])||!d.Helpers.isNumber(n[1]))return"GeoJSON LineString data contained invalid coordinates.";
e[2*i]=n[0],e[2*i+1]=n[1]}return e}function a(t,e){if(!Array.isArray(t))return"GeoJSON Polygon data contained invalid coordinate collection.";
if(t.length<1)return"GeoJSON Polygon data doesn't contain any LinearRings.";
for(var i=0;i<t.length;i++){var n=s(t[i]);if(d.Helpers.isString(n))return n;
e.push(n)}return null}function o(t){return d.Helpers.isNumber(t[0])&&d.Helpers.isNumber(t[1])?[t[0],t[1]]:"GeoJSON data contained invalid coordinates.";
}function l(t){var e=[],i=a(t.coordinates,e);return i?i:e}function h(t){
var e=t.coordinates;if(!Array.isArray(e))return"GeoJSON MultiPolygon data contained invalid coordinates";
if(e.length<1)return"GeoJSON MultiPolygon data doesn't contain any Polygons.";
for(var i=[],n=0;n<e.length;n++){var r=a(e[n],i);if(r)return r;
}return i}function c(t){var e=s(t.coordinates);return d.Helpers.isString(e)?e:[e];
}function p(t){var e=t.coordinates;if(!Array.isArray(e))return"GeoJSON MultiLineString data contained invalid coordinates";
if(e.length<1)return"GeoJSON MultiLineString data doesn't contain any lines.";
for(var i=new Array(e.length),n=0;n<e.length;n++){var r=s(e[n]);
if(d.Helpers.isString(r))return r;i[n]=r}return i}function f(t,e,i,n,s,a){
d.Helpers.isString(e)?a(e,n):t.push({_x:0,_y:0,id:r(n),loaded:!0,
coordinates:e,type:i,shapeFeature:n,shapeGeometry:s})}function g(t,e,i,n){
if(!Array.isArray(e.coordinates))return void n("GeoJSON data contained invalid object.",i);
switch(e.type){case"Point":f(t,o(e.coordinates),"point",i,e,n);
break;case"MultiPoint":var r=e;if(Array.isArray(r.coordinates))for(var s=0;s<r.coordinates.length;s++)f(t,o(r.coordinates[s]),"point",i,e,n);else n("GeoJSON data contained invalid MultiPoint object.",i);
break;case"LineString":f(t,c(e),"line",i,e,n);break;case"MultiLineString":
f(t,p(e),"line",i,e,n);break;case"Polygon":f(t,l(e),"polygon",i,e,n);
break;case"MultiPolygon":f(t,h(e),"polygon",i,e,n);break;default:
return void n('GeoJSON data contained unknown object with type "'+e.type+'" .',i);
}}function m(t,e,i,n){if("GeometryCollection"===e.type){var r=e;
if(Array.isArray(r.geometries))for(var s=0;s<r.geometries.length;s++)m(t,r.geometries[s],i,n);else n("GeoJSON data contained invalid GeometryCollection object.",i);
}else g(t,e,i,n)}function v(t,e,i){return e.geometry&&"Feature"===e.type?void m(t,e.geometry,e,i):void i("GeoJSON data contained invalid feature object.",e);
}function y(t,e,i){if(!Array.isArray(e.features)||"FeatureCollection"!==e.type)return void i("GeoJSON data contained invalid FeatureCollection object.",null);
for(var n=0;n<e.features.length;n++)v(t,e.features[n],i)}function S(t,e){
function i(t,i){e.error("Error: "+t+" Feature id: '"+r(i)+"'");
}if(!t)return[];var n=[];switch(t.type){case"FeatureCollection":
y(n,t,i);break;case"Feature":v(n,t,i);break;case"GeometryCollection":
m(n,t,null,i);break;case"Point":case"MultiPoint":case"LineString":
case"MultiLineString":case"Polygon":case"MultiPolygon":g(n,t,null,i);
break;default:return void i('GeoJSON data contained unknown object with type "'+t.type+'" .',null);
}for(var s={"##default":0},a=0;a<n.length;a++){var o=n[a];null==o.id?o.id="##default"+d.Helpers.SeparatorChar+s["##default"]++:d.Helpers.hasProperty(s,o.id)?o.id+=d.Helpers.SeparatorChar+s[o.id]++:s[o.id]=0;
}return n}e.convertFromGeoJson=S;var b=function(){function t(t,e,i){
this.nodes={},this.links={},this.area=new d.AreaCollection,this.requestedArea=new d.AreaCollection,
this.pendingArea=null,this.cacheId=i,this.id=e,this.level=t}return t;
}();e.DataLayer=b;var C=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.dataFunction=null,e.preloaded=null,e.prefetchRatio=1,
e.bounds=[-180,-85.0511287798,180,85.0511287798],e.wrapLng=!0,
e.maxRequestRect=[256,256],e.perBoundsData=!0,e.perZoomData=!1,
e.perDrilldownData=!1,e.useGridBasedAggregation=!1,e.aggregationGridSize=100,
e.aggregationMinCount=5,e}return n(e,t),e}(u.SettingsData);e.SettingsData=C;
var x=function(t){function e(e,i){var n=t.call(this,e,i)||this;
n.layers={},n.pendingLayers=[],n.nextId=0,n.aggregationGridSize=1,
n.zoomLevel=null,n.projectFun=function(t,e){return n.chart.scene.project(t,e);
},n.unprojectFun=function(t,e){return n.chart.scene.unproject(t,e);
};var r=n.projectFun(n.dataSettings.bounds[0],n.dataSettings.bounds[1]),s=n.projectFun(n.dataSettings.bounds[2],n.dataSettings.bounds[3]);
return n.projectedBounds=new d.Rect(Math.min(r.x,s.x),Math.min(r.y,s.y),Math.max(r.x,s.x),Math.max(r.y,s.y)),
n}return n(e,t),e.prototype.getProjectedBounds=function(){return this.projectedBounds;
},e.prototype.setViewParams=function(t,e,i,n,r){this.dataSettings.perZoomData?this.zoomLevel=e:this.zoomLevel=null,
this.aggregationGridSize=t,this.loadDataArea=this.buildRectArea(r),
this.returnDataArea=this.buildRectArea(n),this.visibleArea=this.buildRectArea(i),
this.pendingLayers=[]},e.prototype.getLayer=function(t){var e="",i=null;
t&&(e+=""+t),null!==this.zoomLevel&&(e+="#z"+this.zoomLevel,i=this.zoomLevel);
var n;return n=this.layers.hasOwnProperty(e)?this.layers[e]:this.layers[e]=new b(i,t,e),
this.lastLayer=n,n},e.prototype.getData=function(t){var e,i=this.getLayer(t);
i.area.coversArea(this.loadDataArea)?(i.pendingArea=new d.AreaCollection,
e=!1):i.requestedArea.coversArea(this.loadDataArea)?e=this.hasPendingRequests():(i.pendingArea=this.loadDataArea.makeCopy().subtractArea(i.requestedArea),
i.pendingArea.isEmpty()||(this.pendingLayers.indexOf(i)<0&&this.pendingLayers.push(i),
this.scheduleRequests(!0)),e=this.hasPendingRequests());var n=this.applyFilters(i,this.returnDataArea);
return this.chart.log("Data: returned "+n.nodes.length+" nodes and "+n.links.length+" links for ID: "+t+", loading="+e),
{nodes:n.nodes,links:n.links,hasData:i.area.intersectsArea(this.visibleArea),
loading:e}},e.prototype.applyFilters=function(t,e){var i,n,r=e.toRects(),s=this.settings.filters.nodeFilter,a=[],o=[],l={};
for(var h in t.nodes){var u=t.nodes[h],c=u._bounds,d=!s||s(u);
if(d)for(i=0;i<r.length;i++)if(n=r[i],n.overlapsRect(c.x0,c.y0,c.x1,c.y1)){
a.push(u),l[h]=!0;break}}for(var h in t.links){var p=t.links[h],f=l[p.from],g=l[p.to];
if(f||g)o.push(p),f||(l[p.from]=!0,a.push(t.nodes[p.from])),g||(l[p.to]=!0,
a.push(t.nodes[p.to]));else{var m=t.nodes[p.from],v=t.nodes[p.to];
if(m._x&&v._x){var y=m._x,S=m._y,b=v._x,C=v._y;for(i=0;i<r.length;i++)if(n=r[i],
n.intersectsSegment(y,S,b,C)){a.push(m),a.push(v),l[p.from]=!0,
l[p.to]=!0;break}}}}return{nodes:a,links:o}},e.prototype.unprojectRect=function(t){
var e=this.unprojectFun(t.x0,t.y0),i=this.unprojectFun(t.x1,t.y1);
return new d.Rect(Math.min(e.lng,i.lng),Math.min(e.lat,i.lat),Math.max(e.lng,i.lng),Math.max(e.lat,i.lat));
},e.prototype.projectRect=function(t){var e=this.projectFun(t.x0,t.y0),i=this.projectFun(t.x1,t.y1);
return new d.Rect(Math.min(e.x,i.x),Math.min(e.y,i.y),Math.max(e.x,i.x),Math.max(e.y,i.y));
},e.prototype.buildRectArea=function(t){var e=this.projectedBounds,i=t.x0,n=t.y0,r=t.x1,s=t.y1,a=new d.AreaCollection;
if(n=Math.max(n,e.y0),s=Math.min(s,e.y1),this.dataSettings.wrapLng){
var o=e.x1-e.x0;if(r-i>o)i=e.x0,r=e.x1;else{for(;i<e.x0;)i+=o,
r+=o;for(;i>e.x1;)i-=o,r-=o}r<=e.x1?a.addRect(new d.Rect(i,n,r,s)):(a.addRect(new d.Rect(i,n,e.x1,s)),
a.addRect(new d.Rect(e.x0,n,r-o,s)))}else a.addRect(t.clone().clip(e));
return a},e.prototype.buildRequest=function(){if(this.pendingLayers.length>0){
var t=this.pendingLayers[0],e=t.pendingArea.findOverlappingRect(this.dataSettings.maxRequestRect[0],this.dataSettings.maxRequestRect[1]);
t.pendingArea.subtractRect(e),t.pendingArea.isEmpty()&&d.Helpers.removeFromArray(this.pendingLayers,t);
var i=e,n=[],r=[];if(this.dataSettings.useGridBasedAggregation){
var s=this.buildAggregationRequest(e);i=s.rectangle,n=s.xcuts,
r=s.ycuts}t.requestedArea.addRect(i);var a=this.unprojectRect(i);
return{id:t.id,layerId:t.cacheId,west:a.x0,north:a.y1,east:a.x1,
south:a.y0,zoom:this.zoomLevel,aggregateLat:r,aggregateLng:n,
aggregateMinItems:this.dataSettings.aggregationMinCount}}return null;
},e.prototype.buildAggregationRequest=function(t){for(var e=this.aggregationGridSize,i=Math.floor(t.x0/e)*e,n=Math.ceil(t.x1/e)*e,r=Math.floor(t.y0/e)*e,s=Math.ceil(t.y1/e)*e,a=this.dataSettings.bounds[0],o=this.dataSettings.bounds[1],l=this.dataSettings.bounds[2],h=this.dataSettings.bounds[3],u=[],c=[],p=i;p<=n;p+=e)u.push(Math.min(Math.max(this.unprojectFun(p,r).lng,a),l));
for(var f=r;f<=s;f+=e)c.push(Math.min(Math.max(this.unprojectFun(i,f).lat,o),h));
return{rectangle:new d.Rect(i,r,n,s),xcuts:u,ycuts:c}},e.prototype.dataFunc=function(t,e,i){
var n=this.dataSettings;if(n.dataFunction)n.dataFunction(t,e,i);else if(n.url){
var r=[["id",t.id],["south",t.south.toString(10)],["west",t.west.toString(10)],["north",t.north.toString(10)],["east",t.east.toString(10)]];
(t.aggregateLat.length||t.aggregateLng.length)&&(r.push(["aggregateLat",t.aggregateLat.join(",")]),
r.push(["aggregateLng",t.aggregateLng.join(",")]),r.push(["aggregateMinItems",t.aggregateMinItems.toString(10)])),
null!==t.zoom&&r.push(["zoom",t.zoom.toString(10)]),d.Data.doRequest(n.url,n,r,e,i);
}else i({error:"Chart configuration does not define data retrieval function"
})},e.prototype.verifyData=function(t,e){"geojson"===this.dataSettings.format.toLowerCase()&&(e.nodes=S(e,this.chart));
var i=!0;e.hasOwnProperty("nodes")||(e.nodes=[]),e.hasOwnProperty("links")||(e.links=[]);
var n=d.Helpers.tryParseFloat(e.west,t?t.west:1/0),r=d.Helpers.tryParseFloat(e.east,t?t.east:-(1/0)),s=d.Helpers.tryParseFloat(e.north,t?t.north:1/0),a=d.Helpers.tryParseFloat(e.south,t?t.south:-(1/0));
e._bounds=new d.Rect(n,a,r,s);for(var o={},l=0;l<e.nodes.length;l++){
var h=e.nodes[l];if(Array.isArray(h.coordinates)||(this.chart.error("Data response: Node has no coordinates, or not an array"),
i=!1),h.aggregate)d.Helpers.isNumber(h.count)||(this.chart.error("Aggregated node needs `count` field that contains a number."),
i=!1);else if(h.hasOwnProperty("id")){var u=h.id.toString();o.hasOwnProperty(u)&&this.chart.error("Data response: Multiple nodes with same id: "+u),
o[u]=!0}else this.chart.error("Data response: Node without ID"),
i=!1}for(var c={},p=0;p<e.links.length;p++){var f=e.links[p];f.hasOwnProperty("id")?c.hasOwnProperty(f.id)&&this.chart.error("Data response: Multiple links with the same ID: "+f.id):f.id=d.Helpers.SeparatorChar+(this.nextId++).toString(10),
o[f.from]||o[f.to]||this.chart.error("Data response: Returned link that does not match any node: "+f.id),
c[f.id]=!0}return i},e.prototype.addVerifiedData=function(t,e){
var i,n;t?(n=t.id,i=t.layerId):(i="",n="");var r,s,a=this.layers[i];
if(a||(a=this.getLayer(n)),e.clearCache)a.nodes={},a.links={},
a.area=new d.AreaCollection,a.area.addRect(this.projectedBounds);else if(e._bounds.x0!==1/0){
var o=this.projectRect(e._bounds);for(var l in a.nodes)r=a.nodes[l],
o.overlaps(r._bounds)&&delete a.nodes[l];for(var l in a.links)s=a.links[l],
a.nodes[s.from]&&a.nodes[s.to]||delete a.links[l];a.area.addRect(o);
}else a.area.addRect(this.projectedBounds);for(var h={},u=0;u<e.nodes.length;u++)r=e.nodes[u],
r.loaded=!0,r.aggregate?(r.id=d.Helpers.SeparatorChar+this.nextId,
this.nextId++,a.nodes[r.id]=r):(h[r.id]=!0,a.nodes.hasOwnProperty(r.id)?d.Helpers.extendDeep(a.nodes[r.id],r):a.nodes[r.id]=r),
r.coordinates&&(Array.isArray(r.coordinates[0])?this.prepareShape(r):this.preparePoint(r));
for(var c={},p=0;p<e.links.length;p++)s=e.links[p],c[s.id]=!0,
a.links[s.id]=s;var f={};f[n||""]={nodes:h,links:c};var g={};return g[this.dataSettings.id]=f,
{geoChartDataNodesIds:g}},e.prototype.prepareShape=function(t){
for(var e=[],i=d.Rect.createEmpty(),n=0;n<t.coordinates.length;n++){
var r=t.coordinates[n],s=this.projectLineString(r,i);e.push(s);
}t._bounds=i,t._coordinates=e},e.prototype.preparePoint=function(t){
if(2!==t.coordinates.length)return void this.chart.error("Point coordinates must be an array of two numbers.");
var e=t.coordinates,i=e[0],n=e[1],r=this.projectFun(i,n);t._x=r.x,
t._y=r.y,t._bounds=new d.Rect(r.x,r.y,r.x,r.y)},e.prototype.projectLineString=function(t,e){
for(var i=[],n=0;n<t.length-1;n+=2){var r=this.projectFun(t[n],t[n+1]);
i.push(r.x),i.push(r.y),e.addPoint(r.x,r.y)}return i},e.prototype.exportAreas=function(){
var t=this.lastLayer.area.toRects(),e=this.lastLayer.requestedArea.toRects(),i=this.lastLayer.pendingArea.toRects();
return this.projectRects(t),this.projectRects(e),this.projectRects(i),
{areasRects:t,reqAreasRects:e,pendingAreasRects:i}},e.prototype.projectRects=function(t){
for(var e=0;e<t.length;e++){var i=t[e],n=this.projectFun(i.x0,i.y0);
if(i.x0=n.x,i.y0=n.y,n=this.projectFun(i.x1,i.y1),i.x1=n.x,i.y1=n.y,
i.y1<i.y0){var r=i.y0;i.y0=i.y1,i.y1=r}}},e}(d.Data);e.Data=x,
e.Leaflet=null,"undefined"!=typeof L&&(e.Leaflet=L);var w=function(){
function t(t,e,i){var n=this;this.layers=i,this.chartContainer=e,
this.chart=t,this.wasDragged=null,this.wasZoomed=!1,this.translate=null,
this.updatePosDelegate=function(){return n.updatePos()},this.onZoomDelegate=function(t){
return n.onZoom(t)},this.viewResetDelegate=function(){return n.viewReset();
},this.userActionEndDelegate=function(){return n.userActionEnd();
},this.userActionStartDelegate=function(){return n.userActionStart();
}}return t.prototype.extendLayer=function(t){var e=this,i=t.onAdd,n=t.onRemove;
t.onAdd=function(n){return e.onAdd(n),i?i.call(t,n):t},t.onRemove=function(i){
return e.onRemove(i),n?n.call(t,i):t}},t.prototype.onAdd=function(t){
return this.map=t,t.getPanes().overlayPane.appendChild(this.chartContainer),
t.on("move",this.updatePosDelegate,this),t.on("zoomanim",this.onZoomDelegate,this),
t.on("viewreset",this.viewResetDelegate,this),t.on("moveend",this.userActionEndDelegate,this),
t.on("movestart",this.userActionStartDelegate,this),this.updatePos(),
this},t.prototype.onRemove=function(t){return t.getPanes().overlayPane.removeChild(this.chartContainer),
t.off("move",this.updatePosDelegate,this),t.off("zoomanim",this.onZoomDelegate,this),
t.off("viewreset",this.viewResetDelegate,this),t.off("moveend",this.userActionEndDelegate,this),
t.off("movestart",this.userActionStartDelegate,this),this},t.prototype.userActionStart=function(){
this.wasDragged=!0},t.prototype.userActionEnd=function(){var t;
t=this.wasDragged===!0?"user":null===this.wasDragged?"init":"api",
this.chart.notifyChartUpdate(t),this.wasDragged=!1},t.prototype.viewReset=function(){
this.updatePos(),this.userActionEnd()},t.prototype.setTranslate=function(){
null!==this.translate&&(this.chartContainer.style[e.Leaflet.DomUtil.TRANSFORM]=this.translate,
this.chartContainer.style[e.Leaflet.DomUtil.TRANSFORM+"Origin"]="50% 50%",
this.translate=null)},t.prototype.getTranslateString=function(t){
var e=L.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";
return i+t.x+"px,"+t.y+"px"+n},t.prototype.updatePos=function(){
if(this.map){var t=this.map.options.crs,i=this.chart.scene;this.offset=this.map.containerPointToLayerPoint(e.Leaflet.point(0,0)),
this.chartContainer.setAttribute("class"," "),this.translate=this.getTranslateString(this.offset);
var n=this.map.getPixelBounds(),r=t.transformation.untransform(n.min,t.scale(this.map.getZoom()));
r=t.transformation.transform(r,t.scale(0));var s=t.transformation.untransform(n.max,t.scale(this.map.getZoom()));
s=t.transformation.transform(s,t.scale(0));var a=this.map.getZoom();
a!==i.zoomLevel&&(i.zoom=Math.pow(2,a),i.zoomLevel=a,this.wasZoomed=!0),
i.centerX=(s.x+r.x)/2,i.centerY=(s.y+r.y)/2,this.chart.events&&!this.layers.resizing&&(this.wasZoomed?(this.chart.events.notifySceneChanges({
zoom:!0,position:!0}),this.wasZoomed=!1):this.chart.events.notifySceneChanges({
position:!0}))}},t.prototype.onZoom=function(t){var i=this.map.getZoomScale(t.zoom),n=this.map.latLngToLayerPoint(t.center).subtract(this.map.containerPointToLayerPoint(this.map.getSize().divideBy(2))),r=n.multiplyBy(-i).add(this.map.containerPointToLayerPoint(e.Leaflet.point(0,0)));
this.chartContainer.setAttribute("class"," leaflet-zoom-animated"),
this.translate=this.getTranslateString(r)+" scale("+i+") ",this.setTranslate(),
this.wasZoomed=!0},t}(),T=function(){function t(){this.enabled=!0,
this.type="tile",this.url="https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",
this.params={subdomains:"abcd",attribution:'&copy; <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://cartodb.com/attributions" target="_blank">CartoDB</a>'
}}return t}();e.SettingsBackground=T;var k=function(t){function i(e){
var i=t.call(this,e)||this;return i.animationOrder=100,i.resizing=!1,
i._focusHandler=function(){return i.containerOnFocusChange()},
i}return n(i,t),i.prototype.createDom=function(n){var r=this;t.prototype.createDom.call(this,n),
this.leafletContainer=d.Helpers.createDom("div","DVSL-leaflet",null,null),
this.container.insertBefore(this.leafletContainer,this.canvas),
this.container.removeChild(this.canvas),this.container.removeChild(this.outerBorder),
this.container.removeChild(this.interactionContainer),this.interactionContainer.appendChild(this.canvas),
this.canvas.style.position="static",this.outerBorder=null,this.menuContainer.className="DVSL-menu-container",
this.itemLayer=new w(this.chart,this.interactionContainer,this),
i.setContainerStyle(this.leafletContainer),this.chart.scene.project=function(t,e){
return r.projectFunc(t,e)},this.chart.scene.unproject=function(t,e){
return r.unprojectFunc(t,e)},null!=e.Leaflet?this.createMap():this.chart.assetsLoader.ensureAssetsList(["assets://leaflet.js"],function(t){
return r.leafletLoaded(t)}),d.Helpers.listen(this.interactionContainer,"focus",this._focusHandler),
d.Helpers.listen(this.interactionContainer,"blur",this._focusHandler),
d.Helpers.listen(this.leafletContainer,"focus",this._focusHandler),
d.Helpers.listen(this.leafletContainer,"blur",this._focusHandler);
},i.prototype.containerOnFocusChange=function(){if(this.map){
var t=d.Helpers.isParentOf(this.container,document.activeElement),e=this.map.scrollWheelZoom;
t||!this.chart.settings.advanced.pointer.mouseWheelRequiresFocus?e.enable():e.disable();
}},i.prototype.leafletLoaded=function(t){if(!this.removed){if("undefined"==typeof L)throw new Error("`leaflet.js` was loaded but the global variable `L` was not found. Please make sure that `L.noConflict()` is not called.");
e.Leaflet=L,this.createMap(),t&&this.chart.notifyChartUpdate("api");
}},i.prototype.ensureMap=function(){if(!this.map)throw new Error("This method is only available after leaflet.js has been loaded.");
},i.prototype.createMap=function(){var t=this.chart.settings.navigation,i={
maxZoom:t.maxZoom,minZoom:t.minZoom,worldCopyJump:!1};this.map=e.Leaflet.map(this.leafletContainer,i),
this.map.attributionControl.setPrefix("");var n=t.maxBounds;if(this.map.setMaxBounds(new e.Leaflet.LatLngBounds(new e.Leaflet.LatLng(n.south,n.west),new e.Leaflet.LatLng(n.north,n.east))),
this.createMapBackground(),L.Layer){var r=new L.Layer;this.itemLayer.extendLayer(r),
this.map.addLayer(r)}else this.map.addLayer(this.itemLayer);this.crs=this.map.options.crs,
this.containerOnFocusChange(),this.chart.domLayerCreated()},i.prototype.createMapBackground=function(){
var t=this.map,i=this.tileLayer;i&&(t.removeLayer(i),i=null);var n=this.scene.settings.background;
n.enabled&&("tile"===n.type?(i=e.Leaflet.tileLayer(n.url,n.params),
t.addLayer(i)):"wms"===n.type&&(i=e.Leaflet.tileLayer.wms(n.url,n.params),
t.addLayer(i))),this.tileLayer=i},i.prototype.onSceneChange=function(t){
this.itemLayer.setTranslate()},i.prototype.remove=function(){
this.removed=!0,d.Helpers.unlisten(this.interactionContainer,"focus",this._focusHandler),
d.Helpers.unlisten(this.interactionContainer,"blur",this._focusHandler),
d.Helpers.unlisten(this.leafletContainer,"focus",this._focusHandler),
d.Helpers.unlisten(this.leafletContainer,"blur",this._focusHandler),
this.map&&this.map.remove(),this.map=null},i.prototype.updateSettings=function(i){
if(t.prototype.updateSettings.call(this,i),!this.removed&&this.leafletContainer&&(this.map&&i.background&&this.createMapBackground(),
i.navigation&&((i.navigation.minZoom||i.navigation.maxZoom)&&d.Helpers.warn("Changing of navigation.minZoom or navigation.maxZoom with updateSettings() is not yet supported."),
this.map&&i.navigation.maxBounds))){var n=i.navigation.maxBounds;
this.map.setMaxBounds(new e.Leaflet.LatLngBounds(new e.Leaflet.LatLng(n.south,n.west),new e.Leaflet.LatLng(n.north,n.east)));
}},i.prototype.projectFunc=function(t,i){return this.ensureMap(),
this.crs.latLngToPoint(new e.Leaflet.LatLng(i,t),0)},i.prototype.unprojectFunc=function(t,i){
return this.ensureMap(),this.crs.pointToLatLng(new e.Leaflet.Point(t,i),0);
},i.prototype.doAnimations=function(e){if(t.prototype.doAnimations.call(this,e),
e.changes.bounds){var i=this.scene;i.x0=i.chartLeft,i.y0=i.chartTop,
i.width=i.chartWidth,i.height=i.chartHeight,i.leftMargin=0,i.rightMargin=0,
i.topMargin=0,i.bottomMargin=0,this.map&&(this.resizing=!0,this.map.invalidateSize(null),
this.resizing=!1),this.interactionContainer.style.width=i.chartWidth+"px",
this.interactionContainer.style.height=i.chartHeight+"px"}},i;
}(d.DomLayer);e.DomLayer=k;var A=function(){function t(){this.enabled=!1,
this.distance=60,this.maxZoom=18,this.weightFunction=null,this.ignoreZeroWeight=!1;
}return t}();e.SettingsAggregation=A;var M=function(){function t(t,e,i){
this.zoom=e.zoom,this.scene=e,this.settings=t,this.chart=i}return t.orientation=function(t,e,i){
var n=(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x);return 0===n?0:n>0?1:-1;
},t.distanceLineToPoint=function(t,e,i){var n=Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y));
return Math.abs((i.x-t.x)*(e.y-t.y)-(i.y-t.y)*(e.x-t.x))/n},t.prototype.findMainNodes=function(t,e){
var i=this.settings;i.ignoreZeroWeight&&(t=t.slice());var n={},r={},s={},a=d.Helpers.isFunction(i.weightFunction);
if(a){for(var o=t.length-1;o>=0;o--){var l=t[o],h=i.weightFunction(l);
if(i.ignoreZeroWeight&&0===h){var u=t.pop();o<t.length&&(t[o]=u);
}else s[l.id]=h}t.sort(function(t,e){return s[e.id]-s[t.id]});
}for(var c,p,f,g=this.zoom/(i.distance/2),m=[],v={},o=0;o<t.length;o++){
var l=t[o],y=Math.floor(l._x*g),S=Math.floor(l._y*g);if(c=r[y]||(r[y]={}),
void 0===c[S]&&void 0===c[S-1]&&void 0===c[S+1]&&(p=r[y-1]||(r[y-1]={}),
void 0===p[S]&&void 0===p[S-1]&&void 0===p[S+1]&&(f=r[y+1]||(r[y+1]={}),
void 0===f[S]&&void 0===f[S-1]&&void 0===f[S+1]))){c[S]=m.length,
c[S+1]=m.length,c[S-1]=m.length,p[S]=m.length,p[S+1]=m.length,
p[S-1]=m.length,f[S]=m.length,f[S+1]=m.length,f[S-1]=m.length;
var b=a?s[l.id]||0:1,C={id:"__aggr_"+l.id,aggregatedWeight:b,
_originalWeight:b,_x:l._x,_y:l._y,_bounds:l._bounds,aggregatedNodes:[l],
loaded:!0};m.push(C),n[l.id]=C,v[o]=!0}}for(var x=[],o=0;o<t.length;o++)if(!v[o]){
var l=t[o],y=Math.floor(l._x*g),S=Math.floor(l._y*g),w=m[r[y][S]];
if(!w){c=r[y]||(r[y]={}),p=r[y-1]||(r[y-1]={}),f=r[y+1]||(r[y+1]={}),
x.push(c[S]),x.push(c[S-1]),x.push(c[S+1]),x.push(p[S]),x.push(p[S-1]),
x.push(p[S+1]),x.push(f[S]),x.push(f[S-1]),x.push(f[S+1]);for(var L=1/0;x.length>0;){
var T=x.pop();if(void 0!==T){var k=m[T],A=(k._x-l._x)*(k._x-l._x)+(k._y-l._y)*(k._y-l._y);
A<L&&(L=A,w=k)}}}var h=a?s[l.id]||0:1;(w.aggregatedWeight>0||h>0)&&(w._x=(w._x*w.aggregatedWeight+l._x*h)/(w.aggregatedWeight+h),
w._y=(w._y*w.aggregatedWeight+l._y*h)/(w.aggregatedWeight+h)),
w._originalWeight<h&&(w._originalWeight=h,w.id="__aggr_"+l.id),
n[l.id]=w,w.aggregatedNodes.push(l),w.aggregatedWeight+=h}for(var o=0;o<m.length;o++){
var l=m[o],M=this.scene.unproject(l._x,l._y);l.coordinates=[M.lng,M.lat];
}if(i.postProcessAggregatedNodes){var P=[];i.postProcessAggregatedNodes(m,n,P);
for(var o=0;o<P.length;o++){var l=P[o],I=this.scene.project(l.coordinates[0],l.coordinates[1]);
l._x=I.x,l._y=I.y}}var D=this.aggregateLinks(e,n);return this.findConvexShapes(m),
{nodes:m,links:D}},t.prototype.aggregateLinks=function(t,e){for(var i=[],n={},r=0;r<t.length;r++){
var s=t[r],a=e[s.from],o=e[s.to];if(a&&o){var l=void 0,h=a.id+"-"+o.id;
d.Helpers.hasProperty(n,h)?n[h].aggregatedLinks.push(s):(l={id:h,
from:a.id,to:o.id,aggregatedLinks:[s]},i.push(l),n[h]=l)}}return i;
},t.prototype.findConvexShapes=function(e){for(var i=0;i<e.length;i++){
for(var n=[],r=e[i].aggregatedNodes,s=r[0],a=r[0],o=1;o<r.length;o++){
var l=r[o];l._x<=s._x&&(s=r[o]),l._x>=a._x&&(a=r[o])}for(var h=[],u=[],o=0;o<r.length;o++){
var l=r[o];if(null!=l){var c=t.orientation({x:s._x,y:s._y},{x:a._x,
y:a._y},{x:l._x,y:l._y});c>0?h.push(l):c<0&&u.push(l)}}var d=[s],p={};
n=[],this.separateOuterPoints(s,a,u,n,p),d=d.concat(n.sort(function(t,e){
return t._x-e._x})),d.push(a),n=[],this.separateOuterPoints(a,s,h,n,p),
d=d.concat(n.sort(function(t,e){return e._x-t._x})),e[i].convexShape=d;
}},t.prototype.separateOuterPoints=function(e,i,n,r,s){if(0!==n.length){
if(1===n.length)return s[n[0].id]=1,void r.push(n[0]);for(var a=0,o=null,l=0;l<n.length;l++){
var h=n[l],u=t.distanceLineToPoint({x:e._x,y:e._y},{x:i._x,y:i._y
},{x:h._x,y:h._y});u>a&&(a=u,o=h)}s[o.id]||(r.push(o),s[o.id]=1);
for(var c=[],d=[],l=0;l<n.length;l++){var h=n[l];if(!s[h.id]){
var p=t.orientation({x:e._x,y:e._y},{x:o._x,y:o._y},{x:h._x,y:h._y
});0!==p&&p<0&&d.push(h);var f=t.orientation({x:o._x,y:o._y},{
x:i._x,y:i._y},{x:h._x,y:h._y});0!==f&&f<0&&c.push(h)}}this.separateOuterPoints(e,o,d,r,s),
this.separateOuterPoints(o,i,c,r,s)}},t.prototype.aggregate=function(t,e){
if(this.zoom>Math.pow(2,this.settings.maxZoom)){var i=[],n=[],r=this.settings.weightFunction,s=this.settings.ignoreZeroWeight,a=d.Helpers.isFunction(r),o=void 0,l=Object.create(null);
for(o=0;o<t.length;o++){var h=t[o],u=a?r(h):1;0===u&&s?l[h.id]=!0:i.push({
id:"__aggr_"+h.id,aggregatedWeight:u,_x:h._x,_y:h._y,_bounds:h._bounds,
coordinates:h.coordinates,aggregatedNodes:[h],loaded:!0})}for(o=0;o<e.length;o++){
var c=e[o];s&&l[c.from]||l[c.to]||n.push({from:"__aggr_"+c.from,
to:"__aggr_"+c.to,id:"__aggr_"+c.from+"-__aggr_"+c.to,aggregatedLinks:[c]
})}return{nodes:i,links:n}}return this.findMainNodes(t,e)},t}();
e.Aggregation=M;var P=function(t){function e(i){var n=t.call(this,d.SettingsMapping.GeoChartSettings)||this;
return n._computedLayers=[],n.theme=e.FlatTheme,n.area=new I,
n.background=new T,n.data=[],n.style={fadeTime:200,selection:{
fillColor:"rgba(200, 200, 255 ,0.7)",sizeConstant:5,sizeProportional:.2
}},n.layerTypes={shapes:{type:"shapes"},items:{type:"items",style:{
item:{hoverEffect:!1,zIndex:0}}},aggregateOnShapes:{type:"aggregateOnShapes"
},charts:{type:"charts"}},n.layersDefault=null,n.layers=[],n.navigation={
initialLat:40,initialLng:25,initialZoom:3,minZoom:0,maxZoom:18,
maxBounds:{west:-200,north:-85,east:200,south:85},initialDrilldown:[""],
drilldownLayer:"default"},n.filters={nodeFilter:null},n.interaction=new z,
n.toolbar=new d.SettingsToolbar((!1),[new d.SettingsToolbarItem("fullscreen")],"bottom","left"),
n.advanced.assets.push({url:"assets://leaflet.css",required:function(){
return!d.Helpers.isStyleSheetDefined("leaflet-tile","visibility");
}}),n.area.defaultHeight=500,n.advanced.style.loadingArcStyle.r=15,
n.advanced.style.loadingArcStyle.lineColor="red",n.advanced.style.loadingArcStyle.lineWidth=7,
n.apply(i),n._initializing=!1,n}return n(e,t),e.prototype.apply=function(e){
this.applyCompatibility(e,[{from:"layersDefault",alternative:"layerTypes"
}]),e.toolbar&&d.Helpers.error("`toolbar` is not supported on GeoChart");
var i=t.prototype.apply.call(this,e);return(this._initializing||i.layers||i.layerTypes)&&(this._computedLayers=d.SettingsHelper.mergeDefaultValues(this.layers,this.layersDefault,this.layerTypes,F.createInstance,F.getMapping,"layers")),
i},e}(u.Settings);P.FlatTheme={advanced:{themeCSSClass:"DVSL-flat"
}},e.Settings=P;var I=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.style=new D,e}return n(e,t),e}(d.SettingsArea);e.SettingsArea=I;
var D=function(t){function e(){return t.apply(this,arguments)||this;
}return n(e,t),e}(d.SettingsAreaStyle);e.SettingsAreaStyle=D;var N=function(t){
function e(){var e=t.call(this)||this;return e.aggregatedShape={
mode:1,lineColor:"rgba(0,0,128,0.5)",lineWidth:1,fillColor:"rgba(0,0,128,0.3)"
},e.scaleObjectsWithZoom=!1,e.node.radius=10,e.node.fillColor="orange",
e.node.lineColor="red",e.linkLabel.scaleWithSize=!1,e.linkLabel.scaleWithZoom=!1,
e.linkLabel.backgroundStyle.fillColor="white",e.linkLabel.backgroundStyle.lineColor="black",
e.nodeLabel.scaleWithSize=!1,e.nodeLabel.scaleWithZoom=!1,e.nodeLabel.backgroundStyle.fillColor="white",
e.nodeLabel.backgroundStyle.lineColor="black",e}return n(e,t),
e}(u.SettingsNodesLayerStyle);e.SettingsNodesLayerStyle=N;var F=function(){
function t(){this.enabled=!0,this.id="default",this.name="",this.type="shapes",
this.minZoom=0,this.maxZoom=20,this.perZoomStyle=!1,this.data={
id:"default"}}return t.getMapping=function(t,e){if(t&&e.type&&t.type!==e.type)throw new Error("It is not possible to change the value of `type` property for an existing layer.");
switch(t?t.type:e.type){case"shapes":return d.SettingsMapping.GeoChartSettingsLayerShapes;
case"items":return d.SettingsMapping.GeoChartSettingsLayerItems;
case"charts":return d.SettingsMapping.GeoChartSettingsLayerCharts;
case"aggregateOnShapes":return d.SettingsMapping.GeoChartSettingsLayerAggregated;
default:throw new Error("The value '"+e.type+"' is not valid for the `type` property of a layer. Valid values are: shapes, items, charts, aggregateOnShapes.");
}},t.createInstance=function(t,e){switch(e||t.type){case"shapes":
return new E;case"items":return new O;case"charts":return new H;
case"aggregateOnShapes":return new B;default:throw new Error("The value '"+(e||t.type)+"' is not valid for the `type` property of a layer. Valid values are: shapes, items, charts, aggregateOnShapes.");
}},t}();e.SettingsLayerBase=F;var E=function(t){function i(){
var i=t.call(this)||this;return i.style=new e.SettingsShapesLayerStyle,
i.type="shapes",i}return n(i,t),i}(F);e.SettingsLayerShapes=E;
var O=function(t){function e(){var e=t.call(this)||this;return e.style=new N,
e.aggregation=new A,e.layout=new G,e.auras=new u.SettingsNodesLayerAuras,
e.type="items",e}return n(e,t),e}(F);e.SettingsLayerItems=O;var R=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.shapesLayer=null,
e}return n(e,t),e}(F);e.SettingsLayerOverlay=R;var B=function(t){
function e(){var e=t.call(this)||this;return e.aggregationField=null,
e.aggregation="count",e.aggregationFunction=null,e.styleFunction=null,
e.type="aggregateOnShapes",e}return n(e,t),e}(R);e.SettingsLayerAggregated=B;
var H=function(t){function e(){var e=t.call(this)||this;return e.chartType="piechart",
e.settings=null,e.settingsFunction=null,e.autoSize=!1,e.data={
id:null},e.type="charts",e}return n(e,t),e}(R);e.SettingsLayerCharts=H;
var z=function(t){function e(){var e=t.call(this)||this;return e.mode="drilldown",
e.zooming=new U,e.nodesMovable=!1,e.selection.enabled=!1,e}return n(e,t),
e}(u.SettingsInteraction);e.SettingsInteraction=z;var U=function(t){
function e(){var e=t.apply(this,arguments)||this;return e.zoomInOnDoubleClick=!0,
e}return n(e,t),e}(u.SettingsInteractionZooming);e.SettingsInteractionZooming=U;
var _=function(t){function e(e){var i=t.call(this)||this;return i.animationOrder=2e3,
i.updateOrder=1100,i.scene=null,i.events=null,i.currentObject=null,
i.chart=e,i.scene=e.scene,i.events=e.events,i.dragPointers={},
i}return n(e,t),e.prototype.onPointerMove=function(t){this.updateCurrentObject(t),
this.currentObject&&(this.updateCursor(t),t.hovered=!0)},e.prototype.onPointerOut=function(t){
this.switchCurrentObject(null,null,t)},e.prototype.onPointerDown=function(t){
this.updateCurrentObject(t);var e=this.currentObject;e instanceof u.Node&&(this.updateSelection(t,e,!0),
this.updateCursor(t),this.scene.settings.interaction.nodesMovable&&(this.setPointerNode(t,e),
t.consumed=!0))},e.prototype.onPointerUp=function(t){this.dragPointers[t.identifier]&&(this.dragPointers[t.identifier].dragging&&(t.consumed=!0,
this.updateLastNode(t,this.dragPointers[t.identifier].node)),
this.updateCursor(t),this.setPointerNode(t,null))},e.prototype.onPointerCancel=function(t){
this.onPointerUp(t)},e.prototype.onPointerDrag=function(t){var e=this.dragPointers[t.identifier];
if(e){var i=this.scene.fromDisplay(t.x,t.y),n=i.x,r=i.y;e.mouseX=t.x,
e.mouseY=t.y,e.dragging=!0,this.dragNodes(e,n,r,this.scene.settings.interaction.selection.lockNodesOnMove),
this.updateCursor(t),t.consumed=!0}},e.prototype.onClick=function(t){
this.scene.xyInChart(t.x,t.y)&&((!this.currentObject||!this.scene.settings.interaction.selection.nodesSelectable&&this.currentObject.isNode||!this.scene.settings.interaction.selection.linksSelectable&&this.currentObject.isLink)&&this.updateSelection(t,null,!1),
this.chart.notifyClick(t,this.buildEventArgs(t)),t.defaultPrevented&&(t.consumed=!0));
},e.prototype.onRightClick=function(t){if(this.scene.xyInChart(t.x,t.y)){
var e=this.buildEventArgs(t);this.updateSelection(t,this.currentObject,!1),
this.chart.notifyRightClick(t,e),t.defaultPrevented&&(t.consumed=!0);
}},e.prototype.onDoubleClick=function(t){this.scene.xyInChart(t.x,t.y)&&(this.chart.notifyDoubleClick(t,this.buildEventArgs(t)),
t.defaultPrevented&&(t.consumed=!0))},e.prototype.onTripleClick=function(t){
this.scene.xyInChart(t.x,t.y)&&(this.chart.notifyTripleClick(t,this.buildEventArgs(t)),
t.defaultPrevented&&(t.consumed=!0))},e.prototype.doAnimations=function(t){
for(var e in this.dragPointers){var i=this.dragPointers[e],n=this.scene.fromDisplay(i.mouseX,i.mouseY),r=n.x,s=n.y;
this.dragNodes(i,r,s,!1),t.changes.coordinates=!0}},e.prototype.updateSelection=function(t,e,i){
this.scene.settings.interaction.selection.enabled&&(t.shiftKey||t.ctrlKey||!(!e||!this.scene.settings.interaction.selection.nodesSelectable&&e.isNode||!this.scene.settings.interaction.selection.linksSelectable&&e.isLink)?e&&t.ctrlKey?(e.selected?this.scene.removeFromSelection(e):this.scene.addToSelection(e),
this.notifySelectionChanged("user")):e&&t.shiftKey||i&&e.selected?this.scene.addToSelection(e)&&this.notifySelectionChanged("user"):e&&this.setSelection([e],"user"):this.setSelection([],"user"));
},e.prototype.dragNodes=function(t,e,i,n){var r=e+t.x-t.node.x,s=i+t.y-t.node.y;
if(0!==r||0!==s){if(this.moveNode(t.node,r,s,n),t.extraNodes&&t.extraNodes.length>0)for(var a=0;a<t.extraNodes.length;a++)this.moveNode(t.extraNodes[a],r,s,n);
this.events.notifySceneChanges({coordinates:!0})}},e.prototype.moveNode=function(t,e,i,n){
if(t.x+=e,t.y+=i,n&&(t.userLock=!0),!this.scene.settings.interaction.selection.allowMoveNodesOffscreen){
var r=this.scene.getVisibleBounds(),s=1.2*t.renderHwidth/this.scene.zoom,a=1.2*t.renderHheight/this.scene.zoom;
t.x=Math.min(Math.max(t.x,r.x0+s),r.x1-s),t.y=Math.min(Math.max(t.y,r.y0+a),r.y1-a);
}},e.prototype.setPointerNode=function(t,e){var i=t.identifier,n=this.dragPointers[i];
if(n){if(n.node.locks--,n.extraNodes&&n.extraNodes.length>0)for(var r=0;r<n.extraNodes.length;r++)n.extraNodes[r].locks--;
delete this.dragPointers[i]}if(e){var s=this.scene.fromDisplay(t.x,t.y),a=s.x,o=s.y,l=null;
if(!d.Helpers.hasProperties(this.dragPointers)&&this.scene.selection.length>0){
l=[];for(var r=0;r<this.scene.selection.length;r++){var h=this.scene.selection[r];
h!==e&&h instanceof u.Node&&(h.locks++,l.push(h))}}this.dragPointers[t.identifier]={
x:e.x-a,y:e.y-o,node:e,extraNodes:l,mouseX:t.x,mouseY:t.y,dragging:!1
},e.locks++}},e.prototype.updateCurrentObject=function(t){if(this.chart.renderer&&this.scene.xyInChart(t.x,t.y)){
var e=this.chart.renderer.findObjectAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance);
this.switchCurrentObject(e?e.object:null,e?e.details:null,t)}
},e.prototype.updateCursor=function(t){this.currentObject&&this.currentObject.cursor?t.cursor=this.currentObject.cursor:t.cursor="default";
},e.prototype.switchCurrentObject=function(t,e,i){t===this.currentObject&&e===this.currentItem||(i.changes.current=!0,
this.scene.setActiveObject(t,e),this.currentObject=t,this.currentItem=e,
this.chart.notifyHoverChanged(i,this.chart.createEventArguments(null,"api")));
},e.prototype.buildEventArgs=function(t){var e=this.chart.createEventArguments(t,"user");
e.clickItem=this.currentItem;var i=this.currentObject;return i instanceof u.Node?(e.clickNode=i,
this.updateLastNode(t,i)):e.clickLink=i,e},e.prototype.updateLastNode=function(t,e){
this.scene.lastClickedNode=e,this.scene.settings.interaction.zooming.autoZoomAfterClick&&(this.scene.autoZoomMode=!0,
t.changes.zoom=!0)},e.prototype.setSelection=function(t,e){var i=this.scene.setSelection(t);
i&&this.notifySelectionChanged(e)},e.prototype.notifySelectionChanged=function(t){
this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(this.chart.createEventArguments(null,t));
},e}(d.ChartElement);e.Selection=_;var G=function(){function t(){
this.mode="static",this.nodeSpacing=3,this.anchorStrength=1}return t;
}();e.SettingsNodesLayout=G;var j=function(){function t(){}return t;
}(),W=function(){function t(t,e,i){this.initialLoad=!0,this.scene=t,
this.settings=i,this.layer=e,this.random=new d.Random(1)}return t.isNodeLocked=function(t){
return t.userLock||t.locks>0||t.anchorMode===u.NodeAnchorMode.Fixed;
},t.prototype.doAnimations=function(e,n){var r=this,s=!1,a=this.layer.hasTopologyChanges(),o="dynamic"===this.settings.mode;
if(o&&"undefined"==typeof i.Chipmunk){if(t.cpRequestInitiated)return;
if(this.scene.assetsLoader.loadAssetsList([{url:"assets://cp.js",
required:function(){return"undefined"==typeof i.Chipmunk}}],function(){
r.layer.events.notifySceneChanges({requestPaint:!0})}))return void(t.cpRequestInitiated=!0);
}for(var l=this.layer.nodes(),h=this.layer.getGeometry(),u=0;u<l.length;u+=1){
var c=l[u];c.shape.adaptToViewport(h.txm,h.txa,h.tym,h.tya,h.zoom);
}if(this.initialLoad&&(a=!0,n=!0),a&&(this.random=new d.Random(1),
this.placeNewNodes(o),s=!0),o){this.placeModifiedNodes();var p=this.updateLayout(e.dtime,a,n,e.changes.zoom);
p&&(e.animating=!0,s=!0)}else this.placeModifiedNodes(),this.computeNodeAnchorCoordinates();
s&&(e.changes.position=!0),this.initialLoad=!1},t.prototype.computeNodeAnchorCoordinates=function(){
for(var t=this.layer.getNodesSceneZoom(),e=0,i=this.layer.nodes();e<i.length;e++){
var n=i[e],r=n.shape.getAnchor();n.x=n.anchorX-r.x*t,n.y=n.anchorY-r.y*t;
}},t.prototype.placeNewNodes=function(t){for(var e=this.layer.getNodesSceneZoom(),i=0,n=this.layer.nodes();i<n.length;i++){
var r=n[i],s=r.shape.getAnchor();r.anchorX=r.data._x,r.anchorY=r.data._y,
null!==r.x&&null!==r.y||(r.x=r.anchorX-s.x*e,r.y=r.anchorY-s.y*e,
t&&(r.x+=this.random.get()*e))}},t.prototype.placeModifiedNodes=function(){
for(var t in this.layer.modifiedNodes){var e=this.layer.modifiedNodes[t];
e.anchorX=e.data._x,e.anchorY=e.data._y}},t.prototype.removeNode=function(t){
var e=this.idToState[t.id],i=this.cpSpace;i.removeShape(e.shape),
e.locked||(i.removeBody(e.body),i.removeShape(e.anchorShape)),
delete this.idToState[t.id]},t.prototype.addNode=function(t,e){
var n=new j,r=this.cpSpace,s=this.layer.getNodesSceneZoom(),a=t.shape.getAnchor();
if(n.locked=e,this.idToState[t.id]=n,!e){var o=r.addBody(new i.Chipmunk.Body(1,1/0));
n.body=o,o.setPos(i.Chipmunk.v(t.x+a.x*s,t.y+a.y*s))}return n;
},t.prototype.updateLayout=function(e,n,r,s){this.cpSpace||(this.cpSpace=new i.Chipmunk.Space,
this.cpSpace.sleepTimeThreshold=1,this.cpSpace.damping=.2,this.idToState={},
n=!0);var a=this.cpSpace,o=this.idToState,l=this.settings.nodeSpacing,h=this.settings.anchorStrength,u=this.layer.getNodesSceneZoom();
this.zoom=u,this.cpSpace.collisionSlop=2*u,this.cpSpace.idleSpeedThreshold=5*u;
var c=this.layer.nodes();if(n){for(var p in this.layer.deletedNodes)this.removeNode(this.layer.deletedNodes[p]);
for(var p in this.layer.newNodes){var f=this.layer.newNodes[p];
this.addNode(f,t.isNodeLocked(f))}}if(r||n)for(var g=0;g<c.length;g+=1){
var f=c[g],m=o[f.id],v=t.isNodeLocked(f),y=null;m&&v===m.locked||(m&&(m.body&&(y=m.body.p),
this.removeNode(f)),m=this.addNode(f,v));var S=(Math.max(f.bounds.w(),f.bounds.h())+l)/2*u,b=f.shape.getAnchor(),C=f.anchorX,x=f.anchorY;
if(s||m.prevAX!==C||m.prevAY!==x||m.prevR!==S){if(m.locked){var w=m.shape;
w&&a.removeShape(w),y||(y=i.Chipmunk.v(C-b.x*u,x-b.y*u)),y.x-=b.x*u,
y.y-=b.y*u,w=a.addShape(new i.Chipmunk.CircleShape(a.staticBody,S,y)),
m.p=y,w.setElasticity(0),w.setFriction(0),m.shape=w}else{if(m.prevR!==S){
var w=m.shape;w&&a.removeShape(w),w=a.addShape(new i.Chipmunk.CircleShape(m.body,S,i.Chipmunk.v(-b.x*u,-b.y*u))),
w.setElasticity(0),w.setFriction(0),m.shape=w}if(s||m.prevAX!==C||m.prevAY!==x){
var L=m.anchorShape;L&&a.removeShape(L),L=a.addShape(new i.Chipmunk.CircleShape(a.staticBody,2*u,i.Chipmunk.v(C,x))),
L.setElasticity(0),L.setFriction(0),m.anchorShape=L}}m.prevAX=C,
m.prevAY=x,m.prevR=S}}for(var g=0;g<c.length;g+=1){var f=c[g],m=o[f.id];
if(!m.locked){var T=f.anchorX,k=f.anchorY,A=m.body.p.x,M=m.body.p.y,P=m.body,I=A-T,D=M-k,N=P.vx,F=P.vy;
I+=.5*N,D+=.5*F;var E=-Math.abs(3*I)*d.Helpers.sign(I),O=0;O=D<0?-2*D:-5*D,
P.f=i.Chipmunk.v(E*h,O*h)}}a.step(1/60);for(var R=!0,g=0;g<c.length;g+=1){
var f=c[g],m=o[f.id],b=f.shape.getAnchor();m.locked?m.p?(f.x=m.p.x,
f.y=m.p.y):(f.x=f.data._x-b.x*u,f.y=f.data._y-b.y*u):(f.x=m.body.p.x-b.x*u,
f.y=m.body.p.y-b.y*u,R=R&&m.body.isSleeping())}return!R},t}();
W.cpRequestInitiated=!1,e.NodesLayout=W;var V=function(t){function e(e,i,n){
var r=t.call(this,e,i,n)||this;return r.layout=null,r.hoveredNode=null,
r.layout=new W(e.scene,r,i.layout),r}return n(e,t),e.prototype.postprocessStyle=function(e){
t.prototype.postprocessStyle.call(this,e);var i=e.changes.zoom||this.hasStyleChanges();
this.layout.doAnimations(e,i)},e.prototype.paintHoverShape=function(t){
var e=this.style.aggregatedShape;switch(e.mode){case 0:break;default:
case 1:if(null===this.hoveredNode||!this.hoveredNode.hovered||this.hoveredNode.removed){
var i=this.modifiedNodes;this.hoveredNode=null;for(var n in i)if(i[n].hovered){
this.hoveredNode=i[n];break}}this.hoveredNode&&this.paintConvex(this.hoveredNode,t,e);
break;case 2:for(var r=this.nodes(),s=0;s<r.length;s++){var a=r[s];
a.removed||this.paintConvex(a,t,e)}break;case 3:for(var o=this.nodes(),s=0;s<o.length;s++){
var a=o[s];!a.removed&&a.selected&&this.paintConvex(a,t,e)}}},
e.prototype.paintConvex=function(t,e,i){var n=t.data,r=n.convexShape;
if(r&&!(r.length<2)){var s=this.getGeometry(),a={},o=d.Graphics.beginStrokeAndFill(e,i);
a[r[0].id]=1,o.moveTo(r[0]._x*s.txm+s.txa,r[0]._y*s.tym+s.tya);
for(var l=1;l<r.length;l++)a[r[l].id]=1,o.lineTo(r[l]._x*s.txm+s.txa,r[l]._y*s.tym+s.tya);
o.closePath(),d.Graphics.endStrokeAndFill(e,o,i);for(var l=0;l<n.aggregatedNodes.length;l++){
var h=n.aggregatedNodes[l];a[h.id]||(o=d.Graphics.beginStroke(e,i),
o.arc(h._x*s.txm+s.txa,h._y*s.tym+s.tya,1,0,2*Math.PI,!1),d.Graphics.endStroke(e,o,i));
}}},e.prototype.paint=function(e){this.paintHoverShape(e.context),
t.prototype.paint.call(this,e)},e}(u.NodesLayer);e.NodesLayer=V;
var Z=function(t){function e(){var e=t.call(this)||this;return e.stack=[],
e.zoomLevel=0,e.mainDataEnabled=!1,e.project=null,e.unproject=null,
e}return n(e,t),e.prototype.push=function(t){return this.stack.push(t);
},e.prototype.peek=function(){return 0===this.stack.length?null:this.stack[this.stack.length-1];
},e.prototype.pop=function(){return 0===this.stack.length?null:this.stack.pop();
},e.prototype.getVisibleBoundsLatLon=function(){var t=this.fromDisplay(this.x0,this.y0),e=t.x,i=t.y;
t=this.fromDisplay(this.x0+this.width,this.y0+this.height);var n=t.x,r=t.y;
return this.unprojectRect(new d.Rect(e,i,n,r))},e.prototype.unprojectRect=function(t){
var e=this.unproject(t.x0,t.y0),i=this.unproject(t.x1,t.y1);return new d.Rect(Math.min(e.lng,i.lng),Math.min(e.lat,i.lat),Math.max(e.lng,i.lng),Math.max(e.lat,i.lat));
},e}(u.Scene);e.Scene=Z;var Y=function(t){function e(){var e=t.apply(this,arguments)||this;
return e.shapeSimplificationPrecision=1.5,e.node={fillColor:"#c7dae0",
lineColor:null,lineWidth:null,radius:30,shadowColor:null,lineDash:null,
expandable:!1},e}return n(e,t),e}(N);e.SettingsShapesLayerStyle=Y;
var q=function(t){function e(e,i){return t.call(this,e,i)||this;
}return n(e,t),e.prototype.postprocessNode=function(t){t.currentItems=[],
t.label,this.postprocessItems(t)},e.prototype.postprocessLink=function(t){
var e=[];if(t.label){var i=new d.Label(t.labelStyle);i.text=t.label.toString(),
i.style.px=0,i.style.py=0,e.push(i)}t.currentItems=e,this.postprocessItems(t);
},e}(u.ItemsStyle);e.ShapesStyle=q;var X=function(t){function e(e,i){
var n=t.call(this,e,i)||this;return n.style=i.style,n}return n(e,t),
e.prototype.createStyleUpdater=function(t){return new q(t,this);
},e.prototype.paintSelection=function(t,e,i){var n=this.getGeometry(),r=n.txm,s=n.txa,a=n.tym,o=n.tya,l=1/r,h=t.context,u=this.style.selection;
h.beginPath();for(var c=0;c<e.length;c++)for(var d=e[c],p=0,f=this.getNodeCoords(d,l);p<f.length;p++){
var g=f[p],m=g[0]*r+s,v=g[1]*a+o;h.moveTo(m,v);for(var y=2;y<=g.length-2;y+=2)h.lineTo(g[y]*r+s,g[y+1]*a+o);
h.closePath()}h.fillStyle=u.fillColor,h.strokeStyle=u.fillColor,
h.lineWidth=2*u.sizeConstant,h.fill(),h.stroke()},e.prototype.paintLinks=function(t,e){},
e.prototype.paintNodes=function(t,e){for(var i=t.context,n=this.getGeometry(),r=n.txm,s=n.txa,a=n.tym,o=n.tya,l=n.zoom,h=n.x0w,u=n.y0w,c=n.x1w,p=n.y1w,f=1/r,g=l>this.style.nodeDetailMinZoom,m=this.style.nodeDetailMinSize*this.style.nodeDetailMinSize*f*f,v=this.style.nodeLabelScaleBase,y=0;y<e.length;y++){
var S=e[y];if(S.removed)this.deleteNode(S);else if(S.data){var b=S.bounds;
if(!(b.x1<h||b.x0>c||b.y1<u||b.y0>p)){var C=S.opacity,x=g&&b.area()>m||S.hovered;
if(C<1&&(i.globalAlpha=C),x){S.items.sort(function(t,e){return t.zIndex-e.zIndex;
});var w=(b.x1+b.x0)/2*r+s,L=(b.y1+b.y0)/2*a+o,T=(b.x1-b.x0)/2*r,k=(b.y1-b.y0)/2*a;
this.paintNodeDetails(S,w,L,T,k,l,v,t,!0)}if(S.fillColor||S.lineColor){
for(var A=d.Graphics.beginStrokeAndFill(i,S),M=0,P=this.getNodeCoords(S,f);M<P.length;M++){
var I=P[M],D=I[0]*r+s,N=I[1]*a+o;A.moveTo(D,N);for(var F=2;F<=I.length-2;F+=2)A.lineTo(I[F]*r+s,I[F+1]*a+o);
A.closePath()}d.Graphics.endStrokeAndFill(i,A,S)}if(x){var w=(b.x1+b.x0)/2*r+s,L=(b.y1+b.y0)/2*a+o,T=(b.x1-b.x0)/2*r,k=(b.y1-b.y0)/2*a;
this.paintNodeDetails(S,w,L,T,k,l,v,t,!1)}C<1&&(i.globalAlpha=1);
}}}return!1},e.prototype.findObjectAt=function(t,e,i){for(var n=this.scene.fromDisplay(t,e),r=n.x,s=n.y,a=1/this.scene.zoom,o=i*a,l=null,h=this.nodes(),u=h.length-1;u>=0;u--){
var c=h[u];if(!c.removed){var p=this.getNodeCoords(c,a),f=d.Geometry.distanceToPolygonSq(r,s,p),g=o*o;
if(f<=0)return{object:c,details:null};if(f<g){var m=Math.sqrt(f);
m<o&&(o=m,l=c)}}}return{object:l,details:null}},e.prototype.getNodeCoords=function(t,e){
var i=this.style.shapeSimplificationPrecision;if(!(i>0))return t.coordinates;
i*=e;var n=t.coordinatesCachePrecision;if(n<=i&&2*n>i)return t.coordinatesCache;
var r,s=[];r=n<i?t.coordinatesCache:t.coordinates;for(var a=0;a<r.length;a++){
var o=r[a],l=d.Geometry.computeBoundsSize(o);l>4*i&&(o.length>10&&(o=d.Geometry.simplify(o,i)),
s.push(o))}return t.coordinatesCachePrecision=i,t.coordinatesCache=s,
s},e}(u.ItemsLayer);e.ShapesLayer=X;var Q=function(t){function e(e,i,n){
var r=t.call(this,e)||this;return r.layerSettings=n,r.parentId=null,
r.baseLayer=i,r}return n(e,t),e.prototype.findObjectAt=function(t,e,i){
return null},e.prototype.nodes=function(){return this.baseLayer.nodes();
},e.prototype.links=function(){return this.baseLayer.links()},
e.prototype.getModified=function(){return this.baseLayer.getModified();
},e.prototype.hasTopologyChanges=function(){return this.baseLayer.hasTopologyChanges();
},e.prototype.hasStyleChanges=function(){return this.baseLayer.hasStyleChanges();
},e.prototype.getGeometry=function(){return this.baseLayer.getGeometry();
},e}(d.Layer);e.OverlayLayerBase=Q;var J=function(e){function i(t,i,n,r){
var s=e.call(this,t,i,n)||this;return s.idToChart={},s.chart=r,
s}return n(i,e),i.prototype.updateStyle=function(t){},i.prototype.postprocessStyle=function(t){
for(var e in this.baseLayer.newNodes){var i=this.baseLayer.newNodes[e];
this.idToChart[e]=this.createChart(i)}var n;for(var e in this.baseLayer.modifiedNodes){
var i=this.baseLayer.modifiedNodes[e];this.baseLayer.newNodes.hasOwnProperty(e)||(n=this.idToChart[e],
n?this.updateChart(n,i):this.idToChart[e]=this.createChart(i));
}for(var e in this.baseLayer.deletedNodes)n=this.idToChart[e],
n&&(delete this.idToChart[e],this.removeChart(n));for(var r=0,s=this.nodes();r<s.length;r++){
var i=s[r];n=this.idToChart[i.id],n&&this.updateXY(n,i)}},i.prototype.paint=function(t){},
i.prototype.createChart=function(e){var i=this.layerSettings.chartType,n=this.getChartSettings(e);
if(!n)return null;n.parentChart=this.chart.api,n.area?n.area.width||(n.area.width=100,
n.area.height=100):n.area={width:100,height:100};var r;return r="piechart"===i?new t.PieChart(n):"facetchart"===i?new t.FacetChart(n):"timechart"===i?new t.TimeChart(n):null;
},i.prototype.getChartSettings=function(t){return this.layerSettings.settingsFunction?this.layerSettings.settingsFunction(t,t.data):this.layerSettings.settings;
},i.prototype.updateChart=function(t,e){var i=this.getChartSettings(e);
t.updateSettings(i)},i.prototype.removeChart=function(t){t.remove();
},i.prototype.updateXY=function(t,e){var i=this.scene.toDisplay(e.x,e.y),n=i.x,r=i.y,s=0,a=0,o=t._impl.settings.area;
if(this.layerSettings.autoSize)throw"TODO: implement autoSize";
s=o.width,a=o.height;var l=n-s/2,h=r-a/2;o.left===l&&o.top===h&&o.width===s&&o.height===a||t.updateSettings({
area:{left:n-s/2,top:r-a/2,width:s,height:a}})},i.prototype.remove=function(){
for(var t in this.idToChart)this.removeChart(this.idToChart[t]);
this.idToChart={}},i}(Q);e.ChartsLayer=J;var K=function(){function t(t,e,i,n){
this.drilldownId=n,this.layerSettings=i,this.data=e,this.chart=t,
this.loading=!0,this.scene=t.scene,this.layer=this.createLayer(),
this.layer.drilldownId=this.drilldownId,this.dataBounds=d.Rect.createEmpty(),
this.expandedNode=null}return t.calculateShapeCentroid=function(t){
var e,i,n=0,r=0;for(e=0;e<t.coordinates.length;e++)i=d.Geometry.calculatePolyArea(t.coordinates[e]),
Math.abs(i)>Math.abs(r)&&(r=i,n=e);if(0===r)return t.x=(t.bounds.x0+t.bounds.x1)/2,
void(t.y=(t.bounds.y0+t.bounds.y1)/2);var s=d.Geometry.calculatePolyCentroid(t.coordinates[n],r);
t.x=s.x,t.y=s.y},t.prototype.createLayer=function(){return"shapes"===this.layerSettings.type?new X(this.scene,this.layerSettings):"items"===this.layerSettings.type?new e.NodesLayer(this.chart,this.layerSettings,(!1)):null;
},t.prototype.onSceneChange=function(t){var e,i,n,r=this.data.dataSettings,s=this.layerSettings,a=r.prefetchRatio;
r.perBoundsData?(e=this.chart.scene.getVisibleBounds(),i=e.clone().inflate(1+a/2),
n=e.clone().inflate(1+a)):i=n=e=this.data.getProjectedBounds();
var o=t.changes.geoChartDataNodesIds?(t.changes.geoChartDataNodesIds[r.id]||{})[this.drilldownId||""]:null,l=s instanceof O&&s.aggregation.enabled;
if(this.dataBounds.isEmpty()||o||!e.isInside(this.dataBounds)||t.changes.zoom&&(r.perZoomData||l)){
this.loading=!1,this.data.setViewParams(r.aggregationGridSize/this.scene.zoom,this.scene.zoomLevel,e,i,n);
var h=this.data.getData(this.drilldownId),u=h.nodes,c=h.links,d=h.hasData,p=h.loading,f=u.length;
if(d||f>0){if(this.chart.log("Layer "+this.layerSettings.id+": Updating view rect to "+i+", contains "+f+" objects"),
l){var g=new M(s.aggregation,this.scene,this.chart),m=g.aggregate(u,c);
u=m.nodes,c=m.links}this.applyVisibleNodes(this.layer,u,c,null),
this.dataBounds=i}this.loading=p}else e.area()*(1+a)*(1+a)<this.dataBounds.area()/5&&(i=e.inflate(1+a),
this.chart.log("Layer "+this.layerSettings.id+": Shrinking view to "+i),
this.shrinkVisibleBounds(i),this.dataBounds=i);if(s.perZoomStyle&&t.changes.zoom){
for(var v=0,y=this.layer.nodes();v<y.length;v++)this.layer.touchNode(y[v]);
for(var S=0,b=this.layer.links();S<b.length;S++)this.layer.touchLink(b[S]);
}},t.prototype.updateStyle=function(t){this.layer.setBounds(this.scene.x0,this.scene.y0,this.scene.x0+this.scene.width,this.scene.y0+this.scene.height),
this.layer.updateStyle(t)},t.prototype.postprocessStyle=function(t){
this.layer.postprocessStyle(t)},t.prototype.remove=function(){},
t.prototype.paint=function(t){this.layer.paint(t)},t.prototype.findObjectAt=function(t,e,i){
return this.layer.findObjectAt(t,e,i)},t.prototype.findObjectById=function(t){
return this.layer.findObjectById(t)},t.prototype.touchObject=function(t){
var e=this.layer,i=e.findObjectById(t);i&&e.touchNodeOrLink(i);
},t.prototype.setExpandedNode=function(t){this.expandedNode&&(this.expandedNode.expanded=!1,
this.layer.touchNode(this.expandedNode),this.expandedNode=null),
t&&(this.expandedNode=this.layer.idToNode[t],this.expandedNode&&(this.expandedNode.expanded=!0,
this.layer.touchNode(this.expandedNode)))},t.prototype.applyVisibleNodes=function(e,i,n,r){
for(var s=e.idToNode,a={},o={},l="shapes"===this.layerSettings.type,h=0;h<i.length;h++){
var u=i[h],c=l&&u._coordinates||!l&&u.hasOwnProperty("_x");if(c){
var d=u.id;a[d]=!0;var p=e.addNode(d);p.data=u,l&&(p.coordinates=u._coordinates,
p.bounds=u._bounds,t.calculateShapeCentroid(p)),p.parentNode=r;
}}for(var f=0;f<n.length;f++){var g=n[f],m=e.addLink(g.id,g.from,g.to);
m.data=g,o[m.id]=!0}for(var d in s){var p=s[d];if(!a.hasOwnProperty(d)){
e.removeNode(p);for(var v=0;v<p.links.length;v++)e.removeLink(p.links[v]);
}}var y=e.idToLink;for(var d in y)o.hasOwnProperty(d)||e.removeLink(y[d]);
},t.prototype.shrinkVisibleBounds=function(t){for(var e in this.layer.idToNode){
var i=this.layer.idToNode[e];i.data._bounds.isOutside(t)&&this.layer.removeNode(i);
}},t}(),$=function(){function t(t,e,i,n){this.data=null,this.drilldownId=n,
this.layerSettings=i,this.baseLayer=e,this.chart=t,this.scene=t.scene,
this.loading=!1,this.layer=this.createLayer()}return t.prototype.createLayer=function(){
return"charts"===this.layerSettings.type?new J(this.scene,this.baseLayer.layer,this.layerSettings,this.chart):null;
},t.prototype.onSceneChange=function(t){},t.prototype.updateStyle=function(t){
this.layer.updateStyle(t)},t.prototype.postprocessStyle=function(t){
this.layer.postprocessStyle(t)},t.prototype.setExpandedNode=function(t){},
t.prototype.paint=function(t){this.layer.paint(t)},t.prototype.findObjectAt=function(t,e,i){
return null},t.prototype.findObjectById=function(t){return null;
},t.prototype.touchObject=function(t){},t.prototype.remove=function(){
this.layer.remove()},t}(),tt=function(){function t(t,e,i,n,r){
this.firstTime=!0,this.drilldownId=r,this.layerSettings=n,this.data=i,
this.baseLayer=e,this.chart=t,this.loading=!0,this.scene=t.scene,
this.dataBounds=d.Rect.createEmpty(),this.nodeToAggregated={},
this.pendingNodes={}}return t.prototype.onSceneChange=function(t){
if(this.firstTime||this.layerSettings.perZoomStyle&&t.changes.zoom||t.changes.data){
this.firstTime=!1;for(var e=this.baseLayer.layer,i=0,n=e.nodes();i<n.length;i++)e.touchNode(n[i]);
for(var r=0,s=e.links();r<s.length;r++)e.touchLink(s[r])}},t.prototype.updateStyle=function(t){
var e=this.data.dataSettings,i=this.layerSettings,n=this.baseLayer.layer.modifiedNodes,r=t.changes.geoChartDataNodesIds?(t.changes.geoChartDataNodesIds[e.id]||{})[this.drilldownId||""]:null;
if(d.Helpers.hasProperties(n)||d.Helpers.hasProperties(r)){var s=i.styleFunction;
for(var a in n){var o=n[a];this.nodeToAggregated.hasOwnProperty(o.id)?s(o,this.nodeToAggregated[o.id]):this.pendingNodes[a]=o;
}if(!d.Helpers.hasProperties(this.pendingNodes))return void(this.loading=!1);
var l;if(e.perBoundsData){l=d.Rect.createEmpty();for(var a in this.pendingNodes){
var o=this.pendingNodes[a];l.addRect(o.data._bounds)}}else l=this.data.getProjectedBounds();
this.data.setViewParams(e.aggregationGridSize/this.scene.zoom,this.scene.zoomLevel,l,l,l);
var h=this.data.getData(this.drilldownId),u=h.nodes,c=h.loading;
if(!c){for(var a in this.pendingNodes){var o=this.pendingNodes[a],p=this.computeAggr(o.data._bounds,o.data._coordinates,u);
this.nodeToAggregated[o.id]=p,s&&s(o,p)}this.pendingNodes={}}
this.loading=c}},t.prototype.postprocessStyle=function(t){},t.prototype.computeAggr=function(t,e,i){
var n=this.layerSettings;if(n.aggregationFunction){for(var r=new Array,s=0;s<i.length;s++){
var a=i[s],o=a._x,l=a._y;t.containsPoint(o,l)&&d.Geometry.isInsidePolygon(o,l,e)&&r.push(a);
}return n.aggregationFunction(r)}var h=n.aggregation,u=n.aggregationField,c=0,p=function(){
for(;c<i.length&&(!t.containsPoint(i[c]._x,i[c]._y)||!d.Geometry.isInsidePolygon(i[c]._x,i[c]._y,e));)c+=1;
return c<i.length},f=function(){var t=i[c][u];return c+=1,t};return d.Helpers.aggregate(h,p,f);
},t.prototype.setExpandedNode=function(t){},t.prototype.paint=function(t){},
t.prototype.findObjectAt=function(t,e,i){return null},t.prototype.findObjectById=function(t){
return null},t.prototype.touchObject=function(t){},t.prototype.remove=function(){},
t}(),et=function(){function t(t,e,i,n){this.layers=[],this.firstTime=!0,
this.layerSettings=n,this.data=i,this.renderer=e,this.chart=t,
this.loading=!0,this.scene=t.scene}return t.prototype.onSceneChange=function(t){
if(t.changes.navigation||this.firstTime){this.firstTime=!1;for(var e=this.scene.stack,i=0;i<Math.min(this.layers.length,e.length)&&e[i]===this.layers[i].drilldownId;)i+=1;
for(;this.layers.length>i;){var n=this.layers.pop();this.renderer.removeSimpleLayer(n);
var r=this.layers.length>0?this.layers[this.layers.length-1]:null;
r&&r.setExpandedNode(null)}for(;this.layers.length<e.length;){
var s=e[this.layers.length],r=this.layers.length>0?this.layers[this.layers.length-1]:null;
r&&r.setExpandedNode(s);var n=this.renderer.createSimpleLayer(this.data,this.layerSettings,s);
if(!n)break;this.layers.push(n)}}this.loading=!1;for(var a=0;a<this.layers.length;a++){
var o=this.layers[a];o.onSceneChange(t),this.loading=this.loading||o.loading;
}},t.prototype.updateStyle=function(t){for(var e=0;e<this.layers.length;e++){
var i=this.layers[e];i.updateStyle(t)}},t.prototype.postprocessStyle=function(t){
for(var e=0;e<this.layers.length;e++){var i=this.layers[e];i.postprocessStyle(t);
}},t.prototype.paint=function(t){for(var e=0;e<this.layers.length;e++){
var i=this.layers[e];i.paint(t)}},t.prototype.findObjectAt=function(t,e,i){
for(var n=this.layers.length-1;n>=0;n--){var r=this.layers[n].findObjectAt(t,e,i);
if(r&&r.object)return r}return null},t.prototype.findObjectById=function(t){
for(var e=this.layers.length-1;e>=0;e--){var i=this.layers[e].findObjectById(t);
if(i)return i}return null},t.prototype.touchObject=function(t){
for(var e=0;e<=this.layers.length;e++)this.layers[e].touchObject(t);
},t.prototype.remove=function(){for(var t=0;t<this.layers.length;t++){
var e=this.layers[t];this.renderer.removeSimpleLayer(e)}this.layers=[];
},t}(),it=function(t){function e(e){var i=t.call(this)||this;return i.animationOrder=900,
i.paintOrder=10,i.updateOrder=10,i.layers=[],i.idToLayer={},i.idToSimpleLayer={},
i.drilldownLayer=null,i.chart=e,i.scene=e.scene,i.events=e.events,
i}return n(e,t),e.prototype.createData=function(t){var e=null;
return t.id&&(e=this.chart.getData(t.id)),e},e.prototype.createSimpleLayer=function(t,e,i){
var n;if(e instanceof R){var r=this.idToSimpleLayer[e.shapesLayer+i];
if(!r)return this.chart.error("ItemsOnShape layer: shapesLayer "+e.shapesLayer+" not found, must come first in the layers array."),
null;"charts"===e.type?n=new $(this.chart,r,e,i):"aggregateOnShapes"===e.type&&(n=new tt(this.chart,r,t,e,i));
}else n=new K(this.chart,t,e,i);return this.idToSimpleLayer[e.id+i]=n,
n},e.prototype.removeLayer=function(t){t instanceof et?t.remove():this.removeSimpleLayer(t);
},e.prototype.removeSimpleLayer=function(t){t.remove();var e=t.layerSettings.id+t.drilldownId;
delete this.idToSimpleLayer[e]},e.prototype.onSceneChange=function(t){
var e=!1,i=t.changes,n=i.settingsChanges;if(n&&(n.layers||n.layerTypes)){
for(var r in n.layers){var s=this.idToLayer[r];s&&(this.removeLayer(s),
delete this.idToLayer[r])}e=!0}else(i.zoom||i.data)&&(e=!0);if(e){
var a=this.idToLayer;this.layers=[],this.idToLayer={};var o=this.scene.zoomLevel;
this.drilldownLayer=null;for(var l=this.scene.settings.navigation.drilldownLayer,h=0;h<this.chart.settings._computedLayers.length;h++){
var u=this.chart.settings._computedLayers[h],c=u.enabled&&u.minZoom<=o&&u.maxZoom>=o,d=a[u.id];
if(c){var p=this.createData(u.data),f=!1;if(p&&p.dataSettings.perDrilldownData&&(f=!0),
u instanceof R){var g=this.idToLayer[u.shapesLayer];if(!g){this.chart.error("Overlay layer: shapeLayer "+u.shapesLayer+" not found, must come first in the layers array.");
continue}d&&d.baseLayer!==g&&(this.removeLayer(d),d=null),f=f||g.data.dataSettings.perDrilldownData;
}var s=void 0;if(d&&d.data===p)s=d;else if(d&&this.removeLayer(d),
f)s=new et(this.chart,this,p,u);else if(s=this.createSimpleLayer(p,u,null),
!s)continue;u.id===l&&(this.drilldownLayer=s),this.layers.push(s),
this.idToLayer[u.id]=s}else d&&this.removeLayer(d)}for(var r in a){
var s=a[r];this.idToLayer.hasOwnProperty(r)||this.removeLayer(s);
}}for(var m=0;m<this.layers.length;m++){var s=this.layers[m];s.onSceneChange(t);
}},e.prototype.doAnimations=function(t){for(var e=0;e<this.layers.length;e++){
var i=this.layers[e];i.updateStyle(t)}for(var n=!1,e=0;e<this.layers.length;e++){
var i=this.layers[e];i.postprocessStyle(t),n=n||i.loading}this.scene.loading=n;
},e.prototype.paintScene=function(t){d.Graphics.pushClip(t,this.scene.x0,this.scene.y0,this.scene.width,this.scene.height);
for(var e=!1,i=0;i<this.layers.length;i++){var n=this.layers[i];
n.paint(t),e=e||n.loading}d.Graphics.popClip(t),this.scene.loading=e;
},e.prototype.findObjectById=function(t){for(var e=this.layers.length-1;e>=0;e--){
var i=this.layers[e],n=i.findObjectById(t);if(n)return n}return null;
},e.prototype.touchObjects=function(t){for(var e=this.layers.length-1;e>=0;e--)for(var i=this.layers[e],n=0;n<t.length;n++)i.touchObject(t[n]);
},e.prototype.findObjectAt=function(t,e,i){for(var n=this.layers.length-1;n>=0;n--){
var r=this.layers[n],s=r.findObjectAt(t,e,i);if(s&&s.object)return s;
}return null},e}(d.ChartElement);e.Renderer=it;var nt=function(t){
function e(e){var i=t.call(this)||this;return i.animationOrder=1e3,
i.paintOrder=5,i.updateOrder=1300,i.chart=e,i.scene=i.chart.scene,
i}return n(e,t),e.prototype.showInitialNodes=function(){var t=this.scene.settings.navigation.initialDrilldown;
return this.scene.stack=t,this.chart.events.notifySceneChanges({
navigation:!0})},e.prototype.onPanZoom=function(){},e.prototype.onNewDataObject=function(){},
e.prototype.expandNode=function(t){var e=t.layer.drilldownId,i=t.id;
if(i===this.scene.peek())return!1;for(;this.scene.peek()!==e;)this.scene.pop();
return this.scene.push(i),this.chart.events.notifySceneChanges({
navigation:!0}),!0},e.prototype.collapseNode=function(t){throw"Not implemented";
},e}(d.Navigator);e.Navigator=nt;var rt=!1,st=function(t){function e(e,i){
var n=t.call(this,new P(e),new Z,i)||this;return n.events.forceFloating=!0,
n._map=n._map||null,n._pendingZoomLevel=null,n._pendingLatitude=null,
n._pendingBounds=null,n.navigator=n.events.addElement(new nt(n)),
n.menu=n.events.addElement(new u.Menu(n)),n.info=n.events.addElement(new u.InfoPopup(n)),
n.selection=n.events.addElement(new _(n)),n._map&&(n.renderer=n.events.addElement(new it(n))),
n.navigator.showInitialNodes(),n.finalInitialize(),n}return n(e,t),
e.prototype.getMap=function(){return this._map},e.prototype.domLayerCreated=function(){
return rt||(d.Helpers.compareVersions(L.version,[0,7])||this.error("ZoomCharts requires Leaflet.js version 0.7.0 or newer. The loaded version is "+L.version),
rt=!0),this._map?void this.applyGestureSettings():(this._map=this._domLayer.map,
null!=this._pendingLatitude?this.setView(this._pendingLatitude,this._pendingLongitude,this._pendingZoomLevel):(null!==this.settings.navigation.initialLat&&this.setView(this.settings.navigation.initialLat,this.settings.navigation.initialLng,this.settings.navigation.initialZoom),
null!=this._pendingZoomLevel&&this.setZoomLevel(this._pendingZoomLevel)),
null!=this._pendingBounds&&this.setBounds(this._pendingBounds),
this.events&&(this.renderer=this.events.addElement(new it(this)),
this.events.notifySceneChanges({settings:!0,settingsChanges:this.settings,
zoom:!0,bounds:!0})),this.applyGestureSettings(),void(this.scene.loading=!1));
},e.prototype.createDomLayer=function(){return this._domLayer=new k(this),
this._domLayer},e.prototype.createDataObj=function(t){return new x(this,t);
},e.prototype.getData=function(e){return t.prototype.getData.call(this,e);
},e.prototype.onSettingsChanged=function(t){var e={},i=t.navigation&&t.navigation.initialDrilldown;
i&&this.navigator.showInitialNodes(),t.filters&&(e.filters=!0),
t.style&&(e.style=!0),this.events.notifySceneChanges(e)},e.prototype.saveNavigation=function(){
return this._map?this.scene.getVisibleBoundsLatLon():null},e.prototype.restoreNavigation=function(t){
this.setBounds(t)},e.prototype.save=function(){return""},e.prototype.restore=function(t,e){},
e.prototype.setZoomLevel=function(t){this._map?this._map.setZoom(t):this._pendingZoomLevel=t;
},e.prototype.setView=function(t,e,i){this._map?this._map.setView(L.latLng(t,e),i):(this._pendingLatitude=t,
this._pendingLongitude=e,this._pendingZoomLevel=i)},e.prototype.setBounds=function(t){
if(this._map){var e=t;if(void 0!==e.east)this._map.fitBounds(L.latLngBounds(L.latLng(e.south,e.west),L.latLng(e.north,e.east)));else{
var i=t;this._map.fitBounds(L.latLngBounds(L.latLng(i.y1,i.x0),L.latLng(i.y0,i.x1)));
}}else this._pendingBounds=t},e.prototype.getNodeDimensions=function(t){
var e=t;if(d.Helpers.isString(t)&&(e=this.getNode(t)),!e)return null;
var i=this.scene.toDisplay(e.x,e.y),n=i.x,r=i.y,s=e.hHeight*this.scene.zoom,a=e.hWidth*this.scene.zoom;
return{x:n,y:r,radius:s,hwidth:a}},e.prototype.expandNode=function(t){
var e=null;e=d.Helpers.isString(t)?this.getNode(t):t,this.navigator.expandNode(e);
},e.prototype.collapseNode=function(t){var e=null;e=d.Helpers.isString(t)?this.getNode(t):t,
this.navigator.collapseNode(e)},e.prototype.getNode=function(t){
var e=this.renderer?this.renderer.findObjectById(t):null;return e instanceof u.Node||(e=null),
e},e.prototype.getLink=function(t){var e=this.renderer?this.renderer.findObjectById(t):null;
return e instanceof u.Link||(e=null),e},e.prototype.hideMenu=function(){
this.menu.hideMenu()},e.prototype.defaultClick=function(t,e){
var i="drilldown"===this.settings.interaction.mode,n=e.clickNode;
i&&n&&n.expandable&&this.navigator.expandNode(n)&&(this.setBounds(this.scene.unprojectRect(n.data._bounds)),
t.preventDefault())},e.prototype.defaultRightClick=function(t,e){
e.clickNode&&(this.menu.toggleNodeMenu(e.clickNode),t.preventDefault()),
e.clickLink&&(this.menu.toggleLinkMenu(t.x,t.y,e.clickLink),t.preventDefault());
},e.prototype.applyGestureSettings=function(){var t=this._map;
this.settings.interaction.zooming.zoomInOnDoubleClick===!1&&t.doubleClickZoom.disable();
},e}(u.Impl);e.Impl=st}(r=i.GeoChart||(i.GeoChart={}))}(i=t.Internal||(t.Internal={})),
function(t){var e;!function(t){t[t.always=2]="always",t[t.disabled=0]="disabled",
t[t.hovered=1]="hovered",t[t.selected=3]="selected"}(e=t.GeoChartSettingsAggregatedShapeStyleMode||(t.GeoChartSettingsAggregatedShapeStyleMode={}));
var i;!function(t){t[t.always=2]="always",t[t.auto=1]="auto",
t[t.never=0]="never"}(i=t.LinearChartSettingsValueAxisBaseLineLabelMode||(t.LinearChartSettingsValueAxisBaseLineLabelMode={}));
}(e=t.Configuration||(t.Configuration={}));var r=function(t){
function e(n){var r=t.call(this)||this;return r.typeName="NetChart",
e.chartFactoryMethod?r._impl=e.chartFactoryMethod(function(t){
return new i.NetChart.Impl(t,r)},n):r._impl=new i.NetChart.Impl(n,r),
r}return n(e,t),e.prototype.updateSettings=function(e){return t.prototype.updateSettings.call(this,e),
this},e.prototype.replaceSettings=function(e){return t.prototype.replaceSettings.call(this,e),
this},e.prototype.addData=function(t,e){null==e&&(e="default"),
this._impl.addData(t,e)},e.prototype.removeData=function(t,e){
null==e&&(e="default"),this._impl.removeData(t,e)},e.prototype.replaceData=function(t,e){
null==e&&(e="default"),this._impl.replaceData(t,e)},e.prototype.hideMenu=function(){
return this._impl.hideMenu(),this},e.prototype.updateStyle=function(t){
t?(this._impl.touchObjects(t),this._impl.events.requestPaint()):this._impl.updateStyle(null);
},e.prototype.getNode=function(t){return this._impl.getNode(t);
},e.prototype.getLink=function(t){return this._impl.getLink(t);
},e.prototype.showNode=function(t){return this._impl.showNode(t);
},e.prototype.hideNode=function(t){return this._impl.hideNode(t);
},e.prototype.expandNode=function(t){return this._impl.expandNode(t);
},e.prototype.addFocusNode=function(t,e){return void 0===e&&(e=-1),
null==e&&(e=-1),this._impl.addFocusNode(t,e)},e.prototype.removeFocusNode=function(t){
return this._impl.removeFocusNode(t)},e.prototype.clearFocus=function(){
return this._impl.clearFocus()},e.prototype.collapseNode=function(t){
return this._impl.collapseNode(t)},e.prototype.closeNode=function(t){
return this._impl.closeNode(t)},e.prototype.lockNode=function(t,e,i){
return this._impl.lockNode(t,e,i)},e.prototype.unlockNode=function(t){
return this._impl.unlockNode(t)},e.prototype.zoom=function(t,e){
return void 0===e&&(e=!0),null!=t&&this._impl.setZoom(t,!!e),
this._impl.scene.zoom},e.prototype.resetLayout=function(){return this._impl.resetLayout();
},e.prototype.selection=function(t){return t&&this._impl.setSelection(t),
this._impl.scene.selection},e.prototype.zoomIn=function(t,e){
return void 0===e&&(e=!0),this.scrollIntoView(t)},e.prototype.nodes=function(){
return this._impl.getCurrentNodes()},e.prototype.links=function(){
return this._impl.getCurrentLinks()},e.prototype.getNodeDimensions=function(t){
return this._impl.getNodeDimensions(t)},e.prototype.exportData=function(t,e){
return void 0===t&&(t=!0),void 0===e&&(e=!0),this._impl.exportData(!!t,!!e);
},e.prototype.scrollIntoView=function(t,e){this._impl.scrollIntoView(t,e);
},e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},
e}(i.Base.Api);r.themes={flat:i.NetChart.Settings.FlatTheme,dark:i.NetChart.Settings.DarkTheme
},r.chartFactoryMethod=null,t.NetChart=r,i.Base.Helpers.exportSymbol("NetChart",t.NetChart);
var s=function(t){function e(n){var r=t.call(this)||this;return r._cachedApiCalls=[],
r.typeName="TimeChart",e.chartFactoryMethod?r._impl=e.chartFactoryMethod(function(t){
return new i.TimeChart.Impl(t,r)},n):r._impl=new i.TimeChart.Impl(n,r),
r}return n(e,t),e.prototype._notifyAssetsLoaded=function(){var t=this._cachedApiCalls;
if(null!==t){this._cachedApiCalls=null;for(var e=0;e<t.length;e++)t[e]();
}},e.prototype.updateSettings=function(e){return t.prototype.updateSettings.call(this,e),
this},e.prototype.replaceSettings=function(e){return t.prototype.replaceSettings.call(this,e),
this},e.prototype.on=function(e,i){t.prototype.on.call(this,e,i);
},e.prototype.time=function(t,e,n){var r=this;void 0===n&&(n=!0);
var s=this._impl,a=s.scene,o=i.TimeChart.TimeStep.timeUnitDiffs,l=!s.displayUnit||o[s.displayUnit.unit]<o.d;
if(null!=t&&null!=e){if(this._cachedApiCalls)return this._cachedApiCalls.push(function(){
r.time(t,e,n)}),[null,null];s.setTimeRange(a.timestampToInternal(+t,l),a.timestampToInternal(+e,l),n);
}return[a.timestampFromInternal(s.timeStart,l),a.timestampFromInternal(s.timeEnd,l)];
},e.prototype.targetTime=function(){var t=this._impl,e=t.scene,n=t.scrolling,r=i.TimeChart.TimeStep.timeUnitDiffs,s=n.targetUnit||t.displayUnit;
if(!s)return[null,null];var a=!t.displayUnit||r[t.displayUnit.unit]<r.d;
return[e.timestampFromInternal(n.getFrom(),a),e.timestampFromInternal(n.getTo(),a)];
},e.prototype.targetDisplayUnit=function(){var t=this._impl,e=t.scrolling.targetUnit||t.displayUnit||t.scene.displayUnit;
return e?e.toString():null},e.prototype.addData=function(t,e){
null==e&&(e="default"),this._impl.addData(t,e)},e.prototype.replaceData=function(t,e){
null==e&&(e="default"),this._impl.replaceData(t,e)},e.prototype.setDisplayPeriod=function(t,e,i){
var n=this;return void 0===i&&(i=!0),this._cachedApiCalls?void this._cachedApiCalls.push(function(){
n.setDisplayPeriod(t,e,i)}):void this._impl.setDisplayPeriod(t,e,null,i);
},e.prototype.displayUnit=function(t,e,n){var r=this;if(void 0===e&&(e=!0),
void 0!==n&&i.Base.Helpers.warn("TimeChart.displayUnit() no longer supports the `rescale` parameter."),
t){if(this._cachedApiCalls)return this._cachedApiCalls.push(function(){
r.displayUnit(t,e)}),null;this._impl.setDisplayUnit(t,e,"api",!0);
}return this._impl.displayUnit?this._impl.displayUnit.toString():null;
},e.prototype.selection=function(t,e){var n=this,r=this._impl,s=r.scene,a=i.TimeChart.TimeStep.timeUnitDiffs,o=!r.displayUnit||a[r.displayUnit.unit]<a.d;
if(void 0!==t&&void 0!==e){if(this._cachedApiCalls)return this._cachedApiCalls.push(function(){
n.selection(t,e)}),[null,null];r.setSelection(null===t?null:s.timestampToInternal(+t,o),null===e?null:s.timestampToInternal(+e,o));
}return[s.timestampFromInternal(r.scene.selectionStart,o),s.timestampFromInternal(r.scene.selectionEnd,o)];
},e.prototype.scroll=function(t,e,i){return void 0===e&&(e=!0),
void 0===i&&(i=!1),this._impl.scroll(t,e)},e.prototype.zoomOut=function(t,e){
var n=this;return void 0===e&&(e=!0),this._cachedApiCalls?void this._cachedApiCalls.push(function(){
n.zoomOut(t,e)}):void this._impl.zoomOut(e,"api",i.TimeChart.TimeStep.parse(t));
},e.prototype.zoomIn=function(t,e,n){var r=this;if(void 0===e&&(e=null),
void 0===n&&(n=!0),this._cachedApiCalls)return void this._cachedApiCalls.push(function(){
r.zoomIn(t,e,n)});var s=this._impl,a=i.TimeChart.TimeStep.parse(t);
if(null!=e){var o=a||s.displayUnit,l=i.TimeChart.TimeStep.timeUnitDiffs,h=!o||l[o.unit]<l.d;
e=s.scene.timestampToInternal(+e,h)}s.zoomIn(a,e,n,"api")},e.prototype.replaceSeries=function(t){
return this._impl.deprecated("replaceSeries","replaceSettings"),
this.replaceSettings({series:t})},e.prototype.exportVisibleData=function(){
return this._impl.exportVisibleData()},e.prototype.showInfoPopup=function(t,e,n){
var r=this;if(this._cachedApiCalls)return void this._cachedApiCalls.push(function(){
r.showInfoPopup(t,e,n)});var s=this._impl,a=s.scene,o=i.TimeChart.TimeStep.timeUnitDiffs,l=!s.displayUnit||o[s.displayUnit.unit]<o.d;
s.showInfoPopup(null==t?null:a.timestampToInternal(+t,l),null==e?null:a.timestampToInternal(+e,l),n);
},e.prototype.getEnabledSeries=function(){return this._impl.getEnabledSeries();
},e}(i.Base.Api);s.themes={flat:i.TimeChart.Settings.FlatTheme,
round:i.TimeChart.Settings.RoundTheme,gradient:i.TimeChart.Settings.GradientTheme,
static:i.TimeChart.Settings.StaticChart,dark:i.TimeChart.Settings.DarkTheme
},s.chartFactoryMethod=null,t.TimeChart=s,i.Base.Helpers.exportSymbol("TimeChart",t.TimeChart);
var a=function(t){function e(n){var r=t.call(this)||this;return r.typeName="PieChart",
e.chartFactoryMethod?r._impl=e.chartFactoryMethod(function(t){
return new i.PieChart.Impl(t,r)},n):r._impl=new i.PieChart.Impl(n,r),
r}return n(e,t),e.prototype.updateSettings=function(e){return t.prototype.updateSettings.call(this,e),
this},e.prototype.replaceSettings=function(e){return t.prototype.replaceSettings.call(this,e),
this},e.prototype.updateFilter=function(){return this._impl.updateFilter(),
this},e.prototype.addData=function(t,e){null==e&&(e="default"),
this._impl.addData(t,e)},e.prototype.replaceData=function(t,e){
null==e&&(e="default"),this._impl.replaceData(t,e)},e.prototype.selection=function(t){
if(t)if(Array.isArray(t)){for(var e=t.slice(),n=0;n<e.length;n++){
var r=e[n];r instanceof i.PieChart.Slice?e[n]=r.id:i.Base.Helpers.isString(r)||this._impl.error("PieChart.selection() - the argument must be an array of PieChart.Slice objects or strings.");
}this._impl.setSelection(e)}else this._impl.error("PieChart.selection() - the argument must be an array of PieChart.Slice objects or strings.");
return this._impl.scene.selection.slice()},e.prototype.getPie=function(){
return this._impl.getPie()},e.prototype.getPieOffset=function(){
return this._impl.navigator.getPieOffset()},e.prototype.setPie=function(t,e){
return void 0===e&&(e=0),null==e&&(e=0),this._impl.setPie(t,e),
this},e.prototype.setPieOffset=function(t){return this._impl.setPieOffset(t),
this},e.prototype.getActiveSlices=function(){return this._impl.getActiveSlices();
},e.prototype.getActivePies=function(){return this._impl.getActivePies();
},e.prototype.getActivePie=function(){var t=this._impl.getActivePies();
return t[t.length-1]},e.prototype.expandSlice=function(t){return this._impl.expandSlice(t,"api");
},e.prototype.getSliceDimensions=function(t,e){return void 0===e&&(e=!1),
null==e&&(e=!1),this._impl.getSliceDimensions(t,e)},e.prototype.on=function(e,i){
t.prototype.on.call(this,e,i)},e}(i.Base.Api);a.themes={dark:i.PieChart.Settings.DarkTheme,
flat:i.PieChart.Settings.FlatTheme,bevel:i.PieChart.Settings.BevelTheme,
gradient:i.PieChart.Settings.GradientTheme,raised:i.PieChart.Settings.CanTheme
},a.chartFactoryMethod=null,t.PieChart=a,i.Base.Helpers.exportSymbol("PieChart",t.PieChart);
var o=function(t){function e(n){var r=t.call(this)||this;return r.typeName="FacetChart",
e.chartFactoryMethod?r._impl=e.chartFactoryMethod(function(t){
return new i.FacetChart.Impl(t,r)},n):r._impl=new i.FacetChart.Impl(n,r),
r}return n(e,t),e.prototype.updateSettings=function(e){return t.prototype.updateSettings.call(this,e),
this},e.prototype.replaceSettings=function(e){return t.prototype.replaceSettings.call(this,e),
this},e.prototype.addData=function(t,e){null==e&&(e="default"),
this._impl.addData(t,e)},e.prototype.replaceData=function(t,e){
null==e&&(e="default"),this._impl.replaceData(t,e)},e.prototype.updateFilter=function(){
return this._impl.updateFilter(),this},e.prototype.selection=function(t){
if(t)if(Array.isArray(t)){for(var e=t.slice(),n=0;n<e.length;n++){
var r=e[n];r instanceof i.FacetChart.Item?e[n]=r.id:i.Base.Helpers.isString(r)||this._impl.error("FacetChart.selection() - the argument must be an array of FacetChart.Item objects or strings.");
}this._impl.setSelection(e)}else this._impl.error("FacetChart.selection() - the argument must be an array of FacetChart.Item objects or strings.");
return this._impl.scene.selection.slice()},e.prototype.setPie=function(t,e,i){
return void 0===e&&(e=0),void 0===i&&(i=null),Array.isArray(t)||(t=[t]),
this._impl.setPie(t,e,i),this},e.prototype.getPie=function(){
return this._impl.getPie()},e.prototype.getPieOffset=function(){
return this._impl.getPieOffset()},e.prototype.getActiveItems=function(){
return this._impl.getActiveItems()},e.prototype.getActiveFacets=function(){
return this._impl.getActiveFacets()},e.prototype.getActiveFacet=function(){
var t=this._impl.getActiveFacets();return t[t.length-1]},e.prototype.expandSlice=function(t){
return this._impl.expandItem(t,"api")},e.prototype.replaceSeries=function(t){
return this._impl.deprecated("replaceSeries","replaceSettings"),
this.replaceSettings({series:t})},e.prototype.on=function(e,i){
t.prototype.on.call(this,e,i)},e.prototype.getEnabledSeries=function(){
return this._impl.getEnabledSeries()},e}(i.Base.Api);o.themes={
dark:i.FacetChart.Settings.DarkTheme},o.chartFactoryMethod=null,
t.FacetChart=o,i.Base.Helpers.exportSymbol("FacetChart",t.FacetChart);
var l=function(t){function e(n){var r=t.call(this)||this;return r.typeName="GeoChart",
e.chartFactoryMethod?r._impl=e.chartFactoryMethod(function(t){
return new i.GeoChart.Impl(t,r)},n):r._impl=new i.GeoChart.Impl(n,r),
r}return n(e,t),e.prototype.updateSettings=function(e){return t.prototype.updateSettings.call(this,e),
this},e.prototype.replaceSettings=function(e){return t.prototype.replaceSettings.call(this,e),
this},e.prototype.addData=function(t,e){null==e&&(e="default"),
this._impl.addData(t,e)},e.prototype.replaceData=function(t,e){
null==e&&(e="default"),this._impl.replaceData(t,e)},e.prototype.hideMenu=function(){
return this._impl.hideMenu(),this},e.prototype.getNode=function(t){
return this._impl.getNode(t)},e.prototype.updateStyle=function(t){
t?this._impl.renderer&&(this._impl.renderer.touchObjects(t),this._impl.events.requestPaint()):this._impl.updateStyle(null);
},e.prototype.selection=function(t){return t&&this._impl.setSelection(t),
this._impl.scene.selection},e.prototype.bounds=function(t){t&&this._impl.setBounds(t);
var e=this._impl.scene.getVisibleBoundsLatLon();return{east:e.x1,
north:e.y1,west:e.x0,south:e.y0}},e.prototype.back=function(){
return this._impl.back(),this},e.prototype.zoomLevel=function(t){
return t&&this._impl.setZoomLevel(t),this._impl.scene.zoomLevel;
},e.prototype.getNodeDimensions=function(t){return this._impl.getNodeDimensions(t);
},e.prototype.leaflet=function(){return this._impl.getMap()},
e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e;
}(i.Base.Api);l.themes={flat:i.GeoChart.Settings.FlatTheme},l.chartFactoryMethod=null,
t.GeoChart=l,i.Base.Helpers.exportSymbol("GeoChart",t.GeoChart);
}(ZoomCharts||(ZoomCharts={}))},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5);exports.builtinIcons={
icon_001:"001-mobile-phone-2.png",icon_002:"002-mobile-phone-1.png",
icon_003:"003-smartphone-1.png",icon_004:"004-phone-call-2.png",
icon_005:"005-mobile-phone.png",icon_006:"006-email-9.png",icon_007:"007-speech-bubble-6.png",
icon_008:"008-speech-bubble-5.png",icon_009:"009-speech-bubble-4.png",
icon_010:"010-email-8.png",icon_011:"011-email-7.png",icon_012:"012-smartphone-2.png",
icon_013:"013-speech-bubble-3.png",icon_014:"014-email-6.png",
icon_015:"015-email-5.png",icon_016:"016-email-4.png",icon_017:"017-email-3.png",
icon_018:"018-email-2.png",icon_019:"019-phone-book-2.png",icon_020:"020-speech-bubble-2.png",
icon_021:"021-speech-bubble-1.png",icon_022:"022-phone-book-1.png",
icon_023:"023-phone-call-1.png",icon_024:"024-phone-book.png",
icon_025:"025-speech-bubble.png",icon_026:"026-phone-call.png",
icon_027:"027-email-1.png",icon_028:"028-email.png",icon_029:"029-planet-1.png",
icon_030:"030-growth-1.png",icon_031:"031-owl.png",icon_032:"032-desk-1.png",
icon_033:"033-open-book-2.png",icon_034:"034-laptop.png",icon_035:"035-open-book-1.png",
icon_036:"036-book-2.png",icon_037:"037-pencil.png",icon_038:"038-growth.png",
icon_039:"039-diploma-1.png",icon_040:"040-graphic-tool.png",
icon_041:"041-calculator.png",icon_042:"042-online-learning.png",
icon_043:"043-column.png",icon_044:"044-telescope.png",icon_045:"045-book-1.png",
icon_046:"046-hourglass.png",icon_047:"047-rook.png",icon_048:"048-open-book.png",
icon_049:"049-doubt.png",icon_050:"050-apple-1.png",icon_051:"051-diploma.png",
icon_052:"052-cells.png",icon_053:"053-solar-system.png",icon_054:"054-ascend.png",
icon_055:"055-brain-1.png",icon_056:"056-chemistry.png",icon_057:"057-hand-mirror.png",
icon_058:"058-mortarboard.png",icon_059:"059-earth-globe.png",
icon_060:"060-atomic.png",icon_061:"061-planet.png",icon_062:"062-medal.png",
icon_063:"063-books.png",icon_064:"064-learning.png",icon_065:"065-microscope.png",
icon_066:"066-desk.png",icon_067:"067-graduate.png",icon_068:"068-college.png",
icon_069:"069-startup.png",icon_070:"070-idea-4.png",icon_071:"071-satellite.png",
icon_072:"072-studying.png",icon_073:"073-university-1.png",icon_074:"074-idea-3.png",
icon_075:"075-university.png",icon_076:"076-brain.png",icon_077:"077-idea-2.png",
icon_078:"078-trophy.png",icon_079:"079-security-code-1.png",
icon_080:"080-secure-file.png",icon_081:"081-spy-1.png",icon_082:"082-hacked-computer.png",
icon_083:"083-shield.png",icon_084:"084-life-preserver.png",icon_085:"085-security-camera.png",
icon_086:"086-bomb.png",icon_087:"087-open-padlock.png",icon_088:"088-wall.png",
icon_089:"089-infected-folder.png",icon_090:"090-spam.png",icon_091:"091-trojan.png",
icon_092:"092-infected-file.png",icon_093:"093-locked-email.png",
icon_094:"094-secure-download.png",icon_095:"095-password.png",
icon_096:"096-strongbox.png",icon_097:"097-spy-alarm-on-laptop.png",
icon_098:"098-secure-cloud.png",icon_099:"099-magnifying-glass.png",
icon_100:"100-warning.png",icon_101:"101-alarm.png",icon_102:"102-secure-pendrive.png",
icon_103:"103-secure-smartphone.png",icon_104:"104-virus.png",
icon_105:"105-computer-secure.png",icon_106:"106-key.png",icon_107:"107-security-code.png",
icon_108:"108-spy.png",icon_109:"109-ecologic-light-bulb-1.png",
icon_110:"110-basket-1.png",icon_111:"111-global-warming.png",
icon_112:"112-piggy-bank.png",icon_113:"113-melting.png",icon_114:"114-mobile-store.png",
icon_115:"115-computer-1.png",icon_116:"116-statistics.png",icon_117:"117-tag-1.png",
icon_118:"118-voucher.png",icon_119:"119-plant.png",icon_120:"120-location-1.png",
icon_121:"121-battery.png",icon_122:"122-delivery-man.png",icon_123:"123-socket.png",
icon_124:"124-cash-machine.png",icon_125:"125-smartphone.png",
icon_126:"126-search-3.png",icon_127:"127-gasoline.png",icon_128:"128-barcode.png",
icon_129:"129-recycled-bag.png",icon_130:"130-secure-web.png",
icon_131:"131-plug.png",icon_132:"132-search-2.png",icon_133:"133-cash-payment.png",
icon_134:"134-placeholder.png",icon_135:"135-cash.png",icon_136:"136-secure-payment.png",
icon_137:"137-home.png",icon_138:"138-nuclear-plant.png",icon_139:"139-online-shopping.png",
icon_140:"140-recycled-paper.png",icon_141:"141-secure-shopping.png",
icon_142:"142-computer.png",icon_143:"143-water-2.png",icon_144:"144-shopping-cart.png",
icon_145:"145-co2-cloud.png",icon_146:"146-cart.png",icon_147:"147-windmill.png",
icon_148:"148-unpacking.png",icon_149:"149-ladybug.png",icon_150:"150-radiation.png",
icon_151:"151-credit-card.png",icon_152:"152-shamrock.png",icon_153:"153-call.png",
icon_154:"154-store-1.png",icon_155:"155-book.png",icon_156:"156-water-bottle.png",
icon_157:"157-basket.png",icon_158:"158-recycle-bin.png",icon_159:"159-auction.png",
icon_160:"160-seed.png",icon_161:"161-schedule.png",icon_162:"162-water-1.png",
icon_163:"163-deposit.png",icon_164:"164-product.png",icon_165:"165-earth.png",
icon_166:"166-sunflower.png",icon_167:"167-like.png",icon_168:"168-dispute.png",
icon_169:"169-bicycle.png",icon_170:"170-search-1.png",icon_171:"171-barrel.png",
icon_172:"172-store.png",icon_173:"173-leaf.png",icon_174:"174-leaves.png",
icon_175:"175-review-1.png",icon_176:"176-package-2.png",icon_177:"177-recycling.png",
icon_178:"178-electric-car.png",icon_179:"179-tag.png",icon_180:"180-package-1.png",
icon_181:"181-garbage-truck.png",icon_182:"182-customer-service.png",
icon_183:"183-bolt.png",icon_184:"184-sales.png",icon_185:"185-electric-station.png",
icon_186:"186-receipt.png",icon_187:"187-waste.png",icon_188:"188-ecologic-light-bulb.png",
icon_189:"189-delivery-1.png",icon_190:"190-solar-panel.png",
icon_191:"191-review.png",icon_192:"192-package.png",icon_193:"193-water-tap.png",
icon_194:"194-trees.png",icon_195:"195-coupon-1.png",icon_196:"196-apple.png",
icon_197:"197-coupon.png",icon_198:"198-water.png",icon_199:"199-support.png",
icon_200:"200-sprout-1.png",icon_201:"201-safety.png",icon_202:"202-delivery.png",
icon_203:"203-sprout.png",icon_204:"204-sun.png",icon_205:"205-new.png",
icon_206:"206-wallet.png",icon_207:"207-factory.png",icon_208:"208-group-2.png",
icon_209:"209-strategic.png",icon_210:"210-promotion-1.png",icon_211:"211-goal.png",
icon_212:"212-analytics.png",icon_213:"213-id-card.png",icon_214:"214-video-conference.png",
icon_215:"215-office-block.png",icon_216:"216-location.png",icon_217:"217-presentation-4.png",
icon_218:"218-selection.png",icon_219:"219-settings.png",icon_220:"220-time.png",
icon_221:"221-managers.png",icon_222:"222-presentation-3.png",
icon_223:"223-target.png",icon_224:"224-presentation-2.png",icon_225:"225-rank.png",
icon_226:"226-speech-1.png",icon_227:"227-pie-chart.png",icon_228:"228-workspace.png",
icon_229:"229-manager-6.png",icon_230:"230-presentation-1.png",
icon_231:"231-boss.png",icon_232:"232-businessmen.png",icon_233:"233-speech.png",
icon_234:"234-idea-1.png",icon_235:"235-promotion.png",icon_236:"236-promoting.png",
icon_237:"237-search.png",icon_238:"238-idea.png",icon_239:"239-decision-making-1.png",
icon_240:"240-manager-5.png",icon_241:"241-manager-4.png",icon_242:"242-presentation.png",
icon_243:"243-collaboration-1.png",icon_244:"244-group-1.png",
icon_245:"245-manager-3.png",icon_246:"246-manager-2.png",icon_247:"247-collaboration.png",
icon_248:"248-organization.png",icon_249:"249-decision-making.png",
icon_250:"250-manager-1.png",icon_251:"251-strategy.png",icon_252:"252-meeting-1.png",
icon_253:"253-management.png",icon_254:"254-meeting.png",icon_255:"255-group.png",
icon_256:"256-manager.png",icon_257:"257-google.png",icon_258:"258-address-1.png",
icon_259:"259-address-2.png",icon_260:"260-bank-card-1.png",icon_261:"261-bank-card-2.png",
icon_262:"262-id-1.png",icon_263:"263-id-2.png",icon_264:"264-id-3.png",
icon_265:"265-order-1.png",icon_266:"266-order-2.png",icon_267:"267-company-1.png",
icon_268:"268-company-2.png",icon_269:"269-credit-card.png",icon_270:"270-device-1.png",
icon_271:"271-device-2.png",icon_272:"272-ip-1.png",icon_273:"273-ip-2.png",
icon_274:"274-person.png",icon_275:"275-user.png",icon_276:"276-profile.png",
icon_277:"277-graph.png",icon_278:"278-circular-pie-chart.png",
icon_279:"279-clock.png",icon_280:"280-grocery.png",icon_281:"281-group.png",
icon_282:"282-id-card.png",icon_283:"283-payment.png",icon_284:"284-money.png",
icon_285:"285-asset.png",icon_286:"286-phone-1.png",icon_287:"287-phone-2.png",
icon_288:"288-smart-phone.png",icon_289:"289-pin-1.png",icon_290:"290-pin-2.png",
icon_291:"291-pin-3.png",icon_292:"292-transaction-1.png",icon_293:"293-transaction-2.png",
icon_294:"294-transaction-3.png",icon_295:"295-transaction-4.png",
alphabet:{icon_A:"icons8-A.png",icon_B:"icons8-B.png",icon_C:"icons8-C.png",
icon_D:"icons8-D.png",icon_E:"icons8-E.png",icon_F:"icons8-F.png",
icon_G:"icons8-G.png",icon_H:"icons8-H.png",icon_I:"icons8-I.png",
icon_J:"icons8-J.png",icon_K:"icons8-K.png",icon_L:"icons8-L.png",
icon_M:"icons8-M.png",icon_N:"icons8-N.png",icon_O:"icons8-O.png",
icon_P:"icons8-P.png",icon_Q:"icons8-Q.png",icon_R:"icons8-R.png",
icon_S:"icons8-S.png",icon_T:"icons8-T.png",icon_U:"icons8-U.png",
icon_V:"icons8-V.png",icon_W:"icons8-W.png",icon_X:"icons8-X.png",
icon_Y:"icons8-Y.png",icon_Z:"icons8-Z.png"}},exports.otherIcons={
group:{fileName:"Other/business-affiliate-network.png",size:[512,512],
padding:[.1,.1,.1,.1]},pie:{fileName:"Other/circular-pie-chart.png"
},time:{fileName:"Other/circular-watch.png"},money:{fileName:"Payment/Icon_Payment1.png",
padding:[.2,.1,.1,.1]},bank:{fileName:"Payment/Icon_Payment2.png",
padding:[.2,.1,.2,.2]},crowd:{fileName:"Other/group-of-businessmen.png"
},idCard:{fileName:"Other/id-card.png"},user:{fileName:"Name/Icon_Name1.png"
},merchant:{fileName:"Other/grocery.png",padding:[.3,.3,.3,.3]
},phone:{fileName:"Phone/Icon_Phone1.png",padding:[.2,.2,.2,.2]
},Txn2:{fileName:"Txn/Icon_Txn2.png",padding:[.25,.25,.25,.25]
},Txn3:{fileName:"Txn/Icon_Txn3.png",padding:[.25,.25,.25,.25]
},Txn4:{fileName:"Txn/Icon_Txn4.png",padding:[.25,.25,.25,.25]
},Txn1:{fileName:"Txn/Icon_Txn1.png",padding:[.25,.25,.25,.25]
},Address1:{fileName:"Address/Icon_Address1.png"},Address2:{fileName:"Address/Icon_Address2.png"
},BankCard1:{fileName:"BankCard/Icon_BackCard1.png"},BankCard2:{
fileName:"BankCard/Icon_BackCard2.png"},Cert1:{fileName:"Cert/Icon_Cert1.png"
},Cert2:{fileName:"Cert/Icon_Cert2.png"},Cert3:{fileName:"Cert/Icon_Cert3.png"
},ChildOrder1:{fileName:"ChildOrder/Icon_ChildOrder1.png"},ChildOrder2:{
fileName:"ChildOrder/Icon_ChildOrder2.png"},Company1:{fileName:"Company/Icon_Company1.png"
},Company2:{fileName:"Company/Icon_Company2.png"},CreditCard1:{
fileName:"CreditCard/Icon_CreditCard1.png"},Device1:{fileName:"Device/Icon_Device1.png"
},Device2:{fileName:"Device/Icon_Device2.png"},IP1:{fileName:"IP/Icon_IP1.png"
},IP2:{fileName:"IP/Icon_IP2.png"},Name1:{fileName:"Name/Icon_Name1.png"
},Name2:{fileName:"Name/Icon_Name2.png"},Name3:{fileName:"Name/Icon_Name3.png"
},Payment1:{fileName:"Payment/Icon_Payment1.png"},Payment2:{fileName:"Payment/Icon_Payment2.png"
},Payment3:{fileName:"Payment/Icon_Payment3.png"},Phone1:{fileName:"Phone/Icon_Phone1.png"
},Phone2:{fileName:"Phone/Icon_Phone2.png"},Phone3:{fileName:"Phone/Icon_Phone3.png"
},PIN1:{fileName:"PIN/Icon_PIN1.png"},PIN2:{fileName:"PIN/Icon_PIN2.png"
},PIN3:{fileName:"PIN/Icon_PIN3.png"},Generator:{fileName:"builtin/alphabet/icons8-G.png",
padding:[.3,.3,.3,.3],size:[104,104]},Transformer:{fileName:"Other/icons.002.png",
padding:[.05,-.25,.05,-.25],size:[256,256]},Capacitor:{fileName:"Other/icons.003.png",
padding:[-.35,-.05,-.35,-.05],size:[256,256]},Reactor:{fileName:"Other/icons.004.png",
padding:[.05,.05,.05,.05],size:[256,256]},"Open Breaker":{fileName:"Other/icons.005.png",
padding:[-.05,-.25,-.05,-.25],size:[256,256]},"Closed Breaker":{
fileName:"Other/icons.006.png",padding:[-.05,-.25,-.05,-.25],
size:[256,256]},"Open Disconnector":{fileName:"Other/icons.007.png",
padding:[-.05,-.25,-.05,-.25],size:[256,256]},"Closed Disconnector":{
fileName:"Other/icons.008.png",padding:[-.05,-.35,-.05,-.35],
size:[256,256]},Load:{fileName:"Other/icons.010.png",padding:[-.05,-.35,-.05,-.35],
size:[256,256]}};var ICON=function(){function ICON(baseURL){void 0===baseURL&&(baseURL="./assets/icons/");
var _this=this;this.icons=Object.create(null),"/"!==baseURL.substr(baseURL.length-1)&&(baseURL+="/"),
this.baseURL=baseURL,Object.keys(exports.builtinIcons).forEach(function(key){
var value=exports.builtinIcons[key],iconName=key;"string"==typeof value&&_this.addIcon(iconName,"builtin/"+exports.builtinIcons[iconName],[.5,.5,.5,.5],[512,512],!1);
}),Object.keys(exports.builtinIcons.alphabet).forEach(function(key){
var value=exports.builtinIcons.alphabet[key],iconName=key;"string"==typeof value&&_this.addIcon(iconName,"builtin/alphabet/"+exports.builtinIcons.alphabet[iconName],[.3,.3,.3,.3],[104,104],!1);
});for(var iconName in exports.otherIcons)if(Object.prototype.hasOwnProperty.call(exports.otherIcons,iconName)){
var target=exports.otherIcons[iconName];this.addIcon(iconName,target.fileName,target.padding,target.size,!1);
}}return ICON.prototype.addIcon=function(iconName,fileName,padding,size,overwrite){
void 0===padding&&(padding=[.2,.2,.2,.2]),void 0===size&&(size=[512,512]),
void 0===overwrite&&(overwrite=!1);try{if(Object.prototype.hasOwnProperty.call(this.icons,iconName)){
if(!overwrite)throw new exception_1.GException(3003,'"'+iconName+'" icon is already existed. Choose not overwrite it.');
this.icons[iconName]={fileName:fileName,size:size,padding:padding
}}else this.icons[iconName]={fileName:fileName,size:size,padding:padding
}}catch(err){console.warn(err.toString())}return this},ICON.prototype.getIcon=function(iconName){
try{if("default"===iconName||null===iconName||void 0===iconName)return null;
if(Object.prototype.hasOwnProperty.call(this.icons,iconName)){
var target=this.icons[iconName],top_1=target.padding[0],right=target.padding[1],buttom=target.padding[2],left=target.padding[3],width=target.size[0],height=target.size[1];
return{image:this.baseURL+target.fileName,padding:target.padding,
imageSlicing:[-1*width*left,-1*height*top_1,width*(left+right+1),height*(top_1+buttom+1)]
}}throw new exception_1.GException(3003,'"'+iconName+'" icon is not existed.');
}catch(err){console.warn(err.toString())}return{}},ICON}();exports.ICON=ICON;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},graphchart_render_engine_base_1=__webpack_require__(23),utils_1=__webpack_require__(8),color_1=__webpack_require__(4),exception_1=__webpack_require__(5),L=__webpack_require__(30);
__webpack_require__(31);var D3Contour=__webpack_require__(32),graphchart_style_1=__webpack_require__(17),icon_1=__webpack_require__(28);
console.log("loading geo render engine.");var GeoCore=function(){
function GeoCore(){this.heatmapData=[],this.heatPointDefaultRadius=25,
this.heatPointDefaultWeight=1,this.contourXRange=0,this.contourYRange=0,
this.contourValues=[],this.thresholds=[],this.fillRange=!0,this.colors=[],
this.range={x0:0,y0:0,x1:0,y1:0},this.internalNodesMap={},this.internalLinksMap={},
this.internalNodesArray=[],this.internalLinksArray=[],this.distanceBetweenEdgeArrows=0,
this.showNodeTooltip=!0,this.showLinkTooltip=!0,this.showNodeLabel=!0,
this.showLinkLabel=!1,this.nodeCallbackFunctions={},this.linkCallbackFunctions={},
this.nodeToolTipCallback=function(node){var toolTip=(node.exType,
"<table>");toolTip+="<tr><th>Vertex</th><th>"+node.exId+"</th></tr>",
toolTip+="<tr><td>Type</td><td>"+node.exType+"</td></tr>";for(var attr in node.attrs)if(Object.prototype.hasOwnProperty.call(node.attrs,attr)){
var value=JSON.stringify(node.attrs[attr]);toolTip+="<tr><td>"+attr+"</td><td>"+value+"</td></tr>";
}return toolTip+="</table>"},this.linkToolTipCallback=function(link){
var type=link.exType,toolTip="<table>";toolTip+="<tr><th>Edge</th><th>"+type+"</th></tr>";
for(var attr in link.attrs)if(Object.prototype.hasOwnProperty.call(link.attrs,attr)){
var value=JSON.stringify(link.attrs[attr]);toolTip+="<tr><td>"+attr+"</td><td>"+value+"</td></tr>";
}return toolTip+="</table>"},this.nodeLabelCallback=function(node){
return node.exId},this.linkLabelCallback=function(link){return link.exType;
},this.dragCallback=function(lat,long){console.log(lat,long)};
}return GeoCore.prototype.zoom=function(zoomLevel){},GeoCore.prototype.resetLayout=function(){},
GeoCore.prototype.updateSettings=function(options){},GeoCore.prototype.paintNow=function(){
this.paintHeatMap(),this.paintContourLines(),this.paintGraph();
},GeoCore.prototype.updateHeatmapConfigs=function(defaultRadius,defaultWeight){
this.heatPointDefaultRadius=defaultRadius,this.heatPointDefaultWeight=defaultWeight;
},GeoCore.prototype.updateHeatmapData=function(heatMap){this.heatmapData=[],
heatMap&&(this.heatmapData=this.heatmapData.concat(heatMap))},
GeoCore.prototype.paintHeatMap=function(){},GeoCore.prototype.updateContourLineConfigs=function(fillRange){
this.fillRange=fillRange},GeoCore.prototype.updateContourLineData=function(contourData,thresholds,colors,range){
if(contourData){if(!thresholds||!colors||!range)return void console.error("Please provide thresholds, colors and range.");
if(range.x0>range.x1||range.y0>range.y1)return void console.error("In range, x0 should <= x1, y0 should <= y1.");
if(thresholds.length!==colors.length)return void console.error("Thresholds and colors have different number of values.");
this.contourXRange=contourData.length?contourData[0].length:0,
this.contourYRange=contourData.length,this.contourValues=contourData.length?contourData.reduce(function(a,b){
return a.concat(b)}):[],this.thresholds=thresholds.sort(function(a,b){
return a<b?-1:1}).filter(function(val,i,refer){return 0===i||val>refer[i-1];
}),this.colors=colors,this.range=range}else this.contourXRange=0,
this.contourYRange=0,this.contourValues=[],this.thresholds=[],
this.range={x0:0,y0:0,x1:0,y1:0}},GeoCore.prototype.paintContourLines=function(){
var _this=this;if(this.contourLineLayer||(this.contourLineLayer=L.layerGroup([]).addTo(this.geoMap)),
this.contourLineLayer.clearLayers(),this.contourXRange>0&&this.contourYRange>0&&this.thresholds.length>0){
var polygons=D3Contour.contours().size([this.contourXRange,this.contourYRange]).thresholds(this.thresholds)(this.contourValues);
polygons.forEach(function(polygon){polygon.coordinates=polygon.coordinates.map(function(coordsL1){
return coordsL1.map(function(coordsL2){return coordsL2.map(function(coordsL3){
return[_this.range.x0+(coordsL3[0]-.5)/_this.contourXRange*(_this.range.x1-_this.range.x0),_this.range.y0+(coordsL3[1]-.5)/_this.contourYRange*(_this.range.y1-_this.range.y0)];
})})})}),polygons.forEach(function(polygon,i,refer){var colorRatio=0;
_this.thresholds.length>0&&(colorRatio=_this.thresholds.indexOf(polygon.value)/(_this.thresholds.length-1)),
_this.fillRange&&i<refer.length-1&&(polygon.coordinates=polygon.coordinates.concat(refer[i+1].coordinates)),
_this.contourLineLayer.addLayer(L.geoJSON(polygon,{style:function(){
return{color:_this.fillRange?"rgba(0, 0, 0, 0)":_this.colors[i],
weight:1.5,opacity:1,fillColor:_this.fillRange?_this.colors[i]:"rgba(0, 0, 0, 0)",
fillOpacity:1}}}))})}},GeoCore.prototype.updateGraphConfigs=function(config){
void 0!==config.distanceBetweenEdgeArrows&&(this.distanceBetweenEdgeArrows=config.distanceBetweenEdgeArrows),
void 0!==config.showNodeTooltip&&(this.showNodeTooltip=config.showNodeTooltip),
void 0!==config.showLinkTooltip&&(this.showLinkTooltip=config.showLinkTooltip),
void 0!==config.nodeToolTipCallback&&(this.nodeToolTipCallback=config.nodeToolTipCallback),
void 0!==config.linkToolTipCallback&&(this.linkToolTipCallback=config.linkToolTipCallback),
void 0!==config.showNodeLabel&&(this.showNodeLabel=config.showNodeLabel),
void 0!==config.showLinkLabel&&(this.showLinkLabel=config.showLinkLabel),
void 0!==config.nodeLabelCallback&&(this.nodeLabelCallback=config.nodeLabelCallback),
void 0!==config.linkLabelCallback&&(this.linkLabelCallback=config.linkLabelCallback),
void 0!==config.dragCallback&&(this.dragCallback=config.dragCallback);
},GeoCore.prototype.addNodeListener=function(eventType,callback){
this.nodeCallbackFunctions[eventType]=callback},GeoCore.prototype.addLinkListener=function(eventType,callback){
this.linkCallbackFunctions[eventType]=callback},GeoCore.prototype.nodes=function(){
return this.internalNodesArray},GeoCore.prototype.getNode=function(id){
return this.internalNodesMap[id]},GeoCore.prototype.links=function(){
return this.internalLinksArray},GeoCore.prototype.getLink=function(id){
return this.internalLinksMap[id]},GeoCore.prototype.replaceData=function(internalData){
var _this=this;internalData.nodes.forEach(function(node){var internalNode={
exId:node.exID,exType:node.exType,attrs:node.attrs,display:node.styles.base.display||"circle",
id:node.id,imageSlicing:[0,0,0,0],opacity:1,x:node.exX,y:node.exY,
fillColor:node.styles.base.fillColor||"red",bounds:{x1:0,x0:0,
y1:0,y0:0},aspectRatio:node.styles.base.aspectRatio||1,radius:node.styles.base.radius||40,
links:[],showAtZoom:8,hideAtZoom:19,scaleWithZoom:!0};node.styles.base.icon&&(internalNode.icon=node.styles.base.icon),
void 0!==node.styles.base.showAtZoom&&(internalNode.showAtZoom=node.styles.base.showAtZoom),
void 0!==node.styles.base.hideAtZoom&&(internalNode.hideAtZoom=node.styles.base.hideAtZoom),
void 0!==node.styles.base.scaleWithZoom&&(internalNode.scaleWithZoom=node.styles.base.scaleWithZoom),
_this.internalNodesMap[node.id]=internalNode,_this.internalNodesArray.push(internalNode);
}),internalData.links.forEach(function(link){var internalLink={
exType:link.exType,attrs:link.attrs,id:link.id,imageSlicing:[0,0,0,0],
opacity:1,lineColor:link.styles.base.fillColor||"blue",lineWidth:link.styles.base.radius||5,
from:_this.internalNodesMap[link.from],to:_this.internalNodesMap[link.to],
scaleWithZoom:!0,showAtZoom:8,hideAtZoom:19,iconRadius:25,directed:link.directed,
arrowSize:40};link.styles.base.icon&&(internalLink.icon=link.styles.base.icon),
void 0!==link.styles.base.showAtZoom&&(internalLink.showAtZoom=link.styles.base.showAtZoom),
void 0!==link.styles.base.hideAtZoom&&(internalLink.hideAtZoom=link.styles.base.hideAtZoom),
void 0!==link.styles.base.scaleWithZoom&&(internalLink.scaleWithZoom=link.styles.base.scaleWithZoom),
void 0!==link.styles.base.iconRadius&&(internalLink.iconRadius=link.styles.base.iconRadius),
void 0!==link.styles.base.arrowSize&&(internalLink.arrowSize=link.styles.base.arrowSize),
_this.internalLinksMap[link.id]=internalLink,_this.internalLinksArray.push(internalLink);
})},GeoCore.prototype.paintGraph=function(circle){var _this=this;
this.graphLayer||(this.graphLayer=L.layerGroup([]).addTo(this.geoMap)),
this.graphLayer.clearLayers(); console.log('cleared');var currentZoom=this.geoMap.getZoom(),scalingFactor=Math.pow(2,18-currentZoom)/20;
if(circle&&(this.circle=circle),this.circle){var circleLayer=L.circle([this.circle.latitude,this.circle.longitude],{
color:"rgba(0, 0, 0, 0)",fillColor:"blue",fillOpacity:.5,radius:10*this.circle.radius
});this.graphLayer.addLayer(circleLayer);var markIcon=L.icon({
iconUrl:this.circle.iconString,iconSize:[this.circle.iconSize,this.circle.iconSize],
iconAnchor:[this.circle.iconSize/2,this.circle.iconSize/2]}),marker=L.marker(new L.LatLng(this.circle.latitude,this.circle.longitude),{
draggable:!0,icon:markIcon});this.graphLayer.addLayer(marker),
marker.on("dragend",function(e){_this.dragCallback(marker.getLatLng().lat,marker.getLatLng().lng);
})}this.internalLinksArray.filter(function(link){return Math.max(link.showAtZoom,link.from.showAtZoom,link.to.showAtZoom)<=currentZoom&&Math.min(link.hideAtZoom,link.from.hideAtZoom,link.to.hideAtZoom)>currentZoom;
}).forEach(function(link){var linkBackground=L.polyline([[link.from.y||0,link.from.x||0],[link.to.y||0,link.to.x||0]],{
color:link.lineColor,weight:link.scaleWithZoom?link.lineWidth*Math.pow(2,currentZoom-13.5):link.lineWidth
});if(_this.showLinkTooltip&&linkBackground.bindTooltip(_this.linkToolTipCallback(link)),
Object.keys(_this.linkCallbackFunctions).forEach(function(event){
var callBackMap=_this.linkCallbackFunctions;linkBackground.on(event,function(){
callBackMap[event](link)})}),_this.graphLayer.addLayer(linkBackground),
link.directed){var arrowCenters=[],fromX=link.from.x||0,fromY=link.from.y||0,toX=link.to.x||0,toY=link.to.y||0,fromPixel=_this.geoMap.project([fromY,fromX]),toPixel=_this.geoMap.project([toY,toX]);
if(0===_this.distanceBetweenEdgeArrows)arrowCenters.push([(fromY+toY)/2,(fromX+toX)/2]);else for(var distance=Math.sqrt(Math.pow(fromPixel.x-toPixel.x,2)+Math.pow(fromPixel.y-toPixel.y,2)),arrowNumber=Math.max(2,distance/_this.distanceBetweenEdgeArrows*Math.pow(2,13-currentZoom)+1),i=1;i<arrowNumber;i++)arrowCenters.push([fromY+(toY-fromY)*i/arrowNumber,fromX+(toX-fromX)*i/arrowNumber]);
var vec1_1=_this.rotate([toY-fromY,toX-fromX],2*Math.PI/3),vec2_1=_this.rotate([toY-fromY,toX-fromX],Math.PI/3);
arrowCenters.forEach(function(anchorPosition){var pixel=_this.geoMap.project([anchorPosition[0],anchorPosition[1]]),arrowSize=link.scaleWithZoom?link.arrowSize*Math.pow(2,currentZoom-13.5):link.arrowSize,arrow=L.polygon([[anchorPosition[0],anchorPosition[1]],_this.geoMap.unproject([pixel.x+vec1_1[0]*arrowSize,pixel.y+vec1_1[1]*arrowSize]),_this.geoMap.unproject([pixel.x+vec2_1[0]*arrowSize,pixel.y+vec2_1[1]*arrowSize])],{
color:"rgba(0, 0, 0, 0)",fillColor:link.lineColor,fillOpacity:1
});_this.graphLayer.addLayer(arrow)})}if(link.icon){var iconSize=link.iconRadius;
link.scaleWithZoom&&(iconSize=link.iconRadius*Math.pow(2,currentZoom-13.5));
var linkIcon=L.icon({iconUrl:_this.icons.getIcon(link.icon)?_this.icons.getIcon(link.icon).image:"",
iconSize:[iconSize,iconSize],iconAnchor:[iconSize/2,iconSize/2]
}),iconMarker=L.marker([((link.from.y||0)+(link.to.y||0))/2,((link.from.x||0)+(link.to.x||0))/2],{
icon:linkIcon});_this.graphLayer.addLayer(iconMarker)}if(_this.showLinkLabel){
var linkLabel=L.divIcon({className:"gvis-geo-link-label",html:_this.linkLabelCallback(link),
bgPos:link.scaleWithZoom?[link.iconRadius*Math.pow(2,currentZoom-14.6)+10,0]:[link.iconRadius/1.2,0]
});_this.graphLayer.addLayer(L.marker([((link.from.y||0)+(link.to.y||0))/2,((link.from.x||0)+(link.to.x||0))/2],{
icon:linkLabel}))}}),this.internalNodesArray.filter(function(node){
return node.showAtZoom<=currentZoom&&node.hideAtZoom>currentZoom;
}).forEach(function(node){var nodeBackground=L.circle([node.y||0,node.x||0],{
color:"rgba(0, 0, 0, 0)",fillColor:node.fillColor,fillOpacity:1,
radius:10*node.radius*(node.scaleWithZoom?1:scalingFactor)});if(_this.showNodeTooltip&&!node.icon&&nodeBackground.bindTooltip(_this.nodeToolTipCallback(node)),
Object.keys(_this.nodeCallbackFunctions).forEach(function(event){
var callBackMap=_this.nodeCallbackFunctions;nodeBackground.on(event,function(){
callBackMap[event](node)})}),_this.graphLayer.addLayer(nodeBackground),
node.icon){var iconSize=1.4*node.radius;node.scaleWithZoom&&(iconSize=node.radius*Math.pow(2,currentZoom-13.2));
var nodeIcon=L.icon({iconUrl:_this.icons.getIcon(node.icon)?_this.icons.getIcon(node.icon).image:"",
iconSize:[iconSize,iconSize],iconAnchor:[iconSize/2,iconSize]
}),iconMarker=L.marker([node.y||0,node.x||0],{icon:nodeIcon,riseOnHover:!0
});_this.showNodeTooltip&&iconMarker.bindPopup(_this.nodeToolTipCallback(node)),
_this.graphLayer.addLayer(iconMarker)}if(_this.showNodeLabel){
var nodeLabel=L.divIcon({className:"gvis-geo-node-label",html:_this.nodeLabelCallback(node),
bgPos:node.scaleWithZoom?[0,3+node.radius*Math.pow(2,currentZoom-13.5)]:[0,node.radius+8]
});_this.graphLayer.addLayer(L.marker([node.y||0,node.x||0],{
icon:nodeLabel}))}})},GeoCore.prototype.rotate=function(vec,rad){
if(0===vec[0]&&0===vec[1])return[0,0];var nonNorm=[Math.cos(rad)*vec[0]-Math.sin(rad)*vec[1],Math.sin(rad)*vec[0]+Math.cos(rad)*vec[1]],dist=Math.sqrt(Math.pow(nonNorm[0],2)+Math.pow(nonNorm[1],2));
return[nonNorm[0]/dist,nonNorm[1]/dist]},GeoCore}();exports.GeoCore=GeoCore;
var GraphChartRenderGeo=function(_super){function GraphChartRenderGeo(options,chart){
var _this=_super.call(this,"geo")||this;return _this.canvasOptions={
container:document.body,mapboxToken:"testtoken",assetsUrlBase:"./assets",
advanced:{showFPS:!1},toolbar:{back:!1,enabled:!1,showLabels:!0,
zoomControl:!0,zoomOut:!1,location:"inside"},nodeMenu:{enabled:!0,
showData:!1,contentsFunction:function(data,node){try{document.querySelector(".DVSL-Menu nav").style.display="";
}catch(err){}return node.data.exID}},linkMenu:{enabled:!1,showData:!1,
contentsFunction:function(data,link){try{document.querySelector(".DVSL-Menu nav").style.display="";
}catch(err){}return link.data.exType}},style:{hiddenLinks:{lineColor:"rgba(100,100,100,0.3)",
lineWidth:3,size:20},linkRadiusExtent:[.6,30],linkLengthExtent:[.3,150],
linkStrengthExtent:[.1,5],linkDetailMinSize:12,linkDetailMinZoom:.2,
multilinkSpacing:graphchart_style_1.GraphStyle.defaultNodeBaseStyle.radius,
nodeDetailMinZoom:.08,scaleLinksWithZoom:!0,scaleObjectsWithZoom:!0,
selection:{fillColor:"rgba(173, 216, 230, 1)",lineColor:"rgba(255,255,255,0.01)",
shadowBlur:8,shadowColor:"rgba(0,0,0,0.1)",shadowOffsetX:0,shadowOffsetY:0,
sizeProportional:.1,sizeConstant:15},nodeLabel:{scaleWithZoom:!0,
scaleWithSize:!1,aspectRatio:10,borderRadius:10,backgroundStyle:{
fillColor:"rgba(250, 250, 250, 0.7)",lineColor:"gray"},align:"center"
},linkLabel:{scaleWithZoom:!0,scaleWithSize:!1,aspectRatio:10,
borderRadius:10,align:"center",backgroundStyle:{fillColor:"rgba(250, 250, 250, 0.7)"
}},selfLinkAngle:90,selfLinkHeightFactor:3,selfLinkWidthFactor:1,
selfLinkShape:"quadratic"},area:{latitude:37.52711,longitude:-122.262505,
zoom:12,style:{overlayColor:"rgba(255, 255, 0, 0)",fillColor:"rgba(249, 249, 249, 0)"
},height:300,width:300,maxHeight:1e4,maxWidth:1e4,minHeight:300,
minWidth:300}},void 0===options.container&&console.error(new exception_1.GException(2001,"container is not exist. Using <body> element as container.").toString()),
_this.chart=chart,_this.initOptions(options),_this.color=new color_1.Color,
_this.icons=new icon_1.ICON(_this.canvasOptions.assetsUrlBase+"icons/"),
_this.core=new GeoCore,_this.core.icons=_this.icons,_this.core.geoMap=L.map(_this.canvasOptions.container,{
preferCanvas:!0}).setView([_this.canvasOptions.area.latitude,_this.canvasOptions.area.longitude],_this.canvasOptions.area.zoom),
L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{
attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
maxZoom:18,id:"mapbox.streets",accessToken:_this.canvasOptions.mapboxToken
}).addTo(_this.core.geoMap),_this.initEventHandler(),_this}return __extends(GraphChartRenderGeo,_super),
GraphChartRenderGeo.prototype.initOptions=function(options){this.canvasOptions.area.style.overlayColor=graphchart_style_1.GraphStyle.defualtAreaStyle.overlayColor,
this.canvasOptions.area.style.fillColor=graphchart_style_1.GraphStyle.defualtAreaStyle.fillColor,
this.canvasOptions.area.height=graphchart_style_1.GraphStyle.defualtAreaStyle.height,
this.canvasOptions.area.width=graphchart_style_1.GraphStyle.defualtAreaStyle.width,
this.canvasOptions.area.maxHeight=graphchart_style_1.GraphStyle.defualtAreaStyle.maxHeight,
this.canvasOptions.area.maxWidth=graphchart_style_1.GraphStyle.defualtAreaStyle.maxWidth,
this.canvasOptions.area.minHeight=graphchart_style_1.GraphStyle.defualtAreaStyle.minHeight,
this.canvasOptions.area.minWidth=graphchart_style_1.GraphStyle.defualtAreaStyle.minWidth,
utils_1.Utils.extend(this.canvasOptions,options),"/"!==this.canvasOptions.assetsUrlBase.substr(this.canvasOptions.assetsUrlBase.length-1)&&(this.canvasOptions.assetsUrlBase+="/");
},GraphChartRenderGeo.prototype.initEventHandler=function(){var _this=this;
this.core.geoMap.on("zoomend",function(){return _this.core.paintGraph();
})},GraphChartRenderGeo.prototype.getCore=function(){return this.core;
},GraphChartRenderGeo.prototype.collapseNode=function(id){return this;
},GraphChartRenderGeo.prototype.expandNode=function(id){return this;
},GraphChartRenderGeo.prototype.initNodeLabelSetting=function(node){
var _this=this;node.label="";var type=node.data.exType,attrs=Object.keys(node.data.attrs||{}),keys=Object.keys(node.data.labels||{}),enabledKeys=keys.filter(function(k){
return node.data.labels[k]});if(enabledKeys.indexOf("id")!==-1){
var attr="id",value=node.data.exID;1===enabledKeys.length?node.label+=this.chart.language.getVertexString(type,attr,value)+"<br>":node.label+=this.chart.language.getVertexString("built-in-translate","Vertex")+" : "+this.chart.language.getVertexString(type,attr,value)+"<br>";
}if(enabledKeys.indexOf("type")!==-1){var attr="type",value=node.data.exType;
1===enabledKeys.length?node.label+=this.chart.language.getVertexString(type)+"<br>":node.label+=this.chart.language.getVertexString("built-in-translate","Type")+" : "+this.chart.language.getVertexString(type)+"<br>";
}return enabledKeys.forEach(function(attr){if(attrs.indexOf(attr)!==-1){
var value=node.data.attrs[attr];node.label+=_this.chart.language.getVertexString(type,attr)+" : "+JSON.stringify(_this.chart.language.getVertexString(type,attr,value))+"<br>";
}}),node.label.length>0&&(node.label=node.label.substr(0,node.label.length-4)),
this},GraphChartRenderGeo.prototype.initNodeRenderSetting=function(node){
var inNode=node.data,customizedFlag={};for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.base)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.base,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.base[key]);
Object.keys(inNode.styles.base||{}).forEach(function(key){var tmp=inNode.styles.base[key];
"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
}),node.fillColor=inNode.styles.base.fillColor||this.color.getColor(inNode.exType);
var iconName=void 0!==inNode.styles.base.icon?inNode.styles.base.icon:this.chart.render.icons[inNode.exType];
void 0!==window.gsql&&void 0!==window.gsql.icons&&(iconName=window.gsql.icons[inNode.exType]||iconName);
var icon=this.icons.getIcon(iconName);if(null===icon?delete node.image:(node.image=icon.image,
node.imageSlicing=icon.imageSlicing),inNode.styles.isHovered=node.hovered,
node.hovered){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.hovered)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.hovered,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.hovered[key]);
Object.keys(inNode.styles.hovered||{}).forEach(function(key){
var tmp=inNode.styles.hovered[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isSelected=node.selected,node.selected){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.selected)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.selected,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.selected[key]);
Object.keys(inNode.styles.selected||{}).forEach(function(key){
var tmp=inNode.styles.selected[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isLowlighted){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.lowlighted)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.lowlighted,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.lowlighted[key]);
Object.keys(inNode.styles.lowlighted||{}).forEach(function(key){
var tmp=inNode.styles.lowlighted[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isLocked=node.locked,node.locked){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.locked)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.locked,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.locked[key]);
Object.keys(inNode.styles.locked||{}).forEach(function(key){var tmp=inNode.styles.locked[key];
"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isExpanded=node.expanded,node.expanded){for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.expanded)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.expanded,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.expanded[key]);
Object.keys(inNode.styles.expanded||{}).forEach(function(key){
var tmp=inNode.styles.expanded[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(inNode.styles.isInvisible=node.invisible,node.invisible){
for(var key in graphchart_style_1.GraphStyle.defaultNodeStyle.invisible)Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defaultNodeStyle.invisible,key)&&(node[key]=graphchart_style_1.GraphStyle.defaultNodeStyle.invisible[key]);
Object.keys(inNode.styles.invisible||{}).forEach(function(key){
var tmp=inNode.styles.invisible[key];"object"==typeof tmp&&"object"==typeof node[key]&&null!==node[key]?(customizedFlag[key]={},
Object.keys(tmp||{}).forEach(function(attr){node[key][attr]=tmp[attr],
customizedFlag[key][attr]=!0})):(node[key]=tmp,customizedFlag[key]=!0);
})}if(void 0===customizedFlag.labelStyle||customizedFlag.labelStyle.margin!==!0){
var aspectRatio=node.aspectRatio>1?node.aspectRatio:1,radius=node.radius,margin=(1/aspectRatio-1)*radius;
node.labelStyle.margin=margin}return customizedFlag.draggable!==!0&&(node.draggable=!0),
this},GraphChartRenderGeo.prototype.initNodeItemsSetting=function(node){
var inNode=node.data;return node.items=inNode.others.items||[],
this},GraphChartRenderGeo.prototype.initLinkLabelSetting=function(link){
var _this=this;link.label="";var type=link.data.exType,attrs=Object.keys(link.data.attrs||{}),keys=Object.keys(link.data.labels||{}),enabledKeys=keys.filter(function(k){
return link.data.labels[k]});if(enabledKeys.indexOf("type")!==-1){
link.data.exType;1===enabledKeys.length?link.label+=this.chart.language.getEdgeString(type)+"<br>":link.label+=this.chart.language.getEdgeString("built-in-translate","Type")+" : "+this.chart.language.getEdgeString(type)+"<br>";
}return enabledKeys.forEach(function(attr){if(attrs.indexOf(attr)!==-1){
var value=link.data.attrs[attr];link.label+=_this.chart.language.getEdgeString(type,attr)+" : "+JSON.stringify(_this.chart.language.getEdgeString(type,attr,value))+"<br>";
}}),link.label.length>0&&(link.label=link.label.substr(0,link.label.length-4)),
this},GraphChartRenderGeo.prototype.initLinkItemsSetting=function(link){
var inLink=link.data;return link.items=inLink.others.items||[],
this},GraphChartRenderGeo.prototype.nodeToolTipSetting=function(inNode,node,chart){
var type=inNode.exType,toolTip="<table>";toolTip+="<tr><th>"+this.chart.language.getVertexString("built-in-translate","Vertex")+"</th><th>"+this.chart.language.getVertexString(type,"id",inNode.exID)+"</th></tr>",
toolTip+="<tr><td>"+this.chart.language.getVertexString("built-in-translate","Type")+"</td><td>"+this.chart.language.getVertexString(type)+"</td></tr>";
for(var attr in inNode.attrs)if(Object.prototype.hasOwnProperty.call(inNode.attrs,attr)){
var value=JSON.stringify(this.chart.language.getVertexString(type,attr,inNode.attrs[attr]));
toolTip+="<tr><td>"+this.chart.language.getVertexString(type,attr)+"</td><td>"+value+"</td></tr>";
}return toolTip+="</table>"},GraphChartRenderGeo.prototype.linkToolTipSetting=function(inLink,link,chart){
var type=inLink.exType,toolTip="<table>";toolTip+="<tr><th>"+this.chart.language.getEdgeString("built-in-translate","Edge")+"</th><th>"+this.chart.language.getEdgeString(type)+"</th></tr>";
for(var attr in inLink.attrs)if(Object.prototype.hasOwnProperty.call(inLink.attrs,attr)){
var value=JSON.stringify(this.chart.language.getEdgeString(type,attr,inLink.attrs[attr]));
toolTip+="<tr><td>"+this.chart.language.getEdgeString(type,attr)+"</td><td>"+value+"</td></tr>";
}return toolTip+="</table>"},GraphChartRenderGeo.prototype.nodeMenuContentsFunction=function(data,coreNode,targetOption,defaultContentsFunction){
var menu,_this=this,menuStyle={"background-color":"#e2e2e2",border:"none",
color:"#2b2b2b",padding:"5px 10px","text-align":"center","text-decoration":"none",
display:"inline-block","font-size":"14px",margin:"2px 2px",cursor:"pointer"
};try{document.querySelector(".DVSL-Menu nav:empty").style.display="none";
}catch(err){}try{menu=document.createElement("div"),targetOption.buttons.forEach(function(button){
var btn=document.createElement("button");btn.onclick=function(){
try{button.callback(data,_this.chart),_this.chart.hideMenu()}catch(err){
console.warn("Menu call back function syntax error : ",err.toString());
}},btn.innerHTML=_this.chart.language.getVertexString("built-in-translate","menu",button.label);
for(var s in menuStyle)Object.prototype.hasOwnProperty.call(menuStyle,s)&&(btn.style[s]=menuStyle[s]);
var br=document.createElement("br");menu.appendChild(btn),menu.appendChild(br);
})}catch(err){menu="Error"}return menu},GraphChartRenderGeo.prototype.linkMenuContentsFunction=function(data,coreLink,targetOption,defaultContentsFunction){
var _this=this,menuStyle={"background-color":"#e2e2e2",border:"none",
color:"#2b2b2b",padding:"5px 10px","text-align":"center","text-decoration":"none",
display:"inline-block","font-size":"14px",margin:"2px 2px",cursor:"pointer"
};try{document.querySelector(".DVSL-Menu nav:empty").style.display="none";
}catch(err){}var menu;try{menu=document.createElement("div"),
targetOption.buttons.forEach(function(button){var btn=document.createElement("button");
btn.onclick=function(){try{button.callback(data,_this.chart),
_this.chart.hideMenu()}catch(err){console.warn("Menu call back function syntax error : ",err.toString());
}},btn.innerHTML=_this.chart.language.getEdgeString("built-in-translate","menu",button.label);
for(var s in menuStyle)Object.prototype.hasOwnProperty.call(menuStyle,s)&&(btn.style[s]=menuStyle[s]);
var br=document.createElement("br");menu.appendChild(btn),menu.appendChild(br);
})}catch(err){menu="Error"}return menu},GraphChartRenderGeo.prototype.updateAreaSettings=function(settings){
var option={area:{style:{}}};for(var key in settings)if(Object.prototype.hasOwnProperty.call(settings,key)&&Object.prototype.hasOwnProperty.call(graphchart_style_1.GraphStyle.defualtAreaStyle,key))switch(key){
case"overlayColor":case"fillColor":case"image":option.area.style[key]=settings[key];
break;default:option.area[key]=settings[key]}return this},GraphChartRenderGeo.prototype.replaceData=function(internalData){
return this.core.replaceData(internalData),this},GraphChartRenderGeo;
}(graphchart_render_engine_base_1.GraphChartRenderEngineBase);
exports.GraphChartRenderGeo=GraphChartRenderGeo},function(module,exports,__webpack_require__){
!function(t,i){i(exports)}(this,function(t){"use strict";function i(t){
var i,e,n,o;for(e=1,n=arguments.length;e<n;e++){o=arguments[e];
for(i in o)t[i]=o[i]}return t}function e(t,i){var e=Array.prototype.slice;
if(t.bind)return t.bind.apply(t,e.call(arguments,1));var n=e.call(arguments,2);
return function(){return t.apply(i,n.length?n.concat(e.call(arguments)):arguments);
}}function n(t){return t._leaflet_id=t._leaflet_id||++ti,t._leaflet_id;
}function o(t,i,e){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(e,o),
o=!1)},s=function(){n?o=arguments:(t.apply(e,arguments),setTimeout(r,i),
n=!0)}}function s(t,i,e){var n=i[1],o=i[0],s=n-o;return t===n&&e?t:((t-o)%s+s)%s+o;
}function r(){return!1}function a(t,i){var e=Math.pow(10,void 0===i?6:i);
return Math.round(t*e)/e}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"");
}function u(t){return h(t).split(/\s+/)}function l(t,i){t.hasOwnProperty("options")||(t.options=t.options?Qt(t.options):{});
for(var e in i)t.options[e]=i[e];return t.options}function c(t,i,e){
var n=[];for(var o in t)n.push(encodeURIComponent(e?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));
return(i&&-1!==i.indexOf("?")?"&":"?")+n.join("&")}function _(t,i){
return t.replace(ii,function(t,e){var n=i[e];if(void 0===n)throw new Error("No value provided for variable "+t);
return"function"==typeof n&&(n=n(i)),n})}function d(t,i){for(var e=0;e<t.length;e++)if(t[e]===i)return e;
return-1}function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t];
}function m(t){var i=+new Date,e=Math.max(0,16-(i-oi));return oi=i+e,
window.setTimeout(t,e)}function f(t,i,n){return n&&si===m?void t.call(i):si.call(window,e(t,i));
}function g(t){t&&ri.call(window,t)}function v(){}function y(t){
if("undefined"!=typeof L&&L&&L.Mixin){t=ei(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack);
}}function x(t,i,e){this.x=e?Math.round(t):t,this.y=e?Math.round(i):i;
}function w(t,i,e){return t instanceof x?t:ei(t)?new x(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new x(t.x,t.y):new x(t,i,e);
}function P(t,i){if(t)for(var e=i?[t,i]:t,n=0,o=e.length;n<o;n++)this.extend(e[n]);
}function b(t,i){return!t||t instanceof P?t:new P(t,i)}function T(t,i){
if(t)for(var e=i?[t,i]:t,n=0,o=e.length;n<o;n++)this.extend(e[n]);
}function z(t,i){return t instanceof T?t:new T(t,i)}function M(t,i,e){
if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");
this.lat=+t,this.lng=+i,void 0!==e&&(this.alt=+e)}function C(t,i,e){
return t instanceof M?t:ei(t)&&"object"!=typeof t[0]?3===t.length?new M(t[0],t[1],t[2]):2===t.length?new M(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new M(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===i?null:new M(t,i,e);
}function Z(t,i,e,n){return ei(t)?(this._a=t[0],this._b=t[1],
this._c=t[2],void(this._d=t[3])):(this._a=t,this._b=i,this._c=e,
this._d=n,void 0)}function S(t,i,e,n){return new Z(t,i,e,n)}function E(t){
return document.createElementNS("http://www.w3.org/2000/svg",t);
}function k(t,i){var e,n,o,s,r,a,h="";for(e=0,o=t.length;e<o;e++){
for(n=0,s=(r=t[e]).length;n<s;n++)a=r[n],h+=(n?"L":"M")+a.x+" "+a.y;
h+=i?Xi?"z":"x":""}return h||"M0 0"}function A(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0;
}function I(t,i,e,n){return"touchstart"===i?O(t,e,n):"touchmove"===i?W(t,e,n):"touchend"===i&&H(t,e,n),
this}function B(t,i,e){var n=t["_leaflet_"+i+e];return"touchstart"===i?t.removeEventListener(Qi,n,!1):"touchmove"===i?t.removeEventListener(te,n,!1):"touchend"===i&&(t.removeEventListener(ie,n,!1),
t.removeEventListener(ee,n,!1)),this}function O(t,i,n){var o=e(function(t){
if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){
if(!(ne.indexOf(t.target.tagName)<0))return;$(t)}j(t,i)});t["_leaflet_touchstart"+n]=o,
t.addEventListener(Qi,o,!1),se||(document.documentElement.addEventListener(Qi,R,!0),
document.documentElement.addEventListener(te,D,!0),document.documentElement.addEventListener(ie,N,!0),
document.documentElement.addEventListener(ee,N,!0),se=!0)}function R(t){
oe[t.pointerId]=t,re++}function D(t){oe[t.pointerId]&&(oe[t.pointerId]=t);
}function N(t){delete oe[t.pointerId],re--}function j(t,i){t.touches=[];
for(var e in oe)t.touches.push(oe[e]);t.changedTouches=[t],i(t);
}function W(t,i,e){var n=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&j(t,i);
};t["_leaflet_touchmove"+e]=n,t.addEventListener(te,n,!1)}function H(t,i,e){
var n=function(t){j(t,i)};t["_leaflet_touchend"+e]=n,t.addEventListener(ie,n,!1),
t.addEventListener(ee,n,!1)}function F(t,i,e){function n(t){var i;
if(Ui){if(!Pi||"mouse"===t.pointerType)return;i=re}else i=t.touches.length;
if(!(i>1)){var e=Date.now(),n=e-(s||e);r=t.touches?t.touches[0]:t,
a=n>0&&n<=h,s=e}}function o(t){if(a&&!r.cancelBubble){if(Ui){
if(!Pi||"mouse"===t.pointerType)return;var e,n,o={};for(n in r)e=r[n],
o[n]=e&&e.bind?e.bind(r):e;r=o}r.type="dblclick",i(r),s=null}
}var s,r,a=!1,h=250;return t[ue+ae+e]=n,t[ue+he+e]=o,t[ue+"dblclick"+e]=i,
t.addEventListener(ae,n,!1),t.addEventListener(he,o,!1),t.addEventListener("dblclick",i,!1),
this}function U(t,i){var e=t[ue+ae+i],n=t[ue+he+i],o=t[ue+"dblclick"+i];
return t.removeEventListener(ae,e,!1),t.removeEventListener(he,n,!1),
Pi||t.removeEventListener("dblclick",o,!1),this}function V(t,i,e,n){
if("object"==typeof i)for(var o in i)G(t,o,i[o],e);else for(var s=0,r=(i=u(i)).length;s<r;s++)G(t,i[s],e,n);
return this}function q(t,i,e,n){if("object"==typeof i)for(var o in i)K(t,o,i[o],e);else if(i)for(var s=0,r=(i=u(i)).length;s<r;s++)K(t,i[s],e,n);else{
for(var a in t[le])K(t,a,t[le][a]);delete t[le]}return this}function G(t,i,e,o){
var s=i+n(e)+(o?"_"+n(o):"");if(t[le]&&t[le][s])return this;var r=function(i){
return e.call(o||t,i||window.event)},a=r;Ui&&0===i.indexOf("touch")?I(t,i,r,s):!Vi||"dblclick"!==i||!F||Ui&&Si?"addEventListener"in t?"mousewheel"===i?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):"mouseenter"===i||"mouseleave"===i?(r=function(i){
i=i||window.event,ot(t,i)&&a(i)},t.addEventListener("mouseenter"===i?"mouseover":"mouseout",r,!1)):("click"===i&&Ti&&(r=function(t){
st(t,a)}),t.addEventListener(i,r,!1)):"attachEvent"in t&&t.attachEvent("on"+i,r):F(t,r,s),
t[le]=t[le]||{},t[le][s]=r}function K(t,i,e,o){var s=i+n(e)+(o?"_"+n(o):""),r=t[le]&&t[le][s];
return r?(Ui&&0===i.indexOf("touch")?B(t,i,s):!Vi||"dblclick"!==i||!U||Ui&&Si?"removeEventListener"in t?"mousewheel"===i?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===i?"mouseover":"mouseleave"===i?"mouseout":i,r,!1):"detachEvent"in t&&t.detachEvent("on"+i,r):U(t,s),
void(t[le][s]=null)):this}function Y(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,
nt(t),this}function X(t){return G(t,"mousewheel",Y),this}function J(t){
return V(t,"mousedown touchstart dblclick",Y),G(t,"click",et),
this}function $(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,
this}function Q(t){return $(t),Y(t),this}function tt(t,i){if(!i)return new x(t.clientX,t.clientY);
var e=i.getBoundingClientRect(),n=e.width/i.offsetWidth||1,o=e.height/i.offsetHeight||1;
return new x(t.clientX/n-e.left-i.clientLeft,t.clientY/o-e.top-i.clientTop);
}function it(t){return Pi?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/ce:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0;
}function et(t){_e[t.type]=!0}function nt(t){var i=_e[t.type];
return _e[t.type]=!1,i}function ot(t,i){var e=i.relatedTarget;
if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(t){return!1;
}return e!==t}function st(t,i){var e=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=pi&&e-pi;
n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?Q(t):(pi=e,
i(t))}function rt(t){return"string"==typeof t?document.getElementById(t):t;
}function at(t,i){var e=t.style[i]||t.currentStyle&&t.currentStyle[i];
if((!e||"auto"===e)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);
e=n?n[i]:null}return"auto"===e?null:e}function ht(t,i,e){var n=document.createElement(t);
return n.className=i||"",e&&e.appendChild(n),n}function ut(t){
var i=t.parentNode;i&&i.removeChild(t)}function lt(t){for(;t.firstChild;)t.removeChild(t.firstChild);
}function ct(t){var i=t.parentNode;i.lastChild!==t&&i.appendChild(t);
}function _t(t){var i=t.parentNode;i.firstChild!==t&&i.insertBefore(t,i.firstChild);
}function dt(t,i){if(void 0!==t.classList)return t.classList.contains(i);
var e=gt(t);return e.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(e);
}function pt(t,i){if(void 0!==t.classList)for(var e=u(i),n=0,o=e.length;n<o;n++)t.classList.add(e[n]);else if(!dt(t,i)){
var s=gt(t);ft(t,(s?s+" ":"")+i)}}function mt(t,i){void 0!==t.classList?t.classList.remove(i):ft(t,h((" "+gt(t)+" ").replace(" "+i+" "," ")));
}function ft(t,i){void 0===t.className.baseVal?t.className=i:t.className.baseVal=i;
}function gt(t){return void 0===t.className.baseVal?t.className:t.className.baseVal;
}function vt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&yt(t,i);
}function yt(t,i){var e=!1,n="DXImageTransform.Microsoft.Alpha";
try{e=t.filters.item(n)}catch(t){if(1===i)return}i=Math.round(100*i),
e?(e.Enabled=100!==i,e.Opacity=i):t.style.filter+=" progid:"+n+"(opacity="+i+")";
}function xt(t){for(var i=document.documentElement.style,e=0;e<t.length;e++)if(t[e]in i)return t[e];
return!1}function wt(t,i,e){var n=i||new x(0,0);t.style[pe]=(Oi?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(e?" scale("+e+")":"");
}function Lt(t,i){t._leaflet_pos=i,Ni?wt(t,i):(t.style.left=i.x+"px",
t.style.top=i.y+"px")}function Pt(t){return t._leaflet_pos||new x(0,0);
}function bt(){V(window,"dragstart",$)}function Tt(){q(window,"dragstart",$);
}function zt(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Mt(),
ve=t,ye=t.style.outline,t.style.outline="none",V(window,"keydown",Mt));
}function Mt(){ve&&(ve.style.outline=ye,ve=void 0,ye=void 0,q(window,"keydown",Mt));
}function Ct(t,i){if(!i||!t.length)return t.slice();var e=i*i;
return t=kt(t,e),t=St(t,e)}function Zt(t,i,e){return Math.sqrt(Rt(t,i,e,!0));
}function St(t,i){var e=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(e);
n[0]=n[e-1]=1,Et(t,n,i,0,e-1);var o,s=[];for(o=0;o<e;o++)n[o]&&s.push(t[o]);
return s}function Et(t,i,e,n,o){var s,r,a,h=0;for(r=n+1;r<=o-1;r++)(a=Rt(t[r],t[n],t[o],!0))>h&&(s=r,
h=a);h>e&&(i[s]=1,Et(t,i,e,n,s),Et(t,i,e,s,o))}function kt(t,i){
for(var e=[t[0]],n=1,o=0,s=t.length;n<s;n++)Ot(t[n],t[o])>i&&(e.push(t[n]),
o=n);return o<s-1&&e.push(t[s-1]),e}function At(t,i,e,n,o){var s,r,a,h=n?Se:Bt(t,e),u=Bt(i,e);
for(Se=u;;){if(!(h|u))return[t,i];if(h&u)return!1;a=Bt(r=It(t,i,s=h||u,e,o),e),
s===h?(t=r,h=a):(i=r,u=a)}}function It(t,i,e,n,o){var s,r,a=i.x-t.x,h=i.y-t.y,u=n.min,l=n.max;
return 8&e?(s=t.x+a*(l.y-t.y)/h,r=l.y):4&e?(s=t.x+a*(u.y-t.y)/h,
r=u.y):2&e?(s=l.x,r=t.y+h*(l.x-t.x)/a):1&e&&(s=u.x,r=t.y+h*(u.x-t.x)/a),
new x(s,r,o)}function Bt(t,i){var e=0;return t.x<i.min.x?e|=1:t.x>i.max.x&&(e|=2),
t.y<i.min.y?e|=4:t.y>i.max.y&&(e|=8),e}function Ot(t,i){var e=i.x-t.x,n=i.y-t.y;
return e*e+n*n}function Rt(t,i,e,n){var o,s=i.x,r=i.y,a=e.x-s,h=e.y-r,u=a*a+h*h;
return u>0&&((o=((t.x-s)*a+(t.y-r)*h)/u)>1?(s=e.x,r=e.y):o>0&&(s+=a*o,
r+=h*o)),a=t.x-s,h=t.y-r,n?a*a+h*h:new x(s,r)}function Dt(t){
return!ei(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Nt(t){
return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),
Dt(t)}function jt(t,i,e){var n,o,s,r,a,h,u,l,c,_=[1,4,2,8];for(o=0,
u=t.length;o<u;o++)t[o]._code=Bt(t[o],i);for(r=0;r<4;r++){for(l=_[r],
n=[],o=0,s=(u=t.length)-1;o<u;s=o++)a=t[o],h=t[s],a._code&l?h._code&l||((c=It(h,a,l,i,e))._code=Bt(c,i),
n.push(c)):(h._code&l&&((c=It(h,a,l,i,e))._code=Bt(c,i),n.push(c)),
n.push(a));t=n}return t}function Wt(t,i){var e,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,h=[],u=i&&i.pointToLayer,l=i&&i.coordsToLatLng||Ht;
if(!a&&!r)return null;switch(r.type){case"Point":return e=l(a),
u?u(t,e):new Xe(e);case"MultiPoint":for(o=0,s=a.length;o<s;o++)e=l(a[o]),
h.push(u?u(t,e):new Xe(e));return new qe(h);case"LineString":
case"MultiLineString":return n=Ft(a,"LineString"===r.type?0:1,l),
new tn(n,i);case"Polygon":case"MultiPolygon":return n=Ft(a,"Polygon"===r.type?1:2,l),
new en(n,i);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){
var c=Wt({geometry:r.geometries[o],type:"Feature",properties:t.properties
},i);c&&h.push(c)}return new qe(h);default:throw new Error("Invalid GeoJSON object.");
}}function Ht(t){return new M(t[1],t[0],t[2])}function Ft(t,i,e){
for(var n,o=[],s=0,r=t.length;s<r;s++)n=i?Ft(t[s],i-1,e):(e||Ht)(t[s]),
o.push(n);return o}function Ut(t,i){return i="number"==typeof i?i:6,
void 0!==t.alt?[a(t.lng,i),a(t.lat,i),a(t.alt,i)]:[a(t.lng,i),a(t.lat,i)];
}function Vt(t,i,e,n){for(var o=[],s=0,r=t.length;s<r;s++)o.push(i?Vt(t[s],i-1,e,n):Ut(t[s],n));
return!i&&e&&o.push(o[0]),o}function qt(t,e){return t.feature?i({},t.feature,{
geometry:e}):Gt(e)}function Gt(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{
type:"Feature",properties:{},geometry:t}}function Kt(t,i){return new nn(t,i);
}function Yt(t,i){return new dn(t,i)}function Xt(t){return Yi?new fn(t):null;
}function Jt(t){return Xi||Ji?new xn(t):null}var $t=Object.freeze;
Object.freeze=function(t){return t};var Qt=Object.create||function(){
function t(){}return function(i){return t.prototype=i,new t}}(),ti=0,ii=/\{ *([\w_-]+) *\}/g,ei=Array.isArray||function(t){
return"[object Array]"===Object.prototype.toString.call(t)},ni="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",oi=0,si=window.requestAnimationFrame||p("RequestAnimationFrame")||m,ri=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){
window.clearTimeout(t)},ai=(Object.freeze||Object)({freeze:$t,
extend:i,create:Qt,bind:e,lastId:ti,stamp:n,throttle:o,wrapNum:s,
falseFn:r,formatNum:a,trim:h,splitWords:u,setOptions:l,getParamString:c,
template:_,isArray:ei,indexOf:d,emptyImageUrl:ni,requestFn:si,
cancelFn:ri,requestAnimFrame:f,cancelAnimFrame:g});v.extend=function(t){
var e=function(){this.initialize&&this.initialize.apply(this,arguments),
this.callInitHooks()},n=e.__super__=this.prototype,o=Qt(n);o.constructor=e,
e.prototype=o;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&"__super__"!==s&&(e[s]=this[s]);
return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(y(t.includes),
i.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=i(Qt(o.options),t.options)),
i(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){
n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;
for(var t=0,i=o._initHooks.length;t<i;t++)o._initHooks[t].call(this);
}},e},v.include=function(t){return i(this.prototype,t),this},
v.mergeOptions=function(t){return i(this.prototype.options,t),
this},v.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),e="function"==typeof t?t:function(){
this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],
this.prototype._initHooks.push(e),this};var hi={on:function(t,i,e){
if("object"==typeof t)for(var n in t)this._on(n,t[n],i);else for(var o=0,s=(t=u(t)).length;o<s;o++)this._on(t[o],i,e);
return this},off:function(t,i,e){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],i);else for(var o=0,s=(t=u(t)).length;o<s;o++)this._off(t[o],i,e);else delete this._events;
return this},_on:function(t,i,e){this._events=this._events||{};
var n=this._events[t];n||(n=[],this._events[t]=n),e===this&&(e=void 0);
for(var o={fn:i,ctx:e},s=n,r=0,a=s.length;r<a;r++)if(s[r].fn===i&&s[r].ctx===e)return;
s.push(o)},_off:function(t,i,e){var n,o,s;if(this._events&&(n=this._events[t]))if(i){
if(e===this&&(e=void 0),n)for(o=0,s=n.length;o<s;o++){var a=n[o];
if(a.ctx===e&&a.fn===i)return a.fn=r,this._firingCount&&(this._events[t]=n=n.slice()),
void n.splice(o,1)}}else{for(o=0,s=n.length;o<s;o++)n[o].fn=r;
delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;
var o=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this
});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;
for(var r=0,a=s.length;r<a;r++){var h=s[r];h.fn.call(h.ctx||this,o);
}this._firingCount--}}return n&&this._propagateEvent(o),this},
listens:function(t,i){var e=this._events&&this._events[t];if(e&&e.length)return!0;
if(i)for(var n in this._eventParents)if(this._eventParents[n].listens(t,i))return!0;
return!1},once:function(t,i,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],i);
return this}var s=e(function(){this.off(t,i,n).off(t,s,n)},this);
return this.on(t,i,n).on(t,s,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},
this._eventParents[n(t)]=t,this},removeEventParent:function(t){
return this._eventParents&&delete this._eventParents[n(t)],this;
},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({
layer:t.target,propagatedFrom:t.target},t),!0)}};hi.addEventListener=hi.on,
hi.removeEventListener=hi.clearAllEventListeners=hi.off,hi.addOneTimeEventListener=hi.once,
hi.fireEvent=hi.fire,hi.hasEventListeners=hi.listens;var ui=v.extend(hi),li=Math.trunc||function(t){
return t>0?Math.floor(t):Math.ceil(t)};x.prototype={clone:function(){
return new x(this.x,this.y)},add:function(t){return this.clone()._add(w(t));
},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){
return this.clone()._subtract(w(t))},_subtract:function(t){return this.x-=t.x,
this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t);
},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){
return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,
this.y*=t,this},scaleBy:function(t){return new x(this.x*t.x,this.y*t.y);
},unscaleBy:function(t){return new x(this.x/t.x,this.y/t.y)},
round:function(){return this.clone()._round()},_round:function(){
return this.x=Math.round(this.x),this.y=Math.round(this.y),this;
},floor:function(){return this.clone()._floor()},_floor:function(){
return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this;
},ceil:function(){return this.clone()._ceil()},_ceil:function(){
return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this;
},trunc:function(){return this.clone()._trunc()},_trunc:function(){
return this.x=li(this.x),this.y=li(this.y),this},distanceTo:function(t){
var i=(t=w(t)).x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e);
},equals:function(t){return(t=w(t)).x===this.x&&t.y===this.y},
contains:function(t){return t=w(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y);
},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")";
}},P.prototype={extend:function(t){return t=w(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),
this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),
this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),
this},getCenter:function(t){return new x((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t);
},getBottomLeft:function(){return new x(this.min.x,this.max.y);
},getTopRight:function(){return new x(this.max.x,this.min.y)},
getTopLeft:function(){return this.min},getBottomRight:function(){
return this.max},getSize:function(){return this.max.subtract(this.min);
},contains:function(t){var i,e;return(t="number"==typeof t[0]||t instanceof x?w(t):b(t))instanceof P?(i=t.min,
e=t.max):i=e=t,i.x>=this.min.x&&e.x<=this.max.x&&i.y>=this.min.y&&e.y<=this.max.y;
},intersects:function(t){t=b(t);var i=this.min,e=this.max,n=t.min,o=t.max,s=o.x>=i.x&&n.x<=e.x,r=o.y>=i.y&&n.y<=e.y;
return s&&r},overlaps:function(t){t=b(t);var i=this.min,e=this.max,n=t.min,o=t.max,s=o.x>i.x&&n.x<e.x,r=o.y>i.y&&n.y<e.y;
return s&&r},isValid:function(){return!(!this.min||!this.max);
}},T.prototype={extend:function(t){var i,e,n=this._southWest,o=this._northEast;
if(t instanceof M)i=t,e=t;else{if(!(t instanceof T))return t?this.extend(C(t)||z(t)):this;
if(i=t._southWest,e=t._northEast,!i||!e)return this}return n||o?(n.lat=Math.min(i.lat,n.lat),
n.lng=Math.min(i.lng,n.lng),o.lat=Math.max(e.lat,o.lat),o.lng=Math.max(e.lng,o.lng)):(this._southWest=new M(i.lat,i.lng),
this._northEast=new M(e.lat,e.lng)),this},pad:function(t){var i=this._southWest,e=this._northEast,n=Math.abs(i.lat-e.lat)*t,o=Math.abs(i.lng-e.lng)*t;
return new T(new M(i.lat-n,i.lng-o),new M(e.lat+n,e.lng+o))},
getCenter:function(){return new M((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2);
},getSouthWest:function(){return this._southWest},getNorthEast:function(){
return this._northEast},getNorthWest:function(){return new M(this.getNorth(),this.getWest());
},getSouthEast:function(){return new M(this.getSouth(),this.getEast());
},getWest:function(){return this._southWest.lng},getSouth:function(){
return this._southWest.lat},getEast:function(){return this._northEast.lng;
},getNorth:function(){return this._northEast.lat},contains:function(t){
t="number"==typeof t[0]||t instanceof M||"lat"in t?C(t):z(t);var i,e,n=this._southWest,o=this._northEast;
return t instanceof T?(i=t.getSouthWest(),e=t.getNorthEast()):i=e=t,
i.lat>=n.lat&&e.lat<=o.lat&&i.lng>=n.lng&&e.lng<=o.lng},intersects:function(t){
t=z(t);var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=i.lat&&n.lat<=e.lat,r=o.lng>=i.lng&&n.lng<=e.lng;
return s&&r},overlaps:function(t){t=z(t);var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>i.lat&&n.lat<e.lat,r=o.lng>i.lng&&n.lng<e.lng;
return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",");
},equals:function(t,i){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i));
},isValid:function(){return!(!this._southWest||!this._northEast);
}},M.prototype={equals:function(t,i){return!!t&&(t=C(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===i?1e-9:i));
},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")";
},distanceTo:function(t){return _i.distance(this,C(t))},wrap:function(){
return _i.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,e=i/Math.cos(Math.PI/180*this.lat);
return z([this.lat-i,this.lng-e],[this.lat+i,this.lng+e])},clone:function(){
return new M(this.lat,this.lng,this.alt)}};var ci={latLngToPoint:function(t,i){
var e=this.projection.project(t),n=this.scale(i);return this.transformation._transform(e,n);
},pointToLatLng:function(t,i){var e=this.scale(i),n=this.transformation.untransform(t,e);
return this.projection.unproject(n)},project:function(t){return this.projection.project(t);
},unproject:function(t){return this.projection.unproject(t)},
scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){
return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){
if(this.infinite)return null;var i=this.projection.bounds,e=this.scale(t);
return new P(this.transformation.transform(i.min,e),this.transformation.transform(i.max,e));
},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;
return new M(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,i,t.alt);
},wrapLatLngBounds:function(t){var i=t.getCenter(),e=this.wrapLatLng(i),n=i.lat-e.lat,o=i.lng-e.lng;
if(0===n&&0===o)return t;var s=t.getSouthWest(),r=t.getNorthEast();
return new T(new M(s.lat-n,s.lng-o),new M(r.lat-n,r.lng-o))}},_i=i({},ci,{
wrapLng:[-180,180],R:6371e3,distance:function(t,i){var e=Math.PI/180,n=t.lat*e,o=i.lat*e,s=Math.sin((i.lat-t.lat)*e/2),r=Math.sin((i.lng-t.lng)*e/2),a=s*s+Math.cos(n)*Math.cos(o)*r*r,h=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
return this.R*h}}),di={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){
var i=Math.PI/180,e=this.MAX_LATITUDE,n=Math.max(Math.min(e,t.lat),-e),o=Math.sin(n*i);
return new x(this.R*t.lng*i,this.R*Math.log((1+o)/(1-o))/2)},
unproject:function(t){var i=180/Math.PI;return new M((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R);
},bounds:function(){var t=6378137*Math.PI;return new P([-t,-t],[t,t]);
}()};Z.prototype={transform:function(t,i){return this._transform(t.clone(),i);
},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),
t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,
new x((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};var pi,mi,fi,gi,vi=i({},_i,{
code:"EPSG:3857",projection:di,transformation:function(){var t=.5/(Math.PI*di.R);
return S(t,.5,-t,.5)}()}),yi=i({},vi,{code:"EPSG:900913"}),xi=document.documentElement.style,wi="ActiveXObject"in window,Li=wi&&!document.addEventListener,Pi="msLaunchUri"in navigator&&!("documentMode"in document),bi=A("webkit"),Ti=A("android"),zi=A("android 2")||A("android 3"),Mi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ci=Ti&&A("Google")&&Mi<537&&!("AudioNode"in window),Zi=!!window.opera,Si=A("chrome"),Ei=A("gecko")&&!bi&&!Zi&&!wi,ki=!Si&&A("safari"),Ai=A("phantom"),Ii="OTransition"in xi,Bi=0===navigator.platform.indexOf("Win"),Oi=wi&&"transition"in xi,Ri="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zi,Di="MozPerspective"in xi,Ni=!window.L_DISABLE_3D&&(Oi||Ri||Di)&&!Ii&&!Ai,ji="undefined"!=typeof orientation||A("mobile"),Wi=ji&&bi,Hi=ji&&Ri,Fi=!window.PointerEvent&&window.MSPointerEvent,Ui=!(!window.PointerEvent&&!Fi),Vi=!window.L_NO_TOUCH&&(Ui||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),qi=ji&&Zi,Gi=ji&&Ei,Ki=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yi=!!document.createElement("canvas").getContext,Xi=!(!document.createElementNS||!E("svg").createSVGRect),Ji=!Xi&&function(){
try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';
var i=t.firstChild;return i.style.behavior="url(#default#VML)",
i&&"object"==typeof i.adj}catch(t){return!1}}(),$i=(Object.freeze||Object)({
ie:wi,ielt9:Li,edge:Pi,webkit:bi,android:Ti,android23:zi,androidStock:Ci,
opera:Zi,chrome:Si,gecko:Ei,safari:ki,phantom:Ai,opera12:Ii,win:Bi,
ie3d:Oi,webkit3d:Ri,gecko3d:Di,any3d:Ni,mobile:ji,mobileWebkit:Wi,
mobileWebkit3d:Hi,msPointer:Fi,pointer:Ui,touch:Vi,mobileOpera:qi,
mobileGecko:Gi,retina:Ki,canvas:Yi,svg:Xi,vml:Ji}),Qi=Fi?"MSPointerDown":"pointerdown",te=Fi?"MSPointerMove":"pointermove",ie=Fi?"MSPointerUp":"pointerup",ee=Fi?"MSPointerCancel":"pointercancel",ne=["INPUT","SELECT","OPTION"],oe={},se=!1,re=0,ae=Fi?"MSPointerDown":Ui?"pointerdown":"touchstart",he=Fi?"MSPointerUp":Ui?"pointerup":"touchend",ue="_leaflet_",le="_leaflet_events",ce=Bi&&Si?2*window.devicePixelRatio:Ei?window.devicePixelRatio:1,_e={},de=(Object.freeze||Object)({
on:V,off:q,stopPropagation:Y,disableScrollPropagation:X,disableClickPropagation:J,
preventDefault:$,stop:Q,getMousePosition:tt,getWheelDelta:it,
fakeStop:et,skipped:nt,isExternalTarget:ot,addListener:V,removeListener:q
}),pe=xt(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),me=xt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fe="webkitTransition"===me||"OTransition"===me?me+"End":"transitionend";
if("onselectstart"in document)mi=function(){V(window,"selectstart",$);
},fi=function(){q(window,"selectstart",$)};else{var ge=xt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);
mi=function(){if(ge){var t=document.documentElement.style;gi=t[ge],
t[ge]="none"}},fi=function(){ge&&(document.documentElement.style[ge]=gi,
gi=void 0)}}var ve,ye,xe=(Object.freeze||Object)({TRANSFORM:pe,
TRANSITION:me,TRANSITION_END:fe,get:rt,getStyle:at,create:ht,
remove:ut,empty:lt,toFront:ct,toBack:_t,hasClass:dt,addClass:pt,
removeClass:mt,setClass:ft,getClass:gt,setOpacity:vt,testProp:xt,
setTransform:wt,setPosition:Lt,getPosition:Pt,disableTextSelection:mi,
enableTextSelection:fi,disableImageDrag:bt,enableImageDrag:Tt,
preventOutline:zt,restoreOutline:Mt}),we=ui.extend({run:function(t,i,e,n){
this.stop(),this._el=t,this._inProgress=!0,this._duration=e||.25,
this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Pt(t),
this._offset=i.subtract(this._startPos),this._startTime=+new Date,
this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),
this._complete())},_animate:function(){this._animId=f(this._animate,this),
this._step()},_step:function(t){var i=+new Date-this._startTime,e=1e3*this._duration;
i<e?this._runFrame(this._easeOut(i/e),t):(this._runFrame(1),this._complete());
},_runFrame:function(t,i){var e=this._startPos.add(this._offset.multiplyBy(t));
i&&e._round(),Lt(this._el,e),this.fire("step")},_complete:function(){
g(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){
return 1-Math.pow(1-t,this._easeOutPower)}}),Le=ui.extend({options:{
crs:vi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,
layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,
fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,
zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){
i=l(this,i),this._initContainer(t),this._initLayout(),this._onResize=e(this._onResize,this),
this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),
void 0!==i.zoom&&(this._zoom=this._limitZoom(i.zoom)),i.center&&void 0!==i.zoom&&this.setView(C(i.center),i.zoom,{
reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},
this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=me&&Ni&&!qi&&this.options.zoomAnimation,
this._zoomAnimated&&(this._createAnimProxy(),V(this._proxy,fe,this._catchTransitionEnd,this)),
this._addLayers(this.options.layers)},setView:function(t,e,n){
return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(C(t),e,this.options.maxBounds),
n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=i({
animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration
},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),
this):(this._resetView(t,e),this)},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{
zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(Ni?this.options.zoomDelta:1),
this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(Ni?this.options.zoomDelta:1),
this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,e){var n=this.getZoomScale(i),o=this.getSize().divideBy(2),s=(t instanceof x?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(s));
return this.setView(r,i,{zoom:e})},_getBoundsCenterZoom:function(t,i){
i=i||{},t=t.getBounds?t.getBounds():z(t);var e=w(i.paddingTopLeft||i.padding||[0,0]),n=w(i.paddingBottomRight||i.padding||[0,0]),o=this.getBoundsZoom(t,!1,e.add(n));
if((o="number"==typeof i.maxZoom?Math.min(i.maxZoom,o):o)===1/0)return{
center:t.getCenter(),zoom:o};var s=n.subtract(e).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);
return{center:this.unproject(r.add(a).divideBy(2).add(s),o),zoom:o
}},fitBounds:function(t,i){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");
var e=this._getBoundsCenterZoom(t,i);return this.setView(e.center,e.zoom,i);
},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t);
},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i
})},panBy:function(t,i){if(t=w(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");
if(!0!==i.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),
this;if(this._panAnim||(this._panAnim=new we,this._panAnim.on({
step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),
i.noMoveStart||this.fire("movestart"),!1!==i.animate){pt(this._mapPane,"leaflet-pan-anim");
var e=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,e,i.duration||.25,i.easeLinearity);
}else this._rawPanBy(t),this.fire("move").fire("moveend");return this;
},flyTo:function(t,i,e){function n(t){var i=(g*g-m*m+(t?-1:1)*x*x*v*v)/(2*(t?g:m)*x*v),e=Math.sqrt(i*i+1)-i;
return e<1e-9?-18:Math.log(e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2;
}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function r(t){
return o(t)/s(t)}function a(t){return m*(s(w)/s(w+y*t))}function h(t){
return m*(s(w)*r(w+y*t)-o(w))/x}function u(t){return 1-Math.pow(1-t,1.5);
}function l(){var e=(Date.now()-L)/b,n=u(e)*P;e<=1?(this._flyToFrame=f(l,this),
this._move(this.unproject(c.add(_.subtract(c).multiplyBy(h(n)/v)),p),this.getScaleZoom(m/a(n),p),{
flyTo:!0})):this._move(t,i)._moveEnd(!0)}if(!1===(e=e||{}).animate||!Ni)return this.setView(t,i,e);
this._stop();var c=this.project(this.getCenter()),_=this.project(t),d=this.getSize(),p=this._zoom;
t=C(t),i=void 0===i?p:i;var m=Math.max(d.x,d.y),g=m*this.getZoomScale(p,i),v=_.distanceTo(c)||1,y=1.42,x=y*y,w=n(0),L=Date.now(),P=(n(1)-w)/y,b=e.duration?1e3*e.duration:1e3*P*.8;
return this._moveStart(!0,e.noMoveStart),l.call(this),this},flyToBounds:function(t,i){
var e=this._getBoundsCenterZoom(t,i);return this.flyTo(e.center,e.zoom,i);
},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),
this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),
this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,
this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){
var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),
this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){
var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),
this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){
this._enforcingBounds=!0;var e=this.getCenter(),n=this._limitCenter(e,this._zoom,z(t));
return e.equals(n)||this.panTo(n,i),this._enforcingBounds=!1,
this},invalidateSize:function(t){if(!this._loaded)return this;
t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();
this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),s=n.divideBy(2).round(),r=o.divideBy(2).round(),a=s.subtract(r);
return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),
this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),
this._sizeTimer=setTimeout(e(this.fire,this,"moveend"),200)):this.fire("moveend")),
this.fire("resize",{oldSize:n,newSize:o})):this},stop:function(){
return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),
this._stop()},locate:function(t){if(t=this._locateOptions=i({
timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({
code:0,message:"Geolocation not supported."}),this;var n=e(this._handleGeolocationResponse,this),o=e(this._handleGeolocationError,this);
return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,o,t):navigator.geolocation.getCurrentPosition(n,o,t),
this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),
this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){
var i=t.code,e=t.message||(1===i?"permission denied":2===i?"position unavailable":"timeout");
this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{
code:i,message:"Geolocation error: "+e+"."})},_handleGeolocationResponse:function(t){
var i=new M(t.coords.latitude,t.coords.longitude),e=i.toBounds(t.coords.accuracy),n=this._locateOptions;
if(n.setView){var o=this.getBoundsZoom(e);this.setView(i,n.maxZoom?Math.min(o,n.maxZoom):o);
}var s={latlng:i,bounds:e,timestamp:t.timestamp};for(var r in t.coords)"number"==typeof t.coords[r]&&(s[r]=t.coords[r]);
this.fire("locationfound",s)},addHandler:function(t,i){if(!i)return this;
var e=this[t]=new i(this);return this._handlers.push(e),this.options[t]&&e.enable(),
this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");
try{delete this._container._leaflet_id,delete this._containerId;
}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0;
}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),
ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),
this._clearHandlers(),this._loaded&&this.fire("unload");var t;
for(t in this._layers)this._layers[t].remove();for(t in this._panes)ut(this._panes[t]);
return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,
this},createPane:function(t,i){var e=ht("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i||this._mapPane);
return t&&(this._panes[t]=e),e},getCenter:function(){return this._checkIfLoaded(),
this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint());
},getZoom:function(){return this._zoom},getBounds:function(){
var t=this.getPixelBounds();return new T(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()));
},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom;
},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom;
},getBoundsZoom:function(t,i,e){t=z(t),e=w(e||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),h=this.getSize().subtract(e),u=b(this.project(a,n),this.project(r,n)).getSize(),l=Ni?this.options.zoomSnap:1,c=h.x/u.x,_=h.y/u.y,d=i?Math.max(c,_):Math.min(c,_);
return n=this.getScaleZoom(d,n),l&&(n=Math.round(n/(l/100))*(l/100),
n=i?Math.ceil(n/l)*l:Math.floor(n/l)*l),Math.max(o,Math.min(s,n));
},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new x(this._container.clientWidth||0,this._container.clientHeight||0),
this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){
var e=this._getTopLeftPoint(t,i);return new P(e,e.add(this.getSize()));
},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin;
},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t);
},getPane:function(t){return"string"==typeof t?this._panes[t]:t;
},getPanes:function(){return this._panes},getContainer:function(){
return this._container},getZoomScale:function(t,i){var e=this.options.crs;
return i=void 0===i?this._zoom:i,e.scale(t)/e.scale(i)},getScaleZoom:function(t,i){
var e=this.options.crs;i=void 0===i?this._zoom:i;var n=e.zoom(t*e.scale(i));
return isNaN(n)?1/0:n},project:function(t,i){return i=void 0===i?this._zoom:i,
this.options.crs.latLngToPoint(C(t),i)},unproject:function(t,i){
return i=void 0===i?this._zoom:i,this.options.crs.pointToLatLng(w(t),i);
},layerPointToLatLng:function(t){var i=w(t).add(this.getPixelOrigin());
return this.unproject(i)},latLngToLayerPoint:function(t){return this.project(C(t))._round()._subtract(this.getPixelOrigin());
},wrapLatLng:function(t){return this.options.crs.wrapLatLng(C(t));
},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t));
},distance:function(t,i){return this.options.crs.distance(C(t),C(i));
},containerPointToLayerPoint:function(t){return w(t).subtract(this._getMapPanePos());
},layerPointToContainerPoint:function(t){return w(t).add(this._getMapPanePos());
},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(w(t));
return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){
return this.layerPointToContainerPoint(this.latLngToLayerPoint(C(t)));
},mouseEventToContainerPoint:function(t){return tt(t,this._container);
},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t));
},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t));
},_initContainer:function(t){var i=this._container=rt(t);if(!i)throw new Error("Map container not found.");
if(i._leaflet_id)throw new Error("Map container is already initialized.");
V(i,"scroll",this._onScroll,this),this._containerId=n(i)},_initLayout:function(){
var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ni,
pt(t,"leaflet-container"+(Vi?" leaflet-touch":"")+(Ki?" leaflet-retina":"")+(Li?" leaflet-oldie":"")+(ki?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));
var i=at(t,"position");"absolute"!==i&&"relative"!==i&&"fixed"!==i&&(t.style.position="relative"),
this._initPanes(),this._initControlPos&&this._initControlPos();
},_initPanes:function(){var t=this._panes={};this._paneRenderers={},
this._mapPane=this.createPane("mapPane",this._container),Lt(this._mapPane,new x(0,0)),
this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),
this.createPane("markerPane"),this.createPane("tooltipPane"),
this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(t.markerPane,"leaflet-zoom-hide"),
pt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){
Lt(this._mapPane,new x(0,0));var e=!this._loaded;this._loaded=!0,
i=this._limitZoom(i),this.fire("viewprereset");var n=this._zoom!==i;
this._moveStart(n,!1)._move(t,i)._moveEnd(n),this.fire("viewreset"),
e&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),
i||this.fire("movestart"),this},_move:function(t,i,e){void 0===i&&(i=this._zoom);
var n=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),
(n||e&&e.pinch)&&this.fire("zoom",e),this.fire("move",e)},_moveEnd:function(t){
return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){
return g(this._flyToFrame),this._panAnim&&this._panAnim.stop(),
this},_rawPanBy:function(t){Lt(this._mapPane,this._getMapPanePos().subtract(t));
},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom();
},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds);
},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.");
},_initEvents:function(t){this._targets={},this._targets[n(this._container)]=this;
var i=t?q:V;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),
this.options.trackResize&&i(window,"resize",this._onResize,this),
Ni&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd);
},_onResize:function(){g(this._resizeRequest),this._resizeRequest=f(function(){
this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){
this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){
var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom());
},_findEventTargets:function(t,i){for(var e,o=[],s="mouseout"===i||"mouseover"===i,r=t.target||t.srcElement,a=!1;r;){
if((e=this._targets[n(r)])&&("click"===i||"preclick"===i)&&!t._simulated&&this._draggableMoved(e)){
a=!0;break}if(e&&e.listens(i,!0)){if(s&&!ot(r,t))break;if(o.push(e),
s)break}if(r===this._container)break;r=r.parentNode}return o.length||a||s||!ot(r,t)||(o=[this]),
o},_handleDOMEvent:function(t){if(this._loaded&&!nt(t)){var i=t.type;
"mousedown"!==i&&"keypress"!==i||zt(t.target||t.srcElement),this._fireDOMEvent(t,i);
}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],
_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=i({},t);
o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){
var s=n[0];"contextmenu"===e&&s.listens(e,!0)&&$(t);var r={originalEvent:t
};if("keypress"!==t.type){var a=s.getLatLng&&(!s._radius||s._radius<=10);
r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),
r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),
r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint);
}for(var h=0;h<n.length;h++)if(n[h].fire(e,r,!0),r.originalEvent._stopped||!1===n[h].options.bubblingMouseEvents&&-1!==d(this._mouseEvents,e))return;
}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved();
},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable();
},whenReady:function(t,i){return this._loaded?t.call(i||this,{
target:this}):this.on("load",t,i),this},_getMapPanePos:function(){
return Pt(this._mapPane)||new x(0,0)},_moved:function(){var t=this._getMapPanePos();
return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){return(t&&void 0!==i?this._getNewPixelOrigin(t,i):this.getPixelOrigin()).subtract(this._getMapPanePos());
},_getNewPixelOrigin:function(t,i){var e=this.getSize()._divideBy(2);
return this.project(t,i)._subtract(e)._add(this._getMapPanePos())._round();
},_latLngToNewLayerPoint:function(t,i,e){var n=this._getNewPixelOrigin(e,i);
return this.project(t,i)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,i,e){
var n=this._getNewPixelOrigin(e,i);return b([this.project(t.getSouthWest(),i)._subtract(n),this.project(t.getNorthWest(),i)._subtract(n),this.project(t.getSouthEast(),i)._subtract(n),this.project(t.getNorthEast(),i)._subtract(n)]);
},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2));
},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint());
},_limitCenter:function(t,i,e){if(!e)return t;var n=this.project(t,i),o=this.getSize().divideBy(2),s=new P(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,e,i);
return r.round().equals([0,0])?t:this.unproject(n.add(r),i)},
_limitOffset:function(t,i){if(!i)return t;var e=this.getPixelBounds(),n=new P(e.min.add(t),e.max.add(t));
return t.add(this._getBoundsOffset(n,i))},_getBoundsOffset:function(t,i,e){
var n=b(this.project(i.getNorthEast(),e),this.project(i.getSouthWest(),e)),o=n.min.subtract(t.min),s=n.max.subtract(t.max);
return new x(this._rebound(o.x,-s.x),this._rebound(o.y,-s.y));
},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i));
},_limitZoom:function(t){var i=this.getMinZoom(),e=this.getMaxZoom(),n=Ni?this.options.zoomSnap:1;
return n&&(t=Math.round(t/n)*n),Math.max(i,Math.min(e,t))},_onPanTransitionStep:function(){
this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),
this.fire("moveend")},_tryAnimatedPan:function(t,i){var e=this._getCenterOffset(t)._trunc();
return!(!0!==(i&&i.animate)&&!this.getSize().contains(e)||(this.panBy(e,i),
0))},_createAnimProxy:function(){var t=this._proxy=ht("div","leaflet-proxy leaflet-zoom-animated");
this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){
var i=pe,e=this._proxy.style[i];wt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),
e===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd();
},this),this.on("load moveend",function(){var t=this.getCenter(),i=this.getZoom();
wt(this._proxy,this.project(t,i),this.getZoomScale(i,1))},this),
this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){
ut(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){
this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd();
},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length;
},_tryAnimatedZoom:function(t,i,e){if(this._animatingZoom)return!0;
if(e=e||{},!this._zoomAnimated||!1===e.animate||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;
var n=this.getZoomScale(i),o=this._getCenterOffset(t)._divideBy(1-1/n);
return!(!0!==e.animate&&!this.getSize().contains(o)||(f(function(){
this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),0))},_animateZoom:function(t,i,n,o){
this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,
this._animateToZoom=i,pt(this._mapPane,"leaflet-zoom-anim")),
this.fire("zoomanim",{center:t,zoom:i,noUpdate:o}),setTimeout(e(this._onZoomTransitionEnd,this),250));
},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),
this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),
f(function(){this._moveEnd(!0)},this))}}),Pe=v.extend({options:{
position:"topright"},initialize:function(t){l(this,t)},getPosition:function(){
return this.options.position},setPosition:function(t){var i=this._map;
return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),
this},getContainer:function(){return this._container},addTo:function(t){
this.remove(),this._map=t;var i=this._container=this.onAdd(t),e=this.getPosition(),n=t._controlCorners[e];
return pt(i,"leaflet-control"),-1!==e.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),
this},remove:function(){return this._map?(ut(this._container),
this.onRemove&&this.onRemove(this._map),this._map=null,this):this;
},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus();
}}),be=function(t){return new Pe(t)};Le.include({addControl:function(t){
return t.addTo(this),this},removeControl:function(t){return t.remove(),
this},_initControlPos:function(){function t(t,o){var s=e+t+" "+e+o;
i[t+o]=ht("div",s,n)}var i=this._controlCorners={},e="leaflet-",n=this._controlContainer=ht("div",e+"control-container",this._container);
t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right");
},_clearControlPos:function(){for(var t in this._controlCorners)ut(this._controlCorners[t]);
ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer;
}});var Te=Pe.extend({options:{collapsed:!0,position:"topright",
autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,e,n){
return e<n?-1:n<e?1:0}},initialize:function(t,i,e){l(this,e),
this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,
this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in i)this._addLayer(i[n],n,!0);
},onAdd:function(t){this._initLayout(),this._update(),this._map=t,
t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);
return this._container},addTo:function(t){return Pe.prototype.addTo.call(this,t),
this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);
for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this);
},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this;
},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this;
},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);
var i=this._getLayer(n(t));return i&&this._layers.splice(this._layers.indexOf(i),1),
this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),
this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);
return t<this._form.clientHeight?(pt(this._form,"leaflet-control-layers-scrollbar"),
this._form.style.height=t+"px"):mt(this._form,"leaflet-control-layers-scrollbar"),
this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),
this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=ht("div",t),e=this.options.collapsed;
i.setAttribute("aria-haspopup",!0),J(i),X(i);var n=this._form=ht("form",t+"-list");
e&&(this._map.on("click",this.collapse,this),Ti||V(i,{mouseenter:this.expand,
mouseleave:this.collapse},this));var o=this._layersLink=ht("a",t+"-toggle",i);
o.href="#",o.title="Layers",Vi?(V(o,"click",Q),V(o,"click",this.expand,this)):V(o,"focus",this.expand,this),
e||this.expand(),this._baseLayersList=ht("div",t+"-base",n),this._separator=ht("div",t+"-separator",n),
this._overlaysList=ht("div",t+"-overlays",n),i.appendChild(n);
},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&n(this._layers[i].layer)===t)return this._layers[i];
},_addLayer:function(t,i,n){this._map&&t.on("add remove",this._onLayerChange,this),
this._layers.push({layer:t,name:i,overlay:n}),this.options.sortLayers&&this._layers.sort(e(function(t,i){
return this.options.sortFunction(t.layer,i.layer,t.name,i.name);
},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,
t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},
_update:function(){if(!this._container)return this;lt(this._baseLayersList),
lt(this._overlaysList),this._layerControlInputs=[];var t,i,e,n,o=0;
for(e=0;e<this._layers.length;e++)n=this._layers[e],this._addItem(n),
i=i||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,
this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",
this},_onLayerChange:function(t){this._handlingClick||this._update();
var i=this._getLayer(n(t.target)),e=i.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;
e&&this._map.fire(e,i)},_createRadioElement:function(t,i){var e='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",n=document.createElement("div");
return n.innerHTML=e,n.firstChild},_addItem:function(t){var i,e=document.createElement("label"),o=this._map.hasLayer(t.layer);
t.overlay?((i=document.createElement("input")).type="checkbox",
i.className="leaflet-control-layers-selector",i.defaultChecked=o):i=this._createRadioElement("leaflet-base-layers",o),
this._layerControlInputs.push(i),i.layerId=n(t.layer),V(i,"click",this._onInputClick,this);
var s=document.createElement("span");s.innerHTML=" "+t.name;var r=document.createElement("div");
return e.appendChild(r),r.appendChild(i),r.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(e),
this._checkDisabledLayers(),e},_onInputClick:function(){var t,i,e=this._layerControlInputs,n=[],o=[];
this._handlingClick=!0;for(var s=e.length-1;s>=0;s--)t=e[s],i=this._getLayer(t.layerId).layer,
t.checked?n.push(i):t.checked||o.push(i);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);
for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);
this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){
for(var t,i,e=this._layerControlInputs,n=this._map.getZoom(),o=e.length-1;o>=0;o--)t=e[o],
i=this._getLayer(t.layerId).layer,t.disabled=void 0!==i.options.minZoom&&n<i.options.minZoom||void 0!==i.options.maxZoom&&n>i.options.maxZoom;
},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),
this},_expand:function(){return this.expand()},_collapse:function(){
return this.collapse()}}),ze=Pe.extend({options:{position:"topleft",
zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"
},onAdd:function(t){var i="leaflet-control-zoom",e=ht("div",i+" leaflet-bar"),n=this.options;
return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,i+"-in",e,this._zoomIn),
this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,i+"-out",e,this._zoomOut),
this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),
e},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this);
},disable:function(){return this._disabled=!0,this._updateDisabled(),
this},enable:function(){return this._disabled=!1,this._updateDisabled(),
this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1));
},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1));
},_createButton:function(t,i,e,n,o){var s=ht("a",e,n);return s.innerHTML=t,
s.href="#",s.title=i,s.setAttribute("role","button"),s.setAttribute("aria-label",i),
J(s),V(s,"click",Q),V(s,"click",o,this),V(s,"click",this._refocusOnMap,this),
s},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";
mt(this._zoomInButton,i),mt(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMinZoom())&&pt(this._zoomOutButton,i),
(this._disabled||t._zoom===t.getMaxZoom())&&pt(this._zoomInButton,i);
}});Le.mergeOptions({zoomControl:!0}),Le.addInitHook(function(){
this.options.zoomControl&&(this.zoomControl=new ze,this.addControl(this.zoomControl));
});var Me=Pe.extend({options:{position:"bottomleft",maxWidth:100,
metric:!0,imperial:!0},onAdd:function(t){var i=ht("div","leaflet-control-scale"),e=this.options;
return this._addScales(e,"leaflet-control-scale-line",i),t.on(e.updateWhenIdle?"moveend":"move",this._update,this),
t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this);
},_addScales:function(t,i,e){t.metric&&(this._mScale=ht("div",i,e)),
t.imperial&&(this._iScale=ht("div",i,e))},_update:function(){
var t=this._map,i=t.getSize().y/2,e=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));
this._updateScales(e)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),
this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){
var i=this._getRoundNum(t),e=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,e,i/t);
},_updateImperial:function(t){var i,e,n,o=3.2808399*t;o>5280?(i=o/5280,
e=this._getRoundNum(i),this._updateScale(this._iScale,e+" mi",e/i)):(n=this._getRoundNum(o),
this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,i,e){
t.style.width=Math.round(this.options.maxWidth*e)+"px",t.innerHTML=i;
},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),e=t/i;
return e=e>=10?10:e>=5?5:e>=3?3:e>=2?2:1,i*e}}),Ce=Pe.extend({
options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'
},initialize:function(t){l(this,t),this._attributions={}},onAdd:function(t){
t.attributionControl=this,this._container=ht("div","leaflet-control-attribution"),
J(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());
return this._update(),this._container},setPrefix:function(t){
return this.options.prefix=t,this._update(),this},addAttribution:function(t){
return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,
this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,
this._update()),this):this},_update:function(){if(this._map){
var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);
var e=[];this.options.prefix&&e.push(this.options.prefix),t.length&&e.push(t.join(", ")),
this._container.innerHTML=e.join(" | ")}}});Le.mergeOptions({
attributionControl:!0}),Le.addInitHook(function(){this.options.attributionControl&&(new Ce).addTo(this);
}),Pe.Layers=Te,Pe.Zoom=ze,Pe.Scale=Me,Pe.Attribution=Ce,be.layers=function(t,i,e){
return new Te(t,i,e)},be.zoom=function(t){return new ze(t)},be.scale=function(t){
return new Me(t)},be.attribution=function(t){return new Ce(t);
};var Ze=v.extend({initialize:function(t){this._map=t},enable:function(){
return this._enabled?this:(this._enabled=!0,this.addHooks(),this);
},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),
this):this},enabled:function(){return!!this._enabled}});Ze.addTo=function(t,i){
return t.addHandler(i,this),this};var Se,Ee={Events:hi},ke=Vi?"touchstart mousedown":"mousedown",Ae={
mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",
MSPointerDown:"touchend"},Ie={mousedown:"mousemove",touchstart:"touchmove",
pointerdown:"touchmove",MSPointerDown:"touchmove"},Be=ui.extend({
options:{clickTolerance:3},initialize:function(t,i,e,n){l(this,n),
this._element=t,this._dragStartTarget=i||t,this._preventOutline=e;
},enable:function(){this._enabled||(V(this._dragStartTarget,ke,this._onDown,this),
this._enabled=!0)},disable:function(){this._enabled&&(Be._dragging===this&&this.finishDrag(),
q(this._dragStartTarget,ke,this._onDown,this),this._enabled=!1,
this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,
!dt(this._element,"leaflet-zoom-anim")&&!(Be._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(Be._dragging=this,
this._preventOutline&&zt(this._element),bt(),mi(),this._moving)))){
this.fire("down");var i=t.touches?t.touches[0]:t;this._startPoint=new x(i.clientX,i.clientY),
V(document,Ie[t.type],this._onMove,this),V(document,Ae[t.type],this._onUp,this);
}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{
var i=t.touches&&1===t.touches.length?t.touches[0]:t,e=new x(i.clientX,i.clientY).subtract(this._startPoint);
(e.x||e.y)&&(Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance||($(t),
this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Pt(this._element).subtract(e),
pt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,
window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),
pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),
this._moving=!0,g(this._animRequest),this._lastEvent=t,this._animRequest=f(this._updatePosition,this,!0)));
}},_updatePosition:function(){var t={originalEvent:this._lastEvent
};this.fire("predrag",t),Lt(this._element,this._newPos),this.fire("drag",t);
},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag();
},finishDrag:function(){mt(document.body,"leaflet-dragging"),
this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),
this._lastTarget=null);for(var t in Ie)q(document,Ie[t],this._onMove,this),
q(document,Ae[t],this._onUp,this);Tt(),fi(),this._moved&&this._moving&&(g(this._animRequest),
this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)
})),this._moving=!1,Be._dragging=!1}}),Oe=(Object.freeze||Object)({
simplify:Ct,pointToSegmentDistance:Zt,closestPointOnSegment:function(t,i,e){
return Rt(t,i,e)},clipSegment:At,_getEdgeIntersection:It,_getBitCode:Bt,
_sqClosestPointOnSegment:Rt,isFlat:Dt,_flat:Nt}),Re=(Object.freeze||Object)({
clipPolygon:jt}),De={project:function(t){return new x(t.lng,t.lat);
},unproject:function(t){return new M(t.y,t.x)},bounds:new P([-180,-90],[180,90])
},Ne={R:6378137,R_MINOR:6356752.314245179,bounds:new P([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),
project:function(t){var i=Math.PI/180,e=this.R,n=t.lat*i,o=this.R_MINOR/e,s=Math.sqrt(1-o*o),r=s*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),s/2);
return n=-e*Math.log(Math.max(a,1e-10)),new x(t.lng*i*e,n)},unproject:function(t){
for(var i,e=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),h=0,u=.1;h<15&&Math.abs(u)>1e-7;h++)i=s*Math.sin(a),
i=Math.pow((1-i)/(1+i),s/2),a+=u=Math.PI/2-2*Math.atan(r*i)-a;
return new M(a*e,t.x*e/n)}},je=(Object.freeze||Object)({LonLat:De,
Mercator:Ne,SphericalMercator:di}),We=i({},_i,{code:"EPSG:3395",
projection:Ne,transformation:function(){var t=.5/(Math.PI*Ne.R);
return S(t,.5,-t,.5)}()}),He=i({},_i,{code:"EPSG:4326",projection:De,
transformation:S(1/180,1,-1/180,.5)}),Fe=i({},ci,{projection:De,
transformation:S(1,0,-1,0),scale:function(t){return Math.pow(2,t);
},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){
var e=i.lng-t.lng,n=i.lat-t.lat;return Math.sqrt(e*e+n*n)},infinite:!0
});ci.Earth=_i,ci.EPSG3395=We,ci.EPSG3857=vi,ci.EPSG900913=yi,
ci.EPSG4326=He,ci.Simple=Fe;var Ue=ui.extend({options:{pane:"overlayPane",
attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),
this},remove:function(){return this.removeFrom(this._map||this._mapToAdd);
},removeFrom:function(t){return t&&t.removeLayer(this),this},
getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane);
},addInteractiveTarget:function(t){return this._map._targets[n(t)]=this,
this},removeInteractiveTarget:function(t){return delete this._map._targets[n(t)],
this},getAttribution:function(){return this.options.attribution;
},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,
this._zoomAnimated=i._zoomAnimated,this.getEvents){var e=this.getEvents();
i.on(e,this),this.once("remove",function(){i.off(e,this)},this);
}this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),
this.fire("add"),i.fire("layeradd",{layer:this})}}});Le.include({
addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");
var i=n(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,
t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),
this)},removeLayer:function(t){var i=n(t);return this._layers[i]?(this._loaded&&t.onRemove(this),
t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),
delete this._layers[i],this._loaded&&(this.fire("layerremove",{
layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this;
},hasLayer:function(t){return!!t&&n(t)in this._layers},eachLayer:function(t,i){
for(var e in this._layers)t.call(i,this._layers[e]);return this;
},_addLayers:function(t){for(var i=0,e=(t=t?ei(t)?t:[t]:[]).length;i<e;i++)this.addLayer(t[i]);
},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[n(t)]=t,
this._updateZoomLevels())},_removeZoomLimit:function(t){var i=n(t);
this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels());
},_updateZoomLevels:function(){var t=1/0,i=-1/0,e=this._getZoomSpan();
for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;
t=void 0===o.minZoom?t:Math.min(t,o.minZoom),i=void 0===o.maxZoom?i:Math.max(i,o.maxZoom);
}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,
e!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),
void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom);
}});var Ve=Ue.extend({initialize:function(t,i){l(this,i),this._layers={};
var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},
addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,
this._map&&this._map.addLayer(t),this},removeLayer:function(t){
var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),
delete this._layers[i],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers);
},clearLayers:function(){return this.eachLayer(this.removeLayer,this);
},invoke:function(t){var i,e,n=Array.prototype.slice.call(arguments,1);
for(i in this._layers)(e=this._layers[i])[t]&&e[t].apply(e,n);
return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},
onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){
for(var e in this._layers)t.call(i,this._layers[e]);return this;
},getLayer:function(t){return this._layers[t]},getLayers:function(){
var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){
return this.invoke("setZIndex",t)},getLayerId:function(t){return n(t);
}}),qe=Ve.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),
Ve.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t
}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),
t.removeEventParent(this),Ve.prototype.removeLayer.call(this,t),
this.fire("layerremove",{layer:t})):this},setStyle:function(t){
return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront");
},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){
var t=new T;for(var i in this._layers){var e=this._layers[i];t.extend(e.getBounds?e.getBounds():e.getLatLng());
}return t}}),Ge=v.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]
},initialize:function(t){l(this,t)},createIcon:function(t){return this._createIcon("icon",t);
},createShadow:function(t){return this._createIcon("shadow",t);
},_createIcon:function(t,i){var e=this._getIconUrl(t);if(!e){
if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");
return null}var n=this._createImg(e,i&&"IMG"===i.tagName?i:null);
return this._setIconStyles(n,t),n},_setIconStyles:function(t,i){
var e=this.options,n=e[i+"Size"];"number"==typeof n&&(n=[n,n]);
var o=w(n),s=w("shadow"===i&&e.shadowAnchor||e.iconAnchor||o&&o.divideBy(2,!0));
t.className="leaflet-marker-"+i+" "+(e.className||""),s&&(t.style.marginLeft=-s.x+"px",
t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px");
},_createImg:function(t,i){return i=i||document.createElement("img"),
i.src=t,i},_getIconUrl:function(t){return Ki&&this.options[t+"RetinaUrl"]||this.options[t+"Url"];
}}),Ke=Ge.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",
shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],
popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]
},_getIconUrl:function(t){return Ke.imagePath||(Ke.imagePath=this._detectIconPath()),
(this.options.imagePath||Ke.imagePath)+Ge.prototype._getIconUrl.call(this,t);
},_detectIconPath:function(){var t=ht("div","leaflet-default-icon-path",document.body),i=at(t,"background-image")||at(t,"backgroundImage");
return document.body.removeChild(t),i=null===i||0!==i.indexOf("url")?"":i.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"");
}}),Ye=Ze.extend({initialize:function(t){this._marker=t},addHooks:function(){
var t=this._marker._icon;this._draggable||(this._draggable=new Be(t,t,(!0))),
this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,
drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(t,"leaflet-marker-draggable");
},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,
predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd
},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable");
},moved:function(){return this._draggable&&this._draggable._moved;
},_adjustPan:function(t){var i=this._marker,e=i._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=L.DomUtil.getPosition(i._icon),r=e.getPixelBounds(),a=e.getPixelOrigin(),h=b(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));
if(!h.contains(s)){var u=w((Math.max(h.max.x,s.x)-h.max.x)/(r.max.x-h.max.x)-(Math.min(h.min.x,s.x)-h.min.x)/(r.min.x-h.min.x),(Math.max(h.max.y,s.y)-h.max.y)/(r.max.y-h.max.y)-(Math.min(h.min.y,s.y)-h.min.y)/(r.min.y-h.min.y)).multiplyBy(n);
e.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),
L.DomUtil.setPosition(i._icon,this._draggable._newPos),this._onDrag(t),
this._panRequest=f(this._adjustPan.bind(this,t))}},_onDragStart:function(){
this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart");
},_onPreDrag:function(t){this._marker.options.autoPan&&(g(this._panRequest),
this._panRequest=f(this._adjustPan.bind(this,t)))},_onDrag:function(t){
var i=this._marker,e=i._shadow,n=Pt(i._icon),o=i._map.layerPointToLatLng(n);
e&&Lt(e,n),i._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,
i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){g(this._panRequest),
delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t);
}}),Xe=Ue.extend({options:{icon:new Ke,interactive:!0,draggable:!1,
autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,
title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,
pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,i){
l(this,i),this._latlng=C(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,
this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),
this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,
this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),
this._removeIcon(),this._removeShadow()},getEvents:function(){
return{zoom:this.update,viewreset:this.update}},getLatLng:function(){
return this._latlng},setLatLng:function(t){var i=this._latlng;
return this._latlng=C(t),this.update(),this.fire("move",{oldLatLng:i,
latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,
this.update()},setIcon:function(t){return this.options.icon=t,
this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),
this},getElement:function(){return this._icon},update:function(){
if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();
this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),e=t.icon.createIcon(this._icon),n=!1;
e!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(e.title=t.title),
"IMG"===e.tagName&&(e.alt=t.alt||"")),pt(e,i),t.keyboard&&(e.tabIndex="0"),
this._icon=e,t.riseOnHover&&this.on({mouseover:this._bringToFront,
mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;
o!==this._shadow&&(this._removeShadow(),s=!0),o&&(pt(o,i),o.alt=""),
this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),
this._initInteraction(),o&&s&&this.getPane("shadowPane").appendChild(this._shadow);
},_removeIcon:function(){this.options.riseOnHover&&this.off({
mouseover:this._bringToFront,mouseout:this._resetZIndex}),ut(this._icon),
this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){
this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(t){
Lt(this._icon,t),this._shadow&&Lt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,
this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t;
},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();
this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),
this.addInteractiveTarget(this._icon),Ye)){var t=this.options.draggable;
this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),
this.dragging=new Ye(this),t&&this.dragging.enable()}},setOpacity:function(t){
return this.options.opacity=t,this._map&&this._updateOpacity(),
this},_updateOpacity:function(){var t=this.options.opacity;vt(this._icon,t),
this._shadow&&vt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset);
},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){
return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){
return this.options.icon.options.tooltipAnchor}}),Je=Ue.extend({
options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",
lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,
fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0
},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){
this._renderer._initPath(this),this._reset(),this._renderer._addPath(this);
},onRemove:function(){this._renderer._removePath(this)},redraw:function(){
return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){
return l(this,t),this._renderer&&this._renderer._updateStyle(this),
this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),
this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),
this},getElement:function(){return this._path},_reset:function(){
this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance;
}}),$e=Je.extend({options:{fill:!0,radius:10},initialize:function(t,i){
l(this,i),this._latlng=C(t),this._radius=this.options.radius},
setLatLng:function(t){return this._latlng=C(t),this.redraw(),
this.fire("move",{latlng:this._latlng})},getLatLng:function(){
return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,
this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){
var i=t&&t.radius||this._radius;return Je.prototype.setStyle.call(this,t),
this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),
this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,e=this._clickTolerance(),n=[t+e,i+e];
this._pxBounds=new P(this._point.subtract(n),this._point.add(n));
},_update:function(){this._map&&this._updatePath()},_updatePath:function(){
this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds);
},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance();
}}),Qe=$e.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{
radius:e})),l(this,e),this._latlng=C(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");
this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,
this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){
var t=[this._radius,this._radiusY||this._radius];return new T(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)));
},setStyle:Je.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,e=this._map,n=e.options.crs;
if(n.distance===_i.distance){var o=Math.PI/180,s=this._mRadius/_i.R/o,r=e.project([i+s,t]),a=e.project([i-s,t]),h=r.add(a).divideBy(2),u=e.unproject(h).lat,l=Math.acos((Math.cos(s*o)-Math.sin(i*o)*Math.sin(u*o))/(Math.cos(i*o)*Math.cos(u*o)))/o;
(isNaN(l)||0===l)&&(l=s/Math.cos(Math.PI/180*i)),this._point=h.subtract(e.getPixelOrigin()),
this._radius=isNaN(l)?0:h.x-e.project([u,t-l]).x,this._radiusY=h.y-r.y;
}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));
this._point=e.latLngToLayerPoint(this._latlng),this._radius=this._point.x-e.latLngToLayerPoint(c).x;
}this._updateBounds()}}),tn=Je.extend({options:{smoothFactor:1,
noClip:!1},initialize:function(t,i){l(this,i),this._setLatLngs(t);
},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){
return this._setLatLngs(t),this.redraw()},isEmpty:function(){
return!this._latlngs.length},closestLayerPoint:function(t){for(var i,e,n=1/0,o=null,s=Rt,r=0,a=this._parts.length;r<a;r++)for(var h=this._parts[r],u=1,l=h.length;u<l;u++){
var c=s(t,i=h[u-1],e=h[u],!0);c<n&&(n=c,o=s(t,i,e))}return o&&(o.distance=Math.sqrt(n)),
o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");
var t,i,e,n,o,s,r,a=this._rings[0],h=a.length;if(!h)return null;
for(t=0,i=0;t<h-1;t++)i+=a[t].distanceTo(a[t+1])/2;if(0===i)return this._map.layerPointToLatLng(a[0]);
for(t=0,n=0;t<h-1;t++)if(o=a[t],s=a[t+1],e=o.distanceTo(s),(n+=e)>i)return r=(n-i)/e,
this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)]);
},getBounds:function(){return this._bounds},addLatLng:function(t,i){
return i=i||this._defaultShape(),t=C(t),i.push(t),this._bounds.extend(t),
this.redraw()},_setLatLngs:function(t){this._bounds=new T,this._latlngs=this._convertLatLngs(t);
},_defaultShape:function(){return Dt(this._latlngs)?this._latlngs:this._latlngs[0];
},_convertLatLngs:function(t){for(var i=[],e=Dt(t),n=0,o=t.length;n<o;n++)e?(i[n]=C(t[n]),
this._bounds.extend(i[n])):i[n]=this._convertLatLngs(t[n]);return i;
},_project:function(){var t=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);
var i=this._clickTolerance(),e=new x(i,i);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(e),
t.max._add(e),this._pxBounds=t)},_projectLatlngs:function(t,i,e){
var n,o,s=t[0]instanceof M,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),
e.extend(o[n]);i.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],i,e);
},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],
this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{
var i,e,n,o,s,r,a,h=this._parts;for(i=0,n=0,o=this._rings.length;i<o;i++)for(e=0,
s=(a=this._rings[i]).length;e<s-1;e++)(r=At(a[e],a[e+1],t,e,!0))&&(h[n]=h[n]||[],
h[n].push(r[0]),r[1]===a[e+1]&&e!==s-2||(h[n].push(r[1]),n++));
}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,e=0,n=t.length;e<n;e++)t[e]=Ct(t[e],i);
},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),
this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this);
},_containsPoint:function(t,i){var e,n,o,s,r,a,h=this._clickTolerance();
if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(e=0,
s=this._parts.length;e<s;e++)for(n=0,o=(r=(a=this._parts[e]).length)-1;n<r;o=n++)if((i||0!==n)&&Zt(t,a[o],a[n])<=h)return!0;
return!1}});tn._flat=Nt;var en=tn.extend({options:{fill:!0},isEmpty:function(){
return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){
if(!this._map)throw new Error("Must add layer to map before using getCenter()");
var t,i,e,n,o,s,r,a,h,u=this._rings[0],l=u.length;if(!l)return null;
for(s=r=a=0,t=0,i=l-1;t<l;i=t++)e=u[t],n=u[i],o=e.y*n.x-n.y*e.x,
r+=(e.x+n.x)*o,a+=(e.y+n.y)*o,s+=3*o;return h=0===s?u[0]:[r/s,a/s],
this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){
var i=tn.prototype._convertLatLngs.call(this,t),e=i.length;return e>=2&&i[0]instanceof M&&i[0].equals(i[e-1])&&i.pop(),
i},_setLatLngs:function(t){tn.prototype._setLatLngs.call(this,t),
Dt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){
return Dt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0];
},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,e=new x(i,i);
if(t=new P(t.min.subtract(e),t.max.add(e)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,s=this._rings.length;o<s;o++)(n=jt(this._rings[o],t,!0)).length&&this._parts.push(n);
},_updatePath:function(){this._renderer._updatePoly(this,!0)},
_containsPoint:function(t){var i,e,n,o,s,r,a,h,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;
for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(h=(i=this._parts[o]).length)-1;s<h;r=s++)e=i[s],
n=i[r],e.y>t.y!=n.y>t.y&&t.x<(n.x-e.x)*(t.y-e.y)/(n.y-e.y)+e.x&&(u=!u);
return u||tn.prototype._containsPoint.call(this,t,!0)}}),nn=qe.extend({
initialize:function(t,i){l(this,i),this._layers={},t&&this.addData(t);
},addData:function(t){var i,e,n,o=ei(t)?t:t.features;if(o){for(i=0,
e=o.length;i<e;i++)((n=o[i]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);
return this}var s=this.options;if(s.filter&&!s.filter(t))return this;
var r=Wt(t,s);return r?(r.feature=Gt(t),r.defaultOptions=r.options,
this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this;
},resetStyle:function(t){return t.options=i({},t.defaultOptions),
this._setLayerStyle(t,this.options.style),this},setStyle:function(t){
return this.eachLayer(function(i){this._setLayerStyle(i,t)},this);
},_setLayerStyle:function(t,i){"function"==typeof i&&(i=i(t.feature)),
t.setStyle&&t.setStyle(i)}}),on={toGeoJSON:function(t){return qt(this,{
type:"Point",coordinates:Ut(this.getLatLng(),t)})}};Xe.include(on),
Qe.include(on),$e.include(on),tn.include({toGeoJSON:function(t){
var i=!Dt(this._latlngs),e=Vt(this._latlngs,i?1:0,!1,t);return qt(this,{
type:(i?"Multi":"")+"LineString",coordinates:e})}}),en.include({
toGeoJSON:function(t){var i=!Dt(this._latlngs),e=i&&!Dt(this._latlngs[0]),n=Vt(this._latlngs,e?2:i?1:0,!0,t);
return i||(n=[n]),qt(this,{type:(e?"Multi":"")+"Polygon",coordinates:n
})}}),Ve.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(e){
i.push(e.toGeoJSON(t).geometry.coordinates)}),qt(this,{type:"MultiPoint",
coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;
if("MultiPoint"===i)return this.toMultiPoint(t);var e="GeometryCollection"===i,n=[];
return this.eachLayer(function(i){if(i.toGeoJSON){var o=i.toGeoJSON(t);
if(e)n.push(o.geometry);else{var s=Gt(o);"FeatureCollection"===s.type?n.push.apply(n,s.features):n.push(s);
}}}),e?qt(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",
features:n}}});var sn=Kt,rn=Ue.extend({options:{opacity:1,alt:"",
interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""
},initialize:function(t,i,e){this._url=t,this._bounds=z(i),l(this,e);
},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),
this.options.interactive&&(pt(this._image,"leaflet-interactive"),
this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),
this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image);
},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),
this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),
this},bringToFront:function(){return this._map&&ct(this._image),
this},bringToBack:function(){return this._map&&_t(this._image),
this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),
this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),
this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset
};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t;
},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),
this},getBounds:function(){return this._bounds},getElement:function(){
return this._image},_initImage:function(){var t="IMG"===this._url.tagName,i=this._image=t?this._url:ht("img");
pt(i,"leaflet-image-layer"),this._zoomAnimated&&pt(i,"leaflet-zoom-animated"),
this.options.className&&pt(i,this.options.className),i.onselectstart=r,
i.onmousemove=r,i.onload=e(this.fire,this,"load"),i.onerror=e(this._overlayOnError,this,"error"),
this.options.crossOrigin&&(i.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),
t?this._url=i.src:(i.src=this._url,i.alt=this.options.alt)},_animateZoom:function(t){
var i=this._map.getZoomScale(t.zoom),e=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;
wt(this._image,e,i)},_reset:function(){var t=this._image,i=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),e=i.getSize();
Lt(t,i.min),t.style.width=e.x+"px",t.style.height=e.y+"px"},_updateOpacity:function(){
vt(this._image,this.options.opacity)},_updateZIndex:function(){
this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex);
},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;
t&&this._url!==t&&(this._url=t,this._image.src=t)}}),an=rn.extend({
options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,i=this._image=t?this._url:ht("video");
if(pt(i,"leaflet-image-layer"),this._zoomAnimated&&pt(i,"leaflet-zoom-animated"),
i.onselectstart=r,i.onmousemove=r,i.onloadeddata=e(this.fire,this,"load"),
t){for(var n=i.getElementsByTagName("source"),o=[],s=0;s<n.length;s++)o.push(n[s].src);
this._url=n.length>0?o:[i.src]}else{ei(this._url)||(this._url=[this._url]),
i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop;
for(var a=0;a<this._url.length;a++){var h=ht("source");h.src=this._url[a],
i.appendChild(h)}}}}),hn=Ue.extend({options:{offset:[0,7],className:"",
pane:"popupPane"},initialize:function(t,i){l(this,t),this._source=i;
},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),
t._fadeAnimated&&vt(this._container,0),clearTimeout(this._removeTimeout),
this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&vt(this._container,1),
this.bringToFront()},onRemove:function(t){t._fadeAnimated?(vt(this._container,0),
this._removeTimeout=setTimeout(e(ut,void 0,this._container),200)):ut(this._container);
},getLatLng:function(){return this._latlng},setLatLng:function(t){
return this._latlng=C(t),this._map&&(this._updatePosition(),this._adjustPan()),
this},getContent:function(){return this._content},setContent:function(t){
return this._content=t,this.update(),this},getElement:function(){
return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",
this._updateContent(),this._updateLayout(),this._updatePosition(),
this._container.style.visibility="",this._adjustPan())},getEvents:function(){
var t={zoom:this._updatePosition,viewreset:this._updatePosition
};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t;
},isOpen:function(){return!!this._map&&this._map.hasLayer(this);
},bringToFront:function(){return this._map&&ct(this._container),
this},bringToBack:function(){return this._map&&_t(this._container),
this},_updateContent:function(){if(this._content){var t=this._contentNode,i="function"==typeof this._content?this._content(this._source||this):this._content;
if("string"==typeof i)t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);
t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){
if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=w(this.options.offset),e=this._getAnchor();
this._zoomAnimated?Lt(this._container,t.add(e)):i=i.add(t).add(e);
var n=this._containerBottom=-i.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;
this._container.style.bottom=n+"px",this._container.style.left=o+"px";
}},_getAnchor:function(){return[0,0]}}),un=hn.extend({options:{
maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,
autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,
closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},
openOn:function(t){return t.openPopup(this),this},onAdd:function(t){
hn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this
}),this._source&&(this._source.fire("popupopen",{popup:this},!0),
this._source instanceof Je||this._source.on("preclick",Y))},onRemove:function(t){
hn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this
}),this._source&&(this._source.fire("popupclose",{popup:this},!0),
this._source instanceof Je||this._source.off("preclick",Y))},
getEvents:function(){var t=hn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),
this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){
this._map&&this._map.closePopup(this)},_initLayout:function(){
var t="leaflet-popup",i=this._container=ht("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),e=this._wrapper=ht("div",t+"-content-wrapper",i);
if(this._contentNode=ht("div",t+"-content",e),J(e),X(this._contentNode),
V(e,"contextmenu",Y),this._tipContainer=ht("div",t+"-tip-container",i),
this._tip=ht("div",t+"-tip",this._tipContainer),this.options.closeButton){
var n=this._closeButton=ht("a",t+"-close-button",i);n.href="#close",
n.innerHTML="&#215;",V(n,"click",this._onCloseButtonClick,this);
}},_updateLayout:function(){var t=this._contentNode,i=t.style;
i.width="",i.whiteSpace="nowrap";var e=t.offsetWidth;e=Math.min(e,this.options.maxWidth),
e=Math.max(e,this.options.minWidth),i.width=e+1+"px",i.whiteSpace="",
i.height="";var n=t.offsetHeight,o=this.options.maxHeight;o&&n>o?(i.height=o+"px",
pt(t,"leaflet-popup-scrolled")):mt(t,"leaflet-popup-scrolled"),
this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){
var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),e=this._getAnchor();
Lt(this._container,i.add(e))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){
var t=this._map,i=parseInt(at(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+i,n=this._containerWidth,o=new x(this._containerLeft,-e-this._containerBottom);
o._add(Pt(this._container));var s=t.layerPointToContainerPoint(o),r=w(this.options.autoPanPadding),a=w(this.options.autoPanPaddingTopLeft||r),h=w(this.options.autoPanPaddingBottomRight||r),u=t.getSize(),l=0,c=0;
s.x+n+h.x>u.x&&(l=s.x+n-u.x+h.x),s.x-l-a.x<0&&(l=s.x-a.x),s.y+e+h.y>u.y&&(c=s.y+e-u.y+h.y),
s.y-c-a.y<0&&(c=s.y-a.y),(l||c)&&t.fire("autopanstart").panBy([l,c]);
}},_onCloseButtonClick:function(t){this._close(),Q(t)},_getAnchor:function(){
return w(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0]);
}});Le.mergeOptions({closePopupOnClick:!0}),Le.include({openPopup:function(t,i,e){
return t instanceof un||(t=new un(e).setContent(t)),i&&t.setLatLng(i),
this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),
this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,
this._popup=null),t&&this.removeLayer(t),this}}),Ue.include({
bindPopup:function(t,i){return t instanceof un?(l(t,i),this._popup=t,
t._source=this):(this._popup&&!i||(this._popup=new un(i,this)),
this._popup.setContent(t)),this._popupHandlersAdded||(this.on({
click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,
move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){
return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,
remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,
this._popup=null),this},openPopup:function(t,i){if(t instanceof Ue||(i=t,
t=this),t instanceof qe)for(var e in this._layers){t=this._layers[e];
break}return i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,
this._popup.update(),this._map.openPopup(this._popup,i)),this;
},closePopup:function(){return this._popup&&this._popup._close(),
this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),
this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen();
},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),
this},getPopup:function(){return this._popup},_openPopup:function(t){
var i=t.layer||t.target;this._popup&&this._map&&(Q(t),i instanceof Je?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,t.latlng));
},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){
13===t.originalEvent.keyCode&&this._openPopup(t)}});var ln=hn.extend({
options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,
sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){hn.prototype.onAdd.call(this,t),
this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this
}),this._source&&this._source.fire("tooltipopen",{tooltip:this
},!0)},onRemove:function(t){hn.prototype.onRemove.call(this,t),
t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{
tooltip:this},!0)},getEvents:function(){var t=hn.prototype.getEvents.call(this);
return Vi&&!this.options.permanent&&(t.preclick=this._close),
t},_close:function(){this._map&&this._map.closeTooltip(this)},
_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");
this._contentNode=this._container=ht("div",t)},_updateLayout:function(){},
_adjustPan:function(){},_setPosition:function(t){var i=this._map,e=this._container,n=i.latLngToContainerPoint(i.getCenter()),o=i.layerPointToContainerPoint(t),s=this.options.direction,r=e.offsetWidth,a=e.offsetHeight,h=w(this.options.offset),u=this._getAnchor();
"top"===s?t=t.add(w(-r/2+h.x,-a+h.y+u.y,!0)):"bottom"===s?t=t.subtract(w(r/2-h.x,-h.y,!0)):"center"===s?t=t.subtract(w(r/2+h.x,a/2-u.y+h.y,!0)):"right"===s||"auto"===s&&o.x<n.x?(s="right",
t=t.add(w(h.x+u.x,u.y-a/2+h.y,!0))):(s="left",t=t.subtract(w(r+u.x-h.x,a/2-u.y-h.y,!0))),
mt(e,"leaflet-tooltip-right"),mt(e,"leaflet-tooltip-left"),mt(e,"leaflet-tooltip-top"),
mt(e,"leaflet-tooltip-bottom"),pt(e,"leaflet-tooltip-"+s),Lt(e,t);
},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);
this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,
this._container&&vt(this._container,t)},_animateZoom:function(t){
var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);
this._setPosition(i)},_getAnchor:function(){return w(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0]);
}});Le.include({openTooltip:function(t,i,e){return t instanceof ln||(t=new ln(e).setContent(t)),
i&&t.setLatLng(i),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){
return t&&this.removeLayer(t),this}}),Ue.include({bindTooltip:function(t,i){
return t instanceof ln?(l(t,i),this._tooltip=t,t._source=this):(this._tooltip&&!i||(this._tooltip=new ln(i,this)),
this._tooltip.setContent(t)),this._initTooltipInteractions(),
this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),
this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),
this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){
if(t||!this._tooltipHandlersAdded){var i=t?"off":"on",e={remove:this.closeTooltip,
move:this._moveTooltip};this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,
e.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),
Vi&&(e.click=this._openTooltip)),this[i](e),this._tooltipHandlersAdded=!t;
}},openTooltip:function(t,i){if(t instanceof Ue||(i=t,t=this),
t instanceof qe)for(var e in this._layers){t=this._layers[e];break;
}return i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,
this._tooltip.update(),this._map.openTooltip(this._tooltip,i),
this._tooltip.options.interactive&&this._tooltip._container&&(pt(this._tooltip._container,"leaflet-clickable"),
this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){
return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(mt(this._tooltip._container,"leaflet-clickable"),
this.removeInteractiveTarget(this._tooltip._container))),this;
},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),
this},isTooltipOpen:function(){return this._tooltip.isOpen()},
setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),
this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){
var i=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(i,this._tooltip.options.sticky?t.latlng:void 0);
},_moveTooltip:function(t){var i,e,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),
e=this._map.containerPointToLayerPoint(i),n=this._map.layerPointToLatLng(e)),
this._tooltip.setLatLng(n)}});var cn=Ge.extend({options:{iconSize:[12,12],
html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){
var i=t&&"DIV"===t.tagName?t:document.createElement("div"),e=this.options;
if(i.innerHTML=!1!==e.html?e.html:"",e.bgPos){var n=w(e.bgPos);
i.style.top=n.y+"px",i.style.left=n.x+"px",i.style.whiteSpace="nowrap";
}return this._setIconStyles(i,"icon"),i},createShadow:function(){
return null}});Ge.Default=Ke;var _n=Ue.extend({options:{tileSize:256,
opacity:1,updateWhenIdle:ji,updateWhenZooming:!0,updateInterval:200,
zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,
minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2
},initialize:function(t){l(this,t)},onAdd:function(){this._initContainer(),
this._levels={},this._tiles={},this._resetView(),this._update();
},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){
this._removeAllTiles(),ut(this._container),t._removeZoomLimit(this),
this._container=null,this._tileZoom=void 0},bringToFront:function(){
return this._map&&(ct(this._container),this._setAutoZIndex(Math.max)),
this},bringToBack:function(){return this._map&&(_t(this._container),
this._setAutoZIndex(Math.min)),this},getContainer:function(){
return this._container},setOpacity:function(t){return this.options.opacity=t,
this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,
this._updateZIndex(),this},isLoading:function(){return this._loading;
},redraw:function(){return this._map&&(this._removeAllTiles(),
this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,
viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd
};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),
t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),
t},createTile:function(){return document.createElement("div");
},getTileSize:function(){var t=this.options.tileSize;return t instanceof x?t:new x(t,t);
},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex);
},_setAutoZIndex:function(t){for(var i,e=this.getPane().children,n=-t(-1/0,1/0),o=0,s=e.length;o<s;o++)i=e[o].style.zIndex,
e[o]!==this._container&&i&&(n=t(n,+i));isFinite(n)&&(this.options.zIndex=n+t(-1,1),
this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Li){
vt(this._container,this.options.opacity);var t=+new Date,i=!1,e=!1;
for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){
var s=Math.min(1,(t-o.loaded)/200);vt(o.el,s),s<1?i=!0:(o.active?e=!0:this._onOpaqueTile(o),
o.active=!0)}}e&&!this._noPrune&&this._pruneTiles(),i&&(g(this._fadeFrame),
this._fadeFrame=f(this._updateOpacity,this))}},_onOpaqueTile:r,
_initContainer:function(){this._container||(this._container=ht("div","leaflet-layer "+(this.options.className||"")),
this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),
this.getPane().appendChild(this._container))},_updateLevels:function(){
var t=this._tileZoom,i=this.options.maxZoom;if(void 0!==t){for(var e in this._levels)this._levels[e].el.children.length||e===t?(this._levels[e].el.style.zIndex=i-Math.abs(t-e),
this._onUpdateLevel(e)):(ut(this._levels[e].el),this._removeTilesAtZoom(e),
this._onRemoveLevel(e),delete this._levels[e]);var n=this._levels[t],o=this._map;
return n||((n=this._levels[t]={}).el=ht("div","leaflet-tile-container leaflet-zoom-animated",this._container),
n.el.style.zIndex=i,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),
n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),
n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:r,
_onRemoveLevel:r,_onCreateLevel:r,_pruneTiles:function(){if(this._map){
var t,i,e=this._map.getZoom();if(e>this.options.maxZoom||e<this.options.minZoom)this._removeAllTiles();else{
for(t in this._tiles)(i=this._tiles[t]).retain=i.current;for(t in this._tiles)if((i=this._tiles[t]).current&&!i.active){
var n=i.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2);
}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t);
}}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i);
},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t);
},_invalidateAll:function(){for(var t in this._levels)ut(this._levels[t].el),
this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),
this._tileZoom=void 0},_retainParent:function(t,i,e,n){var o=Math.floor(t/2),s=Math.floor(i/2),r=e-1,a=new x((+o),(+s));
a.z=+r;var h=this._tileCoordsToKey(a),u=this._tiles[h];return u&&u.active?(u.retain=!0,
!0):(u&&u.loaded&&(u.retain=!0),r>n&&this._retainParent(o,s,r,n));
},_retainChildren:function(t,i,e,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*i;s<2*i+2;s++){
var r=new x(o,s);r.z=e+1;var a=this._tileCoordsToKey(r),h=this._tiles[a];
h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),e+1<n&&this._retainChildren(o,s,e+1,n));
}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i);
},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate);
},_clampZoom:function(t){var i=this.options;return void 0!==i.minNativeZoom&&t<i.minNativeZoom?i.minNativeZoom:void 0!==i.maxNativeZoom&&i.maxNativeZoom<t?i.maxNativeZoom:t;
},_setView:function(t,i,e,n){var o=this._clampZoom(Math.round(i));
(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);
var s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,
this._abortLoading&&this._abortLoading(),this._updateLevels(),
this._resetGrid(),void 0!==o&&this._update(t),e||this._pruneTiles(),
this._noPrune=!!e),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){
for(var e in this._levels)this._setZoomTransform(this._levels[e],t,i);
},_setZoomTransform:function(t,i,e){var n=this._map.getZoomScale(e,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(i,e)).round();
Ni?wt(t.el,o,n):Lt(t.el,o)},_resetGrid:function(){var t=this._map,i=t.options.crs,e=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);
o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],n).x/e.x),Math.ceil(t.project([0,i.wrapLng[1]],n).x/e.y)],
this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],n).y/e.x),Math.ceil(t.project([i.wrapLat[1],0],n).y/e.y)];
},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update();
},_getTiledPixelBounds:function(t){var i=this._map,e=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),n=i.getZoomScale(e,this._tileZoom),o=i.project(t,this._tileZoom).floor(),s=i.getSize().divideBy(2*n);
return new P(o.subtract(s),o.add(s))},_update:function(t){var i=this._map;
if(i){var e=this._clampZoom(i.getZoom());if(void 0===t&&(t=i.getCenter()),
void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),r=[],a=this.options.keepBuffer,h=new P(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));
if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");
for(var u in this._tiles){var l=this._tiles[u].coords;l.z===this._tileZoom&&h.contains(new x(l.x,l.y))||(this._tiles[u].current=!1);
}if(Math.abs(e-this._tileZoom)>1)this._setView(t,e);else{for(var c=o.min.y;c<=o.max.y;c++)for(var _=o.min.x;_<=o.max.x;_++){
var d=new x(_,c);if(d.z=this._tileZoom,this._isValidTile(d)){
var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:r.push(d);
}}if(r.sort(function(t,i){return t.distanceTo(s)-i.distanceTo(s);
}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));
var m=document.createDocumentFragment();for(_=0;_<r.length;_++)this._addTile(r[_],m);
this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var i=this._map.options.crs;
if(!i.infinite){var e=this._globalTileRange;if(!i.wrapLng&&(t.x<e.min.x||t.x>e.max.x)||!i.wrapLat&&(t.y<e.min.y||t.y>e.max.y))return!1;
}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);
return z(this.options.bounds).overlaps(n)},_keyToBounds:function(t){
return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){
var i=this._map,e=this.getTileSize(),n=t.scaleBy(e),o=n.add(e);
return[i.unproject(n,t.z),i.unproject(o,t.z)]},_tileCoordsToBounds:function(t){
var i=this._tileCoordsToNwSe(t),e=new T(i[0],i[1]);return this.options.noWrap||(e=this._map.wrapLatLngBounds(e)),
e},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){
var i=t.split(":"),e=new x((+i[0]),(+i[1]));return e.z=+i[2],
e},_removeTile:function(t){var i=this._tiles[t];i&&(Ci||i.el.setAttribute("src",ni),
ut(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,
coords:this._keyToTileCoords(t)}))},_initTile:function(t){pt(t,"leaflet-tile");
var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",
t.onselectstart=r,t.onmousemove=r,Li&&this.options.opacity<1&&vt(t,this.options.opacity),
Ti&&!zi&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,i){
var n=this._getTilePos(t),o=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),e(this._tileReady,this,t));
this._initTile(s),this.createTile.length<2&&f(e(this._tileReady,this,t,null,s)),
Lt(s,n),this._tiles[o]={el:s,coords:t,current:!0},i.appendChild(s),
this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,i,n){
if(this._map){i&&this.fire("tileerror",{error:i,tile:n,coords:t
});var o=this._tileCoordsToKey(t);(n=this._tiles[o])&&(n.loaded=+new Date,
this._map._fadeAnimated?(vt(n.el,0),g(this._fadeFrame),this._fadeFrame=f(this._updateOpacity,this)):(n.active=!0,
this._pruneTiles()),i||(pt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{
tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,
this.fire("load"),Li||!this._map._fadeAnimated?f(this._pruneTiles,this):setTimeout(e(this._pruneTiles,this),250)));
}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin);
},_wrapCoords:function(t){var i=new x(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);
return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();
return new P(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]));
},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;
return!0}}),dn=_n.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",
errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,
crossOrigin:!1},initialize:function(t,i){this._url=t,(i=l(this,i)).detectRetina&&Ki&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),
i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),
i.minZoom=Math.max(0,i.minZoom)),"string"==typeof i.subdomains&&(i.subdomains=i.subdomains.split("")),
Ti||this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){
return this._url=t,i||this.redraw(),this},createTile:function(t,i){
var n=document.createElement("img");return V(n,"load",e(this._tileOnLoad,this,i,n)),
V(n,"error",e(this._tileOnError,this,i,n)),this.options.crossOrigin&&(n.crossOrigin=""),
n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),
n},getTileUrl:function(t){var e={r:Ki?"@2x":"",s:this._getSubdomain(t),
x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){
var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),
e["-y"]=n}return _(this._url,i(e,this.options))},_tileOnLoad:function(t,i){
Li?setTimeout(e(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,e){
var n=this.options.errorTileUrl;n&&i.getAttribute("src")!==n&&(i.src=n),
t(e,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){
var t=this._tileZoom,i=this.options.maxZoom,e=this.options.zoomReverse,n=this.options.zoomOffset;
return e&&(t=i-t),t+n},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;
return this.options.subdomains[i]},_abortLoading:function(){var t,i;
for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((i=this._tiles[t].el).onload=r,
i.onerror=r,i.complete||(i.src=ni,ut(i),delete this._tiles[t]));
}}),pn=dn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",
layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"
},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;
var n=i({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);
var s=(e=l(this,e)).detectRetina&&Ki?2:1,r=this.getTileSize();
n.width=r.x*s,n.height=r.y*s,this.wmsParams=n},onAdd:function(t){
this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);
var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,
dn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),e=this._crs,n=b(e.project(i[0]),e.project(i[1])),o=n.min,s=n.max,r=(this._wmsVersion>=1.3&&this._crs===He?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(","),a=L.TileLayer.prototype.getTileUrl.call(this,t);
return a+c(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r;
},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),
this}});dn.WMS=pn,Yt.wms=function(t,i){return new pn(t,i)};var mn=Ue.extend({
options:{padding:.1,tolerance:0},initialize:function(t){l(this,t),
n(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),
this._zoomAnimated&&pt(this._container,"leaflet-zoom-animated")),
this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this);
},onRemove:function(){this.off("update",this._updatePaths,this),
this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,
zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd
};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},
_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom);
},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom());
},_updateTransform:function(t,i){var e=this._map.getZoomScale(i,this._zoom),n=Pt(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,i),r=this._map.project(t,i).subtract(s),a=o.multiplyBy(-e).add(n).add(o).subtract(r);
Ni?wt(this._container,a,e):Lt(this._container,a)},_reset:function(){
this._update(),this._updateTransform(this._center,this._zoom);
for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){
for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){
for(var t in this._layers)this._layers[t]._update()},_update:function(){
var t=this.options.padding,i=this._map.getSize(),e=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();
this._bounds=new P(e,e.add(i.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),
this._zoom=this._map.getZoom()}}),fn=mn.extend({getEvents:function(){
var t=mn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,
t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){
mn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){
var t=this._container=document.createElement("canvas");V(t,"mousemove",o(this._onMouseMove,32,this),this),
V(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),
V(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d");
},_destroyContainer:function(){delete this._ctx,ut(this._container),
q(this._container),delete this._container},_updatePaths:function(){
if(!this._postponeUpdatePaths){this._redrawBounds=null;for(var t in this._layers)this._layers[t]._update();
this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){
this._drawnLayers={},mn.prototype._update.call(this);var t=this._bounds,i=this._container,e=t.getSize(),n=Ki?2:1;
Lt(i,t.min),i.width=n*e.x,i.height=n*e.y,i.style.width=e.x+"px",
i.style.height=e.y+"px",Ki&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),
this.fire("update")}},_reset:function(){mn.prototype._reset.call(this),
this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths());
},_initPath:function(t){this._updateDashArray(t),this._layers[n(t)]=t;
var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),
this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast;
},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){
var i=t._order,e=i.next,n=i.prev;e?e.prev=n:this._drawLast=n,
n?n.next=e:this._drawFirst=e,delete t._order,delete this._layers[L.stamp(t)],
this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),
t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){
this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){
if(t.options.dashArray){var i,e=t.options.dashArray.split(","),n=[];
for(i=0;i<e.length;i++)n.push(Number(e[i]));t.options._dashArray=n;
}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),
this._redrawRequest=this._redrawRequest||f(this._redraw,this));
},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;
this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),
this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){
this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),
this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null;
},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();
this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height);
},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),
i){var e=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,e.x,e.y),
this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,
(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();
this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){
if(this._drawing){var e,n,o,s,r=t._parts,a=r.length,h=this._ctx;
if(a){for(this._drawnLayers[t._leaflet_id]=t,h.beginPath(),e=0;e<a;e++){
for(n=0,o=r[e].length;n<o;n++)s=r[e][n],h[n?"lineTo":"moveTo"](s.x,s.y);
i&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){
if(this._drawing&&!t._empty()){var i=t._point,e=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;
this._drawnLayers[t._leaflet_id]=t,1!==o&&(e.save(),e.scale(1,o)),
e.beginPath(),e.arc(i.x,i.y/o,n,0,2*Math.PI,!1),1!==o&&e.restore(),
this._fillStroke(e,t)}},_fillStroke:function(t,i){var e=i.options;
e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor||e.color,
t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),
t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,
t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())},_onClick:function(t){
for(var i,e,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(n)&&!this._map._draggableMoved(i)&&(e=i);
e&&(et(t),this._fireEvent([e],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){
var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i);
}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(mt(this._container,"leaflet-interactive"),
this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,i){
for(var e,n,o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&(n=e);
n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(pt(this._container,"leaflet-interactive"),
this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t);
},_fireEvent:function(t,i,e){this._map._fireDOMEvent(i,e||i.type,t);
},_bringToFront:function(t){var i=t._order,e=i.next,n=i.prev;e&&(e.prev=n,
n?n.next=e:e&&(this._drawFirst=e),i.prev=this._drawLast,this._drawLast.next=i,
i.next=null,this._drawLast=i,this._requestRedraw(t))},_bringToBack:function(t){
var i=t._order,e=i.next,n=i.prev;n&&(n.next=e,e?e.prev=n:n&&(this._drawLast=n),
i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,
this._requestRedraw(t))}}),gn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),
function(t){return document.createElement("<lvml:"+t+' class="lvml">');
}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');
}}}(),vn={_initContainer:function(){this._container=ht("div","leaflet-vml-container");
},_update:function(){this._map._animatingZoom||(mn.prototype._update.call(this),
this.fire("update"))},_initPath:function(t){var i=t._container=gn("shape");
pt(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",
t._path=gn("path"),i.appendChild(t._path),this._updateStyle(t),
this._layers[n(t)]=t},_addPath:function(t){var i=t._container;
this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i);
},_removePath:function(t){var i=t._container;ut(i),t.removeInteractiveTarget(i),
delete this._layers[n(t)]},_updateStyle:function(t){var i=t._stroke,e=t._fill,n=t.options,o=t._container;
o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(i||(i=t._stroke=gn("stroke")),
o.appendChild(i),i.weight=n.weight+"px",i.color=n.color,i.opacity=n.opacity,
n.dashArray?i.dashStyle=ei(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):i.dashStyle="",
i.endcap=n.lineCap.replace("butt","flat"),i.joinstyle=n.lineJoin):i&&(o.removeChild(i),
t._stroke=null),n.fill?(e||(e=t._fill=gn("fill")),o.appendChild(e),
e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(o.removeChild(e),
t._fill=null)},_updateCircle:function(t){var i=t._point.round(),e=Math.round(t._radius),n=Math.round(t._radiusY||e);
this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+e+","+n+" 0,23592600");
},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){
ct(t._container)},_bringToBack:function(t){_t(t._container)}},yn=Ji?gn:E,xn=mn.extend({
getEvents:function(){var t=mn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,
t},_initContainer:function(){this._container=yn("svg"),this._container.setAttribute("pointer-events","none"),
this._rootGroup=yn("g"),this._container.appendChild(this._rootGroup);
},_destroyContainer:function(){ut(this._container),q(this._container),
delete this._container,delete this._rootGroup,delete this._svgSize;
},_onZoomStart:function(){this._update()},_update:function(){
if(!this._map._animatingZoom||!this._bounds){mn.prototype._update.call(this);
var t=this._bounds,i=t.getSize(),e=this._container;this._svgSize&&this._svgSize.equals(i)||(this._svgSize=i,
e.setAttribute("width",i.x),e.setAttribute("height",i.y)),Lt(e,t.min),
e.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),
this.fire("update")}},_initPath:function(t){var i=t._path=yn("path");
t.options.className&&pt(i,t.options.className),t.options.interactive&&pt(i,"leaflet-interactive"),
this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){
this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),
t.addInteractiveTarget(t._path)},_removePath:function(t){ut(t._path),
t.removeInteractiveTarget(t._path),delete this._layers[n(t)]},
_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){
var i=t._path,e=t.options;i&&(e.stroke?(i.setAttribute("stroke",e.color),
i.setAttribute("stroke-opacity",e.opacity),i.setAttribute("stroke-width",e.weight),
i.setAttribute("stroke-linecap",e.lineCap),i.setAttribute("stroke-linejoin",e.lineJoin),
e.dashArray?i.setAttribute("stroke-dasharray",e.dashArray):i.removeAttribute("stroke-dasharray"),
e.dashOffset?i.setAttribute("stroke-dashoffset",e.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),
e.fill?(i.setAttribute("fill",e.fillColor||e.color),i.setAttribute("fill-opacity",e.fillOpacity),
i.setAttribute("fill-rule",e.fillRule||"evenodd")):i.setAttribute("fill","none"));
},_updatePoly:function(t,i){this._setPath(t,k(t._parts,i))},_updateCircle:function(t){
var i=t._point,e=Math.max(Math.round(t._radius),1),n="a"+e+","+(Math.max(Math.round(t._radiusY),1)||e)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(i.x-e)+","+i.y+n+2*e+",0 "+n+2*-e+",0 ";
this._setPath(t,o)},_setPath:function(t,i){t._path.setAttribute("d",i);
},_bringToFront:function(t){ct(t._path)},_bringToBack:function(t){
_t(t._path)}});Ji&&xn.include(vn),Le.include({getRenderer:function(t){
var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;
return i||(i=this._renderer=this.options.preferCanvas&&Xt()||Jt()),
this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){
if("overlayPane"===t||void 0===t)return!1;var i=this._paneRenderers[t];
return void 0===i&&(i=xn&&Jt({pane:t})||fn&&Xt({pane:t}),this._paneRenderers[t]=i),
i}});var wn=en.extend({initialize:function(t,i){en.prototype.initialize.call(this,this._boundsToLatLngs(t),i);
},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t));
},_boundsToLatLngs:function(t){return t=z(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()];
}});xn.create=yn,xn.pointsToPath=k,nn.geometryToLayer=Wt,nn.coordsToLatLng=Ht,
nn.coordsToLatLngs=Ft,nn.latLngToCoords=Ut,nn.latLngsToCoords=Vt,
nn.getFeature=qt,nn.asFeature=Gt,Le.mergeOptions({boxZoom:!0});
var Ln=Ze.extend({initialize:function(t){this._map=t,this._container=t._container,
this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this);
},addHooks:function(){V(this._container,"mousedown",this._onMouseDown,this);
},removeHooks:function(){q(this._container,"mousedown",this._onMouseDown,this);
},moved:function(){return this._moved},_destroy:function(){ut(this._pane),
delete this._pane},_resetState:function(){this._resetStateTimeout=0,
this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),
this._resetStateTimeout=0)},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._clearDeferredResetState(),
this._resetState(),mi(),bt(),this._startPoint=this._map.mouseEventToContainerPoint(t),
V(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,
keydown:this._onKeyDown},this),void 0)},_onMouseMove:function(t){
this._moved||(this._moved=!0,this._box=ht("div","leaflet-zoom-box",this._container),
pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),
this._point=this._map.mouseEventToContainerPoint(t);var i=new P(this._point,this._startPoint),e=i.getSize();
Lt(this._box,i.min),this._box.style.width=e.x+"px",this._box.style.height=e.y+"px";
},_finish:function(){this._moved&&(ut(this._box),mt(this._container,"leaflet-crosshair")),
fi(),Tt(),q(document,{contextmenu:Q,mousemove:this._onMouseMove,
mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){
if((1===t.which||1===t.button)&&(this._finish(),this._moved)){
this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(e(this._resetState,this),0);
var i=new T(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));
this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},
_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Le.addInitHook("addHandler","boxZoom",Ln),
Le.mergeOptions({doubleClickZoom:!0});var Pn=Ze.extend({addHooks:function(){
this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){
this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){
var i=this._map,e=i.getZoom(),n=i.options.zoomDelta,o=t.originalEvent.shiftKey?e-n:e+n;
"center"===i.options.doubleClickZoom?i.setZoom(o):i.setZoomAround(t.containerPoint,o);
}});Le.addInitHook("addHandler","doubleClickZoom",Pn),Le.mergeOptions({
dragging:!0,inertia:!zi,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,
easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bn=Ze.extend({
addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Be(t._mapPane,t._container),
this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,
dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),
t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),
t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this));
}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),
this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),
mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable();
},moved:function(){return this._draggable&&this._draggable._moved;
},moving:function(){return this._draggable&&this._draggable._moving;
},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){
var i=z(this._map.options.maxBounds);this._offsetLimit=b(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),
this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity));
}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),
t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){
if(this._map.options.inertia){var i=this._lastTime=+new Date,e=this._lastPos=this._draggable._absPos||this._draggable._newPos;
this._positions.push(e),this._times.push(i),this._prunePositions(i);
}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){
for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),
this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);
this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x;
},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},
_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){
var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;
t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),
t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),
this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){
var t=this._worldWidth,i=Math.round(t/2),e=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-i+e)%t+i-e,s=(n+i+e)%t-i-e,r=Math.abs(o+e)<Math.abs(s+e)?o:s;
this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r;
},_onDragEnd:function(t){var i=this._map,e=i.options,n=!e.inertia||this._times.length<2;
if(i.fire("dragend",t),n)i.fire("moveend");else{this._prunePositions(+new Date);
var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=e.easeLinearity,a=o.multiplyBy(r/s),h=a.distanceTo([0,0]),u=Math.min(e.inertiaMaxSpeed,h),l=a.multiplyBy(u/h),c=u/(e.inertiaDeceleration*r),_=l.multiplyBy(-c/2).round();
_.x||_.y?(_=i._limitOffset(_,i.options.maxBounds),f(function(){
i.panBy(_,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0
})})):i.fire("moveend")}}});Le.addInitHook("addHandler","dragging",bn),
Le.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Tn=Ze.extend({
keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],
zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,
this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta);
},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),
V(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown
},this),this._map.on({focus:this._addHooks,blur:this._removeHooks
},this)},removeHooks:function(){this._removeHooks(),q(this._map._container,{
focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown
},this),this._map.off({focus:this._addHooks,blur:this._removeHooks
},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,e=t.scrollTop||i.scrollTop,n=t.scrollLeft||i.scrollLeft;
this._map._container.focus(),window.scrollTo(n,e)}},_onFocus:function(){
this._focused=!0,this._map.fire("focus")},_onBlur:function(){
this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){
var i,e,n=this._panKeys={},o=this.keyCodes;for(i=0,e=o.left.length;i<e;i++)n[o.left[i]]=[-1*t,0];
for(i=0,e=o.right.length;i<e;i++)n[o.right[i]]=[t,0];for(i=0,
e=o.down.length;i<e;i++)n[o.down[i]]=[0,t];for(i=0,e=o.up.length;i<e;i++)n[o.up[i]]=[0,-1*t];
},_setZoomDelta:function(t){var i,e,n=this._zoomKeys={},o=this.keyCodes;
for(i=0,e=o.zoomIn.length;i<e;i++)n[o.zoomIn[i]]=t;for(i=0,e=o.zoomOut.length;i<e;i++)n[o.zoomOut[i]]=-t;
},_addHooks:function(){V(document,"keydown",this._onKeyDown,this);
},_removeHooks:function(){q(document,"keydown",this._onKeyDown,this);
},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){
var i,e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;
i=this._panKeys[e],t.shiftKey&&(i=w(i).multiplyBy(3)),n.panBy(i),
n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else{
if(27!==e||!n._popup||!n._popup.options.closeOnEscapeKey)return;
n.closePopup()}Q(t)}}});Le.addInitHook("addHandler","keyboard",Tn),
Le.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60
});var zn=Ze.extend({addHooks:function(){V(this._map._container,"mousewheel",this._onWheelScroll,this),
this._delta=0},removeHooks:function(){q(this._map._container,"mousewheel",this._onWheelScroll,this);
},_onWheelScroll:function(t){var i=it(t),n=this._map.options.wheelDebounceTime;
this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),
this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);
clearTimeout(this._timer),this._timer=setTimeout(e(this._performZoom,this),o),
Q(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),e=this._map.options.zoomSnap||0;
t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=e?Math.ceil(o/e)*e:o,r=t._limitZoom(i+(this._delta>0?s:-s))-i;
this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(i+r):t.setZoomAround(this._lastMousePos,i+r));
}});Le.addInitHook("addHandler","scrollWheelZoom",zn),Le.mergeOptions({
tap:!0,tapTolerance:15});var Mn=Ze.extend({addHooks:function(){
V(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){
q(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){
if(t.touches){if($(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,
void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;
this._startPos=this._newPos=new x(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&pt(n,"leaflet-active"),
this._holdTimeout=setTimeout(e(function(){this._isTapValid()&&(this._fireClick=!1,
this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),
this._simulateEvent("mousedown",i),V(document,{touchmove:this._onMove,
touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),
q(document,{touchmove:this._onMove,touchend:this._onUp},this),
this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],e=i.target;
e&&e.tagName&&"a"===e.tagName.toLowerCase()&&mt(e,"leaflet-active"),
this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i);
}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance;
},_onMove:function(t){var i=t.touches[0];this._newPos=new x(i.clientX,i.clientY),
this._simulateEvent("mousemove",i)},_simulateEvent:function(t,i){
var e=document.createEvent("MouseEvents");e._simulated=!0,i.target._simulatedClick=!0,
e.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),
i.target.dispatchEvent(e)}});Vi&&!Ui&&Le.addInitHook("addHandler","tap",Mn),
Le.mergeOptions({touchZoom:Vi&&!zi,bounceAtZoomLimits:!0});var Cn=Ze.extend({
addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),
V(this._map._container,"touchstart",this._onTouchStart,this)},
removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),
q(this._map._container,"touchstart",this._onTouchStart,this)},
_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){
var e=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]);
this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),
"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(e.add(n)._divideBy(2))),
this._startDist=e.distanceTo(n),this._startZoom=i.getZoom(),this._moved=!1,
this._zooming=!0,i._stop(),V(document,"touchmove",this._onTouchMove,this),
V(document,"touchend",this._onTouchEnd,this),$(t)}},_onTouchMove:function(t){
if(t.touches&&2===t.touches.length&&this._zooming){var i=this._map,n=i.mouseEventToContainerPoint(t.touches[0]),o=i.mouseEventToContainerPoint(t.touches[1]),s=n.distanceTo(o)/this._startDist;
if(this._zoom=i.getScaleZoom(s,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&s<1||this._zoom>i.getMaxZoom()&&s>1)&&(this._zoom=i._limitZoom(this._zoom)),
"center"===i.options.touchZoom){if(this._center=this._startLatLng,
1===s)return}else{var r=n._add(o)._divideBy(2)._subtract(this._centerPoint);
if(1===s&&0===r.x&&0===r.y)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom);
}this._moved||(i._moveStart(!0,!1),this._moved=!0),g(this._animRequest);
var a=e(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});
this._animRequest=f(a,this,!0),$(t)}},_onTouchEnd:function(){
this._moved&&this._zooming?(this._zooming=!1,g(this._animRequest),
q(document,"touchmove",this._onTouchMove),q(document,"touchend",this._onTouchEnd),
this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1;
}});Le.addInitHook("addHandler","touchZoom",Cn),Le.BoxZoom=Ln,
Le.DoubleClickZoom=Pn,Le.Drag=bn,Le.Keyboard=Tn,Le.ScrollWheelZoom=zn,
Le.Tap=Mn,Le.TouchZoom=Cn;var Zn=window.L;window.L=t,Object.freeze=$t,
t.version="1.3.1+HEAD.ba6f97f",t.noConflict=function(){return window.L=Zn,
this},t.Control=Pe,t.control=be,t.Browser=$i,t.Evented=ui,t.Mixin=Ee,
t.Util=ai,t.Class=v,t.Handler=Ze,t.extend=i,t.bind=e,t.stamp=n,
t.setOptions=l,t.DomEvent=de,t.DomUtil=xe,t.PosAnimation=we,t.Draggable=Be,
t.LineUtil=Oe,t.PolyUtil=Re,t.Point=x,t.point=w,t.Bounds=P,t.bounds=b,
t.Transformation=Z,t.transformation=S,t.Projection=je,t.LatLng=M,
t.latLng=C,t.LatLngBounds=T,t.latLngBounds=z,t.CRS=ci,t.GeoJSON=nn,
t.geoJSON=Kt,t.geoJson=sn,t.Layer=Ue,t.LayerGroup=Ve,t.layerGroup=function(t,i){
return new Ve(t,i)},t.FeatureGroup=qe,t.featureGroup=function(t){
return new qe(t)},t.ImageOverlay=rn,t.imageOverlay=function(t,i,e){
return new rn(t,i,e)},t.VideoOverlay=an,t.videoOverlay=function(t,i,e){
return new an(t,i,e)},t.DivOverlay=hn,t.Popup=un,t.popup=function(t,i){
return new un(t,i)},t.Tooltip=ln,t.tooltip=function(t,i){return new ln(t,i);
},t.Icon=Ge,t.icon=function(t){return new Ge(t)},t.DivIcon=cn,
t.divIcon=function(t){return new cn(t)},t.Marker=Xe,t.marker=function(t,i){
return new Xe(t,i)},t.TileLayer=dn,t.tileLayer=Yt,t.GridLayer=_n,
t.gridLayer=function(t){return new _n(t)},t.SVG=xn,t.svg=Jt,t.Renderer=mn,
t.Canvas=fn,t.canvas=Xt,t.Path=Je,t.CircleMarker=$e,t.circleMarker=function(t,i){
return new $e(t,i)},t.Circle=Qe,t.circle=function(t,i,e){return new Qe(t,i,e);
},t.Polyline=tn,t.polyline=function(t,i){return new tn(t,i)},
t.Polygon=en,t.polygon=function(t,i){return new en(t,i)},t.Rectangle=wn,
t.rectangle=function(t,i){return new wn(t,i)},t.Map=Le,t.map=function(t,i){
return new Le(t,i)}})},function(module,exports){!function(){"use strict";
function t(i){return this instanceof t?(this._canvas=i="string"==typeof i?document.getElementById(i):i,
this._ctx=i.getContext("2d"),this._width=i.width,this._height=i.height,
this._max=1,void this.clear()):new t(i)}t.prototype={defaultRadius:25,
defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"
},data:function(t,i){return this._data=t,this},max:function(t){
return this._max=t,this},add:function(t){return this._data.push(t),
this},clear:function(){return this._data=[],this},radius:function(t,i){
i=i||15;var a=this._circle=document.createElement("canvas"),s=a.getContext("2d"),e=this._r=t+i;
return a.width=a.height=2*e,s.shadowOffsetX=s.shadowOffsetY=200,
s.shadowBlur=i,s.shadowColor="black",s.beginPath(),s.arc(e-200,e-200,t,0,2*Math.PI,!0),
s.closePath(),s.fill(),this},gradient:function(t){var i=document.createElement("canvas"),a=i.getContext("2d"),s=a.createLinearGradient(0,0,0,256);
i.width=1,i.height=256;for(var e in t)s.addColorStop(e,t[e]);return a.fillStyle=s,
a.fillRect(0,0,1,256),this._grad=a.getImageData(0,0,1,256).data,
this},draw:function(t){this._circle||this.radius(this.defaultRadius),
this._grad||this.gradient(this.defaultGradient);var i=this._ctx;
i.clearRect(0,0,this._width,this._height);for(var a,s=0,e=this._data.length;e>s;s++)a=this._data[s],
i.globalAlpha=Math.max(a[2]/this._max,t||.05),i.drawImage(this._circle,a[0]-this._r,a[1]-this._r);
var n=i.getImageData(0,0,this._width,this._height);return this._colorize(n.data,this._grad),
i.putImageData(n,0,0),this},_colorize:function(t,i){for(var a,s=3,e=t.length;e>s;s+=4)a=4*t[s],
a&&(t[s-3]=i[a],t[s-2]=i[a+1],t[s-1]=i[a+2])}},window.simpleheat=t;
}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,i){
this._latlngs=t,L.setOptions(this,i)},setLatLngs:function(t){
return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),
this.redraw()},setOptions:function(t){return L.setOptions(this,t),
this._heat&&this._updateOptions(),this.redraw()},redraw:function(){
return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),
this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),
t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),
t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),
this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),
t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this);
},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){
var t=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),i=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);
t.style[i]="50% 50%";var a=this._map.getSize();t.width=a.x,t.height=a.y;
var s=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(s?"animated":"hide")),
this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){
this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),
this.options.gradient&&this._heat.gradient(this.options.gradient),
this.options.max&&this._heat.max(this.options.max)},_reset:function(){
var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);
var i=this._map.getSize();this._heat._width!==i.x&&(this._canvas.width=this._heat._width=i.x),
this._heat._height!==i.y&&(this._canvas.height=this._heat._height=i.y),
this._redraw()},_redraw:function(){var t,i,a,s,e,n,h,o,r,d=[],_=this._heat._r,l=this._map.getSize(),m=new L.Bounds(L.point([-_,-_]),l.add([_,_])),c=void 0===this.options.max?1:this.options.max,u=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,f=1/Math.pow(2,Math.max(0,Math.min(u-this._map.getZoom(),12))),g=_/2,p=[],v=this._map._getMapPanePos(),w=v.x%g,y=v.y%g;
for(t=0,i=this._latlngs.length;i>t;t++)if(a=this._map.latLngToContainerPoint(this._latlngs[t]),
m.contains(a)){e=Math.floor((a.x-w)/g)+2,n=Math.floor((a.y-y)/g)+2;
var x=void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1;
r=x*f,p[n]=p[n]||[],s=p[n][e],s?(s[0]=(s[0]*s[2]+a.x*r)/(s[2]+r),
s[1]=(s[1]*s[2]+a.y*r)/(s[2]+r),s[2]+=r):p[n][e]=[a.x,a.y,r]}
for(t=0,i=p.length;i>t;t++)if(p[t])for(h=0,o=p[t].length;o>h;h++)s=p[t][h],
s&&d.push([Math.round(s[0]),Math.round(s[1]),Math.min(s[2],c)]);
this._heat.data(d).draw(this.options.minOpacity),this._frame=null;
},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._getCenterOffset(t.center)._multiplyBy(-i).subtract(this._map._getMapPanePos());
L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,a,i):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(a)+" scale("+i+")";
}}),L.heatLayer=function(t,i){return new L.HeatLayer(t,i)}},function(module,exports,__webpack_require__){
!function(global,factory){factory(exports,__webpack_require__(33));
}(this,function(exports,d3Array){"use strict";function ringContains(ring,point){
for(var x=point[0],y=point[1],contains=-1,i=0,n=ring.length,j=n-1;i<n;j=i++){
var pi=ring[i],xi=pi[0],yi=pi[1],pj=ring[j],xj=pj[0],yj=pj[1];
if(segmentContains(pi,pj,point))return 0;yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(contains=-contains);
}return contains}function segmentContains(a,b,c){var i;return collinear(a,b,c)&&within(a[i=+(a[0]===b[0])],c[i],b[i]);
}function collinear(a,b,c){return(b[0]-a[0])*(c[1]-a[1])===(c[0]-a[0])*(b[1]-a[1]);
}function within(p,q,r){return p<=q&&q<=r||r<=q&&q<=p}function blurX(source,target,r){
for(var n=source.width,m=source.height,w=(r<<1)+1,j=0;j<m;++j)for(var i=0,sr=0;i<n+r;++i)i<n&&(sr+=source.data[i+j*n]),
i>=r&&(i>=w&&(sr-=source.data[i-w+j*n]),target.data[i-r+j*n]=sr/Math.min(i+1,n-1+w-i,w));
}function blurY(source,target,r){for(var n=source.width,m=source.height,w=(r<<1)+1,i=0;i<n;++i)for(var j=0,sr=0;j<m+r;++j)j<m&&(sr+=source.data[i+j*n]),
j>=r&&(j>=w&&(sr-=source.data[i+(j-w)*n]),target.data[i+(j-r)*n]=sr/Math.min(j+1,m-1+w-j,w));
}function defaultX(d){return d[0]}function defaultY(d){return d[1];
}var array=Array.prototype,slice=array.slice,ascending=function(a,b){
return a-b},area=function(ring){for(var i=0,n=ring.length,area=ring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];++i<n;)area+=ring[i-1][1]*ring[i][0]-ring[i-1][0]*ring[i][1];
return area},constant=function(x){return function(){return x};
},contains=function(ring,hole){for(var c,i=-1,n=hole.length;++i<n;)if(c=ringContains(ring,hole[i]))return c;
return 0},noop=function(){},cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],contours=function(){
function contours(values){var tz=threshold(values);if(Array.isArray(tz))tz=tz.slice().sort(ascending);else{
var domain=d3Array.extent(values),start=domain[0],stop=domain[1];
tz=d3Array.tickStep(start,stop,tz),tz=d3Array.range(Math.floor(start/tz)*tz,Math.floor(stop/tz)*tz,tz);
}return tz.map(function(value){return contour(values,value)});
}function contour(values,value){var polygons=[],holes=[];return isorings(values,value,function(ring){
smooth(ring,values,value),area(ring)>0?polygons.push([ring]):holes.push(ring);
}),holes.forEach(function(hole){for(var polygon,i=0,n=polygons.length;i<n;++i)if(contains((polygon=polygons[i])[0],hole)!==-1)return void polygon.push(hole);
}),{type:"MultiPolygon",value:value,coordinates:polygons}}function isorings(values,value,callback){
function stitch(line){var f,g,start=[line[0][0]+x,line[0][1]+y],end=[line[1][0]+x,line[1][1]+y],startIndex=index(start),endIndex=index(end);
(f=fragmentByEnd[startIndex])?(g=fragmentByStart[endIndex])?(delete fragmentByEnd[f.end],
delete fragmentByStart[g.start],f===g?(f.ring.push(end),callback(f.ring)):fragmentByStart[f.start]=fragmentByEnd[g.end]={
start:f.start,end:g.end,ring:f.ring.concat(g.ring)}):(delete fragmentByEnd[f.end],
f.ring.push(end),fragmentByEnd[f.end=endIndex]=f):(f=fragmentByStart[endIndex])?(g=fragmentByEnd[startIndex])?(delete fragmentByStart[f.start],
delete fragmentByEnd[g.end],f===g?(f.ring.push(end),callback(f.ring)):fragmentByStart[g.start]=fragmentByEnd[f.end]={
start:g.start,end:f.end,ring:g.ring.concat(f.ring)}):(delete fragmentByStart[f.start],
f.ring.unshift(start),fragmentByStart[f.start=startIndex]=f):fragmentByStart[startIndex]=fragmentByEnd[endIndex]={
start:startIndex,end:endIndex,ring:[start,end]}}var x,y,t0,t1,t2,t3,fragmentByStart=new Array,fragmentByEnd=new Array;
for(x=y=-1,t1=values[0]>=value,cases[t1<<1].forEach(stitch);++x<dx-1;)t0=t1,
t1=values[x+1]>=value,cases[t0|t1<<1].forEach(stitch);for(cases[t1<<0].forEach(stitch);++y<dy-1;){
for(x=-1,t1=values[y*dx+dx]>=value,t2=values[y*dx]>=value,cases[t1<<1|t2<<2].forEach(stitch);++x<dx-1;)t0=t1,
t1=values[y*dx+dx+x+1]>=value,t3=t2,t2=values[y*dx+x+1]>=value,
cases[t0|t1<<1|t2<<2|t3<<3].forEach(stitch);cases[t1|t2<<3].forEach(stitch);
}for(x=-1,t2=values[y*dx]>=value,cases[t2<<2].forEach(stitch);++x<dx-1;)t3=t2,
t2=values[y*dx+x+1]>=value,cases[t2<<2|t3<<3].forEach(stitch);
cases[t2<<3].forEach(stitch)}function index(point){return 2*point[0]+point[1]*(dx+1)*4;
}function smoothLinear(ring,values,value){ring.forEach(function(point){
var v0,x=point[0],y=point[1],xt=0|x,yt=0|y,v1=values[yt*dx+xt];
x>0&&x<dx&&xt===x&&(v0=values[yt*dx+xt-1],point[0]=x+(value-v0)/(v1-v0)-.5),
y>0&&y<dy&&yt===y&&(v0=values[(yt-1)*dx+xt],point[1]=y+(value-v0)/(v1-v0)-.5);
})}var dx=1,dy=1,threshold=d3Array.thresholdSturges,smooth=smoothLinear;
return contours.contour=contour,contours.size=function(_){if(!arguments.length)return[dx,dy];
var _0=Math.ceil(_[0]),_1=Math.ceil(_[1]);if(!(_0>0&&_1>0))throw new Error("invalid size");
return dx=_0,dy=_1,contours},contours.thresholds=function(_){
return arguments.length?(threshold="function"==typeof _?_:constant(Array.isArray(_)?slice.call(_):_),
contours):threshold},contours.smooth=function(_){return arguments.length?(smooth=_?smoothLinear:noop,
contours):smooth===smoothLinear},contours},density=function(){
function density(data){var values0=new Float32Array(n*m),values1=new Float32Array(n*m);
data.forEach(function(d,i,data){var xi=x(d,i,data)+o>>k,yi=y(d,i,data)+o>>k;
xi>=0&&xi<n&&yi>=0&&yi<m&&++values0[xi+yi*n]}),blurX({width:n,
height:m,data:values0},{width:n,height:m,data:values1},r>>k),
blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0
},r>>k),blurX({width:n,height:m,data:values0},{width:n,height:m,
data:values1},r>>k),blurY({width:n,height:m,data:values1},{width:n,
height:m,data:values0},r>>k),blurX({width:n,height:m,data:values0
},{width:n,height:m,data:values1},r>>k),blurY({width:n,height:m,
data:values1},{width:n,height:m,data:values0},r>>k);var tz=threshold(values0);
if(!Array.isArray(tz)){var stop=d3Array.max(values0);tz=d3Array.tickStep(0,stop,tz),
tz=d3Array.range(0,Math.floor(stop/tz)*tz,tz),tz.shift()}return contours().thresholds(tz).size([n,m])(values0).map(transform);
}function transform(geometry){return geometry.value*=Math.pow(2,-2*k),
geometry.coordinates.forEach(transformPolygon),geometry}function transformPolygon(coordinates){
coordinates.forEach(transformRing)}function transformRing(coordinates){
coordinates.forEach(transformPoint)}function transformPoint(coordinates){
coordinates[0]=coordinates[0]*Math.pow(2,k)-o,coordinates[1]=coordinates[1]*Math.pow(2,k)-o;
}function resize(){return o=3*r,n=dx+2*o>>k,m=dy+2*o>>k,density;
}var x=defaultX,y=defaultY,dx=960,dy=500,r=20,k=2,o=3*r,n=dx+2*o>>k,m=dy+2*o>>k,threshold=constant(20);
return density.x=function(_){return arguments.length?(x="function"==typeof _?_:constant(+_),
density):x},density.y=function(_){return arguments.length?(y="function"==typeof _?_:constant(+_),
density):y},density.size=function(_){if(!arguments.length)return[dx,dy];
var _0=Math.ceil(_[0]),_1=Math.ceil(_[1]);if(!(_0>=0||_0>=0))throw new Error("invalid size");
return dx=_0,dy=_1,resize()},density.cellSize=function(_){if(!arguments.length)return 1<<k;
if(!((_=+_)>=1))throw new Error("invalid cell size");return k=Math.floor(Math.log(_)/Math.LN2),
resize()},density.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:constant(Array.isArray(_)?slice.call(_):_),
density):threshold},density.bandwidth=function(_){if(!arguments.length)return Math.sqrt(r*(r+1));
if(!((_=+_)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*_*_+1)-1)/2),
resize()},density};exports.contours=contours,exports.contourDensity=density,
Object.defineProperty(exports,"__esModule",{value:!0})})},function(module,exports,__webpack_require__){
!function(global,factory){factory(exports)}(this,function(exports){
"use strict";function ascendingComparator(f){return function(d,x){
return ascending(f(d),x)}}function pair(a,b){return[a,b]}function tickIncrement(start,stop,count){
var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);
return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1);
}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;
return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),
stop<start?-step1:step1}function length(d){return d.length}var ascending=function(a,b){
return a<b?-1:a>b?1:a>=b?0:NaN},bisector=function(compare){return 1===compare.length&&(compare=ascendingComparator(compare)),
{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){
var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo;
},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){
var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo;
}}},ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left,pairs=function(array,f){
null==f&&(f=pair);for(var i=0,n=array.length-1,p=array[0],pairs=new Array(n<0?0:n);i<n;)pairs[i]=f(p,p=array[++i]);
return pairs},cross=function(values0,values1,reduce){var i0,i1,i,value0,n0=values0.length,n1=values1.length,values=new Array(n0*n1);
for(null==reduce&&(reduce=pair),i0=i=0;i0<n0;++i0)for(value0=values0[i0],
i1=0;i1<n1;++i1,++i)values[i]=reduce(value0,values1[i1]);return values;
},descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},number=function(x){
return null===x?NaN:+x},variance=function(values,valueof){var value,delta,n=values.length,m=0,i=-1,mean=0,sum=0;
if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))||(delta=value-mean,
mean+=delta/++m,sum+=delta*(value-mean));else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))||(delta=value-mean,
mean+=delta/++m,sum+=delta*(value-mean));if(m>1)return sum/(m-1);
},deviation=function(array,f){var v=variance(array,f);return v?Math.sqrt(v):v;
},extent=function(values,valueof){var value,min,max,n=values.length,i=-1;
if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=max=value;++i<n;)null!=(value=values[i])&&(min>value&&(min=value),
max<value&&(max=value))}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&(min>value&&(min=value),
max<value&&(max=value));return[min,max]},array=Array.prototype,slice=array.slice,map=array.map,constant=function(x){
return function(){return x}},identity=function(x){return x},range=function(start,stop,step){
start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,
start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;
return range},e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),ticks=function(start,stop,count){
var reverse,n,ticks,step,i=-1;if(stop=+stop,start=+start,count=+count,
start===stop&&count>0)return[start];if((reverse=stop<start)&&(n=start,
start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];
if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),
ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),
stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;
return reverse&&ticks.reverse(),ticks},sturges=function(values){
return Math.ceil(Math.log(values.length)/Math.LN2)+1},histogram=function(){
function histogram(data){var i,x,n=data.length,values=new Array(n);
for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);
Array.isArray(tz)||(tz=tickStep(x0,x1,tz),tz=range(Math.ceil(x0/tz)*tz,Math.floor(x1/tz)*tz,tz));
for(var m=tz.length;tz[0]<=x0;)tz.shift(),--m;for(;tz[m-1]>x1;)tz.pop(),
--m;var bin,bins=new Array(m+1);for(i=0;i<=m;++i)bin=bins[i]=[],
bin.x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;for(i=0;i<n;++i)x=values[i],
x0<=x&&x<=x1&&bins[bisectRight(tz,x,0,m)].push(data[i]);return bins;
}var value=identity,domain=extent,threshold=sturges;return histogram.value=function(_){
return arguments.length?(value="function"==typeof _?_:constant(_),
histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant([_[0],_[1]]),
histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:constant(Array.isArray(_)?slice.call(_):_),
histogram):threshold},histogram},quantile=function(values,p,valueof){
if(null==valueof&&(valueof=number),n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);
if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values),value1=+valueof(values[i0+1],i0+1,values);
return value0+(value1-value0)*(i-i0)}},freedmanDiaconis=function(values,min,max){
return values=map.call(values,number).sort(ascending),Math.ceil((max-min)/(2*(quantile(values,.75)-quantile(values,.25))*Math.pow(values.length,-1/3)));
},scott=function(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(values.length,-1/3)));
},max=function(values,valueof){var value,max,n=values.length,i=-1;
if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(max=value;++i<n;)null!=(value=values[i])&&value>max&&(max=value);
}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&value>max&&(max=value);
return max},mean=function(values,valueof){var value,n=values.length,m=n,i=-1,sum=0;
if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))?--m:sum+=value;else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))?--m:sum+=value;
if(m)return sum/m},median=function(values,valueof){var value,n=values.length,i=-1,numbers=[];
if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))||numbers.push(value);else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))||numbers.push(value);
return quantile(numbers.sort(ascending),.5)},merge=function(arrays){
for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;
for(merged=new Array(j);--n>=0;)for(array=arrays[n],m=array.length;--m>=0;)merged[--j]=array[m];
return merged},min=function(values,valueof){var value,min,n=values.length,i=-1;
if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=value;++i<n;)null!=(value=values[i])&&min>value&&(min=value);
}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=value;++i<n;)null!=(value=valueof(values[i],i,values))&&min>value&&(min=value);
return min},permute=function(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];
return permutes},scan=function(values,compare){if(n=values.length){
var n,xi,i=0,j=0,xj=values[j];for(null==compare&&(compare=ascending);++i<n;)(compare(xi=values[i],xj)<0||0!==compare(xj,xj))&&(xj=xi,
j=i);return 0===compare(xj,xj)?j:void 0}},shuffle=function(array,i0,i1){
for(var t,i,m=(null==i1?array.length:i1)-(i0=null==i0?0:+i0);m;)i=Math.random()*m--|0,
t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array;
},sum=function(values,valueof){var value,n=values.length,i=-1,sum=0;
if(null==valueof)for(;++i<n;)(value=+values[i])&&(sum+=value);else for(;++i<n;)(value=+valueof(values[i],i,values))&&(sum+=value);
return sum},transpose=function(matrix){if(!(n=matrix.length))return[];
for(var i=-1,m=min(matrix,length),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];
return transpose},zip=function(){return transpose(arguments)};
exports.bisect=bisectRight,exports.bisectRight=bisectRight,exports.bisectLeft=bisectLeft,
exports.ascending=ascending,exports.bisector=bisector,exports.cross=cross,
exports.descending=descending,exports.deviation=deviation,exports.extent=extent,
exports.histogram=histogram,exports.thresholdFreedmanDiaconis=freedmanDiaconis,
exports.thresholdScott=scott,exports.thresholdSturges=sturges,
exports.max=max,exports.mean=mean,exports.median=median,exports.merge=merge,
exports.min=min,exports.pairs=pairs,exports.permute=permute,exports.quantile=quantile,
exports.range=range,exports.scan=scan,exports.shuffle=shuffle,
exports.sum=sum,exports.ticks=ticks,exports.tickIncrement=tickIncrement,
exports.tickStep=tickStep,exports.transpose=transpose,exports.variance=variance,
exports.zip=zip,Object.defineProperty(exports,"__esModule",{value:!0
})})},function(module,exports,__webpack_require__){"use strict";
console.log("loading event module.");var exception_1=__webpack_require__(5),GraphChartEvent=function(){
function GraphChartEvent(parent){void 0===parent&&(parent=void 0),
this.chart=parent,this.defaultHandlers={onKeyPress:function(){
console.log("Not Initialized Event handler.")},onChartUpdate:function(){
console.log("Not Initialized Event handler.")},onDataUpdated:function(){
console.log("Not Initialized Event handler.")},onSelectionChange:function(){
console.log("Not Initialized Event handler.")},onClick:function(){
console.log("Not Initialized Event handler.")},onDoubleClick:function(){
console.log("Not Initialized Event handler.")},onHoverChange:function(){
console.log("Not Initialized Event handler.")},onPositionChange:function(){
console.log("Not Initialized Event handler.")},onRightClick:function(){
console.log("Not Initialized Event handler.")},onPointerDown:function(){
console.log("Not Initialized Event handler.")},onPointerUp:function(){
console.log("Not Initialized Event handler.")},onPointerDrag:function(){
console.log("Not Initialized Event handler.")},onExceedLimit:function(){
console.log("Not Initialized Event handler.")}},this.handlers={
onKeyPress:function(){console.warn("Not Implemented.")},onChartUpdate:function(){
console.warn("Not Implemented.")},onDataUpdated:function(){console.warn("Not Implemented.");
},onSelectionChange:function(){console.warn("Not Implemented.");
},onClick:function(){console.warn("Not Implemented.")},onDoubleClick:function(){
console.warn("Not Implemented.")},onHoverChange:function(){console.warn("Not Implemented.");
},onPositionChange:function(){console.warn("Not Implemented.");
},onRightClick:function(){console.warn("Not Implemented.")},onPointerDown:function(){
console.warn("Not Implemented.")},onPointerUp:function(){console.warn("Not Implemented.");
},onPointerDrag:function(){console.warn("Not Implemented.")},
onExceedLimit:function(){console.warn("Not Implemented.")}},this.setDefaultHandlers();
}return GraphChartEvent.prototype.setDefaultHandlers=function(){
this.defaultHandlers.onKeyPress=function(nodes,links,event,chart){
return"default"},this.defaultHandlers.onChartUpdate=function(chart){
return"default"},this.defaultHandlers.onDataUpdated=function(chart){
return"default"},this.defaultHandlers.onSelectionChange=function(nodes,links,chart){
return console.log("onSelectionChange nodes: "+nodes.length+", links: "+links.length+"."),
"default"},this.defaultHandlers.onClick=function(item,event,chart){
return"default"},this.defaultHandlers.onDoubleClick=function(item,event,chart){
return"default"},this.defaultHandlers.onHoverChange=function(item,event,chart){
return"default"},this.defaultHandlers.onPositionChange=function(event,chart){
return"default"},this.defaultHandlers.onRightClick=function(item,event,chart){
return console.log("onRightClick ",item),"default"},this.defaultHandlers.onPointerDown=function(item,event,chart){
return"default"},this.defaultHandlers.onPointerUp=function(item,event,chart){
return"default"},this.defaultHandlers.onPointerDrag=function(item,event,chart){
return"default"},this.defaultHandlers.onExceedLimit=function(nodes,links,chart){
return alert("onExceedLimit nodes: "+nodes.length+", links: "+links.length+". The graph exceeds the maximum limit."+("Node Limit: "+chart.render.maxNodeLimit+"; Link Limit: "+chart.render.maxLinkLimit+" ")),
"default"};for(var event_1 in this.defaultHandlers)Object.prototype.hasOwnProperty.call(this.defaultHandlers,event_1)&&(this.handlers[event_1]=this.defaultHandlers[event_1]);
},GraphChartEvent.prototype.setEventHandler=function(eventName,callback){
try{if(!Object.prototype.hasOwnProperty.call(this.handlers,eventName))throw new exception_1.GException(2003,"Event Name is not existed in GraphChart.");
this.handlers[eventName]=callback}catch(err){console.error(err.toString());
}return this},GraphChartEvent.prototype.defaultEventHandler=function(eventName){
try{if(!Object.prototype.hasOwnProperty.call(this.handlers,eventName))throw new exception_1.GException(2003,"Event Name is not existed.");
this.handlers[eventName]=this.defaultHandlers[eventName]}catch(err){
console.error(err.toString())}return this},GraphChartEvent}();
exports.GraphChartEvent=GraphChartEvent},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5),utils_1=__webpack_require__(8),graphchart_style_1=__webpack_require__(17),d3_module=__webpack_require__(36),d3=d3_module;
console.log("loading layout module.");var GraphChartLayout=function(){
function GraphChartLayout(parent){this.treeLayoutHorizontalScale=1,
this.treeLayoutVerticalScale=1,this.isLockedUpdateAsyncPositionOfNodesLock=!1,
this.layouts={},this.roots=[],this.chart=parent,this.currentNodeRadius=graphchart_style_1.GraphStyle.defaultNodeBaseStyle.radius,
this.currentLayout="force",this.defaultLayouts={default:function(){
console.log("Not Initialized layout name.")},static:function(){
console.log("Not Initialized layout name.")},force:function(){
console.log("Not Initialized layout name.")},random:function(){
console.log("Not Initialized layout name.")},circle:function(){
console.log("Not Initialized layout name.")},sphere:function(){
console.log("Not Initialized layout name.")},tree:function(){
console.log("Not Initialized layout name.")},circularTree:function(){
console.log("Not Initialized layout name.")}},this.setDefaultLayout();
}return GraphChartLayout.prototype.scaleTreeLayout=function(horizontalScale,verticalScale){
this.treeLayoutHorizontalScale=horizontalScale,this.treeLayoutVerticalScale=verticalScale,
this.setDefaultLayout()},GraphChartLayout.prototype.setDefaultLayout=function(){
var _this=this;this.defaultLayouts["default"]=function(graph,chart){
var alpha=Math.sqrt(graph.nodes.length*_this.currentNodeRadius)*_this.currentNodeRadius;
graph.nodes.forEach(function(node){node.x=void 0===node.exX?Math.random()*alpha:node.exX,
node.y=void 0===node.exY?Math.random()*alpha:node.exY})},this.defaultLayouts["static"]=function(graph,chart){
_this.updateSyncPositionOfNodes()},this.defaultLayouts.random=function(graph,chart){
var alpha=Math.sqrt(graph.nodes.length*_this.currentNodeRadius)*_this.currentNodeRadius;
graph.nodes.forEach(function(node){node.x=Math.random()*alpha,
node.y=Math.random()*alpha})},this.defaultLayouts.force=function(graph,chart){
_this.chart.render.engine.core.updateSettings({layout:{mode:"dynamic",
nodeSpacing:_this.currentNodeRadius,gravity:{from:"auto",fromCenter:"weighted",
strength:5e-4,to:"graph",toCenter:"weighted"}}}),_this.updateAsyncPositionOfNodes();
},this.defaultLayouts.circle=function(graph,chart){var root=_this.getRoot();
_this.chart.render.engine.core.addFocusNode(root.id),_this.chart.render.engine.core.updateSettings({
layout:{mode:"radial",nodeSpacing:6*_this.currentNodeRadius}}),
_this.updateAsyncPositionOfNodes()},this.defaultLayouts.sphere=function(graph,chart){
var N=graph.nodes.length,radius=2*N*_this.currentNodeRadius/Math.PI;
graph.nodes.forEach(function(node,i){var position=utils_1.Utils.rotate(0,0,0,radius,i/N*360);
node.x=position[0],node.y=position[1]})},this.defaultLayouts.hierarchy=function(graph,chart){
_this.chart.render.engine.core.updateSettings({layout:{mode:"hierarchy",
nodeSpacing:2*_this.currentNodeRadius,rowSpacing:5*_this.currentNodeRadius
}}),_this.updateAsyncPositionOfNodes()},this.defaultLayouts.tree=function(graph,chart){
for(var root=_this.getRoot(),nodeSpacing=3*_this.currentNodeRadius*_this.treeLayoutHorizontalScale,rowSpacing=7*_this.currentNodeRadius*_this.treeLayoutVerticalScale,trees=[{
node:graphchart_style_1.GraphStyle.virtualRootNode,parentID:""
}],treeObject={root:root,nodes:graph.nodes,graph:_this.chart.data
};0!==treeObject.nodes.length;)trees=utils_1.Utils.concat(trees,_this.createBFSTreeArray(treeObject)),
treeObject.root=treeObject.nodes[0];var tree=d3.stratify().id(function(d){
return d.node.id}).parentId(function(d){return d.parentID})(trees);
d3.tree().size([nodeSpacing*tree.leaves().length,tree.height*rowSpacing]).separation(function(a,b){
return(a.parent===b.parent?1:4)/a.depth})(tree),tree.descendants().forEach(function(node){
node.data.node.x=node.x,node.data.node.y=node.y})},this.defaultLayouts.cluster=function(graph,chart){
for(var root=_this.getRoot(),nodeSpacing=4*_this.currentNodeRadius,rowSpacing=5*_this.currentNodeRadius,trees=[{
node:graphchart_style_1.GraphStyle.virtualRootNode,parentID:""
}],treeObject={root:root,nodes:graph.nodes,graph:_this.chart.data
};0!==treeObject.nodes.length;)trees=utils_1.Utils.concat(trees,_this.createBFSTreeArray(treeObject)),
treeObject.root=treeObject.nodes[0];var tree=d3.stratify().id(function(d){
return d.node.id}).parentId(function(d){return d.parentID})(trees);
d3.cluster().size([nodeSpacing*tree.leaves().length,tree.height*rowSpacing]).separation(function(a,b){
return(a.parent===b.parent?1:4)/a.depth})(tree),tree.descendants().forEach(function(node){
node.data.node.x=node.x,node.data.node.y=node.y})},this.defaultLayouts.circularTree=function(graph,chart){
if(0!==graph.nodes.length){var root=graph.nodes[0],maxOutDegree=graph.links.filter(function(link){
return link.source===root}).length;graph.nodes.forEach(function(node){
var outDegree=graph.links.filter(function(link){return link.source===node||link.target===node;
}).length;outDegree>maxOutDegree&&(maxOutDegree=outDegree,root=node);
});for(var nodeSpacing=3*_this.currentNodeRadius,rowSpacing=5*_this.currentNodeRadius,initTrees=[{
node:graphchart_style_1.GraphStyle.virtualRootNode,parentID:""
}],treeObject={root:root,nodes:graph.nodes,graph:_this.chart.data
},xBias=0,_loop_1=function(){var trees=utils_1.Utils.concat(initTrees,_this.createBFSTreeArray(treeObject)),tree=d3.stratify().id(function(d){
return d.node.id}).parentId(function(d){return d.parentID})(trees);
d3.tree().size([nodeSpacing*tree.leaves().length,tree.height*rowSpacing]).separation(function(a,b){
return(a.parent===b.parent?1:4)/a.depth})(tree);for(var nodes=tree.descendants().sort(function(n1,n2){
return n1.y>n2.y||n1.y===n2.y&&n1.x>n2.x?1:-1}),i=0;i<nodes.length;i++)if(!nodes[i].parent){
nodes.splice(i,1);break}for(var centerX=nodes[0].data.node.x=nodes[0].x,centerY=nodes[0].data.node.y=nodes[0].y,minX=centerX,layer=0,i=1;i<nodes.length;i){
for(var j=i;j+1<nodes.length&&nodes[j+1].y===nodes[i].y;j++);
for(var radians=2*Math.PI/(j-i+1),radius=nodes[i].y-centerY,k=i;k<=j;k++)nodes[k].x=nodes[k].data.node.x=centerX+radius*Math.cos(radians*(k-i)+.2*(layer%2-.5)),
nodes[k].y=nodes[k].data.node.y=centerY+radius*Math.sin(radians*(k-i)+.2*(layer%2-.5)),
minX>nodes[k].x&&(minX=nodes[k].x);i=j+1,layer++}nodes.forEach(function(node){
node.data.node.x=node.x=node.x+xBias-minX+5*_this.currentNodeRadius;
}),xBias=nodes.reduce(function(n1,n2){return n1.x>n2.x?n1:n2}).x,
treeObject.root=treeObject.nodes[0],maxOutDegree=graph.links.filter(function(link){
return link.source===treeObject.root||link.target===treeObject.root;
}).length,treeObject.nodes.forEach(function(node){var outDegree=graph.links.filter(function(link){
return link.source===node}).length;outDegree>maxOutDegree&&(maxOutDegree=outDegree,
treeObject.root=node)})};0!==treeObject.nodes.length;)_loop_1();
}};for(var layout in this.defaultLayouts)Object.prototype.hasOwnProperty.call(this.defaultLayouts,layout)&&(this.layouts[layout]=this.defaultLayouts[layout]);
},GraphChartLayout.prototype.createBFSTreeArray=function(options){
var result=[];result.push({node:options.root,parentID:graphchart_style_1.GraphStyle.virtualRootNode.id
}),options.nodes=options.nodes.filter(function(node){return node!==options.root;
});var unTouchedNodes=this.iterateTree([options.root],result,options.nodes,options.graph);
return options.nodes=unTouchedNodes,result},GraphChartLayout.prototype.iterateTree=function(parents,result,nodes,graph){
if(0===parents.length)return nodes;var nextParents=[];return parents.forEach(function(node){
var children=graph.getNeighbors(node.exType,node.exID).all.filter(function(n1){
return nodes.some(function(n2){return n2===n1})});nodes=nodes.filter(function(n1){
return children.every(function(n2){return n2!==n1})}),children.forEach(function(c){
result.push({node:c,parentID:node.id})}),nextParents=utils_1.Utils.concat(nextParents,children);
}),this.iterateTree(nextParents,result,nodes,graph)},GraphChartLayout.prototype.updateSyncPositionOfNodes=function(){
var _this=this;return this.chart.render.engine.core.nodes().forEach(function(node){
_this.updateSyncPositionOfNodeByInternalID(node.id)}),this},GraphChartLayout.prototype.updateSyncPositionOfNodeByInternalID=function(id){
if(void 0===id)return this;var node=this.chart.render.engine.core.getNode(id)||{},inNode=this.chart.data.inData.getNodeByInternalID(node.id);
return void 0===inNode?this:(inNode.x=node.x,inNode.y=node.y,
this)},GraphChartLayout.prototype.updateSyncPositionOfLinkByInternalID=function(id){
if(void 0===id)return this;var link=this.chart.render.engine.core.getLink(id)||{},inLink=this.chart.data.inData.getLinkByInternalID(link.id);
if(void 0===inLink)return this;var offsetNode=link.from,renderX=offsetNode.x,renderY=offsetNode.y,offsetX=offsetNode.shape.x,offsetY=offsetNode.shape.y,zoom=offsetNode.shape.zoom;
return link.renderPointsX=link.renderPointsX||[],link.renderPointsY=link.renderPointsY||[],
inLink.pointsX=link.renderPointsX.map(function(v){return(v-offsetX)/zoom+renderX;
}),inLink.pointsY=link.renderPointsY.map(function(v){return(v-offsetY)/zoom+renderY;
}),this},GraphChartLayout.prototype.updateAsyncPositionOfNodes=function(delay){
var _this=this;return void 0===delay&&(delay=200),this.isLockedUpdateAsyncPositionOfNodesLock?this:(this.isLockedUpdateAsyncPositionOfNodesLock=!0,
setTimeout(function(){switch(_this.currentLayout){case"force":
_this.chart.render.engine.core.resetLayout();break;default:_this.chart.render.engine.core.updateSettings({
layout:{mode:"static"}}),_this.chart.render.autoFit()}_this.chart.render.engine.core.nodes().forEach(function(node){
var inNode=_this.chart.data.inData.getNodeByInternalID(node.id);
void 0!==inNode&&(inNode.x=node.x,inNode.y=node.y)}),_this.isLockedUpdateAsyncPositionOfNodesLock=!1;
},delay),this)},GraphChartLayout.prototype.clear=function(){return this.roots=[],
this},GraphChartLayout.prototype.resetLayout=function(){return this.chart.render.engine.core.resetLayout(),
this},GraphChartLayout.prototype.runLayout=function(layoutName){
var _this=this;void 0===layoutName&&(layoutName=this.currentLayout);
try{if(void 0===this.layouts[layoutName])throw new exception_1.GException(4002,"Layout Name is not existed");
var graph=this.chart.data.getData(),chart=this.chart;switch(layoutName){
case"force":case"hierarchy":case"circle":this.chart.render.engine.core.resetLayout(),
this.layouts[layoutName](graph,chart);break;default:this.chart.render.engine.core.updateSettings({
layout:{mode:"static"}}),this.layouts[layoutName](graph,chart),
this.chart.render.engine.core.nodes().forEach(function(node){
var inNode=_this.chart.data.inData.getNodeByInternalID(node.id);
void 0!==inNode&&(node.x=inNode.x,node.y=inNode.y)})}}catch(err){
console.warn(err.toString())}return this.setLayout(layoutName),
this},GraphChartLayout.prototype.setLayout=function(layoutName){
try{if(void 0===this.layouts[layoutName])throw new exception_1.GException(4002,"Layout Name is not existed");
this.currentLayout=layoutName}catch(err){console.warn(err.toString());
}return this},GraphChartLayout.prototype.addLayout=function(layoutName,callback){
try{if(void 0!==this.layouts[layoutName])throw new exception_1.GException(4002,layoutName+" layout is already existed.");
this.layouts[layoutName]=callback}catch(err){console.error(err.toString());
}return this},GraphChartLayout.prototype.overwriteLayout=function(layoutName,callback){
try{if(void 0===this.layouts[layoutName])throw new exception_1.GException(4002,layoutName+" layout is not existed.");
this.layouts[layoutName]=callback}catch(err){console.error(err.toString());
}return this},GraphChartLayout.prototype.setRoot=function(exType,exID){
try{var inNode=this.chart.data.getNodes(exType,exID);if(void 0===inNode)throw new exception_1.GException(4001,"Roots node is not existed.");
this.roots=[inNode]}catch(err){console.warn(err.toString()),this.roots=[];
}return this},GraphChartLayout.prototype.getRoot=function(){return this.roots[0]||this.chart.data.getNodes()[0];
},GraphChartLayout.prototype.getRoots=function(){return this.roots;
},GraphChartLayout.prototype.addRoot=function(exType,exID){try{
var inNode=this.chart.data.getNodes(exType,exID);if(void 0===inNode)throw new exception_1.GException(4001,"Roots node is not existed.");
this.roots.push(inNode)}catch(err){console.warn(err.toString());
}return this},GraphChartLayout.prototype.getLayouts=function(){
return Object.keys(this.defaultLayouts)},GraphChartLayout}();exports.GraphChartLayout=GraphChartLayout;
},function(module,exports,__webpack_require__){!function(global,factory){
factory(exports)}(this,function(exports){"use strict";function ascendingComparator(f){
return function(d,x){return ascending(f(d),x)}}function tickStep(start,stop,count){
var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;
return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),
stop<start?-step1:step1}function length(d){return d.length}function Map(){}
function map$1(object,f){var map=new Map;if(object instanceof Map)object.each(function(value,key){
map.set(key,value)});else if(Array.isArray(object)){var o,i=-1,n=object.length;
if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o);
}else if(object)for(var key in object)map.set(key,object[key]);
return map}function createObject(){return{}}function setObject(object,key,value){
object[key]=value}function createMap(){return map$1()}function setMap(map,key,value){
map.set(key,value)}function Set(){}function set(object,f){var set=new Set;
if(object instanceof Set)object.each(function(value){set.add(value);
});else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object));
}return set}function linear(t){return+t}function quadIn(t){return t*t;
}function quadOut(t){return t*(2-t)}function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2;
}function cubicIn(t){return t*t*t}function cubicOut(t){return--t*t*t+1;
}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2;
}function sinIn(t){return 1-Math.cos(t*halfPi)}function sinOut(t){
return Math.sin(t*halfPi)}function sinInOut(t){return(1-Math.cos(pi*t))/2;
}function expIn(t){return Math.pow(2,10*t-10)}function expOut(t){
return 1-Math.pow(2,-10*t)}function expInOut(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2;
}function circleIn(t){return 1-Math.sqrt(1-t*t)}function circleOut(t){
return Math.sqrt(1- --t*t)}function circleInOut(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2;
}function bounceIn(t){return 1-bounceOut(1-t)}function bounceOut(t){
return(t=+t)<b1?b0*t*t:t<b3?b0*(t-=b2)*t+b4:t<b6?b0*(t-=b5)*t+b7:b0*(t-=b8)*t+b9;
}function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2;
}function lexicographicOrder(a,b){return a[0]-b[0]||a[1]-b[1];
}function computeUpperHullIndexes(points){for(var n=points.length,indexes=[0,1],size=2,i=2;i<n;++i){
for(;size>1&&cross(points[indexes[size-2]],points[indexes[size-1]],points[i])<=0;)--size;
indexes[size++]=i}return indexes.slice(0,size)}function Path(){
this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){
return new Path}function add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;
var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={
data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,
tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,
(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,
tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),
x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,
tree;do parent=parent?parent[i]=new Array(4):tree._root=new Array(4),
(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym;while((i=bottom<<1|right)===(j=(yp>=ym)<<1|xp>=xm));
return parent[j]=node,parent[i]=leaf,tree}function addAll(data){
var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-(1/0),y1=-(1/0);
for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,
yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));for(x1<x0&&(x0=this._x0,
x1=this._x1),y1<y0&&(y0=this._y0,y1=this._y1),this.cover(x0,y0).cover(x1,y1),
i=0;i<n;++i)add(this,xz[i],yz[i],data[i]);return this}function removeAll(data){
for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this;
}function defaultX(d){return d[0]}function defaultY(d){return d[1];
}function quadtree(nodes,x,y){var tree=new Quadtree(null==x?defaultX:x,null==y?defaultY:y,NaN,NaN,NaN,NaN);
return null==nodes?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){
this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,
this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data
},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy;
}function Queue(size){if(!(size>=1))throw new Error;this._size=size,
this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0;
}function poke(q){if(!q._start)try{start(q)}catch(e){if(q._tasks[q._ended+q._active-1])abort(q,e);else if(!q._data)throw e;
}}function start(q){for(;q._start=q._waiting&&q._active<q._size;){
var i=q._ended+q._active,t=q._tasks[i],j=t.length-1,c=t[j];t[j]=end(q,i),
--q._waiting,++q._active,t=c.apply(null,t),q._tasks[i]&&(q._tasks[i]=t||noabort);
}}function end(q,i){return function(e,r){q._tasks[i]&&(--q._active,
++q._ended,q._tasks[i]=null,null==q._error&&(null!=e?abort(q,e):(q._data[i]=r,
q._waiting?poke(q):maybeNotify(q))))}}function abort(q,e){var t,i=q._tasks.length;
for(q._error=e,q._data=void 0,q._waiting=NaN;--i>=0;)if((t=q._tasks[i])&&(q._tasks[i]=null,
t.abort))try{t.abort()}catch(e){}q._active=NaN,maybeNotify(q);
}function maybeNotify(q){if(!q._active&&q._call){var d=q._data;
q._data=void 0,q._call(q._error,d)}}function queue(concurrency){
return new Queue(arguments.length?+concurrency:1/0)}function arcInnerRadius(d){
return d.innerRadius}function arcOuterRadius(d){return d.outerRadius;
}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){
return d.endAngle}function arcPadAngle(d){return d&&d.padAngle;
}function asin(x){return x>=1?halfPi$1:x<=-1?-halfPi$1:Math.asin(x);
}function intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=(x32*(y0-y2)-y32*(x0-x2))/(y32*x10-x32*y10);
return[x0+t*x10,y0+t*y10]}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){
var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/Math.sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*Math.sqrt(Math.max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;
return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),{cx:cx0,
cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}function Linear(context){
this._context=context}function x(p){return p[0]}function y(p){
return p[1]}function Radial(curve){this._curve=curve}function curveRadial(curve){
function radial(context){return new Radial(curve(context))}return radial._curve=curve,
radial}function radialLine(l){var c=l.curve;return l.angle=l.x,
delete l.x,l.radius=l.y,delete l.y,l.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve;
},l}function point(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6);
}function Basis(context){this._context=context}function BasisClosed(context){
this._context=context}function BasisOpen(context){this._context=context;
}function Bundle(context,beta){this._basis=new Basis(context),
this._beta=beta}function point$1(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2);
}function Cardinal(context,tension){this._context=context,this._k=(1-tension)/6;
}function CardinalClosed(context,tension){this._context=context,
this._k=(1-tension)/6}function CardinalOpen(context,tension){
this._context=context,this._k=(1-tension)/6}function point$2(that,x,y){
var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>epsilon$1){
var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);
x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n;
}if(that._l23_a>epsilon$1){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);
x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m;
}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){
this._context=context,this._alpha=alpha}function CatmullRomClosed(context,alpha){
this._context=context,this._alpha=alpha}function CatmullRomOpen(context,alpha){
this._context=context,this._alpha=alpha}function LinearClosed(context){
this._context=context}function sign(x){return x<0?-1:1}function slope3(that,x2,y2){
var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);
return(sign(s0)+sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0;
}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t;
}function point$3(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;
that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1);
}function MonotoneX(context){this._context=context}function MonotoneY(context){
this._context=new ReflectContext(context)}function ReflectContext(context){
this._context=context}function monotoneX(context){return new MonotoneX(context);
}function monotoneY(context){return new MonotoneY(context)}function Natural(context){
this._context=context}function controlPoints(x){var i,m,n=x.length-1,a=new Array(n),b=new Array(n),r=new Array(n);
for(a[0]=0,b[0]=2,r[0]=x[0]+2*x[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,
r[i]=4*x[i]+2*x[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n],
i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];for(a[n-1]=r[n-1]/b[n-1],
i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(x[n]+a[n-1])/2,
i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}function Step(context,t){
this._context=context,this._t=t}function stepBefore(context){
return new Step(context,0)}function stepAfter(context){return new Step(context,1);
}function stackValue(d,key){return d[key]}function sum$1(series){
for(var v,s=0,i=-1,n=series.length;++i<n;)(v=+series[i][1])&&(s+=v);
return s}function extend(parent,definition){var prototype=Object.create(parent.prototype);
for(var key in definition)prototype[key]=definition[key];return prototype;
}function Color(){}function color(format){var m;return format=(format+"").trim().toLowerCase(),
(m=reHex3.exec(format))?(m=parseInt(m[1],16),new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1)):(m=reHex6.exec(format))?rgbn(parseInt(m[1],16)):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null;
}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}
function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a);
}function rgbConvert(o){return o instanceof Color||(o=color(o)),
o?(o=o.rgb(),new Rgb(o.r,o.g,o.b,o.opacity)):new Rgb}function rgb(r,g,b,opacity){
return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity);
}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity;
}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),
new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);
if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;
o=o.rgb();var r=o.r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;
return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,
s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity);
}function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity);
}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity;
}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1);
}function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);
if(o instanceof Hcl){var h=o.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity);
}o instanceof Rgb||(o=rgbConvert(o));var b=rgb2xyz(o.r),a=rgb2xyz(o.g),l=rgb2xyz(o.b),x=xyz2lab((.4124564*b+.3575761*a+.1804375*l)/Xn),y=xyz2lab((.2126729*b+.7151522*a+.072175*l)/Yn),z=xyz2lab((.0193339*b+.119192*a+.9503041*l)/Zn);
return new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab(l,a,b,opacity){
return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity);
}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity;
}function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){
return t>t1?t*t*t:t2*(t-t0)}function xyz2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055);
}function rgb2xyz(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4);
}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);
o instanceof Lab||(o=labConvert(o));var h=Math.atan2(o.b,o.a)*rad2deg;
return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity);
}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity);
}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity;
}function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);
o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*rad2deg-120:NaN;
return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}function cubehelix(h,s,l,opacity){
return 1===arguments.length?cubehelixConvert(h):new Cubehelix(h,s,l,null==opacity?1:opacity);
}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,
this.opacity=+opacity}function basis$1(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;
return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6;
}function linear$1(a,d){return function(t){return a+t*d}}function exponential$1(a,b,y){
return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y);
}}function hue(a,b){var d=b-a;return d?linear$1(a,d>180||d<-180?d-360*Math.round(d/360):d):constant$3(isNaN(a)?b:a);
}function gamma(y){return 1===(y=+y)?nogamma:function(a,b){return b-a?exponential$1(a,b,y):constant$3(isNaN(a)?b:a);
}}function nogamma(a,b){var d=b-a;return d?linear$1(a,d):constant$3(isNaN(a)?b:a);
}function rgbSpline(spline){return function(colors){var i,color$$1,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);
for(i=0;i<n;++i)color$$1=rgb(colors[i]),r[i]=color$$1.r||0,g[i]=color$$1.g||0,
b[i]=color$$1.b||0;return r=spline(r),g=spline(g),b=spline(b),
color$$1.opacity=1,function(t){return color$$1.r=r(t),color$$1.g=g(t),
color$$1.b=b(t),color$$1+""}}}function zero(b){return function(){
return b}}function one(b){return function(t){return b(t)+""}}
function parseCss(value){return"none"===value?identity$2:(cssNode||(cssNode=document.createElement("DIV"),
cssRoot=document.documentElement,cssView=document.defaultView),
cssNode.style.transform=value,value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),
cssRoot.removeChild(cssNode),value=value.slice(7,-1).split(","),
decompose(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5]));
}function parseSvg(value){return null==value?identity$2:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),
svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?(value=value.matrix,
decompose(value.a,value.b,value.c,value.d,value.e,value.f)):identity$2);
}function interpolateTransform(parse,pxComma,pxParen,degParen){
function pop(s){return s.length?s.pop()+" ":""}function translate(xa,ya,xb,yb,s,q){
if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);
q.push({i:i-4,x:interpolateNumber(xa,xb)},{i:i-2,x:interpolateNumber(ya,yb)
})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}function rotate(a,b,s,q){
a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,
x:interpolateNumber(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen);
}function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,
x:interpolateNumber(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen);
}function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");
q.push({i:i-4,x:interpolateNumber(xa,xb)},{i:i-2,x:interpolateNumber(ya,yb)
})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")");
}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),
translate(a.translateX,a.translateY,b.translateX,b.translateY,s,q),
rotate(a.rotate,b.rotate,s,q),skewX(a.skewX,b.skewX,s,q),scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),
a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);
return s.join("")}}}function cosh(x){return((x=Math.exp(x))+1/x)/2;
}function sinh(x){return((x=Math.exp(x))-1/x)/2}function tanh(x){
return((x=Math.exp(2*x))-1)/(x+1)}function hsl$1(hue$$1){return function(start,end){
var h=hue$$1((start=hsl(start)).h,(end=hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);
return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),
start.opacity=opacity(t),start+""}}}function lab$1(start,end){
var l=nogamma((start=lab(start)).l,(end=lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);
return function(t){return start.l=l(t),start.a=a(t),start.b=b(t),
start.opacity=opacity(t),start+""}}function hcl$1(hue$$1){return function(start,end){
var h=hue$$1((start=hcl(start)).h,(end=hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);
return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),
start.opacity=opacity(t),start+""}}}function cubehelix$1(hue$$1){
return function cubehelixGamma(y){function cubehelix$$1(start,end){
var h=hue$$1((start=cubehelix(start)).h,(end=cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);
return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),
start.opacity=opacity(t),start+""}}return y=+y,cubehelix$$1.gamma=cubehelixGamma,
cubehelix$$1}(1)}function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){
if(!(t=arguments[i]+"")||t in _)throw new Error("illegal type: "+t);
_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}
function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){
var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),
t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);
return{type:t,name:name}})}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value;
}function set$2(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){
type[i]=noop$1,type=type.slice(0,i).concat(type.slice(i+1));break;
}return null!=callback&&type.push({name:name,value:callback}),
type}function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){
return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}")}function customConverter(columns,f){
var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns);
}}function inferColumns(rows){var columnSet=Object.create(null),columns=[];
return rows.forEach(function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column);
}),columns}function fixCallback(callback){return function(error,xhr){
callback(null==error?xhr:null)}}function hasResponse(xhr){var type=xhr.responseType;
return type&&"text"!==type?xhr.response:xhr.responseText}function responseOf(parse,row){
return function(request$$1){return parse(request$$1.responseText,row);
}}function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew);
}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null;
}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),
t}function timerFlush(){now(),++frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),
t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,
frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0;
}}function poke$1(){var now=clock.now(),delay=now-clockLast;delay>pokeDelay&&(clockSkew-=delay,
clockLast=now)}function nap(){for(var t0,t2,t1=taskHead,time=1/0;t1;)t1._call?(time>t1._time&&(time=t1._time),
t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);
taskTail=t0,sleep(time)}function sleep(time){if(!frame){timeout&&(timeout=clearTimeout(timeout));
var delay=time-clockNow;delay>24?(time<1/0&&(timeout=setTimeout(wake,delay)),
interval&&(interval=clearInterval(interval))):(interval||(interval=setInterval(poke$1,pokeDelay)),
frame=1,setFrame(wake))}}function newInterval(floori,offseti,count,field){
function interval(date){return floori(date=new Date((+date))),
date}return interval.floor=interval,interval.ceil=function(date){
return floori(date=new Date(date-1)),offseti(date,1),floori(date),
date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);
return date-d0<d1-date?d0:d1},interval.offset=function(date,step){
return offseti(date=new Date((+date)),null==step?1:Math.floor(step)),
date},interval.range=function(start,stop,step){var range=[];if(start=interval.ceil(start),
step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;
do range.push(new Date((+start)));while(offseti(start,step),floori(start),
start<stop);return range},interval.filter=function(test){return newInterval(function(date){
if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1);
},function(date,step){if(date>=date)for(;--step>=0;)for(;offseti(date,1),
!test(date););})},count&&(interval.count=function(start,end){
return t0$1.setTime(+start),t1$1.setTime(+end),floori(t0$1),floori(t1$1),
Math.floor(count(t0$1,t1$1))},interval.every=function(step){return step=Math.floor(step),
isFinite(step)&&step>0?step>1?interval.filter(field?function(d){
return field(d)%step===0}:function(d){return interval.count(0,d)%step===0;
}):interval:null}),interval}function weekday(i){return newInterval(function(date){
date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0);
},function(date,step){date.setDate(date.getDate()+7*step)},function(start,end){
return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek;
})}function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),
date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+7*step);
},function(start,end){return(end-start)/durationWeek})}function FormatSpecifier(specifier){
if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);
var match,fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zero=!!match[5],width=match[6]&&+match[6],comma=!!match[7],precision=match[8]&&+match[8].slice(1),type=match[9]||"";
"n"===type?(comma=!0,type="g"):formatTypes[type]||(type=""),(zero||"0"===fill&&"="===align)&&(zero=!0,
fill="0",align="="),this.fill=fill,this.align=align,this.sign=sign,
this.symbol=symbol,this.zero=zero,this.width=width,this.comma=comma,
this.precision=precision,this.type=type}function identity$3(x){
return x}function defaultLocale(definition){return locale$1=formatLocale(definition),
exports.format=locale$1.format,exports.formatPrefix=locale$1.formatPrefix,
locale$1}function localDate(d){if(0<=d.y&&d.y<100){var date=new Date((-1),d.m,d.d,d.H,d.M,d.S,d.L);
return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L);
}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));
return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L));
}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale$1(locale){
function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;
for(date instanceof Date||(date=new Date((+date)));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),
null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",
(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);
return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,newDate){
return function(string){var d=newYear(1900),i=parseSpecifier(d,specifier,string+="",0);
if(i!=string.length)return null;if("p"in d&&(d.H=d.H%12+12*d.p),
"W"in d||"U"in d){"w"in d||(d.w="W"in d?1:0);var day$$1="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay();
d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day$$1+5)%7:d.w+7*d.U-(day$$1+6)%7;
}return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):newDate(d);
}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){
if(j>=m)return-1;if(c=specifier.charCodeAt(i++),37===c){if(c=specifier.charAt(i++),
parse=parses[c in pads?specifier.charAt(i++):c],!parse||(j=parse(d,string,j))<0)return-1;
}else if(c!=string.charCodeAt(j++))return-1}return j}function parsePeriod(d,string,i){
var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],
i+n[0].length):-1}function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));
return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1;
}function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));
return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1;
}function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));
return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1;
}function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));
return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1;
}function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i);
}function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i);
}function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i);
}function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()];
}function formatWeekday(d){return locale_weekdays[d.getDay()];
}function formatShortMonth(d){return locale_shortMonths[d.getMonth()];
}function formatMonth(d){return locale_months[d.getMonth()]}function formatPeriod(d){
return locale_periods[+(d.getHours()>=12)]}function formatUTCShortWeekday(d){
return locale_shortWeekdays[d.getUTCDay()]}function formatUTCWeekday(d){
return locale_weekdays[d.getUTCDay()]}function formatUTCShortMonth(d){
return locale_shortMonths[d.getUTCMonth()]}function formatUTCMonth(d){
return locale_months[d.getUTCMonth()]}function formatUTCPeriod(d){
return locale_periods[+(d.getUTCHours()>=12)]}var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={
a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,
c:null,d:formatDayOfMonth,e:formatDayOfMonth,H:formatHour24,I:formatHour12,
j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,
p:formatPeriod,S:formatSeconds,U:formatWeekNumberSunday,w:formatWeekdayNumber,
W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,
Z:formatZone,"%":formatLiteralPercent},utcFormats={a:formatUTCShortWeekday,
A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,
d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,H:formatUTCHour24,
I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,
m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,S:formatUTCSeconds,
U:formatUTCWeekNumberSunday,w:formatUTCWeekdayNumber,W:formatUTCWeekNumberMonday,
x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,
"%":formatLiteralPercent},parses={a:parseShortWeekday,A:parseWeekday,
b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,
e:parseDayOfMonth,H:parseHour24,I:parseHour24,j:parseDayOfYear,
L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,
S:parseSeconds,U:parseWeekNumberSunday,w:parseWeekdayNumber,W:parseWeekNumberMonday,
x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,
Z:parseZone,"%":parseLiteralPercent};return formats.x=newFormat(locale_date,formats),
formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),
utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),
utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){
var f=newFormat(specifier+="",formats);return f.toString=function(){
return specifier},f},parse:function(specifier){var p=newParse(specifier+="",localDate);
return p.toString=function(){return specifier},p},utcFormat:function(specifier){
var f=newFormat(specifier+="",utcFormats);return f.toString=function(){
return specifier},f},utcParse:function(specifier){var p=newParse(specifier,utcDate);
return p.toString=function(){return specifier},p}}}function pad(value,fill,width){
var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;
return sign+(length<width?new Array(width-length+1).join(fill)+string:string);
}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){
return new RegExp("^(?:"+names.map(requote).join("|")+")","i");
}function formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;
return map}function parseWeekdayNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+1));
return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){
var n=numberRe.exec(string.slice(i));return n?(d.U=+n[0],i+n[0].length):-1;
}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i));
return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){
var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],
i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));
return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){
var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(string.slice(i,i+6));
return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){
var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,
i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));
return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){
var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],
i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));
return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){
var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],
i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));
return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){
var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],
i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));
return n?i+n[0].length:-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2);
}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){
return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){
return pad(1+day.count(year(d),d),p,3)}function formatMilliseconds(d,p){
return pad(d.getMilliseconds(),p,3)}function formatMonthNumber(d,p){
return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2);
}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekNumberSunday(d,p){
return pad(sunday.count(year(d),d),p,2)}function formatWeekdayNumber(d){
return d.getDay()}function formatWeekNumberMonday(d,p){return pad(monday.count(year(d),d),p,2);
}function formatYear(d,p){return pad(d.getFullYear()%100,p,2);
}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4);
}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,
"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){
return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){
return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){
return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){
return pad(1+utcDay.count(utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){
return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMonthNumber(d,p){
return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){
return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){
return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekNumberSunday(d,p){
return pad(utcSunday.count(utcYear(d),d),p,2)}function formatUTCWeekdayNumber(d){
return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){
return pad(utcMonday.count(utcYear(d),d),p,2)}function formatUTCYear(d,p){
return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){
return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){
return"+0000"}function formatLiteralPercent(){return"%"}function defaultLocale$1(definition){
return locale$2=formatLocale$1(definition),exports.timeFormat=locale$2.format,
exports.timeParse=locale$2.parse,exports.utcFormat=locale$2.utcFormat,
exports.utcParse=locale$2.utcParse,locale$2}function formatIsoNative(date){
return date.toISOString()}function parseIsoNative(string){var date=new Date(string);
return isNaN(date)?null:date}function ordinal(range){function scale(d){
var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;
index.set(key,i=domain.push(d))}return range[(i-1)%range.length];
}var index=map$1(),domain=[],unknown=implicit;return range=null==range?[]:slice$3.call(range),
scale.domain=function(_){if(!arguments.length)return domain.slice();
domain=[],index=map$1();for(var d,key,i=-1,n=_.length;++i<n;)index.has(key=(d=_[i])+"")||index.set(key,domain.push(d));
return scale},scale.range=function(_){return arguments.length?(range=slice$3.call(_),
scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,
scale):unknown},scale.copy=function(){return ordinal().domain(domain).range(range).unknown(unknown);
},scale}function band(){function rescale(){var n=domain().length,reverse=range$$1[1]<range$$1[0],start=range$$1[reverse-0],stop=range$$1[1-reverse];
step=(stop-start)/Math.max(1,n-paddingInner+2*paddingOuter),round&&(step=Math.floor(step)),
start+=(stop-start-step*(n-paddingInner))*align,bandwidth=step*(1-paddingInner),
round&&(start=Math.round(start),bandwidth=Math.round(bandwidth));
var values=range(n).map(function(i){return start+step*i});return ordinalRange(reverse?values.reverse():values);
}var step,bandwidth,scale=ordinal().unknown(void 0),domain=scale.domain,ordinalRange=scale.range,range$$1=[0,1],round=!1,paddingInner=0,paddingOuter=0,align=.5;
return delete scale.unknown,scale.domain=function(_){return arguments.length?(domain(_),
rescale()):domain()},scale.range=function(_){return arguments.length?(range$$1=[+_[0],+_[1]],
rescale()):range$$1.slice()},scale.rangeRound=function(_){return range$$1=[+_[0],+_[1]],
round=!0,rescale()},scale.bandwidth=function(){return bandwidth;
},scale.step=function(){return step},scale.round=function(_){
return arguments.length?(round=!!_,rescale()):round},scale.padding=function(_){
return arguments.length?(paddingInner=paddingOuter=Math.max(0,Math.min(1,_)),
rescale()):paddingInner},scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.max(0,Math.min(1,_)),
rescale()):paddingInner},scale.paddingOuter=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),
rescale()):paddingOuter},scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),
rescale()):align},scale.copy=function(){return band().domain(domain()).range(range$$1).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align);
},rescale()}function pointish(scale){var copy=scale.copy;return scale.padding=scale.paddingOuter,
delete scale.paddingInner,delete scale.paddingOuter,scale.copy=function(){
return pointish(copy())},scale}function point$4(){return pointish(band().paddingInner(1));
}function deinterpolateLinear(a,b){return(b-=a=+a)?function(x){
return(x-a)/b}:constant$4(b)}function deinterpolateClamp(deinterpolate){
return function(a,b){var d=deinterpolate(a=+a,b=+b);return function(x){
return x<=a?0:x>=b?1:d(x)}}}function reinterpolateClamp(reinterpolate){
return function(a,b){var r=reinterpolate(a=+a,b=+b);return function(t){
return t<=0?a:t>=1?b:r(t)}}}function bimap(domain,range$$1,deinterpolate,reinterpolate){
var d0=domain[0],d1=domain[1],r0=range$$1[0],r1=range$$1[1];return d1<d0?(d0=deinterpolate(d1,d0),
r0=reinterpolate(r1,r0)):(d0=deinterpolate(d0,d1),r0=reinterpolate(r0,r1)),
function(x){return r0(d0(x))}}function polymap(domain,range$$1,deinterpolate,reinterpolate){
var j=Math.min(domain.length,range$$1.length)-1,d=new Array(j),r=new Array(j),i=-1;
for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range$$1=range$$1.slice().reverse());++i<j;)d[i]=deinterpolate(domain[i],domain[i+1]),
r[i]=reinterpolate(range$$1[i],range$$1[i+1]);return function(x){
var i=bisectRight(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){
return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp());
}function continuous(deinterpolate,reinterpolate){function rescale(){
return piecewise=Math.min(domain.length,range$$1.length)>2?polymap:bimap,
output=input=null,scale}function scale(x){return(output||(output=piecewise(domain,range$$1,clamp?deinterpolateClamp(deinterpolate):deinterpolate,interpolate$$1)))(+x);
}var piecewise,output,input,domain=unit,range$$1=unit,interpolate$$1=interpolate,clamp=!1;
return scale.invert=function(y){return(input||(input=piecewise(range$$1,domain,deinterpolateLinear,clamp?reinterpolateClamp(reinterpolate):reinterpolate)))(+y);
},scale.domain=function(_){return arguments.length?(domain=map$3.call(_,number$1),
rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range$$1=slice$3.call(_),
rescale()):range$$1.slice()},scale.rangeRound=function(_){return range$$1=slice$3.call(_),
interpolate$$1=interpolateRound,rescale()},scale.clamp=function(_){
return arguments.length?(clamp=!!_,rescale()):clamp},scale.interpolate=function(_){
return arguments.length?(interpolate$$1=_,rescale()):interpolate$$1;
},rescale()}function linearish(scale){var domain=scale.domain;
return scale.ticks=function(count){var d=domain();return ticks(d[0],d[d.length-1],null==count?10:count);
},scale.tickFormat=function(count,specifier){return tickFormat(domain(),count,specifier);
},scale.nice=function(count){var d=domain(),i=d.length-1,n=null==count?10:count,start=d[0],stop=d[i],step=tickStep(start,stop,n);
return step&&(step=tickStep(Math.floor(start/step)*step,Math.ceil(stop/step)*step,n),
d[0]=Math.floor(start/step)*step,d[i]=Math.ceil(stop/step)*step,
domain(d)),scale},scale}function linear$2(){var scale=continuous(deinterpolateLinear,interpolateNumber);
return scale.copy=function(){return copy(scale,linear$2())},linearish(scale);
}function identity$4(){function scale(x){return+x}var domain=[0,1];
return scale.invert=scale,scale.domain=scale.range=function(_){
return arguments.length?(domain=map$3.call(_,number$1),scale):domain.slice();
},scale.copy=function(){return identity$4().domain(domain)},linearish(scale);
}function deinterpolate(a,b){return(b=Math.log(b/a))?function(x){
return Math.log(x/a)/b}:constant$4(b)}function reinterpolate(a,b){
return a<0?function(t){return-Math.pow(-b,t)*Math.pow(-a,1-t);
}:function(t){return Math.pow(b,t)*Math.pow(a,1-t)}}function pow10(x){
return isFinite(x)?+("1e"+x):x<0?0:x}function powp(base){return 10===base?pow10:base===Math.E?Math.exp:function(x){
return Math.pow(base,x)}}function logp(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),
function(x){return Math.log(x)/base})}function reflect(f){return function(x){
return-f(-x)}}function log(){function rescale(){return logs=logp(base),
pows=powp(base),domain()[0]<0&&(logs=reflect(logs),pows=reflect(pows)),
scale}var scale=continuous(deinterpolate,reinterpolate).domain([1,10]),domain=scale.domain,base=10,logs=logp(10),pows=powp(10);
return scale.base=function(_){return arguments.length?(base=+_,
rescale()):base},scale.domain=function(_){return arguments.length?(domain(_),
rescale()):domain()},scale.ticks=function(count){var r,d=domain(),u=d[0],v=d[d.length-1];
(r=v<u)&&(i=u,u=v,v=i);var p,k,t,i=logs(u),j=logs(v),n=null==count?10:+count,z=[];
if(!(base%1)&&j-i<n){if(i=Math.round(i)-1,j=Math.round(j)+1,u>0){
for(;i<j;++i)for(k=1,p=pows(i);k<base;++k)if(t=p*k,!(t<u)){if(t>v)break;
z.push(t)}}else for(;i<j;++i)for(k=base-1,p=pows(i);k>=1;--k)if(t=p*k,
!(t<u)){if(t>v)break;z.push(t)}}else z=ticks(i,j,Math.min(j-i,n)).map(pows);
return r?z.reverse():z},scale.tickFormat=function(count,specifier){
if(null==specifier&&(specifier=10===base?".0e":","),"function"!=typeof specifier&&(specifier=exports.format(specifier)),
count===1/0)return specifier;null==count&&(count=10);var k=Math.max(1,base*count/scale.ticks().length);
return function(d){var i=d/pows(Math.round(logs(d)));return i*base<base-.5&&(i*=base),
i<=k?specifier(d):""}},scale.nice=function(){return domain(nice(domain(),{
floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){
return pows(Math.ceil(logs(x)))}}))},scale.copy=function(){return copy(scale,log().base(base));
},scale}function raise(x,exponent){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent);
}function pow(){function deinterpolate(a,b){return(b=raise(b,exponent)-(a=raise(a,exponent)))?function(x){
return(raise(x,exponent)-a)/b}:constant$4(b)}function reinterpolate(a,b){
return b=raise(b,exponent)-(a=raise(a,exponent)),function(t){
return raise(a+b*t,1/exponent)}}var exponent=1,scale=continuous(deinterpolate,reinterpolate),domain=scale.domain;
return scale.exponent=function(_){return arguments.length?(exponent=+_,
domain(domain())):exponent},scale.copy=function(){return copy(scale,pow().exponent(exponent));
},linearish(scale)}function sqrt(){return pow().exponent(.5)}
function quantile$$1(){function rescale(){var i=0,n=Math.max(1,range$$1.length);
for(thresholds=new Array(n-1);++i<n;)thresholds[i-1]=threshold(domain,i/n);
return scale}function scale(x){if(!isNaN(x=+x))return range$$1[bisectRight(thresholds,x)];
}var domain=[],range$$1=[],thresholds=[];return scale.invertExtent=function(y){
var i=range$$1.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]];
},scale.domain=function(_){if(!arguments.length)return domain.slice();
domain=[];for(var d,i=0,n=_.length;i<n;++i)d=_[i],null==d||isNaN(d=+d)||domain.push(d);
return domain.sort(ascending),rescale()},scale.range=function(_){
return arguments.length?(range$$1=slice$3.call(_),rescale()):range$$1.slice();
},scale.quantiles=function(){return thresholds.slice()},scale.copy=function(){
return quantile$$1().domain(domain).range(range$$1)},scale}function quantize$1(){
function scale(x){if(x<=x)return range$$1[bisectRight(domain,x,0,n)];
}function rescale(){var i=-1;for(domain=new Array(n);++i<n;)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);
return scale}var x0=0,x1=1,n=1,domain=[.5],range$$1=[0,1];return scale.domain=function(_){
return arguments.length?(x0=+_[0],x1=+_[1],rescale()):[x0,x1];
},scale.range=function(_){return arguments.length?(n=(range$$1=slice$3.call(_)).length-1,
rescale()):range$$1.slice()},scale.invertExtent=function(y){var i=range$$1.indexOf(y);
return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]];
},scale.copy=function(){return quantize$1().domain([x0,x1]).range(range$$1);
},linearish(scale)}function threshold$1(){function scale(x){if(x<=x)return range$$1[bisectRight(domain,x,0,n)];
}var domain=[.5],range$$1=[0,1],n=1;return scale.domain=function(_){
return arguments.length?(domain=slice$3.call(_),n=Math.min(domain.length,range$$1.length-1),
scale):domain.slice()},scale.range=function(_){return arguments.length?(range$$1=slice$3.call(_),
n=Math.min(domain.length,range$$1.length-1),scale):range$$1.slice();
},scale.invertExtent=function(y){var i=range$$1.indexOf(y);return[domain[i-1],domain[i]];
},scale.copy=function(){return threshold$1().domain(domain).range(range$$1);
},scale}function date$1(t){return new Date(t)}function number$2(t){
return t instanceof Date?+t:+new Date((+t))}function calendar(year$$1,month$$1,week,day$$1,hour$$1,minute$$1,second$$1,millisecond$$1,format){
function tickFormat(date){return(second$$1(date)<date?formatMillisecond:minute$$1(date)<date?formatSecond:hour$$1(date)<date?formatMinute:day$$1(date)<date?formatHour:month$$1(date)<date?week(date)<date?formatDay:formatWeek:year$$1(date)<date?formatMonth:formatYear)(date);
}function tickInterval(interval,start,stop,step){if(null==interval&&(interval=10),
"number"==typeof interval){var target=Math.abs(stop-start)/interval,i=bisector(function(i){
return i[2]}).right(tickIntervals,target);i===tickIntervals.length?(step=tickStep(start/durationYear,stop/durationYear,interval),
interval=year$$1):i?(i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i],
step=i[1],interval=i[0]):(step=tickStep(start,stop,interval),
interval=millisecond$$1)}return null==step?interval:interval.every(step);
}var scale=continuous(deinterpolateLinear,interpolateNumber),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y"),tickIntervals=[[second$$1,1,durationSecond$1],[second$$1,5,5*durationSecond$1],[second$$1,15,15*durationSecond$1],[second$$1,30,30*durationSecond$1],[minute$$1,1,durationMinute$1],[minute$$1,5,5*durationMinute$1],[minute$$1,15,15*durationMinute$1],[minute$$1,30,30*durationMinute$1],[hour$$1,1,durationHour$1],[hour$$1,3,3*durationHour$1],[hour$$1,6,6*durationHour$1],[hour$$1,12,12*durationHour$1],[day$$1,1,durationDay$1],[day$$1,2,2*durationDay$1],[week,1,durationWeek$1],[month$$1,1,durationMonth],[month$$1,3,3*durationMonth],[year$$1,1,durationYear]];
return scale.invert=function(y){return new Date(invert(y))},scale.domain=function(_){
return arguments.length?domain(map$3.call(_,number$2)):domain().map(date$1);
},scale.ticks=function(interval,step){var t,d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0;
return r&&(t=t0,t0=t1,t1=t),t=tickInterval(interval,t0,t1,step),
t=t?t.range(t0,t1+1):[],r?t.reverse():t},scale.tickFormat=function(count,specifier){
return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval,step){
var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1],step))?domain(nice(d,interval)):scale;
},scale.copy=function(){return copy(scale,calendar(year$$1,month$$1,week,day$$1,hour$$1,minute$$1,second$$1,millisecond$$1,format));
},scale}function ramp(range){var n=range.length;return function(t){
return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}function sequential(interpolator){
function scale(x){var t=(x-x0)/(x1-x0);return interpolator(clamp?Math.max(0,Math.min(1,t)):t);
}var x0=0,x1=1,clamp=!1;return scale.domain=function(_){return arguments.length?(x0=+_[0],
x1=+_[1],scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,
scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,
scale):interpolator},scale.copy=function(){return sequential(interpolator).domain([x0,x1]).clamp(clamp);
},linearish(scale)}function creatorInherit(name){return function(){
var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name);
}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local);
}}function local(){return new Local}function Local(){this._="@"+(++nextId).toString(36);
}function filterContextListener(listener,index,group){return listener=contextListener(listener,index,group),
function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event);
}}function contextListener(listener,index,group){return function(event1){
var event0=exports.event;exports.event=event1;try{listener.call(this,this.__data__,index,group);
}finally{exports.event=event0}}}function parseTypenames$1(typenames){
return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");
return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name
}})}function onRemove(typename){return function(){var on=this.__on;
if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);
++i?on.length=i:delete this.__on}}}function onAdd(typename,value,capture){
var wrap=filterEvents.hasOwnProperty(typename.type)?filterContextListener:contextListener;
return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);
if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),
this.addEventListener(o.type,o.listener=listener,o.capture=capture),
void(o.value=value);this.addEventListener(typename.type,listener,capture),
o={type:typename.type,name:typename.name,value:value,listener:listener,
capture:capture},on?on.push(o):this.__on=[o]}}function customEvent(event1,listener,that,args){
var event0=exports.event;event1.sourceEvent=exports.event,exports.event=event1;
try{return listener.apply(that,args)}finally{exports.event=event0;
}}function none$2(){}function empty(){return[]}function EnterNode(parent,datum){
this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,
this._next=null,this._parent=parent,this.__data__=datum}function bindIndex(parent,group,enter,update,exit,data){
for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],
update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node);
}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);
for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=keyPrefix+key.call(node,node.__data__,i,group),
keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);
for(i=0;i<dataLength;++i)keyValue=keyPrefix+key.call(parent,data[i],i,data),
(node=nodeByKeyValue[keyValue])?(update[i]=node,node.__data__=data[i],
nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode(parent,data[i]);
for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node);
}function ascending$2(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove(name){
return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){
return function(){this.removeAttributeNS(fullname.space,fullname.local);
}}function attrConstant(name,value){return function(){this.setAttribute(name,value);
}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value);
}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);
null==v?this.removeAttribute(name):this.setAttribute(name,v)};
}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);
null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v);
}}function styleRemove(name){return function(){this.style.removeProperty(name);
}}function styleConstant(name,value,priority){return function(){
this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){
return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority);
}}function propertyRemove(name){return function(){delete this[name];
}}function propertyConstant(name,value){return function(){this[name]=value;
}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);
null==v?delete this[name]:this[name]=v}}function classArray(string){
return string.trim().split(/^|\s+/)}function classList(node){
return node.classList||new ClassList(node)}function ClassList(node){
this._node=node,this._names=classArray(node.getAttribute("class")||"");
}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i]);
}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i]);
}function classedTrue(names){return function(){classedAdd(this,names);
}}function classedFalse(names){return function(){classedRemove(this,names);
}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names);
}}function textRemove(){this.textContent=""}function textConstant(value){
return function(){this.textContent=value}}function textFunction(value){
return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v;
}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){
return function(){this.innerHTML=value}}function htmlFunction(value){
return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v;
}}function raise$1(){this.nextSibling&&this.parentNode.appendChild(this);
}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild);
}function constantNull(){return null}function remove(){var parent=this.parentNode;
parent&&parent.removeChild(this)}function dispatchEvent(node,type,params){
var window$$1=window(node),event=window$$1.CustomEvent;event?event=new event(type,params):(event=window$$1.document.createEvent("Event"),
params?(event.initEvent(type,params.bubbles,params.cancelable),
event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event);
}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params);
}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments));
}}function Selection(groups,parents){this._groups=groups,this._parents=parents;
}function selection(){return new Selection([[document.documentElement]],root);
}function init(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id])||schedule.state>CREATED)throw new Error("too late");
return schedule}function set$3(node,id){var schedule=node.__transition;
if(!schedule||!(schedule=schedule[id])||schedule.state>STARTING)throw new Error("too late");
return schedule}function get$1(node,id){var schedule=node.__transition;
if(!schedule||!(schedule=schedule[id]))throw new Error("too late");
return schedule}function create(node,id,self){function schedule(elapsed){
self.state=SCHEDULED,self.timer.restart(start,self.delay,self.time),
self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){
var i,j,n,o;if(self.state!==SCHEDULED)return stop();for(i in schedules)if(o=schedules[i],
o.name===self.name){if(o.state===STARTED)return timeout$1(start);
o.state===RUNNING?(o.state=ENDED,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),
delete schedules[i]):+i<id&&(o.state=ENDED,o.timer.stop(),delete schedules[i]);
}if(timeout$1(function(){self.state===STARTED&&(self.state=RUNNING,
self.timer.restart(tick,self.delay,self.time),tick(elapsed))}),
self.state=STARTING,self.on.call("start",node,node.__data__,self.index,self.group),
self.state===STARTING){for(self.state=STARTED,tween=new Array(n=self.tween.length),
i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);
tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),
self.state=ENDING,1),i=-1,n=tween.length;++i<n;)tween[i].call(null,t);
self.state===ENDING&&(self.on.call("end",node,node.__data__,self.index,self.group),
stop())}function stop(){self.state=ENDED,self.timer.stop(),delete schedules[id];
for(var i in schedules)return;delete node.__transition}var tween,schedules=node.__transition;
schedules[id]=self,self.timer=timer(schedule,0,self.time)}function tweenRemove(id,name){
var tween0,tween1;return function(){var schedule=set$3(this,id),tween=schedule.tween;
if(tween!==tween0){tween1=tween0=tween;for(var i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){
tween1=tween1.slice(),tween1.splice(i,1);break}}schedule.tween=tween1;
}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;
return function(){var schedule=set$3(this,id),tween=schedule.tween;
if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,
value:value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){
tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1;
}}function tweenValue(transition,name,value){var id=transition._id;
return transition.each(function(){var schedule=set$3(this,id);
(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments);
}),function(node){return get$1(node,id).value[name]}}function attrRemove$1(name){
return function(){this.removeAttribute(name)}}function attrRemoveNS$1(fullname){
return function(){this.removeAttributeNS(fullname.space,fullname.local);
}}function attrConstant$1(name,interpolate$$1,value1){var value00,interpolate0;
return function(){var value0=this.getAttribute(name);return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate$$1(value00=value0,value1);
}}function attrConstantNS$1(fullname,interpolate$$1,value1){var value00,interpolate0;
return function(){var value0=this.getAttributeNS(fullname.space,fullname.local);
return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate$$1(value00=value0,value1);
}}function attrFunction$1(name,interpolate$$1,value){var value00,value10,interpolate0;
return function(){var value0,value1=value(this);return null==value1?void this.removeAttribute(name):(value0=this.getAttribute(name),
value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate$$1(value00=value0,value10=value1));
}}function attrFunctionNS$1(fullname,interpolate$$1,value){var value00,value10,interpolate0;
return function(){var value0,value1=value(this);return null==value1?void this.removeAttributeNS(fullname.space,fullname.local):(value0=this.getAttributeNS(fullname.space,fullname.local),
value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate$$1(value00=value0,value10=value1));
}}function attrTweenNS(fullname,value){function tween(){var node=this,i=value.apply(node,arguments);
return i&&function(t){node.setAttributeNS(fullname.space,fullname.local,i(t));
}}return tween._value=value,tween}function attrTween(name,value){
function tween(){var node=this,i=value.apply(node,arguments);return i&&function(t){
node.setAttribute(name,i(t))}}return tween._value=value,tween;
}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments);
}}function delayConstant(id,value){return value=+value,function(){
init(this,id).delay=value}}function durationFunction(id,value){
return function(){set$3(this,id).duration=+value.apply(this,arguments);
}}function durationConstant(id,value){return value=+value,function(){
set$3(this,id).duration=value}}function easeConstant(id,value){
if("function"!=typeof value)throw new Error;return function(){
set$3(this,id).ease=value}}function start$1(name){return(name+"").trim().split(/^|\s+/).every(function(t){
var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t;
})}function onFunction(id,name,listener){var on0,on1,sit=start$1(name)?init:set$3;
return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),
schedule.on=on1}}function removeFunction(id){return function(){
var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;
parent&&parent.removeChild(this)}}function styleRemove$1(name,interpolate$$1){
var value00,value10,interpolate0;return function(){var style=window(this).getComputedStyle(this,null),value0=style.getPropertyValue(name),value1=(this.style.removeProperty(name),
style.getPropertyValue(name));return value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate$$1(value00=value0,value10=value1);
}}function styleRemoveEnd(name){return function(){this.style.removeProperty(name);
}}function styleConstant$1(name,interpolate$$1,value1){var value00,interpolate0;
return function(){var value0=window(this).getComputedStyle(this,null).getPropertyValue(name);
return value0===value1?null:value0===value00?interpolate0:interpolate0=interpolate$$1(value00=value0,value1);
}}function styleFunction$1(name,interpolate$$1,value){var value00,value10,interpolate0;
return function(){var style=window(this).getComputedStyle(this,null),value0=style.getPropertyValue(name),value1=value(this);
return null==value1&&(this.style.removeProperty(name),value1=style.getPropertyValue(name)),
value0===value1?null:value0===value00&&value1===value10?interpolate0:interpolate0=interpolate$$1(value00=value0,value10=value1);
}}function styleTween(name,value,priority){function tween(){var node=this,i=value.apply(node,arguments);
return i&&function(t){node.style.setProperty(name,i(t),priority);
}}return tween._value=value,tween}function textConstant$1(value){
return function(){this.textContent=value}}function textFunction$1(value){
return function(){var value1=value(this);this.textContent=null==value1?"":value1;
}}function Transition(groups,parents,name,id){this._groups=groups,
this._parents=parents,this._name=name,this._id=id}function transition(name){
return selection().transition(name)}function newId(){return++id;
}function inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))return defaultTiming.time=now(),
defaultTiming;return timing}function translateX(scale0,scale1,d){
var x=scale0(d);return"translate("+(isFinite(x)?x:scale1(d))+",0)";
}function translateY(scale0,scale1,d){var y=scale0(d);return"translate(0,"+(isFinite(y)?y:scale1(d))+")";
}function center(scale){var offset=scale.bandwidth()/2;return scale.round()&&(offset=Math.round(offset)),
function(d){return scale(d)+offset}}function entering(){return!this.__axis;
}function axis(orient,scale){function axis(context){var x,values=null==tickValues?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=null==tickFormat?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity$5:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,transform=orient===top||orient===bottom?translateX:translateY,range=scale.range(),range0=range[0]+.5,range1=range[range.length-1]+.5,position=(scale.bandwidth?center:identity$5)(scale.copy()),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text"),k=orient===top||orient===left?-1:1,y=orient===left||orient===right?(x="x",
"y"):(x="y","x");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),
tick=tick.merge(tickEnter),line=line.merge(tickEnter.append("line").attr("stroke","#000").attr(x+"2",k*tickSizeInner).attr(y+"1",.5).attr(y+"2",.5)),
text=text.merge(tickEnter.append("text").attr("fill","#000").attr(x,k*spacing).attr(y,.5).attr("dy",orient===top?"0em":orient===bottom?"0.71em":"0.32em")),
context!==selection&&(path=path.transition(context),tick=tick.transition(context),
line=line.transition(context),text=text.transition(context),tickExit=tickExit.transition(context).attr("opacity",epsilon$2).attr("transform",function(d){
return transform(position,this.parentNode.__axis||position,d);
}),tickEnter.attr("opacity",epsilon$2).attr("transform",function(d){
return transform(this.parentNode.__axis||position,position,d);
})),tickExit.remove(),path.attr("d",orient===left||orient==right?"M"+k*tickSizeOuter+","+range0+"H0.5V"+range1+"H"+k*tickSizeOuter:"M"+range0+","+k*tickSizeOuter+"V0.5H"+range1+"V"+k*tickSizeOuter),
tick.attr("opacity",1).attr("transform",function(d){return transform(position,position,d);
}),line.attr(x+"2",k*tickSizeInner),text.attr(x,k*spacing).text(format),
selection.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",orient===right?"start":orient===left?"end":"middle"),
selection.each(function(){this.__axis=position})}var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3;
return axis.scale=function(_){return arguments.length?(scale=_,
axis):scale},axis.ticks=function(){return tickArguments=slice$4.call(arguments),
axis},axis.tickArguments=function(_){return arguments.length?(tickArguments=null==_?[]:slice$4.call(_),
axis):tickArguments.slice()},axis.tickValues=function(_){return arguments.length?(tickValues=null==_?null:slice$4.call(_),
axis):tickValues&&tickValues.slice()},axis.tickFormat=function(_){
return arguments.length?(tickFormat=_,axis):tickFormat},axis.tickSize=function(_){
return arguments.length?(tickSizeInner=tickSizeOuter=+_,axis):tickSizeInner;
},axis.tickSizeInner=function(_){return arguments.length?(tickSizeInner=+_,
axis):tickSizeInner},axis.tickSizeOuter=function(_){return arguments.length?(tickSizeOuter=+_,
axis):tickSizeOuter},axis.tickPadding=function(_){return arguments.length?(tickPadding=+_,
axis):tickPadding},axis}function axisTop(scale){return axis(top,scale);
}function axisRight(scale){return axis(right,scale)}function axisBottom(scale){
return axis(bottom,scale)}function axisLeft(scale){return axis(left,scale);
}function defaultSeparation(a,b){return a.parent===b.parent?1:2;
}function meanX(children){return children.reduce(meanXReduce,0)/children.length;
}function meanXReduce(x,c){return x+c.x}function maxY(children){
return 1+children.reduce(maxYReduce,0)}function maxYReduce(y,c){
return Math.max(y,c.y)}function leafLeft(node){for(var children;children=node.children;)node=children[0];
return node}function leafRight(node){for(var children;children=node.children;)node=children[children.length-1];
return node}function leastCommonAncestor(a,b){if(a===b)return a;
var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;for(a=aNodes.pop(),
b=bNodes.pop();a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c;
}function hierarchy(data,children){var node,child,childs,i,n,root=new Node(data),valued=+data.value&&(root.value=data.value),nodes=[root];
for(null==children&&(children=defaultChildren);node=nodes.pop();)if(valued&&(node.value=+node.data.value),
(childs=children(node.data))&&(n=childs.length))for(node.children=new Array(n),
i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new Node(childs[i])),
child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight);
}function node_copy(){return hierarchy(this).eachBefore(copyData);
}function defaultChildren(d){return d.children}function copyData(node){
node.data=node.data.data}function computeHeight(node){var height=0;
do node.height=height;while((node=node.parent)&&node.height<++height);
}function Node(data){this.data=data,this.depth=this.height=0,
this.parent=null}function Node$2(value){this._=value,this.next=null;
}function encloses(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r-b.r;return dr*dr+1e-6>dx*dx+dy*dy;
}function encloseN(L,B){var circle,l2,p1,l0=null,l1=L.head;switch(B.length){
case 1:circle=enclose1(B[0]);break;case 2:circle=enclose2(B[0],B[1]);
break;case 3:circle=enclose3(B[0],B[1],B[2])}for(;l1;)p1=l1._,
l2=l1.next,circle&&encloses(circle,p1)?l0=l1:(l0?(L.tail=l0,l0.next=null):L.head=L.tail=null,
B.push(p1),circle=encloseN(L,B),B.pop(),L.head?(l1.next=L.head,
L.head=l1):(l1.next=null,L.head=L.tail=l1),l0=L.tail,l0.next=l2),
l1=l2;return L.tail=l0,circle}function enclose1(a){return{x:a.x,
y:a.y,r:a.r}}function enclose2(a,b){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x21=x2-x1,y21=y2-y1,r21=r2-r1,l=Math.sqrt(x21*x21+y21*y21);
return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+r1+r2)/2
}}function enclose3(a,b,c){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x3=c.x,y3=c.y,r3=c.r,a2=2*(x1-x2),b2=2*(y1-y2),c2=2*(r2-r1),d2=x1*x1+y1*y1-r1*r1-x2*x2-y2*y2+r2*r2,a3=2*(x1-x3),b3=2*(y1-y3),c3=2*(r3-r1),d3=x1*x1+y1*y1-r1*r1-x3*x3-y3*y3+r3*r3,ab=a3*b2-a2*b3,xa=(b2*d3-b3*d2)/ab-x1,xb=(b3*c2-b2*c3)/ab,ya=(a3*d2-a2*d3)/ab-y1,yb=(a2*c3-a3*c2)/ab,A=xb*xb+yb*yb-1,B=2*(xa*xb+ya*yb+r1),C=xa*xa+ya*ya-r1*r1,r=(-B-Math.sqrt(B*B-4*A*C))/(2*A);
return{x:xa+xb*r+x1,y:ya+yb*r+y1,r:r}}function place(a,b,c){var ax=a.x,ay=a.y,da=b.r+c.r,db=a.r+c.r,dx=b.x-ax,dy=b.y-ay,dc=dx*dx+dy*dy;
if(dc){var x=.5+((db*=db)-(da*=da))/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);
c.x=ax+x*dx+y*dy,c.y=ay+x*dy-y*dx}else c.x=ax+db,c.y=ay}function intersects(a,b){
var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return dr*dr>dx*dx+dy*dy;
}function distance2(circle,x,y){var dx=circle.x-x,dy=circle.y-y;
return dx*dx+dy*dy}function Node$1(circle){this._=circle,this.next=null,
this.previous=null}function packEnclose(circles){if(!(n=circles.length))return 0;
var a,b,c,n;if(a=circles[0],a.x=0,a.y=0,!(n>1))return a.r;if(b=circles[1],
a.x=-b.r,b.x=a.r,b.y=0,!(n>2))return a.r+b.r;place(b,a,c=circles[2]);
var cx,cy,i,j,k,sj,sk,aa=a.r*a.r,ba=b.r*b.r,ca=c.r*c.r,oa=aa+ba+ca,ox=aa*a.x+ba*b.x+ca*c.x,oy=aa*a.y+ba*b.y+ca*c.y;
a=new Node$1(a),b=new Node$1(b),c=new Node$1(c),a.next=c.previous=b,
b.next=a.previous=c,c.next=b.previous=a;pack:for(i=3;i<n;++i){
if(place(a._,b._,c=circles[i]),c=new Node$1(c),(k=a.previous)===(j=b.next)){
if(intersects(j._,c._)){a=b,b=j,--i;continue pack}}else{sj=j._.r,
sk=k._.r;do if(sj<=sk){if(intersects(j._,c._)){b=j,a.next=b,b.previous=a,
--i;continue pack}j=j.next,sj+=j._.r}else{if(intersects(k._,c._)){
a=k,a.next=b,b.previous=a,--i;continue pack}k=k.previous,sk+=k._.r;
}while(j!==k.next)}for(c.previous=a,c.next=b,a.next=b.previous=b=c,
oa+=ca=c._.r*c._.r,ox+=ca*c._.x,oy+=ca*c._.y,aa=distance2(a._,cx=ox/oa,cy=oy/oa);(c=c.next)!==b;)(ca=distance2(c._,cx,cy))<aa&&(a=c,
aa=ca);b=a.next}for(a=[b._],c=b;(c=c.next)!==b;)a.push(c._);for(c=enclose(a),
i=0;i<n;++i)a=circles[i],a.x-=c.x,a.y-=c.y;return c.r}function optional(f){
return null==f?null:required(f)}function required(f){if("function"!=typeof f)throw new Error;
return f}function constantZero(){return 0}function defaultRadius(d){
return Math.sqrt(d.value)}function radiusLeaf(radius){return function(node){
node.children||(node.r=Math.max(0,+radius(node)||0))}}function packChildren(padding,k){
return function(node){if(children=node.children){var children,i,e,n=children.length,r=padding(node)*k||0;
if(r)for(i=0;i<n;++i)children[i].r+=r;if(e=packEnclose(children),
r)for(i=0;i<n;++i)children[i].r-=r;node.r=e+r}}}function translateChild(k){
return function(node){var parent=node.parent;node.r*=k,parent&&(node.x=parent.x+k*node.x,
node.y=parent.y+k*node.y)}}function defaultId(d){return d.id}
function defaultParentId(d){return d.parentId}function defaultSeparation$1(a,b){
return a.parent===b.parent?1:2}function nextLeft(v){var children=v.children;
return children?children[0]:v.t}function nextRight(v){var children=v.children;
return children?children[children.length-1]:v.t}function moveSubtree(wm,wp,shift){
var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,
wp.z+=shift,wp.m+=shift}function executeShifts(v){for(var w,shift=0,change=0,children=v.children,i=children.length;--i>=0;)w=children[i],
w.z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}function nextAncestor(vim,v,ancestor){
return vim.a.parent===v.parent?vim.a:ancestor}function TreeNode(node,i){
this._=node,this.parent=null,this.children=null,this.A=null,this.a=this,
this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}function treeRoot(root){
for(var node,child,children,i,n,tree=new TreeNode(root,0),nodes=[tree];node=nodes.pop();)if(children=node._.children)for(node.children=new Array(n=children.length),
i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new TreeNode(children[i],i)),
child.parent=node;return(tree.parent=new TreeNode(null,0)).children=[tree],
tree}function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,i0=0,i1=0,n=nodes.length,value=parent.value;i0<n;){
dx=x1-x0,dy=y1-y0;do sumValue=nodes[i1++].value;while(!sumValue&&i1<n);
for(minValue=maxValue=sumValue,alpha=Math.max(dy/dx,dx/dy)/(value*ratio),
beta=sumValue*sumValue*alpha,minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){
if(sumValue+=nodeValue=nodes[i1].value,nodeValue<minValue&&(minValue=nodeValue),
nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,
newRatio=Math.max(maxValue/beta,beta/minValue),newRatio>minRatio){
sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,
dice:dx<dy,children:nodes.slice(i0,i1)}),row.dice?treemapDice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):treemapSlice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),
value-=sumValue,i0=i1}return rows}function x$1(d){return d.x+d.vx;
}function y$1(d){return d.y+d.vy}function index$2(d){return d.index;
}function find(nodeById,nodeId){var node=nodeById.get(nodeId);
if(!node)throw new Error("missing: "+nodeId);return node}function x$2(d){
return d.x}function y$2(d){return d.y}function nopropagation(){
exports.event.stopImmediatePropagation()}function yesdrag(view,noclick){
var root=view.document.documentElement,selection$$1=select(view).on("dragstart.drag",null);
noclick&&(selection$$1.on("click.drag",noevent,!0),setTimeout(function(){
selection$$1.on("click.drag",null)},0)),"onselectstart"in root?selection$$1.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,
delete root.__noselect)}function DragEvent(target,type,subject,id,active,x,y,dx,dy,dispatch){
this.target=target,this.type=type,this.subject=subject,this.identifier=id,
this.active=active,this.x=x,this.y=y,this.dx=dx,this.dy=dy,this._=dispatch;
}function defaultFilter(){return!exports.event.button}function defaultContainer(){
return this.parentNode}function defaultSubject(d){return null==d?{
x:exports.event.x,y:exports.event.y}:d}function x$4(d){return d[0];
}function y$4(d){return d[1]}function RedBlackTree(){this._=null;
}function RedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null;
}function RedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;
parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,
p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function RedBlackRotateRight(tree,node){
var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,
q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function RedBlackFirst(node){
for(;node.L;)node=node.L;return node}function createEdge(left,right,v0,v1){
var edge=[null,null],index=edges.push(edge)-1;return edge.left=left,
edge.right=right,v0&&setEdgeEnd(edge,left,right,v0),v1&&setEdgeEnd(edge,right,left,v1),
cells[left.index].halfedges.push(index),cells[right.index].halfedges.push(index),
edge}function createBorderEdge(left,v0,v1){var edge=[v0,v1];return edge.left=left,
edge}function setEdgeEnd(edge,left,right,vertex){edge[0]||edge[1]?edge.left===right?edge[1]=vertex:edge[0]=vertex:(edge[0]=vertex,
edge.left=left,edge.right=right)}function clipEdge(edge,x0,y0,x1,y1){
var r,a=edge[0],b=edge[1],ax=a[0],ay=a[1],bx=b[0],by=b[1],t0=0,t1=1,dx=bx-ax,dy=by-ay;
if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r);
}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){
if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;
r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;
r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,
dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){
if(r<t0)return;r<t1&&(t1=r)}return!(t0>0||t1<1)||(t0>0&&(edge[0]=[ax+t0*dx,ay+t0*dy]),
t1<1&&(edge[1]=[ax+t1*dx,ay+t1*dy]),!0)}}}}}function connectEdge(edge,x0,y0,x1,y1){
var v1=edge[1];if(v1)return!0;var fm,fb,v0=edge[0],left=edge.left,right=edge.right,lx=left[0],ly=left[1],rx=right[0],ry=right[1],fx=(lx+rx)/2,fy=(ly+ry)/2;
if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(v0){if(v0[1]>=y1)return;
}else v0=[fx,y0];v1=[fx,y1]}else{if(v0){if(v0[1]<y0)return}else v0=[fx,y1];
v1=[fx,y0]}}else if(fm=(lx-rx)/(ry-ly),fb=fy-fm*fx,fm<-1||fm>1)if(lx>rx){
if(v0){if(v0[1]>=y1)return}else v0=[(y0-fb)/fm,y0];v1=[(y1-fb)/fm,y1];
}else{if(v0){if(v0[1]<y0)return}else v0=[(y1-fb)/fm,y1];v1=[(y0-fb)/fm,y0];
}else if(ly<ry){if(v0){if(v0[0]>=x1)return}else v0=[x0,fm*x0+fb];
v1=[x1,fm*x1+fb]}else{if(v0){if(v0[0]<x0)return}else v0=[x1,fm*x1+fb];
v1=[x0,fm*x0+fb]}return edge[0]=v0,edge[1]=v1,!0}function clipEdges(x0,y0,x1,y1){
for(var edge,i=edges.length;i--;)connectEdge(edge=edges[i],x0,y0,x1,y1)&&clipEdge(edge,x0,y0,x1,y1)&&(Math.abs(edge[0][0]-edge[1][0])>epsilon$3||Math.abs(edge[0][1]-edge[1][1])>epsilon$3)||delete edges[i];
}function createCell(site){return cells[site.index]={site:site,
halfedges:[]}}function cellHalfedgeAngle(cell,edge){var site=cell.site,va=edge.left,vb=edge.right;
return site===vb&&(vb=va,va=site),vb?Math.atan2(vb[1]-va[1],vb[0]-va[0]):(site===va?(va=edge[1],
vb=edge[0]):(va=edge[0],vb=edge[1]),Math.atan2(va[0]-vb[0],vb[1]-va[1]));
}function cellHalfedgeStart(cell,edge){return edge[+(edge.left!==cell.site)];
}function cellHalfedgeEnd(cell,edge){return edge[+(edge.left===cell.site)];
}function sortCellHalfedges(){for(var cell,halfedges,j,m,i=0,n=cells.length;i<n;++i)if((cell=cells[i])&&(m=(halfedges=cell.halfedges).length)){
var index=new Array(m),array=new Array(m);for(j=0;j<m;++j)index[j]=j,
array[j]=cellHalfedgeAngle(cell,edges[halfedges[j]]);for(index.sort(function(i,j){
return array[j]-array[i]}),j=0;j<m;++j)array[j]=halfedges[index[j]];
for(j=0;j<m;++j)halfedges[j]=array[j]}}function clipCells(x0,y0,x1,y1){
var iCell,cell,site,iHalfedge,halfedges,nHalfedges,start,startX,startY,end,endX,endY,nCells=cells.length,cover=!0;
for(iCell=0;iCell<nCells;++iCell)if(cell=cells[iCell]){for(site=cell.site,
halfedges=cell.halfedges,iHalfedge=halfedges.length;iHalfedge--;)edges[halfedges[iHalfedge]]||halfedges.splice(iHalfedge,1);
for(iHalfedge=0,nHalfedges=halfedges.length;iHalfedge<nHalfedges;)end=cellHalfedgeEnd(cell,edges[halfedges[iHalfedge]]),
endX=end[0],endY=end[1],start=cellHalfedgeStart(cell,edges[halfedges[++iHalfedge%nHalfedges]]),
startX=start[0],startY=start[1],(Math.abs(endX-startX)>epsilon$3||Math.abs(endY-startY)>epsilon$3)&&(halfedges.splice(iHalfedge,0,edges.push(createBorderEdge(site,end,Math.abs(endX-x0)<epsilon$3&&y1-endY>epsilon$3?[x0,Math.abs(startX-x0)<epsilon$3?startY:y1]:Math.abs(endY-y1)<epsilon$3&&x1-endX>epsilon$3?[Math.abs(startY-y1)<epsilon$3?startX:x1,y1]:Math.abs(endX-x1)<epsilon$3&&endY-y0>epsilon$3?[x1,Math.abs(startX-x1)<epsilon$3?startY:y0]:Math.abs(endY-y0)<epsilon$3&&endX-x0>epsilon$3?[Math.abs(startY-y0)<epsilon$3?startX:x0,y0]:null))-1),
++nHalfedges);nHalfedges&&(cover=!1)}if(cover){var dx,dy,d2,dc=1/0;
for(iCell=0,cover=null;iCell<nCells;++iCell)(cell=cells[iCell])&&(site=cell.site,
dx=site[0]-x0,dy=site[1]-y0,d2=dx*dx+dy*dy,d2<dc&&(dc=d2,cover=cell));
if(cover){var v00=[x0,y0],v01=[x0,y1],v11=[x1,y1],v10=[x1,y0];
cover.halfedges.push(edges.push(createBorderEdge(site=cover.site,v00,v01))-1,edges.push(createBorderEdge(site,v01,v11))-1,edges.push(createBorderEdge(site,v11,v10))-1,edges.push(createBorderEdge(site,v10,v00))-1);
}}for(iCell=0;iCell<nCells;++iCell)(cell=cells[iCell])&&(cell.halfedges.length||delete cells[iCell]);
}function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null;
}function attachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){
var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){
var bx=cSite[0],by=cSite[1],ax=lSite[0]-bx,ay=lSite[1]-by,cx=rSite[0]-bx,cy=rSite[1]-by,d=2*(ax*cy-ay*cx);
if(!(d>=-epsilon2$1)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,circle=circlePool.pop()||new Circle;
circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=(circle.cy=y+by)+Math.sqrt(x*x+y*y),
arc.circle=circle;for(var before=null,node=circles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){
if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){
before=node;break}node=node.R}circles.insert(before,circle),before||(firstCircle=circle);
}}}}function detachCircle(arc){var circle=arc.circle;circle&&(circle.P||(firstCircle=circle.N),
circles.remove(circle),circlePool.push(circle),RedBlackNode(circle),
arc.circle=null)}function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null;
}function createBeach(site){var beach=beachPool.pop()||new Beach;
return beach.site=site,beach}function detachBeach(beach){detachCircle(beach),
beaches.remove(beach),beachPool.push(beach),RedBlackNode(beach);
}function removeBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex=[x,y],previous=beach.P,next=beach.N,disappearing=[beach];
detachBeach(beach);for(var lArc=previous;lArc.circle&&Math.abs(x-lArc.circle.x)<epsilon$3&&Math.abs(y-lArc.circle.cy)<epsilon$3;)previous=lArc.P,
disappearing.unshift(lArc),detachBeach(lArc),lArc=previous;disappearing.unshift(lArc),
detachCircle(lArc);for(var rArc=next;rArc.circle&&Math.abs(x-rArc.circle.x)<epsilon$3&&Math.abs(y-rArc.circle.cy)<epsilon$3;)next=rArc.N,
disappearing.push(rArc),detachBeach(rArc),rArc=next;disappearing.push(rArc),
detachCircle(rArc);var iArc,nArcs=disappearing.length;for(iArc=1;iArc<nArcs;++iArc)rArc=disappearing[iArc],
lArc=disappearing[iArc-1],setEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);
lArc=disappearing[0],rArc=disappearing[nArcs-1],rArc.edge=createEdge(lArc.site,rArc.site,null,vertex),
attachCircle(lArc),attachCircle(rArc)}function addBeach(site){
for(var lArc,rArc,dxl,dxr,x=site[0],directrix=site[1],node=beaches._;node;)if(dxl=leftBreakPoint(node,directrix)-x,
dxl>epsilon$3)node=node.L;else{if(dxr=x-rightBreakPoint(node,directrix),
!(dxr>epsilon$3)){dxl>-epsilon$3?(lArc=node.P,rArc=node):dxr>-epsilon$3?(lArc=node,
rArc=node.N):lArc=rArc=node;break}if(!node.R){lArc=node;break;
}node=node.R}createCell(site);var newArc=createBeach(site);if(beaches.insert(lArc,newArc),
lArc||rArc){if(lArc===rArc)return detachCircle(lArc),rArc=createBeach(lArc.site),
beaches.insert(newArc,rArc),newArc.edge=rArc.edge=createEdge(lArc.site,newArc.site),
attachCircle(lArc),void attachCircle(rArc);if(!rArc)return void(newArc.edge=createEdge(lArc.site,newArc.site));
detachCircle(lArc),detachCircle(rArc);var lSite=lArc.site,ax=lSite[0],ay=lSite[1],bx=site[0]-ax,by=site[1]-ay,rSite=rArc.site,cx=rSite[0]-ax,cy=rSite[1]-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex=[(cy*hb-by*hc)/d+ax,(bx*hc-cx*hb)/d+ay];
setEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=createEdge(lSite,site,null,vertex),
rArc.edge=createEdge(site,rSite,null,vertex),attachCircle(lArc),
attachCircle(rArc)}}function leftBreakPoint(arc,directrix){var site=arc.site,rfocx=site[0],rfocy=site[1],pby2=rfocy-directrix;
if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-(1/0);site=lArc.site;
var lfocx=site[0],lfocy=site[1],plby2=lfocy-directrix;if(!plby2)return lfocx;
var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2;
}function rightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return leftBreakPoint(rArc,directrix);
var site=arc.site;return site[1]===directrix?site[0]:1/0}function triangleArea(a,b,c){
return(a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])}function lexicographic(a,b){
return b[1]-a[1]||b[0]-a[0]}function Diagram(sites,extent){var x,y,circle,site=sites.sort(lexicographic).pop();
for(edges=[],cells=new Array(sites.length),beaches=new RedBlackTree,
circles=new RedBlackTree;;)if(circle=firstCircle,site&&(!circle||site[1]<circle.y||site[1]===circle.y&&site[0]<circle.x))site[0]===x&&site[1]===y||(addBeach(site),
x=site[0],y=site[1]),site=sites.pop();else{if(!circle)break;removeBeach(circle.arc);
}if(sortCellHalfedges(),extent){var x0=+extent[0][0],y0=+extent[0][1],x1=+extent[1][0],y1=+extent[1][1];
clipEdges(x0,y0,x1,y1),clipCells(x0,y0,x1,y1)}this.edges=edges,
this.cells=cells,beaches=circles=edges=cells=null}function ZoomEvent(target,type,transform){
this.target=target,this.type=type,this.transform=transform}function Transform(k,x,y){
this.k=k,this.x=x,this.y=y}function transform(node){return node.__zoom||identity$6;
}function nopropagation$1(){exports.event.stopImmediatePropagation();
}function defaultFilter$1(){return!exports.event.button}function defaultExtent(){
var w,h,e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,
w=e.width.baseVal.value,h=e.height.baseVal.value):(w=e.clientWidth,
h=e.clientHeight),[[0,0],[w,h]]}function defaultTransform(){return this.__zoom||identity$6;
}function nopropagation$2(){exports.event.stopImmediatePropagation();
}function type$1(t){return{type:t}}function defaultFilter$2(){
return!exports.event.button}function defaultExtent$1(){var svg=this.ownerSVGElement||this;
return[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]];
}function local$1(node){for(;!node.__brush;)if(!(node=node.parentNode))return;
return node.__brush}function empty$1(extent){return extent[0][0]===extent[1][0]||extent[0][1]===extent[1][1];
}function brushSelection(node){var state=node.__brush;return state?state.dim.output(state.selection):null;
}function brushX(){return brush$1(X)}function brushY(){return brush$1(Y);
}function brush$1(dim){function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([type$1("overlay")]);
overlay.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(overlay).each(function(){
var extent=local$1(this).extent;select(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-extent[0][1]);
}),group.selectAll(".selection").data([type$1("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");
var handle=group.selectAll(".handle").data(dim.handles,function(d){
return d.type});handle.exit().remove(),handle.enter().append("rect").attr("class",function(d){
return"handle handle--"+d.type}).attr("cursor",function(d){return cursors[d.type];
}),group.each(redraw).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",started);
}function redraw(){var group=select(this),selection$$1=local$1(this).selection;
selection$$1?(group.selectAll(".selection").style("display",null).attr("x",selection$$1[0][0]).attr("y",selection$$1[0][1]).attr("width",selection$$1[1][0]-selection$$1[0][0]).attr("height",selection$$1[1][1]-selection$$1[0][1]),
group.selectAll(".handle").style("display",null).attr("x",function(d){
return"e"===d.type[d.type.length-1]?selection$$1[1][0]-handleSize/2:selection$$1[0][0]-handleSize/2;
}).attr("y",function(d){return"s"===d.type[0]?selection$$1[1][1]-handleSize/2:selection$$1[0][1]-handleSize/2;
}).attr("width",function(d){return"n"===d.type||"s"===d.type?selection$$1[1][0]-selection$$1[0][0]+handleSize:handleSize;
}).attr("height",function(d){return"e"===d.type||"w"===d.type?selection$$1[1][1]-selection$$1[0][1]+handleSize:handleSize;
})):group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null);
}function emitter(that,args){return that.__brush.emitter||new Emitter(that,args);
}function Emitter(that,args){this.that=that,this.args=args,this.state=that.__brush,
this.active=0}function started(){function moved(){var point1=mouse(that);
!shifting||lockX||lockY||(Math.abs(point1[0]-point[0])>Math.abs(point1[1]-point[1])?lockY=!0:lockX=!0),
point=point1,moving=!0,noevent$2(),move()}function move(){var t;
switch(dx=point[0]-point0[0],dy=point[1]-point0[1],mode){case MODE_SPACE:
case MODE_DRAG:signX&&(dx=Math.max(W-w0,Math.min(E-e0,dx)),w1=w0+dx,
e1=e0+dx),signY&&(dy=Math.max(N-n0,Math.min(S-s0,dy)),n1=n0+dy,
s1=s0+dy);break;case MODE_HANDLE:signX<0?(dx=Math.max(W-w0,Math.min(E-w0,dx)),
w1=w0+dx,e1=e0):signX>0&&(dx=Math.max(W-e0,Math.min(E-e0,dx)),
w1=w0,e1=e0+dx),signY<0?(dy=Math.max(N-n0,Math.min(S-n0,dy)),
n1=n0+dy,s1=s0):signY>0&&(dy=Math.max(N-s0,Math.min(S-s0,dy)),
n1=n0,s1=s0+dy);break;case MODE_CENTER:signX&&(w1=Math.max(W,Math.min(E,w0-dx*signX)),
e1=Math.max(W,Math.min(E,e0+dx*signX))),signY&&(n1=Math.max(N,Math.min(S,n0-dy*signY)),
s1=Math.max(N,Math.min(S,s0+dy*signY)))}e1<w1&&(signX*=-1,t=w0,
w0=e0,e0=t,t=w1,w1=e1,e1=t,type in flipX&&overlay.attr("cursor",cursors[type=flipX[type]])),
s1<n1&&(signY*=-1,t=n0,n0=s0,s0=t,t=n1,n1=s1,s1=t,type in flipY&&overlay.attr("cursor",cursors[type=flipY[type]])),
state.selection&&(selection$$1=state.selection),lockX&&(w1=selection$$1[0][0],
e1=selection$$1[1][0]),lockY&&(n1=selection$$1[0][1],s1=selection$$1[1][1]),
selection$$1[0][0]===w1&&selection$$1[0][1]===n1&&selection$$1[1][0]===e1&&selection$$1[1][1]===s1||(state.selection=[[w1,n1],[e1,s1]],
redraw.call(that),emit.brush())}function ended(){if(nopropagation$2(),
exports.event.touches){if(exports.event.touches.length)return;
touchending&&clearTimeout(touchending),touchending=setTimeout(function(){
touchending=null},500),group.on("touchmove.brush touchend.brush touchcancel.brush",null);
}else yesdrag(exports.event.view,moving),view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);
group.attr("pointer-events","all"),overlay.attr("cursor",cursors.overlay),
state.selection&&(selection$$1=state.selection),empty$1(selection$$1)&&(state.selection=null,
redraw.call(that)),emit.end()}function keydowned(){switch(exports.event.keyCode){
case 16:shifting=signX&&signY;break;case 18:mode===MODE_HANDLE&&(signX&&(e0=e1-dx*signX,
w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER,
move());break;case 32:mode!==MODE_HANDLE&&mode!==MODE_CENTER||(signX<0?e0=e1-dx:signX>0&&(w0=w1-dx),
signY<0?s0=s1-dy:signY>0&&(n0=n1-dy),mode=MODE_SPACE,overlay.attr("cursor",cursors.selection),
move());break;default:return}noevent$2()}function keyupped(){
switch(exports.event.keyCode){case 16:shifting&&(lockX=lockY=shifting=!1,
move());break;case 18:mode===MODE_CENTER&&(signX<0?e0=e1:signX>0&&(w0=w1),
signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE,move());break;
case 32:mode===MODE_SPACE&&(exports.event.altKey?(signX&&(e0=e1-dx*signX,
w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER):(signX<0?e0=e1:signX>0&&(w0=w1),
signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE),overlay.attr("cursor",cursors[type]),
move());break;default:return}noevent$2()}if(exports.event.touches){
if(exports.event.changedTouches.length<exports.event.touches.length)return noevent$2();
}else if(touchending)return;if(filter.apply(this,arguments)){
var w0,w1,n0,n1,e0,e1,s0,s1,dx,dy,moving,lockX,lockY,that=this,type=exports.event.target.__data__.type,mode="selection"===(exports.event.metaKey?type="overlay":type)?MODE_DRAG:exports.event.altKey?MODE_CENTER:MODE_HANDLE,signX=dim===Y?null:signsX[type],signY=dim===X?null:signsY[type],state=local$1(that),extent=state.extent,selection$$1=state.selection,W=extent[0][0],N=extent[0][1],E=extent[1][0],S=extent[1][1],shifting=signX&&signY&&exports.event.shiftKey,point0=mouse(that),point=point0,emit=emitter(that,arguments).beforestart();
"overlay"===type?state.selection=selection$$1=[[w0=dim===Y?W:point0[0],n0=dim===X?N:point0[1]],[e0=dim===Y?E:w0,s0=dim===X?S:n0]]:(w0=selection$$1[0][0],
n0=selection$$1[0][1],e0=selection$$1[1][0],s0=selection$$1[1][1]),
w1=w0,n1=n0,e1=e0,s1=s0;var group=select(that).attr("pointer-events","none"),overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);
if(exports.event.touches)group.on("touchmove.brush",moved,!0).on("touchend.brush touchcancel.brush",ended,!0);else{
var view=select(exports.event.view).on("keydown.brush",keydowned,!0).on("keyup.brush",keyupped,!0).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);
dragDisable(exports.event.view)}nopropagation$2(),interrupt(that),
redraw.call(that),emit.start()}}function initialize(){var state=this.__brush||{
selection:null};return state.extent=extent.apply(this,arguments),
state.dim=dim,state}var touchending,extent=defaultExtent$1,filter=defaultFilter$2,listeners=dispatch(brush,"start","brush","end"),handleSize=6;
return brush.move=function(group,selection$$1){group.selection?group.on("start.brush",function(){
emitter(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){
emitter(this,arguments).end()}).tween("brush",function(){function tween(t){
state.selection=1===t&&empty$1(selection1)?null:i(t),redraw.call(that),
emit.brush()}var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=state.selection,selection1=dim.input("function"==typeof selection$$1?selection$$1.apply(this,arguments):selection$$1,state.extent),i=interpolate(selection0,selection1);
return selection0&&selection1?tween:tween(1)}):group.each(function(){
var that=this,args=arguments,state=that.__brush,selection1=dim.input("function"==typeof selection$$1?selection$$1.apply(that,args):selection$$1,state.extent),emit=emitter(that,args).beforestart();
interrupt(that),state.selection=null==selection1||empty$1(selection1)?null:selection1,
redraw.call(that),emit.start().brush().end()})},Emitter.prototype={
beforestart:function(){return 1===++this.active&&(this.state.emitter=this,
this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,
this.emit("start")),this},brush:function(){return this.emit("brush"),
this},end:function(){return 0===--this.active&&(delete this.state.emitter,
this.emit("end")),this},emit:function(type){customEvent(new BrushEvent(brush,type,dim.output(this.state.selection)),listeners.apply,listeners,[type,this.that,this.args]);
}},brush.extent=function(_){return arguments.length?(extent="function"==typeof _?_:constant$11([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),
brush):extent},brush.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$11(!!_),
brush):filter},brush.handleSize=function(_){return arguments.length?(handleSize=+_,
brush):handleSize},brush.on=function(){var value=listeners.on.apply(listeners,arguments);
return value===listeners?brush:value},brush}function compareValue(compare){
return function(a,b){return compare(a.source.value+a.target.value,b.source.value+b.target.value);
}}function defaultSource(d){return d.source}function defaultTarget(d){
return d.target}function defaultRadius$1(d){return d.radius}function defaultStartAngle(d){
return d.startAngle}function defaultEndAngle(d){return d.endAngle;
}function Adder(){this.reset()}function add$1(adder,a,b){var x=adder.s=a+b,bv=x-a,av=x-bv;
adder.t=a-av+(b-bv)}function acos(x){return x>1?0:x<-1?pi$4:Math.acos(x);
}function asin$1(x){return x>1?halfPi$3:x<-1?-halfPi$3:Math.asin(x);
}function haversin(x){return(x=sin$1(x/2))*x}function noop$2(){}
function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream);
}function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;
for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);
stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;
for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);
stream.polygonEnd()}function areaRingStart(){areaStream.point=areaPointFirst;
}function areaRingEnd(){areaPoint(lambda00,phi00)}function areaPointFirst(lambda,phi){
areaStream.point=areaPoint,lambda00=lambda,phi00=phi,lambda*=radians,
phi*=radians,lambda0=lambda,cosPhi0=cos$1(phi=phi/2+quarterPi),
sinPhi0=sin$1(phi)}function areaPoint(lambda,phi){lambda*=radians,
phi*=radians,phi=phi/2+quarterPi;var dLambda=lambda-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos$1(phi),sinPhi=sin$1(phi),k=sinPhi0*sinPhi,u=cosPhi0*cosPhi+k*cos$1(adLambda),v=k*sdLambda*sin$1(adLambda);
areaRingSum.add(atan2(v,u)),lambda0=lambda,cosPhi0=cosPhi,sinPhi0=sinPhi;
}function spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin$1(cartesian[2])];
}function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos$1(phi);
return[cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi)]}
function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2];
}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]];
}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2];
}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k];
}function cartesianNormalizeInPlace(d){var l=sqrt$1(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);
d[0]/=l,d[1]/=l,d[2]/=l}function boundsPoint(lambda,phi){ranges.push(range$1=[lambda0$1=lambda,lambda1=lambda]),
phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)}function linePoint(lambda,phi){
var p=cartesian([lambda*radians,phi*radians]);if(p0){var normal=cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=cartesianCross(equatorial,normal);
cartesianNormalizeInPlace(inflection),inflection=spherical(inflection);
var phii,delta=lambda-lambda2,sign$$1=delta>0?1:-1,lambdai=inflection[0]*degrees$1*sign$$1,antimeridian=abs(delta)>180;
antimeridian^(sign$$1*lambda2<lambdai&&lambdai<sign$$1*lambda)?(phii=inflection[1]*degrees$1,
phii>phi1&&(phi1=phii)):(lambdai=(lambdai+360)%360-180,antimeridian^(sign$$1*lambda2<lambdai&&lambdai<sign$$1*lambda)?(phii=-inflection[1]*degrees$1,
phii<phi0&&(phi0=phii)):(phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi))),
antimeridian?lambda<lambda2?angle(lambda0$1,lambda)>angle(lambda0$1,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=lambda):lambda1>=lambda0$1?(lambda<lambda0$1&&(lambda0$1=lambda),
lambda>lambda1&&(lambda1=lambda)):lambda>lambda2?angle(lambda0$1,lambda)>angle(lambda0$1,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=lambda);
}else boundsPoint(lambda,phi);p0=p,lambda2=lambda}function boundsLineStart(){
boundsStream.point=linePoint}function boundsLineEnd(){range$1[0]=lambda0$1,
range$1[1]=lambda1,boundsStream.point=boundsPoint,p0=null}function boundsRingPoint(lambda,phi){
if(p0){var delta=lambda-lambda2;deltaSum.add(abs(delta)>180?delta+(delta>0?360:-360):delta);
}else lambda00$1=lambda,phi00$1=phi;areaStream.point(lambda,phi),
linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart();
}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),
areaStream.lineEnd(),abs(deltaSum)>epsilon$4&&(lambda0$1=-(lambda1=180)),
range$1[0]=lambda0$1,range$1[1]=lambda1,p0=null}function angle(lambda0,lambda1){
return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){
return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x;
}function centroidPoint(lambda,phi){lambda*=radians,phi*=radians;
var cosPhi=cos$1(phi);centroidPointCartesian(cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi));
}function centroidPointCartesian(x,y,z){++W0,X0+=(x-X0)/W0,Y0+=(y-Y0)/W0,
Z0+=(z-Z0)/W0}function centroidLineStart(){centroidStream.point=centroidLinePointFirst;
}function centroidLinePointFirst(lambda,phi){lambda*=radians,
phi*=radians;var cosPhi=cos$1(phi);x0=cosPhi*cos$1(lambda),y0=cosPhi*sin$1(lambda),
z0=sin$1(phi),centroidStream.point=centroidLinePoint,centroidPointCartesian(x0,y0,z0);
}function centroidLinePoint(lambda,phi){lambda*=radians,phi*=radians;
var cosPhi=cos$1(phi),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),w=atan2(sqrt$1((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);
W1+=w,X1+=w*(x0+(x0=x)),Y1+=w*(y0+(y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(x0,y0,z0);
}function centroidLineEnd(){centroidStream.point=centroidPoint;
}function centroidRingStart(){centroidStream.point=centroidRingPointFirst;
}function centroidRingEnd(){centroidRingPoint(lambda00$2,phi00$2),
centroidStream.point=centroidPoint}function centroidRingPointFirst(lambda,phi){
lambda00$2=lambda,phi00$2=phi,lambda*=radians,phi*=radians,centroidStream.point=centroidRingPoint;
var cosPhi=cos$1(phi);x0=cosPhi*cos$1(lambda),y0=cosPhi*sin$1(lambda),
z0=sin$1(phi),centroidPointCartesian(x0,y0,z0)}function centroidRingPoint(lambda,phi){
lambda*=radians,phi*=radians;var cosPhi=cos$1(phi),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=sqrt$1(cx*cx+cy*cy+cz*cz),u=x0*x+y0*y+z0*z,v=m&&-acos(u)/m,w=atan2(m,u);
X2+=v*cx,Y2+=v*cy,Z2+=v*cz,W1+=w,X1+=w*(x0+(x0=x)),Y1+=w*(y0+(y0=y)),
Z1+=w*(z0+(z0=z)),centroidPointCartesian(x0,y0,z0)}function rotationIdentity(lambda,phi){
return[lambda>pi$4?lambda-tau$4:lambda<-pi$4?lambda+tau$4:lambda,phi];
}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=tau$4)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity;
}function forwardRotationLambda(deltaLambda){return function(lambda,phi){
return lambda+=deltaLambda,[lambda>pi$4?lambda-tau$4:lambda<-pi$4?lambda+tau$4:lambda,phi];
}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);
return rotation.invert=forwardRotationLambda(-deltaLambda),rotation;
}function rotationPhiGamma(deltaPhi,deltaGamma){function rotation(lambda,phi){
var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;
return[atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin$1(k*cosDeltaGamma+y*sinDeltaGamma)];
}var cosDeltaPhi=cos$1(deltaPhi),sinDeltaPhi=sin$1(deltaPhi),cosDeltaGamma=cos$1(deltaGamma),sinDeltaGamma=sin$1(deltaGamma);
return rotation.invert=function(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;
return[atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin$1(k*cosDeltaPhi-x*sinDeltaPhi)];
},rotation}function circleStream(stream,radius,delta,direction,t0,t1){
if(delta){var cosRadius=cos$1(radius),sinRadius=sin$1(radius),step=direction*delta;
null==t0?(t0=radius+direction*tau$4,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),
t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*tau$4));
for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=spherical([cosRadius,-sinRadius*cos$1(t),-sinRadius*sin$1(t)]),
stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){
point=cartesian(point),point[0]-=cosRadius,cartesianNormalizeInPlace(point);
var radius=acos(-point[1]);return((-point[2]<0?-radius:radius)+tau$4-epsilon$4)%tau$4;
}function Intersection(point,points,other,entry){this.x=point,
this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null;
}function link$1(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],
b.p=a,a=b;a.n=b=array[0],b.p=a}}function clipExtent(x0,y0,x1,y1){
function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){
var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do stream.point(0===a||3===a?x0:x1,a>1?y1:y0);while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1]);
}function corner(p,direction){return abs(p[0]-x0)<epsilon$4?direction>0?0:3:abs(p[0]-x1)<epsilon$4?direction>0?2:1:abs(p[1]-y0)<epsilon$4?direction>0?1:0:direction>0?3:2;
}function compareIntersection(a,b){return comparePoint(a.x,b.x);
}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);
return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0];
}return function(stream){function point(x,y){visible(x,y)&&activeStream.point(x,y);
}function polygonInside(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,
a1=b1,point=ring[j],b0=point[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;
return winding}function polygonStart(){activeStream=bufferStream,
segments=[],polygon=[],clean=!0}function polygonEnd(){var startInside=polygonInside(),cleanInside=clean&&startInside,visible=(segments=merge(segments)).length;
(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),
interpolate(null,null,1,stream),stream.lineEnd()),visible&&clipPolygon(segments,compareIntersection,startInside,interpolate,stream),
stream.polygonEnd()),activeStream=stream,segments=polygon=ring=null;
}function lineStart(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]),
first=!0,v_=!1,x_=y_=NaN}function lineEnd(){segments&&(linePoint(x__,y__),
v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result())),
clipStream.point=point,v_&&activeStream.lineEnd()}function linePoint(x,y){
var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,
v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{
var a=[x_=Math.max(clipMin,Math.min(clipMax,x_)),y_=Math.max(clipMin,Math.min(clipMax,y_))],b=[x=Math.max(clipMin,Math.min(clipMax,x)),y=Math.max(clipMin,Math.min(clipMax,y))];
clipLine(a,b,x0,y0,x1,y1)?(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),
activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1):v&&(activeStream.lineStart(),
activeStream.point(x,y),clean=!1)}x_=x,y_=y,v_=v}var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=clipBuffer(),clipStream={
point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:polygonStart,
polygonEnd:polygonEnd};return clipStream}}function lengthLineStart(){
lengthStream.point=lengthPointFirst,lengthStream.lineEnd=lengthLineEnd;
}function lengthLineEnd(){lengthStream.point=lengthStream.lineEnd=noop$2;
}function lengthPointFirst(lambda,phi){lambda*=radians,phi*=radians,
lambda0$2=lambda,sinPhi0$1=sin$1(phi),cosPhi0$1=cos$1(phi),lengthStream.point=lengthPoint;
}function lengthPoint(lambda,phi){lambda*=radians,phi*=radians;
var sinPhi=sin$1(phi),cosPhi=cos$1(phi),delta=abs(lambda-lambda0$2),cosDelta=cos$1(delta),sinDelta=sin$1(delta),x=cosPhi*sinDelta,y=cosPhi0$1*sinPhi-sinPhi0$1*cosPhi*cosDelta,z=sinPhi0$1*sinPhi+cosPhi0$1*cosPhi*cosDelta;
lengthSum.add(atan2(sqrt$1(x*x+y*y),z)),lambda0$2=lambda,sinPhi0$1=sinPhi,
cosPhi0$1=cosPhi}function graticuleX(y0,y1,dy){var y=range(y0,y1-epsilon$4,dy).concat(y1);
return function(x){return y.map(function(y){return[x,y]})}}function graticuleY(x0,x1,dx){
var x=range(x0,x1-epsilon$4,dx).concat(x1);return function(y){
return x.map(function(x){return[x,y]})}}function graticule(){
function graticule(){return{type:"MultiLineString",coordinates:lines()
}}function lines(){return range(ceil(X0/DX)*DX,X1,DX).map(X).concat(range(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(range(ceil(x0/dx)*dx,x1,dx).filter(function(x){
return abs(x%DX)>epsilon$4}).map(x)).concat(range(ceil(y0/dy)*dy,y1,dy).filter(function(y){
return abs(y%DY)>epsilon$4}).map(y))}var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;
return graticule.lines=function(){return lines().map(function(coordinates){
return{type:"LineString",coordinates:coordinates}})},graticule.outline=function(){
return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]
}},graticule.extent=function(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor();
},graticule.extentMajor=function(_){return arguments.length?(X0=+_[0][0],
X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),
Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]];
},graticule.extentMinor=function(_){return arguments.length?(x0=+_[0][0],
x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),
y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]];
},graticule.step=function(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor();
},graticule.stepMajor=function(_){return arguments.length?(DX=+_[0],
DY=+_[1],graticule):[DX,DY]},graticule.stepMinor=function(_){
return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy];
},graticule.precision=function(_){return arguments.length?(precision=+_,
x=graticuleX(y0,y1,90),y=graticuleY(x0,x1,precision),X=graticuleX(Y0,Y1,90),
Y=graticuleY(X0,X1,precision),graticule):precision},graticule.extentMajor([[-180,-90+epsilon$4],[180,90-epsilon$4]]).extentMinor([[-180,-80-epsilon$4],[180,80+epsilon$4]]);
}function graticule10(){return graticule()()}function areaRingStart$1(){
areaStream$1.point=areaPointFirst$1}function areaPointFirst$1(x,y){
areaStream$1.point=areaPoint$1,x00=x0$1=x,y00=y0$1=y}function areaPoint$1(x,y){
areaRingSum$1.add(y0$1*x-x0$1*y),x0$1=x,y0$1=y}function areaRingEnd$1(){
areaPoint$1(x00,y00)}function boundsPoint$1(x,y){x<x0$2&&(x0$2=x),
x>x1&&(x1=x),y<y0$2&&(y0$2=y),y>y1&&(y1=y)}function centroidPoint$1(x,y){
X0$1+=x,Y0$1+=y,++Z0$1}function centroidLineStart$1(){centroidStream$1.point=centroidPointFirstLine;
}function centroidPointFirstLine(x,y){centroidStream$1.point=centroidPointLine,
centroidPoint$1(x0$3=x,y0$3=y)}function centroidPointLine(x,y){
var dx=x-x0$3,dy=y-y0$3,z=sqrt$1(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2,
Y1$1+=z*(y0$3+y)/2,Z1$1+=z,centroidPoint$1(x0$3=x,y0$3=y)}function centroidLineEnd$1(){
centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){
centroidStream$1.point=centroidPointFirstRing}function centroidRingEnd$1(){
centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(x,y){
centroidStream$1.point=centroidPointRing,centroidPoint$1(x00$1=x0$3=x,y00$1=y0$3=y);
}function centroidPointRing(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt$1(dx*dx+dy*dy);
X1$1+=z*(x0$3+x)/2,Y1$1+=z*(y0$3+y)/2,Z1$1+=z,z=y0$3*x-x0$3*y,
X2$1+=z*(x0$3+x),Y2$1+=z*(y0$3+y),Z2$1+=3*z,centroidPoint$1(x0$3=x,y0$3=y);
}function PathContext(context){this._context=context}function PathString(){
this._string=[]}function circle$2(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z";
}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){
return((a=a.x)[0]<0?a[1]-halfPi$3-epsilon$4:halfPi$3-a[1])-((b=b.x)[0]<0?b[1]-halfPi$3-epsilon$4:halfPi$3-b[1]);
}function clipAntimeridianLine(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;
return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){
var sign1=lambda1>0?pi$4:-pi$4,delta=abs(lambda1-lambda0);abs(delta-pi$4)<epsilon$4?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi$3:-halfPi$3),
stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),
stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=pi$4&&(abs(lambda0-sign0)<epsilon$4&&(lambda0-=sign0*epsilon$4),
abs(lambda1-sign1)<epsilon$4&&(lambda1-=sign1*epsilon$4),phi0=clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1),
stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),
stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),
sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN;
},clean:function(){return 2-clean}}}function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){
var cosPhi0,cosPhi1,sinLambda0Lambda1=sin$1(lambda0-lambda1);return abs(sinLambda0Lambda1)>epsilon$4?atan((sin$1(phi0)*(cosPhi1=cos$1(phi1))*sin$1(lambda1)-sin$1(phi1)*(cosPhi0=cos$1(phi0))*sin$1(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2;
}function clipAntimeridianInterpolate(from,to,direction,stream){
var phi;if(null==from)phi=direction*halfPi$3,stream.point(-pi$4,phi),
stream.point(0,phi),stream.point(pi$4,phi),stream.point(pi$4,0),
stream.point(pi$4,-phi),stream.point(0,-phi),stream.point(-pi$4,-phi),
stream.point(-pi$4,0),stream.point(-pi$4,phi);else if(abs(from[0]-to[0])>epsilon$4){
var lambda=from[0]<to[0]?pi$4:-pi$4;phi=direction*lambda/2,stream.point(-lambda,phi),
stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1]);
}function transformer(methods){return function(stream){var s=new TransformStream;
for(var key in methods)s[key]=methods[key];return s.stream=stream,
s}}function TransformStream(){}function fitExtent(projection,extent,object){
var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],clip=projection.clipExtent&&projection.clipExtent();
projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),
geoStream(object,projection.stream(boundsStream$1));var b=boundsStream$1.result(),k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;
return null!=clip&&projection.clipExtent(clip),projection.scale(150*k).translate([x,y]);
}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object);
}function resampleNone(project){return transformer({point:function(x,y){
x=project(x,y),this.stream.point(x[0],x[1])}})}function resample$1(project,delta2){
function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){
var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){
var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt$1(a*a+b*b+c*c),phi2=asin$1(c/=m),lambda2=abs(abs(c)-1)<epsilon$4||abs(lambda0-lambda1)<epsilon$4?(lambda0+lambda1)/2:atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;
(dz*dz/d2>delta2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),
stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream));
}}return function(stream){function point(x,y){x=project(x,y),
stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,
stream.lineStart()}function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);
resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),
stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,
stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,
resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){
linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,
resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,maxDepth,stream),
resampleStream.lineEnd=lineEnd,lineEnd()}var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={
point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){
stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){
stream.polygonEnd(),resampleStream.lineStart=lineStart}};return resampleStream;
}}function projection(project){return projectionMutator(function(){
return project})()}function projectionMutator(projectAt){function projection(point){
return point=projectRotate(point[0]*radians,point[1]*radians),
[point[0]*k+dx,dy-point[1]*k]}function invert(point){return point=projectRotate.invert((point[0]-dx)/k,(dy-point[1])/k),
point&&[point[0]*degrees$1,point[1]*degrees$1]}function projectTransform(x,y){
return x=project(x,y),[x[0]*k+dx,dy-x[1]*k]}function recenter(){
projectRotate=compose(rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma),project);
var center=project(lambda,phi);return dx=x-center[0]*k,dy=y+center[1]*k,
reset()}function reset(){return cache=cacheStream=null,projection;
}var project,dx,dy,rotate,projectRotate,y0,x1,y1,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,theta=null,preclip=clipAntimeridian,x0=null,postclip=identity$7,delta2=.5,projectResample=resample(projectTransform,delta2);
return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(preclip(rotate,projectResample(postclip(cacheStream=stream))));
},projection.clipAngle=function(_){return arguments.length?(preclip=+_?clipCircle(theta=_*radians,6*radians):(theta=null,
clipAntimeridian),reset()):theta*degrees$1},projection.clipExtent=function(_){
return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity$7):clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),
reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){
return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){
return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){
return arguments.length?(lambda=_[0]%360*radians,phi=_[1]%360*radians,
recenter()):[lambda*degrees$1,phi*degrees$1]},projection.rotate=function(_){
return arguments.length?(deltaLambda=_[0]%360*radians,deltaPhi=_[1]%360*radians,
deltaGamma=_.length>2?_[2]%360*radians:0,recenter()):[deltaLambda*degrees$1,deltaPhi*degrees$1,deltaGamma*degrees$1];
},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),
reset()):sqrt$1(delta2)},projection.fitExtent=function(extent,object){
return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){
return fitSize(projection,size,object)},function(){return project=projectAt.apply(this,arguments),
projection.invert=project.invert&&invert,recenter()}}function conicProjection(projectAt){
var phi0=0,phi1=pi$4/3,m=projectionMutator(projectAt),p=m(phi0,phi1);
return p.parallels=function(_){return arguments.length?m(phi0=_[0]*radians,phi1=_[1]*radians):[phi0*degrees$1,phi1*degrees$1];
},p}function cylindricalEqualAreaRaw(phi0){function forward(lambda,phi){
return[lambda*cosPhi0,sin$1(phi)/cosPhi0]}var cosPhi0=cos$1(phi0);
return forward.invert=function(x,y){return[x/cosPhi0,asin$1(y*cosPhi0)];
},forward}function conicEqualAreaRaw(y0,y1){function project(x,y){
var r=sqrt$1(c-2*n*sin$1(y))/n;return[r*sin$1(x*=n),r0-r*cos$1(x)];
}var sy0=sin$1(y0),n=(sy0+sin$1(y1))/2;if(abs(n)<epsilon$4)return cylindricalEqualAreaRaw(y0);
var c=1+sy0*(2*n-sy0),r0=sqrt$1(c)/n;return project.invert=function(x,y){
var r0y=r0-y;return[atan2(x,abs(r0y))/n*sign$1(r0y),asin$1((c-(x*x+r0y*r0y)*n*n)/(2*n))];
},project}function multiplex(streams){var n=streams.length;return{
point:function(x,y){for(var i=-1;++i<n;)streams[i].point(x,y);
},sphere:function(){for(var i=-1;++i<n;)streams[i].sphere()},
lineStart:function(){for(var i=-1;++i<n;)streams[i].lineStart();
},lineEnd:function(){for(var i=-1;++i<n;)streams[i].lineEnd();
},polygonStart:function(){for(var i=-1;++i<n;)streams[i].polygonStart();
},polygonEnd:function(){for(var i=-1;++i<n;)streams[i].polygonEnd();
}}}function azimuthalRaw(scale){return function(x,y){var cx=cos$1(x),cy=cos$1(y),k=scale(cx*cy);
return[k*cy*sin$1(x),k*sin$1(y)]}}function azimuthalInvert(angle){
return function(x,y){var z=sqrt$1(x*x+y*y),c=angle(z),sc=sin$1(c),cc=cos$1(c);
return[atan2(x*sc,z*cc),asin$1(z&&y*sc/z)]}}function mercatorRaw(lambda,phi){
return[lambda,log$1(tan((halfPi$3+phi)/2))]}function mercatorProjection(project){
var clipAuto,m=projection(project),scale=m.scale,translate=m.translate,clipExtent=m.clipExtent;
return m.scale=function(_){return arguments.length?(scale(_),
clipAuto&&m.clipExtent(null),m):scale()},m.translate=function(_){
return arguments.length?(translate(_),clipAuto&&m.clipExtent(null),
m):translate()},m.clipExtent=function(_){if(!arguments.length)return clipAuto?null:clipExtent();
if(clipAuto=null==_){var k=pi$4*scale(),t=translate();_=[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]];
}return clipExtent(_),m},m.clipExtent(null)}function tany(y){
return tan((halfPi$3+y)/2)}function conicConformalRaw(y0,y1){
function project(x,y){f>0?y<-halfPi$3+epsilon$4&&(y=-halfPi$3+epsilon$4):y>halfPi$3-epsilon$4&&(y=halfPi$3-epsilon$4);
var r=f/pow$1(tany(y),n);return[r*sin$1(n*x),f-r*cos$1(n*x)]}
var cy0=cos$1(y0),n=y0===y1?sin$1(y0):log$1(cy0/cos$1(y1))/log$1(tany(y1)/tany(y0)),f=cy0*pow$1(tany(y0),n)/n;
return n?(project.invert=function(x,y){var fy=f-y,r=sign$1(n)*sqrt$1(x*x+fy*fy);
return[atan2(x,abs(fy))/n*sign$1(fy),2*atan(pow$1(f/r,1/n))-halfPi$3];
},project):mercatorRaw}function equirectangularRaw(lambda,phi){
return[lambda,phi]}function conicEquidistantRaw(y0,y1){function project(x,y){
var gy=g-y,nx=n*x;return[gy*sin$1(nx),g-gy*cos$1(nx)]}var cy0=cos$1(y0),n=y0===y1?sin$1(y0):(cy0-cos$1(y1))/(y1-y0),g=cy0/n+y0;
return abs(n)<epsilon$4?equirectangularRaw:(project.invert=function(x,y){
var gy=g-y;return[atan2(x,abs(gy))/n*sign$1(gy),g-sign$1(n)*sqrt$1(x*x+gy*gy)];
},project)}function gnomonicRaw(x,y){var cy=cos$1(y),k=cos$1(x)*cy;
return[cy*sin$1(x)/k,sin$1(y)/k]}function scaleTranslate(kx,ky,tx,ty){
return 1===kx&&1===ky&&0===tx&&0===ty?identity$7:transformer({
point:function(x,y){this.stream.point(x*kx+tx,y*ky+ty)}})}function orthographicRaw(x,y){
return[cos$1(y)*sin$1(x),sin$1(y)]}function stereographicRaw(x,y){
var cy=cos$1(y),k=1+cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k];
}function transverseMercatorRaw(lambda,phi){return[log$1(tan((halfPi$3+phi)/2)),-lambda];
}var version="4.4.0",ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN;
},bisector=function(compare){return 1===compare.length&&(compare=ascendingComparator(compare)),
{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){
var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo;
},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){
var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo;
}}},ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left,descending=function(a,b){
return b<a?-1:b>a?1:b>=a?0:NaN},number=function(x){return null===x?NaN:+x;
},variance=function(array,f){var a,d,n=array.length,m=0,s=0,i=-1,j=0;
if(null==f)for(;++i<n;)isNaN(a=number(array[i]))||(d=a-m,m+=d/++j,
s+=d*(a-m));else for(;++i<n;)isNaN(a=number(f(array[i],i,array)))||(d=a-m,
m+=d/++j,s+=d*(a-m));if(j>1)return s/(j-1)},deviation=function(array,f){
var v=variance(array,f);return v?Math.sqrt(v):v},extent=function(array,f){
var a,b,c,i=-1,n=array.length;if(null==f){for(;++i<n;)if(null!=(b=array[i])&&b>=b){
a=c=b;break}for(;++i<n;)null!=(b=array[i])&&(a>b&&(a=b),c<b&&(c=b));
}else{for(;++i<n;)if(null!=(b=f(array[i],i,array))&&b>=b){a=c=b;
break}for(;++i<n;)null!=(b=f(array[i],i,array))&&(a>b&&(a=b),
c<b&&(c=b))}return[a,c]},array=Array.prototype,slice=array.slice,map=array.map,constant$1=function(x){
return function(){return x}},identity=function(x){return x},range=function(start,stop,step){
start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,
start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;
return range},e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),ticks=function(start,stop,count){
var step=tickStep(start,stop,count);return range(Math.ceil(start/step)*step,Math.floor(stop/step)*step+step/2,step);
},sturges=function(values){return Math.ceil(Math.log(values.length)/Math.LN2)+1;
},histogram=function(){function histogram(data){var i,x,n=data.length,values=new Array(n);
for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);
Array.isArray(tz)||(tz=ticks(x0,x1,tz));for(var m=tz.length;tz[0]<=x0;)tz.shift(),
--m;for(;tz[m-1]>=x1;)tz.pop(),--m;var bin,bins=new Array(m+1);
for(i=0;i<=m;++i)bin=bins[i]=[],bin.x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;
for(i=0;i<n;++i)x=values[i],x0<=x&&x<=x1&&bins[bisectRight(tz,x,0,m)].push(data[i]);
return bins}var value=identity,domain=extent,threshold=sturges;
return histogram.value=function(_){return arguments.length?(value="function"==typeof _?_:constant$1(_),
histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant$1([_[0],_[1]]),
histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:constant$1(Array.isArray(_)?slice.call(_):_),
histogram):threshold},histogram},threshold=function(array,p,f){
if(null==f&&(f=number),n=array.length){if((p=+p)<=0||n<2)return+f(array[0],0,array);
if(p>=1)return+f(array[n-1],n-1,array);var n,h=(n-1)*p,i=Math.floor(h),a=+f(array[i],i,array),b=+f(array[i+1],i+1,array);
return a+(b-a)*(h-i)}},freedmanDiaconis=function(values,min,max){
return values=map.call(values,number).sort(ascending),Math.ceil((max-min)/(2*(threshold(values,.75)-threshold(values,.25))*Math.pow(values.length,-1/3)));
},scott=function(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(values.length,-1/3)));
},max=function(array,f){var a,b,i=-1,n=array.length;if(null==f){
for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&b>a&&(a=b);
}else{for(;++i<n;)if(null!=(b=f(array[i],i,array))&&b>=b){a=b;
break}for(;++i<n;)null!=(b=f(array[i],i,array))&&b>a&&(a=b)}return a;
},mean=function(array,f){var a,s=0,n=array.length,i=-1,j=n;if(null==f)for(;++i<n;)isNaN(a=number(array[i]))?--j:s+=a;else for(;++i<n;)isNaN(a=number(f(array[i],i,array)))?--j:s+=a;
if(j)return s/j},median=function(array,f){var a,numbers=[],n=array.length,i=-1;
if(null==f)for(;++i<n;)isNaN(a=number(array[i]))||numbers.push(a);else for(;++i<n;)isNaN(a=number(f(array[i],i,array)))||numbers.push(a);
return threshold(numbers.sort(ascending),.5)},merge=function(arrays){
for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;
for(merged=new Array(j);--n>=0;)for(array=arrays[n],m=array.length;--m>=0;)merged[--j]=array[m];
return merged},min=function(array,f){var a,b,i=-1,n=array.length;
if(null==f){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=b;break;
}for(;++i<n;)null!=(b=array[i])&&a>b&&(a=b)}else{for(;++i<n;)if(null!=(b=f(array[i],i,array))&&b>=b){
a=b;break}for(;++i<n;)null!=(b=f(array[i],i,array))&&a>b&&(a=b);
}return a},pairs=function(array){for(var i=0,n=array.length-1,p=array[0],pairs=new Array(n<0?0:n);i<n;)pairs[i]=[p,p=array[++i]];
return pairs},permute=function(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];
return permutes},scan=function(array,compare){if(n=array.length){
var n,xi,i=0,j=0,xj=array[j];for(compare||(compare=ascending);++i<n;)(compare(xi=array[i],xj)<0||0!==compare(xj,xj))&&(xj=xi,
j=i);return 0===compare(xj,xj)?j:void 0}},shuffle=function(array,i0,i1){
for(var t,i,m=(null==i1?array.length:i1)-(i0=null==i0?0:+i0);m;)i=Math.random()*m--|0,
t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array;
},sum=function(array,f){var a,s=0,n=array.length,i=-1;if(null==f)for(;++i<n;)(a=+array[i])&&(s+=a);else for(;++i<n;)(a=+f(array[i],i,array))&&(s+=a);
return s},transpose=function(matrix){if(!(n=matrix.length))return[];
for(var i=-1,m=min(matrix,length),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];
return transpose},zip=function(){return transpose(arguments)},prefix="$";
Map.prototype=map$1.prototype={constructor:Map,has:function(key){
return prefix+key in this},get:function(key){return this[prefix+key];
},set:function(key,value){return this[prefix+key]=value,this},
remove:function(key){var property=prefix+key;return property in this&&delete this[property];
},clear:function(){for(var property in this)property[0]===prefix&&delete this[property];
},keys:function(){var keys=[];for(var property in this)property[0]===prefix&&keys.push(property.slice(1));
return keys},values:function(){var values=[];for(var property in this)property[0]===prefix&&values.push(this[property]);
return values},entries:function(){var entries=[];for(var property in this)property[0]===prefix&&entries.push({
key:property.slice(1),value:this[property]});return entries},
size:function(){var size=0;for(var property in this)property[0]===prefix&&++size;
return size},empty:function(){for(var property in this)if(property[0]===prefix)return!1;
return!0},each:function(f){for(var property in this)property[0]===prefix&&f(this[property],property.slice(1),this);
}};var nest=function(){function apply(array,depth,createResult,setResult){
if(depth>=keys.length)return null!=rollup?rollup(array):null!=sortValues?array.sort(sortValues):array;
for(var keyValue,value,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=map$1(),result=createResult();++i<n;)(values=valuesByKey.get(keyValue=key(value=array[i])+""))?values.push(value):valuesByKey.set(keyValue,[value]);
return valuesByKey.each(function(values,key){setResult(result,key,apply(values,depth,createResult,setResult));
}),result}function entries(map,depth){if(++depth>keys.length)return map;
var array,sortKey=sortKeys[depth-1];return null!=rollup&&depth>=keys.length?array=map.entries():(array=[],
map.each(function(v,k){array.push({key:k,values:entries(v,depth)
})})),null!=sortKey?array.sort(function(a,b){return sortKey(a.key,b.key);
}):array}var sortValues,rollup,nest,keys=[],sortKeys=[];return nest={
object:function(array){return apply(array,0,createObject,setObject);
},map:function(array){return apply(array,0,createMap,setMap)},
entries:function(array){return entries(apply(array,0,createMap,setMap),0);
},key:function(d){return keys.push(d),nest},sortKeys:function(order){
return sortKeys[keys.length-1]=order,nest},sortValues:function(order){
return sortValues=order,nest},rollup:function(f){return rollup=f,
nest}}},proto=map$1.prototype;Set.prototype=set.prototype={constructor:Set,
has:proto.has,add:function(value){return value+="",this[prefix+value]=value,
this},remove:proto.remove,clear:proto.clear,values:proto.keys,
size:proto.size,empty:proto.empty,each:proto.each};var keys=function(map){
var keys=[];for(var key in map)keys.push(key);return keys},values=function(map){
var values=[];for(var key in map)values.push(map[key]);return values;
},entries=function(map){var entries=[];for(var key in map)entries.push({
key:key,value:map[key]});return entries},uniform=function(min,max){
return min=null==min?0:+min,max=null==max?1:+max,1===arguments.length?(max=min,
min=0):max-=min,function(){return Math.random()*max+min}},normal=function(mu,sigma){
var x,r;return mu=null==mu?0:+mu,sigma=null==sigma?1:+sigma,function(){
var y;if(null!=x)y=x,x=null;else do x=2*Math.random()-1,y=2*Math.random()-1,
r=x*x+y*y;while(!r||r>1);return mu+sigma*y*Math.sqrt(-2*Math.log(r)/r);
}},logNormal=function(){var randomNormal=normal.apply(this,arguments);
return function(){return Math.exp(randomNormal())}},irwinHall=function(n){
return function(){for(var sum=0,i=0;i<n;++i)sum+=Math.random();
return sum}},bates=function(n){var randomIrwinHall=irwinHall(n);
return function(){return randomIrwinHall()/n}},exponential=function(lambda){
return function(){return-Math.log(1-Math.random())/lambda}},exponent=3,polyIn=function custom(e){
function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,
polyIn}(exponent),polyOut=function custom(e){function polyOut(t){
return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,
polyOut}(exponent),polyInOut=function custom(e){function polyInOut(t){
return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,
polyInOut.exponent=custom,polyInOut}(exponent),pi=Math.PI,halfPi=pi/2,b1=4/11,b2=6/11,b3=8/11,b4=.75,b5=9/11,b6=10/11,b7=.9375,b8=21/22,b9=63/64,b0=1/b1/b1,overshoot=1.70158,backIn=function custom(s){
function backIn(t){return t*t*((s+1)*t-s)}return s=+s,backIn.overshoot=custom,
backIn}(overshoot),backOut=function custom(s){function backOut(t){
return--t*t*((s+1)*t+s)+1}return s=+s,backOut.overshoot=custom,
backOut}(overshoot),backInOut=function custom(s){function backInOut(t){
return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,
backInOut.overshoot=custom,backInOut}(overshoot),tau=2*Math.PI,amplitude=1,period=.3,elasticIn=function custom(a,p){
function elasticIn(t){return a*Math.pow(2,10*--t)*Math.sin((s-t)/p);
}var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);return elasticIn.amplitude=function(a){
return custom(a,p*tau)},elasticIn.period=function(p){return custom(a,p);
},elasticIn}(amplitude,period),elasticOut=function custom(a,p){
function elasticOut(t){return 1-a*Math.pow(2,-10*(t=+t))*Math.sin((t+s)/p);
}var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);return elasticOut.amplitude=function(a){
return custom(a,p*tau)},elasticOut.period=function(p){return custom(a,p);
},elasticOut}(amplitude,period),elasticInOut=function custom(a,p){
function elasticInOut(t){return((t=2*t-1)<0?a*Math.pow(2,10*t)*Math.sin((s-t)/p):2-a*Math.pow(2,-10*t)*Math.sin((s+t)/p))/2;
}var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);return elasticInOut.amplitude=function(a){
return custom(a,p*tau)},elasticInOut.period=function(p){return custom(a,p);
},elasticInOut}(amplitude,period),area=function(polygon){for(var a,i=-1,n=polygon.length,b=polygon[n-1],area=0;++i<n;)a=b,
b=polygon[i],area+=a[1]*b[0]-a[0]*b[1];return area/2},centroid=function(polygon){
for(var a,c,i=-1,n=polygon.length,x=0,y=0,b=polygon[n-1],k=0;++i<n;)a=b,
b=polygon[i],k+=c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;
return k*=3,[x/k,y/k]},cross=function(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0]);
},hull=function(points){if((n=points.length)<3)return null;var i,n,sortedPoints=new Array(n),flippedPoints=new Array(n);
for(i=0;i<n;++i)sortedPoints[i]=[+points[i][0],+points[i][1],i];
for(sortedPoints.sort(lexicographicOrder),i=0;i<n;++i)flippedPoints[i]=[sortedPoints[i][0],-sortedPoints[i][1]];
var upperIndexes=computeUpperHullIndexes(sortedPoints),lowerIndexes=computeUpperHullIndexes(flippedPoints),skipLeft=lowerIndexes[0]===upperIndexes[0],skipRight=lowerIndexes[lowerIndexes.length-1]===upperIndexes[upperIndexes.length-1],hull=[];
for(i=upperIndexes.length-1;i>=0;--i)hull.push(points[sortedPoints[upperIndexes[i]][2]]);
for(i=+skipLeft;i<lowerIndexes.length-skipRight;++i)hull.push(points[sortedPoints[lowerIndexes[i]][2]]);
return hull},contains=function(polygon,point){for(var x1,y1,n=polygon.length,p=polygon[n-1],x=point[0],y=point[1],x0=p[0],y0=p[1],inside=!1,i=0;i<n;++i)p=polygon[i],
x1=p[0],y1=p[1],y1>y!=y0>y&&x<(x0-x1)*(y-y1)/(y0-y1)+x1&&(inside=!inside),
x0=x1,y0=y1;return inside},length$1=function(polygon){for(var xa,ya,i=-1,n=polygon.length,b=polygon[n-1],xb=b[0],yb=b[1],perimeter=0;++i<n;)xa=xb,
ya=yb,b=polygon[i],xb=b[0],yb=b[1],xa-=xb,ya-=yb,perimeter+=Math.sqrt(xa*xa+ya*ya);
return perimeter},pi$1=Math.PI,tau$1=2*pi$1,epsilon=1e-6,tauEpsilon=tau$1-epsilon;
Path.prototype=path.prototype={constructor:Path,moveTo:function(x,y){
this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y);
},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,
this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y);
},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y);
},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y);
},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;
var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;
if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>epsilon)if(Math.abs(y01*x21-y21*x01)>epsilon&&r){
var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi$1-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;
Math.abs(t01-1)>epsilon&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),
this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21);
}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){
x=+x,y=+y,r=+r;var dx=r*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;
if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>epsilon||Math.abs(this._y1-y0)>epsilon)&&(this._+="L"+x0+","+y0),
r&&(da>tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):(da<0&&(da=da%tau$1+tau$1),
this._+="A"+r+","+r+",0,"+ +(da>=pi$1)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))));
},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z";
},toString:function(){return this._}};var tree_add=function(d){
var x=+this._x.call(null,d),y=+this._y.call(null,d);return add(this.cover(x,y),x,y,d);
},tree_cover=function(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;
var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,
y1=(y0=Math.floor(y))+1;else{if(!(x0>x||x>x1||y0>y||y>y1))return this;
var parent,i,z=x1-x0,node=this._root;switch(i=(y<(y0+y1)/2)<<1|x<(x0+x1)/2){
case 0:do parent=new Array(4),parent[i]=node,node=parent;while(z*=2,
x1=x0+z,y1=y0+z,x>x1||y>y1);break;case 1:do parent=new Array(4),
parent[i]=node,node=parent;while(z*=2,x0=x1-z,y1=y0+z,x0>x||y>y1);
break;case 2:do parent=new Array(4),parent[i]=node,node=parent;while(z*=2,
x1=x0+z,y0=y1-z,x>x1||y0>y);break;case 3:do parent=new Array(4),
parent[i]=node,node=parent;while(z*=2,x0=x1-z,y0=y1-z,x0>x||y0>y);
}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,
this._y0=y0,this._x1=x1,this._y1=y1,this},tree_data=function(){
var data=[];return this.visit(function(node){if(!node.length)do data.push(node.data);while(node=node.next);
}),data},tree_extent=function(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]];
},Quad=function(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,
this.x1=x1,this.y1=y1},tree_find=function(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;
for(node&&quads.push(new Quad(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,
y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){
var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new Quad(node[3],xm,ym,x2,y2),new Quad(node[2],x1,ym,xm,y2),new Quad(node[1],xm,y1,x2,ym),new Quad(node[0],x1,y1,xm,ym)),
(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],
quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;
if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,
y3=y+d,data=node.data}}return data},tree_remove=function(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;
var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;
if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,
(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;
if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,
j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;
return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,
this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),
this):(this._root=next,this)},tree_root=function(){return this._root;
},tree_size=function(){var size=0;return this.visit(function(node){
if(!node.length)do++size;while(node=node.next)}),size},tree_visit=function(callback){
var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new Quad(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){
var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new Quad(child,xm,ym,x1,y1)),
(child=node[2])&&quads.push(new Quad(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new Quad(child,xm,y0,x1,ym)),
(child=node[0])&&quads.push(new Quad(child,x0,y0,xm,ym))}return this;
},tree_visitAfter=function(callback){var q,quads=[],next=[];for(this._root&&quads.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){
var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;
(child=node[0])&&quads.push(new Quad(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new Quad(child,xm,y0,x1,ym)),
(child=node[2])&&quads.push(new Quad(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new Quad(child,xm,ym,x1,y1));
}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);
return this},tree_x=function(_){return arguments.length?(this._x=_,
this):this._x},tree_y=function(_){return arguments.length?(this._y=_,
this):this._y},treeProto=quadtree.prototype=Quadtree.prototype;
treeProto.copy=function(){var nodes,child,copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;
if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),
copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({
source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy(child));
return copy},treeProto.add=tree_add,treeProto.addAll=addAll,treeProto.cover=tree_cover,
treeProto.data=tree_data,treeProto.extent=tree_extent,treeProto.find=tree_find,
treeProto.remove=tree_remove,treeProto.removeAll=removeAll,treeProto.root=tree_root,
treeProto.size=tree_size,treeProto.visit=tree_visit,treeProto.visitAfter=tree_visitAfter,
treeProto.x=tree_x,treeProto.y=tree_y;var slice$1=[].slice,noabort={};
Queue.prototype=queue.prototype={constructor:Queue,defer:function(callback){
if("function"!=typeof callback||this._call)throw new Error;if(null!=this._error)return this;
var t=slice$1.call(arguments,1);return t.push(callback),++this._waiting,
this._tasks.push(t),poke(this),this},abort:function(){return null==this._error&&abort(this,new Error("abort")),
this},await:function(callback){if("function"!=typeof callback||this._call)throw new Error;
return this._call=function(error,results){callback.apply(null,[error].concat(results));
},maybeNotify(this),this},awaitAll:function(callback){if("function"!=typeof callback||this._call)throw new Error;
return this._call=callback,maybeNotify(this),this}};var constant$2=function(x){
return function(){return x}},epsilon$1=1e-12,pi$2=Math.PI,halfPi$1=pi$2/2,tau$2=2*pi$2,arc=function(){
function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi$1,a1=endAngle.apply(this,arguments)-halfPi$1,da=Math.abs(a1-a0),cw=a1>a0;
if(context||(context=buffer=path()),r1<r0&&(r=r1,r1=r0,r0=r),
r1>epsilon$1)if(da>tau$2-epsilon$1)context.moveTo(r1*Math.cos(a0),r1*Math.sin(a0)),
context.arc(0,0,r1,a0,a1,!cw),r0>epsilon$1&&(context.moveTo(r0*Math.cos(a1),r0*Math.sin(a1)),
context.arc(0,0,r0,a1,a0,cw));else{var t0,t1,a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>epsilon$1&&(padRadius?+padRadius.apply(this,arguments):Math.sqrt(r0*r0+r1*r1)),rc=Math.min(Math.abs(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc;
if(rp>epsilon$1){var p0=asin(rp/r0*Math.sin(ap)),p1=asin(rp/r1*Math.sin(ap));
(da0-=2*p0)>epsilon$1?(p0*=cw?1:-1,a00+=p0,a10-=p0):(da0=0,a00=a10=(a0+a1)/2),
(da1-=2*p1)>epsilon$1?(p1*=cw?1:-1,a01+=p1,a11-=p1):(da1=0,a01=a11=(a0+a1)/2);
}var x01=r1*Math.cos(a01),y01=r1*Math.sin(a01),x10=r0*Math.cos(a10),y10=r0*Math.sin(a10);
if(rc>epsilon$1){var x11=r1*Math.cos(a11),y11=r1*Math.sin(a11),x00=r0*Math.cos(a00),y00=r0*Math.sin(a00);
if(da<pi$2){var oc=da0>epsilon$1?intersect(x01,y01,x00,y00,x11,y11,x10,y10):[x10,y10],ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/Math.sin(Math.acos((ax*bx+ay*by)/(Math.sqrt(ax*ax+ay*ay)*Math.sqrt(bx*bx+by*by)))/2),lc=Math.sqrt(oc[0]*oc[0]+oc[1]*oc[1]);
rc0=Math.min(rc,(r0-lc)/(kc-1)),rc1=Math.min(rc,(r1-lc)/(kc+1));
}}da1>epsilon$1?rc1>epsilon$1?(t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw),
t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw),context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01),
rc1<rc?context.arc(t0.cx,t0.cy,rc1,Math.atan2(t0.y01,t0.x01),Math.atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc1,Math.atan2(t0.y01,t0.x01),Math.atan2(t0.y11,t0.x11),!cw),
context.arc(0,0,r1,Math.atan2(t0.cy+t0.y11,t0.cx+t0.x11),Math.atan2(t1.cy+t1.y11,t1.cx+t1.x11),!cw),
context.arc(t1.cx,t1.cy,rc1,Math.atan2(t1.y11,t1.x11),Math.atan2(t1.y01,t1.x01),!cw))):(context.moveTo(x01,y01),
context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(x01,y01),r0>epsilon$1&&da0>epsilon$1?rc0>epsilon$1?(t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw),
t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw),context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01),
rc0<rc?context.arc(t0.cx,t0.cy,rc0,Math.atan2(t0.y01,t0.x01),Math.atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc0,Math.atan2(t0.y01,t0.x01),Math.atan2(t0.y11,t0.x11),!cw),
context.arc(0,0,r0,Math.atan2(t0.cy+t0.y11,t0.cx+t0.x11),Math.atan2(t1.cy+t1.y11,t1.cx+t1.x11),cw),
context.arc(t1.cx,t1.cy,rc0,Math.atan2(t1.y11,t1.x11),Math.atan2(t1.y01,t1.x01),!cw))):context.arc(0,0,r0,a10,a00,cw):context.lineTo(x10,y10);
}else context.moveTo(0,0);if(context.closePath(),buffer)return context=null,
buffer+""||null}var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=constant$2(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;
return arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi$2/2;
return[Math.cos(a)*r,Math.sin(a)*r]},arc.innerRadius=function(_){
return arguments.length?(innerRadius="function"==typeof _?_:constant$2(+_),
arc):innerRadius},arc.outerRadius=function(_){return arguments.length?(outerRadius="function"==typeof _?_:constant$2(+_),
arc):outerRadius},arc.cornerRadius=function(_){return arguments.length?(cornerRadius="function"==typeof _?_:constant$2(+_),
arc):cornerRadius},arc.padRadius=function(_){return arguments.length?(padRadius=null==_?null:"function"==typeof _?_:constant$2(+_),
arc):padRadius},arc.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$2(+_),
arc):startAngle},arc.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$2(+_),
arc):endAngle},arc.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:constant$2(+_),
arc):padAngle},arc.context=function(_){return arguments.length?(context=null==_?null:_,
arc):context},arc};Linear.prototype={areaStart:function(){this._line=0;
},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0;
},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),
this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,
this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);
break;case 1:this._point=2;default:this._context.lineTo(x,y)}
}};var curveLinear=function(context){return new Linear(context);
},line=function(){function line(data){var i,d,buffer,n=data.length,defined0=!1;
for(null==context&&(output=curve(buffer=path())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),
defined0&&output.point(+x$$1(d,i,data),+y$$1(d,i,data));if(buffer)return output=null,
buffer+""||null}var x$$1=x,y$$1=y,defined=constant$2(!0),context=null,curve=curveLinear,output=null;
return line.x=function(_){return arguments.length?(x$$1="function"==typeof _?_:constant$2(+_),
line):x$$1},line.y=function(_){return arguments.length?(y$$1="function"==typeof _?_:constant$2(+_),
line):y$$1},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:constant$2(!!_),
line):defined},line.curve=function(_){return arguments.length?(curve=_,
null!=context&&(output=curve(context)),line):curve},line.context=function(_){
return arguments.length?(null==_?context=output=null:output=curve(context=_),
line):context},line},area$1=function(){function area(data){var i,j,k,d,buffer,n=data.length,defined0=!1,x0z=new Array(n),y0z=new Array(n);
for(null==context&&(output=curve(buffer=path())),i=0;i<=n;++i){
if(!(i<n&&defined(d=data[i],i,data))===defined0)if(defined0=!defined0)j=i,
output.areaStart(),output.lineStart();else{for(output.lineEnd(),
output.lineStart(),k=i-1;k>=j;--k)output.point(x0z[k],y0z[k]);
output.lineEnd(),output.areaEnd()}defined0&&(x0z[i]=+x0(d,i,data),
y0z[i]=+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]));
}if(buffer)return output=null,buffer+""||null}function arealine(){
return line().defined(defined).curve(curve).context(context)}
var x0=x,x1=null,y0=constant$2(0),y1=y,defined=constant$2(!0),context=null,curve=curveLinear,output=null;
return area.x=function(_){return arguments.length?(x0="function"==typeof _?_:constant$2(+_),
x1=null,area):x0},area.x0=function(_){return arguments.length?(x0="function"==typeof _?_:constant$2(+_),
area):x0},area.x1=function(_){return arguments.length?(x1=null==_?null:"function"==typeof _?_:constant$2(+_),
area):x1},area.y=function(_){return arguments.length?(y0="function"==typeof _?_:constant$2(+_),
y1=null,area):y0},area.y0=function(_){return arguments.length?(y0="function"==typeof _?_:constant$2(+_),
area):y0},area.y1=function(_){return arguments.length?(y1=null==_?null:"function"==typeof _?_:constant$2(+_),
area):y1},area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0);
},area.lineY1=function(){return arealine().x(x0).y(y1)},area.lineX1=function(){
return arealine().x(x1).y(y0)},area.defined=function(_){return arguments.length?(defined="function"==typeof _?_:constant$2(!!_),
area):defined},area.curve=function(_){return arguments.length?(curve=_,
null!=context&&(output=curve(context)),area):curve},area.context=function(_){
return arguments.length?(null==_?context=output=null:output=curve(context=_),
area):context},area},descending$1=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN;
},identity$1=function(d){return d},pie=function(){function pie(data){
var i,j,k,a1,v,n=data.length,sum=0,index=new Array(n),arcs=new Array(n),a0=+startAngle.apply(this,arguments),da=Math.min(tau$2,Math.max(-tau$2,endAngle.apply(this,arguments)-a0)),p=Math.min(Math.abs(da)/n,padAngle.apply(this,arguments)),pa=p*(da<0?-1:1);
for(i=0;i<n;++i)(v=arcs[index[i]=i]=+value(data[i],i,data))>0&&(sum+=v);
for(null!=sortValues?index.sort(function(i,j){return sortValues(arcs[i],arcs[j]);
}):null!=sort&&index.sort(function(i,j){return sort(data[i],data[j]);
}),i=0,k=sum?(da-n*pa)/sum:0;i<n;++i,a0=a1)j=index[i],v=arcs[j],
a1=a0+(v>0?v*k:0)+pa,arcs[j]={data:data[j],index:i,value:v,startAngle:a0,
endAngle:a1,padAngle:p};return arcs}var value=identity$1,sortValues=descending$1,sort=null,startAngle=constant$2(0),endAngle=constant$2(tau$2),padAngle=constant$2(0);
return pie.value=function(_){return arguments.length?(value="function"==typeof _?_:constant$2(+_),
pie):value},pie.sortValues=function(_){return arguments.length?(sortValues=_,
sort=null,pie):sortValues},pie.sort=function(_){return arguments.length?(sort=_,
sortValues=null,pie):sort},pie.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$2(+_),
pie):startAngle},pie.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$2(+_),
pie):endAngle},pie.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:constant$2(+_),
pie):padAngle},pie},curveRadialLinear=curveRadial(curveLinear);
Radial.prototype={areaStart:function(){this._curve.areaStart();
},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){
this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd();
},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a));
}};var radialLine$1=function(){return radialLine(line().curve(curveRadialLinear));
},radialArea=function(){var a=area$1().curve(curveRadialLinear),c=a.curve,x0=a.lineX0,x1=a.lineX1,y0=a.lineY0,y1=a.lineY1;
return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,
delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,
a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return radialLine(x0());
},delete a.lineX0,a.lineEndAngle=function(){return radialLine(x1());
},delete a.lineX1,a.lineInnerRadius=function(){return radialLine(y0());
},delete a.lineY0,a.lineOuterRadius=function(){return radialLine(y1());
},delete a.lineY1,a.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve;
},a},circle={draw:function(context,size){var r=Math.sqrt(size/pi$2);
context.moveTo(r,0),context.arc(0,0,r,0,tau$2)}},cross$1={draw:function(context,size){
var r=Math.sqrt(size/5)/2;context.moveTo(-3*r,-r),context.lineTo(-r,-r),
context.lineTo(-r,-3*r),context.lineTo(r,-3*r),context.lineTo(r,-r),
context.lineTo(3*r,-r),context.lineTo(3*r,r),context.lineTo(r,r),
context.lineTo(r,3*r),context.lineTo(-r,3*r),context.lineTo(-r,r),
context.lineTo(-3*r,r),context.closePath()}},tan30=Math.sqrt(1/3),tan30_2=2*tan30,diamond={
draw:function(context,size){var y=Math.sqrt(size/tan30_2),x=y*tan30;
context.moveTo(0,-y),context.lineTo(x,0),context.lineTo(0,y),
context.lineTo(-x,0),context.closePath()}},ka=.8908130915292852,kr=Math.sin(pi$2/10)/Math.sin(7*pi$2/10),kx=Math.sin(tau$2/10)*kr,ky=-Math.cos(tau$2/10)*kr,star={
draw:function(context,size){var r=Math.sqrt(size*ka),x=kx*r,y=ky*r;
context.moveTo(0,-r),context.lineTo(x,y);for(var i=1;i<5;++i){
var a=tau$2*i/5,c=Math.cos(a),s=Math.sin(a);context.lineTo(s*r,-c*r),
context.lineTo(c*x-s*y,s*x+c*y)}context.closePath()}},square={
draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w);
}},sqrt3=Math.sqrt(3),triangle={draw:function(context,size){var y=-Math.sqrt(size/(3*sqrt3));
context.moveTo(0,2*y),context.lineTo(-sqrt3*y,-y),context.lineTo(sqrt3*y,-y),
context.closePath()}},c=-.5,s=Math.sqrt(3)/2,k=1/Math.sqrt(12),a=3*(k/2+1),wye={
draw:function(context,size){var r=Math.sqrt(size/a),x0=r/2,y0=r*k,x1=x0,y1=r*k+r,x2=-x1,y2=y1;
context.moveTo(x0,y0),context.lineTo(x1,y1),context.lineTo(x2,y2),
context.lineTo(c*x0-s*y0,s*x0+c*y0),context.lineTo(c*x1-s*y1,s*x1+c*y1),
context.lineTo(c*x2-s*y2,s*x2+c*y2),context.lineTo(c*x0+s*y0,c*y0-s*x0),
context.lineTo(c*x1+s*y1,c*y1-s*x1),context.lineTo(c*x2+s*y2,c*y2-s*x2),
context.closePath()}},symbols=[circle,cross$1,diamond,square,star,triangle,wye],symbol=function(){
function symbol(){var buffer;if(context||(context=buffer=path()),
type.apply(this,arguments).draw(context,+size.apply(this,arguments)),
buffer)return context=null,buffer+""||null}var type=constant$2(circle),size=constant$2(64),context=null;
return symbol.type=function(_){return arguments.length?(type="function"==typeof _?_:constant$2(_),
symbol):type},symbol.size=function(_){return arguments.length?(size="function"==typeof _?_:constant$2(+_),
symbol):size},symbol.context=function(_){return arguments.length?(context=null==_?null:_,
symbol):context},symbol},noop=function(){};Basis.prototype={areaStart:function(){
this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){
this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){
switch(this._point){case 3:point(this,this._x1,this._y1);case 2:
this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),
this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,
this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);
break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);
default:point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,
this._y1=y}};var basis=function(context){return new Basis(context);
};BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){
this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,
this._point=0},lineEnd:function(){switch(this._point){case 1:
this._context.moveTo(this._x2,this._y2),this._context.closePath();
break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),
this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),
this._context.closePath();break;case 3:this.point(this._x2,this._y2),
this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},
point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,
this._x2=x,this._y2=y;break;case 1:this._point=2,this._x3=x,this._y3=y;
break;case 2:this._point=3,this._x4=x,this._y4=y,this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);
break;default:point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,
this._y1=y}};var basisClosed=function(context){return new BasisClosed(context);
};BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){
this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,
this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),
this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,
this._point){case 0:this._point=1;break;case 1:this._point=2;break;
case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;
this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);
break;case 3:this._point=4;default:point(this,x,y)}this._x0=this._x1,
this._x1=x,this._y0=this._y1,this._y1=y}};var basisOpen=function(context){
return new BasisOpen(context)};Bundle.prototype={lineStart:function(){
this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){
var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,
this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));
this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){
this._x.push(+x),this._y.push(+y)}};var bundle=function custom(beta){
function bundle(context){return 1===beta?new Basis(context):new Bundle(context,beta);
}return bundle.beta=function(beta){return custom(+beta)},bundle;
}(.85);Cardinal.prototype={areaStart:function(){this._line=0},
areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,
this._point=0},lineEnd:function(){switch(this._point){case 2:
this._context.lineTo(this._x2,this._y2);break;case 3:point$1(this,this._x1,this._y1);
}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),
this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,
this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);
break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:
this._point=3;default:point$1(this,x,y)}this._x0=this._x1,this._x1=this._x2,
this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinal=function custom(tension){
function cardinal(context){return new Cardinal(context,tension);
}return cardinal.tension=function(tension){return custom(+tension);
},cardinal}(0);CardinalClosed.prototype={areaStart:noop,areaEnd:noop,
lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,
this._point=0},lineEnd:function(){switch(this._point){case 1:
this._context.moveTo(this._x3,this._y3),this._context.closePath();
break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();
break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),
this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,
y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;
case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);
break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:
point$1(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,
this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalClosed=function custom(tension){
function cardinal(context){return new CardinalClosed(context,tension);
}return cardinal.tension=function(tension){return custom(+tension);
},cardinal}(0);CardinalOpen.prototype={areaStart:function(){this._line=0;
},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,
this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),
this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,
this._point){case 0:this._point=1;break;case 1:this._point=2;break;
case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:point$1(this,x,y)}this._x0=this._x1,
this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,
this._y2=y}};var cardinalOpen=function custom(tension){function cardinal(context){
return new CardinalOpen(context,tension)}return cardinal.tension=function(tension){
return custom(+tension)},cardinal}(0);CatmullRom.prototype={areaStart:function(){
this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){
this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;
},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);
break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),
this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){
var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha));
}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);
break;case 1:this._point=2;break;case 2:this._point=3;default:
point$2(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,
this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,
this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,
this._y2=y}};var catmullRom=function custom(alpha){function catmullRom(context){
return alpha?new CatmullRom(context,alpha):new Cardinal(context,0);
}return catmullRom.alpha=function(alpha){return custom(+alpha);
},catmullRom}(.5);CatmullRomClosed.prototype={areaStart:noop,
areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,
this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;
},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),
this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),
this._context.closePath();break;case 3:this.point(this._x3,this._y3),
this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},
point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;
this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha));
}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;
break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);
break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:
point$2(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,
this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,
this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,
this._y2=y}};var catmullRomClosed=function custom(alpha){function catmullRom(context){
return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0);
}return catmullRom.alpha=function(alpha){return custom(+alpha);
},catmullRom}(.5);CatmullRomOpen.prototype={areaStart:function(){
this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){
this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;
},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),
this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){
var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha));
}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;
break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:point$2(this,x,y)}this._l01_a=this._l12_a,
this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,
this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,
this._y1=this._y2,this._y2=y}};var catmullRomOpen=function custom(alpha){
function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0);
}return catmullRom.alpha=function(alpha){return custom(+alpha);
},catmullRom}(.5);LinearClosed.prototype={areaStart:noop,areaEnd:noop,
lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath();
},point:function(x,y){x=+x,y=+y,this._point?this._context.lineTo(x,y):(this._point=1,
this._context.moveTo(x,y))}};var linearClosed=function(context){
return new LinearClosed(context)};MonotoneX.prototype={areaStart:function(){
this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){
this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0;
},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);
break;case 3:point$3(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),
this._line=1-this._line},point:function(x,y){var t1=NaN;if(x=+x,
y=+y,x!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,
this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);
break;case 1:this._point=2;break;case 2:this._point=3,point$3(this,slope2(this,t1=slope3(this,x,y)),t1);
break;default:point$3(this,this._t0,t1=slope3(this,x,y))}this._x0=this._x1,
this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){
MonotoneX.prototype.point.call(this,y,x)},ReflectContext.prototype={
moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){
this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x);
},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x);
}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){
this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){
var x=this._x,y=this._y,n=x.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),
2===n)this._context.lineTo(x[1],y[1]);else for(var px=controlPoints(x),py=controlPoints(y),i0=0,i1=1;i1<n;++i0,
++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);
(this._line||0!==this._line&&1===n)&&this._context.closePath(),
this._line=1-this._line,this._x=this._y=null},point:function(x,y){
this._x.push(+x),this._y.push(+y)}};var natural=function(context){
return new Natural(context)};Step.prototype={areaStart:function(){
this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){
this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),
(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),
this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(x,y){
switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);
break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,y),
this._context.lineTo(x,y);else{var x1=this._x*(1-this._t)+x*this._t;
this._context.lineTo(x1,this._y),this._context.lineTo(x1,y)}}
this._x=x,this._y=y}};var step=function(context){return new Step(context,.5);
},slice$2=Array.prototype.slice,none=function(series,order){if((n=series.length)>1)for(var s0,n,i=1,s1=series[order[0]],m=s1.length;i<n;++i){
s0=s1,s1=series[order[i]];for(var j=0;j<m;++j)s1[j][1]+=s1[j][0]=isNaN(s0[j][1])?s0[j][0]:s0[j][1];
}},none$1=function(series){for(var n=series.length,o=new Array(n);--n>=0;)o[n]=n;
return o},stack=function(){function stack(data){var i,oz,kz=keys.apply(this,arguments),m=data.length,n=kz.length,sz=new Array(n);
for(i=0;i<n;++i){for(var sij,ki=kz[i],si=sz[i]=new Array(m),j=0;j<m;++j)si[j]=sij=[0,+value(data[j],ki,j,data)],
sij.data=data[j];si.key=ki}for(i=0,oz=order(sz);i<n;++i)sz[oz[i]].index=i;
return offset(sz,oz),sz}var keys=constant$2([]),order=none$1,offset=none,value=stackValue;
return stack.keys=function(_){return arguments.length?(keys="function"==typeof _?_:constant$2(slice$2.call(_)),
stack):keys},stack.value=function(_){return arguments.length?(value="function"==typeof _?_:constant$2(+_),
stack):value},stack.order=function(_){return arguments.length?(order=null==_?none$1:"function"==typeof _?_:constant$2(slice$2.call(_)),
stack):order},stack.offset=function(_){return arguments.length?(offset=null==_?none:_,
stack):offset},stack},expand=function(series,order){if((n=series.length)>0){
for(var i,n,y,j=0,m=series[0].length;j<m;++j){for(y=i=0;i<n;++i)y+=series[i][j][1]||0;
if(y)for(i=0;i<n;++i)series[i][j][1]/=y}none(series,order)}},silhouette=function(series,order){
if((n=series.length)>0){for(var n,j=0,s0=series[order[0]],m=s0.length;j<m;++j){
for(var i=0,y=0;i<n;++i)y+=series[i][j][1]||0;s0[j][1]+=s0[j][0]=-y/2;
}none(series,order)}},wiggle=function(series,order){if((n=series.length)>0&&(m=(s0=series[order[0]]).length)>0){
for(var s0,m,n,y=0,j=1;j<m;++j){for(var i=0,s1=0,s2=0;i<n;++i){
for(var si=series[order[i]],sij0=si[j][1]||0,sij1=si[j-1][1]||0,s3=(sij0-sij1)/2,k=0;k<i;++k){
var sk=series[order[k]],skj0=sk[j][1]||0,skj1=sk[j-1][1]||0;s3+=skj0-skj1;
}s1+=sij0,s2+=s3*sij0}s0[j-1][1]+=s0[j-1][0]=y,s1&&(y-=s2/s1);
}s0[j-1][1]+=s0[j-1][0]=y,none(series,order)}},ascending$1=function(series){
var sums=series.map(sum$1);return none$1(series).sort(function(a,b){
return sums[a]-sums[b]})},descending$2=function(series){return ascending$1(series).reverse();
},insideOut=function(series){var i,j,n=series.length,sums=series.map(sum$1),order=none$1(series).sort(function(a,b){
return sums[b]-sums[a]}),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i)j=order[i],
top<bottom?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));
return bottoms.reverse().concat(tops)},reverse=function(series){
return none$1(series).reverse()},define=function(constructor,factory,prototype){
constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor;
},darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={
aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,
azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,
blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,
cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,
cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,
darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,
darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,
darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,
darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,
dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,
forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,
indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,
lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,
lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,
lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,
lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,
lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,
mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,
mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,
mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,
oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,
orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,
paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,
peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,
powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,
rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,
sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,
silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,
slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,
tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,
violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,
yellow:16776960,yellowgreen:10145074};define(Color,color,{displayable:function(){
return this.rgb().displayable()},toString:function(){return this.rgb()+"";
}}),define(Rgb,rgb,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),
new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){
return k=null==k?darker:Math.pow(darker,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity);
},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1;
},toString:function(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),
(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")");
}})),define(Hsl,hsl,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),
new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){
return k=null==k?darker:Math.pow(darker,k),new Hsl(this.h,this.s,this.l*k,this.opacity);
},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;
return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity);
},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;
}}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI,Kn=18,Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;
define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+Kn*(null==k?1:k),this.a,this.b,this.opacity);
},darker:function(k){return new Lab(this.l-Kn*(null==k?1:k),this.a,this.b,this.opacity);
},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;
return y=Yn*lab2xyz(y),x=Xn*lab2xyz(x),z=Zn*lab2xyz(z),new Rgb(xyz2rgb(3.2404542*x-1.5371385*y-.4985314*z),xyz2rgb(-.969266*x+1.8760108*y+.041556*z),xyz2rgb(.0556434*x-.2040259*y+1.0572252*z),this.opacity);
}})),define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+Kn*(null==k?1:k),this.opacity);
},darker:function(k){return new Hcl(this.h,this.c,this.l-Kn*(null==k?1:k),this.opacity);
},rgb:function(){return labConvert(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;
define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){
return k=null==k?brighter:Math.pow(brighter,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity);
},darker:function(k){return k=null==k?darker:Math.pow(darker,k),
new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){
var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);
return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity);
}}));var cssNode,cssRoot,cssView,svgNode,basis$2=function(values){
var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,
n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;
return basis$1((t-i/n)*n,v0,v1,v2,v3)}},basisClosed$1=function(values){
var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];
return basis$1((t-i/n)*n,v0,v1,v2,v3)}},constant$3=function(x){
return function(){return x}},interpolateRgb=function rgbGamma(y){
function rgb$$1(start,end){var r=color$$1((start=rgb(start)).r,(end=rgb(end)).r),g=color$$1(start.g,end.g),b=color$$1(start.b,end.b),opacity=color$$1(start.opacity,end.opacity);
return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),
start.opacity=opacity(t),start+""}}var color$$1=gamma(y);return rgb$$1.gamma=rgbGamma,
rgb$$1}(1),rgbBasis=rgbSpline(basis$2),rgbBasisClosed=rgbSpline(basisClosed$1),array$1=function(a,b){
var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(nb),c=new Array(nb);
for(i=0;i<na;++i)x[i]=interpolate(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];
return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}},date=function(a,b){
var d=new Date;return a=+a,b-=a,function(t){return d.setTime(a+b*t),
d}},interpolateNumber=function(a,b){return a=+a,b-=a,function(t){
return a+b*t}},object=function(a,b){var k,i={},c={};null!==a&&"object"==typeof a||(a={}),
null!==b&&"object"==typeof b||(b={});for(k in b)k in a?i[k]=interpolate(a[k],b[k]):c[k]=b[k];
return function(t){for(k in i)c[k]=i[k](t);return c}},reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g"),interpolateString=function(a,b){
var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",
b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),
s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,
q.push({i:i,x:interpolateNumber(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),
s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?one(q[0].x):zero(b):(b=q.length,
function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("");
})},interpolate=function(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant$3(b):("number"===t?interpolateNumber:"string"===t?(c=color(b))?(b=c,
interpolateRgb):interpolateString:b instanceof color?interpolateRgb:b instanceof Date?date:Array.isArray(b)?array$1:isNaN(b)?object:interpolateNumber)(a,b);
},interpolateRound=function(a,b){return a=+a,b-=a,function(t){
return Math.round(a+b*t)}},degrees=180/Math.PI,identity$2={translateX:0,
translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},decompose=function(a,b,c,d,e,f){
var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,
b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,
d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),
{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,
scaleX:scaleX,scaleY:scaleY}},interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),rho=Math.SQRT2,rho2=2,rho4=4,epsilon2=1e-12,interpolateZoom=function(p0,p1){
var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;
if(d2<epsilon2)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)];
};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);
S=(r1-r0)/rho,i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*tanh(rho*s+r0)-sinh(r0));
return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}return i.duration=1e3*S,
i},hsl$2=hsl$1(hue),hslLong=hsl$1(nogamma),hcl$2=hcl$1(hue),hclLong=hcl$1(nogamma),cubehelix$2=cubehelix$1(hue),cubehelixLong=cubehelix$1(nogamma),quantize=function(interpolator,n){
for(var samples=new Array(n),i=0;i<n;++i)samples[i]=interpolator(i/(n-1));
return samples},noop$1={value:function(){}};Dispatch.prototype=dispatch.prototype={
constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=parseTypenames(typename+"",_),i=-1,n=T.length;
{if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);
for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set$2(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set$2(_[t],typename.name,null);
return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t;
}},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();
return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];
if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);
for(t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args);
},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);
for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args);
}};var taskHead,taskTail,dsv=function(delimiter){function parse(text,f){
var convert,columns,rows=parseRows(text,function(row,i){return convert?convert(row,i-1):(columns=row,
void(convert=f?customConverter(row,f):objectConverter(row)))});
return rows.columns=columns,rows}function parseRows(text,f){function token(){
if(I>=N)return EOF;if(eol)return eol=!1,EOL;var c,j=I;if(34===text.charCodeAt(j)){
for(var i=j;i++<N;)if(34===text.charCodeAt(i)){if(34!==text.charCodeAt(i+1))break;
++i}return I=i+2,c=text.charCodeAt(i+1),13===c?(eol=!0,10===text.charCodeAt(i+2)&&++I):10===c&&(eol=!0),
text.slice(j+1,i).replace(/""/g,'"')}for(;I<N;){var k=1;if(c=text.charCodeAt(I++),
10===c)eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&(++I,
++k);else if(c!==delimiterCode)continue;return text.slice(j,I-k);
}return text.slice(j)}for(var t,eol,EOL={},EOF={},rows=[],N=text.length,I=0,n=0;(t=token())!==EOF;){
for(var a=[];t!==EOL&&t!==EOF;)a.push(t),t=token();f&&null==(a=f(a,n++))||rows.push(a);
}return rows}function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),
[columns.map(formatValue).join(delimiter)].concat(rows.map(function(row){
return columns.map(function(column){return formatValue(row[column]);
}).join(delimiter)})).join("\n")}function formatRows(rows){return rows.map(formatRow).join("\n");
}function formatRow(row){return row.map(formatValue).join(delimiter);
}function formatValue(text){return null==text?"":reFormat.test(text+="")?'"'+text.replace(/\"/g,'""')+'"':text;
}var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);
return{parse:parse,parseRows:parseRows,format:format,formatRows:formatRows
}},csv=dsv(","),csvParse=csv.parse,csvParseRows=csv.parseRows,csvFormat=csv.format,csvFormatRows=csv.formatRows,tsv=dsv("\t"),tsvParse=tsv.parse,tsvParseRows=tsv.parseRows,tsvFormat=tsv.format,tsvFormatRows=tsv.formatRows,request=function(url,callback){
function respond(o){var result,status=xhr.status;if(!status&&hasResponse(xhr)||status>=200&&status<300||304===status){
if(response)try{result=response.call(request,xhr)}catch(e){return void event.call("error",request,e);
}else result=xhr;event.call("load",request,result)}else event.call("error",request,o);
}var request,mimeType,response,responseType,event=dispatch("beforesend","progress","load","error"),headers=map$1(),xhr=new XMLHttpRequest,user=null,password=null,timeout=0;
if("undefined"==typeof XDomainRequest||"withCredentials"in xhr||!/^(http(s)?:)?\/\//.test(url)||(xhr=new XDomainRequest),
"onload"in xhr?xhr.onload=xhr.onerror=xhr.ontimeout=respond:xhr.onreadystatechange=function(o){
xhr.readyState>3&&respond(o)},xhr.onprogress=function(e){event.call("progress",request,e);
},request={header:function(name,value){return name=(name+"").toLowerCase(),
arguments.length<2?headers.get(name):(null==value?headers.remove(name):headers.set(name,value+""),
request)},mimeType:function(value){return arguments.length?(mimeType=null==value?null:value+"",
request):mimeType},responseType:function(value){return arguments.length?(responseType=value,
request):responseType},timeout:function(value){return arguments.length?(timeout=+value,
request):timeout},user:function(value){return arguments.length<1?user:(user=null==value?null:value+"",
request)},password:function(value){return arguments.length<1?password:(password=null==value?null:value+"",
request)},response:function(value){return response=value,request;
},get:function(data,callback){return request.send("GET",data,callback);
},post:function(data,callback){return request.send("POST",data,callback);
},send:function(method,data,callback){return xhr.open(method,url,!0,user,password),
null==mimeType||headers.has("accept")||headers.set("accept",mimeType+",*/*"),
xhr.setRequestHeader&&headers.each(function(value,name){xhr.setRequestHeader(name,value);
}),null!=mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(mimeType),
null!=responseType&&(xhr.responseType=responseType),timeout>0&&(xhr.timeout=timeout),
null==callback&&"function"==typeof data&&(callback=data,data=null),
null!=callback&&1===callback.length&&(callback=fixCallback(callback)),
null!=callback&&request.on("error",callback).on("load",function(xhr){
callback(null,xhr)}),event.call("beforesend",request,xhr),xhr.send(null==data?null:data),
request},abort:function(){return xhr.abort(),request},on:function(){
var value=event.on.apply(event,arguments);return value===event?request:value;
}},null!=callback){if("function"!=typeof callback)throw new Error("invalid callback: "+callback);
return request.get(callback)}return request},type=function(defaultMimeType,response){
return function(url,callback){var r=request(url).mimeType(defaultMimeType).response(response);
if(null!=callback){if("function"!=typeof callback)throw new Error("invalid callback: "+callback);
return r.get(callback)}return r}},html=type("text/html",function(xhr){
return document.createRange().createContextualFragment(xhr.responseText);
}),json=type("application/json",function(xhr){return JSON.parse(xhr.responseText);
}),text=type("text/plain",function(xhr){return xhr.responseText;
}),xml=type("application/xml",function(xhr){var xml=xhr.responseXML;
if(!xml)throw new Error("parse error");return xml}),dsv$1=function(defaultMimeType,parse){
return function(url,row,callback){arguments.length<3&&(callback=row,
row=null);var r=request(url).mimeType(defaultMimeType);return r.row=function(_){
return arguments.length?r.response(responseOf(parse,row=_)):row;
},r.row(row),callback?r.get(callback):r}},csv$1=dsv$1("text/csv",csvParse),tsv$1=dsv$1("text/tab-separated-values",tsvParse),frame=0,timeout=0,interval=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="function"==typeof requestAnimationFrame?requestAnimationFrame:function(f){
setTimeout(f,17)};Timer.prototype=timer.prototype={constructor:Timer,
restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");
time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,
taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){
this._call&&(this._call=null,this._time=1/0,sleep())}};var timeout$1=function(callback,delay,time){
var t=new Timer;return delay=null==delay?0:+delay,t.restart(function(elapsed){
t.stop(),callback(elapsed+delay)},delay,time),t},interval$1=function(callback,delay,time){
var t=new Timer,total=delay;return null==delay?(t.restart(callback,delay,time),
t):(delay=+delay,time=null==time?now():+time,t.restart(function tick(elapsed){
elapsed+=total,t.restart(tick,total+=delay,time),callback(elapsed);
},delay,time),t)},t0$1=new Date,t1$1=new Date,millisecond=newInterval(function(){},function(date,step){
date.setTime(+date+step)},function(start,end){return end-start;
});millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval(function(date){
date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k);
},function(start,end){return(end-start)/k}):millisecond:null};
var milliseconds=millisecond.range,durationSecond=1e3,durationMinute=6e4,durationHour=36e5,durationDay=864e5,durationWeek=6048e5,second=newInterval(function(date){
date.setTime(Math.floor(date/durationSecond)*durationSecond)},function(date,step){
date.setTime(+date+step*durationSecond)},function(start,end){
return(end-start)/durationSecond},function(date){return date.getUTCSeconds();
}),seconds=second.range,minute=newInterval(function(date){date.setTime(Math.floor(date/durationMinute)*durationMinute);
},function(date,step){date.setTime(+date+step*durationMinute);
},function(start,end){return(end-start)/durationMinute},function(date){
return date.getMinutes()}),minutes=minute.range,hour=newInterval(function(date){
var offset=date.getTimezoneOffset()*durationMinute%durationHour;
offset<0&&(offset+=durationHour),date.setTime(Math.floor((+date-offset)/durationHour)*durationHour+offset);
},function(date,step){date.setTime(+date+step*durationHour)},function(start,end){
return(end-start)/durationHour},function(date){return date.getHours();
}),hours=hour.range,day=newInterval(function(date){date.setHours(0,0,0,0);
},function(date,step){date.setDate(date.getDate()+step)},function(start,end){
return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationDay;
},function(date){return date.getDate()-1}),days=day.range,sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),sundays=sunday.range,mondays=monday.range,tuesdays=tuesday.range,wednesdays=wednesday.range,thursdays=thursday.range,fridays=friday.range,saturdays=saturday.range,month=newInterval(function(date){
date.setDate(1),date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step);
},function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear());
},function(date){return date.getMonth()}),months=month.range,year=newInterval(function(date){
date.setMonth(0,1),date.setHours(0,0,0,0)},function(date,step){
date.setFullYear(date.getFullYear()+step)},function(start,end){
return end.getFullYear()-start.getFullYear()},function(date){
return date.getFullYear()});year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval(function(date){
date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),
date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k);
}):null};var years=year.range,utcMinute=newInterval(function(date){
date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+step*durationMinute);
},function(start,end){return(end-start)/durationMinute},function(date){
return date.getUTCMinutes()}),utcMinutes=utcMinute.range,utcHour=newInterval(function(date){
date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+step*durationHour);
},function(start,end){return(end-start)/durationHour},function(date){
return date.getUTCHours()}),utcHours=utcHour.range,utcDay=newInterval(function(date){
date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step);
},function(start,end){return(end-start)/durationDay},function(date){
return date.getUTCDate()-1}),utcDays=utcDay.range,utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,utcMonth=newInterval(function(date){
date.setUTCDate(1),date.setUTCHours(0,0,0,0)},function(date,step){
date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){
return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear());
},function(date){return date.getUTCMonth()}),utcMonths=utcMonth.range,utcYear=newInterval(function(date){
date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)},function(date,step){
date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){
return end.getUTCFullYear()-start.getUTCFullYear()},function(date){
return date.getUTCFullYear()});utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval(function(date){
date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),
date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k);
}):null};var prefixExponent,utcYears=utcYear.range,formatDecimal=function(x,p){
if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;
var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)];
},exponent$1=function(x){return x=formatDecimal(Math.abs(x)),
x?x[1]:NaN},formatGroup=function(grouping,thousands){return function(value,width){
for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),
t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];
return t.reverse().join(thousands)}},formatDefault=function(x,p){
x=x.toPrecision(p);out:for(var i1,n=x.length,i=1,i0=-1;i<n;++i)switch(x[i]){
case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;case"e":
break out;default:i0>0&&(i0=0)}return i0>0?x.slice(0,i0)+x.slice(i1+1):x;
},formatPrefixAuto=function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";
var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;
return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0];
},formatRounded=function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";
var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array((-exponent)).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0");
},formatTypes={"":formatDefault,"%":function(x,p){return(100*x).toFixed(p);
},b:function(x){return Math.round(x).toString(2)},c:function(x){
return x+""},d:function(x){return Math.round(x).toString(10)},
e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p);
},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8);
},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,
s:formatPrefixAuto,X:function(x){return Math.round(x).toString(16).toUpperCase();
},x:function(x){return Math.round(x).toString(16)}},re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,formatSpecifier=function(specifier){
return new FormatSpecifier(specifier)};FormatSpecifier.prototype.toString=function(){
return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type;
};var locale$1,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],formatLocale=function(locale){
function newFormat(specifier){function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;
if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{
value=+value;var valueNegative=(value<0||1/value<0)&&(value*=-1,
!0);if(value=formatType(value,precision),valueNegative)for(i=-1,
n=value.length,valueNegative=!1;++i<n;)if(c=value.charCodeAt(i),
48<c&&c<58||"x"===type&&96<c&&c<103||"X"===type&&64<c&&c<71){
valueNegative=!0;break}if(valuePrefix=(valueNegative?"("===sign?sign:"-":"-"===sign||"("===sign?"":sign)+valuePrefix,
valueSuffix=valueSuffix+("s"===type?prefixes[8+prefixExponent/3]:"")+(valueNegative&&"("===sign?")":""),
maybeSuffix)for(i=-1,n=value.length;++i<n;)if(c=value.charCodeAt(i),
48>c||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,
value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));
var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";
switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),
padding=""),align){case"<":return valuePrefix+value+valueSuffix+padding;
case"=":return valuePrefix+padding+value+valueSuffix;case"^":
return padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);
}return padding+valuePrefix+value+valueSuffix}specifier=formatSpecifier(specifier);
var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,type=specifier.type,prefix="$"===symbol?currency[0]:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currency[1]:/[%p]/.test(type)?"%":"",formatType=formatTypes[type],maybeSuffix=!type||/[defgprs%]/.test(type);
return precision=null==precision?type?6:12:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),
format.toString=function(){return specifier+""},format}function formatPrefix(specifier,value){
var f=newFormat((specifier=formatSpecifier(specifier),specifier.type="f",
specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];
return function(value){return f(k*value)+prefix}}var group=locale.grouping&&locale.thousands?formatGroup(locale.grouping,locale.thousands):identity$3,currency=locale.currency,decimal=locale.decimal;
return{format:newFormat,formatPrefix:formatPrefix}};defaultLocale({
decimal:".",thousands:",",grouping:[3],currency:["$",""]});var locale$2,precisionFixed=function(step){
return Math.max(0,-exponent$1(Math.abs(step)))},precisionPrefix=function(step,value){
return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3)))-exponent$1(Math.abs(step)));
},precisionRound=function(step,max){return step=Math.abs(step),
max=Math.abs(max)-step,Math.max(0,exponent$1(max)-exponent$1(step))+1;
},pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",
periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],
shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]
});var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ",formatIso=Date.prototype.toISOString?formatIsoNative:exports.utcFormat(isoSpecifier),parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:exports.utcParse(isoSpecifier),array$2=Array.prototype,map$3=array$2.map,slice$3=array$2.slice,implicit={
name:"implicit"},constant$4=function(x){return function(){return x;
}},number$1=function(x){return+x},unit=[0,1],tickFormat=function(domain,count,specifier){
var precision,start=domain[0],stop=domain[domain.length-1],step=tickStep(start,stop,null==count?10:count);
switch(specifier=formatSpecifier(null==specifier?",f":specifier),
specifier.type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));
return null!=specifier.precision||isNaN(precision=precisionPrefix(step,value))||(specifier.precision=precision),
exports.formatPrefix(specifier,value);case"":case"e":case"g":
case"p":case"r":null!=specifier.precision||isNaN(precision=precisionRound(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));
break;case"f":case"%":null!=specifier.precision||isNaN(precision=precisionFixed(step))||(specifier.precision=precision-2*("%"===specifier.type));
}return exports.format(specifier)},nice=function(domain,interval){
domain=domain.slice();var t,i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1];
return x1<x0&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=interval.floor(x0),
domain[i1]=interval.ceil(x1),domain},durationSecond$1=1e3,durationMinute$1=60*durationSecond$1,durationHour$1=60*durationMinute$1,durationDay$1=24*durationHour$1,durationWeek$1=7*durationDay$1,durationMonth=30*durationDay$1,durationYear=365*durationDay$1,time=function(){
return calendar(year,month,sunday,day,hour,minute,second,millisecond,exports.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]);
},utcTime=function(){return calendar(utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,millisecond,exports.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]);
},colors=function(s){return s.match(/.{6}/g).map(function(x){
return"#"+x})},category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),category20b=colors("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),category20c=colors("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),category20=colors("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),cubehelix$3=cubehelixLong(cubehelix(300,.5,0),cubehelix(-240,.5,1)),warm=cubehelixLong(cubehelix(-100,.75,.35),cubehelix(80,1.5,.8)),cool=cubehelixLong(cubehelix(260,.75,.35),cubehelix(80,1.5,.8)),rainbow=cubehelix(),rainbow$1=function(t){
(t<0||t>1)&&(t-=Math.floor(t));var ts=Math.abs(t-.5);return rainbow.h=360*t-100,
rainbow.s=1.5-1.5*ts,rainbow.l=.8-.9*ts,rainbow+""},viridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),xhtml="http://www.w3.org/1999/xhtml",namespaces={
svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"
},namespace=function(name){var prefix=name+="",i=prefix.indexOf(":");
return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),
namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name
}:name},creator=function(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname);
},nextId=0;Local.prototype=local.prototype={constructor:Local,
get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;
return node[id]},set:function(node,value){return node[this._]=value;
},remove:function(node){return this._ in node&&delete node[this._];
},toString:function(){return this._}};var matcher=function(selector){
return function(){return this.matches(selector)}};if("undefined"!=typeof document){
var element=document.documentElement;if(!element.matches){var vendorMatches=element.webkitMatchesSelector||element.msMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector;
matcher=function(selector){return function(){return vendorMatches.call(this,selector);
}}}}var matcher$1=matcher,filterEvents={};if(exports.event=null,
"undefined"!=typeof document){var element$1=document.documentElement;
"onmouseenter"in element$1||(filterEvents={mouseenter:"mouseover",
mouseleave:"mouseout"})}var selection_on=function(typename,value,capture){
var i,t,typenames=parseTypenames$1(typename+""),n=typenames.length;
{if(!(arguments.length<2)){for(on=value?onAdd:onRemove,null==capture&&(capture=!1),
i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this;
}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,
o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value;
}},sourceEvent=function(){for(var source,current=exports.event;source=current.sourceEvent;)current=source;
return current},point$5=function(node,event){var svg=node.ownerSVGElement||node;
if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,
point.y=event.clientY,point=point.matrixTransform(node.getScreenCTM().inverse()),
[point.x,point.y]}var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop];
},mouse=function(node){var event=sourceEvent();return event.changedTouches&&(event=event.changedTouches[0]),
point$5(node,event)},selector=function(selector){return null==selector?none$2:function(){
return this.querySelector(selector)}},selection_select=function(select){
"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),
subgroup[i]=subnode);return new Selection(subgroups,this._parents);
},selectorAll=function(selector){return null==selector?empty:function(){
return this.querySelectorAll(selector)}},selection_selectAll=function(select){
"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),
parents.push(node));return new Selection(subgroups,parents)},selection_filter=function(match){
"function"!=typeof match&&(match=matcher$1(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);
return new Selection(subgroups,this._parents)},sparse=function(update){
return new Array(update.length)},selection_enter=function(){return new Selection(this._enter||this._groups.map(sparse),this._parents);
};EnterNode.prototype={constructor:EnterNode,appendChild:function(child){
return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){
return this._parent.insertBefore(child,next)},querySelector:function(selector){
return this._parent.querySelector(selector)},querySelectorAll:function(selector){
return this._parent.querySelectorAll(selector)}};var constant$5=function(x){
return function(){return x}},keyPrefix="$",selection_data=function(value,key){
if(!value)return data=new Array(this.size()),j=-1,this.each(function(d){
data[++j]=d}),data;var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;
"function"!=typeof value&&(value=constant$5(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){
var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength),exitGroup=exit[j]=new Array(groupLength);
bind(parent,group,enterGroup,updateGroup,exitGroup,data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){
for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);
previous._next=next||null}}return update=new Selection(update,parents),
update._enter=enter,update._exit=exit,update},selection_exit=function(){
return new Selection(this._exit||this._groups.map(sparse),this._parents);
},selection_merge=function(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);
for(;j<m0;++j)merges[j]=groups0[j];return new Selection(merges,this._parents);
},selection_order=function(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),
next=node);return this},selection_sort=function(compare){function compareNode(a,b){
return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending$2);
for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){
for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);
sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order();
},selection_call=function(){var callback=arguments[0];return arguments[0]=this,
callback.apply(null,arguments),this},selection_nodes=function(){
var nodes=new Array(this.size()),i=-1;return this.each(function(){
nodes[++i]=this}),nodes},selection_node=function(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){
var node=group[i];if(node)return node}return null},selection_size=function(){
var size=0;return this.each(function(){++size}),size},selection_empty=function(){
return!this.node()},selection_each=function(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);
return this},selection_attr=function(name,value){var fullname=namespace(name);
if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname);
}return this.each((null==value?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value));
},window=function(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView;
},selection_style=function(name,value,priority){var node;return arguments.length>1?this.each((null==value?styleRemove:"function"==typeof value?styleFunction:styleConstant)(name,value,null==priority?"":priority)):window(node=this.node()).getComputedStyle(node,null).getPropertyValue(name);
},selection_property=function(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name];
};ClassList.prototype={add:function(name){var i=this._names.indexOf(name);
i<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")));
},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),
this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){
return this._names.indexOf(name)>=0}};var selection_classed=function(name,value){
var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;
return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value));
},selection_text=function(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction:textConstant)(value)):this.node().textContent;
},selection_html=function(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML;
},selection_raise=function(){return this.each(raise$1)},selection_lower=function(){
return this.each(lower)},selection_append=function(name){var create="function"==typeof name?name:creator(name);
return this.select(function(){return this.appendChild(create.apply(this,arguments));
})},selection_insert=function(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:selector(before);
return this.select(function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null);
})},selection_remove=function(){return this.each(remove)},selection_datum=function(value){
return arguments.length?this.property("__data__",value):this.node().__data__;
},selection_dispatch=function(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params));
},root=[null];Selection.prototype=selection.prototype={constructor:Selection,
select:selection_select,selectAll:selection_selectAll,filter:selection_filter,
data:selection_data,enter:selection_enter,exit:selection_exit,
merge:selection_merge,order:selection_order,sort:selection_sort,
call:selection_call,nodes:selection_nodes,node:selection_node,
size:selection_size,empty:selection_empty,each:selection_each,
attr:selection_attr,style:selection_style,property:selection_property,
classed:selection_classed,text:selection_text,html:selection_html,
raise:selection_raise,lower:selection_lower,append:selection_append,
insert:selection_insert,remove:selection_remove,datum:selection_datum,
on:selection_on,dispatch:selection_dispatch};var select=function(selector){
return"string"==typeof selector?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root);
},selectAll=function(selector){return"string"==typeof selector?new Selection([document.querySelectorAll(selector)],[document.documentElement]):new Selection([null==selector?[]:selector],root);
},touch=function(node,touches,identifier){arguments.length<3&&(identifier=touches,
touches=sourceEvent().changedTouches);for(var touch,i=0,n=touches?touches.length:0;i<n;++i)if((touch=touches[i]).identifier===identifier)return point$5(node,touch);
return null},touches=function(node,touches){null==touches&&(touches=sourceEvent().touches);
for(var i=0,n=touches?touches.length:0,points=new Array(n);i<n;++i)points[i]=point$5(node,touches[i]);
return points},emptyOn=dispatch("start","end","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6,schedule=function(node,name,id,index,group,timing){
var schedules=node.__transition;if(schedules){if(id in schedules)return;
}else node.__transition={};create(node,id,{name:name,index:index,
group:group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,
duration:timing.duration,ease:timing.ease,timer:null,state:CREATED
})},interrupt=function(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;
if(schedules){name=null==name?null:name+"";for(i in schedules)(schedule=schedules[i]).name===name?(active=schedule.state>STARTING&&schedule.state<ENDING,
schedule.state=ENDED,schedule.timer.stop(),active&&schedule.on.call("interrupt",node,node.__data__,schedule.index,schedule.group),
delete schedules[i]):empty=!1;empty&&delete node.__transition;
}},selection_interrupt=function(name){return this.each(function(){
interrupt(this,name)})},transition_tween=function(name,value){
var id=this._id;if(name+="",arguments.length<2){for(var t,tween=get$1(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;
return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value));
},interpolate$1=function(a,b){var c;return("number"==typeof b?interpolateNumber:b instanceof color?interpolateRgb:(c=color(b))?(b=c,
interpolateRgb):interpolateString)(a,b)},transition_attr=function(name,value){
var fullname=namespace(name),i="transform"===fullname?interpolateTransformSvg:interpolate$1;
return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS$1:attrFunction$1)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS$1:attrRemove$1)(fullname):(fullname.local?attrConstantNS$1:attrConstant$1)(fullname,i,value));
},transition_attrTween=function(name,value){var key="attr."+name;
if(arguments.length<2)return(key=this.tween(key))&&key._value;
if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;
var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value));
},transition_delay=function(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):get$1(this.node(),id).delay;
},transition_duration=function(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):get$1(this.node(),id).duration;
},transition_ease=function(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):get$1(this.node(),id).ease;
},transition_filter=function(match){"function"!=typeof match&&(match=matcher$1(match));
for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);
return new Transition(subgroups,this._parents,this._name,this._id);
},transition_merge=function(transition){if(transition._id!==this._id)throw new Error;
for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);
for(;j<m0;++j)merges[j]=groups0[j];return new Transition(merges,this._parents,this._name,this._id);
},transition_on=function(name,listener){var id=this._id;return arguments.length<2?get$1(this.node(),id).on.on(name):this.each(onFunction(id,name,listener));
},transition_remove=function(){return this.on("end.remove",removeFunction(this._id));
},transition_select=function(select$$1){var name=this._name,id=this._id;
"function"!=typeof select$$1&&(select$$1=selector(select$$1));
for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select$$1.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),
subgroup[i]=subnode,schedule(subgroup[i],name,id,i,subgroup,get$1(node,id)));
return new Transition(subgroups,this._parents,name,id)},transition_selectAll=function(select$$1){
var name=this._name,id=this._id;"function"!=typeof select$$1&&(select$$1=selectorAll(select$$1));
for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){
for(var child,children=select$$1.call(node,node.__data__,i,group),inherit=get$1(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule(child,name,id,k,children,inherit);
subgroups.push(children),parents.push(node)}return new Transition(subgroups,parents,name,id);
},Selection$1=selection.prototype.constructor,transition_selection=function(){
return new Selection$1(this._groups,this._parents)},transition_style=function(name,value,priority){
var i="transform"==(name+="")?interpolateTransformCss:interpolate$1;
return null==value?this.styleTween(name,styleRemove$1(name,i)).on("end.style."+name,styleRemoveEnd(name)):this.styleTween(name,"function"==typeof value?styleFunction$1(name,i,tweenValue(this,"style."+name,value)):styleConstant$1(name,i,value),priority);
},transition_styleTween=function(name,value,priority){var key="style."+(name+="");
if(arguments.length<2)return(key=this.tween(key))&&key._value;
if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;
return this.tween(key,styleTween(name,value,null==priority?"":priority));
},transition_text=function(value){return this.tween("text","function"==typeof value?textFunction$1(tweenValue(this,"text",value)):textConstant$1(null==value?"":value+""));
},transition_transition=function(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){
var inherit=get$1(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,
delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition(groups,this._parents,name,id1);
},id=0,selection_prototype=selection.prototype;Transition.prototype=transition.prototype={
constructor:Transition,select:transition_select,selectAll:transition_selectAll,
filter:transition_filter,merge:transition_merge,selection:transition_selection,
transition:transition_transition,call:selection_prototype.call,
nodes:selection_prototype.nodes,node:selection_prototype.node,
size:selection_prototype.size,empty:selection_prototype.empty,
each:selection_prototype.each,on:transition_on,attr:transition_attr,
attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,
text:transition_text,remove:transition_remove,tween:transition_tween,
delay:transition_delay,duration:transition_duration,ease:transition_ease
};var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut
},selection_transition=function(name){var id,timing;name instanceof Transition?(id=name._id,
name=name._name):(id=newId(),(timing=defaultTiming).time=now(),
name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule(node,name,id,i,group,timing||inherit(node,id));
return new Transition(groups,this._parents,name,id)};selection.prototype.interrupt=selection_interrupt,
selection.prototype.transition=selection_transition;var root$1=[null],active=function(node,name){
var schedule,i,schedules=node.__transition;if(schedules){name=null==name?null:name+"";
for(i in schedules)if((schedule=schedules[i]).state>SCHEDULED&&schedule.name===name)return new Transition([[node]],root$1,name,(+i));
}return null},slice$4=Array.prototype.slice,identity$5=function(x){
return x},top=1,right=2,bottom=3,left=4,epsilon$2=1e-6,cluster=function(){
function cluster(root){var previousNode,x=0;root.eachAfter(function(node){
var children=node.children;children?(node.x=meanX(children),node.y=maxY(children)):(node.x=previousNode?x+=separation(node,previousNode):0,
node.y=0,previousNode=node)});var left=leafLeft(root),right=leafRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;
return root.eachAfter(nodeSize?function(node){node.x=(node.x-root.x)*dx,
node.y=(root.y-node.y)*dy}:function(node){node.x=(node.x-x0)/(x1-x0)*dx,
node.y=(1-(root.y?node.y/root.y:1))*dy})}var separation=defaultSeparation,dx=1,dy=1,nodeSize=!1;
return cluster.separation=function(x){return arguments.length?(separation=x,
cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=!1,
dx=+x[0],dy=+x[1],cluster):nodeSize?null:[dx,dy]},cluster.nodeSize=function(x){
return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],cluster):nodeSize?[dx,dy]:null;
},cluster},node_each=function(callback){var current,children,i,n,node=this,next=[node];
do for(current=next.reverse(),next=[];node=current.pop();)if(callback(node),
children=node.children)for(i=0,n=children.length;i<n;++i)next.push(children[i]);while(next.length);
return this},node_eachBefore=function(callback){for(var children,i,node=this,nodes=[node];node=nodes.pop();)if(callback(node),
children=node.children)for(i=children.length-1;i>=0;--i)nodes.push(children[i]);
return this},node_eachAfter=function(callback){for(var children,i,n,node=this,nodes=[node],next=[];node=nodes.pop();)if(next.push(node),
children=node.children)for(i=0,n=children.length;i<n;++i)nodes.push(children[i]);
for(;node=next.pop();)callback(node);return this},node_sum=function(value){
return this.eachAfter(function(node){for(var sum=+value(node.data)||0,children=node.children,i=children&&children.length;--i>=0;)sum+=children[i].value;
node.value=sum})},node_sort=function(compare){return this.eachBefore(function(node){
node.children&&node.children.sort(compare)})},node_path=function(end){
for(var start=this,ancestor=leastCommonAncestor(start,end),nodes=[start];start!==ancestor;)start=start.parent,
nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),
end=end.parent;return nodes},node_ancestors=function(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);
return nodes},node_descendants=function(){var nodes=[];return this.each(function(node){
nodes.push(node)}),nodes},node_leaves=function(){var leaves=[];
return this.eachBefore(function(node){node.children||leaves.push(node);
}),leaves},node_links=function(){var root=this,links=[];return root.each(function(node){
node!==root&&links.push({source:node.parent,target:node})}),links;
};Node.prototype=hierarchy.prototype={constructor:Node,each:node_each,
eachAfter:node_eachAfter,eachBefore:node_eachBefore,sum:node_sum,
sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,
leaves:node_leaves,links:node_links,copy:node_copy};var shuffle$1=function(array){
for(var i,n=(array=array.slice()).length,head=null,node=head;n;){
var next=new Node$2(array[n-1]);node=node?node.next=next:head=next,
array[i]=array[--n]}return{head:head,tail:node}},enclose=function(circles){
return encloseN(shuffle$1(circles),[])},siblings=function(circles){
return packEnclose(circles),circles},constant$6=function(x){return function(){
return x}},index=function(){function pack(root){return root.x=dx/2,
root.y=dy/2,radius?root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,.5)).eachBefore(translateChild(1)):root.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r))),
root}var radius=null,dx=1,dy=1,padding=constantZero;return pack.radius=function(x){
return arguments.length?(radius=optional(x),pack):radius},pack.size=function(x){
return arguments.length?(dx=+x[0],dy=+x[1],pack):[dx,dy]},pack.padding=function(x){
return arguments.length?(padding="function"==typeof x?x:constant$6(+x),
pack):padding},pack},roundNode=function(node){node.x0=Math.round(node.x0),
node.y0=Math.round(node.y0),node.x1=Math.round(node.x1),node.y1=Math.round(node.y1);
},treemapDice=function(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;++i<n;)node=nodes[i],
node.y0=y0,node.y1=y1,node.x0=x0,node.x1=x0+=node.value*k},partition=function(){
function partition(root){var n=root.height+1;return root.x0=root.y0=padding,
root.x1=dx,root.y1=dy/n,root.eachBefore(positionNode(dy,n)),round&&root.eachBefore(roundNode),
root}function positionNode(dy,n){return function(node){node.children&&treemapDice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+2)/n);
var x0=node.x0,y0=node.y0,x1=node.x1-padding,y1=node.y1-padding;
x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,
node.y0=y0,node.x1=x1,node.y1=y1}}var dx=1,dy=1,padding=0,round=!1;
return partition.round=function(x){return arguments.length?(round=!!x,
partition):round},partition.size=function(x){return arguments.length?(dx=+x[0],
dy=+x[1],partition):[dx,dy]},partition.padding=function(x){return arguments.length?(padding=+x,
partition):padding},partition},keyPrefix$1="$",preroot={depth:-1
},ambiguous={},stratify=function(){function stratify(data){var d,i,root,parent,node,nodeId,nodeKey,n=data.length,nodes=new Array(n),nodeByKey={};
for(i=0;i<n;++i)d=data[i],node=nodes[i]=new Node(d),null!=(nodeId=id(d,i,data))&&(nodeId+="")&&(nodeKey=keyPrefix$1+(node.id=nodeId),
nodeByKey[nodeKey]=nodeKey in nodeByKey?ambiguous:node);for(i=0;i<n;++i)if(node=nodes[i],
nodeId=parentId(data[i],i,data),null!=nodeId&&(nodeId+="")){if(parent=nodeByKey[keyPrefix$1+nodeId],
!parent)throw new Error("missing: "+nodeId);if(parent===ambiguous)throw new Error("ambiguous: "+nodeId);
parent.children?parent.children.push(node):parent.children=[node],
node.parent=parent}else{if(root)throw new Error("multiple roots");
root=node}if(!root)throw new Error("no root");if(root.parent=preroot,
root.eachBefore(function(node){node.depth=node.parent.depth+1,
--n}).eachBefore(computeHeight),root.parent=null,n>0)throw new Error("cycle");
return root}var id=defaultId,parentId=defaultParentId;return stratify.id=function(x){
return arguments.length?(id=required(x),stratify):id},stratify.parentId=function(x){
return arguments.length?(parentId=required(x),stratify):parentId;
},stratify};TreeNode.prototype=Object.create(Node.prototype);var tree=function(){
function tree(root){var t=treeRoot(root);if(t.eachAfter(firstWalk),
t.parent.m=-t.z,t.eachBefore(secondWalk),nodeSize)root.eachBefore(sizeNode);else{
var left=root,right=root,bottom=root;root.eachBefore(function(node){
node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node);
});var s=left===right?1:separation(left,right)/2,tx=s-left.x,kx=dx/(right.x+s+tx),ky=dy/(bottom.depth||1);
root.eachBefore(function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky;
})}return root}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;
if(children){executeShifts(v);var midpoint=(children[0].z+children[children.length-1].z)/2;
w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint;
}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=apportion(v,w,v.parent.A||siblings[0]);
}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}
function apportion(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=nextRight(vim),
vip=nextLeft(vip),vim&&vip;)vom=nextLeft(vom),vop=nextRight(vop),
vop.a=v,shift=vim.z+sim-vip.z-sip+separation(vim._,vip._),shift>0&&(moveSubtree(nextAncestor(vim,v,ancestor),v,shift),
sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;
vim&&!nextRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!nextLeft(vom)&&(vom.t=vip,
vom.m+=sip-som,ancestor=v)}return ancestor}function sizeNode(node){
node.x*=dx,node.y=node.depth*dy}var separation=defaultSeparation$1,dx=1,dy=1,nodeSize=null;
return tree.separation=function(x){return arguments.length?(separation=x,
tree):separation},tree.size=function(x){return arguments.length?(nodeSize=!1,
dx=+x[0],dy=+x[1],tree):nodeSize?null:[dx,dy]},tree.nodeSize=function(x){
return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],tree):nodeSize?[dx,dy]:null;
},tree},treemapSlice=function(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;++i<n;)node=nodes[i],
node.x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k},phi=(1+Math.sqrt(5))/2,squarify=function custom(ratio){
function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1);
}return squarify.ratio=function(x){return custom((x=+x)>1?x:1);
},squarify}(phi),index$1=function(){function treemap(root){return root.x0=root.y0=0,
root.x1=dx,root.y1=dy,root.eachBefore(positionNode),paddingStack=[0],
round&&root.eachBefore(roundNode),root}function positionNode(node){
var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;
x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,
node.y0=y0,node.x1=x1,node.y1=y1,node.children&&(p=paddingStack[node.depth+1]=paddingInner(node)/2,
x0+=paddingLeft(node)-p,y0+=paddingTop(node)-p,x1-=paddingRight(node)-p,
y1-=paddingBottom(node)-p,x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),
tile(node,x0,y0,x1,y1))}var tile=squarify,round=!1,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;
return treemap.round=function(x){return arguments.length?(round=!!x,
treemap):round},treemap.size=function(x){return arguments.length?(dx=+x[0],
dy=+x[1],treemap):[dx,dy]},treemap.tile=function(x){return arguments.length?(tile=required(x),
treemap):tile},treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner();
},treemap.paddingInner=function(x){return arguments.length?(paddingInner="function"==typeof x?x:constant$6(+x),
treemap):paddingInner},treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop();
},treemap.paddingTop=function(x){return arguments.length?(paddingTop="function"==typeof x?x:constant$6(+x),
treemap):paddingTop},treemap.paddingRight=function(x){return arguments.length?(paddingRight="function"==typeof x?x:constant$6(+x),
treemap):paddingRight},treemap.paddingBottom=function(x){return arguments.length?(paddingBottom="function"==typeof x?x:constant$6(+x),
treemap):paddingBottom},treemap.paddingLeft=function(x){return arguments.length?(paddingLeft="function"==typeof x?x:constant$6(+x),
treemap):paddingLeft},treemap},binary=function(parent,x0,y0,x1,y1){
function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];
return node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1,void 0}for(var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;k<hi;){
var mid=k+hi>>>1;sums[mid]<valueTarget?k=mid+1:hi=mid}var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;
if(y1-y0>x1-x0){var yk=(y0*valueRight+y1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,x1,yk),
partition(k,j,valueRight,x0,yk,x1,y1)}else{var xk=(x0*valueRight+x1*valueLeft)/value;
partition(i,k,valueLeft,x0,y0,xk,y1),partition(k,j,valueRight,xk,y0,x1,y1);
}}var i,sum,nodes=parent.children,n=nodes.length,sums=new Array(n+1);
for(sums[0]=sum=i=0;i<n;++i)sums[i+1]=sum+=nodes[i].value;partition(0,n,parent.value,x0,y0,x1,y1);
},sliceDice=function(parent,x0,y0,x1,y1){(1&parent.depth?treemapSlice:treemapDice)(parent,x0,y0,x1,y1);
},resquarify=function custom(ratio){function resquarify(parent,x0,y0,x1,y1){
if((rows=parent._squarify)&&rows.ratio===ratio)for(var rows,row,nodes,i,n,j=-1,m=rows.length,value=parent.value;++j<m;){
for(row=rows[j],nodes=row.children,i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;
row.dice?treemapDice(row,x0,y0,x1,y0+=(y1-y0)*row.value/value):treemapSlice(row,x0,y0,x0+=(x1-x0)*row.value/value,y1),
value-=row.value}else parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1),
rows.ratio=ratio}return resquarify.ratio=function(x){return custom((x=+x)>1?x:1);
},resquarify}(phi),center$1=function(x,y){function force(){var i,node,n=nodes.length,sx=0,sy=0;
for(i=0;i<n;++i)node=nodes[i],sx+=node.x,sy+=node.y;for(sx=sx/n-x,
sy=sy/n-y,i=0;i<n;++i)node=nodes[i],node.x-=sx,node.y-=sy}var nodes;
return null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){
nodes=_},force.x=function(_){return arguments.length?(x=+_,force):x;
},force.y=function(_){return arguments.length?(y=+_,force):y},
force},constant$7=function(x){return function(){return x}},jiggle=function(){
return 1e-6*(Math.random()-.5)},collide=function(radius){function force(){
function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;
{if(!data)return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r;if(data.index>node.index){
var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;l<r*r&&(0===x&&(x=jiggle(),
l+=x*x),0===y&&(y=jiggle(),l+=y*y),l=(r-(l=Math.sqrt(l)))/l*strength,
node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj)),node.vy+=(y*=l)*r,data.vx-=x*(r=1-r),
data.vy-=y*r)}}}for(var i,tree,node,xi,yi,ri,ri2,n=nodes.length,k=0;k<iterations;++k)for(tree=quadtree(nodes,x$1,y$1).visitAfter(prepare),
i=0;i<n;++i)node=nodes[i],ri=radii[node.index],ri2=ri*ri,xi=node.x+node.vx,
yi=node.y+node.vy,tree.visit(apply)}function prepare(quad){if(quad.data)return quad.r=radii[quad.data.index];
for(var i=quad.r=0;i<4;++i)quad[i]&&quad[i].r>quad.r&&(quad.r=quad[i].r);
}function initialize(){if(nodes){var i,node,n=nodes.length;for(radii=new Array(n),
i=0;i<n;++i)node=nodes[i],radii[node.index]=+radius(node,i,nodes);
}}var nodes,radii,strength=1,iterations=1;return"function"!=typeof radius&&(radius=constant$7(null==radius?1:+radius)),
force.initialize=function(_){nodes=_,initialize()},force.iterations=function(_){
return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){
return arguments.length?(strength=+_,force):strength},force.radius=function(_){
return arguments.length?(radius="function"==typeof _?_:constant$7(+_),
initialize(),force):radius},force},link=function(links){function defaultStrength(link){
return 1/Math.min(count[link.source.index],count[link.target.index]);
}function force(alpha){for(var k=0,n=links.length;k<iterations;++k)for(var link,source,target,x,y,l,b,i=0;i<n;++i)link=links[i],
source=link.source,target=link.target,x=target.x+target.vx-source.x-source.vx||jiggle(),
y=target.y+target.vy-source.y-source.vy||jiggle(),l=Math.sqrt(x*x+y*y),
l=(l-distances[i])/l*alpha*strengths[i],x*=l,y*=l,target.vx-=x*(b=bias[i]),
target.vy-=y*b,source.vx+=x*(b=1-b),source.vy+=y*b}function initialize(){
if(nodes){var i,link,n=nodes.length,m=links.length,nodeById=map$1(nodes,id);
for(i=0,count=new Array(n);i<m;++i)link=links[i],link.index=i,
"object"!=typeof link.source&&(link.source=find(nodeById,link.source)),
"object"!=typeof link.target&&(link.target=find(nodeById,link.target)),
count[link.source.index]=(count[link.source.index]||0)+1,count[link.target.index]=(count[link.target.index]||0)+1;
for(i=0,bias=new Array(m);i<m;++i)link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index]);
strengths=new Array(m),initializeStrength(),distances=new Array(m),
initializeDistance()}}function initializeStrength(){if(nodes)for(var i=0,n=links.length;i<n;++i)strengths[i]=+strength(links[i],i,links);
}function initializeDistance(){if(nodes)for(var i=0,n=links.length;i<n;++i)distances[i]=+distance(links[i],i,links);
}var strengths,distances,nodes,count,bias,id=index$2,strength=defaultStrength,distance=constant$7(30),iterations=1;
return null==links&&(links=[]),force.initialize=function(_){nodes=_,
initialize()},force.links=function(_){return arguments.length?(links=_,
initialize(),force):links},force.id=function(_){return arguments.length?(id=_,
force):id},force.iterations=function(_){return arguments.length?(iterations=+_,
force):iterations},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:constant$7(+_),
initializeStrength(),force):strength},force.distance=function(_){
return arguments.length?(distance="function"==typeof _?_:constant$7(+_),
initializeDistance(),force):distance},force},initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5)),simulation=function(nodes){
function step(){tick(),event.call("tick",simulation),alpha<alphaMin&&(stepper.stop(),
event.call("end",simulation))}function tick(){var i,node,n=nodes.length;
for(alpha+=(alphaTarget-alpha)*alphaDecay,forces.each(function(force){
force(alpha)}),i=0;i<n;++i)node=nodes[i],null==node.fx?node.x+=node.vx*=velocityDecay:(node.x=node.fx,
node.vx=0),null==node.fy?node.y+=node.vy*=velocityDecay:(node.y=node.fy,
node.vy=0)}function initializeNodes(){for(var node,i=0,n=nodes.length;i<n;++i){
if(node=nodes[i],node.index=i,isNaN(node.x)||isNaN(node.y)){var radius=initialRadius*Math.sqrt(i),angle=i*initialAngle;
node.x=radius*Math.cos(angle),node.y=radius*Math.sin(angle)}(isNaN(node.vx)||isNaN(node.vy))&&(node.vx=node.vy=0);
}}function initializeForce(force){return force.initialize&&force.initialize(nodes),
force}var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=map$1(),stepper=timer(step),event=dispatch("tick","end");
return null==nodes&&(nodes=[]),initializeNodes(),simulation={
tick:tick,restart:function(){return stepper.restart(step),simulation;
},stop:function(){return stepper.stop(),simulation},nodes:function(_){
return arguments.length?(nodes=_,initializeNodes(),forces.each(initializeForce),
simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,
simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,
simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,
simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,
simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,
simulation):1-velocityDecay},force:function(name,_){return arguments.length>1?(null==_?forces.remove(name):forces.set(name,initializeForce(_)),
simulation):forces.get(name)},find:function(x,y,radius){var dx,dy,d2,node,closest,i=0,n=nodes.length;
for(null==radius?radius=1/0:radius*=radius,i=0;i<n;++i)node=nodes[i],
dx=x-node.x,dy=y-node.y,d2=dx*dx+dy*dy,d2<radius&&(closest=node,
radius=d2);return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),
simulation):event.on(name)}}},manyBody=function(){function force(_){
var i,n=nodes.length,tree=quadtree(nodes,x$2,y$2).visitAfter(accumulate);
for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){
if(nodes){var i,node,n=nodes.length;for(strengths=new Array(n),
i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes);
}}function accumulate(quad){var q,c,x$$1,y$$1,i,strength=0;if(quad.length){
for(x$$1=y$$1=i=0;i<4;++i)(q=quad[i])&&(c=q.value)&&(strength+=c,
x$$1+=c*q.x,y$$1+=c*q.y);quad.x=x$$1/strength,quad.y=y$$1/strength;
}else{q=quad,q.x=q.data.x,q.y=q.data.y;do strength+=strengths[q.data.index];while(q=q.next);
}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return!0;
var x$$1=quad.x-node.x,y$$1=quad.y-node.y,w=x2-x1,l=x$$1*x$$1+y$$1*y$$1;
if(w*w/theta2<l)return l<distanceMax2&&(0===x$$1&&(x$$1=jiggle(),
l+=x$$1*x$$1),0===y$$1&&(y$$1=jiggle(),l+=y$$1*y$$1),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)),
node.vx+=x$$1*quad.value*alpha/l,node.vy+=y$$1*quad.value*alpha/l),
!0;if(!(quad.length||l>=distanceMax2)){(quad.data!==node||quad.next)&&(0===x$$1&&(x$$1=jiggle(),
l+=x$$1*x$$1),0===y$$1&&(y$$1=jiggle(),l+=y$$1*y$$1),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)));
do quad.data!==node&&(w=strengths[quad.data.index]*alpha/l,node.vx+=x$$1*w,
node.vy+=y$$1*w);while(quad=quad.next)}}var nodes,node,alpha,strengths,strength=constant$7(-30),distanceMin2=1,distanceMax2=1/0,theta2=.81;
return force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){
return arguments.length?(strength="function"==typeof _?_:constant$7(+_),
initialize(),force):strength},force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,
force):Math.sqrt(distanceMin2)},force.distanceMax=function(_){
return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2);
},force.theta=function(_){return arguments.length?(theta2=_*_,
force):Math.sqrt(theta2)},force},x$3=function(x){function force(alpha){
for(var node,i=0,n=nodes.length;i<n;++i)node=nodes[i],node.vx+=(xz[i]-node.x)*strengths[i]*alpha;
}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),
xz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(xz[i]=+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes);
}}var nodes,strengths,xz,strength=constant$7(.1);return"function"!=typeof x&&(x=constant$7(null==x?0:+x)),
force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){
return arguments.length?(strength="function"==typeof _?_:constant$7(+_),
initialize(),force):strength},force.x=function(_){return arguments.length?(x="function"==typeof _?_:constant$7(+_),
initialize(),force):x},force},y$3=function(y){function force(alpha){
for(var node,i=0,n=nodes.length;i<n;++i)node=nodes[i],node.vy+=(yz[i]-node.y)*strengths[i]*alpha;
}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),
yz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(yz[i]=+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes);
}}var nodes,strengths,yz,strength=constant$7(.1);return"function"!=typeof y&&(y=constant$7(null==y?0:+y)),
force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){
return arguments.length?(strength="function"==typeof _?_:constant$7(+_),
initialize(),force):strength},force.y=function(_){return arguments.length?(y="function"==typeof _?_:constant$7(+_),
initialize(),force):y},force},noevent=function(){exports.event.preventDefault(),
exports.event.stopImmediatePropagation()},dragDisable=function(view){
var root=view.document.documentElement,selection$$1=select(view).on("dragstart.drag",noevent,!0);
"onselectstart"in root?selection$$1.on("selectstart.drag",noevent,!0):(root.__noselect=root.style.MozUserSelect,
root.style.MozUserSelect="none")},constant$8=function(x){return function(){
return x}};DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);
return value===this._?this:value};var drag=function(){function drag(selection$$1){
selection$$1.on("mousedown.drag",mousedowned).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)");
}function mousedowned(){if(!touchending&&filter.apply(this,arguments)){
var gesture=beforestart("mouse",container.apply(this,arguments),mouse,this,arguments);
gesture&&(select(exports.event.view).on("mousemove.drag",mousemoved,!0).on("mouseup.drag",mouseupped,!0),
dragDisable(exports.event.view),nopropagation(),mousemoving=!1,
gesture("start"))}}function mousemoved(){noevent(),mousemoving=!0,
gestures.mouse("drag")}function mouseupped(){select(exports.event.view).on("mousemove.drag mouseup.drag",null),
yesdrag(exports.event.view,mousemoving),noevent(),gestures.mouse("end");
}function touchstarted(){if(filter.apply(this,arguments)){var i,gesture,touches$$1=exports.event.changedTouches,c=container.apply(this,arguments),n=touches$$1.length;
for(i=0;i<n;++i)(gesture=beforestart(touches$$1[i].identifier,c,touch,this,arguments))&&(nopropagation(),
gesture("start"))}}function touchmoved(){var i,gesture,touches$$1=exports.event.changedTouches,n=touches$$1.length;
for(i=0;i<n;++i)(gesture=gestures[touches$$1[i].identifier])&&(noevent(),
gesture("drag"))}function touchended(){var i,gesture,touches$$1=exports.event.changedTouches,n=touches$$1.length;
for(touchending&&clearTimeout(touchending),touchending=setTimeout(function(){
touchending=null},500),i=0;i<n;++i)(gesture=gestures[touches$$1[i].identifier])&&(nopropagation(),
gesture("end"))}function beforestart(id,container,point,that,args){
var s,dx,dy,p=point(container,id),sublisteners=listeners.copy();
if(customEvent(new DragEvent(drag,"beforestart",s,id,active,p[0],p[1],0,0,sublisteners),function(){
return null!=(exports.event.subject=s=subject.apply(that,args))&&(dx=s.x-p[0]||0,
dy=s.y-p[1]||0,!0)}))return function gesture(type){var n,p0=p;
switch(type){case"start":gestures[id]=gesture,n=active++;break;
case"end":delete gestures[id],--active;case"drag":p=point(container,id),
n=active}customEvent(new DragEvent(drag,type,s,id,n,p[0]+dx,p[1]+dy,p[0]-p0[0],p[1]-p0[1],sublisteners),sublisteners.apply,sublisteners,[type,that,args]);
}}var mousemoving,touchending,filter=defaultFilter,container=defaultContainer,subject=defaultSubject,gestures={},listeners=dispatch("start","drag","end"),active=0;
return drag.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$8(!!_),
drag):filter},drag.container=function(_){return arguments.length?(container="function"==typeof _?_:constant$8(_),
drag):container},drag.subject=function(_){return arguments.length?(subject="function"==typeof _?_:constant$8(_),
drag):subject},drag.on=function(){var value=listeners.on.apply(listeners,arguments);
return value===listeners?drag:value},drag},constant$9=function(x){
return function(){return x}};RedBlackTree.prototype={constructor:RedBlackTree,
insert:function(after,node){var parent,grandpa,uncle;if(after){
if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,
after.R){for(after=after.R;after.L;)after=after.L;after.L=node;
}else after.R=node;parent=after}else this._?(after=RedBlackFirst(this._),
node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,
this._=node,parent=null);for(node.L=node.R=null,node.U=parent,
node.C=!0,after=node;parent&&parent.C;)grandpa=parent.U,parent===grandpa.L?(uncle=grandpa.R,
uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(RedBlackRotateLeft(this,parent),
after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,RedBlackRotateRight(this,grandpa))):(uncle=grandpa.L,
uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(RedBlackRotateRight(this,parent),
after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,RedBlackRotateLeft(this,grandpa))),
parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),
node.P&&(node.P.N=node.N),node.N=node.P=null;var sibling,next,red,parent=node.U,left=node.L,right=node.R;
if(next=left?right?RedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,
left&&right?(red=next.C,next.C=node.C,next.L=left,left.U=next,
next!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,
next.R=right,right.U=next):(next.U=parent,parent=next,node=next.R)):(red=node.C,
node=next),node&&(node.U=parent),!red){if(node&&node.C)return void(node.C=!1);
do{if(node===this._)break;if(node===parent.L){if(sibling=parent.R,
sibling.C&&(sibling.C=!1,parent.C=!0,RedBlackRotateLeft(this,parent),
sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){
sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,RedBlackRotateRight(this,sibling),
sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,
RedBlackRotateLeft(this,parent),node=this._;break}}else if(sibling=parent.L,
sibling.C&&(sibling.C=!1,parent.C=!0,RedBlackRotateRight(this,parent),
sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){
sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,RedBlackRotateLeft(this,sibling),
sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,
RedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,
node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}
}};var firstCircle,beaches,cells,circles,edges,circlePool=[],beachPool=[],epsilon$3=1e-6,epsilon2$1=1e-12;
Diagram.prototype={constructor:Diagram,polygons:function(){var edges=this.edges;
return this.cells.map(function(cell){var polygon=cell.halfedges.map(function(i){
return cellHalfedgeStart(cell,edges[i])});return polygon.data=cell.site.data,
polygon})},triangles:function(){var triangles=[],edges=this.edges;
return this.cells.forEach(function(cell,i){for(var s0,site=cell.site,halfedges=cell.halfedges,j=-1,m=halfedges.length,e1=edges[halfedges[m-1]],s1=e1.left===site?e1.right:e1.left;++j<m;)s0=s1,
e1=edges[halfedges[j]],s1=e1.left===site?e1.right:e1.left,s0&&s1&&i<s0.index&&i<s1.index&&triangleArea(site,s0,s1)<0&&triangles.push([site.data,s0.data,s1.data]);
}),triangles},links:function(){return this.edges.filter(function(edge){
return edge.right}).map(function(edge){return{source:edge.left.data,
target:edge.right.data}})},find:function(x,y,radius){var i0,that=this,i1=that._found||0,cell=that.cells[i1]||that.cells[i1=0],dx=x-cell.site[0],dy=y-cell.site[1],d2=dx*dx+dy*dy;
do cell=that.cells[i0=i1],i1=null,cell.halfedges.forEach(function(e){
var edge=that.edges[e],v=edge.left;if(v!==cell.site&&v||(v=edge.right)){
var vx=x-v[0],vy=y-v[1],v2=vx*vx+vy*vy;v2<d2&&(d2=v2,i1=v.index);
}});while(null!==i1);return that._found=i0,null==radius||d2<=radius*radius?cell.site:null;
}};var voronoi=function(){function voronoi(data){return new Diagram(data.map(function(d,i){
var s=[Math.round(x$$1(d,i,data)/epsilon$3)*epsilon$3,Math.round(y$$1(d,i,data)/epsilon$3)*epsilon$3];
return s.index=i,s.data=d,s}),extent)}var x$$1=x$4,y$$1=y$4,extent=null;
return voronoi.polygons=function(data){return voronoi(data).polygons();
},voronoi.links=function(data){return voronoi(data).links()},
voronoi.triangles=function(data){return voronoi(data).triangles();
},voronoi.x=function(_){return arguments.length?(x$$1="function"==typeof _?_:constant$9(+_),
voronoi):x$$1},voronoi.y=function(_){return arguments.length?(y$$1="function"==typeof _?_:constant$9(+_),
voronoi):y$$1},voronoi.extent=function(_){return arguments.length?(extent=null==_?null:[[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]],
voronoi):extent&&[[extent[0][0],extent[0][1]],[extent[1][0],extent[1][1]]];
},voronoi.size=function(_){return arguments.length?(extent=null==_?null:[[0,0],[+_[0],+_[1]]],
voronoi):extent&&[extent[1][0]-extent[0][0],extent[1][1]-extent[0][1]];
},voronoi},constant$10=function(x){return function(){return x;
}};Transform.prototype={constructor:Transform,scale:function(k){
return 1===k?this:new Transform(this.k*k,this.x,this.y)},translate:function(x,y){
return 0===x&0===y?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y);
},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y];
},applyX:function(x){return x*this.k+this.x},applyY:function(y){
return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k];
},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){
return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x));
},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y));
},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")";
}};var identity$6=new Transform(1,0,0);transform.prototype=Transform.prototype;
var noevent$1=function(){exports.event.preventDefault(),exports.event.stopImmediatePropagation();
},zoom=function(){function zoom(selection$$1){selection$$1.on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",defaultTransform);
}function scale(transform,k){return k=Math.max(k0,Math.min(k1,k)),
k===transform.k?transform:new Transform(k,transform.x,transform.y);
}function translate(transform,p0,p1){var x=p0[0]-p1[0]*transform.k,y=p0[1]-p1[1]*transform.k;
return x===transform.x&&y===transform.y?transform:new Transform(transform.k,x,y);
}function constrain(transform,extent){var dx0=transform.invertX(extent[0][0])-x0,dx1=transform.invertX(extent[1][0])-x1,dy0=transform.invertY(extent[0][1])-y0,dy1=transform.invertY(extent[1][1])-y1;
return transform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1));
}function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2];
}function schedule(transition$$1,transform,center){transition$$1.on("start.zoom",function(){
gesture(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){
gesture(this,arguments).end()}).tween("zoom",function(){var that=this,args=arguments,g=gesture(that,args),e=extent.apply(that,args),p=center||centroid(e),w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=that.__zoom,b="function"==typeof transform?transform.apply(that,args):transform,i=interpolate$$1(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));
return function(t){if(1===t)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k);
}g.zoom(null,t)}})}function gesture(that,args){for(var g,i=0,n=gestures.length;i<n;++i)if((g=gestures[i]).that===that)return g;
return new Gesture(that,args)}function Gesture(that,args){this.that=that,
this.args=args,this.index=-1,this.active=0,this.extent=extent.apply(that,args);
}function wheeled(){function wheelidled(){g.wheel=null,g.end();
}if(filter.apply(this,arguments)){var g=gesture(this,arguments),t=this.__zoom,k=Math.max(k0,Math.min(k1,t.k*Math.pow(2,-exports.event.deltaY*(exports.event.deltaMode?120:1)/500))),p=mouse(this);
if(g.wheel)g.mouse[0][0]===p[0]&&g.mouse[0][1]===p[1]||(g.mouse[1]=t.invert(g.mouse[0]=p)),
clearTimeout(g.wheel);else{if(t.k===k)return;g.mouse=[p,t.invert(p)],
interrupt(this),g.start()}noevent$1(),g.wheel=setTimeout(wheelidled,wheelDelay),
g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent));
}}function mousedowned(){function mousemoved(){noevent$1(),g.moved=!0,
g.zoom("mouse",constrain(translate(g.that.__zoom,g.mouse[0]=mouse(g.that),g.mouse[1]),g.extent));
}function mouseupped(){v.on("mousemove.zoom mouseup.zoom",null),
yesdrag(exports.event.view,g.moved),noevent$1(),g.end()}if(!touchending&&filter.apply(this,arguments)){
var g=gesture(this,arguments),v=select(exports.event.view).on("mousemove.zoom",mousemoved,!0).on("mouseup.zoom",mouseupped,!0),p=mouse(this);
dragDisable(exports.event.view),nopropagation$1(),g.mouse=[p,this.__zoom.invert(p)],
interrupt(this),g.start()}}function dblclicked(){if(filter.apply(this,arguments)){
var t0=this.__zoom,p0=mouse(this),p1=t0.invert(p0),k1=t0.k*(exports.event.shiftKey?.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,arguments));
noevent$1(),duration>0?select(this).transition().duration(duration).call(schedule,t1,p0):select(this).call(zoom.transform,t1);
}}function touchstarted(){if(filter.apply(this,arguments)){var i,t,p,g=gesture(this,arguments),touches$$1=exports.event.changedTouches,n=touches$$1.length;
for(nopropagation$1(),i=0;i<n;++i)t=touches$$1[i],p=touch(this,touches$$1,t.identifier),
p=[p,this.__zoom.invert(p),t.identifier],g.touch0?g.touch1||(g.touch1=p):g.touch0=p;
return touchstarting&&(touchstarting=clearTimeout(touchstarting),
!g.touch1)?(g.end(),p=select(this).on("dblclick.zoom"),void(p&&p.apply(this,arguments))):void(exports.event.touches.length===n&&(touchstarting=setTimeout(function(){
touchstarting=null},touchDelay),interrupt(this),g.start()))}}
function touchmoved(){var i,t,p,l,g=gesture(this,arguments),touches$$1=exports.event.changedTouches,n=touches$$1.length;
for(noevent$1(),touchstarting&&(touchstarting=clearTimeout(touchstarting)),
i=0;i<n;++i)t=touches$$1[i],p=touch(this,touches$$1,t.identifier),
g.touch0&&g.touch0[2]===t.identifier?g.touch0[0]=p:g.touch1&&g.touch1[2]===t.identifier&&(g.touch1[0]=p);
if(t=g.that.__zoom,g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;
t=scale(t,Math.sqrt(dp/dl)),p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],
l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else{if(!g.touch0)return;p=g.touch0[0],
l=g.touch0[1]}g.zoom("touch",constrain(translate(t,p,l),g.extent));
}function touchended(){var i,t,g=gesture(this,arguments),touches$$1=exports.event.changedTouches,n=touches$$1.length;
for(nopropagation$1(),touchending&&clearTimeout(touchending),
touchending=setTimeout(function(){touchending=null},touchDelay),
i=0;i<n;++i)t=touches$$1[i],g.touch0&&g.touch0[2]===t.identifier?delete g.touch0:g.touch1&&g.touch1[2]===t.identifier&&delete g.touch1;
g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0||g.end();
}var touchstarting,touchending,filter=defaultFilter$1,extent=defaultExtent,k0=0,k1=1/0,x0=-k1,x1=k1,y0=x0,y1=x1,duration=250,interpolate$$1=interpolateZoom,gestures=[],listeners=dispatch("start","zoom","end"),touchDelay=500,wheelDelay=150;
return zoom.transform=function(collection,transform){var selection$$1=collection.selection?collection.selection():collection;
selection$$1.property("__zoom",defaultTransform),collection!==selection$$1?schedule(collection,transform):selection$$1.interrupt().each(function(){
gesture(this,arguments).start().zoom(null,"function"==typeof transform?transform.apply(this,arguments):transform).end();
})},zoom.scaleBy=function(selection$$1,k){zoom.scaleTo(selection$$1,function(){
var k0=this.__zoom.k,k1="function"==typeof k?k.apply(this,arguments):k;
return k0*k1})},zoom.scaleTo=function(selection$$1,k){zoom.transform(selection$$1,function(){
var e=extent.apply(this,arguments),t0=this.__zoom,p0=centroid(e),p1=t0.invert(p0),k1="function"==typeof k?k.apply(this,arguments):k;
return constrain(translate(scale(t0,k1),p0,p1),e)})},zoom.translateBy=function(selection$$1,x,y){
zoom.transform(selection$$1,function(){return constrain(this.__zoom.translate("function"==typeof x?x.apply(this,arguments):x,"function"==typeof y?y.apply(this,arguments):y),extent.apply(this,arguments));
})},Gesture.prototype={start:function(){return 1===++this.active&&(this.index=gestures.push(this)-1,
this.emit("start")),this},zoom:function(key,transform){return this.mouse&&"mouse"!==key&&(this.mouse[1]=transform.invert(this.mouse[0])),
this.touch0&&"touch"!==key&&(this.touch0[1]=transform.invert(this.touch0[0])),
this.touch1&&"touch"!==key&&(this.touch1[1]=transform.invert(this.touch1[0])),
this.that.__zoom=transform,this.emit("zoom"),this},end:function(){
return 0===--this.active&&(gestures.splice(this.index,1),this.index=-1,
this.emit("end")),this},emit:function(type){customEvent(new ZoomEvent(zoom,type,this.that.__zoom),listeners.apply,listeners,[type,this.that,this.args]);
}},zoom.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant$10(!!_),
zoom):filter},zoom.extent=function(_){return arguments.length?(extent="function"==typeof _?_:constant$10([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),
zoom):extent},zoom.scaleExtent=function(_){return arguments.length?(k0=+_[0],
k1=+_[1],zoom):[k0,k1]},zoom.translateExtent=function(_){return arguments.length?(x0=+_[0][0],
x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],zoom):[[x0,y0],[x1,y1]]},
zoom.duration=function(_){return arguments.length?(duration=+_,
zoom):duration},zoom.interpolate=function(_){return arguments.length?(interpolate$$1=_,
zoom):interpolate$$1},zoom.on=function(){var value=listeners.on.apply(listeners,arguments);
return value===listeners?zoom:value},zoom},constant$11=function(x){
return function(){return x}},BrushEvent=function(target,type,selection){
this.target=target,this.type=type,this.selection=selection},noevent$2=function(){
exports.event.preventDefault(),exports.event.stopImmediatePropagation();
},MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={
name:"handle"},MODE_CENTER={name:"center"},X={name:"x",handles:["e","w"].map(type$1),
input:function(x,e){return x&&[[x[0],e[0][1]],[x[1],e[1][1]]];
},output:function(xy){return xy&&[xy[0][0],xy[1][0]]}},Y={name:"y",
handles:["n","s"].map(type$1),input:function(y,e){return y&&[[e[0][0],y[0]],[e[1][0],y[1]]];
},output:function(xy){return xy&&[xy[0][1],xy[1][1]]}},XY={name:"xy",
handles:["n","e","s","w","nw","ne","se","sw"].map(type$1),input:function(xy){
return xy},output:function(xy){return xy}},cursors={overlay:"crosshair",
selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",
nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"
},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={
n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,
selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={
overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,
sw:1},brush=function(){return brush$1(XY)},cos=Math.cos,sin=Math.sin,pi$3=Math.PI,halfPi$2=pi$3/2,tau$3=2*pi$3,max$1=Math.max,chord=function(){
function chord(matrix){var k,x,x0,dx,i,j,n=matrix.length,groupSums=[],groupIndex=range(n),subgroupIndex=[],chords=[],groups=chords.groups=new Array(n),subgroups=new Array(n*n);
for(k=0,i=-1;++i<n;){for(x=0,j=-1;++j<n;)x+=matrix[i][j];groupSums.push(x),
subgroupIndex.push(range(n)),k+=x}for(sortGroups&&groupIndex.sort(function(a,b){
return sortGroups(groupSums[a],groupSums[b])}),sortSubgroups&&subgroupIndex.forEach(function(d,i){
d.sort(function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b]);
})}),k=max$1(0,tau$3-padAngle*n)/k,dx=k?padAngle:tau$3/n,x=0,
i=-1;++i<n;){for(x0=x,j=-1;++j<n;){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;
subgroups[dj*n+di]={index:di,subindex:dj,startAngle:a0,endAngle:a1,
value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]
},x+=dx}for(i=-1;++i<n;)for(j=i-1;++j<n;){var source=subgroups[j*n+i],target=subgroups[i*n+j];
(source.value||target.value)&&chords.push(source.value<target.value?{
source:target,target:source}:{source:source,target:target})}return sortChords?chords.sort(sortChords):chords;
}var padAngle=0,sortGroups=null,sortSubgroups=null,sortChords=null;
return chord.padAngle=function(_){return arguments.length?(padAngle=max$1(0,_),
chord):padAngle},chord.sortGroups=function(_){return arguments.length?(sortGroups=_,
chord):sortGroups},chord.sortSubgroups=function(_){return arguments.length?(sortSubgroups=_,
chord):sortSubgroups},chord.sortChords=function(_){return arguments.length?(null==_?sortChords=null:(sortChords=compareValue(_))._=_,
chord):sortChords&&sortChords._},chord},slice$5=Array.prototype.slice,constant$12=function(x){
return function(){return x}},ribbon=function(){function ribbon(){
var buffer,argv=slice$5.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv),sr=+radius.apply(this,(argv[0]=s,
argv)),sa0=startAngle.apply(this,argv)-halfPi$2,sa1=endAngle.apply(this,argv)-halfPi$2,sx0=sr*cos(sa0),sy0=sr*sin(sa0),tr=+radius.apply(this,(argv[0]=t,
argv)),ta0=startAngle.apply(this,argv)-halfPi$2,ta1=endAngle.apply(this,argv)-halfPi$2;
if(context||(context=buffer=path()),context.moveTo(sx0,sy0),context.arc(0,0,sr,sa0,sa1),
sa0===ta0&&sa1===ta1||(context.quadraticCurveTo(0,0,tr*cos(ta0),tr*sin(ta0)),
context.arc(0,0,tr,ta0,ta1)),context.quadraticCurveTo(0,0,sx0,sy0),
context.closePath(),buffer)return context=null,buffer+""||null;
}var source=defaultSource,target=defaultTarget,radius=defaultRadius$1,startAngle=defaultStartAngle,endAngle=defaultEndAngle,context=null;
return ribbon.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$12(+_),
ribbon):radius},ribbon.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:constant$12(+_),
ribbon):startAngle},ribbon.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:constant$12(+_),
ribbon):endAngle},ribbon.source=function(_){return arguments.length?(source=_,
ribbon):source},ribbon.target=function(_){return arguments.length?(target=_,
ribbon):target},ribbon.context=function(_){return arguments.length?(context=null==_?null:_,
ribbon):context},ribbon},adder=function(){return new Adder};Adder.prototype={
constructor:Adder,reset:function(){this.s=this.t=0},add:function(y){
add$1(temp,y,this.t),add$1(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t;
},valueOf:function(){return this.s}};var lambda00,phi00,lambda0,cosPhi0,sinPhi0,lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,ranges,range$1,W0,W1,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00$2,phi00$2,x0,y0,z0,temp=new Adder,epsilon$4=1e-6,epsilon2$2=1e-12,pi$4=Math.PI,halfPi$3=pi$4/2,quarterPi=pi$4/4,tau$4=2*pi$4,degrees$1=180/pi$4,radians=pi$4/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos$1=Math.cos,ceil=Math.ceil,exp=Math.exp,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$1=Math.sign||function(x){
return x>0?1:x<0?-1:0},sqrt$1=Math.sqrt,tan=Math.tan,streamObjectType={
Feature:function(feature,stream){streamGeometry(feature.geometry,stream);
},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream);
}},streamGeometryType={Sphere:function(object,stream){stream.sphere();
},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2]);
},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],
stream.point(object[0],object[1],object[2])},LineString:function(object,stream){
streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){
for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0);
},Polygon:function(object,stream){streamPolygon(object.coordinates,stream);
},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream);
},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream);
}},geoStream=function(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream);
},areaRingSum=adder(),areaSum=adder(),areaStream={point:noop$2,
lineStart:noop$2,lineEnd:noop$2,polygonStart:function(){areaRingSum.reset(),
areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd;
},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?tau$4+areaRing:areaRing),
this.lineStart=this.lineEnd=this.point=noop$2},sphere:function(){
areaSum.add(tau$4)}},area$2=function(object){return areaSum.reset(),
geoStream(object,areaStream),2*areaSum},deltaSum=adder(),boundsStream={
point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,
polygonStart:function(){boundsStream.point=boundsRingPoint,boundsStream.lineStart=boundsRingStart,
boundsStream.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream.polygonStart();
},polygonEnd:function(){areaStream.polygonEnd(),boundsStream.point=boundsPoint,
boundsStream.lineStart=boundsLineStart,boundsStream.lineEnd=boundsLineEnd,
areaRingSum<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon$4?phi1=90:deltaSum<-epsilon$4&&(phi0=-90),
range$1[0]=lambda0$1,range$1[1]=lambda1}},bounds=function(feature){
var i,n,a,b,merged,deltaMax,delta;if(phi1=lambda1=-(lambda0$1=phi0=1/0),
ranges=[],geoStream(feature,boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),
i=1,a=ranges[0],merged=[a];i<n;++i)b=ranges[i],rangeContains(a,b[0])||rangeContains(a,b[1])?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),
angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);
for(deltaMax=-(1/0),n=merged.length-1,i=0,a=merged[n];i<=n;a=b,
++i)b=merged[i],(delta=angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,
lambda0$1=b[0],lambda1=a[1])}return ranges=range$1=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]];
},centroidStream={sphere:noop$2,point:centroidPoint,lineStart:centroidLineStart,
lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,
centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){
centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd;
}},centroid$1=function(object){W0=W1=X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,
geoStream(object,centroidStream);var x=X2,y=Y2,z=Z2,m=x*x+y*y+z*z;
return m<epsilon2$2&&(x=X1,y=Y1,z=Z1,W1<epsilon$4&&(x=X0,y=Y0,
z=Z0),m=x*x+y*y+z*z,m<epsilon2$2)?[NaN,NaN]:[atan2(y,x)*degrees$1,asin$1(z/sqrt$1(m))*degrees$1];
},constant$13=function(x){return function(){return x}},compose=function(a,b){
function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){
return x=b.invert(x,y),x&&a.invert(x[0],x[1])}),compose};rotationIdentity.invert=rotationIdentity;
var lambda0$2,sinPhi0$1,cosPhi0$1,x00,y00,x0$1,y0$1,x00$1,y00$1,x0$3,y0$3,rotation=function(rotate){
function forward(coordinates){return coordinates=rotate(coordinates[0]*radians,coordinates[1]*radians),
coordinates[0]*=degrees$1,coordinates[1]*=degrees$1,coordinates;
}return rotate=rotateRadians(rotate[0]*radians,rotate[1]*radians,rotate.length>2?rotate[2]*radians:0),
forward.invert=function(coordinates){return coordinates=rotate.invert(coordinates[0]*radians,coordinates[1]*radians),
coordinates[0]*=degrees$1,coordinates[1]*=degrees$1,coordinates;
},forward},circle$1=function(){function point(x,y){ring.push(x=rotate(x,y)),
x[0]*=degrees$1,x[1]*=degrees$1}function circle(){var c=center.apply(this,arguments),r=radius.apply(this,arguments)*radians,p=precision.apply(this,arguments)*radians;
return ring=[],rotate=rotateRadians(-c[0]*radians,-c[1]*radians,0).invert,
circleStream(stream,r,p,1),c={type:"Polygon",coordinates:[ring]
},ring=rotate=null,c}var ring,rotate,center=constant$13([0,0]),radius=constant$13(90),precision=constant$13(6),stream={
point:point};return circle.center=function(_){return arguments.length?(center="function"==typeof _?_:constant$13([+_[0],+_[1]]),
circle):center},circle.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant$13(+_),
circle):radius},circle.precision=function(_){return arguments.length?(precision="function"==typeof _?_:constant$13(+_),
circle):precision},circle},clipBuffer=function(){var line,lines=[];
return{point:function(x,y){line.push([x,y])},lineStart:function(){
lines.push(line=[])},lineEnd:noop$2,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()));
},result:function(){var result=lines;return lines=[],line=null,
result}}},clipLine=function(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],bx=b[0],by=b[1],t0=0,t1=1,dx=bx-ax,dy=by-ay;
if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r);
}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){
if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;
r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;
r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,
dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){
if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),
t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}},pointEqual=function(a,b){
return abs(a[0]-b[0])<epsilon$4&&abs(a[1]-b[1])<epsilon$4},clipPolygon=function(segments,compareIntersection,startInside,interpolate,stream){
var i,n,subject=[],clip=[];if(segments.forEach(function(segment){
if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];
if(pointEqual(p0,p1)){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);
return void stream.lineEnd()}subject.push(x=new Intersection(p0,segment,null,(!0))),
clip.push(x.o=new Intersection(p0,null,x,(!1))),subject.push(x=new Intersection(p1,segment,null,(!1))),
clip.push(x.o=new Intersection(p1,null,x,(!0)))}}),subject.length){
for(clip.sort(compareIntersection),link$1(subject),link$1(clip),
i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){
for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;
points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,
current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);
current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);
current=current.p}current=current.o,points=current.z,isSubject=!isSubject;
}while(!current.v);stream.lineEnd()}}},clipMax=1e9,clipMin=-clipMax,extent$1=function(){
var cache,cacheStream,clip,x0=0,y0=0,x1=960,y1=500;return clip={
stream:function(stream){return cache&&cacheStream===stream?cache:cache=clipExtent(x0,y0,x1,y1)(cacheStream=stream);
},extent:function(_){return arguments.length?(x0=+_[0][0],y0=+_[0][1],
x1=+_[1][0],y1=+_[1][1],cache=cacheStream=null,clip):[[x0,y0],[x1,y1]];
}}},lengthSum=adder(),lengthStream={sphere:noop$2,point:noop$2,
lineStart:lengthLineStart,lineEnd:noop$2,polygonStart:noop$2,
polygonEnd:noop$2},length$2=function(object){return lengthSum.reset(),
geoStream(object,lengthStream),+lengthSum},coordinates=[null,null],object$1={
type:"LineString",coordinates:coordinates},distance=function(a,b){
return coordinates[0]=a,coordinates[1]=b,length$2(object$1)},interpolate$2=function(a,b){
var x0=a[0]*radians,y0=a[1]*radians,x1=b[0]*radians,y1=b[1]*radians,cy0=cos$1(y0),sy0=sin$1(y0),cy1=cos$1(y1),sy1=sin$1(y1),kx0=cy0*cos$1(x0),ky0=cy0*sin$1(x0),kx1=cy1*cos$1(x1),ky1=cy1*sin$1(x1),d=2*asin$1(sqrt$1(haversin(y1-y0)+cy0*cy1*haversin(x1-x0))),k=sin$1(d),interpolate=d?function(t){
var B=sin$1(t*=d)/k,A=sin$1(d-t)/k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;
return[atan2(y,x)*degrees$1,atan2(z,sqrt$1(x*x+y*y))*degrees$1];
}:function(){return[x0*degrees$1,y0*degrees$1]};return interpolate.distance=d,
interpolate},identity$7=function(x){return x},areaSum$1=adder(),areaRingSum$1=adder(),areaStream$1={
point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function(){
areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1;
},polygonEnd:function(){areaStream$1.lineStart=areaStream$1.lineEnd=areaStream$1.point=noop$2,
areaSum$1.add(abs(areaRingSum$1)),areaRingSum$1.reset()},result:function(){
var area=areaSum$1/2;return areaSum$1.reset(),area}},x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream$1={
point:boundsPoint$1,lineStart:noop$2,lineEnd:noop$2,polygonStart:noop$2,
polygonEnd:noop$2,result:function(){var bounds=[[x0$2,y0$2],[x1,y1]];
return x1=y1=-(y0$2=x0$2=1/0),bounds}},X0$1=0,Y0$1=0,Z0$1=0,X1$1=0,Y1$1=0,Z1$1=0,X2$1=0,Y2$1=0,Z2$1=0,centroidStream$1={
point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,
polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,
centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){
centroidStream$1.point=centroidPoint$1,centroidStream$1.lineStart=centroidLineStart$1,
centroidStream$1.lineEnd=centroidLineEnd$1},result:function(){
var centroid=Z2$1?[X2$1/Z2$1,Y2$1/Z2$1]:Z1$1?[X1$1/Z1$1,Y1$1/Z1$1]:Z0$1?[X0$1/Z0$1,Y0$1/Z0$1]:[NaN,NaN];
return X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0,centroid;
}};PathContext.prototype={_radius:4.5,pointRadius:function(_){
return this._radius=_,this},polygonStart:function(){this._line=0;
},polygonEnd:function(){this._line=NaN},lineStart:function(){
this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),
this._point=NaN},point:function(x,y){switch(this._point){case 0:
this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);
break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,tau$4);
}},result:noop$2},PathString.prototype={_circle:circle$2(4.5),
pointRadius:function(_){return this._circle=circle$2(_),this},
polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN;
},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),
this._point=NaN},point:function(x,y){switch(this._point){case 0:
this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);
break;default:this._string.push("M",x,",",y,this._circle)}},result:function(){
if(this._string.length){var result=this._string.join("");return this._string=[],
result}}};var index$3=function(projection,context){function path(object){
return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),
geoStream(object,projectionStream(contextStream))),contextStream.result();
}var projectionStream,contextStream,pointRadius=4.5;return path.area=function(object){
return geoStream(object,projectionStream(areaStream$1)),areaStream$1.result();
},path.bounds=function(object){return geoStream(object,projectionStream(boundsStream$1)),
boundsStream$1.result()},path.centroid=function(object){return geoStream(object,projectionStream(centroidStream$1)),
centroidStream$1.result()},path.projection=function(_){return arguments.length?(projectionStream=null==_?(projection=null,
identity$7):(projection=_).stream,path):projection},path.context=function(_){
return arguments.length?(contextStream=null==_?(context=null,
new PathString):new PathContext(context=_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),
path):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),
+_),path):pointRadius},path.projection(projection).context(context);
},sum$2=adder(),polygonContains=function(polygon,point){var lambda=point[0],phi=point[1],normal=[sin$1(lambda),-cos$1(lambda),0],angle=0,winding=0;
sum$2.reset();for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=point0[0],phi0=point0[1]/2+quarterPi,sinPhi0=sin$1(phi0),cosPhi0=cos$1(phi0),j=0;j<m;++j,
lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){
var point1=ring[j],lambda1=point1[0],phi1=point1[1]/2+quarterPi,sinPhi1=sin$1(phi1),cosPhi1=cos$1(phi1),delta=lambda1-lambda0,sign$$1=delta>=0?1:-1,absDelta=sign$$1*delta,antimeridian=absDelta>pi$4,k=sinPhi0*sinPhi1;
if(sum$2.add(atan2(k*sign$$1*sin$1(absDelta),cosPhi0*cosPhi1+k*cos$1(absDelta))),
angle+=antimeridian?delta+sign$$1*tau$4:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){
var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);
var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);
var phiArc=(antimeridian^delta>=0?-1:1)*asin$1(intersection[2]);
(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1);
}}return(angle<-epsilon$4||angle<epsilon$4&&sum$2<-epsilon$4)^1&winding;
},clip=function(pointVisible,clipLine,interpolate,start){return function(rotate,sink){
function point(lambda,phi){var point=rotate(lambda,phi);pointVisible(lambda=point[0],phi=point[1])&&sink.point(lambda,phi);
}function pointLine(lambda,phi){var point=rotate(lambda,phi);line.point(point[0],point[1]);
}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){
clip.point=point,line.lineEnd()}function pointRing(lambda,phi){
ring.push([lambda,phi]);var point=rotate(lambda,phi);ringSink.point(point[0],point[1]);
}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){
pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;
if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if(segment=ringSegments[0],
(m=segment.length-1)>0){for(polygonStarted||(sink.polygonStart(),
polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);
sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),
segments.push(ringSegments.filter(validSegment))}var polygon,segments,ring,line=clipLine(sink),rotatedStart=rotate.invert(start[0],start[1]),ringBuffer=clipBuffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={
point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){
clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,
segments=[],polygon=[]},polygonEnd:function(){clip.point=point,
clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge(segments);
var startInside=polygonContains(polygon,rotatedStart);segments.length?(polygonStarted||(sink.polygonStart(),
polygonStarted=!0),clipPolygon(segments,compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),
polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),
sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),
segments=polygon=null},sphere:function(){sink.polygonStart(),
sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),
sink.polygonEnd()}};return clip}},clipAntimeridian=clip(function(){
return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$4,-halfPi$3]),clipCircle=function(radius,delta){
function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to);
}function visible(lambda,phi){return cos$1(lambda)*cos$1(phi)>cr;
}function clipLine(stream){var point0,c0,v0,v00,clean;return{
lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){
var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?pi$4:-pi$4),phi):0;
if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(point2=intersect(point0,point1),
(pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[0]+=epsilon$4,
point1[1]+=epsilon$4,v=visible(point1[0],point1[1]))),v!==v0)clean=0,
v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),
stream.point(point2[0],point2[1]),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){
var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),
stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),
stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1])));
}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),
point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),
point0=null},clean:function(){return clean|(v00&&v0)<<1}}}function intersect(a,b,two){
var pa=cartesian(a),pb=cartesian(b),n1=[1,0,0],n2=cartesianCross(pa,pb),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;
if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1),B=cartesianScale(n2,c2);
cartesianAddInPlace(A,B);var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);
if(!(t2<0)){var t=sqrt$1(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),
q=spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];
lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=abs(delta-pi$4)<epsilon$4,meridian=polar||delta<epsilon$4;
if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),meridian?polar?phi0+phi1>0^q[1]<(abs(q[0]-lambda0)<epsilon$4?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>pi$4^(lambda0<=q[0]&&q[0]<=lambda1)){
var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),
[q,spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:pi$4-radius,code=0;
return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),
code}var cr=cos$1(radius),smallRadius=cr>0,notHemisphere=abs(cr)>epsilon$4;
return clip(visible,clipLine,interpolate,smallRadius?[0,-radius]:[-pi$4,radius-pi$4]);
},transform$1=function(methods){return{stream:transformer(methods)
}};TransformStream.prototype={constructor:TransformStream,point:function(x,y){
this.stream.point(x,y)},sphere:function(){this.stream.sphere();
},lineStart:function(){this.stream.lineStart()},lineEnd:function(){
this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart();
},polygonEnd:function(){this.stream.polygonEnd()}};var maxDepth=16,cosMinDistance=cos$1(30*radians),resample=function(project,delta2){
return+delta2?resample$1(project,delta2):resampleNone(project);
},transformRadians=transformer({point:function(x,y){this.stream.point(x*radians,y*radians);
}}),conicEqualArea=function(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442]);
},albers=function(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]);
},albersUsa=function(){function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];
return point=null,lower48Point.point(x,y),point||(alaskaPoint.point(x,y),
point)||(hawaiiPoint.point(x,y),point)}function reset(){return cache=cacheStream=null,
albersUsa}var cache,cacheStream,lower48Point,alaskaPoint,hawaiiPoint,point,lower48=albers(),alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={
point:function(x,y){point=[x,y]}};return albersUsa.invert=function(coordinates){
var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;
return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates);
},albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:cache=multiplex([lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)]);
},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),
alaska.precision(_),hawaii.precision(_),reset()):lower48.precision();
},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),
alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale();
},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();
var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream),
alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+epsilon$4,y+.12*k+epsilon$4],[x-.214*k-epsilon$4,y+.234*k-epsilon$4]]).stream(pointStream),
hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+epsilon$4,y+.166*k+epsilon$4],[x-.115*k-epsilon$4,y+.234*k-epsilon$4]]).stream(pointStream),
reset()},albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object);
},albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object);
},albersUsa.scale(1070)},azimuthalEqualAreaRaw=azimuthalRaw(function(cxcy){
return sqrt$1(2/(1+cxcy))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(z){
return 2*asin$1(z/2)});var azimuthalEqualArea=function(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999);
},azimuthalEquidistantRaw=azimuthalRaw(function(c){return(c=acos(c))&&c/sin$1(c);
});azimuthalEquidistantRaw.invert=azimuthalInvert(function(z){
return z});var azimuthalEquidistant=function(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999);
};mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-halfPi$3];
};var mercator=function(){return mercatorProjection(mercatorRaw).scale(961/tau$4);
},conicConformal=function(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30]);
};equirectangularRaw.invert=equirectangularRaw;var equirectangular=function(){
return projection(equirectangularRaw).scale(152.63)},conicEquidistant=function(){
return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389]);
};gnomonicRaw.invert=azimuthalInvert(atan);var gnomonic=function(){
return projection(gnomonicRaw).scale(144.049).clipAngle(60)},identity$8=function(){
function reset(){return cache=cacheStream=null,projection}var y0,x1,y1,cache,cacheStream,projection,k=1,tx=0,ty=0,sx=1,sy=1,transform=identity$7,x0=null,clip=identity$7;
return projection={stream:function(stream){return cache&&cacheStream===stream?cache:cache=transform(clip(cacheStream=stream));
},clipExtent:function(_){return arguments.length?(clip=null==_?(x0=y0=x1=y1=null,
identity$7):clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),
reset()):null==x0?null:[[x0,y0],[x1,y1]]},scale:function(_){return arguments.length?(transform=scaleTranslate((k=+_)*sx,k*sy,tx,ty),
reset()):k},translate:function(_){return arguments.length?(transform=scaleTranslate(k*sx,k*sy,tx=+_[0],ty=+_[1]),
reset()):[tx,ty]},reflectX:function(_){return arguments.length?(transform=scaleTranslate(k*(sx=_?-1:1),k*sy,tx,ty),
reset()):sx<0},reflectY:function(_){return arguments.length?(transform=scaleTranslate(k*sx,k*(sy=_?-1:1),tx,ty),
reset()):sy<0},fitExtent:function(extent,object){return fitExtent(projection,extent,object);
},fitSize:function(size,object){return fitSize(projection,size,object);
}}};orthographicRaw.invert=azimuthalInvert(asin$1);var orthographic=function(){
return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon$4);
};stereographicRaw.invert=azimuthalInvert(function(z){return 2*atan(z);
});var stereographic=function(){return projection(stereographicRaw).scale(250).clipAngle(142);
};transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-halfPi$3];
};var transverseMercator=function(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;
return m.center=function(_){return arguments.length?center([-_[1],_[0]]):(_=center(),
[_[1],-_[0]])},m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):(_=rotate(),
[_[0],_[1],_[2]-90])},rotate([0,0,90]).scale(159.155)};exports.version=version,
exports.bisect=bisectRight,exports.bisectRight=bisectRight,exports.bisectLeft=bisectLeft,
exports.ascending=ascending,exports.bisector=bisector,exports.descending=descending,
exports.deviation=deviation,exports.extent=extent,exports.histogram=histogram,
exports.thresholdFreedmanDiaconis=freedmanDiaconis,exports.thresholdScott=scott,
exports.thresholdSturges=sturges,exports.max=max,exports.mean=mean,
exports.median=median,exports.merge=merge,exports.min=min,exports.pairs=pairs,
exports.permute=permute,exports.quantile=threshold,exports.range=range,
exports.scan=scan,exports.shuffle=shuffle,exports.sum=sum,exports.ticks=ticks,
exports.tickStep=tickStep,exports.transpose=transpose,exports.variance=variance,
exports.zip=zip,exports.entries=entries,exports.keys=keys,exports.values=values,
exports.map=map$1,exports.set=set,exports.nest=nest,exports.randomUniform=uniform,
exports.randomNormal=normal,exports.randomLogNormal=logNormal,
exports.randomBates=bates,exports.randomIrwinHall=irwinHall,exports.randomExponential=exponential,
exports.easeLinear=linear,exports.easeQuad=quadInOut,exports.easeQuadIn=quadIn,
exports.easeQuadOut=quadOut,exports.easeQuadInOut=quadInOut,exports.easeCubic=cubicInOut,
exports.easeCubicIn=cubicIn,exports.easeCubicOut=cubicOut,exports.easeCubicInOut=cubicInOut,
exports.easePoly=polyInOut,exports.easePolyIn=polyIn,exports.easePolyOut=polyOut,
exports.easePolyInOut=polyInOut,exports.easeSin=sinInOut,exports.easeSinIn=sinIn,
exports.easeSinOut=sinOut,exports.easeSinInOut=sinInOut,exports.easeExp=expInOut,
exports.easeExpIn=expIn,exports.easeExpOut=expOut,exports.easeExpInOut=expInOut,
exports.easeCircle=circleInOut,exports.easeCircleIn=circleIn,
exports.easeCircleOut=circleOut,exports.easeCircleInOut=circleInOut,
exports.easeBounce=bounceOut,exports.easeBounceIn=bounceIn,exports.easeBounceOut=bounceOut,
exports.easeBounceInOut=bounceInOut,exports.easeBack=backInOut,
exports.easeBackIn=backIn,exports.easeBackOut=backOut,exports.easeBackInOut=backInOut,
exports.easeElastic=elasticOut,exports.easeElasticIn=elasticIn,
exports.easeElasticOut=elasticOut,exports.easeElasticInOut=elasticInOut,
exports.polygonArea=area,exports.polygonCentroid=centroid,exports.polygonHull=hull,
exports.polygonContains=contains,exports.polygonLength=length$1,
exports.path=path,exports.quadtree=quadtree,exports.queue=queue,
exports.arc=arc,exports.area=area$1,exports.line=line,exports.pie=pie,
exports.radialArea=radialArea,exports.radialLine=radialLine$1,
exports.symbol=symbol,exports.symbols=symbols,exports.symbolCircle=circle,
exports.symbolCross=cross$1,exports.symbolDiamond=diamond,exports.symbolSquare=square,
exports.symbolStar=star,exports.symbolTriangle=triangle,exports.symbolWye=wye,
exports.curveBasisClosed=basisClosed,exports.curveBasisOpen=basisOpen,
exports.curveBasis=basis,exports.curveBundle=bundle,exports.curveCardinalClosed=cardinalClosed,
exports.curveCardinalOpen=cardinalOpen,exports.curveCardinal=cardinal,
exports.curveCatmullRomClosed=catmullRomClosed,exports.curveCatmullRomOpen=catmullRomOpen,
exports.curveCatmullRom=catmullRom,exports.curveLinearClosed=linearClosed,
exports.curveLinear=curveLinear,exports.curveMonotoneX=monotoneX,
exports.curveMonotoneY=monotoneY,exports.curveNatural=natural,
exports.curveStep=step,exports.curveStepAfter=stepAfter,exports.curveStepBefore=stepBefore,
exports.stack=stack,exports.stackOffsetExpand=expand,exports.stackOffsetNone=none,
exports.stackOffsetSilhouette=silhouette,exports.stackOffsetWiggle=wiggle,
exports.stackOrderAscending=ascending$1,exports.stackOrderDescending=descending$2,
exports.stackOrderInsideOut=insideOut,exports.stackOrderNone=none$1,
exports.stackOrderReverse=reverse,exports.color=color,exports.rgb=rgb,
exports.hsl=hsl,exports.lab=lab,exports.hcl=hcl,exports.cubehelix=cubehelix,
exports.interpolate=interpolate,exports.interpolateArray=array$1,
exports.interpolateDate=date,exports.interpolateNumber=interpolateNumber,
exports.interpolateObject=object,exports.interpolateRound=interpolateRound,
exports.interpolateString=interpolateString,exports.interpolateTransformCss=interpolateTransformCss,
exports.interpolateTransformSvg=interpolateTransformSvg,exports.interpolateZoom=interpolateZoom,
exports.interpolateRgb=interpolateRgb,exports.interpolateRgbBasis=rgbBasis,
exports.interpolateRgbBasisClosed=rgbBasisClosed,exports.interpolateHsl=hsl$2,
exports.interpolateHslLong=hslLong,exports.interpolateLab=lab$1,
exports.interpolateHcl=hcl$2,exports.interpolateHclLong=hclLong,
exports.interpolateCubehelix=cubehelix$2,exports.interpolateCubehelixLong=cubehelixLong,
exports.interpolateBasis=basis$2,exports.interpolateBasisClosed=basisClosed$1,
exports.quantize=quantize,exports.dispatch=dispatch,exports.dsvFormat=dsv,
exports.csvParse=csvParse,exports.csvParseRows=csvParseRows,exports.csvFormat=csvFormat,
exports.csvFormatRows=csvFormatRows,exports.tsvParse=tsvParse,
exports.tsvParseRows=tsvParseRows,exports.tsvFormat=tsvFormat,
exports.tsvFormatRows=tsvFormatRows,exports.request=request,exports.html=html,
exports.json=json,exports.text=text,exports.xml=xml,exports.csv=csv$1,
exports.tsv=tsv$1,exports.now=now,exports.timer=timer,exports.timerFlush=timerFlush,
exports.timeout=timeout$1,exports.interval=interval$1,exports.timeInterval=newInterval,
exports.timeMillisecond=millisecond,exports.timeMilliseconds=milliseconds,
exports.timeSecond=second,exports.timeSeconds=seconds,exports.timeMinute=minute,
exports.timeMinutes=minutes,exports.timeHour=hour,exports.timeHours=hours,
exports.timeDay=day,exports.timeDays=days,exports.timeWeek=sunday,
exports.timeWeeks=sundays,exports.timeSunday=sunday,exports.timeSundays=sundays,
exports.timeMonday=monday,exports.timeMondays=mondays,exports.timeTuesday=tuesday,
exports.timeTuesdays=tuesdays,exports.timeWednesday=wednesday,
exports.timeWednesdays=wednesdays,exports.timeThursday=thursday,
exports.timeThursdays=thursdays,exports.timeFriday=friday,exports.timeFridays=fridays,
exports.timeSaturday=saturday,exports.timeSaturdays=saturdays,
exports.timeMonth=month,exports.timeMonths=months,exports.timeYear=year,
exports.timeYears=years,exports.utcMillisecond=millisecond,exports.utcMilliseconds=milliseconds,
exports.utcSecond=second,exports.utcSeconds=seconds,exports.utcMinute=utcMinute,
exports.utcMinutes=utcMinutes,exports.utcHour=utcHour,exports.utcHours=utcHours,
exports.utcDay=utcDay,exports.utcDays=utcDays,exports.utcWeek=utcSunday,
exports.utcWeeks=utcSundays,exports.utcSunday=utcSunday,exports.utcSundays=utcSundays,
exports.utcMonday=utcMonday,exports.utcMondays=utcMondays,exports.utcTuesday=utcTuesday,
exports.utcTuesdays=utcTuesdays,exports.utcWednesday=utcWednesday,
exports.utcWednesdays=utcWednesdays,exports.utcThursday=utcThursday,
exports.utcThursdays=utcThursdays,exports.utcFriday=utcFriday,
exports.utcFridays=utcFridays,exports.utcSaturday=utcSaturday,
exports.utcSaturdays=utcSaturdays,exports.utcMonth=utcMonth,exports.utcMonths=utcMonths,
exports.utcYear=utcYear,exports.utcYears=utcYears,exports.formatLocale=formatLocale,
exports.formatDefaultLocale=defaultLocale,exports.formatSpecifier=formatSpecifier,
exports.precisionFixed=precisionFixed,exports.precisionPrefix=precisionPrefix,
exports.precisionRound=precisionRound,exports.isoFormat=formatIso,
exports.isoParse=parseIso,exports.timeFormatLocale=formatLocale$1,
exports.timeFormatDefaultLocale=defaultLocale$1,exports.scaleBand=band,
exports.scalePoint=point$4,exports.scaleIdentity=identity$4,exports.scaleLinear=linear$2,
exports.scaleLog=log,exports.scaleOrdinal=ordinal,exports.scaleImplicit=implicit,
exports.scalePow=pow,exports.scaleSqrt=sqrt,exports.scaleQuantile=quantile$$1,
exports.scaleQuantize=quantize$1,exports.scaleThreshold=threshold$1,
exports.scaleTime=time,exports.scaleUtc=utcTime,exports.schemeCategory10=category10,
exports.schemeCategory20b=category20b,exports.schemeCategory20c=category20c,
exports.schemeCategory20=category20,exports.scaleSequential=sequential,
exports.interpolateCubehelixDefault=cubehelix$3,exports.interpolateRainbow=rainbow$1,
exports.interpolateWarm=warm,exports.interpolateCool=cool,exports.interpolateViridis=viridis,
exports.interpolateMagma=magma,exports.interpolateInferno=inferno,
exports.interpolatePlasma=plasma,exports.creator=creator,exports.customEvent=customEvent,
exports.local=local,exports.matcher=matcher$1,exports.mouse=mouse,
exports.namespace=namespace,exports.namespaces=namespaces,exports.select=select,
exports.selectAll=selectAll,exports.selection=selection,exports.selector=selector,
exports.selectorAll=selectorAll,exports.touch=touch,exports.touches=touches,
exports.window=window,exports.active=active,exports.interrupt=interrupt,
exports.transition=transition,exports.axisTop=axisTop,exports.axisRight=axisRight,
exports.axisBottom=axisBottom,exports.axisLeft=axisLeft,exports.cluster=cluster,
exports.hierarchy=hierarchy,exports.pack=index,exports.packSiblings=siblings,
exports.packEnclose=enclose,exports.partition=partition,exports.stratify=stratify,
exports.tree=tree,exports.treemap=index$1,exports.treemapBinary=binary,
exports.treemapDice=treemapDice,exports.treemapSlice=treemapSlice,
exports.treemapSliceDice=sliceDice,exports.treemapSquarify=squarify,
exports.treemapResquarify=resquarify,exports.forceCenter=center$1,
exports.forceCollide=collide,exports.forceLink=link,exports.forceManyBody=manyBody,
exports.forceSimulation=simulation,exports.forceX=x$3,exports.forceY=y$3,
exports.drag=drag,exports.dragDisable=dragDisable,exports.dragEnable=yesdrag,
exports.voronoi=voronoi,exports.zoom=zoom,exports.zoomIdentity=identity$6,
exports.zoomTransform=transform,exports.brush=brush,exports.brushX=brushX,
exports.brushY=brushY,exports.brushSelection=brushSelection,exports.chord=chord,
exports.ribbon=ribbon,exports.geoAlbers=albers,exports.geoAlbersUsa=albersUsa,
exports.geoArea=area$2,exports.geoAzimuthalEqualArea=azimuthalEqualArea,
exports.geoAzimuthalEqualAreaRaw=azimuthalEqualAreaRaw,exports.geoAzimuthalEquidistant=azimuthalEquidistant,
exports.geoAzimuthalEquidistantRaw=azimuthalEquidistantRaw,exports.geoBounds=bounds,
exports.geoCentroid=centroid$1,exports.geoCircle=circle$1,exports.geoClipExtent=extent$1,
exports.geoConicConformal=conicConformal,exports.geoConicConformalRaw=conicConformalRaw,
exports.geoConicEqualArea=conicEqualArea,exports.geoConicEqualAreaRaw=conicEqualAreaRaw,
exports.geoConicEquidistant=conicEquidistant,exports.geoConicEquidistantRaw=conicEquidistantRaw,
exports.geoDistance=distance,exports.geoEquirectangular=equirectangular,
exports.geoEquirectangularRaw=equirectangularRaw,exports.geoGnomonic=gnomonic,
exports.geoGnomonicRaw=gnomonicRaw,exports.geoGraticule=graticule,
exports.geoGraticule10=graticule10,exports.geoIdentity=identity$8,
exports.geoInterpolate=interpolate$2,exports.geoLength=length$2,
exports.geoMercator=mercator,exports.geoMercatorRaw=mercatorRaw,
exports.geoOrthographic=orthographic,exports.geoOrthographicRaw=orthographicRaw,
exports.geoPath=index$3,exports.geoProjection=projection,exports.geoProjectionMutator=projectionMutator,
exports.geoRotation=rotation,exports.geoStereographic=stereographic,
exports.geoStereographicRaw=stereographicRaw,exports.geoStream=geoStream,
exports.geoTransform=transform$1,exports.geoTransverseMercator=transverseMercator,
exports.geoTransverseMercatorRaw=transverseMercatorRaw,Object.defineProperty(exports,"__esModule",{
value:!0})})},function(module,exports,__webpack_require__){"use strict";
var __extends=this&&this.__extends||function(d,b){function __(){
this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},base_api_1=__webpack_require__(2),localization_1=__webpack_require__(7),utils_1=__webpack_require__(8),linechart_render_1=__webpack_require__(38),linechart_data_1=__webpack_require__(42),linechart_event_1=__webpack_require__(43);
console.log("line chart is loaded.");var LineChart=function(_super){
function LineChart(options){var _this=_super.call(this)||this;
_this.options={renderType:"time",render:{},formatter:{},data:{
xAxis:{},yAxis:{}}};try{_this.typeName="Line Chart",_this.options=utils_1.Utils.extend(_this.options,options),
_this.language=new localization_1.Localization(_this.options.language),
_this.event=new linechart_event_1.LineChartEvent(_this),_this.data=new linechart_data_1.LineChartData(_this),
_this.render=new linechart_render_1.LineChartRender(_this)}catch(err){
console.error(err.toString())}return _this}return __extends(LineChart,_super),
LineChart.prototype.addData=function(data){var _this=this;return Array.isArray(data)?(data.forEach(function(d){
_this.data.addData(d)}),this):(console.error("data format is not acceptable."),
this)},LineChart.prototype.update=function(){return this.render.update(),
this},LineChart.prototype.reloadData=function(data){var _this=this;
return this.data.getSeries().forEach(function(d){_this.data.cleanSeriesData(d);
}),this.addData(data),this},LineChart.prototype.on=function(eventName,callback){
return console.log(eventName),this.event.setEventHandler(eventName,callback),
this},LineChart.prototype.updateSettings=function(options){return this.render.updateSettings(options),
this},LineChart.prototype.zoomX=function(start,end){return this.render.updateXAxisRange(start,end),
this},LineChart.prototype.toggleLegend=function(name,select){
return void 0===select?this.render.legendToggle(name):this.render.legendSelect(name,select),
this},LineChart}(base_api_1.BaseApi);exports.LineChart=LineChart;
},function(module,exports,__webpack_require__){"use strict";var utils_1=__webpack_require__(8),linechart_style_1=__webpack_require__(39),linechart_render_engine_1=__webpack_require__(40),LineChartRender=function(){
function LineChartRender(parent){this.defaultOptions={},this.chart=parent,
this.style=new linechart_style_1.LineChartStyle(this.chart),this.defaultOptions=utils_1.Utils.extend(this.defaultOptions,this.style.getStyleOptions()),
this.defaultOptions=utils_1.Utils.extend(this.defaultOptions,this.chart.options.render),
this.engine=new linechart_render_engine_1.LineChartRenderEngine(this.chart,this.defaultOptions);
}return LineChartRender.prototype.update=function(){return this.engine.update(),
this},LineChartRender.prototype.updateSettings=function(options){
return this.engine.updateSettings(options),this},LineChartRender.prototype.redraw=function(){
return this.engine.redraw(),this},LineChartRender.prototype.updateXAxisRange=function(start,end){
return this.engine.updateXAxisRange(start,end),this},LineChartRender.prototype.legendSelect=function(name,select){
return void 0===select&&(select=!0),select===!0?this.engine.core.dispatchAction({
type:"legendSelect",name:name}):this.engine.core.dispatchAction({
type:"legendUnSelect",name:name}),this},LineChartRender.prototype.legendToggle=function(name){
return this.engine.core.dispatchAction({type:"legendToggleSelect",
name:name}),this},LineChartRender}();exports.LineChartRender=LineChartRender;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},base_style_1=__webpack_require__(3),utils_1=__webpack_require__(8),LineChartStyle=function(_super){
function LineChartStyle(parent){var _this=_super.call(this)||this;
return _this.chart=parent,_this.defaultLineChartStyle={grid:{
left:50,top:10,right:30,bottom:40},dataZoom:{type:"slider",show:!1,
backgroundColor:"rgba(47,69,84,0)",fillerColor:"rgba(47,69,84,0.25)",
borderColor:"#ddd",handleSize:"100%",labelPrecision:"auto",showDetail:!0,
showDataShadow:"auto",realtime:!0,filterMode:"filter",start:0,
end:100,zoomLock:!1,throttle:100,zlevel:0,z:2,left:50,top:"5%",
right:30,bottom:"auto"},yAxis:{splitLine:{show:!0,lineStyle:{
type:"dotted",color:"#ababab"}},min:"dataMin",max:"dataMax"},
xAxis:{position:"bottom",splitLine:{show:!0,lineStyle:{type:"dashed",
color:"#ababab"}},splitNumber:7,min:"dataMin",max:"dataMax"}},
_this.defaultLineChartStyle=utils_1.Utils.extend(_this.defaultChartStyle,_this.defaultLineChartStyle),
_this}return __extends(LineChartStyle,_super),LineChartStyle.prototype.getStyleOptions=function(){
return this.defaultLineChartStyle},LineChartStyle}(base_style_1.BaseStyle);
exports.LineChartStyle=LineChartStyle},function(module,exports,__webpack_require__){
"use strict";var utils_1=__webpack_require__(8),echarts=__webpack_require__(41),LineChartRenderEngine=function(){
function LineChartRenderEngine(parent,options){this.options={
dataZoom:{},legend:{},tooltip:{},xAxis:{type:"value",axisLabel:{}
},yAxis:{type:"value",axisLabel:{}},series:[{type:"line",data:[{
name:"name",value:[0,0]}]}]},this.chart=parent,this.options=utils_1.Utils.extend(this.options,this.refineUserOptions(options)),
this.init(),this.initFormatter(),this.initEvents(),this.updateSettings();
}return LineChartRenderEngine.prototype.refineUserOptions=function(options){
try{void 0!==options.dataZoom&&(options.dataZoom=[options.dataZoom]);
}catch(err){}return options},LineChartRenderEngine.prototype.init=function(){
var _this=this;return this.core=echarts.init(this.options.container),
this.timer=setTimeout(void 0),this.timerTask=function(cb,interval){
clearTimeout(_this.timer),interval=void 0===interval?100:interval,
_this.timer=setTimeout(cb,interval)},window.addEventListener("resize",function(e){
_this.timerTask(function(){_this.core.resize()},500)}),this},
LineChartRenderEngine.prototype.initFormatter=function(){var _this=this;
return void 0!==this.chart.options.renderType&&(this.options.xAxis.type=this.chart.options.renderType),
void 0!==this.chart.options.formatter.xAxis?this.options.xAxis.axisLabel.formatter=this.chart.options.formatter.xAxis:this.options.xAxis.axisLabel.formatter=function(value,index){
if("time"===_this.chart.options.renderType){var date=new Date(value);
return date.toTimeString().split(" ")[0]}return value},void 0!==this.chart.options.data.xAxis.min&&void 0===this.chart.options.data.yAxis.range?this.options.xAxis.min=this.chart.options.data.xAxis.min:this.options.xAxis.min="dataMin",
void 0!==this.chart.options.data.xAxis.max&&void 0===this.chart.options.data.yAxis.range?this.options.xAxis.max=this.chart.options.data.xAxis.max:this.options.xAxis.max="dataMax",
void 0!==this.chart.options.formatter.yAxis?this.options.yAxis.axisLabel.formatter=this.chart.options.formatter.yAxis:this.options.yAxis.axisLabel.formatter=function(value,index){
return value},void 0!==this.chart.options.data.yAxis.min&&void 0===this.chart.options.data.yAxis.range?this.options.yAxis.min=this.chart.options.data.yAxis.min:this.options.yAxis.min="dataMin",
void 0!==this.chart.options.data.yAxis.max&&void 0===this.chart.options.data.yAxis.range?this.options.yAxis.max=this.chart.options.data.yAxis.max:this.options.yAxis.max="dataMax",
void 0!==this.chart.options.formatter.tooltip?this.options.tooltip.formatter=this.chart.options.formatter.tooltip:this.options.tooltip.formatter=function(params,ticket,callback){
var data=params.map(function(p){var builtInToolTipStyle={display:"inline-block",
"margin-right":"5px","border-radius":"10px",width:"9px",height:"9px",
"background-color":p.color},tmp=Object.keys(builtInToolTipStyle).map(function(key){
return key+":"+builtInToolTipStyle[key]}),value=p.data;value=void 0===value?"":p.data.value[1];
var result='<span style="'+tmp.join(";")+'"></span>'+p.seriesName+" : "+_this.options.yAxis.axisLabel.formatter(value,-1);
return result}),head='<span style="display: inline-block;margin: auto auto auto 12px">'+_this.options.xAxis.axisLabel.formatter(params[0].name,-1)+"</span>";
data.unshift(head);var label=data.join("<br />");return label;
},this},LineChartRenderEngine.prototype.initEvents=function(){
var _this=this;return this.chart.event.getEventsName().forEach(function(eventName){
_this.core.on(eventName,function(event){_this.chart.event.getEventHandler(eventName)(event,_this.chart);
})}),this},LineChartRenderEngine.prototype.redraw=function(){
return this.clear().init(),this},LineChartRenderEngine.prototype.clear=function(){
return clearTimeout(this.timer),this.core.clear(),this},LineChartRenderEngine.prototype.updateSettings=function(options){
return this.options=utils_1.Utils.extend(this.options,this.refineUserOptions(options)),
this.core.setOption(this.options,!0),this},LineChartRenderEngine.prototype.updateXAxisRange=function(start,end){
return this.core.dispatchAction({type:"dataZoom",start:start,
end:end}),this},LineChartRenderEngine.prototype.offEvent=function(eventName,callbackInstance){
return this.core.off(eventName,callbackInstance),this},LineChartRenderEngine.prototype.onEvent=function(eventname,callbackInstance){
return this.core.on(eventname,callbackInstance),this},LineChartRenderEngine.prototype.update=function(){
var _this=this;if(this.options.legend.data=this.chart.data.getSeries(),
this.options.color=this.options.legend.data.map(function(data){
return _this.chart.render.style.getColorByName(data)}),this.options.series=[],
this.chart.data.getSeries().forEach(function(s){var tmpSeries={
name:s,type:"line",showSymbol:!1,hoverAnimation:!1,smooth:!0,
lineStyle:{normal:{opacity:.6}},data:_this.chart.data.getData(s).map(function(v){
return{name:v.x,value:[v.x,v.y],symbol:"circle",symbolSize:10,
symbolRotate:0,symboOffest:[0,0]}})};_this.options.series.push(tmpSeries);
}),void 0!==this.chart.options.data.xAxis.range){var xmin=this.chart.data.getXMin(),range=this.chart.options.data.xAxis.range,xmax=this.chart.data.getXMax();
xmin=xmax-xmin<=range?xmax-range:"dataMin",this.options.xAxis.min=xmin;
}return 0===this.options.series.length?console.warn("Empty Data in Line Chart."):this.core.setOption({
color:this.options.color,legend:this.options.legend,series:this.options.series,
xAxis:this.options.xAxis,yAxis:this.options.yAxis}),this.core.resize(),
this},LineChartRenderEngine}();exports.LineChartRenderEngine=LineChartRenderEngine;
},function(module,exports,__webpack_require__){!function(root,factory){
module.exports=factory()}(this,function(){return function(modules){
function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;
var module=installedModules[moduleId]={exports:{},id:moduleId,
loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),
module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,
__webpack_require__.c=installedModules,__webpack_require__.p="",
__webpack_require__(0)}([function(module,exports,__webpack_require__){
module.exports=__webpack_require__(1),__webpack_require__(100),
__webpack_require__(134),__webpack_require__(141),__webpack_require__(150),
__webpack_require__(154),__webpack_require__(164),__webpack_require__(185),
__webpack_require__(197),__webpack_require__(218),__webpack_require__(222),
__webpack_require__(226),__webpack_require__(241),__webpack_require__(247),
__webpack_require__(254),__webpack_require__(260),__webpack_require__(264),
__webpack_require__(273),__webpack_require__(277),__webpack_require__(280),
__webpack_require__(292),__webpack_require__(113),__webpack_require__(293),
__webpack_require__(299),__webpack_require__(303),__webpack_require__(314),
__webpack_require__(227),__webpack_require__(281),__webpack_require__(317),
__webpack_require__(328),__webpack_require__(329),__webpack_require__(343),
__webpack_require__(358),__webpack_require__(364),__webpack_require__(367),
__webpack_require__(370),__webpack_require__(379),__webpack_require__(391);
},function(module,exports,__webpack_require__){function createRegisterEventWithLowercaseName(method){
return function(eventName,handler,context){eventName=eventName&&eventName.toLowerCase(),
Eventful.prototype[method].call(this,eventName,handler,context);
}}function MessageCenter(){Eventful.call(this)}function ECharts(dom,theme,opts){
function prioritySortFunc(a,b){return a.prio-b.prio}opts=opts||{},
"string"==typeof theme&&(theme=themeStorage[theme]),this.id,this.group,
this._dom=dom;var zr=this._zr=zrender.init(dom,{renderer:opts.renderer||"canvas",
devicePixelRatio:opts.devicePixelRatio,width:opts.width,height:opts.height
});this._throttledZrFlush=throttle.throttle(zrUtil.bind(zr.flush,zr),17),
this._theme=zrUtil.clone(theme),this._chartsViews=[],this._chartsMap={},
this._componentsViews=[],this._componentsMap={},this._api=new ExtensionAPI(this),
this._coordSysMgr=new CoordinateSystemManager,Eventful.call(this),
this._messageCenter=new MessageCenter,this._initEvents(),this.resize=zrUtil.bind(this.resize,this),
this._pendingActions=[],timsort(visualFuncs,prioritySortFunc),
timsort(dataProcessorFuncs,prioritySortFunc),zr.animation.on("frame",this._onframe,this);
}function doConvertPixel(methodName,finder,value){var result,ecModel=this._model,coordSysList=this._coordSysMgr.getCoordinateSystems();
finder=modelUtil.parseFinder(ecModel,finder);for(var i=0;i<coordSysList.length;i++){
var coordSys=coordSysList[i];if(coordSys[methodName]&&null!=(result=coordSys[methodName](ecModel,finder,value)))return result;
}console.warn("No coordinate system that supports "+methodName+" found by the given finder.");
}function updateDirectly(ecIns,method,payload,mainType,subType){
var ecModel=ecIns._model,query={};query[mainType+"Id"]=payload[mainType+"Id"],
query[mainType+"Index"]=payload[mainType+"Index"],query[mainType+"Name"]=payload[mainType+"Name"];
var condition={mainType:mainType,query:query};subType&&(condition.subType=subType),
ecModel&&ecModel.eachComponent(condition,function(model,index){
var view=ecIns["series"===mainType?"_chartsMap":"_componentsMap"][model.__viewId];
view&&view.__alive&&view[method](model,ecModel,ecIns._api,payload);
},ecIns)}function doDispatchAction(payload,silent){var payloadType=payload.type,actionWrap=actions[payloadType],actionInfo=actionWrap.actionInfo,cptType=(actionInfo.update||"update").split(":"),updateMethod=cptType.pop();
cptType=cptType[0]&&parseClassType(cptType[0]),this[IN_MAIN_PROCESS]=!0;
var payloads=[payload],batched=!1;payload.batch&&(batched=!0,
payloads=zrUtil.map(payload.batch,function(item){return item=zrUtil.defaults(zrUtil.extend({},item),payload),
item.batch=null,item}));for(var eventObj,eventObjBatch=[],isHighDown="highlight"===payloadType||"downplay"===payloadType,i=0;i<payloads.length;i++){
var batchItem=payloads[i];eventObj=actionWrap.action(batchItem,this._model),
eventObj=eventObj||zrUtil.extend({},batchItem),eventObj.type=actionInfo.event||eventObj.type,
eventObjBatch.push(eventObj),isHighDown?updateDirectly(this,updateMethod,batchItem,"series"):cptType&&updateDirectly(this,updateMethod,batchItem,cptType.main,cptType.sub);
}"none"===updateMethod||isHighDown||cptType||(this[OPTION_UPDATED]?(updateMethods.prepareAndUpdate.call(this,payload),
this[OPTION_UPDATED]=!1):updateMethods[updateMethod].call(this,payload)),
eventObj=batched?{type:actionInfo.event||payloadType,batch:eventObjBatch
}:eventObjBatch[0],this[IN_MAIN_PROCESS]=!1,!silent&&this._messageCenter.trigger(eventObj.type,eventObj);
}function flushPendingActions(silent){for(var pendingActions=this._pendingActions;pendingActions.length;){
var payload=pendingActions.shift();doDispatchAction.call(this,payload,silent);
}}function triggerUpdatedEvent(silent){!silent&&this.trigger("updated");
}function invokeUpdateMethod(methodName,ecModel,payload){var api=this._api;
each(this._componentsViews,function(component){var componentModel=component.__model;
component[methodName](componentModel,ecModel,api,payload),updateZ(componentModel,component);
},this),ecModel.eachSeries(function(seriesModel,idx){var chart=this._chartsMap[seriesModel.__viewId];
chart[methodName](seriesModel,ecModel,api,payload),updateZ(seriesModel,chart),
updateProgressiveAndBlend(seriesModel,chart)},this),updateHoverLayerStatus(this._zr,ecModel);
}function prepareView(type,ecModel){for(var isComponent="component"===type,viewList=isComponent?this._componentsViews:this._chartsViews,viewMap=isComponent?this._componentsMap:this._chartsMap,zr=this._zr,i=0;i<viewList.length;i++)viewList[i].__alive=!1;
ecModel[isComponent?"eachComponent":"eachSeries"](function(componentType,model){
if(isComponent){if("series"===componentType)return}else model=componentType;
var viewId=model.id+"_"+model.type,view=viewMap[viewId];if(!view){
var classType=parseClassType(model.type),Clazz=isComponent?ComponentView.getClass(classType.main,classType.sub):ChartView.getClass(classType.sub);
if(!Clazz)return;view=new Clazz,view.init(ecModel,this._api),
viewMap[viewId]=view,viewList.push(view),zr.add(view.group)}model.__viewId=viewId,
view.__alive=!0,view.__id=viewId,view.__model=model},this);for(var i=0;i<viewList.length;){
var view=viewList[i];view.__alive?i++:(zr.remove(view.group),
view.dispose(ecModel,this._api),viewList.splice(i,1),delete viewMap[view.__id]);
}}function processData(ecModel,api){each(dataProcessorFuncs,function(process){
process.func(ecModel,api)})}function stackSeriesData(ecModel){
var stackedDataMap={};ecModel.eachSeries(function(series){var stack=series.get("stack"),data=series.getData();
if(stack&&"list"===data.type){var previousStack=stackedDataMap[stack];
previousStack&&(data.stackedOn=previousStack),stackedDataMap[stack]=data;
}})}function doLayout(ecModel,payload){var api=this._api;each(visualFuncs,function(visual){
visual.isLayout&&visual.func(ecModel,api,payload)})}function doVisualEncoding(ecModel,payload,excludesLayout){
var api=this._api;ecModel.clearColorPalette(),ecModel.eachSeries(function(seriesModel){
seriesModel.clearColorPalette()}),each(visualFuncs,function(visual){
(!excludesLayout||!visual.isLayout)&&visual.func(ecModel,api,payload);
})}function doRender(ecModel,payload){var api=this._api;each(this._componentsViews,function(componentView){
var componentModel=componentView.__model;componentView.render(componentModel,ecModel,api,payload),
updateZ(componentModel,componentView)},this),each(this._chartsViews,function(chart){
chart.__alive=!1},this),ecModel.eachSeries(function(seriesModel,idx){
var chartView=this._chartsMap[seriesModel.__viewId];chartView.__alive=!0,
chartView.render(seriesModel,ecModel,api,payload),chartView.group.silent=!!seriesModel.get("silent"),
updateZ(seriesModel,chartView),updateProgressiveAndBlend(seriesModel,chartView);
},this),updateHoverLayerStatus(this._zr,ecModel),each(this._chartsViews,function(chart){
chart.__alive||chart.remove(ecModel,api)},this)}function updateHoverLayerStatus(zr,ecModel){
var storage=zr.storage,elCount=0;storage.traverse(function(el){
el.isGroup||elCount++}),elCount>ecModel.get("hoverLayerThreshold")&&!env.node&&storage.traverse(function(el){
el.isGroup||(el.useHoverLayer=!0)})}function updateProgressiveAndBlend(seriesModel,chartView){
var elCount=0;chartView.group.traverse(function(el){"group"===el.type||el.ignore||elCount++;
});var frameDrawNum=+seriesModel.get("progressive"),needProgressive=elCount>seriesModel.get("progressiveThreshold")&&frameDrawNum&&!env.node;
needProgressive&&chartView.group.traverse(function(el){el.isGroup||(el.progressive=needProgressive?Math.floor(elCount++/frameDrawNum):-1,
needProgressive&&el.stopAnimation(!0))});var blendMode=seriesModel.get("blendMode")||null;
!env.canvasSupported&&blendMode&&"source-over"!==blendMode&&console.warn("Only canvas support blendMode"),
chartView.group.traverse(function(el){el.isGroup||el.setStyle("blend",blendMode);
})}function updateZ(model,view){var z=model.get("z"),zlevel=model.get("zlevel");
view.group.traverse(function(el){"group"!==el.type&&(null!=z&&(el.z=z),
null!=zlevel&&(el.zlevel=zlevel))})}function enableConnect(chart){
function updateConnectedChartsStatus(charts,status){for(var i=0;i<charts.length;i++){
var otherChart=charts[i];otherChart[STATUS_KEY]=status}}var STATUS_PENDING=0,STATUS_UPDATING=1,STATUS_UPDATED=2,STATUS_KEY="__connectUpdateStatus";
zrUtil.each(eventActionMap,function(actionType,eventType){chart._messageCenter.on(eventType,function(event){
if(connectedGroups[chart.group]&&chart[STATUS_KEY]!==STATUS_PENDING){
var action=chart.makeActionFromEvent(event),otherCharts=[];zrUtil.each(instances,function(otherChart){
otherChart!==chart&&otherChart.group===chart.group&&otherCharts.push(otherChart);
}),updateConnectedChartsStatus(otherCharts,STATUS_PENDING),each(otherCharts,function(otherChart){
otherChart[STATUS_KEY]!==STATUS_UPDATING&&otherChart.dispatchAction(action);
}),updateConnectedChartsStatus(otherCharts,STATUS_UPDATED)}});
})}var env=__webpack_require__(2),GlobalModel=__webpack_require__(3),ExtensionAPI=__webpack_require__(25),CoordinateSystemManager=__webpack_require__(26),OptionManager=__webpack_require__(27),ComponentModel=__webpack_require__(19),SeriesModel=__webpack_require__(28),ComponentView=__webpack_require__(29),ChartView=__webpack_require__(42),graphic=__webpack_require__(43),modelUtil=__webpack_require__(5),throttle=__webpack_require__(81),zrender=__webpack_require__(82),zrUtil=__webpack_require__(4),colorTool=__webpack_require__(39),Eventful=__webpack_require__(33),timsort=__webpack_require__(86),each=zrUtil.each,parseClassType=ComponentModel.parseClassType,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_BRUSH=5e3,IN_MAIN_PROCESS="__flagInMainProcess",HAS_GRADIENT_OR_PATTERN_BG="__hasGradientOrPatternBg",OPTION_UPDATED="__optionUpdated",ACTION_REG=/^[a-zA-Z0-9_]+$/;
MessageCenter.prototype.on=createRegisterEventWithLowercaseName("on"),
MessageCenter.prototype.off=createRegisterEventWithLowercaseName("off"),
MessageCenter.prototype.one=createRegisterEventWithLowercaseName("one"),
zrUtil.mixin(MessageCenter,Eventful);var echartsProto=ECharts.prototype;
echartsProto._onframe=function(){if(this[OPTION_UPDATED]){var silent=this[OPTION_UPDATED].silent;
this[IN_MAIN_PROCESS]=!0,updateMethods.prepareAndUpdate.call(this),
this[IN_MAIN_PROCESS]=!1,this[OPTION_UPDATED]=!1,flushPendingActions.call(this,silent),
triggerUpdatedEvent.call(this,silent)}},echartsProto.getDom=function(){
return this._dom},echartsProto.getZr=function(){return this._zr;
},echartsProto.setOption=function(option,notMerge,lazyUpdate){
zrUtil.assert(!this[IN_MAIN_PROCESS],"`setOption` should not be called during main process.");
var silent;if(zrUtil.isObject(notMerge)&&(lazyUpdate=notMerge.lazyUpdate,
silent=notMerge.silent,notMerge=notMerge.notMerge),this[IN_MAIN_PROCESS]=!0,
!this._model||notMerge){var optionManager=new OptionManager(this._api),theme=this._theme,ecModel=this._model=new GlobalModel(null,null,theme,optionManager);
ecModel.init(null,null,theme,optionManager)}this.__lastOnlyGraphic=!(!option||!option.graphic),
zrUtil.each(option,function(o,mainType){"graphic"!==mainType&&(this.__lastOnlyGraphic=!1);
},this),this._model.setOption(option,optionPreprocessorFuncs),
lazyUpdate?(this[OPTION_UPDATED]={silent:silent},this[IN_MAIN_PROCESS]=!1):(updateMethods.prepareAndUpdate.call(this),
this._zr.flush(),this[OPTION_UPDATED]=!1,this[IN_MAIN_PROCESS]=!1,
flushPendingActions.call(this,silent),triggerUpdatedEvent.call(this,silent));
},echartsProto.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0");
},echartsProto.getModel=function(){return this._model},echartsProto.getOption=function(){
return this._model&&this._model.getOption()},echartsProto.getWidth=function(){
return this._zr.getWidth()},echartsProto.getHeight=function(){
return this._zr.getHeight()},echartsProto.getRenderedCanvas=function(opts){
if(env.canvasSupported){opts=opts||{},opts.pixelRatio=opts.pixelRatio||1,
opts.backgroundColor=opts.backgroundColor||this._model.get("backgroundColor");
var zr=this._zr,list=zr.storage.getDisplayList();return zrUtil.each(list,function(el){
el.stopAnimation(!0)}),zr.painter.getRenderedCanvas(opts)}},echartsProto.getDataURL=function(opts){
opts=opts||{};var excludeComponents=opts.excludeComponents,ecModel=this._model,excludesComponentViews=[],self=this;
each(excludeComponents,function(componentType){ecModel.eachComponent({
mainType:componentType},function(component){var view=self._componentsMap[component.__viewId];
view.group.ignore||(excludesComponentViews.push(view),view.group.ignore=!0);
})});var url=this.getRenderedCanvas(opts).toDataURL("image/"+(opts&&opts.type||"png"));
return each(excludesComponentViews,function(view){view.group.ignore=!1;
}),url},echartsProto.getConnectedDataURL=function(opts){if(env.canvasSupported){
var groupId=this.group,mathMin=Math.min,mathMax=Math.max,MAX_NUMBER=1/0;
if(connectedGroups[groupId]){var left=MAX_NUMBER,top=MAX_NUMBER,right=-MAX_NUMBER,bottom=-MAX_NUMBER,canvasList=[],dpr=opts&&opts.pixelRatio||1;
zrUtil.each(instances,function(chart,id){if(chart.group===groupId){
var canvas=chart.getRenderedCanvas(zrUtil.clone(opts)),boundingRect=chart.getDom().getBoundingClientRect();
left=mathMin(boundingRect.left,left),top=mathMin(boundingRect.top,top),
right=mathMax(boundingRect.right,right),bottom=mathMax(boundingRect.bottom,bottom),
canvasList.push({dom:canvas,left:boundingRect.left,top:boundingRect.top
})}}),left*=dpr,top*=dpr,right*=dpr,bottom*=dpr;var width=right-left,height=bottom-top,targetCanvas=zrUtil.createCanvas();
targetCanvas.width=width,targetCanvas.height=height;var zr=zrender.init(targetCanvas);
return each(canvasList,function(item){var img=new graphic.Image({
style:{x:item.left*dpr-left,y:item.top*dpr-top,image:item.dom
}});zr.add(img)}),zr.refreshImmediately(),targetCanvas.toDataURL("image/"+(opts&&opts.type||"png"));
}return this.getDataURL(opts)}},echartsProto.convertToPixel=zrUtil.curry(doConvertPixel,"convertToPixel"),
echartsProto.convertFromPixel=zrUtil.curry(doConvertPixel,"convertFromPixel"),
echartsProto.containPixel=function(finder,value){var result,ecModel=this._model;
return finder=modelUtil.parseFinder(ecModel,finder),zrUtil.each(finder,function(models,key){
key.indexOf("Models")>=0&&zrUtil.each(models,function(model){
var coordSys=model.coordinateSystem;if(coordSys&&coordSys.containPoint)result|=!!coordSys.containPoint(value);else if("seriesModels"===key){
var view=this._chartsMap[model.__viewId];view&&view.containPoint?result|=view.containPoint(value,model):console.warn(key+": "+(view?"The found component do not support containPoint.":"No view mapping to the found component."));
}else console.warn(key+": containPoint is not supported")},this);
},this),!!result},echartsProto.getVisual=function(finder,visualType){
var ecModel=this._model;finder=modelUtil.parseFinder(ecModel,finder,{
defaultMainType:"series"});var seriesModel=finder.seriesModel;
seriesModel||console.warn("There is no specified seires model");
var data=seriesModel.getData(),dataIndexInside=finder.hasOwnProperty("dataIndexInside")?finder.dataIndexInside:finder.hasOwnProperty("dataIndex")?data.indexOfRawIndex(finder.dataIndex):null;
return null!=dataIndexInside?data.getItemVisual(dataIndexInside,visualType):data.getVisual(visualType);
};var updateMethods={update:function(payload){var ecModel=this._model,api=this._api,coordSysMgr=this._coordSysMgr,zr=this._zr;
if(ecModel){ecModel.restoreData(),coordSysMgr.create(this._model,this._api),
processData.call(this,ecModel,api),stackSeriesData.call(this,ecModel),
coordSysMgr.update(ecModel,api),doVisualEncoding.call(this,ecModel,payload),
doRender.call(this,ecModel,payload);var backgroundColor=ecModel.get("backgroundColor")||"transparent",painter=zr.painter;
if(painter.isSingleCanvas&&painter.isSingleCanvas())zr.configLayer(0,{
clearColor:backgroundColor});else{if(!env.canvasSupported){var colorArr=colorTool.parse(backgroundColor);
backgroundColor=colorTool.stringify(colorArr,"rgb"),0===colorArr[3]&&(backgroundColor="transparent");
}backgroundColor.colorStops||backgroundColor.image?(zr.configLayer(0,{
clearColor:backgroundColor}),this[HAS_GRADIENT_OR_PATTERN_BG]=!0,
this._dom.style.background="transparent"):(this[HAS_GRADIENT_OR_PATTERN_BG]&&zr.configLayer(0,{
clearColor:null}),this[HAS_GRADIENT_OR_PATTERN_BG]=!1,this._dom.style.background=backgroundColor);
}}},updateView:function(payload){var ecModel=this._model;ecModel&&(ecModel.eachSeries(function(seriesModel){
seriesModel.getData().clearAllVisual()}),doVisualEncoding.call(this,ecModel,payload),
invokeUpdateMethod.call(this,"updateView",ecModel,payload))},
updateVisual:function(payload){var ecModel=this._model;ecModel&&(ecModel.eachSeries(function(seriesModel){
seriesModel.getData().clearAllVisual()}),doVisualEncoding.call(this,ecModel,payload,!0),
invokeUpdateMethod.call(this,"updateVisual",ecModel,payload));
},updateLayout:function(payload){var ecModel=this._model;ecModel&&(doLayout.call(this,ecModel,payload),
invokeUpdateMethod.call(this,"updateLayout",ecModel,payload));
},prepareAndUpdate:function(payload){var ecModel=this._model;prepareView.call(this,"component",ecModel),
prepareView.call(this,"chart",ecModel),this.__lastOnlyGraphic?(each(this._componentsViews,function(componentView){
var componentModel=componentView.__model;componentModel&&"graphic"===componentModel.mainType&&(componentView.render(componentModel,ecModel,this._api,payload),
updateZ(componentModel,componentView))},this),this.__lastOnlyGraphic=!1):updateMethods.update.call(this,payload);
}};echartsProto.resize=function(opts){zrUtil.assert(!this[IN_MAIN_PROCESS],"`resize` should not be called during main process."),
this[IN_MAIN_PROCESS]=!0,this._zr.resize(opts);var optionChanged=this._model&&this._model.resetOption("media"),updateMethod=optionChanged?"prepareAndUpdate":"update";
updateMethods[updateMethod].call(this),this._loadingFX&&this._loadingFX.resize(),
this[IN_MAIN_PROCESS]=!1;var silent=opts&&opts.silent;flushPendingActions.call(this,silent),
triggerUpdatedEvent.call(this,silent)},echartsProto.showLoading=function(name,cfg){
if(zrUtil.isObject(name)&&(cfg=name,name=""),name=name||"default",
this.hideLoading(),!loadingEffects[name])return void console.warn("Loading effects "+name+" not exists.");
var el=loadingEffects[name](this._api,cfg),zr=this._zr;this._loadingFX=el,
zr.add(el)},echartsProto.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),
this._loadingFX=null},echartsProto.makeActionFromEvent=function(eventObj){
var payload=zrUtil.extend({},eventObj);return payload.type=eventActionMap[eventObj.type],
payload},echartsProto.dispatchAction=function(payload,opt){if(zrUtil.isObject(opt)||(opt={
silent:!!opt}),actions[payload.type]){if(this[IN_MAIN_PROCESS])return void this._pendingActions.push(payload);
doDispatchAction.call(this,payload,opt.silent),opt.flush?this._zr.flush(!0):opt.flush!==!1&&env.browser.weChat&&this._throttledZrFlush(),
flushPendingActions.call(this,opt.silent),triggerUpdatedEvent.call(this,opt.silent);
}},echartsProto.on=createRegisterEventWithLowercaseName("on"),
echartsProto.off=createRegisterEventWithLowercaseName("off"),
echartsProto.one=createRegisterEventWithLowercaseName("one");var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];
echartsProto._initEvents=function(){each(MOUSE_EVENT_NAMES,function(eveName){
this._zr.on(eveName,function(e){var params,ecModel=this.getModel(),el=e.target;
if("globalout"===eveName)params={};else if(el&&null!=el.dataIndex){
var dataModel=el.dataModel||ecModel.getSeriesByIndex(el.seriesIndex);
params=dataModel&&dataModel.getDataParams(el.dataIndex,el.dataType)||{};
}else el&&el.eventData&&(params=zrUtil.extend({},el.eventData));
params&&(params.event=e,params.type=eveName,this.trigger(eveName,params));
},this)},this),each(eventActionMap,function(actionType,eventType){
this._messageCenter.on(eventType,function(event){this.trigger(eventType,event);
},this)},this)},echartsProto.isDisposed=function(){return this._disposed;
},echartsProto.clear=function(){this.setOption({series:[]},!0);
},echartsProto.dispose=function(){if(this._disposed)return void console.warn("Instance "+this.id+" has been disposed");
this._disposed=!0;var api=this._api,ecModel=this._model;each(this._componentsViews,function(component){
component.dispose(ecModel,api)}),each(this._chartsViews,function(chart){
chart.dispose(ecModel,api)}),this._zr.dispose(),delete instances[this.id];
},zrUtil.mixin(ECharts,Eventful);var actions=[],eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=new Date-0,groupIdBase=new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_",echarts={
version:"3.4.0",dependencies:{zrender:"3.3.0"}};echarts.init=function(dom,theme,opts){
if(zrender.version.replace(".","")-0<echarts.dependencies.zrender.replace(".","")-0)throw new Error("ZRender "+zrender.version+" is too old for ECharts "+echarts.version+". Current version need ZRender "+echarts.dependencies.zrender+"+");
if(!dom)throw new Error("Initialize failed: invalid dom.");!zrUtil.isDom(dom)||"CANVAS"===dom.nodeName.toUpperCase()||dom.clientWidth&&dom.clientHeight||console.warn("Can't get dom width or height");
var chart=new ECharts(dom,theme,opts);return chart.id="ec_"+idBase++,
instances[chart.id]=chart,dom.setAttribute&&dom.setAttribute(DOM_ATTRIBUTE_KEY,chart.id),
enableConnect(chart),chart},echarts.connect=function(groupId){
if(zrUtil.isArray(groupId)){var charts=groupId;groupId=null,zrUtil.each(charts,function(chart){
null!=chart.group&&(groupId=chart.group)}),groupId=groupId||"g_"+groupIdBase++,
zrUtil.each(charts,function(chart){chart.group=groupId})}return connectedGroups[groupId]=!0,
groupId},echarts.disConnect=function(groupId){connectedGroups[groupId]=!1;
},echarts.dispose=function(chart){zrUtil.isDom(chart)?chart=echarts.getInstanceByDom(chart):"string"==typeof chart&&(chart=instances[chart]),
chart instanceof ECharts&&!chart.isDisposed()&&chart.dispose();
},echarts.getInstanceByDom=function(dom){var key=dom.getAttribute(DOM_ATTRIBUTE_KEY);
return instances[key]},echarts.getInstanceById=function(key){
return instances[key]},echarts.registerTheme=function(name,theme){
themeStorage[name]=theme},echarts.registerPreprocessor=function(preprocessorFunc){
optionPreprocessorFuncs.push(preprocessorFunc)},echarts.registerProcessor=function(priority,processorFunc){
if("function"==typeof priority&&(processorFunc=priority,priority=PRIORITY_PROCESSOR_FILTER),
isNaN(priority))throw new Error("Unkown processor priority");dataProcessorFuncs.push({
prio:priority,func:processorFunc})},echarts.registerAction=function(actionInfo,eventName,action){
"function"==typeof eventName&&(action=eventName,eventName="");
var actionType=zrUtil.isObject(actionInfo)?actionInfo.type:[actionInfo,actionInfo={
event:eventName}][0];actionInfo.event=(actionInfo.event||actionType).toLowerCase(),
eventName=actionInfo.event,zrUtil.assert(ACTION_REG.test(actionType)&&ACTION_REG.test(eventName)),
actions[actionType]||(actions[actionType]={action:action,actionInfo:actionInfo
}),eventActionMap[eventName]=actionType},echarts.registerCoordinateSystem=function(type,CoordinateSystem){
CoordinateSystemManager.register(type,CoordinateSystem)},echarts.registerLayout=function(priority,layoutFunc){
if("function"==typeof priority&&(layoutFunc=priority,priority=PRIORITY_VISUAL_LAYOUT),
isNaN(priority))throw new Error("Unkown layout priority");visualFuncs.push({
prio:priority,func:layoutFunc,isLayout:!0})},echarts.registerVisual=function(priority,visualFunc){
if("function"==typeof priority&&(visualFunc=priority,priority=PRIORITY_VISUAL_CHART),
isNaN(priority))throw new Error("Unkown visual priority");visualFuncs.push({
prio:priority,func:visualFunc})},echarts.registerLoading=function(name,loadingFx){
loadingEffects[name]=loadingFx},echarts.extendComponentModel=function(opts){
return ComponentModel.extend(opts)},echarts.extendComponentView=function(opts){
return ComponentView.extend(opts)},echarts.extendSeriesModel=function(opts){
return SeriesModel.extend(opts)},echarts.extendChartView=function(opts){
return ChartView.extend(opts)},echarts.setCanvasCreator=function(creator){
zrUtil.createCanvas=creator},echarts.registerVisual(PRIORITY_VISUAL_GLOBAL,__webpack_require__(94)),
echarts.registerPreprocessor(__webpack_require__(95)),echarts.registerLoading("default",__webpack_require__(97)),
echarts.registerAction({type:"highlight",event:"highlight",update:"highlight"
},zrUtil.noop),echarts.registerAction({type:"downplay",event:"downplay",
update:"downplay"},zrUtil.noop),echarts.List=__webpack_require__(98),
echarts.Model=__webpack_require__(12),echarts.graphic=__webpack_require__(43),
echarts.number=__webpack_require__(7),echarts.format=__webpack_require__(6),
echarts.throttle=throttle.throttle,echarts.matrix=__webpack_require__(11),
echarts.vector=__webpack_require__(10),echarts.color=__webpack_require__(39),
echarts.util={},each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone"],function(name){
echarts.util[name]=zrUtil[name]}),echarts.PRIORITY={PROCESSOR:{
FILTER:PRIORITY_PROCESSOR_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC
},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,
CHART:PRIORITY_VISUAL_CHART,COMPONENT:PRIORITY_VISUAL_COMPONENT,
BRUSH:PRIORITY_VISUAL_BRUSH}},module.exports=echarts},function(module,exports){
function detect(ua){var os={},browser={},firefox=ua.match(/Firefox\/([\d.]+)/),ie=ua.match(/MSIE\s([\d.]+)/)||ua.match(/Trident\/.+?rv:(([\d.]+))/),edge=ua.match(/Edge\/([\d.]+)/),weChat=/micromessenger/i.test(ua);
return firefox&&(browser.firefox=!0,browser.version=firefox[1]),
ie&&(browser.ie=!0,browser.version=ie[1]),edge&&(browser.edge=!0,
browser.version=edge[1]),weChat&&(browser.weChat=!0),{browser:browser,
os:os,node:!1,canvasSupported:!!document.createElement("canvas").getContext,
touchEventsSupported:"ontouchstart"in window&&!browser.ie&&!browser.edge,
pointerEventsSupported:"onpointerdown"in window&&(browser.edge||browser.ie&&browser.version>=11)
}}var env={};env="undefined"==typeof navigator?{browser:{},os:{},
node:!0,canvasSupported:!0}:detect(navigator.userAgent),module.exports=env;
},function(module,exports,__webpack_require__){function mergeTheme(option,theme){
zrUtil.each(theme,function(themeItem,name){ComponentModel.hasClass(name)||("object"==typeof themeItem?option[name]=option[name]?zrUtil.merge(option[name],themeItem,!1):zrUtil.clone(themeItem):null==option[name]&&(option[name]=themeItem));
})}function initBase(baseOption){baseOption=baseOption,this.option={},
this.option[OPTION_INNER_KEY]=1,this._componentsMap={},this._seriesIndices=null,
mergeTheme(baseOption,this._theme.option),zrUtil.merge(baseOption,globalDefault,!1),
this.mergeOption(baseOption)}function getComponentsByTypes(componentsMap,types){
zrUtil.isArray(types)||(types=types?[types]:[]);var ret={};return each(types,function(type){
ret[type]=(componentsMap[type]||[]).slice()}),ret}function determineSubType(mainType,newCptOption,existComponent){
var subType=newCptOption.type?newCptOption.type:existComponent?existComponent.subType:ComponentModel.determineSubType(mainType,newCptOption);
return subType}function createSeriesIndices(seriesModels){return map(seriesModels,function(series){
return series.componentIndex})||[]}function filterBySubType(components,condition){
return condition.hasOwnProperty("subType")?filter(components,function(cpt){
return cpt.subType===condition.subType}):components}function assertSeriesInitialized(ecModel){
if(!ecModel._seriesIndices)throw new Error("Series has not been initialized yet.");
}var zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),Model=__webpack_require__(12),each=zrUtil.each,filter=zrUtil.filter,map=zrUtil.map,isArray=zrUtil.isArray,indexOf=zrUtil.indexOf,isObject=zrUtil.isObject,ComponentModel=__webpack_require__(19),globalDefault=__webpack_require__(23),OPTION_INNER_KEY="\0_ec_inner",GlobalModel=Model.extend({
constructor:GlobalModel,init:function(option,parentModel,theme,optionManager){
theme=theme||{},this.option=null,this._theme=new Model(theme),
this._optionManager=optionManager},setOption:function(option,optionPreprocessorFuncs){
zrUtil.assert(!(OPTION_INNER_KEY in option),"please use chart.getOption()"),
this._optionManager.setOption(option,optionPreprocessorFuncs),
this.resetOption()},resetOption:function(type){var optionChanged=!1,optionManager=this._optionManager;
if(!type||"recreate"===type){var baseOption=optionManager.mountOption("recreate"===type);
this.option&&"recreate"!==type?(this.restoreData(),this.mergeOption(baseOption)):initBase.call(this,baseOption),
optionChanged=!0}if("timeline"!==type&&"media"!==type||this.restoreData(),
!type||"recreate"===type||"timeline"===type){var timelineOption=optionManager.getTimelineOption(this);
timelineOption&&(this.mergeOption(timelineOption),optionChanged=!0);
}if(!type||"recreate"===type||"media"===type){var mediaOptions=optionManager.getMediaOption(this,this._api);
mediaOptions.length&&each(mediaOptions,function(mediaOption){
this.mergeOption(mediaOption,optionChanged=!0)},this)}return optionChanged;
},mergeOption:function(newOption){function visitComponent(mainType,dependencies){
var newCptOptionList=modelUtil.normalizeToArray(newOption[mainType]),mapResult=modelUtil.mappingToExists(componentsMap[mainType],newCptOptionList);
modelUtil.makeIdAndName(mapResult),each(mapResult,function(item,index){
var opt=item.option;isObject(opt)&&(item.keyInfo.mainType=mainType,
item.keyInfo.subType=determineSubType(mainType,opt,item.exist));
});var dependentModels=getComponentsByTypes(componentsMap,dependencies);
option[mainType]=[],componentsMap[mainType]=[],each(mapResult,function(resultItem,index){
var componentModel=resultItem.exist,newCptOption=resultItem.option;
if(zrUtil.assert(isObject(newCptOption)||componentModel,"Empty component definition"),
newCptOption){var ComponentModelClass=ComponentModel.getClass(mainType,resultItem.keyInfo.subType,!0);
if(componentModel&&componentModel instanceof ComponentModelClass)componentModel.name=resultItem.keyInfo.name,
componentModel.mergeOption(newCptOption,this),componentModel.optionUpdated(newCptOption,!1);else{
var extraOpt=zrUtil.extend({dependentModels:dependentModels,componentIndex:index
},resultItem.keyInfo);componentModel=new ComponentModelClass(newCptOption,this,this,extraOpt),
zrUtil.extend(componentModel,extraOpt),componentModel.init(newCptOption,this,this,extraOpt),
componentModel.optionUpdated(null,!0)}}else componentModel.mergeOption({},this),
componentModel.optionUpdated({},!1);componentsMap[mainType][index]=componentModel,
option[mainType][index]=componentModel.option},this),"series"===mainType&&(this._seriesIndices=createSeriesIndices(componentsMap.series));
}var option=this.option,componentsMap=this._componentsMap,newCptTypes=[];
each(newOption,function(componentOption,mainType){null!=componentOption&&(ComponentModel.hasClass(mainType)?newCptTypes.push(mainType):option[mainType]=null==option[mainType]?zrUtil.clone(componentOption):zrUtil.merge(option[mainType],componentOption,!0));
}),ComponentModel.topologicalTravel(newCptTypes,ComponentModel.getAllClassMainTypes(),visitComponent,this),
this._seriesIndices=this._seriesIndices||[]},getOption:function(){
var option=zrUtil.clone(this.option);return each(option,function(opts,mainType){
if(ComponentModel.hasClass(mainType)){for(var opts=modelUtil.normalizeToArray(opts),i=opts.length-1;i>=0;i--)modelUtil.isIdInner(opts[i])&&opts.splice(i,1);
option[mainType]=opts}}),delete option[OPTION_INNER_KEY],option;
},getTheme:function(){return this._theme},getComponent:function(mainType,idx){
var list=this._componentsMap[mainType];if(list)return list[idx||0];
},queryComponents:function(condition){var mainType=condition.mainType;
if(!mainType)return[];var index=condition.index,id=condition.id,name=condition.name,cpts=this._componentsMap[mainType];
if(!cpts||!cpts.length)return[];var result;if(null!=index)isArray(index)||(index=[index]),
result=filter(map(index,function(idx){return cpts[idx]}),function(val){
return!!val});else if(null!=id){var isIdArray=isArray(id);result=filter(cpts,function(cpt){
return isIdArray&&indexOf(id,cpt.id)>=0||!isIdArray&&cpt.id===id;
})}else if(null!=name){var isNameArray=isArray(name);result=filter(cpts,function(cpt){
return isNameArray&&indexOf(name,cpt.name)>=0||!isNameArray&&cpt.name===name;
})}else result=cpts;return filterBySubType(result,condition)},
findComponents:function(condition){function getQueryCond(q){var indexAttr=mainType+"Index",idAttr=mainType+"Id",nameAttr=mainType+"Name";
return!q||null==q[indexAttr]&&null==q[idAttr]&&null==q[nameAttr]?null:{
mainType:mainType,index:q[indexAttr],id:q[idAttr],name:q[nameAttr]
}}function doFilter(res){return condition.filter?filter(res,condition.filter):res;
}var query=condition.query,mainType=condition.mainType,queryCond=getQueryCond(query),result=queryCond?this.queryComponents(queryCond):this._componentsMap[mainType];
return doFilter(filterBySubType(result,condition))},eachComponent:function(mainType,cb,context){
var componentsMap=this._componentsMap;if("function"==typeof mainType)context=cb,
cb=mainType,each(componentsMap,function(components,componentType){
each(components,function(component,index){cb.call(context,componentType,component,index);
})});else if(zrUtil.isString(mainType))each(componentsMap[mainType],cb,context);else if(isObject(mainType)){
var queryResult=this.findComponents(mainType);each(queryResult,cb,context);
}},getSeriesByName:function(name){var series=this._componentsMap.series;
return filter(series,function(oneSeries){return oneSeries.name===name;
})},getSeriesByIndex:function(seriesIndex){return this._componentsMap.series[seriesIndex];
},getSeriesByType:function(subType){var series=this._componentsMap.series;
return filter(series,function(oneSeries){return oneSeries.subType===subType;
})},getSeries:function(){return this._componentsMap.series.slice();
},eachSeries:function(cb,context){assertSeriesInitialized(this),
each(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.series[rawSeriesIndex];
cb.call(context,series,rawSeriesIndex)},this)},eachRawSeries:function(cb,context){
each(this._componentsMap.series,cb,context)},eachSeriesByType:function(subType,cb,context){
assertSeriesInitialized(this),each(this._seriesIndices,function(rawSeriesIndex){
var series=this._componentsMap.series[rawSeriesIndex];series.subType===subType&&cb.call(context,series,rawSeriesIndex);
},this)},eachRawSeriesByType:function(subType,cb,context){return each(this.getSeriesByType(subType),cb,context);
},isSeriesFiltered:function(seriesModel){return assertSeriesInitialized(this),
zrUtil.indexOf(this._seriesIndices,seriesModel.componentIndex)<0;
},filterSeries:function(cb,context){assertSeriesInitialized(this);
var filteredSeries=filter(this._componentsMap.series,cb,context);
this._seriesIndices=createSeriesIndices(filteredSeries)},restoreData:function(){
var componentsMap=this._componentsMap;this._seriesIndices=createSeriesIndices(componentsMap.series);
var componentTypes=[];each(componentsMap,function(components,componentType){
componentTypes.push(componentType)}),ComponentModel.topologicalTravel(componentTypes,ComponentModel.getAllClassMainTypes(),function(componentType,dependencies){
each(componentsMap[componentType],function(component){component.restoreData();
})})}});zrUtil.mixin(GlobalModel,__webpack_require__(24)),module.exports=GlobalModel;
},function(module,exports){function clone(source){if(null==source||"object"!=typeof source)return source;
var result=source,typeStr=objToString.call(source);if("[object Array]"===typeStr){
result=[];for(var i=0,len=source.length;i<len;i++)result[i]=clone(source[i]);
}else if(TYPED_ARRAY[typeStr])result=source.constructor.from(source);else if(!BUILTIN_OBJECT[typeStr]&&!isDom(source)){
result={};for(var key in source)source.hasOwnProperty(key)&&(result[key]=clone(source[key]));
}return result}function merge(target,source,overwrite){if(!isObject(source)||!isObject(target))return overwrite?clone(source):target;
for(var key in source)if(source.hasOwnProperty(key)){var targetProp=target[key],sourceProp=source[key];
!isObject(sourceProp)||!isObject(targetProp)||isArray(sourceProp)||isArray(targetProp)||isDom(sourceProp)||isDom(targetProp)||isBuildInObject(sourceProp)||isBuildInObject(targetProp)?!overwrite&&key in target||(target[key]=clone(source[key],!0)):merge(targetProp,sourceProp,overwrite);
}return target}function mergeAll(targetAndSources,overwrite){
for(var result=targetAndSources[0],i=1,len=targetAndSources.length;i<len;i++)result=merge(result,targetAndSources[i],overwrite);
return result}function extend(target,source){for(var key in source)source.hasOwnProperty(key)&&(target[key]=source[key]);
return target}function defaults(target,source,overlay){for(var key in source)source.hasOwnProperty(key)&&(overlay?null!=source[key]:null==target[key])&&(target[key]=source[key]);
return target}function createCanvas(){return document.createElement("canvas");
}function getContext(){return _ctx||(_ctx=util.createCanvas().getContext("2d")),
_ctx}function indexOf(array,value){if(array){if(array.indexOf)return array.indexOf(value);
for(var i=0,len=array.length;i<len;i++)if(array[i]===value)return i;
}return-1}function inherits(clazz,baseClazz){function F(){}var clazzPrototype=clazz.prototype;
F.prototype=baseClazz.prototype,clazz.prototype=new F;for(var prop in clazzPrototype)clazz.prototype[prop]=clazzPrototype[prop];
clazz.prototype.constructor=clazz,clazz.superClass=baseClazz}
function mixin(target,source,overlay){target="prototype"in target?target.prototype:target,
source="prototype"in source?source.prototype:source,defaults(target,source,overlay);
}function isArrayLike(data){if(data)return"string"!=typeof data&&"number"==typeof data.length;
}function each(obj,cb,context){if(obj&&cb)if(obj.forEach&&obj.forEach===nativeForEach)obj.forEach(cb,context);else if(obj.length===+obj.length)for(var i=0,len=obj.length;i<len;i++)cb.call(context,obj[i],i,obj);else for(var key in obj)obj.hasOwnProperty(key)&&cb.call(context,obj[key],key,obj);
}function map(obj,cb,context){if(obj&&cb){if(obj.map&&obj.map===nativeMap)return obj.map(cb,context);
for(var result=[],i=0,len=obj.length;i<len;i++)result.push(cb.call(context,obj[i],i,obj));
return result}}function reduce(obj,cb,memo,context){if(obj&&cb){
if(obj.reduce&&obj.reduce===nativeReduce)return obj.reduce(cb,memo,context);
for(var i=0,len=obj.length;i<len;i++)memo=cb.call(context,memo,obj[i],i,obj);
return memo}}function filter(obj,cb,context){if(obj&&cb){if(obj.filter&&obj.filter===nativeFilter)return obj.filter(cb,context);
for(var result=[],i=0,len=obj.length;i<len;i++)cb.call(context,obj[i],i,obj)&&result.push(obj[i]);
return result}}function find(obj,cb,context){if(obj&&cb)for(var i=0,len=obj.length;i<len;i++)if(cb.call(context,obj[i],i,obj))return obj[i];
}function bind(func,context){var args=nativeSlice.call(arguments,2);
return function(){return func.apply(context,args.concat(nativeSlice.call(arguments)));
}}function curry(func){var args=nativeSlice.call(arguments,1);
return function(){return func.apply(this,args.concat(nativeSlice.call(arguments)));
}}function isArray(value){return"[object Array]"===objToString.call(value);
}function isFunction(value){return"function"==typeof value}function isString(value){
return"[object String]"===objToString.call(value)}function isObject(value){
var type=typeof value;return"function"===type||!!value&&"object"==type;
}function isBuildInObject(value){return!!BUILTIN_OBJECT[objToString.call(value)];
}function isDom(value){return"object"==typeof value&&"number"==typeof value.nodeType&&"object"==typeof value.ownerDocument;
}function eqNaN(value){return value!==value}function retrieve(values){
for(var i=0,len=arguments.length;i<len;i++)if(null!=arguments[i])return arguments[i];
}function slice(){return Function.call.apply(nativeSlice,arguments);
}function assert(condition,message){if(!condition)throw new Error(message);
}var _ctx,BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,
"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,
"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1
},TYPED_ARRAY={"[object Int8Array]":1,"[object Uint8Array]":1,
"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,
"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,
"[object Float64Array]":1},objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,nativeReduce=arrayProto.reduce,util={
inherits:inherits,mixin:mixin,clone:clone,merge:merge,mergeAll:mergeAll,
extend:extend,defaults:defaults,getContext:getContext,createCanvas:createCanvas,
indexOf:indexOf,slice:slice,find:find,isArrayLike:isArrayLike,
each:each,map:map,reduce:reduce,filter:filter,bind:bind,curry:curry,
isArray:isArray,isString:isString,isObject:isObject,isFunction:isFunction,
isBuildInObject:isBuildInObject,isDom:isDom,eqNaN:eqNaN,retrieve:retrieve,
assert:assert,noop:function(){}};module.exports=util},function(module,exports,__webpack_require__){
function has(obj,prop){return obj&&obj.hasOwnProperty(prop)}var formatUtil=__webpack_require__(6),nubmerUtil=__webpack_require__(7),Model=__webpack_require__(12),zrUtil=__webpack_require__(4),each=zrUtil.each,isObject=zrUtil.isObject,modelUtil={};
modelUtil.normalizeToArray=function(value){return value instanceof Array?value:null==value?[]:[value];
},modelUtil.defaultEmphasis=function(opt,subOpts){if(opt){var emphasisOpt=opt.emphasis=opt.emphasis||{},normalOpt=opt.normal=opt.normal||{};
each(subOpts,function(subOptName){var val=zrUtil.retrieve(emphasisOpt[subOptName],normalOpt[subOptName]);
null!=val&&(emphasisOpt[subOptName]=val)})}},modelUtil.LABEL_OPTIONS=["position","offset","show","textStyle","distance","formatter"],
modelUtil.getDataItemValue=function(dataItem){return dataItem&&(null==dataItem.value?dataItem:dataItem.value);
},modelUtil.isDataItemOption=function(dataItem){return isObject(dataItem)&&!(dataItem instanceof Array);
},modelUtil.converDataValue=function(value,dimInfo){var dimType=dimInfo&&dimInfo.type;
return"ordinal"===dimType?value:("time"!==dimType||isFinite(value)||null==value||"-"===value||(value=+nubmerUtil.parseDate(value)),
null==value||""===value?NaN:+value)},modelUtil.createDataFormatModel=function(data,opt){
var model=new Model;return zrUtil.mixin(model,modelUtil.dataFormatMixin),
model.seriesIndex=opt.seriesIndex,model.name=opt.name||"",model.mainType=opt.mainType,
model.subType=opt.subType,model.getData=function(){return data;
},model},modelUtil.dataFormatMixin={getDataParams:function(dataIndex,dataType){
var data=this.getData(dataType),seriesIndex=this.seriesIndex,seriesName=this.name,rawValue=this.getRawValue(dataIndex,dataType),rawDataIndex=data.getRawIndex(dataIndex),name=data.getName(dataIndex,!0),itemOpt=data.getRawDataItem(dataIndex);
return{componentType:this.mainType,componentSubType:this.subType,
seriesType:"series"===this.mainType?this.subType:null,seriesIndex:seriesIndex,
seriesName:seriesName,name:name,dataIndex:rawDataIndex,data:itemOpt,
dataType:dataType,value:rawValue,color:data.getItemVisual(dataIndex,"color"),
$vars:["seriesName","name","value"]}},getFormattedLabel:function(dataIndex,status,dataType,dimIndex){
status=status||"normal";var data=this.getData(dataType),itemModel=data.getItemModel(dataIndex),params=this.getDataParams(dataIndex,dataType);
null!=dimIndex&&params.value instanceof Array&&(params.value=params.value[dimIndex]);
var formatter=itemModel.get(["label",status,"formatter"]);return"function"==typeof formatter?(params.status=status,
formatter(params)):"string"==typeof formatter?formatUtil.formatTpl(formatter,params):void 0;
},getRawValue:function(idx,dataType){var data=this.getData(dataType),dataItem=data.getRawDataItem(idx);
if(null!=dataItem)return!isObject(dataItem)||dataItem instanceof Array?dataItem:dataItem.value;
},formatTooltip:zrUtil.noop},modelUtil.mappingToExists=function(exists,newCptOptions){
newCptOptions=(newCptOptions||[]).slice();var result=zrUtil.map(exists||[],function(obj,index){
return{exist:obj}});return each(newCptOptions,function(cptOption,index){
if(isObject(cptOption)){for(var i=0;i<result.length;i++)if(!result[i].option&&null!=cptOption.id&&result[i].exist.id===cptOption.id+"")return result[i].option=cptOption,
void(newCptOptions[index]=null);for(var i=0;i<result.length;i++){
var exist=result[i].exist;if(!(result[i].option||null!=exist.id&&null!=cptOption.id||null==cptOption.name||modelUtil.isIdInner(cptOption)||modelUtil.isIdInner(exist)||exist.name!==cptOption.name+""))return result[i].option=cptOption,
void(newCptOptions[index]=null)}}}),each(newCptOptions,function(cptOption,index){
if(isObject(cptOption)){for(var i=0;i<result.length;i++){var exist=result[i].exist;
if(!result[i].option&&!modelUtil.isIdInner(exist)&&null==cptOption.id){
result[i].option=cptOption;break}}i>=result.length&&result.push({
option:cptOption})}}),result},modelUtil.makeIdAndName=function(mapResult){
var idMap={};each(mapResult,function(item,index){var existCpt=item.exist;
existCpt&&(idMap[existCpt.id]=item)}),each(mapResult,function(item,index){
var opt=item.option;zrUtil.assert(!opt||null==opt.id||!idMap[opt.id]||idMap[opt.id]===item,"id duplicates: "+(opt&&opt.id)),
opt&&null!=opt.id&&(idMap[opt.id]=item),!item.keyInfo&&(item.keyInfo={});
}),each(mapResult,function(item,index){var existCpt=item.exist,opt=item.option,keyInfo=item.keyInfo;
if(isObject(opt)){if(keyInfo.name=null!=opt.name?opt.name+"":existCpt?existCpt.name:"\0-",
existCpt)keyInfo.id=existCpt.id;else if(null!=opt.id)keyInfo.id=opt.id+"";else{
var idNum=0;do keyInfo.id="\0"+keyInfo.name+"\0"+idNum++;while(idMap[keyInfo.id]);
}idMap[keyInfo.id]=item}})},modelUtil.isIdInner=function(cptOption){
return isObject(cptOption)&&cptOption.id&&0===(cptOption.id+"").indexOf("\0_ec_\0");
},modelUtil.compressBatches=function(batchA,batchB){function makeMap(sourceBatch,map,otherMap){
for(var i=0,len=sourceBatch.length;i<len;i++)for(var seriesId=sourceBatch[i].seriesId,dataIndices=modelUtil.normalizeToArray(sourceBatch[i].dataIndex),otherDataIndices=otherMap&&otherMap[seriesId],j=0,lenj=dataIndices.length;j<lenj;j++){
var dataIndex=dataIndices[j];otherDataIndices&&otherDataIndices[dataIndex]?otherDataIndices[dataIndex]=null:(map[seriesId]||(map[seriesId]={}))[dataIndex]=1;
}}function mapToArray(map,isData){var result=[];for(var i in map)if(map.hasOwnProperty(i)&&null!=map[i])if(isData)result.push(+i);else{
var dataIndices=mapToArray(map[i],!0);dataIndices.length&&result.push({
seriesId:i,dataIndex:dataIndices})}return result}var mapA={},mapB={};
return makeMap(batchA||[],mapA),makeMap(batchB||[],mapB,mapA),
[mapToArray(mapA),mapToArray(mapB)]},modelUtil.queryDataIndex=function(data,payload){
return null!=payload.dataIndexInside?payload.dataIndexInside:null!=payload.dataIndex?zrUtil.isArray(payload.dataIndex)?zrUtil.map(payload.dataIndex,function(value){
return data.indexOfRawIndex(value)}):data.indexOfRawIndex(payload.dataIndex):null!=payload.name?zrUtil.isArray(payload.name)?zrUtil.map(payload.name,function(value){
return data.indexOfName(value)}):data.indexOfName(payload.name):void 0;
},modelUtil.parseFinder=function(ecModel,finder,opt){if(zrUtil.isString(finder)){
var obj={};obj[finder+"Index"]=0,finder=obj}var defaultMainType=opt&&opt.defaultMainType;
!defaultMainType||has(finder,defaultMainType+"Index")||has(finder,defaultMainType+"Id")||has(finder,defaultMainType+"Name")||(finder[defaultMainType+"Index"]=0);
var result={};return each(finder,function(value,key){var value=finder[key];
if("dataIndex"===key||"dataIndexInside"===key)return void(result[key]=value);
var parsedKey=key.match(/^(\w+)(Index|Id|Name)$/)||[],mainType=parsedKey[1],queryType=parsedKey[2];
if(mainType&&queryType){var queryParam={mainType:mainType};queryParam[queryType.toLowerCase()]=value;
var models=ecModel.queryComponents(queryParam);result[mainType+"Models"]=models,
result[mainType+"Model"]=models[0]}}),result},module.exports=modelUtil;
},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),textContain=__webpack_require__(8),formatUtil={};
formatUtil.addCommas=function(x){return isNaN(x)?"-":(x=(x+"").split("."),
x[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(x.length>1?"."+x[1]:""));
},formatUtil.toCamelCase=function(str,upperCaseFirst){return str=(str||"").toLowerCase().replace(/-(.)/g,function(match,group1){
return group1.toUpperCase()}),upperCaseFirst&&str&&(str=str.charAt(0).toUpperCase()+str.slice(1)),
str},formatUtil.normalizeCssArray=function(val){var len=val.length;
return"number"==typeof val?[val,val,val,val]:2===len?[val[0],val[1],val[0],val[1]]:3===len?[val[0],val[1],val[2],val[1]]:val;
};var encodeHTML=formatUtil.encodeHTML=function(source){return String(source).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");
},TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(varName,seriesIdx){
return"{"+varName+(null==seriesIdx?"":seriesIdx)+"}"};formatUtil.formatTpl=function(tpl,paramsList,encode){
zrUtil.isArray(paramsList)||(paramsList=[paramsList]);var seriesLen=paramsList.length;
if(!seriesLen)return"";for(var $vars=paramsList[0].$vars||[],i=0;i<$vars.length;i++){
var alias=TPL_VAR_ALIAS[i],val=wrapVar(alias,0);tpl=tpl.replace(wrapVar(alias),encode?encodeHTML(val):val);
}for(var seriesIdx=0;seriesIdx<seriesLen;seriesIdx++)for(var k=0;k<$vars.length;k++){
var val=paramsList[seriesIdx][$vars[k]];tpl=tpl.replace(wrapVar(TPL_VAR_ALIAS[k],seriesIdx),encode?encodeHTML(val):val);
}return tpl};var s2d=function(str){return str<10?"0"+str:str};
formatUtil.formatTime=function(tpl,value){"week"!==tpl&&"month"!==tpl&&"quarter"!==tpl&&"half-year"!==tpl&&"year"!==tpl||(tpl="MM-dd\nyyyy");
var date=numberUtil.parseDate(value),y=date.getFullYear(),M=date.getMonth()+1,d=date.getDate(),h=date.getHours(),m=date.getMinutes(),s=date.getSeconds();
return tpl=tpl.replace("MM",s2d(M)).toLowerCase().replace("yyyy",y).replace("yy",y%100).replace("dd",s2d(d)).replace("d",d).replace("hh",s2d(h)).replace("h",h).replace("mm",s2d(m)).replace("m",m).replace("ss",s2d(s)).replace("s",s);
},formatUtil.capitalFirst=function(str){return str?str.charAt(0).toUpperCase()+str.substr(1):str;
},formatUtil.truncateText=textContain.truncateText,module.exports=formatUtil;
},function(module,exports){function _trim(str){return str.replace(/^\s+/,"").replace(/\s+$/,"");
}var number={},RADIAN_EPSILON=1e-4;number.linearMap=function(val,domain,range,clamp){
var subDomain=domain[1]-domain[0],subRange=range[1]-range[0];if(0===subDomain)return 0===subRange?range[0]:(range[0]+range[1])/2;
if(clamp)if(subDomain>0){if(val<=domain[0])return range[0];if(val>=domain[1])return range[1];
}else{if(val>=domain[0])return range[0];if(val<=domain[1])return range[1];
}else{if(val===domain[0])return range[0];if(val===domain[1])return range[1];
}return(val-domain[0])/subDomain*subRange+range[0]},number.parsePercent=function(percent,all){
switch(percent){case"center":case"middle":percent="50%";break;
case"left":case"top":percent="0%";break;case"right":case"bottom":
percent="100%"}return"string"==typeof percent?_trim(percent).match(/%$/)?parseFloat(percent)/100*all:parseFloat(percent):null==percent?NaN:+percent;
},number.round=function(x,precision){return null==precision&&(precision=10),
precision=Math.min(Math.max(0,precision),20),+(+x).toFixed(precision);
},number.asc=function(arr){return arr.sort(function(a,b){return a-b;
}),arr},number.getPrecision=function(val){if(val=+val,isNaN(val))return 0;
for(var e=1,count=0;Math.round(val*e)/e!==val;)e*=10,count++;return count;
},number.getPrecisionSafe=function(val){var str=val.toString(),dotIndex=str.indexOf(".");
return dotIndex<0?0:str.length-1-dotIndex},number.getPixelPrecision=function(dataExtent,pixelExtent){
var log=Math.log,LN10=Math.LN10,dataQuantity=Math.floor(log(dataExtent[1]-dataExtent[0])/LN10),sizeQuantity=Math.round(log(Math.abs(pixelExtent[1]-pixelExtent[0]))/LN10),precision=Math.min(Math.max(-dataQuantity+sizeQuantity,0),20);
return isFinite(precision)?precision:20},number.MAX_SAFE_INTEGER=9007199254740991,
number.remRadian=function(radian){var pi2=2*Math.PI;return(radian%pi2+pi2)%pi2;
},number.isRadianAroundZero=function(val){return val>-RADIAN_EPSILON&&val<RADIAN_EPSILON;
},number.parseDate=function(value){if(value instanceof Date)return value;
if("string"==typeof value){var ret=new Date(value);return isNaN(+ret)&&(ret=new Date(new Date(value.replace(/-/g,"/"))-new Date("1970/01/01"))),
ret}return new Date(Math.round(value))},number.quantity=function(val){
return Math.pow(10,Math.floor(Math.log(val)/Math.LN10))},number.nice=function(val,round){
var nf,exp10=number.quantity(val),f=val/exp10;return nf=round?f<1.5?1:f<2.5?2:f<4?3:f<7?5:10:f<1?1:f<2?2:f<3?3:f<5?5:10,
nf*exp10},number.reformIntervals=function(list){function littleThan(a,b,lg){
return a.interval[lg]<b.interval[lg]||a.interval[lg]===b.interval[lg]&&(a.close[lg]-b.close[lg]===(lg?-1:1)||!lg&&littleThan(a,b,1));
}list.sort(function(a,b){return littleThan(a,b,0)?-1:1});for(var curr=-(1/0),currClose=1,i=0;i<list.length;){
for(var interval=list[i].interval,close=list[i].close,lg=0;lg<2;lg++)interval[lg]<=curr&&(interval[lg]=curr,
close[lg]=lg?1:1-currClose),curr=interval[lg],currClose=close[lg];
interval[0]===interval[1]&&close[0]*close[1]!==1?list.splice(i,1):i++;
}return list},number.isNumeric=function(v){return v-parseFloat(v)>=0;
},module.exports=number},function(module,exports,__webpack_require__){
function getTextWidth(text,textFont){var key=text+":"+textFont;
if(textWidthCache[key])return textWidthCache[key];for(var textLines=(text+"").split("\n"),width=0,i=0,l=textLines.length;i<l;i++)width=Math.max(textContain.measureText(textLines[i],textFont).width,width);
return textWidthCacheCounter>TEXT_CACHE_MAX&&(textWidthCacheCounter=0,
textWidthCache={}),textWidthCacheCounter++,textWidthCache[key]=width,
width}function getTextRect(text,textFont,textAlign,textBaseline){
var textLineLen=((text||"")+"").split("\n").length,width=getTextWidth(text,textFont),lineHeight=getTextWidth("国",textFont),height=textLineLen*lineHeight,rect=new BoundingRect(0,0,width,height);
switch(rect.lineHeight=lineHeight,textBaseline){case"bottom":
case"alphabetic":rect.y-=lineHeight;break;case"middle":rect.y-=lineHeight/2;
}switch(textAlign){case"end":case"right":rect.x-=rect.width;break;
case"center":rect.x-=rect.width/2}return rect}function adjustTextPositionOnRect(textPosition,rect,textRect,distance){
var x=rect.x,y=rect.y,height=rect.height,width=rect.width,textHeight=textRect.height,halfHeight=height/2-textHeight/2,textAlign="left";
switch(textPosition){case"left":x-=distance,y+=halfHeight,textAlign="right";
break;case"right":x+=distance+width,y+=halfHeight,textAlign="left";
break;case"top":x+=width/2,y-=distance+textHeight,textAlign="center";
break;case"bottom":x+=width/2,y+=height+distance,textAlign="center";
break;case"inside":x+=width/2,y+=halfHeight,textAlign="center";
break;case"insideLeft":x+=distance,y+=halfHeight,textAlign="left";
break;case"insideRight":x+=width-distance,y+=halfHeight,textAlign="right";
break;case"insideTop":x+=width/2,y+=distance,textAlign="center";
break;case"insideBottom":x+=width/2,y+=height-textHeight-distance,
textAlign="center";break;case"insideTopLeft":x+=distance,y+=distance,
textAlign="left";break;case"insideTopRight":x+=width-distance,
y+=distance,textAlign="right";break;case"insideBottomLeft":x+=distance,
y+=height-textHeight-distance;break;case"insideBottomRight":x+=width-distance,
y+=height-textHeight-distance,textAlign="right"}return{x:x,y:y,
textAlign:textAlign,textBaseline:"top"}}function truncateText(text,containerWidth,textFont,ellipsis,options){
if(!containerWidth)return"";options=options||{},ellipsis=retrieve(ellipsis,"...");
for(var maxIterations=retrieve(options.maxIterations,2),minChar=retrieve(options.minChar,0),cnCharWidth=getTextWidth("国",textFont),ascCharWidth=getTextWidth("a",textFont),placeholder=retrieve(options.placeholder,""),contentWidth=containerWidth=Math.max(0,containerWidth-1),i=0;i<minChar&&contentWidth>=ascCharWidth;i++)contentWidth-=ascCharWidth;
var ellipsisWidth=getTextWidth(ellipsis);ellipsisWidth>contentWidth&&(ellipsis="",
ellipsisWidth=0),contentWidth=containerWidth-ellipsisWidth;for(var textLines=(text+"").split("\n"),i=0,len=textLines.length;i<len;i++){
var textLine=textLines[i],lineWidth=getTextWidth(textLine,textFont);
if(!(lineWidth<=containerWidth)){for(var j=0;;j++){if(lineWidth<=contentWidth||j>=maxIterations){
textLine+=ellipsis;break}var subLength=0===j?estimateLength(textLine,contentWidth,ascCharWidth,cnCharWidth):lineWidth>0?Math.floor(textLine.length*contentWidth/lineWidth):0;
textLine=textLine.substr(0,subLength),lineWidth=getTextWidth(textLine,textFont);
}""===textLine&&(textLine=placeholder),textLines[i]=textLine}
}return textLines.join("\n")}function estimateLength(text,contentWidth,ascCharWidth,cnCharWidth){
for(var width=0,i=0,len=text.length;i<len&&width<contentWidth;i++){
var charCode=text.charCodeAt(i);width+=0<=charCode&&charCode<=127?ascCharWidth:cnCharWidth;
}return i}var textWidthCache={},textWidthCacheCounter=0,TEXT_CACHE_MAX=5e3,util=__webpack_require__(4),BoundingRect=__webpack_require__(9),retrieve=util.retrieve,textContain={
getWidth:getTextWidth,getBoundingRect:getTextRect,adjustTextPositionOnRect:adjustTextPositionOnRect,
truncateText:truncateText,measureText:function(text,textFont){
var ctx=util.getContext();return ctx.font=textFont||"12px sans-serif",
ctx.measureText(text)}};module.exports=textContain},function(module,exports,__webpack_require__){
"use strict";function BoundingRect(x,y,width,height){width<0&&(x+=width,
width=-width),height<0&&(y+=height,height=-height),this.x=x,this.y=y,
this.width=width,this.height=height}var vec2=__webpack_require__(10),matrix=__webpack_require__(11),v2ApplyTransform=vec2.applyTransform,mathMin=Math.min,mathMax=Math.max;
BoundingRect.prototype={constructor:BoundingRect,union:function(other){
var x=mathMin(other.x,this.x),y=mathMin(other.y,this.y);this.width=mathMax(other.x+other.width,this.x+this.width)-x,
this.height=mathMax(other.y+other.height,this.y+this.height)-y,
this.x=x,this.y=y},applyTransform:function(){var lt=[],rb=[],lb=[],rt=[];
return function(m){if(m){lt[0]=lb[0]=this.x,lt[1]=rt[1]=this.y,
rb[0]=rt[0]=this.x+this.width,rb[1]=lb[1]=this.y+this.height,
v2ApplyTransform(lt,lt,m),v2ApplyTransform(rb,rb,m),v2ApplyTransform(lb,lb,m),
v2ApplyTransform(rt,rt,m),this.x=mathMin(lt[0],rb[0],lb[0],rt[0]),
this.y=mathMin(lt[1],rb[1],lb[1],rt[1]);var maxX=mathMax(lt[0],rb[0],lb[0],rt[0]),maxY=mathMax(lt[1],rb[1],lb[1],rt[1]);
this.width=maxX-this.x,this.height=maxY-this.y}}}(),calculateTransform:function(b){
var a=this,sx=b.width/a.width,sy=b.height/a.height,m=matrix.create();
return matrix.translate(m,m,[-a.x,-a.y]),matrix.scale(m,m,[sx,sy]),
matrix.translate(m,m,[b.x,b.y]),m},intersect:function(b){if(!b)return!1;
b instanceof BoundingRect||(b=BoundingRect.create(b));var a=this,ax0=a.x,ax1=a.x+a.width,ay0=a.y,ay1=a.y+a.height,bx0=b.x,bx1=b.x+b.width,by0=b.y,by1=b.y+b.height;
return!(ax1<bx0||bx1<ax0||ay1<by0||by1<ay0)},contain:function(x,y){
var rect=this;return x>=rect.x&&x<=rect.x+rect.width&&y>=rect.y&&y<=rect.y+rect.height;
},clone:function(){return new BoundingRect(this.x,this.y,this.width,this.height);
},copy:function(other){this.x=other.x,this.y=other.y,this.width=other.width,
this.height=other.height},plain:function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}}},BoundingRect.create=function(rect){
return new BoundingRect(rect.x,rect.y,rect.width,rect.height);
},module.exports=BoundingRect},function(module,exports){var ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,vector={
create:function(x,y){var out=new ArrayCtor(2);return null==x&&(x=0),
null==y&&(y=0),out[0]=x,out[1]=y,out},copy:function(out,v){return out[0]=v[0],
out[1]=v[1],out},clone:function(v){var out=new ArrayCtor(2);return out[0]=v[0],
out[1]=v[1],out},set:function(out,a,b){return out[0]=a,out[1]=b,
out},add:function(out,v1,v2){return out[0]=v1[0]+v2[0],out[1]=v1[1]+v2[1],
out},scaleAndAdd:function(out,v1,v2,a){return out[0]=v1[0]+v2[0]*a,
out[1]=v1[1]+v2[1]*a,out},sub:function(out,v1,v2){return out[0]=v1[0]-v2[0],
out[1]=v1[1]-v2[1],out},len:function(v){return Math.sqrt(this.lenSquare(v));
},lenSquare:function(v){return v[0]*v[0]+v[1]*v[1]},mul:function(out,v1,v2){
return out[0]=v1[0]*v2[0],out[1]=v1[1]*v2[1],out},div:function(out,v1,v2){
return out[0]=v1[0]/v2[0],out[1]=v1[1]/v2[1],out},dot:function(v1,v2){
return v1[0]*v2[0]+v1[1]*v2[1]},scale:function(out,v,s){return out[0]=v[0]*s,
out[1]=v[1]*s,out},normalize:function(out,v){var d=vector.len(v);
return 0===d?(out[0]=0,out[1]=0):(out[0]=v[0]/d,out[1]=v[1]/d),
out},distance:function(v1,v2){return Math.sqrt((v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1]));
},distanceSquare:function(v1,v2){return(v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1]);
},negate:function(out,v){return out[0]=-v[0],out[1]=-v[1],out;
},lerp:function(out,v1,v2,t){return out[0]=v1[0]+t*(v2[0]-v1[0]),
out[1]=v1[1]+t*(v2[1]-v1[1]),out},applyTransform:function(out,v,m){
var x=v[0],y=v[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],
out},min:function(out,v1,v2){return out[0]=Math.min(v1[0],v2[0]),
out[1]=Math.min(v1[1],v2[1]),out},max:function(out,v1,v2){return out[0]=Math.max(v1[0],v2[0]),
out[1]=Math.max(v1[1],v2[1]),out}};vector.length=vector.len,vector.lengthSquare=vector.lenSquare,
vector.dist=vector.distance,vector.distSquare=vector.distanceSquare,
module.exports=vector},function(module,exports){var ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,matrix={
create:function(){var out=new ArrayCtor(6);return matrix.identity(out),
out},identity:function(out){return out[0]=1,out[1]=0,out[2]=0,
out[3]=1,out[4]=0,out[5]=0,out},copy:function(out,m){return out[0]=m[0],
out[1]=m[1],out[2]=m[2],out[3]=m[3],out[4]=m[4],out[5]=m[5],out;
},mul:function(out,m1,m2){var out0=m1[0]*m2[0]+m1[2]*m2[1],out1=m1[1]*m2[0]+m1[3]*m2[1],out2=m1[0]*m2[2]+m1[2]*m2[3],out3=m1[1]*m2[2]+m1[3]*m2[3],out4=m1[0]*m2[4]+m1[2]*m2[5]+m1[4],out5=m1[1]*m2[4]+m1[3]*m2[5]+m1[5];
return out[0]=out0,out[1]=out1,out[2]=out2,out[3]=out3,out[4]=out4,
out[5]=out5,out},translate:function(out,a,v){return out[0]=a[0],
out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4]+v[0],out[5]=a[5]+v[1],
out},rotate:function(out,a,rad){var aa=a[0],ac=a[2],atx=a[4],ab=a[1],ad=a[3],aty=a[5],st=Math.sin(rad),ct=Math.cos(rad);
return out[0]=aa*ct+ab*st,out[1]=-aa*st+ab*ct,out[2]=ac*ct+ad*st,
out[3]=-ac*st+ct*ad,out[4]=ct*atx+st*aty,out[5]=ct*aty-st*atx,
out},scale:function(out,a,v){var vx=v[0],vy=v[1];return out[0]=a[0]*vx,
out[1]=a[1]*vy,out[2]=a[2]*vx,out[3]=a[3]*vy,out[4]=a[4]*vx,out[5]=a[5]*vy,
out},invert:function(out,a){var aa=a[0],ac=a[2],atx=a[4],ab=a[1],ad=a[3],aty=a[5],det=aa*ad-ab*ac;
return det?(det=1/det,out[0]=ad*det,out[1]=-ab*det,out[2]=-ac*det,
out[3]=aa*det,out[4]=(ac*aty-ad*atx)*det,out[5]=(ab*atx-aa*aty)*det,
out):null}};module.exports=matrix},function(module,exports,__webpack_require__){
function Model(option,parentModel,ecModel){this.parentModel=parentModel,
this.ecModel=ecModel,this.option=option}function doGet(obj,pathArr,parentModel){
for(var i=0;i<pathArr.length&&(!pathArr[i]||(obj=obj&&"object"==typeof obj?obj[pathArr[i]]:null,
null!=obj));i++);return null==obj&&parentModel&&(obj=parentModel.get(pathArr)),
obj}function getParent(model,path){var getParentMethod=clazzUtil.get(model,"getParent");
return getParentMethod?getParentMethod.call(model,path):model.parentModel;
}var zrUtil=__webpack_require__(4),clazzUtil=__webpack_require__(13),env=__webpack_require__(2);
Model.prototype={constructor:Model,init:null,mergeOption:function(option){
zrUtil.merge(this.option,option,!0)},get:function(path,ignoreParent){
return null==path?this.option:doGet(this.option,this.parsePath(path),!ignoreParent&&getParent(this,path));
},getShallow:function(key,ignoreParent){var option=this.option,val=null==option?option:option[key],parentModel=!ignoreParent&&getParent(this,key);
return null==val&&parentModel&&(val=parentModel.getShallow(key)),
val},getModel:function(path,parentModel){var thisParentModel,obj=null==path?this.option:doGet(this.option,path=this.parsePath(path));
return parentModel=parentModel||(thisParentModel=getParent(this,path))&&thisParentModel.getModel(path),
new Model(obj,parentModel,this.ecModel)},isEmpty:function(){return null==this.option;
},restoreData:function(){},clone:function(){var Ctor=this.constructor;
return new Ctor(zrUtil.clone(this.option))},setReadOnly:function(properties){
clazzUtil.setReadOnly(this,properties)},parsePath:function(path){
return"string"==typeof path&&(path=path.split(".")),path},customizeGetParent:function(getParentMethod){
clazzUtil.set(this,"getParent",getParentMethod)},isAnimationEnabled:function(){
if(!env.node){if(null!=this.option.animation)return!!this.option.animation;
if(this.parentModel)return this.parentModel.isAnimationEnabled();
}}},clazzUtil.enableClassExtend(Model);var mixin=zrUtil.mixin;
mixin(Model,__webpack_require__(14)),mixin(Model,__webpack_require__(16)),
mixin(Model,__webpack_require__(17)),mixin(Model,__webpack_require__(18)),
module.exports=Model},function(module,exports,__webpack_require__){
function checkClassType(componentType){zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType),'componentType "'+componentType+'" illegal');
}function superCall(context,methodName){var args=zrUtil.slice(arguments,2);
return this.superClass.prototype[methodName].apply(context,args);
}function superApply(context,methodName,args){return this.superClass.prototype[methodName].apply(context,args);
}var zrUtil=__webpack_require__(4),clazz={},TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",MEMBER_PRIFIX="\0ec_\0";
clazz.set=function(host,name,value){return host[MEMBER_PRIFIX+name]=value;
},clazz.get=function(host,name){return host[MEMBER_PRIFIX+name];
},clazz.hasOwn=function(host,name){return host.hasOwnProperty(MEMBER_PRIFIX+name);
};var parseClassType=clazz.parseClassType=function(componentType){
var ret={main:"",sub:""};return componentType&&(componentType=componentType.split(TYPE_DELIMITER),
ret.main=componentType[0]||"",ret.sub=componentType[1]||""),ret;
};clazz.enableClassExtend=function(RootClass,mandatoryMethods){
RootClass.$constructor=RootClass,RootClass.extend=function(proto){
zrUtil.each(mandatoryMethods,function(method){proto[method]||console.warn("Method `"+method+"` should be implemented"+(proto.type?" in "+proto.type:"")+".");
});var superClass=this,ExtendedClass=function(){proto.$constructor?proto.$constructor.apply(this,arguments):superClass.apply(this,arguments);
};return zrUtil.extend(ExtendedClass.prototype,proto),ExtendedClass.extend=this.extend,
ExtendedClass.superCall=superCall,ExtendedClass.superApply=superApply,
zrUtil.inherits(ExtendedClass,this),ExtendedClass.superClass=superClass,
ExtendedClass}},clazz.enableClassManagement=function(entity,options){
function makeContainer(componentType){var container=storage[componentType.main];
return container&&container[IS_CONTAINER]||(container=storage[componentType.main]={},
container[IS_CONTAINER]=!0),container}options=options||{};var storage={};
if(entity.registerClass=function(Clazz,componentType){if(componentType)if(checkClassType(componentType),
componentType=parseClassType(componentType),componentType.sub){
if(componentType.sub!==IS_CONTAINER){var container=makeContainer(componentType);
container[componentType.sub]=Clazz}}else storage[componentType.main]&&console.warn(componentType.main+" exists."),
storage[componentType.main]=Clazz;return Clazz},entity.getClass=function(componentMainType,subType,throwWhenNotFound){
var Clazz=storage[componentMainType];if(Clazz&&Clazz[IS_CONTAINER]&&(Clazz=subType?Clazz[subType]:null),
throwWhenNotFound&&!Clazz)throw new Error(subType?"Component "+componentMainType+"."+(subType||"")+" not exists. Load it first.":componentMainType+".type should be specified.");
return Clazz},entity.getClassesByMainType=function(componentType){
componentType=parseClassType(componentType);var result=[],obj=storage[componentType.main];
return obj&&obj[IS_CONTAINER]?zrUtil.each(obj,function(o,type){
type!==IS_CONTAINER&&result.push(o)}):result.push(obj),result;
},entity.hasClass=function(componentType){return componentType=parseClassType(componentType),
!!storage[componentType.main]},entity.getAllClassMainTypes=function(){
var types=[];return zrUtil.each(storage,function(obj,type){types.push(type);
}),types},entity.hasSubTypes=function(componentType){componentType=parseClassType(componentType);
var obj=storage[componentType.main];return obj&&obj[IS_CONTAINER];
},entity.parseClassType=parseClassType,options.registerWhenExtend){
var originalExtend=entity.extend;originalExtend&&(entity.extend=function(proto){
var ExtendedClass=originalExtend.call(this,proto);return entity.registerClass(ExtendedClass,proto.type);
})}return entity},clazz.setReadOnly=function(obj,properties){},
module.exports=clazz},function(module,exports,__webpack_require__){
var getLineStyle=__webpack_require__(15)([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);
module.exports={getLineStyle:function(excludes){var style=getLineStyle.call(this,excludes),lineDash=this.getLineDash(style.lineWidth);
return lineDash&&(style.lineDash=lineDash),style},getLineDash:function(lineWidth){
null==lineWidth&&(lineWidth=1);var lineType=this.get("type"),dotSize=Math.max(lineWidth,2),dashSize=4*lineWidth;
return"solid"===lineType||null==lineType?null:"dashed"===lineType?[dashSize,dashSize]:[dotSize,dotSize];
}}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);
module.exports=function(properties){for(var i=0;i<properties.length;i++)properties[i][1]||(properties[i][1]=properties[i][0]);
return function(excludes){for(var style={},i=0;i<properties.length;i++){
var propName=properties[i][1];if(!(excludes&&zrUtil.indexOf(excludes,propName)>=0)){
var val=this.getShallow(propName);null!=val&&(style[properties[i][0]]=val);
}}return style}}},function(module,exports,__webpack_require__){
module.exports={getAreaStyle:__webpack_require__(15)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]])
}},function(module,exports,__webpack_require__){function getShallow(model,path){
return model&&model.getShallow(path)}var textContain=__webpack_require__(8);
module.exports={getTextColor:function(){var ecModel=this.ecModel;
return this.getShallow("color")||ecModel&&ecModel.get("textStyle.color");
},getFont:function(){var ecModel=this.ecModel,gTextStyleModel=ecModel&&ecModel.getModel("textStyle");
return[this.getShallow("fontStyle")||getShallow(gTextStyleModel,"fontStyle"),this.getShallow("fontWeight")||getShallow(gTextStyleModel,"fontWeight"),(this.getShallow("fontSize")||getShallow(gTextStyleModel,"fontSize")||12)+"px",this.getShallow("fontFamily")||getShallow(gTextStyleModel,"fontFamily")||"sans-serif"].join(" ");
},getTextRect:function(text){return textContain.getBoundingRect(text,this.getFont(),this.getShallow("align"),this.getShallow("baseline"));
},truncateText:function(text,containerWidth,ellipsis,options){
return textContain.truncateText(text,containerWidth,this.getFont(),ellipsis,options);
}}},function(module,exports,__webpack_require__){var getItemStyle=__webpack_require__(15)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]);
module.exports={getItemStyle:function(excludes){var style=getItemStyle.call(this,excludes),lineDash=this.getBorderLineDash();
return lineDash&&(style.lineDash=lineDash),style},getBorderLineDash:function(){
var lineType=this.get("borderType");return"solid"===lineType||null==lineType?null:"dashed"===lineType?[5,5]:[1,1];
}}},function(module,exports,__webpack_require__){function getDependencies(componentType){
var deps=[];return zrUtil.each(ComponentModel.getClassesByMainType(componentType),function(Clazz){
arrayPush.apply(deps,Clazz.prototype.dependencies||[])}),zrUtil.map(deps,function(type){
return clazzUtil.parseClassType(type).main})}var Model=__webpack_require__(12),zrUtil=__webpack_require__(4),arrayPush=Array.prototype.push,componentUtil=__webpack_require__(20),clazzUtil=__webpack_require__(13),layout=__webpack_require__(21),ComponentModel=Model.extend({
type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,
defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,
$constructor:function(option,parentModel,ecModel,extraOpt){Model.call(this,option,parentModel,ecModel,extraOpt),
this.uid=componentUtil.getUID("componentModel")},init:function(option,parentModel,ecModel,extraOpt){
this.mergeDefaultAndTheme(option,ecModel)},mergeDefaultAndTheme:function(option,ecModel){
var layoutMode=this.layoutMode,inputPositionParams=layoutMode?layout.getLayoutParams(option):{},themeModel=ecModel.getTheme();
zrUtil.merge(option,themeModel.get(this.mainType)),zrUtil.merge(option,this.getDefaultOption()),
layoutMode&&layout.mergeLayoutParam(option,inputPositionParams,layoutMode);
},mergeOption:function(option,extraOpt){zrUtil.merge(this.option,option,!0);
var layoutMode=this.layoutMode;layoutMode&&layout.mergeLayoutParam(this.option,option,layoutMode);
},optionUpdated:function(newCptOption,isInit){},getDefaultOption:function(){
if(!clazzUtil.hasOwn(this,"__defaultOption")){for(var optList=[],Class=this.constructor;Class;){
var opt=Class.prototype.defaultOption;opt&&optList.push(opt),
Class=Class.superClass}for(var defaultOption={},i=optList.length-1;i>=0;i--)defaultOption=zrUtil.merge(defaultOption,optList[i],!0);
clazzUtil.set(this,"__defaultOption",defaultOption)}return clazzUtil.get(this,"__defaultOption");
},getReferringComponents:function(mainType){return this.ecModel.queryComponents({
mainType:mainType,index:this.get(mainType+"Index",!0),id:this.get(mainType+"Id",!0)
})}});clazzUtil.enableClassManagement(ComponentModel,{registerWhenExtend:!0
}),componentUtil.enableSubTypeDefaulter(ComponentModel),componentUtil.enableTopologicalTravel(ComponentModel,getDependencies),
zrUtil.mixin(ComponentModel,__webpack_require__(22)),module.exports=ComponentModel;
},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),clazz=__webpack_require__(13),parseClassType=clazz.parseClassType,base=0,componentUtil={},DELIMITER="_";
componentUtil.getUID=function(type){return[type||"",base++,Math.random()].join(DELIMITER);
},componentUtil.enableSubTypeDefaulter=function(entity){var subTypeDefaulters={};
return entity.registerSubTypeDefaulter=function(componentType,defaulter){
componentType=parseClassType(componentType),subTypeDefaulters[componentType.main]=defaulter;
},entity.determineSubType=function(componentType,option){var type=option.type;
if(!type){var componentTypeMain=parseClassType(componentType).main;
entity.hasSubTypes(componentType)&&subTypeDefaulters[componentTypeMain]&&(type=subTypeDefaulters[componentTypeMain](option));
}return type},entity},componentUtil.enableTopologicalTravel=function(entity,dependencyGetter){
function makeDepndencyGraph(fullNameList){var graph={},noEntryList=[];
return zrUtil.each(fullNameList,function(name){var thisItem=createDependencyGraphItem(graph,name),originalDeps=thisItem.originalDeps=dependencyGetter(name),availableDeps=getAvailableDependencies(originalDeps,fullNameList);
thisItem.entryCount=availableDeps.length,0===thisItem.entryCount&&noEntryList.push(name),
zrUtil.each(availableDeps,function(dependentName){zrUtil.indexOf(thisItem.predecessor,dependentName)<0&&thisItem.predecessor.push(dependentName);
var thatItem=createDependencyGraphItem(graph,dependentName);zrUtil.indexOf(thatItem.successor,dependentName)<0&&thatItem.successor.push(name);
})}),{graph:graph,noEntryList:noEntryList}}function createDependencyGraphItem(graph,name){
return graph[name]||(graph[name]={predecessor:[],successor:[]
}),graph[name]}function getAvailableDependencies(originalDeps,fullNameList){
var availableDeps=[];return zrUtil.each(originalDeps,function(dep){
zrUtil.indexOf(fullNameList,dep)>=0&&availableDeps.push(dep)}),
availableDeps}entity.topologicalTravel=function(targetNameList,fullNameList,callback,context){
function removeEdge(succComponentType){graph[succComponentType].entryCount--,
0===graph[succComponentType].entryCount&&stack.push(succComponentType);
}function removeEdgeAndAdd(succComponentType){targetNameSet[succComponentType]=!0,
removeEdge(succComponentType)}if(targetNameList.length){var result=makeDepndencyGraph(fullNameList),graph=result.graph,stack=result.noEntryList,targetNameSet={};
for(zrUtil.each(targetNameList,function(name){targetNameSet[name]=!0;
});stack.length;){var currComponentType=stack.pop(),currVertex=graph[currComponentType],isInTargetNameSet=!!targetNameSet[currComponentType];
isInTargetNameSet&&(callback.call(context,currComponentType,currVertex.originalDeps.slice()),
delete targetNameSet[currComponentType]),zrUtil.each(currVertex.successor,isInTargetNameSet?removeEdgeAndAdd:removeEdge);
}zrUtil.each(targetNameSet,function(){throw new Error("Circle dependency may exists");
})}}},module.exports=componentUtil},function(module,exports,__webpack_require__){
"use strict";function boxLayout(orient,group,gap,maxWidth,maxHeight){
var x=0,y=0;null==maxWidth&&(maxWidth=1/0),null==maxHeight&&(maxHeight=1/0);
var currentLineMaxSize=0;group.eachChild(function(child,idx){
var nextX,nextY,position=child.position,rect=child.getBoundingRect(),nextChild=group.childAt(idx+1),nextChildRect=nextChild&&nextChild.getBoundingRect();
if("horizontal"===orient){var moveX=rect.width+(nextChildRect?-nextChildRect.x+rect.x:0);
nextX=x+moveX,nextX>maxWidth||child.newline?(x=0,nextX=moveX,
y+=currentLineMaxSize+gap,currentLineMaxSize=rect.height):currentLineMaxSize=Math.max(currentLineMaxSize,rect.height);
}else{var moveY=rect.height+(nextChildRect?-nextChildRect.y+rect.y:0);
nextY=y+moveY,nextY>maxHeight||child.newline?(x+=currentLineMaxSize+gap,
y=0,nextY=moveY,currentLineMaxSize=rect.width):currentLineMaxSize=Math.max(currentLineMaxSize,rect.width);
}child.newline||(position[0]=x,position[1]=y,"horizontal"===orient?x=nextX+gap:y=nextY+gap);
})}var zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),numberUtil=__webpack_require__(7),formatUtil=__webpack_require__(6),parsePercent=numberUtil.parsePercent,each=zrUtil.each,layout={},LOCATION_PARAMS=layout.LOCATION_PARAMS=["left","right","top","bottom","width","height"];
layout.box=boxLayout,layout.vbox=zrUtil.curry(boxLayout,"vertical"),
layout.hbox=zrUtil.curry(boxLayout,"horizontal"),layout.getAvailableSize=function(positionInfo,containerRect,margin){
var containerWidth=containerRect.width,containerHeight=containerRect.height,x=parsePercent(positionInfo.x,containerWidth),y=parsePercent(positionInfo.y,containerHeight),x2=parsePercent(positionInfo.x2,containerWidth),y2=parsePercent(positionInfo.y2,containerHeight);
return(isNaN(x)||isNaN(parseFloat(positionInfo.x)))&&(x=0),(isNaN(x2)||isNaN(parseFloat(positionInfo.x2)))&&(x2=containerWidth),
(isNaN(y)||isNaN(parseFloat(positionInfo.y)))&&(y=0),(isNaN(y2)||isNaN(parseFloat(positionInfo.y2)))&&(y2=containerHeight),
margin=formatUtil.normalizeCssArray(margin||0),{width:Math.max(x2-x-margin[1]-margin[3],0),
height:Math.max(y2-y-margin[0]-margin[2],0)}},layout.getLayoutRect=function(positionInfo,containerRect,margin){
margin=formatUtil.normalizeCssArray(margin||0);var containerWidth=containerRect.width,containerHeight=containerRect.height,left=parsePercent(positionInfo.left,containerWidth),top=parsePercent(positionInfo.top,containerHeight),right=parsePercent(positionInfo.right,containerWidth),bottom=parsePercent(positionInfo.bottom,containerHeight),width=parsePercent(positionInfo.width,containerWidth),height=parsePercent(positionInfo.height,containerHeight),verticalMargin=margin[2]+margin[0],horizontalMargin=margin[1]+margin[3],aspect=positionInfo.aspect;
switch(isNaN(width)&&(width=containerWidth-right-horizontalMargin-left),
isNaN(height)&&(height=containerHeight-bottom-verticalMargin-top),
isNaN(width)&&isNaN(height)&&(aspect>containerWidth/containerHeight?width=.8*containerWidth:height=.8*containerHeight),
null!=aspect&&(isNaN(width)&&(width=aspect*height),isNaN(height)&&(height=width/aspect)),
isNaN(left)&&(left=containerWidth-right-width-horizontalMargin),
isNaN(top)&&(top=containerHeight-bottom-height-verticalMargin),
positionInfo.left||positionInfo.right){case"center":left=containerWidth/2-width/2-margin[3];
break;case"right":left=containerWidth-width-horizontalMargin}
switch(positionInfo.top||positionInfo.bottom){case"middle":case"center":
top=containerHeight/2-height/2-margin[0];break;case"bottom":top=containerHeight-height-verticalMargin;
}left=left||0,top=top||0,isNaN(width)&&(width=containerWidth-left-(right||0)),
isNaN(height)&&(height=containerHeight-top-(bottom||0));var rect=new BoundingRect(left+margin[3],top+margin[0],width,height);
return rect.margin=margin,rect},layout.positionElement=function(el,positionInfo,containerRect,margin,opt){
var h=!opt||!opt.hv||opt.hv[0],v=!opt||!opt.hv||opt.hv[1],boundingMode=opt&&opt.boundingMode||"all";
if(h||v){var rect;if("raw"===boundingMode)rect="group"===el.type?new BoundingRect(0,0,+positionInfo.width||0,+positionInfo.height||0):el.getBoundingRect();else if(rect=el.getBoundingRect(),
el.needLocalTransform()){var transform=el.getLocalTransform();
rect=rect.clone(),rect.applyTransform(transform)}positionInfo=layout.getLayoutRect(zrUtil.defaults({
width:rect.width,height:rect.height},positionInfo),containerRect,margin);
var elPos=el.position,dx=h?positionInfo.x-rect.x:0,dy=v?positionInfo.y-rect.y:0;
el.attr("position","raw"===boundingMode?[dx,dy]:[elPos[0]+dx,elPos[1]+dy]);
}},layout.mergeLayoutParam=function(targetOption,newOption,opt){
function merge(names){var newParams={},newValueCount=0,merged={},mergedValueCount=0,enoughParamNumber=opt.ignoreSize?1:2;
if(each(names,function(name){merged[name]=targetOption[name]}),
each(names,function(name){hasProp(newOption,name)&&(newParams[name]=merged[name]=newOption[name]),
hasValue(newParams,name)&&newValueCount++,hasValue(merged,name)&&mergedValueCount++;
}),mergedValueCount!==enoughParamNumber&&newValueCount){if(newValueCount>=enoughParamNumber)return newParams;
for(var i=0;i<names.length;i++){var name=names[i];if(!hasProp(newParams,name)&&hasProp(targetOption,name)){
newParams[name]=targetOption[name];break}}return newParams}return merged;
}function hasProp(obj,name){return obj.hasOwnProperty(name)}function hasValue(obj,name){
return null!=obj[name]&&"auto"!==obj[name]}function copy(names,target,source){
each(names,function(name){target[name]=source[name]})}!zrUtil.isObject(opt)&&(opt={});
var hNames=["width","left","right"],vNames=["height","top","bottom"],hResult=merge(hNames),vResult=merge(vNames);
copy(hNames,targetOption,hResult),copy(vNames,targetOption,vResult);
},layout.getLayoutParams=function(source){return layout.copyLayoutParams({},source);
},layout.copyLayoutParams=function(target,source){return source&&target&&each(LOCATION_PARAMS,function(name){
source.hasOwnProperty(name)&&(target[name]=source[name])}),target;
},module.exports=layout},function(module,exports){module.exports={
getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),
right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),
height:this.get("height")}}}},function(module,exports){var platform="";
"undefined"!=typeof navigator&&(platform=navigator.platform||""),
module.exports={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],
textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",
fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,
animation:!0,animationDuration:1e3,animationDurationUpdate:300,
animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",
animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,
hoverLayerThreshold:3e3}},function(module,exports,__webpack_require__){
var classUtil=__webpack_require__(13),set=classUtil.set,get=classUtil.get;
module.exports={clearColorPalette:function(){set(this,"colorIdx",0),
set(this,"colorNameMap",{})},getColorFromPalette:function(name,scope){
scope=scope||this;var colorIdx=get(scope,"colorIdx")||0,colorNameMap=get(scope,"colorNameMap")||set(scope,"colorNameMap",{});
if(colorNameMap[name])return colorNameMap[name];var colorPalette=this.get("color",!0)||[];
if(colorPalette.length){var color=colorPalette[colorIdx];return name&&(colorNameMap[name]=color),
set(scope,"colorIdx",(colorIdx+1)%colorPalette.length),color}
}}},function(module,exports,__webpack_require__){"use strict";
function ExtensionAPI(chartInstance){zrUtil.each(echartsAPIList,function(name){
this[name]=zrUtil.bind(chartInstance[name],chartInstance)},this);
}var zrUtil=__webpack_require__(4),echartsAPIList=["getDom","getZr","getWidth","getHeight","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption"];
module.exports=ExtensionAPI},function(module,exports,__webpack_require__){
"use strict";function CoordinateSystemManager(){this._coordinateSystems=[];
}var zrUtil=__webpack_require__(4),coordinateSystemCreators={};
CoordinateSystemManager.prototype={constructor:CoordinateSystemManager,
create:function(ecModel,api){var coordinateSystems=[];zrUtil.each(coordinateSystemCreators,function(creater,type){
var list=creater.create(ecModel,api);coordinateSystems=coordinateSystems.concat(list||[]);
}),this._coordinateSystems=coordinateSystems},update:function(ecModel,api){
zrUtil.each(this._coordinateSystems,function(coordSys){coordSys.update&&coordSys.update(ecModel,api);
})},getCoordinateSystems:function(){return this._coordinateSystems.slice();
}},CoordinateSystemManager.register=function(type,coordinateSystemCreator){
coordinateSystemCreators[type]=coordinateSystemCreator},CoordinateSystemManager.get=function(type){
return coordinateSystemCreators[type]},module.exports=CoordinateSystemManager;
},function(module,exports,__webpack_require__){function OptionManager(api){
this._api=api,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,
this._currentMediaIndices=[],this._optionBackup,this._newBaseOption;
}function parseRawOption(rawOption,optionPreprocessorFuncs,isNew){
var mediaDefault,baseOption,timelineOptions=[],mediaList=[],timelineOpt=rawOption.timeline;
if(rawOption.baseOption&&(baseOption=rawOption.baseOption),(timelineOpt||rawOption.options)&&(baseOption=baseOption||{},
timelineOptions=(rawOption.options||[]).slice()),rawOption.media){
baseOption=baseOption||{};var media=rawOption.media;each(media,function(singleMedia){
singleMedia&&singleMedia.option&&(singleMedia.query?mediaList.push(singleMedia):mediaDefault||(mediaDefault=singleMedia));
})}return baseOption||(baseOption=rawOption),baseOption.timeline||(baseOption.timeline=timelineOpt),
each([baseOption].concat(timelineOptions).concat(zrUtil.map(mediaList,function(media){
return media.option})),function(option){each(optionPreprocessorFuncs,function(preProcess){
preProcess(option,isNew)})}),{baseOption:baseOption,timelineOptions:timelineOptions,
mediaDefault:mediaDefault,mediaList:mediaList}}function applyMediaQuery(query,ecWidth,ecHeight){
var realMap={width:ecWidth,height:ecHeight,aspectratio:ecWidth/ecHeight
},applicatable=!0;return zrUtil.each(query,function(value,attr){
var matched=attr.match(QUERY_REG);if(matched&&matched[1]&&matched[2]){
var operator=matched[1],realAttr=matched[2].toLowerCase();compare(realMap[realAttr],value,operator)||(applicatable=!1);
}}),applicatable}function compare(real,expect,operator){return"min"===operator?real>=expect:"max"===operator?real<=expect:real===expect;
}function indicesEquals(indices1,indices2){return indices1.join(",")===indices2.join(",");
}function mergeOption(oldOption,newOption){newOption=newOption||{},
each(newOption,function(newCptOpt,mainType){if(null!=newCptOpt){
var oldCptOpt=oldOption[mainType];if(ComponentModel.hasClass(mainType)){
newCptOpt=modelUtil.normalizeToArray(newCptOpt),oldCptOpt=modelUtil.normalizeToArray(oldCptOpt);
var mapResult=modelUtil.mappingToExists(oldCptOpt,newCptOpt);oldOption[mainType]=map(mapResult,function(item){
return item.option&&item.exist?merge(item.exist,item.option,!0):item.exist||item.option;
})}else oldOption[mainType]=merge(oldCptOpt,newCptOpt,!0)}})}
var zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),ComponentModel=__webpack_require__(19),each=zrUtil.each,clone=zrUtil.clone,map=zrUtil.map,merge=zrUtil.merge,QUERY_REG=/^(min|max)?(.+)$/;
OptionManager.prototype={constructor:OptionManager,setOption:function(rawOption,optionPreprocessorFuncs){
rawOption=clone(rawOption,!0);var oldOptionBackup=this._optionBackup,newParsedOption=parseRawOption.call(this,rawOption,optionPreprocessorFuncs,!oldOptionBackup);
this._newBaseOption=newParsedOption.baseOption,oldOptionBackup?(mergeOption(oldOptionBackup.baseOption,newParsedOption.baseOption),
newParsedOption.timelineOptions.length&&(oldOptionBackup.timelineOptions=newParsedOption.timelineOptions),
newParsedOption.mediaList.length&&(oldOptionBackup.mediaList=newParsedOption.mediaList),
newParsedOption.mediaDefault&&(oldOptionBackup.mediaDefault=newParsedOption.mediaDefault)):this._optionBackup=newParsedOption;
},mountOption:function(isRecreate){var optionBackup=this._optionBackup;
return this._timelineOptions=map(optionBackup.timelineOptions,clone),
this._mediaList=map(optionBackup.mediaList,clone),this._mediaDefault=clone(optionBackup.mediaDefault),
this._currentMediaIndices=[],clone(isRecreate?optionBackup.baseOption:this._newBaseOption);
},getTimelineOption:function(ecModel){var option,timelineOptions=this._timelineOptions;
if(timelineOptions.length){var timelineModel=ecModel.getComponent("timeline");
timelineModel&&(option=clone(timelineOptions[timelineModel.getCurrentIndex()],!0));
}return option},getMediaOption:function(ecModel){var ecWidth=this._api.getWidth(),ecHeight=this._api.getHeight(),mediaList=this._mediaList,mediaDefault=this._mediaDefault,indices=[],result=[];
if(!mediaList.length&&!mediaDefault)return result;for(var i=0,len=mediaList.length;i<len;i++)applyMediaQuery(mediaList[i].query,ecWidth,ecHeight)&&indices.push(i);
return!indices.length&&mediaDefault&&(indices=[-1]),indices.length&&!indicesEquals(indices,this._currentMediaIndices)&&(result=map(indices,function(index){
return clone(index===-1?mediaDefault.option:mediaList[index].option);
})),this._currentMediaIndices=indices,result}},module.exports=OptionManager;
},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),formatUtil=__webpack_require__(6),classUtil=__webpack_require__(13),modelUtil=__webpack_require__(5),ComponentModel=__webpack_require__(19),colorPaletteMixin=__webpack_require__(24),env=__webpack_require__(2),layout=__webpack_require__(21),set=classUtil.set,get=classUtil.get,encodeHTML=formatUtil.encodeHTML,addCommas=formatUtil.addCommas,SeriesModel=ComponentModel.extend({
type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,
legendDataProvider:null,visualColorAccessPath:"itemStyle.normal.color",
layoutMode:null,init:function(option,parentModel,ecModel,extraOpt){
this.seriesIndex=this.componentIndex,this.mergeDefaultAndTheme(option,ecModel),
set(this,"dataBeforeProcessed",this.getInitialData(option,ecModel)),
this.restoreData()},mergeDefaultAndTheme:function(option,ecModel){
var layoutMode=this.layoutMode,inputPositionParams=layoutMode?layout.getLayoutParams(option):{};
zrUtil.merge(option,ecModel.getTheme().get(this.subType)),zrUtil.merge(option,this.getDefaultOption()),
modelUtil.defaultEmphasis(option.label,modelUtil.LABEL_OPTIONS),
this.fillDataTextStyle(option.data),layoutMode&&layout.mergeLayoutParam(option,inputPositionParams,layoutMode);
},mergeOption:function(newSeriesOption,ecModel){newSeriesOption=zrUtil.merge(this.option,newSeriesOption,!0),
this.fillDataTextStyle(newSeriesOption.data);var layoutMode=this.layoutMode;
layoutMode&&layout.mergeLayoutParam(this.option,newSeriesOption,layoutMode);
var data=this.getInitialData(newSeriesOption,ecModel);data&&(set(this,"data",data),
set(this,"dataBeforeProcessed",data.cloneShallow()))},fillDataTextStyle:function(data){
if(data)for(var i=0;i<data.length;i++)data[i]&&data[i].label&&modelUtil.defaultEmphasis(data[i].label,modelUtil.LABEL_OPTIONS);
},getInitialData:function(){},getData:function(dataType){var data=get(this,"data");
return null==dataType?data:data.getLinkedData(dataType)},setData:function(data){
set(this,"data",data)},getRawData:function(){return get(this,"dataBeforeProcessed");
},coordDimToDataDim:function(coordDim){return[coordDim]},dataDimToCoordDim:function(dataDim){
return dataDim},getBaseAxis:function(){var coordSys=this.coordinateSystem;
return coordSys&&coordSys.getBaseAxis&&coordSys.getBaseAxis();
},formatTooltip:function(dataIndex,multipleSeries,dataType){function formatArrayValue(value){
var result=[];return zrUtil.each(value,function(val,idx){var valStr,dimInfo=data.getDimensionInfo(idx),dimType=dimInfo&&dimInfo.type;
valStr="ordinal"===dimType?val+"":"time"===dimType?multipleSeries?"":formatUtil.formatTime("yyyy/MM/dd hh:mm:ss",val):addCommas(val),
valStr&&result.push(valStr)}),result.join(", ")}var data=get(this,"data"),value=this.getRawValue(dataIndex),formattedValue=encodeHTML(zrUtil.isArray(value)?formatArrayValue(value):addCommas(value)),name=data.getName(dataIndex),color=data.getItemVisual(dataIndex,"color");
zrUtil.isObject(color)&&color.colorStops&&(color=(color.colorStops[0]||{}).color),
color=color||"transparent";var colorEl='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+encodeHTML(color)+'"></span>',seriesName=this.name;
return"\0-"===seriesName&&(seriesName=""),multipleSeries?colorEl+encodeHTML(this.name)+" : "+formattedValue:(seriesName&&encodeHTML(seriesName)+"<br />")+colorEl+(name?encodeHTML(name)+" : "+formattedValue:formattedValue);
},isAnimationEnabled:function(){if(env.node)return!1;var animationEnabled=this.getShallow("animation");
return animationEnabled&&this.getData().count()>this.getShallow("animationThreshold")&&(animationEnabled=!1),
animationEnabled},restoreData:function(){set(this,"data",get(this,"dataBeforeProcessed").cloneShallow());
},getColorFromPalette:function(name,scope){var ecModel=this.ecModel,color=colorPaletteMixin.getColorFromPalette.call(this,name,scope);
return color||(color=ecModel.getColorFromPalette(name,scope)),
color},getAxisTooltipDataIndex:null,getTooltipPosition:null});
zrUtil.mixin(SeriesModel,modelUtil.dataFormatMixin),zrUtil.mixin(SeriesModel,colorPaletteMixin),
module.exports=SeriesModel},function(module,exports,__webpack_require__){
var Group=__webpack_require__(30),componentUtil=__webpack_require__(20),clazzUtil=__webpack_require__(13),Component=function(){
this.group=new Group,this.uid=componentUtil.getUID("viewComponent");
};Component.prototype={constructor:Component,init:function(ecModel,api){},
render:function(componentModel,ecModel,api,payload){},dispose:function(){}
};var componentProto=Component.prototype;componentProto.updateView=componentProto.updateLayout=componentProto.updateVisual=function(seriesModel,ecModel,api,payload){},
clazzUtil.enableClassExtend(Component),clazzUtil.enableClassManagement(Component,{
registerWhenExtend:!0}),module.exports=Component},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),Element=__webpack_require__(31),BoundingRect=__webpack_require__(9),Group=function(opts){
opts=opts||{},Element.call(this,opts);for(var key in opts)opts.hasOwnProperty(key)&&(this[key]=opts[key]);
this._children=[],this.__storage=null,this.__dirty=!0};Group.prototype={
constructor:Group,isGroup:!0,type:"group",silent:!1,children:function(){
return this._children.slice()},childAt:function(idx){return this._children[idx];
},childOfName:function(name){for(var children=this._children,i=0;i<children.length;i++)if(children[i].name===name)return children[i];
},childCount:function(){return this._children.length},add:function(child){
return child&&child!==this&&child.parent!==this&&(this._children.push(child),
this._doAdd(child)),this},addBefore:function(child,nextSibling){
if(child&&child!==this&&child.parent!==this&&nextSibling&&nextSibling.parent===this){
var children=this._children,idx=children.indexOf(nextSibling);
idx>=0&&(children.splice(idx,0,child),this._doAdd(child))}return this;
},_doAdd:function(child){child.parent&&child.parent.remove(child),
child.parent=this;var storage=this.__storage,zr=this.__zr;storage&&storage!==child.__storage&&(storage.addToMap(child),
child instanceof Group&&child.addChildrenToStorage(storage)),
zr&&zr.refresh()},remove:function(child){var zr=this.__zr,storage=this.__storage,children=this._children,idx=zrUtil.indexOf(children,child);
return idx<0?this:(children.splice(idx,1),child.parent=null,storage&&(storage.delFromMap(child.id),
child instanceof Group&&child.delChildrenFromStorage(storage)),
zr&&zr.refresh(),this)},removeAll:function(){var child,i,children=this._children,storage=this.__storage;
for(i=0;i<children.length;i++)child=children[i],storage&&(storage.delFromMap(child.id),
child instanceof Group&&child.delChildrenFromStorage(storage)),
child.parent=null;return children.length=0,this},eachChild:function(cb,context){
for(var children=this._children,i=0;i<children.length;i++){var child=children[i];
cb.call(context,child,i)}return this},traverse:function(cb,context){
for(var i=0;i<this._children.length;i++){var child=this._children[i];
cb.call(context,child),"group"===child.type&&child.traverse(cb,context);
}return this},addChildrenToStorage:function(storage){for(var i=0;i<this._children.length;i++){
var child=this._children[i];storage.addToMap(child),child instanceof Group&&child.addChildrenToStorage(storage);
}},delChildrenFromStorage:function(storage){for(var i=0;i<this._children.length;i++){
var child=this._children[i];storage.delFromMap(child.id),child instanceof Group&&child.delChildrenFromStorage(storage);
}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),
this},getBoundingRect:function(includeChildren){for(var rect=null,tmpRect=new BoundingRect(0,0,0,0),children=includeChildren||this._children,tmpMat=[],i=0;i<children.length;i++){
var child=children[i];if(!child.ignore&&!child.invisible){var childRect=child.getBoundingRect(),transform=child.getLocalTransform(tmpMat);
transform?(tmpRect.copy(childRect),tmpRect.applyTransform(transform),
rect=rect||tmpRect.clone(),rect.union(tmpRect)):(rect=rect||childRect.clone(),
rect.union(childRect))}}return rect||tmpRect}},zrUtil.inherits(Group,Element),
module.exports=Group},function(module,exports,__webpack_require__){
"use strict";var guid=__webpack_require__(32),Eventful=__webpack_require__(33),Transformable=__webpack_require__(34),Animatable=__webpack_require__(35),zrUtil=__webpack_require__(4),Element=function(opts){
Transformable.call(this,opts),Eventful.call(this,opts),Animatable.call(this,opts),
this.id=opts.id||guid()};Element.prototype={type:"element",name:"",
__zr:null,ignore:!1,clipPath:null,drift:function(dx,dy){switch(this.draggable){
case"horizontal":dy=0;break;case"vertical":dx=0}var m=this.transform;
m||(m=this.transform=[1,0,0,1,0,0]),m[4]+=dx,m[5]+=dy,this.decomposeTransform(),
this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},
update:function(){this.updateTransform()},traverse:function(cb,context){},
attrKV:function(key,value){if("position"===key||"scale"===key||"origin"===key){
if(value){var target=this[key];target||(target=this[key]=[]),
target[0]=value[0],target[1]=value[1]}}else this[key]=value},
hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh();
},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh();
},attr:function(key,value){if("string"==typeof key)this.attrKV(key,value);else if(zrUtil.isObject(key))for(var name in key)key.hasOwnProperty(name)&&this.attrKV(name,key[name]);
return this.dirty(!1),this},setClipPath:function(clipPath){var zr=this.__zr;
zr&&clipPath.addSelfToZr(zr),this.clipPath&&this.clipPath!==clipPath&&this.removeClipPath(),
this.clipPath=clipPath,clipPath.__zr=zr,clipPath.__clipTarget=this,
this.dirty(!1)},removeClipPath:function(){var clipPath=this.clipPath;
clipPath&&(clipPath.__zr&&clipPath.removeSelfFromZr(clipPath.__zr),
clipPath.__zr=null,clipPath.__clipTarget=null,this.clipPath=null,
this.dirty(!1))},addSelfToZr:function(zr){this.__zr=zr;var animators=this.animators;
if(animators)for(var i=0;i<animators.length;i++)zr.animation.addAnimator(animators[i]);
this.clipPath&&this.clipPath.addSelfToZr(zr)},removeSelfFromZr:function(zr){
this.__zr=null;var animators=this.animators;if(animators)for(var i=0;i<animators.length;i++)zr.animation.removeAnimator(animators[i]);
this.clipPath&&this.clipPath.removeSelfFromZr(zr)}},zrUtil.mixin(Element,Animatable),
zrUtil.mixin(Element,Transformable),zrUtil.mixin(Element,Eventful),
module.exports=Element},function(module,exports){var idStart=2311;
module.exports=function(){return idStart++}},function(module,exports){
var arrySlice=Array.prototype.slice,Eventful=function(){this._$handlers={};
};Eventful.prototype={constructor:Eventful,one:function(event,handler,context){
var _h=this._$handlers;if(!handler||!event)return this;_h[event]||(_h[event]=[]);
for(var i=0;i<_h[event].length;i++)if(_h[event][i].h===handler)return this;
return _h[event].push({h:handler,one:!0,ctx:context||this}),this;
},on:function(event,handler,context){var _h=this._$handlers;if(!handler||!event)return this;
_h[event]||(_h[event]=[]);for(var i=0;i<_h[event].length;i++)if(_h[event][i].h===handler)return this;
return _h[event].push({h:handler,one:!1,ctx:context||this}),this;
},isSilent:function(event){var _h=this._$handlers;return _h[event]&&_h[event].length;
},off:function(event,handler){var _h=this._$handlers;if(!event)return this._$handlers={},
this;if(handler){if(_h[event]){for(var newList=[],i=0,l=_h[event].length;i<l;i++)_h[event][i].h!=handler&&newList.push(_h[event][i]);
_h[event]=newList}_h[event]&&0===_h[event].length&&delete _h[event];
}else delete _h[event];return this},trigger:function(type){if(this._$handlers[type]){
var args=arguments,argLen=args.length;argLen>3&&(args=arrySlice.call(args,1));
for(var _h=this._$handlers[type],len=_h.length,i=0;i<len;){switch(argLen){
case 1:_h[i].h.call(_h[i].ctx);break;case 2:_h[i].h.call(_h[i].ctx,args[1]);
break;case 3:_h[i].h.call(_h[i].ctx,args[1],args[2]);break;default:
_h[i].h.apply(_h[i].ctx,args)}_h[i].one?(_h.splice(i,1),len--):i++;
}}return this},triggerWithContext:function(type){if(this._$handlers[type]){
var args=arguments,argLen=args.length;argLen>4&&(args=arrySlice.call(args,1,args.length-1));
for(var ctx=args[args.length-1],_h=this._$handlers[type],len=_h.length,i=0;i<len;){
switch(argLen){case 1:_h[i].h.call(ctx);break;case 2:_h[i].h.call(ctx,args[1]);
break;case 3:_h[i].h.call(ctx,args[1],args[2]);break;default:
_h[i].h.apply(ctx,args)}_h[i].one?(_h.splice(i,1),len--):i++}
}return this}},module.exports=Eventful},function(module,exports,__webpack_require__){
"use strict";function isNotAroundZero(val){return val>EPSILON||val<-EPSILON;
}var matrix=__webpack_require__(11),vector=__webpack_require__(10),mIdentity=matrix.identity,EPSILON=5e-5,Transformable=function(opts){
opts=opts||{},opts.position||(this.position=[0,0]),null==opts.rotation&&(this.rotation=0),
opts.scale||(this.scale=[1,1]),this.origin=this.origin||null},transformableProto=Transformable.prototype;
transformableProto.transform=null,transformableProto.needLocalTransform=function(){
return isNotAroundZero(this.rotation)||isNotAroundZero(this.position[0])||isNotAroundZero(this.position[1])||isNotAroundZero(this.scale[0]-1)||isNotAroundZero(this.scale[1]-1);
},transformableProto.updateTransform=function(){var parent=this.parent,parentHasTransform=parent&&parent.transform,needLocalTransform=this.needLocalTransform(),m=this.transform;
return needLocalTransform||parentHasTransform?(m=m||matrix.create(),
needLocalTransform?this.getLocalTransform(m):mIdentity(m),parentHasTransform&&(needLocalTransform?matrix.mul(m,parent.transform,m):matrix.copy(m,parent.transform)),
this.transform=m,this.invTransform=this.invTransform||matrix.create(),
void matrix.invert(this.invTransform,m)):void(m&&mIdentity(m));
},transformableProto.getLocalTransform=function(m){m=m||[],mIdentity(m);
var origin=this.origin,scale=this.scale,rotation=this.rotation,position=this.position;
return origin&&(m[4]-=origin[0],m[5]-=origin[1]),matrix.scale(m,m,scale),
rotation&&matrix.rotate(m,m,rotation),origin&&(m[4]+=origin[0],
m[5]+=origin[1]),m[4]+=position[0],m[5]+=position[1],m},transformableProto.setTransform=function(ctx){
var m=this.transform,dpr=ctx.dpr||1;m?ctx.setTransform(dpr*m[0],dpr*m[1],dpr*m[2],dpr*m[3],dpr*m[4],dpr*m[5]):ctx.setTransform(dpr,0,0,dpr,0,0);
},transformableProto.restoreTransform=function(ctx){var dpr=(this.transform,
ctx.dpr||1);ctx.setTransform(dpr,0,0,dpr,0,0)};var tmpTransform=[];
transformableProto.decomposeTransform=function(){if(this.transform){
var parent=this.parent,m=this.transform;parent&&parent.transform&&(matrix.mul(tmpTransform,parent.invTransform,m),
m=tmpTransform);var sx=m[0]*m[0]+m[1]*m[1],sy=m[2]*m[2]+m[3]*m[3],position=this.position,scale=this.scale;
isNotAroundZero(sx-1)&&(sx=Math.sqrt(sx)),isNotAroundZero(sy-1)&&(sy=Math.sqrt(sy)),
m[0]<0&&(sx=-sx),m[3]<0&&(sy=-sy),position[0]=m[4],position[1]=m[5],
scale[0]=sx,scale[1]=sy,this.rotation=Math.atan2(-m[1]/sy,m[0]/sx);
}},transformableProto.getGlobalScale=function(){var m=this.transform;
if(!m)return[1,1];var sx=Math.sqrt(m[0]*m[0]+m[1]*m[1]),sy=Math.sqrt(m[2]*m[2]+m[3]*m[3]);
return m[0]<0&&(sx=-sx),m[3]<0&&(sy=-sy),[sx,sy]},transformableProto.transformCoordToLocal=function(x,y){
var v2=[x,y],invTransform=this.invTransform;return invTransform&&vector.applyTransform(v2,v2,invTransform),
v2},transformableProto.transformCoordToGlobal=function(x,y){var v2=[x,y],transform=this.transform;
return transform&&vector.applyTransform(v2,v2,transform),v2},
module.exports=Transformable},function(module,exports,__webpack_require__){
"use strict";var Animator=__webpack_require__(36),util=__webpack_require__(4),isString=util.isString,isFunction=util.isFunction,isObject=util.isObject,log=__webpack_require__(40),Animatable=function(){
this.animators=[]};Animatable.prototype={constructor:Animatable,
animate:function(path,loop){var target,animatingShape=!1,el=this,zr=this.__zr;
if(path){var pathSplitted=path.split("."),prop=el;animatingShape="shape"===pathSplitted[0];
for(var i=0,l=pathSplitted.length;i<l;i++)prop&&(prop=prop[pathSplitted[i]]);
prop&&(target=prop)}else target=el;if(!target)return void log('Property "'+path+'" is not existed in element '+el.id);
var animators=el.animators,animator=new Animator(target,loop);
return animator.during(function(target){el.dirty(animatingShape);
}).done(function(){animators.splice(util.indexOf(animators,animator),1);
}),animators.push(animator),zr&&zr.animation.addAnimator(animator),
animator},stopAnimation:function(forwardToLast){for(var animators=this.animators,len=animators.length,i=0;i<len;i++)animators[i].stop(forwardToLast);
return animators.length=0,this},animateTo:function(target,time,delay,easing,callback){
function done(){count--,count||callback&&callback()}isString(delay)?(callback=easing,
easing=delay,delay=0):isFunction(easing)?(callback=easing,easing="linear",
delay=0):isFunction(delay)?(callback=delay,delay=0):isFunction(time)?(callback=time,
time=500):time||(time=500),this.stopAnimation(),this._animateToShallow("",this,target,time,delay,easing,callback);
var animators=this.animators.slice(),count=animators.length;count||callback&&callback();
for(var i=0;i<animators.length;i++)animators[i].done(done).start(easing);
},_animateToShallow:function(path,source,target,time,delay){var objShallow={},propertyCount=0;
for(var name in target)if(target.hasOwnProperty(name))if(null!=source[name])isObject(target[name])&&!util.isArrayLike(target[name])?this._animateToShallow(path?path+"."+name:name,source[name],target[name],time,delay):(objShallow[name]=target[name],
propertyCount++);else if(null!=target[name])if(path){var props={};
props[path]={},props[path][name]=target[name],this.attr(props);
}else this.attr(name,target[name]);return propertyCount>0&&this.animate(path,!1).when(null==time?500:time,objShallow).delay(delay||0),
this}},module.exports=Animatable},function(module,exports,__webpack_require__){
function defaultGetter(target,key){return target[key]}function defaultSetter(target,key,value){
target[key]=value}function interpolateNumber(p0,p1,percent){return(p1-p0)*percent+p0;
}function interpolateString(p0,p1,percent){return percent>.5?p1:p0;
}function interpolateArray(p0,p1,percent,out,arrDim){var len=p0.length;
if(1==arrDim)for(var i=0;i<len;i++)out[i]=interpolateNumber(p0[i],p1[i],percent);else for(var len2=p0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)out[i][j]=interpolateNumber(p0[i][j],p1[i][j],percent);
}function fillArr(arr0,arr1,arrDim){var arr0Len=arr0.length,arr1Len=arr1.length;
if(arr0Len!==arr1Len){var isPreviousLarger=arr0Len>arr1Len;if(isPreviousLarger)arr0.length=arr1Len;else for(var i=arr0Len;i<arr1Len;i++)arr0.push(1===arrDim?arr1[i]:arraySlice.call(arr1[i]));
}for(var len2=arr0[0]&&arr0[0].length,i=0;i<arr0.length;i++)if(1===arrDim)isNaN(arr0[i])&&(arr0[i]=arr1[i]);else for(var j=0;j<len2;j++)isNaN(arr0[i][j])&&(arr0[i][j]=arr1[i][j]);
}function isArraySame(arr0,arr1,arrDim){if(arr0===arr1)return!0;
var len=arr0.length;if(len!==arr1.length)return!1;if(1===arrDim){
for(var i=0;i<len;i++)if(arr0[i]!==arr1[i])return!1}else for(var len2=arr0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)if(arr0[i][j]!==arr1[i][j])return!1;
return!0}function catmullRomInterpolateArray(p0,p1,p2,p3,t,t2,t3,out,arrDim){
var len=p0.length;if(1==arrDim)for(var i=0;i<len;i++)out[i]=catmullRomInterpolate(p0[i],p1[i],p2[i],p3[i],t,t2,t3);else for(var len2=p0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)out[i][j]=catmullRomInterpolate(p0[i][j],p1[i][j],p2[i][j],p3[i][j],t,t2,t3);
}function catmullRomInterpolate(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1);
return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}function cloneValue(value){
if(isArrayLike(value)){var len=value.length;if(isArrayLike(value[0])){
for(var ret=[],i=0;i<len;i++)ret.push(arraySlice.call(value[i]));
return ret}return arraySlice.call(value)}return value}function rgba2String(rgba){
return rgba[0]=Math.floor(rgba[0]),rgba[1]=Math.floor(rgba[1]),
rgba[2]=Math.floor(rgba[2]),"rgba("+rgba.join(",")+")"}function createTrackClip(animator,easing,oneTrackDone,keyframes,propName){
var getter=animator._getter,setter=animator._setter,useSpline="spline"===easing,trackLen=keyframes.length;
if(trackLen){var trackMaxTime,firstVal=keyframes[0].value,isValueArray=isArrayLike(firstVal),isValueColor=!1,isValueString=!1,arrDim=isValueArray&&isArrayLike(firstVal[0])?2:1;
keyframes.sort(function(a,b){return a.time-b.time}),trackMaxTime=keyframes[trackLen-1].time;
for(var kfPercents=[],kfValues=[],prevValue=keyframes[0].value,isAllValueEqual=!0,i=0;i<trackLen;i++){
kfPercents.push(keyframes[i].time/trackMaxTime);var value=keyframes[i].value;
if(isValueArray&&isArraySame(value,prevValue,arrDim)||!isValueArray&&value===prevValue||(isAllValueEqual=!1),
prevValue=value,"string"==typeof value){var colorArray=color.parse(value);
colorArray?(value=colorArray,isValueColor=!0):isValueString=!0;
}kfValues.push(value)}if(!isAllValueEqual){for(var lastValue=kfValues[trackLen-1],i=0;i<trackLen-1;i++)isValueArray?fillArr(kfValues[i],lastValue,arrDim):!isNaN(kfValues[i])||isNaN(lastValue)||isValueString||isValueColor||(kfValues[i]=lastValue);
isValueArray&&fillArr(getter(animator._target,propName),lastValue,arrDim);
var start,w,p0,p1,p2,p3,lastFrame=0,lastFramePercent=0;if(isValueColor)var rgba=[0,0,0,0];
var onframe=function(target,percent){var frame;if(percent<0)frame=0;else if(percent<lastFramePercent){
for(start=Math.min(lastFrame+1,trackLen-1),frame=start;frame>=0&&!(kfPercents[frame]<=percent);frame--);
frame=Math.min(frame,trackLen-2)}else{for(frame=lastFrame;frame<trackLen&&!(kfPercents[frame]>percent);frame++);
frame=Math.min(frame-1,trackLen-2)}lastFrame=frame,lastFramePercent=percent;
var range=kfPercents[frame+1]-kfPercents[frame];if(0!==range)if(w=(percent-kfPercents[frame])/range,
useSpline)if(p1=kfValues[frame],p0=kfValues[0===frame?frame:frame-1],
p2=kfValues[frame>trackLen-2?trackLen-1:frame+1],p3=kfValues[frame>trackLen-3?trackLen-1:frame+2],
isValueArray)catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,getter(target,propName),arrDim);else{
var value;if(isValueColor)value=catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,rgba,1),
value=rgba2String(rgba);else{if(isValueString)return interpolateString(p1,p2,w);
value=catmullRomInterpolate(p0,p1,p2,p3,w,w*w,w*w*w)}setter(target,propName,value);
}else if(isValueArray)interpolateArray(kfValues[frame],kfValues[frame+1],w,getter(target,propName),arrDim);else{
var value;if(isValueColor)interpolateArray(kfValues[frame],kfValues[frame+1],w,rgba,1),
value=rgba2String(rgba);else{if(isValueString)return interpolateString(kfValues[frame],kfValues[frame+1],w);
value=interpolateNumber(kfValues[frame],kfValues[frame+1],w)}
setter(target,propName,value)}},clip=new Clip({target:animator._target,
life:trackMaxTime,loop:animator._loop,delay:animator._delay,onframe:onframe,
ondestroy:oneTrackDone});return easing&&"spline"!==easing&&(clip.easing=easing),
clip}}}var Clip=__webpack_require__(37),color=__webpack_require__(39),util=__webpack_require__(4),isArrayLike=util.isArrayLike,arraySlice=Array.prototype.slice,Animator=function(target,loop,getter,setter){
this._tracks={},this._target=target,this._loop=loop||!1,this._getter=getter||defaultGetter,
this._setter=setter||defaultSetter,this._clipCount=0,this._delay=0,
this._doneList=[],this._onframeList=[],this._clipList=[]};Animator.prototype={
when:function(time,props){var tracks=this._tracks;for(var propName in props)if(props.hasOwnProperty(propName)){
if(!tracks[propName]){tracks[propName]=[];var value=this._getter(this._target,propName);
if(null==value)continue;0!==time&&tracks[propName].push({time:0,
value:cloneValue(value)})}tracks[propName].push({time:time,value:props[propName]
})}return this},during:function(callback){return this._onframeList.push(callback),
this},_doneCallback:function(){this._tracks={},this._clipList.length=0;
for(var doneList=this._doneList,len=doneList.length,i=0;i<len;i++)doneList[i].call(this);
},start:function(easing){var lastClip,self=this,clipCount=0,oneTrackDone=function(){
clipCount--,clipCount||self._doneCallback()};for(var propName in this._tracks)if(this._tracks.hasOwnProperty(propName)){
var clip=createTrackClip(this,easing,oneTrackDone,this._tracks[propName],propName);
clip&&(this._clipList.push(clip),clipCount++,this.animation&&this.animation.addClip(clip),
lastClip=clip)}if(lastClip){var oldOnFrame=lastClip.onframe;lastClip.onframe=function(target,percent){
oldOnFrame(target,percent);for(var i=0;i<self._onframeList.length;i++)self._onframeList[i](target,percent);
}}return clipCount||this._doneCallback(),this},stop:function(forwardToLast){
for(var clipList=this._clipList,animation=this.animation,i=0;i<clipList.length;i++){
var clip=clipList[i];forwardToLast&&clip.onframe(this._target,1),
animation&&animation.removeClip(clip)}clipList.length=0},delay:function(time){
return this._delay=time,this},done:function(cb){return cb&&this._doneList.push(cb),
this},getClips:function(){return this._clipList}},module.exports=Animator;
},function(module,exports,__webpack_require__){function Clip(options){
this._target=options.target,this._life=options.life||1e3,this._delay=options.delay||0,
this._initialized=!1,this.loop=null!=options.loop&&options.loop,
this.gap=options.gap||0,this.easing=options.easing||"Linear",
this.onframe=options.onframe,this.ondestroy=options.ondestroy,
this.onrestart=options.onrestart}var easingFuncs=__webpack_require__(38);
Clip.prototype={constructor:Clip,step:function(globalTime){this._initialized||(this._startTime=globalTime+this._delay,
this._initialized=!0);var percent=(globalTime-this._startTime)/this._life;
if(!(percent<0)){percent=Math.min(percent,1);var easing=this.easing,easingFunc="string"==typeof easing?easingFuncs[easing]:easing,schedule="function"==typeof easingFunc?easingFunc(percent):percent;
return this.fire("frame",schedule),1==percent?this.loop?(this.restart(globalTime),
"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(globalTime){
var remainder=(globalTime-this._startTime)%this._life;this._startTime=globalTime-remainder+this.gap,
this._needsRemove=!1},fire:function(eventType,arg){eventType="on"+eventType,
this[eventType]&&this[eventType](this._target,arg)}},module.exports=Clip;
},function(module,exports){var easing={linear:function(k){return k;
},quadraticIn:function(k){return k*k},quadraticOut:function(k){
return k*(2-k)},quadraticInOut:function(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1);
},cubicIn:function(k){return k*k*k},cubicOut:function(k){return--k*k*k+1;
},cubicInOut:function(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2);
},quarticIn:function(k){return k*k*k*k},quarticOut:function(k){
return 1- --k*k*k*k},quarticInOut:function(k){return(k*=2)<1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2);
},quinticIn:function(k){return k*k*k*k*k},quinticOut:function(k){
return--k*k*k*k*k+1},quinticInOut:function(k){return(k*=2)<1?.5*k*k*k*k*k:.5*((k-=2)*k*k*k*k+2);
},sinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},sinusoidalOut:function(k){
return Math.sin(k*Math.PI/2)},sinusoidalInOut:function(k){return.5*(1-Math.cos(Math.PI*k));
},exponentialIn:function(k){return 0===k?0:Math.pow(1024,k-1);
},exponentialOut:function(k){return 1===k?1:1-Math.pow(2,-10*k);
},exponentialInOut:function(k){return 0===k?0:1===k?1:(k*=2)<1?.5*Math.pow(1024,k-1):.5*(-Math.pow(2,-10*(k-1))+2);
},circularIn:function(k){return 1-Math.sqrt(1-k*k)},circularOut:function(k){
return Math.sqrt(1- --k*k)},circularInOut:function(k){return(k*=2)<1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-(k-=2)*k)+1);
},elasticIn:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,
s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)));
},elasticOut:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,
s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1);
},elasticInOut:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,
s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),(k*=2)<1?-.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)):a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*.5+1);
},backIn:function(k){var s=1.70158;return k*k*((s+1)*k-s)},backOut:function(k){
var s=1.70158;return--k*k*((s+1)*k+s)+1},backInOut:function(k){
var s=2.5949095;return(k*=2)<1?.5*(k*k*((s+1)*k-s)):.5*((k-=2)*k*((s+1)*k+s)+2);
},bounceIn:function(k){return 1-easing.bounceOut(1-k)},bounceOut:function(k){
return k<1/2.75?7.5625*k*k:k<2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k<2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375;
},bounceInOut:function(k){return k<.5?.5*easing.bounceIn(2*k):.5*easing.bounceOut(2*k-1)+.5;
}};module.exports=easing},function(module,exports){function clampCssByte(i){
return i=Math.round(i),i<0?0:i>255?255:i}function clampCssAngle(i){
return i=Math.round(i),i<0?0:i>360?360:i}function clampCssFloat(f){
return f<0?0:f>1?1:f}function parseCssInt(str){return clampCssByte(str.length&&"%"===str.charAt(str.length-1)?parseFloat(str)/100*255:parseInt(str,10));
}function parseCssFloat(str){return clampCssFloat(str.length&&"%"===str.charAt(str.length-1)?parseFloat(str)/100:parseFloat(str));
}function cssHueToRgb(m1,m2,h){return h<0?h+=1:h>1&&(h-=1),6*h<1?m1+(m2-m1)*h*6:2*h<1?m2:3*h<2?m1+(m2-m1)*(2/3-h)*6:m1;
}function lerp(a,b,p){return a+(b-a)*p}function parse(colorStr){
if(colorStr){colorStr+="";var str=colorStr.replace(/ /g,"").toLowerCase();
if(str in kCSSColorTable)return kCSSColorTable[str].slice();if("#"!==str.charAt(0)){
var op=str.indexOf("("),ep=str.indexOf(")");if(op!==-1&&ep+1===str.length){
var fname=str.substr(0,op),params=str.substr(op+1,ep-(op+1)).split(","),alpha=1;
switch(fname){case"rgba":if(4!==params.length)return;alpha=parseCssFloat(params.pop());
case"rgb":if(3!==params.length)return;return[parseCssInt(params[0]),parseCssInt(params[1]),parseCssInt(params[2]),alpha];
case"hsla":if(4!==params.length)return;return params[3]=parseCssFloat(params[3]),
hsla2rgba(params);case"hsl":if(3!==params.length)return;return hsla2rgba(params);
default:return}}}else{if(4===str.length){var iv=parseInt(str.substr(1),16);
if(!(iv>=0&&iv<=4095))return;return[(3840&iv)>>4|(3840&iv)>>8,240&iv|(240&iv)>>4,15&iv|(15&iv)<<4,1];
}if(7===str.length){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=16777215))return;
return[(16711680&iv)>>16,(65280&iv)>>8,255&iv,1]}}}}function hsla2rgba(hsla){
var h=(parseFloat(hsla[0])%360+360)%360/360,s=parseCssFloat(hsla[1]),l=parseCssFloat(hsla[2]),m2=l<=.5?l*(s+1):l+s-l*s,m1=2*l-m2,rgba=[clampCssByte(255*cssHueToRgb(m1,m2,h+1/3)),clampCssByte(255*cssHueToRgb(m1,m2,h)),clampCssByte(255*cssHueToRgb(m1,m2,h-1/3))];
return 4===hsla.length&&(rgba[3]=hsla[3]),rgba}function rgba2hsla(rgba){
if(rgba){var H,S,R=rgba[0]/255,G=rgba[1]/255,B=rgba[2]/255,vMin=Math.min(R,G,B),vMax=Math.max(R,G,B),delta=vMax-vMin,L=(vMax+vMin)/2;
if(0===delta)H=0,S=0;else{S=L<.5?delta/(vMax+vMin):delta/(2-vMax-vMin);
var deltaR=((vMax-R)/6+delta/2)/delta,deltaG=((vMax-G)/6+delta/2)/delta,deltaB=((vMax-B)/6+delta/2)/delta;
R===vMax?H=deltaB-deltaG:G===vMax?H=1/3+deltaR-deltaB:B===vMax&&(H=2/3+deltaG-deltaR),
H<0&&(H+=1),H>1&&(H-=1)}var hsla=[360*H,S,L];return null!=rgba[3]&&hsla.push(rgba[3]),
hsla}}function lift(color,level){var colorArr=parse(color);if(colorArr){
for(var i=0;i<3;i++)level<0?colorArr[i]=colorArr[i]*(1-level)|0:colorArr[i]=(255-colorArr[i])*level+colorArr[i]|0;
return stringify(colorArr,4===colorArr.length?"rgba":"rgb")}}
function toHex(color,level){var colorArr=parse(color);if(colorArr)return((1<<24)+(colorArr[0]<<16)+(colorArr[1]<<8)+ +colorArr[2]).toString(16).slice(1);
}function fastMapToColor(normalizedValue,colors,out){if(colors&&colors.length&&normalizedValue>=0&&normalizedValue<=1){
out=out||[0,0,0,0];var value=normalizedValue*(colors.length-1),leftIndex=Math.floor(value),rightIndex=Math.ceil(value),leftColor=colors[leftIndex],rightColor=colors[rightIndex],dv=value-leftIndex;
return out[0]=clampCssByte(lerp(leftColor[0],rightColor[0],dv)),
out[1]=clampCssByte(lerp(leftColor[1],rightColor[1],dv)),out[2]=clampCssByte(lerp(leftColor[2],rightColor[2],dv)),
out[3]=clampCssByte(lerp(leftColor[3],rightColor[3],dv)),out}
}function mapToColor(normalizedValue,colors,fullOutput){if(colors&&colors.length&&normalizedValue>=0&&normalizedValue<=1){
var value=normalizedValue*(colors.length-1),leftIndex=Math.floor(value),rightIndex=Math.ceil(value),leftColor=parse(colors[leftIndex]),rightColor=parse(colors[rightIndex]),dv=value-leftIndex,color=stringify([clampCssByte(lerp(leftColor[0],rightColor[0],dv)),clampCssByte(lerp(leftColor[1],rightColor[1],dv)),clampCssByte(lerp(leftColor[2],rightColor[2],dv)),clampCssFloat(lerp(leftColor[3],rightColor[3],dv))],"rgba");
return fullOutput?{color:color,leftIndex:leftIndex,rightIndex:rightIndex,
value:value}:color}}function modifyHSL(color,h,s,l){if(color=parse(color))return color=rgba2hsla(color),
null!=h&&(color[0]=clampCssAngle(h)),null!=s&&(color[1]=parseCssFloat(s)),
null!=l&&(color[2]=parseCssFloat(l)),stringify(hsla2rgba(color),"rgba");
}function modifyAlpha(color,alpha){if(color=parse(color),color&&null!=alpha)return color[3]=clampCssFloat(alpha),
stringify(color,"rgba")}function stringify(arrColor,type){var colorStr=arrColor[0]+","+arrColor[1]+","+arrColor[2];
return"rgba"!==type&&"hsva"!==type&&"hsla"!==type||(colorStr+=","+arrColor[3]),
type+"("+colorStr+")"}var kCSSColorTable={transparent:[0,0,0,0],
aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],
aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],
bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],
blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],
burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],
chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],
cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],
darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],
darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],
darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],
darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],
darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],
darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],
darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],
dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],
firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],
fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],
gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],
green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],
honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],
indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],
lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],
lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],
lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],
lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],
lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],
lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],
lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],
limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],
maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],
mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],
mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],
mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],
midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],
moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],
oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],
orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],
palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],
palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],
peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],
powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],
rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],
salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],
seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],
skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],
slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],
steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],
thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],
violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],
whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]
};module.exports={parse:parse,lift:lift,toHex:toHex,fastMapToColor:fastMapToColor,
mapToColor:mapToColor,modifyHSL:modifyHSL,modifyAlpha:modifyAlpha,
stringify:stringify}},function(module,exports,__webpack_require__){
var config=__webpack_require__(41);module.exports=function(){
if(0!==config.debugMode)if(1==config.debugMode)for(var k in arguments)throw new Error(arguments[k]);else if(config.debugMode>1)for(var k in arguments)console.log(arguments[k]);
}},function(module,exports){var dpr=1;"undefined"!=typeof window&&(dpr=Math.max(window.devicePixelRatio||1,1));
var config={debugMode:0,devicePixelRatio:dpr};module.exports=config;
},function(module,exports,__webpack_require__){function Chart(){
this.group=new Group,this.uid=componentUtil.getUID("viewChart");
}function elSetState(el,state){if(el&&(el.trigger(state),"group"===el.type))for(var i=0;i<el.childCount();i++)elSetState(el.childAt(i),state);
}function toggleHighlight(data,payload,state){var dataIndex=modelUtil.queryDataIndex(data,payload);
null!=dataIndex?zrUtil.each(modelUtil.normalizeToArray(dataIndex),function(dataIdx){
elSetState(data.getItemGraphicEl(dataIdx),state)}):data.eachItemGraphicEl(function(el){
elSetState(el,state)})}var Group=__webpack_require__(30),componentUtil=__webpack_require__(20),clazzUtil=__webpack_require__(13),modelUtil=__webpack_require__(5),zrUtil=__webpack_require__(4);
Chart.prototype={type:"chart",init:function(ecModel,api){},render:function(seriesModel,ecModel,api,payload){},
highlight:function(seriesModel,ecModel,api,payload){toggleHighlight(seriesModel.getData(),payload,"emphasis");
},downplay:function(seriesModel,ecModel,api,payload){toggleHighlight(seriesModel.getData(),payload,"normal");
},remove:function(ecModel,api){this.group.removeAll()},dispose:function(){}
};var chartProto=Chart.prototype;chartProto.updateView=chartProto.updateLayout=chartProto.updateVisual=function(seriesModel,ecModel,api,payload){
this.render(seriesModel,ecModel,api,payload)},clazzUtil.enableClassExtend(Chart,["dispose"]),
clazzUtil.enableClassManagement(Chart,{registerWhenExtend:!0}),
module.exports=Chart},function(module,exports,__webpack_require__){
"use strict";function hasFillOrStroke(fillOrStroke){return null!=fillOrStroke&&"none"!=fillOrStroke;
}function liftColor(color){return"string"==typeof color?colorTool.lift(color,-.1):color;
}function cacheElementStl(el){if(el.__hoverStlDirty){var stroke=el.style.stroke,fill=el.style.fill,hoverStyle=el.__hoverStl;
hoverStyle.fill=hoverStyle.fill||(hasFillOrStroke(fill)?liftColor(fill):null),
hoverStyle.stroke=hoverStyle.stroke||(hasFillOrStroke(stroke)?liftColor(stroke):null);
var normalStyle={};for(var name in hoverStyle)hoverStyle.hasOwnProperty(name)&&(normalStyle[name]=el.style[name]);
el.__normalStl=normalStyle,el.__hoverStlDirty=!1}}function doSingleEnterHover(el){
el.__isHover||(cacheElementStl(el),el.useHoverLayer?el.__zr&&el.__zr.addHover(el,el.__hoverStl):(el.setStyle(el.__hoverStl),
el.z2+=1),el.__isHover=!0)}function doSingleLeaveHover(el){if(el.__isHover){
var normalStl=el.__normalStl;el.useHoverLayer?el.__zr&&el.__zr.removeHover(el):(normalStl&&el.setStyle(normalStl),
el.z2-=1),el.__isHover=!1}}function doEnterHover(el){"group"===el.type?el.traverse(function(child){
"group"!==child.type&&doSingleEnterHover(child)}):doSingleEnterHover(el);
}function doLeaveHover(el){"group"===el.type?el.traverse(function(child){
"group"!==child.type&&doSingleLeaveHover(child)}):doSingleLeaveHover(el);
}function setElementHoverStl(el,hoverStl){el.__hoverStl=el.hoverStyle||hoverStl||{},
el.__hoverStlDirty=!0,el.__isHover&&cacheElementStl(el)}function onElementMouseOver(e){
this.__hoverSilentOnTouch&&e.zrByTouch||!this.__isEmphasis&&doEnterHover(this);
}function onElementMouseOut(e){this.__hoverSilentOnTouch&&e.zrByTouch||!this.__isEmphasis&&doLeaveHover(this);
}function enterEmphasis(){this.__isEmphasis=!0,doEnterHover(this);
}function leaveEmphasis(){this.__isEmphasis=!1,doLeaveHover(this);
}function animateOrSetProps(isUpdate,el,props,animatableModel,dataIndex,cb){
"function"==typeof dataIndex&&(cb=dataIndex,dataIndex=null);var animationEnabled=animatableModel&&animatableModel.isAnimationEnabled();
if(animationEnabled){var postfix=isUpdate?"Update":"",duration=animatableModel.getShallow("animationDuration"+postfix),animationEasing=animatableModel.getShallow("animationEasing"+postfix),animationDelay=animatableModel.getShallow("animationDelay"+postfix);
"function"==typeof animationDelay&&(animationDelay=animationDelay(dataIndex,animatableModel.getAnimationDelayParams?animatableModel.getAnimationDelayParams(el,dataIndex):null)),
"function"==typeof duration&&(duration=duration(dataIndex)),duration>0?el.animateTo(props,duration,animationDelay||0,animationEasing,cb):(el.attr(props),
cb&&cb())}else el.attr(props),cb&&cb()}var zrUtil=__webpack_require__(4),pathTool=__webpack_require__(44),round=Math.round,Path=__webpack_require__(45),colorTool=__webpack_require__(39),matrix=__webpack_require__(11),vector=__webpack_require__(10),graphic={};
graphic.Group=__webpack_require__(30),graphic.Image=__webpack_require__(61),
graphic.Text=__webpack_require__(63),graphic.Circle=__webpack_require__(64),
graphic.Sector=__webpack_require__(65),graphic.Ring=__webpack_require__(66),
graphic.Polygon=__webpack_require__(67),graphic.Polyline=__webpack_require__(71),
graphic.Rect=__webpack_require__(72),graphic.Line=__webpack_require__(74),
graphic.BezierCurve=__webpack_require__(75),graphic.Arc=__webpack_require__(76),
graphic.CompoundPath=__webpack_require__(77),graphic.LinearGradient=__webpack_require__(78),
graphic.RadialGradient=__webpack_require__(80),graphic.BoundingRect=__webpack_require__(9),
graphic.extendShape=function(opts){return Path.extend(opts)},
graphic.extendPath=function(pathData,opts){return pathTool.extendFromString(pathData,opts);
},graphic.makePath=function(pathData,opts,rect,layout){var path=pathTool.createFromString(pathData,opts),boundingRect=path.getBoundingRect();
if(rect){var aspect=boundingRect.width/boundingRect.height;if("center"===layout){
var height,width=rect.height*aspect;width<=rect.width?height=rect.height:(width=rect.width,
height=width/aspect);var cx=rect.x+rect.width/2,cy=rect.y+rect.height/2;
rect.x=cx-width/2,rect.y=cy-height/2,rect.width=width,rect.height=height;
}graphic.resizePath(path,rect)}return path},graphic.mergePath=pathTool.mergePath,
graphic.resizePath=function(path,rect){if(path.applyTransform){
var pathRect=path.getBoundingRect(),m=pathRect.calculateTransform(rect);
path.applyTransform(m)}},graphic.subPixelOptimizeLine=function(param){
var subPixelOptimize=graphic.subPixelOptimize,shape=param.shape,lineWidth=param.style.lineWidth;
return round(2*shape.x1)===round(2*shape.x2)&&(shape.x1=shape.x2=subPixelOptimize(shape.x1,lineWidth,!0)),
round(2*shape.y1)===round(2*shape.y2)&&(shape.y1=shape.y2=subPixelOptimize(shape.y1,lineWidth,!0)),
param},graphic.subPixelOptimizeRect=function(param){var subPixelOptimize=graphic.subPixelOptimize,shape=param.shape,lineWidth=param.style.lineWidth,originX=shape.x,originY=shape.y,originWidth=shape.width,originHeight=shape.height;
return shape.x=subPixelOptimize(shape.x,lineWidth,!0),shape.y=subPixelOptimize(shape.y,lineWidth,!0),
shape.width=Math.max(subPixelOptimize(originX+originWidth,lineWidth,!1)-shape.x,0===originWidth?0:1),
shape.height=Math.max(subPixelOptimize(originY+originHeight,lineWidth,!1)-shape.y,0===originHeight?0:1),
param},graphic.subPixelOptimize=function(position,lineWidth,positiveOrNegative){
var doubledPosition=round(2*position);return(doubledPosition+round(lineWidth))%2===0?doubledPosition/2:(doubledPosition+(positiveOrNegative?1:-1))/2;
},graphic.setHoverStyle=function(el,hoverStyle,opt){el.__hoverSilentOnTouch=opt&&opt.hoverSilentOnTouch,
"group"===el.type?el.traverse(function(child){"group"!==child.type&&setElementHoverStl(child,hoverStyle);
}):setElementHoverStl(el,hoverStyle),el.on("mouseover",onElementMouseOver).on("mouseout",onElementMouseOut),
el.on("emphasis",enterEmphasis).on("normal",leaveEmphasis)},graphic.setText=function(textStyle,labelModel,color){
var labelPosition=labelModel.getShallow("position")||"inside",labelOffset=labelModel.getShallow("offset"),labelColor=labelPosition.indexOf("inside")>=0?"white":color,textStyleModel=labelModel.getModel("textStyle");
zrUtil.extend(textStyle,{textDistance:labelModel.getShallow("distance")||5,
textFont:textStyleModel.getFont(),textPosition:labelPosition,
textOffset:labelOffset,textFill:textStyleModel.getTextColor()||labelColor
})},graphic.updateProps=function(el,props,animatableModel,dataIndex,cb){
animateOrSetProps(!0,el,props,animatableModel,dataIndex,cb)},
graphic.initProps=function(el,props,animatableModel,dataIndex,cb){
animateOrSetProps(!1,el,props,animatableModel,dataIndex,cb)},
graphic.getTransform=function(target,ancestor){for(var mat=matrix.identity([]);target&&target!==ancestor;)matrix.mul(mat,target.getLocalTransform(),mat),
target=target.parent;return mat},graphic.applyTransform=function(vertex,transform,invert){
return invert&&(transform=matrix.invert([],transform)),vector.applyTransform([],vertex,transform);
},graphic.transformDirection=function(direction,transform,invert){
var hBase=0===transform[4]||0===transform[5]||0===transform[0]?1:Math.abs(2*transform[4]/transform[0]),vBase=0===transform[4]||0===transform[5]||0===transform[2]?1:Math.abs(2*transform[4]/transform[2]),vertex=["left"===direction?-hBase:"right"===direction?hBase:0,"top"===direction?-vBase:"bottom"===direction?vBase:0];
return vertex=graphic.applyTransform(vertex,transform,invert),
Math.abs(vertex[0])>Math.abs(vertex[1])?vertex[0]>0?"right":"left":vertex[1]>0?"bottom":"top";
},graphic.groupTransition=function(g1,g2,animatableModel,cb){
function getElMap(g){var elMap={};return g.traverse(function(el){
!el.isGroup&&el.anid&&(elMap[el.anid]=el)}),elMap}function getAnimatableProps(el){
var obj={position:vector.clone(el.position),rotation:el.rotation
};return el.shape&&(obj.shape=zrUtil.extend({},el.shape)),obj;
}if(g1&&g2){var elMap1=getElMap(g1);g2.traverse(function(el){
if(!el.isGroup&&el.anid){var oldEl=elMap1[el.anid];if(oldEl){
var newProp=getAnimatableProps(el);el.attr(getAnimatableProps(oldEl)),
graphic.updateProps(el,newProp,animatableModel,el.dataIndex)}
}})}},module.exports=graphic},function(module,exports,__webpack_require__){
function processArc(x1,y1,x2,y2,fa,fs,rx,ry,psiDeg,cmd,path){
var psi=psiDeg*(PI/180),xp=mathCos(psi)*(x1-x2)/2+mathSin(psi)*(y1-y2)/2,yp=-1*mathSin(psi)*(x1-x2)/2+mathCos(psi)*(y1-y2)/2,lambda=xp*xp/(rx*rx)+yp*yp/(ry*ry);
lambda>1&&(rx*=mathSqrt(lambda),ry*=mathSqrt(lambda));var f=(fa===fs?-1:1)*mathSqrt((rx*rx*(ry*ry)-rx*rx*(yp*yp)-ry*ry*(xp*xp))/(rx*rx*(yp*yp)+ry*ry*(xp*xp)))||0,cxp=f*rx*yp/ry,cyp=f*-ry*xp/rx,cx=(x1+x2)/2+mathCos(psi)*cxp-mathSin(psi)*cyp,cy=(y1+y2)/2+mathSin(psi)*cxp+mathCos(psi)*cyp,theta=vAngle([1,0],[(xp-cxp)/rx,(yp-cyp)/ry]),u=[(xp-cxp)/rx,(yp-cyp)/ry],v=[(-1*xp-cxp)/rx,(-1*yp-cyp)/ry],dTheta=vAngle(u,v);
vRatio(u,v)<=-1&&(dTheta=PI),vRatio(u,v)>=1&&(dTheta=0),0===fs&&dTheta>0&&(dTheta-=2*PI),
1===fs&&dTheta<0&&(dTheta+=2*PI),path.addData(cmd,cx,cy,rx,ry,theta,dTheta,psi,fs);
}function createPathProxyFromString(data){if(!data)return[];var n,cs=data.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");
for(n=0;n<cc.length;n++)cs=cs.replace(new RegExp(cc[n],"g"),"|"+cc[n]);
var prevCmd,arr=cs.split("|"),cpx=0,cpy=0,path=new PathProxy,CMD=PathProxy.CMD;
for(n=1;n<arr.length;n++){var cmd,str=arr[n],c=str.charAt(0),off=0,p=str.slice(1).replace(/e,-/g,"e-").split(",");
p.length>0&&""===p[0]&&p.shift();for(var i=0;i<p.length;i++)p[i]=parseFloat(p[i]);
for(;off<p.length&&!isNaN(p[off])&&!isNaN(p[0]);){var ctlPtx,ctlPty,rx,ry,psi,fa,fs,x1=cpx,y1=cpy;
switch(c){case"l":cpx+=p[off++],cpy+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);
break;case"L":cpx=p[off++],cpy=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);
break;case"m":cpx+=p[off++],cpy+=p[off++],cmd=CMD.M,path.addData(cmd,cpx,cpy),
c="l";break;case"M":cpx=p[off++],cpy=p[off++],cmd=CMD.M,path.addData(cmd,cpx,cpy),
c="L";break;case"h":cpx+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);
break;case"H":cpx=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);
break;case"v":cpy+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);
break;case"V":cpy=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);
break;case"C":cmd=CMD.C,path.addData(cmd,p[off++],p[off++],p[off++],p[off++],p[off++],p[off++]),
cpx=p[off-2],cpy=p[off-1];break;case"c":cmd=CMD.C,path.addData(cmd,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy),
cpx+=p[off-2],cpy+=p[off-1];break;case"S":ctlPtx=cpx,ctlPty=cpy;
var len=path.len(),pathData=path.data;prevCmd===CMD.C&&(ctlPtx+=cpx-pathData[len-4],
ctlPty+=cpy-pathData[len-3]),cmd=CMD.C,x1=p[off++],y1=p[off++],
cpx=p[off++],cpy=p[off++],path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);
break;case"s":ctlPtx=cpx,ctlPty=cpy;var len=path.len(),pathData=path.data;
prevCmd===CMD.C&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),
cmd=CMD.C,x1=cpx+p[off++],y1=cpy+p[off++],cpx+=p[off++],cpy+=p[off++],
path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"Q":x1=p[off++],
y1=p[off++],cpx=p[off++],cpy=p[off++],cmd=CMD.Q,path.addData(cmd,x1,y1,cpx,cpy);
break;case"q":x1=p[off++]+cpx,y1=p[off++]+cpy,cpx+=p[off++],cpy+=p[off++],
cmd=CMD.Q,path.addData(cmd,x1,y1,cpx,cpy);break;case"T":ctlPtx=cpx,
ctlPty=cpy;var len=path.len(),pathData=path.data;prevCmd===CMD.Q&&(ctlPtx+=cpx-pathData[len-4],
ctlPty+=cpy-pathData[len-3]),cpx=p[off++],cpy=p[off++],cmd=CMD.Q,
path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"t":ctlPtx=cpx,
ctlPty=cpy;var len=path.len(),pathData=path.data;prevCmd===CMD.Q&&(ctlPtx+=cpx-pathData[len-4],
ctlPty+=cpy-pathData[len-3]),cpx+=p[off++],cpy+=p[off++],cmd=CMD.Q,
path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"A":rx=p[off++],
ry=p[off++],psi=p[off++],fa=p[off++],fs=p[off++],x1=cpx,y1=cpy,
cpx=p[off++],cpy=p[off++],cmd=CMD.A,processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path);
break;case"a":rx=p[off++],ry=p[off++],psi=p[off++],fa=p[off++],
fs=p[off++],x1=cpx,y1=cpy,cpx+=p[off++],cpy+=p[off++],cmd=CMD.A,
processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path)}}"z"!==c&&"Z"!==c||(cmd=CMD.Z,
path.addData(cmd)),prevCmd=cmd}return path.toStatic(),path}function createPathOptions(str,opts){
var transform,pathProxy=createPathProxyFromString(str);return opts=opts||{},
opts.buildPath=function(path){path.setData(pathProxy.data),transform&&transformPath(path,transform);
var ctx=path.getContext();ctx&&path.rebuildPath(ctx)},opts.applyTransform=function(m){
transform||(transform=matrix.create()),matrix.mul(transform,m,transform),
this.dirty(!0)},opts}var Path=__webpack_require__(45),PathProxy=__webpack_require__(49),transformPath=__webpack_require__(60),matrix=__webpack_require__(11),cc=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],mathSqrt=Math.sqrt,mathSin=Math.sin,mathCos=Math.cos,PI=Math.PI,vMag=function(v){
return Math.sqrt(v[0]*v[0]+v[1]*v[1])},vRatio=function(u,v){return(u[0]*v[0]+u[1]*v[1])/(vMag(u)*vMag(v));
},vAngle=function(u,v){return(u[0]*v[1]<u[1]*v[0]?-1:1)*Math.acos(vRatio(u,v));
};module.exports={createFromString:function(str,opts){return new Path(createPathOptions(str,opts));
},extendFromString:function(str,opts){return Path.extend(createPathOptions(str,opts));
},mergePath:function(pathEls,opts){for(var pathList=[],len=pathEls.length,i=0;i<len;i++){
var pathEl=pathEls[i];pathEl.__dirty&&pathEl.buildPath(pathEl.path,pathEl.shape,!0),
pathList.push(pathEl.path)}var pathBundle=new Path(opts);return pathBundle.buildPath=function(path){
path.appendPath(pathList);var ctx=path.getContext();ctx&&path.rebuildPath(ctx);
},pathBundle}}},function(module,exports,__webpack_require__){
function Path(opts){Displayable.call(this,opts),this.path=new PathProxy;
}var Displayable=__webpack_require__(46),zrUtil=__webpack_require__(4),PathProxy=__webpack_require__(49),pathContain=__webpack_require__(52),Pattern=__webpack_require__(59),getCanvasPattern=Pattern.prototype.getCanvasPattern,abs=Math.abs;
Path.prototype={constructor:Path,type:"path",__dirtyPath:!0,strokeContainThreshold:5,
brush:function(ctx,prevEl){var style=this.style,path=this.path,hasStroke=style.hasStroke(),hasFill=style.hasFill(),fill=style.fill,stroke=style.stroke,hasFillGradient=hasFill&&!!fill.colorStops,hasStrokeGradient=hasStroke&&!!stroke.colorStops,hasFillPattern=hasFill&&!!fill.image,hasStrokePattern=hasStroke&&!!stroke.image;
if(style.bind(ctx,this,prevEl),this.setTransform(ctx),this.__dirty){
var rect=this.getBoundingRect();hasFillGradient&&(this._fillGradient=style.getGradient(ctx,fill,rect)),
hasStrokeGradient&&(this._strokeGradient=style.getGradient(ctx,stroke,rect));
}hasFillGradient?ctx.fillStyle=this._fillGradient:hasFillPattern&&(ctx.fillStyle=getCanvasPattern.call(fill,ctx)),
hasStrokeGradient?ctx.strokeStyle=this._strokeGradient:hasStrokePattern&&(ctx.strokeStyle=getCanvasPattern.call(stroke,ctx));
var lineDash=style.lineDash,lineDashOffset=style.lineDashOffset,ctxLineDash=!!ctx.setLineDash,scale=this.getGlobalScale();
path.setScale(scale[0],scale[1]),this.__dirtyPath||lineDash&&!ctxLineDash&&hasStroke?(path=this.path.beginPath(ctx),
lineDash&&!ctxLineDash&&(path.setLineDash(lineDash),path.setLineDashOffset(lineDashOffset)),
this.buildPath(path,this.shape,!1),this.__dirtyPath=!1):(ctx.beginPath(),
this.path.rebuildPath(ctx)),hasFill&&path.fill(ctx),lineDash&&ctxLineDash&&(ctx.setLineDash(lineDash),
ctx.lineDashOffset=lineDashOffset),hasStroke&&path.stroke(ctx),
lineDash&&ctxLineDash&&ctx.setLineDash([]),this.restoreTransform(ctx),
null!=style.text&&this.drawRectText(ctx,this.getBoundingRect());
},buildPath:function(ctx,shapeCfg,inBundle){},getBoundingRect:function(){
var rect=this._rect,style=this.style,needsUpdateRect=!rect;if(needsUpdateRect){
var path=this.path;this.__dirtyPath&&(path.beginPath(),this.buildPath(path,this.shape,!1)),
rect=path.getBoundingRect()}if(this._rect=rect,style.hasStroke()){
var rectWithStroke=this._rectWithStroke||(this._rectWithStroke=rect.clone());
if(this.__dirty||needsUpdateRect){rectWithStroke.copy(rect);var w=style.lineWidth,lineScale=style.strokeNoScale?this.getLineScale():1;
style.hasFill()||(w=Math.max(w,this.strokeContainThreshold||4)),
lineScale>1e-10&&(rectWithStroke.width+=w/lineScale,rectWithStroke.height+=w/lineScale,
rectWithStroke.x-=w/lineScale/2,rectWithStroke.y-=w/lineScale/2);
}return rectWithStroke}return rect},contain:function(x,y){var localPos=this.transformCoordToLocal(x,y),rect=this.getBoundingRect(),style=this.style;
if(x=localPos[0],y=localPos[1],rect.contain(x,y)){var pathData=this.path.data;
if(style.hasStroke()){var lineWidth=style.lineWidth,lineScale=style.strokeNoScale?this.getLineScale():1;
if(lineScale>1e-10&&(style.hasFill()||(lineWidth=Math.max(lineWidth,this.strokeContainThreshold)),
pathContain.containStroke(pathData,lineWidth/lineScale,x,y)))return!0;
}if(style.hasFill())return pathContain.contain(pathData,x,y)}
return!1},dirty:function(dirtyPath){null==dirtyPath&&(dirtyPath=!0),
dirtyPath&&(this.__dirtyPath=dirtyPath,this._rect=null),this.__dirty=!0,
this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty();
},animateShape:function(loop){return this.animate("shape",loop);
},attrKV:function(key,value){"shape"===key?(this.setShape(value),
this.__dirtyPath=!0,this._rect=null):Displayable.prototype.attrKV.call(this,key,value);
},setShape:function(key,value){var shape=this.shape;if(shape){
if(zrUtil.isObject(key))for(var name in key)key.hasOwnProperty(name)&&(shape[name]=key[name]);else shape[key]=value;
this.dirty(!0)}return this},getLineScale:function(){var m=this.transform;
return m&&abs(m[0]-1)>1e-10&&abs(m[3]-1)>1e-10?Math.sqrt(abs(m[0]*m[3]-m[2]*m[1])):1;
}},Path.extend=function(defaults){var Sub=function(opts){Path.call(this,opts),
defaults.style&&this.style.extendFrom(defaults.style,!1);var defaultShape=defaults.shape;
if(defaultShape){this.shape=this.shape||{};var thisShape=this.shape;
for(var name in defaultShape)!thisShape.hasOwnProperty(name)&&defaultShape.hasOwnProperty(name)&&(thisShape[name]=defaultShape[name]);
}defaults.init&&defaults.init.call(this,opts)};zrUtil.inherits(Sub,Path);
for(var name in defaults)"style"!==name&&"shape"!==name&&(Sub.prototype[name]=defaults[name]);
return Sub},zrUtil.inherits(Path,Displayable),module.exports=Path;
},function(module,exports,__webpack_require__){function Displayable(opts){
opts=opts||{},Element.call(this,opts);for(var name in opts)opts.hasOwnProperty(name)&&"style"!==name&&(this[name]=opts[name]);
this.style=new Style(opts.style),this._rect=null,this.__clipPaths=[];
}var zrUtil=__webpack_require__(4),Style=__webpack_require__(47),Element=__webpack_require__(31),RectText=__webpack_require__(48);
Displayable.prototype={constructor:Displayable,type:"displayable",
__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,
silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,
beforeBrush:function(ctx){},afterBrush:function(ctx){},brush:function(ctx,prevEl){},
getBoundingRect:function(){},contain:function(x,y){return this.rectContain(x,y);
},traverse:function(cb,context){cb.call(context,this)},rectContain:function(x,y){
var coord=this.transformCoordToLocal(x,y),rect=this.getBoundingRect();
return rect.contain(coord[0],coord[1])},dirty:function(){this.__dirty=!0,
this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(loop){
return this.animate("style",loop)},attrKV:function(key,value){
"style"!==key?Element.prototype.attrKV.call(this,key,value):this.style.set(value);
},setStyle:function(key,value){return this.style.set(key,value),
this.dirty(!1),this},useStyle:function(obj){return this.style=new Style(obj),
this.dirty(!1),this}},zrUtil.inherits(Displayable,Element),zrUtil.mixin(Displayable,RectText),
module.exports=Displayable},function(module,exports){function createLinearGradient(ctx,obj,rect){
var x=obj.x,x2=obj.x2,y=obj.y,y2=obj.y2;obj.global||(x=x*rect.width+rect.x,
x2=x2*rect.width+rect.x,y=y*rect.height+rect.y,y2=y2*rect.height+rect.y);
var canvasGradient=ctx.createLinearGradient(x,y,x2,y2);return canvasGradient;
}function createRadialGradient(ctx,obj,rect){var width=rect.width,height=rect.height,min=Math.min(width,height),x=obj.x,y=obj.y,r=obj.r;
obj.global||(x=x*width+rect.x,y=y*height+rect.y,r*=min);var canvasGradient=ctx.createRadialGradient(x,y,0,x,y,r);
return canvasGradient}var STYLE_COMMON_PROPS=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Style=function(opts){
this.extendFrom(opts)};Style.prototype={constructor:Style,fill:"#000000",
stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,
shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,
text:null,textFill:"#000",textStroke:null,textPosition:"inside",
textOffset:null,textBaseline:null,textAlign:null,textVerticalAlign:null,
textDistance:5,textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,
textTransform:!1,textRotation:0,blend:null,bind:function(ctx,el,prevEl){
for(var style=this,prevStyle=prevEl&&prevEl.style,firstDraw=!prevStyle,i=0;i<STYLE_COMMON_PROPS.length;i++){
var prop=STYLE_COMMON_PROPS[i],styleName=prop[0];(firstDraw||style[styleName]!==prevStyle[styleName])&&(ctx[styleName]=style[styleName]||prop[1]);
}if((firstDraw||style.fill!==prevStyle.fill)&&(ctx.fillStyle=style.fill),
(firstDraw||style.stroke!==prevStyle.stroke)&&(ctx.strokeStyle=style.stroke),
(firstDraw||style.opacity!==prevStyle.opacity)&&(ctx.globalAlpha=null==style.opacity?1:style.opacity),
(firstDraw||style.blend!==prevStyle.blend)&&(ctx.globalCompositeOperation=style.blend||"source-over"),
this.hasStroke()){var lineWidth=style.lineWidth;ctx.lineWidth=lineWidth/(this.strokeNoScale&&el&&el.getLineScale?el.getLineScale():1);
}},hasFill:function(){var fill=this.fill;return null!=fill&&"none"!==fill;
},hasStroke:function(){var stroke=this.stroke;return null!=stroke&&"none"!==stroke&&this.lineWidth>0;
},extendFrom:function(otherStyle,overwrite){if(otherStyle){var target=this;
for(var name in otherStyle)!otherStyle.hasOwnProperty(name)||!overwrite&&target.hasOwnProperty(name)||(target[name]=otherStyle[name]);
}},set:function(obj,value){"string"==typeof obj?this[obj]=value:this.extendFrom(obj,!0);
},clone:function(){var newStyle=new this.constructor;return newStyle.extendFrom(this,!0),
newStyle},getGradient:function(ctx,obj,rect){for(var method="radial"===obj.type?createRadialGradient:createLinearGradient,canvasGradient=method(ctx,obj,rect),colorStops=obj.colorStops,i=0;i<colorStops.length;i++)canvasGradient.addColorStop(colorStops[i].offset,colorStops[i].color);
return canvasGradient}};for(var styleProto=Style.prototype,i=0;i<STYLE_COMMON_PROPS.length;i++){
var prop=STYLE_COMMON_PROPS[i];prop[0]in styleProto||(styleProto[prop[0]]=prop[1]);
}Style.getGradient=styleProto.getGradient,module.exports=Style;
},function(module,exports,__webpack_require__){function parsePercent(value,maxValue){
return"string"==typeof value?value.lastIndexOf("%")>=0?parseFloat(value)/100*maxValue:parseFloat(value):value;
}var textContain=__webpack_require__(8),BoundingRect=__webpack_require__(9),tmpRect=new BoundingRect,RectText=function(){};
RectText.prototype={constructor:RectText,drawRectText:function(ctx,rect,textRect){
var style=this.style,text=style.text;if(null!=text&&(text+=""),
text){ctx.save();var x,y,textPosition=style.textPosition,textOffset=style.textOffset,distance=style.textDistance,align=style.textAlign,font=style.textFont||style.font,baseline=style.textBaseline,verticalAlign=style.textVerticalAlign;
textRect=textRect||textContain.getBoundingRect(text,font,align,baseline);
var transform=this.transform;if(style.textTransform?this.setTransform(ctx):transform&&(tmpRect.copy(rect),
tmpRect.applyTransform(transform),rect=tmpRect),textPosition instanceof Array){
if(x=rect.x+parsePercent(textPosition[0],rect.width),y=rect.y+parsePercent(textPosition[1],rect.height),
align=align||"left",baseline=baseline||"top",verticalAlign){switch(verticalAlign){
case"middle":y-=textRect.height/2-textRect.lineHeight/2;break;
case"bottom":y-=textRect.height-textRect.lineHeight/2;break;default:
y+=textRect.lineHeight/2}baseline="middle"}}else{var res=textContain.adjustTextPositionOnRect(textPosition,rect,textRect,distance);
x=res.x,y=res.y,align=align||res.textAlign,baseline=baseline||res.textBaseline;
}textOffset&&(x+=textOffset[0],y+=textOffset[1]),ctx.textAlign=align||"left",
ctx.textBaseline=baseline||"alphabetic";var textFill=style.textFill,textStroke=style.textStroke;
textFill&&(ctx.fillStyle=textFill),textStroke&&(ctx.strokeStyle=textStroke),
ctx.font=font||"12px sans-serif",ctx.shadowBlur=style.textShadowBlur,
ctx.shadowColor=style.textShadowColor||"transparent",ctx.shadowOffsetX=style.textShadowOffsetX,
ctx.shadowOffsetY=style.textShadowOffsetY;var textLines=text.split("\n");
style.textRotation&&(transform&&ctx.translate(transform[4],transform[5]),
ctx.rotate(style.textRotation),transform&&ctx.translate(-transform[4],-transform[5]));
for(var i=0;i<textLines.length;i++)textFill&&ctx.fillText(textLines[i],x,y),
textStroke&&ctx.strokeText(textLines[i],x,y),y+=textRect.lineHeight;
ctx.restore()}}},module.exports=RectText},function(module,exports,__webpack_require__){
"use strict";var curve=__webpack_require__(50),vec2=__webpack_require__(10),bbox=__webpack_require__(51),BoundingRect=__webpack_require__(9),dpr=__webpack_require__(41).devicePixelRatio,CMD={
M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},min=[],max=[],min2=[],max2=[],mathMin=Math.min,mathMax=Math.max,mathCos=Math.cos,mathSin=Math.sin,mathSqrt=Math.sqrt,mathAbs=Math.abs,hasTypedArray="undefined"!=typeof Float32Array,PathProxy=function(){
this.data=[],this._len=0,this._ctx=null,this._xi=0,this._yi=0,
this._x0=0,this._y0=0,this._ux=0,this._uy=0};PathProxy.prototype={
constructor:PathProxy,_lineDash:null,_dashOffset:0,_dashIdx:0,
_dashSum:0,setScale:function(sx,sy){this._ux=mathAbs(1/dpr/sx)||0,
this._uy=mathAbs(1/dpr/sy)||0},getContext:function(){return this._ctx;
},beginPath:function(ctx){return this._ctx=ctx,ctx&&ctx.beginPath(),
ctx&&(this.dpr=ctx.dpr),this._len=0,this._lineDash&&(this._lineDash=null,
this._dashOffset=0),this},moveTo:function(x,y){return this.addData(CMD.M,x,y),
this._ctx&&this._ctx.moveTo(x,y),this._x0=x,this._y0=y,this._xi=x,
this._yi=y,this},lineTo:function(x,y){var exceedUnit=mathAbs(x-this._xi)>this._ux||mathAbs(y-this._yi)>this._uy||this._len<5;
return this.addData(CMD.L,x,y),this._ctx&&exceedUnit&&(this._needsDash()?this._dashedLineTo(x,y):this._ctx.lineTo(x,y)),
exceedUnit&&(this._xi=x,this._yi=y),this},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){
return this.addData(CMD.C,x1,y1,x2,y2,x3,y3),this._ctx&&(this._needsDash()?this._dashedBezierTo(x1,y1,x2,y2,x3,y3):this._ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3)),
this._xi=x3,this._yi=y3,this},quadraticCurveTo:function(x1,y1,x2,y2){
return this.addData(CMD.Q,x1,y1,x2,y2),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(x1,y1,x2,y2):this._ctx.quadraticCurveTo(x1,y1,x2,y2)),
this._xi=x2,this._yi=y2,this},arc:function(cx,cy,r,startAngle,endAngle,anticlockwise){
return this.addData(CMD.A,cx,cy,r,r,startAngle,endAngle-startAngle,0,anticlockwise?0:1),
this._ctx&&this._ctx.arc(cx,cy,r,startAngle,endAngle,anticlockwise),
this._xi=mathCos(endAngle)*r+cx,this._yi=mathSin(endAngle)*r+cx,
this},arcTo:function(x1,y1,x2,y2,radius){return this._ctx&&this._ctx.arcTo(x1,y1,x2,y2,radius),
this},rect:function(x,y,w,h){return this._ctx&&this._ctx.rect(x,y,w,h),
this.addData(CMD.R,x,y,w,h),this},closePath:function(){this.addData(CMD.Z);
var ctx=this._ctx,x0=this._x0,y0=this._y0;return ctx&&(this._needsDash()&&this._dashedLineTo(x0,y0),
ctx.closePath()),this._xi=x0,this._yi=y0,this},fill:function(ctx){
ctx&&ctx.fill(),this.toStatic()},stroke:function(ctx){ctx&&ctx.stroke(),
this.toStatic()},setLineDash:function(lineDash){if(lineDash instanceof Array){
this._lineDash=lineDash,this._dashIdx=0;for(var lineDashSum=0,i=0;i<lineDash.length;i++)lineDashSum+=lineDash[i];
this._dashSum=lineDashSum}return this},setLineDashOffset:function(offset){
return this._dashOffset=offset,this},len:function(){return this._len;
},setData:function(data){var len=data.length;this.data&&this.data.length==len||!hasTypedArray||(this.data=new Float32Array(len));
for(var i=0;i<len;i++)this.data[i]=data[i];this._len=len},appendPath:function(path){
path instanceof Array||(path=[path]);for(var len=path.length,appendSize=0,offset=this._len,i=0;i<len;i++)appendSize+=path[i].len();
hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(offset+appendSize));
for(var i=0;i<len;i++)for(var appendPathData=path[i].data,k=0;k<appendPathData.length;k++)this.data[offset++]=appendPathData[k];
this._len=offset},addData:function(cmd){var data=this.data;this._len+arguments.length>data.length&&(this._expandData(),
data=this.data);for(var i=0;i<arguments.length;i++)data[this._len++]=arguments[i];
this._prevCmd=cmd},_expandData:function(){if(!(this.data instanceof Array)){
for(var newData=[],i=0;i<this._len;i++)newData[i]=this.data[i];
this.data=newData}},_needsDash:function(){return this._lineDash;
},_dashedLineTo:function(x1,y1){var dash,idx,dashSum=this._dashSum,offset=this._dashOffset,lineDash=this._lineDash,ctx=this._ctx,x0=this._xi,y0=this._yi,dx=x1-x0,dy=y1-y0,dist=mathSqrt(dx*dx+dy*dy),x=x0,y=y0,nDash=lineDash.length;
for(dx/=dist,dy/=dist,offset<0&&(offset=dashSum+offset),offset%=dashSum,
x-=offset*dx,y-=offset*dy;dx>0&&x<=x1||dx<0&&x>=x1||0==dx&&(dy>0&&y<=y1||dy<0&&y>=y1);)idx=this._dashIdx,
dash=lineDash[idx],x+=dx*dash,y+=dy*dash,this._dashIdx=(idx+1)%nDash,
dx>0&&x<x0||dx<0&&x>x0||dy>0&&y<y0||dy<0&&y>y0||ctx[idx%2?"moveTo":"lineTo"](dx>=0?mathMin(x,x1):mathMax(x,x1),dy>=0?mathMin(y,y1):mathMax(y,y1));
dx=x-x1,dy=y-y1,this._dashOffset=-mathSqrt(dx*dx+dy*dy)},_dashedBezierTo:function(x1,y1,x2,y2,x3,y3){
var t,dx,dy,x,y,dashSum=this._dashSum,offset=this._dashOffset,lineDash=this._lineDash,ctx=this._ctx,x0=this._xi,y0=this._yi,cubicAt=curve.cubicAt,bezierLen=0,idx=this._dashIdx,nDash=lineDash.length,tmpLen=0;
for(offset<0&&(offset=dashSum+offset),offset%=dashSum,t=0;t<1;t+=.1)dx=cubicAt(x0,x1,x2,x3,t+.1)-cubicAt(x0,x1,x2,x3,t),
dy=cubicAt(y0,y1,y2,y3,t+.1)-cubicAt(y0,y1,y2,y3,t),bezierLen+=mathSqrt(dx*dx+dy*dy);
for(;idx<nDash&&(tmpLen+=lineDash[idx],!(tmpLen>offset));idx++);
for(t=(tmpLen-offset)/bezierLen;t<=1;)x=cubicAt(x0,x1,x2,x3,t),
y=cubicAt(y0,y1,y2,y3,t),idx%2?ctx.moveTo(x,y):ctx.lineTo(x,y),
t+=lineDash[idx]/bezierLen,idx=(idx+1)%nDash;idx%2!==0&&ctx.lineTo(x3,y3),
dx=x3-x,dy=y3-y,this._dashOffset=-mathSqrt(dx*dx+dy*dy)},_dashedQuadraticTo:function(x1,y1,x2,y2){
var x3=x2,y3=y2;x2=(x2+2*x1)/3,y2=(y2+2*y1)/3,x1=(this._xi+2*x1)/3,
y1=(this._yi+2*y1)/3,this._dashedBezierTo(x1,y1,x2,y2,x3,y3)},
toStatic:function(){var data=this.data;data instanceof Array&&(data.length=this._len,
hasTypedArray&&(this.data=new Float32Array(data)))},getBoundingRect:function(){
min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;
for(var data=this.data,xi=0,yi=0,x0=0,y0=0,i=0;i<data.length;){
var cmd=data[i++];switch(1==i&&(xi=data[i],yi=data[i+1],x0=xi,
y0=yi),cmd){case CMD.M:x0=data[i++],y0=data[i++],xi=x0,yi=y0,
min2[0]=x0,min2[1]=y0,max2[0]=x0,max2[1]=y0;break;case CMD.L:
bbox.fromLine(xi,yi,data[i],data[i+1],min2,max2),xi=data[i++],
yi=data[i++];break;case CMD.C:bbox.fromCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],min2,max2),
xi=data[i++],yi=data[i++];break;case CMD.Q:bbox.fromQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],min2,max2),
xi=data[i++],yi=data[i++];break;case CMD.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++],endAngle=data[i++]+startAngle,anticlockwise=(data[i++],
1-data[i++]);1==i&&(x0=mathCos(startAngle)*rx+cx,y0=mathSin(startAngle)*ry+cy),
bbox.fromArc(cx,cy,rx,ry,startAngle,endAngle,anticlockwise,min2,max2),
xi=mathCos(endAngle)*rx+cx,yi=mathSin(endAngle)*ry+cy;break;case CMD.R:
x0=xi=data[i++],y0=yi=data[i++];var width=data[i++],height=data[i++];
bbox.fromLine(x0,y0,x0+width,y0+height,min2,max2);break;case CMD.Z:
xi=x0,yi=y0}vec2.min(min,min,min2),vec2.max(max,max,max2)}return 0===i&&(min[0]=min[1]=max[0]=max[1]=0),
new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},
rebuildPath:function(ctx){for(var x0,y0,xi,yi,x,y,d=this.data,ux=this._ux,uy=this._uy,len=this._len,i=0;i<len;){
var cmd=d[i++];switch(1==i&&(xi=d[i],yi=d[i+1],x0=xi,y0=yi),cmd){
case CMD.M:x0=xi=d[i++],y0=yi=d[i++],ctx.moveTo(xi,yi);break;case CMD.L:
x=d[i++],y=d[i++],(mathAbs(x-xi)>ux||mathAbs(y-yi)>uy||i===len-1)&&(ctx.lineTo(x,y),
xi=x,yi=y);break;case CMD.C:ctx.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]),
xi=d[i-2],yi=d[i-1];break;case CMD.Q:ctx.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]),
xi=d[i-2],yi=d[i-1];break;case CMD.A:var cx=d[i++],cy=d[i++],rx=d[i++],ry=d[i++],theta=d[i++],dTheta=d[i++],psi=d[i++],fs=d[i++],r=rx>ry?rx:ry,scaleX=rx>ry?1:rx/ry,scaleY=rx>ry?ry/rx:1,isEllipse=Math.abs(rx-ry)>.001,endAngle=theta+dTheta;
isEllipse?(ctx.translate(cx,cy),ctx.rotate(psi),ctx.scale(scaleX,scaleY),
ctx.arc(0,0,r,theta,endAngle,1-fs),ctx.scale(1/scaleX,1/scaleY),
ctx.rotate(-psi),ctx.translate(-cx,-cy)):ctx.arc(cx,cy,r,theta,endAngle,1-fs),
1==i&&(x0=mathCos(theta)*rx+cx,y0=mathSin(theta)*ry+cy),xi=mathCos(endAngle)*rx+cx,
yi=mathSin(endAngle)*ry+cy;break;case CMD.R:x0=xi=d[i],y0=yi=d[i+1],
ctx.rect(d[i++],d[i++],d[i++],d[i++]);break;case CMD.Z:ctx.closePath(),
xi=x0,yi=y0}}}},PathProxy.CMD=CMD,module.exports=PathProxy},function(module,exports,__webpack_require__){
"use strict";function isAroundZero(val){return val>-EPSILON&&val<EPSILON;
}function isNotAroundZero(val){return val>EPSILON||val<-EPSILON;
}function cubicAt(p0,p1,p2,p3,t){var onet=1-t;return onet*onet*(onet*p0+3*t*p1)+t*t*(t*p3+3*onet*p2);
}function cubicDerivativeAt(p0,p1,p2,p3,t){var onet=1-t;return 3*(((p1-p0)*onet+2*(p2-p1)*t)*onet+(p3-p2)*t*t);
}function cubicRootAt(p0,p1,p2,p3,val,roots){var a=p3+3*(p1-p2)-p0,b=3*(p2-2*p1+p0),c=3*(p1-p0),d=p0-val,A=b*b-3*a*c,B=b*c-9*a*d,C=c*c-3*b*d,n=0;
if(isAroundZero(A)&&isAroundZero(B))if(isAroundZero(b))roots[0]=0;else{
var t1=-c/b;t1>=0&&t1<=1&&(roots[n++]=t1)}else{var disc=B*B-4*A*C;
if(isAroundZero(disc)){var K=B/A,t1=-b/a+K,t2=-K/2;t1>=0&&t1<=1&&(roots[n++]=t1),
t2>=0&&t2<=1&&(roots[n++]=t2)}else if(disc>0){var discSqrt=mathSqrt(disc),Y1=A*b+1.5*a*(-B+discSqrt),Y2=A*b+1.5*a*(-B-discSqrt);
Y1=Y1<0?-mathPow(-Y1,ONE_THIRD):mathPow(Y1,ONE_THIRD),Y2=Y2<0?-mathPow(-Y2,ONE_THIRD):mathPow(Y2,ONE_THIRD);
var t1=(-b-(Y1+Y2))/(3*a);t1>=0&&t1<=1&&(roots[n++]=t1)}else{
var T=(2*A*b-3*a*B)/(2*mathSqrt(A*A*A)),theta=Math.acos(T)/3,ASqrt=mathSqrt(A),tmp=Math.cos(theta),t1=(-b-2*ASqrt*tmp)/(3*a),t2=(-b+ASqrt*(tmp+THREE_SQRT*Math.sin(theta)))/(3*a),t3=(-b+ASqrt*(tmp-THREE_SQRT*Math.sin(theta)))/(3*a);
t1>=0&&t1<=1&&(roots[n++]=t1),t2>=0&&t2<=1&&(roots[n++]=t2),t3>=0&&t3<=1&&(roots[n++]=t3);
}}return n}function cubicExtrema(p0,p1,p2,p3,extrema){var b=6*p2-12*p1+6*p0,a=9*p1+3*p3-3*p0-9*p2,c=3*p1-3*p0,n=0;
if(isAroundZero(a)){if(isNotAroundZero(b)){var t1=-c/b;t1>=0&&t1<=1&&(extrema[n++]=t1);
}}else{var disc=b*b-4*a*c;if(isAroundZero(disc))extrema[0]=-b/(2*a);else if(disc>0){
var discSqrt=mathSqrt(disc),t1=(-b+discSqrt)/(2*a),t2=(-b-discSqrt)/(2*a);
t1>=0&&t1<=1&&(extrema[n++]=t1),t2>=0&&t2<=1&&(extrema[n++]=t2);
}}return n}function cubicSubdivide(p0,p1,p2,p3,t,out){var p01=(p1-p0)*t+p0,p12=(p2-p1)*t+p1,p23=(p3-p2)*t+p2,p012=(p12-p01)*t+p01,p123=(p23-p12)*t+p12,p0123=(p123-p012)*t+p012;
out[0]=p0,out[1]=p01,out[2]=p012,out[3]=p0123,out[4]=p0123,out[5]=p123,
out[6]=p23,out[7]=p3}function cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,out){
var t,prev,next,d1,d2,interval=.005,d=1/0;_v0[0]=x,_v0[1]=y;for(var _t=0;_t<1;_t+=.05)_v1[0]=cubicAt(x0,x1,x2,x3,_t),
_v1[1]=cubicAt(y0,y1,y2,y3,_t),d1=v2DistSquare(_v0,_v1),d1<d&&(t=_t,
d=d1);d=1/0;for(var i=0;i<32&&!(interval<EPSILON_NUMERIC);i++)prev=t-interval,
next=t+interval,_v1[0]=cubicAt(x0,x1,x2,x3,prev),_v1[1]=cubicAt(y0,y1,y2,y3,prev),
d1=v2DistSquare(_v1,_v0),prev>=0&&d1<d?(t=prev,d=d1):(_v2[0]=cubicAt(x0,x1,x2,x3,next),
_v2[1]=cubicAt(y0,y1,y2,y3,next),d2=v2DistSquare(_v2,_v0),next<=1&&d2<d?(t=next,
d=d2):interval*=.5);return out&&(out[0]=cubicAt(x0,x1,x2,x3,t),
out[1]=cubicAt(y0,y1,y2,y3,t)),mathSqrt(d)}function quadraticAt(p0,p1,p2,t){
var onet=1-t;return onet*(onet*p0+2*t*p1)+t*t*p2}function quadraticDerivativeAt(p0,p1,p2,t){
return 2*((1-t)*(p1-p0)+t*(p2-p1))}function quadraticRootAt(p0,p1,p2,val,roots){
var a=p0-2*p1+p2,b=2*(p1-p0),c=p0-val,n=0;if(isAroundZero(a)){
if(isNotAroundZero(b)){var t1=-c/b;t1>=0&&t1<=1&&(roots[n++]=t1);
}}else{var disc=b*b-4*a*c;if(isAroundZero(disc)){var t1=-b/(2*a);
t1>=0&&t1<=1&&(roots[n++]=t1)}else if(disc>0){var discSqrt=mathSqrt(disc),t1=(-b+discSqrt)/(2*a),t2=(-b-discSqrt)/(2*a);
t1>=0&&t1<=1&&(roots[n++]=t1),t2>=0&&t2<=1&&(roots[n++]=t2)}}
return n}function quadraticExtremum(p0,p1,p2){var divider=p0+p2-2*p1;
return 0===divider?.5:(p0-p1)/divider}function quadraticSubdivide(p0,p1,p2,t,out){
var p01=(p1-p0)*t+p0,p12=(p2-p1)*t+p1,p012=(p12-p01)*t+p01;out[0]=p0,
out[1]=p01,out[2]=p012,out[3]=p012,out[4]=p12,out[5]=p2}function quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,out){
var t,interval=.005,d=1/0;_v0[0]=x,_v0[1]=y;for(var _t=0;_t<1;_t+=.05){
_v1[0]=quadraticAt(x0,x1,x2,_t),_v1[1]=quadraticAt(y0,y1,y2,_t);
var d1=v2DistSquare(_v0,_v1);d1<d&&(t=_t,d=d1)}d=1/0;for(var i=0;i<32&&!(interval<EPSILON_NUMERIC);i++){
var prev=t-interval,next=t+interval;_v1[0]=quadraticAt(x0,x1,x2,prev),
_v1[1]=quadraticAt(y0,y1,y2,prev);var d1=v2DistSquare(_v1,_v0);
if(prev>=0&&d1<d)t=prev,d=d1;else{_v2[0]=quadraticAt(x0,x1,x2,next),
_v2[1]=quadraticAt(y0,y1,y2,next);var d2=v2DistSquare(_v2,_v0);
next<=1&&d2<d?(t=next,d=d2):interval*=.5}}return out&&(out[0]=quadraticAt(x0,x1,x2,t),
out[1]=quadraticAt(y0,y1,y2,t)),mathSqrt(d)}var vec2=__webpack_require__(10),v2Create=vec2.create,v2DistSquare=vec2.distSquare,mathPow=Math.pow,mathSqrt=Math.sqrt,EPSILON=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt(3),ONE_THIRD=1/3,_v0=v2Create(),_v1=v2Create(),_v2=v2Create();
module.exports={cubicAt:cubicAt,cubicDerivativeAt:cubicDerivativeAt,
cubicRootAt:cubicRootAt,cubicExtrema:cubicExtrema,cubicSubdivide:cubicSubdivide,
cubicProjectPoint:cubicProjectPoint,quadraticAt:quadraticAt,quadraticDerivativeAt:quadraticDerivativeAt,
quadraticRootAt:quadraticRootAt,quadraticExtremum:quadraticExtremum,
quadraticSubdivide:quadraticSubdivide,quadraticProjectPoint:quadraticProjectPoint
}},function(module,exports,__webpack_require__){var vec2=__webpack_require__(10),curve=__webpack_require__(50),bbox={},mathMin=Math.min,mathMax=Math.max,mathSin=Math.sin,mathCos=Math.cos,start=vec2.create(),end=vec2.create(),extremity=vec2.create(),PI2=2*Math.PI;
bbox.fromPoints=function(points,min,max){if(0!==points.length){
var i,p=points[0],left=p[0],right=p[0],top=p[1],bottom=p[1];for(i=1;i<points.length;i++)p=points[i],
left=mathMin(left,p[0]),right=mathMax(right,p[0]),top=mathMin(top,p[1]),
bottom=mathMax(bottom,p[1]);min[0]=left,min[1]=top,max[0]=right,
max[1]=bottom}},bbox.fromLine=function(x0,y0,x1,y1,min,max){min[0]=mathMin(x0,x1),
min[1]=mathMin(y0,y1),max[0]=mathMax(x0,x1),max[1]=mathMax(y0,y1);
};var xDim=[],yDim=[];bbox.fromCubic=function(x0,y0,x1,y1,x2,y2,x3,y3,min,max){
var i,cubicExtrema=curve.cubicExtrema,cubicAt=curve.cubicAt,n=cubicExtrema(x0,x1,x2,x3,xDim);
for(min[0]=1/0,min[1]=1/0,max[0]=-(1/0),max[1]=-(1/0),i=0;i<n;i++){
var x=cubicAt(x0,x1,x2,x3,xDim[i]);min[0]=mathMin(x,min[0]),max[0]=mathMax(x,max[0]);
}for(n=cubicExtrema(y0,y1,y2,y3,yDim),i=0;i<n;i++){var y=cubicAt(y0,y1,y2,y3,yDim[i]);
min[1]=mathMin(y,min[1]),max[1]=mathMax(y,max[1])}min[0]=mathMin(x0,min[0]),
max[0]=mathMax(x0,max[0]),min[0]=mathMin(x3,min[0]),max[0]=mathMax(x3,max[0]),
min[1]=mathMin(y0,min[1]),max[1]=mathMax(y0,max[1]),min[1]=mathMin(y3,min[1]),
max[1]=mathMax(y3,max[1])},bbox.fromQuadratic=function(x0,y0,x1,y1,x2,y2,min,max){
var quadraticExtremum=curve.quadraticExtremum,quadraticAt=curve.quadraticAt,tx=mathMax(mathMin(quadraticExtremum(x0,x1,x2),1),0),ty=mathMax(mathMin(quadraticExtremum(y0,y1,y2),1),0),x=quadraticAt(x0,x1,x2,tx),y=quadraticAt(y0,y1,y2,ty);
min[0]=mathMin(x0,x2,x),min[1]=mathMin(y0,y2,y),max[0]=mathMax(x0,x2,x),
max[1]=mathMax(y0,y2,y)},bbox.fromArc=function(x,y,rx,ry,startAngle,endAngle,anticlockwise,min,max){
var vec2Min=vec2.min,vec2Max=vec2.max,diff=Math.abs(startAngle-endAngle);
if(diff%PI2<1e-4&&diff>1e-4)return min[0]=x-rx,min[1]=y-ry,max[0]=x+rx,
void(max[1]=y+ry);if(start[0]=mathCos(startAngle)*rx+x,start[1]=mathSin(startAngle)*ry+y,
end[0]=mathCos(endAngle)*rx+x,end[1]=mathSin(endAngle)*ry+y,vec2Min(min,start,end),
vec2Max(max,start,end),startAngle%=PI2,startAngle<0&&(startAngle+=PI2),
endAngle%=PI2,endAngle<0&&(endAngle+=PI2),startAngle>endAngle&&!anticlockwise?endAngle+=PI2:startAngle<endAngle&&anticlockwise&&(startAngle+=PI2),
anticlockwise){var tmp=endAngle;endAngle=startAngle,startAngle=tmp;
}for(var angle=0;angle<endAngle;angle+=Math.PI/2)angle>startAngle&&(extremity[0]=mathCos(angle)*rx+x,
extremity[1]=mathSin(angle)*ry+y,vec2Min(min,extremity,min),vec2Max(max,extremity,max));
},module.exports=bbox},function(module,exports,__webpack_require__){
"use strict";function isAroundEqual(a,b){return Math.abs(a-b)<EPSILON;
}function swapExtrema(){var tmp=extrema[0];extrema[0]=extrema[1],
extrema[1]=tmp}function windingCubic(x0,y0,x1,y1,x2,y2,x3,y3,x,y){
if(y>y0&&y>y1&&y>y2&&y>y3||y<y0&&y<y1&&y<y2&&y<y3)return 0;var nRoots=curve.cubicRootAt(y0,y1,y2,y3,y,roots);
if(0===nRoots)return 0;for(var y0_,y1_,w=0,nExtrema=-1,i=0;i<nRoots;i++){
var t=roots[i],unit=0===t||1===t?.5:1,x_=curve.cubicAt(x0,x1,x2,x3,t);
x_<x||(nExtrema<0&&(nExtrema=curve.cubicExtrema(y0,y1,y2,y3,extrema),
extrema[1]<extrema[0]&&nExtrema>1&&swapExtrema(),y0_=curve.cubicAt(y0,y1,y2,y3,extrema[0]),
nExtrema>1&&(y1_=curve.cubicAt(y0,y1,y2,y3,extrema[1]))),w+=2==nExtrema?t<extrema[0]?y0_<y0?unit:-unit:t<extrema[1]?y1_<y0_?unit:-unit:y3<y1_?unit:-unit:t<extrema[0]?y0_<y0?unit:-unit:y3<y0_?unit:-unit);
}return w}function windingQuadratic(x0,y0,x1,y1,x2,y2,x,y){if(y>y0&&y>y1&&y>y2||y<y0&&y<y1&&y<y2)return 0;
var nRoots=curve.quadraticRootAt(y0,y1,y2,y,roots);if(0===nRoots)return 0;
var t=curve.quadraticExtremum(y0,y1,y2);if(t>=0&&t<=1){for(var w=0,y_=curve.quadraticAt(y0,y1,y2,t),i=0;i<nRoots;i++){
var unit=0===roots[i]||1===roots[i]?.5:1,x_=curve.quadraticAt(x0,x1,x2,roots[i]);
x_<x||(w+=roots[i]<t?y_<y0?unit:-unit:y2<y_?unit:-unit)}return w;
}var unit=0===roots[0]||1===roots[0]?.5:1,x_=curve.quadraticAt(x0,x1,x2,roots[0]);
return x_<x?0:y2<y0?unit:-unit}function windingArc(cx,cy,r,startAngle,endAngle,anticlockwise,x,y){
if(y-=cy,y>r||y<-r)return 0;var tmp=Math.sqrt(r*r-y*y);roots[0]=-tmp,
roots[1]=tmp;var diff=Math.abs(startAngle-endAngle);if(diff<1e-4)return 0;
if(diff%PI2<1e-4){startAngle=0,endAngle=PI2;var dir=anticlockwise?1:-1;
return x>=roots[0]+cx&&x<=roots[1]+cx?dir:0}if(anticlockwise){
var tmp=startAngle;startAngle=normalizeRadian(endAngle),endAngle=normalizeRadian(tmp);
}else startAngle=normalizeRadian(startAngle),endAngle=normalizeRadian(endAngle);
startAngle>endAngle&&(endAngle+=PI2);for(var w=0,i=0;i<2;i++){
var x_=roots[i];if(x_+cx>x){var angle=Math.atan2(y,x_),dir=anticlockwise?1:-1;
angle<0&&(angle=PI2+angle),(angle>=startAngle&&angle<=endAngle||angle+PI2>=startAngle&&angle+PI2<=endAngle)&&(angle>Math.PI/2&&angle<1.5*Math.PI&&(dir=-dir),
w+=dir)}}return w}function containPath(data,lineWidth,isStroke,x,y){
for(var w=0,xi=0,yi=0,x0=0,y0=0,i=0;i<data.length;){var cmd=data[i++];
switch(cmd===CMD.M&&i>1&&(isStroke||(w+=windingLine(xi,yi,x0,y0,x,y))),
1==i&&(xi=data[i],yi=data[i+1],x0=xi,y0=yi),cmd){case CMD.M:x0=data[i++],
y0=data[i++],xi=x0,yi=y0;break;case CMD.L:if(isStroke){if(containStroke(xi,yi,data[i],data[i+1],lineWidth,x,y))return!0;
}else w+=windingLine(xi,yi,data[i],data[i+1],x,y)||0;xi=data[i++],
yi=data[i++];break;case CMD.C:if(isStroke){if(cubic.containStroke(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],lineWidth,x,y))return!0;
}else w+=windingCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],x,y)||0;
xi=data[i++],yi=data[i++];break;case CMD.Q:if(isStroke){if(quadratic.containStroke(xi,yi,data[i++],data[i++],data[i],data[i+1],lineWidth,x,y))return!0;
}else w+=windingQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],x,y)||0;
xi=data[i++],yi=data[i++];break;case CMD.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],theta=data[i++],dTheta=data[i++],anticlockwise=(data[i++],
1-data[i++]),x1=Math.cos(theta)*rx+cx,y1=Math.sin(theta)*ry+cy;
i>1?w+=windingLine(xi,yi,x1,y1,x,y):(x0=x1,y0=y1);var _x=(x-cx)*ry/rx+cx;
if(isStroke){if(arc.containStroke(cx,cy,ry,theta,theta+dTheta,anticlockwise,lineWidth,_x,y))return!0;
}else w+=windingArc(cx,cy,ry,theta,theta+dTheta,anticlockwise,_x,y);
xi=Math.cos(theta+dTheta)*rx+cx,yi=Math.sin(theta+dTheta)*ry+cy;
break;case CMD.R:x0=xi=data[i++],y0=yi=data[i++];var width=data[i++],height=data[i++],x1=x0+width,y1=y0+height;
if(isStroke){if(containStroke(x0,y0,x1,y0,lineWidth,x,y)||containStroke(x1,y0,x1,y1,lineWidth,x,y)||containStroke(x1,y1,x0,y1,lineWidth,x,y)||containStroke(x0,y1,x0,y0,lineWidth,x,y))return!0;
}else w+=windingLine(x1,y0,x1,y1,x,y),w+=windingLine(x0,y1,x0,y0,x,y);
break;case CMD.Z:if(isStroke){if(containStroke(xi,yi,x0,y0,lineWidth,x,y))return!0;
}else w+=windingLine(xi,yi,x0,y0,x,y);xi=x0,yi=y0}}return isStroke||isAroundEqual(yi,y0)||(w+=windingLine(xi,yi,x0,y0,x,y)||0),
0!==w}var CMD=__webpack_require__(49).CMD,line=__webpack_require__(53),cubic=__webpack_require__(54),quadratic=__webpack_require__(55),arc=__webpack_require__(56),normalizeRadian=__webpack_require__(57).normalizeRadian,curve=__webpack_require__(50),windingLine=__webpack_require__(58),containStroke=line.containStroke,PI2=2*Math.PI,EPSILON=1e-4,roots=[-1,-1,-1],extrema=[-1,-1];
module.exports={contain:function(pathData,x,y){return containPath(pathData,0,!1,x,y);
},containStroke:function(pathData,lineWidth,x,y){return containPath(pathData,lineWidth,!0,x,y);
}}},function(module,exports){module.exports={containStroke:function(x0,y0,x1,y1,lineWidth,x,y){
if(0===lineWidth)return!1;var _l=lineWidth,_a=0,_b=x0;if(y>y0+_l&&y>y1+_l||y<y0-_l&&y<y1-_l||x>x0+_l&&x>x1+_l||x<x0-_l&&x<x1-_l)return!1;
if(x0===x1)return Math.abs(x-x0)<=_l/2;_a=(y0-y1)/(x0-x1),_b=(x0*y1-x1*y0)/(x0-x1);
var tmp=_a*x-y+_b,_s=tmp*tmp/(_a*_a+1);return _s<=_l/2*_l/2}};
},function(module,exports,__webpack_require__){var curve=__webpack_require__(50);
module.exports={containStroke:function(x0,y0,x1,y1,x2,y2,x3,y3,lineWidth,x,y){
if(0===lineWidth)return!1;var _l=lineWidth;if(y>y0+_l&&y>y1+_l&&y>y2+_l&&y>y3+_l||y<y0-_l&&y<y1-_l&&y<y2-_l&&y<y3-_l||x>x0+_l&&x>x1+_l&&x>x2+_l&&x>x3+_l||x<x0-_l&&x<x1-_l&&x<x2-_l&&x<x3-_l)return!1;
var d=curve.cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,null);
return d<=_l/2}}},function(module,exports,__webpack_require__){
var curve=__webpack_require__(50);module.exports={containStroke:function(x0,y0,x1,y1,x2,y2,lineWidth,x,y){
if(0===lineWidth)return!1;var _l=lineWidth;if(y>y0+_l&&y>y1+_l&&y>y2+_l||y<y0-_l&&y<y1-_l&&y<y2-_l||x>x0+_l&&x>x1+_l&&x>x2+_l||x<x0-_l&&x<x1-_l&&x<x2-_l)return!1;
var d=curve.quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,null);
return d<=_l/2}}},function(module,exports,__webpack_require__){
var normalizeRadian=__webpack_require__(57).normalizeRadian,PI2=2*Math.PI;
module.exports={containStroke:function(cx,cy,r,startAngle,endAngle,anticlockwise,lineWidth,x,y){
if(0===lineWidth)return!1;var _l=lineWidth;x-=cx,y-=cy;var d=Math.sqrt(x*x+y*y);
if(d-_l>r||d+_l<r)return!1;if(Math.abs(startAngle-endAngle)%PI2<1e-4)return!0;
if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle),
endAngle=normalizeRadian(tmp)}else startAngle=normalizeRadian(startAngle),
endAngle=normalizeRadian(endAngle);startAngle>endAngle&&(endAngle+=PI2);
var angle=Math.atan2(y,x);return angle<0&&(angle+=PI2),angle>=startAngle&&angle<=endAngle||angle+PI2>=startAngle&&angle+PI2<=endAngle;
}}},function(module,exports){var PI2=2*Math.PI;module.exports={
normalizeRadian:function(angle){return angle%=PI2,angle<0&&(angle+=PI2),
angle}}},function(module,exports){module.exports=function(x0,y0,x1,y1,x,y){
if(y>y0&&y>y1||y<y0&&y<y1)return 0;if(y1===y0)return 0;var dir=y1<y0?1:-1,t=(y-y0)/(y1-y0);
1!==t&&0!==t||(dir=y1<y0?.5:-.5);var x_=t*(x1-x0)+x0;return x_>x?dir:0;
}},function(module,exports){var Pattern=function(image,repeat){
this.image=image,this.repeat=repeat,this.type="pattern"};Pattern.prototype.getCanvasPattern=function(ctx){
return this._canvasPattern||(this._canvasPattern=ctx.createPattern(this.image,this.repeat));
},module.exports=Pattern},function(module,exports,__webpack_require__){
function transformPath(path,m){var cmd,nPoint,i,j,k,p,data=path.data,M=CMD.M,C=CMD.C,L=CMD.L,R=CMD.R,A=CMD.A,Q=CMD.Q;
for(i=0,j=0;i<data.length;){switch(cmd=data[i++],j=i,nPoint=0,
cmd){case M:nPoint=1;break;case L:nPoint=1;break;case C:nPoint=3;
break;case Q:nPoint=2;break;case A:var x=m[4],y=m[5],sx=mathSqrt(m[0]*m[0]+m[1]*m[1]),sy=mathSqrt(m[2]*m[2]+m[3]*m[3]),angle=mathAtan2(-m[1]/sy,m[0]/sx);
data[i++]+=x,data[i++]+=y,data[i++]*=sx,data[i++]*=sy,data[i++]+=angle,
data[i++]+=angle,i+=2,j=i;break;case R:p[0]=data[i++],p[1]=data[i++],
v2ApplyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1],p[0]+=data[i++],
p[1]+=data[i++],v2ApplyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1];
}for(k=0;k<nPoint;k++){var p=points[k];p[0]=data[i++],p[1]=data[i++],
v2ApplyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1]}}}var CMD=__webpack_require__(49).CMD,vec2=__webpack_require__(10),v2ApplyTransform=vec2.applyTransform,points=[[],[],[]],mathSqrt=Math.sqrt,mathAtan2=Math.atan2;
module.exports=transformPath},function(module,exports,__webpack_require__){
function ZImage(opts){Displayable.call(this,opts)}var Displayable=__webpack_require__(46),BoundingRect=__webpack_require__(9),zrUtil=__webpack_require__(4),LRU=__webpack_require__(62),globalImageCache=new LRU(50);
ZImage.prototype={constructor:ZImage,type:"image",brush:function(ctx,prevEl){
var image,style=this.style,src=style.image;if(style.bind(ctx,this,prevEl),
image="string"==typeof src?this._image:src,!image&&src){var cachedImgObj=globalImageCache.get(src);
if(!cachedImgObj)return image=new Image,image.onload=function(){
image.onload=null;for(var i=0;i<cachedImgObj.pending.length;i++)cachedImgObj.pending[i].dirty();
},cachedImgObj={image:image,pending:[this]},image.src=src,globalImageCache.put(src,cachedImgObj),
void(this._image=image);if(image=cachedImgObj.image,this._image=image,
!image.width||!image.height)return void cachedImgObj.pending.push(this);
}if(image){var width=style.width||image.width,height=style.height||image.height,x=style.x||0,y=style.y||0;
if(!image.width||!image.height)return;if(this.setTransform(ctx),
style.sWidth&&style.sHeight){var sx=style.sx||0,sy=style.sy||0;
ctx.drawImage(image,sx,sy,style.sWidth,style.sHeight,x,y,width,height);
}else if(style.sx&&style.sy){var sx=style.sx,sy=style.sy,sWidth=width-sx,sHeight=height-sy;
ctx.drawImage(image,sx,sy,sWidth,sHeight,x,y,width,height)}else ctx.drawImage(image,x,y,width,height);
null==style.width&&(style.width=width),null==style.height&&(style.height=height),
this.restoreTransform(ctx),null!=style.text&&this.drawRectText(ctx,this.getBoundingRect());
}},getBoundingRect:function(){var style=this.style;return this._rect||(this._rect=new BoundingRect(style.x||0,style.y||0,style.width||0,style.height||0)),
this._rect}},zrUtil.inherits(ZImage,Displayable),module.exports=ZImage;
},function(module,exports){var LinkedList=function(){this.head=null,
this.tail=null,this._len=0},linkedListProto=LinkedList.prototype;
linkedListProto.insert=function(val){var entry=new Entry(val);
return this.insertEntry(entry),entry},linkedListProto.insertEntry=function(entry){
this.head?(this.tail.next=entry,entry.prev=this.tail,this.tail=entry):this.head=this.tail=entry,
this._len++},linkedListProto.remove=function(entry){var prev=entry.prev,next=entry.next;
prev?prev.next=next:this.head=next,next?next.prev=prev:this.tail=prev,
entry.next=entry.prev=null,this._len--},linkedListProto.len=function(){
return this._len};var Entry=function(val){this.value=val,this.next,
this.prev},LRU=function(maxSize){this._list=new LinkedList,this._map={},
this._maxSize=maxSize||10},LRUProto=LRU.prototype;LRUProto.put=function(key,value){
var list=this._list,map=this._map;if(null==map[key]){var len=list.len();
if(len>=this._maxSize&&len>0){var leastUsedEntry=list.head;list.remove(leastUsedEntry),
delete map[leastUsedEntry.key]}var entry=list.insert(value);entry.key=key,
map[key]=entry}},LRUProto.get=function(key){var entry=this._map[key],list=this._list;
if(null!=entry)return entry!==list.tail&&(list.remove(entry),
list.insertEntry(entry)),entry.value},LRUProto.clear=function(){
this._list.clear(),this._map={}},module.exports=LRU},function(module,exports,__webpack_require__){
var Displayable=__webpack_require__(46),zrUtil=__webpack_require__(4),textContain=__webpack_require__(8),Text=function(opts){
Displayable.call(this,opts)};Text.prototype={constructor:Text,
type:"text",brush:function(ctx,prevEl){var style=this.style,x=style.x||0,y=style.y||0,text=style.text;
if(null!=text&&(text+=""),style.bind(ctx,this,prevEl),text){this.setTransform(ctx);
var textBaseline,textAlign=style.textAlign,font=style.textFont||style.font;
if(style.textVerticalAlign){var rect=textContain.getBoundingRect(text,font,style.textAlign,"top");
switch(textBaseline="middle",style.textVerticalAlign){case"middle":
y-=rect.height/2-rect.lineHeight/2;break;case"bottom":y-=rect.height-rect.lineHeight/2;
break;default:y+=rect.lineHeight/2}}else textBaseline=style.textBaseline;
ctx.font=font||"12px sans-serif",ctx.textAlign=textAlign||"left",
ctx.textAlign!==textAlign&&(ctx.textAlign="left"),ctx.textBaseline=textBaseline||"alphabetic",
ctx.textBaseline!==textBaseline&&(ctx.textBaseline="alphabetic");
for(var lineHeight=textContain.measureText("国",ctx.font).width,textLines=text.split("\n"),i=0;i<textLines.length;i++)style.hasFill()&&ctx.fillText(textLines[i],x,y),
style.hasStroke()&&ctx.strokeText(textLines[i],x,y),y+=lineHeight;
this.restoreTransform(ctx)}},getBoundingRect:function(){if(!this._rect){
var style=this.style,textVerticalAlign=style.textVerticalAlign,rect=textContain.getBoundingRect(style.text+"",style.textFont||style.font,style.textAlign,textVerticalAlign?"top":style.textBaseline);
switch(textVerticalAlign){case"middle":rect.y-=rect.height/2;break;
case"bottom":rect.y-=rect.height}rect.x+=style.x||0,rect.y+=style.y||0,
this._rect=rect}return this._rect}},zrUtil.inherits(Text,Displayable),
module.exports=Text},function(module,exports,__webpack_require__){
"use strict";module.exports=__webpack_require__(45).extend({type:"circle",
shape:{cx:0,cy:0,r:0},buildPath:function(ctx,shape,inBundle){
inBundle&&ctx.moveTo(shape.cx+shape.r,shape.cy),ctx.arc(shape.cx,shape.cy,shape.r,0,2*Math.PI,!0);
}})},function(module,exports,__webpack_require__){var env=__webpack_require__(2),Path=__webpack_require__(45),shadowTemp=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];
module.exports=Path.extend({type:"sector",shape:{cx:0,cy:0,r0:0,
r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:env.browser.ie&&env.browser.version>=11?function(){
var modified,clipPaths=this.__clipPaths,style=this.style;if(clipPaths)for(var i=0;i<clipPaths.length;i++){
var shape=clipPaths[i]&&clipPaths[i].shape;if(shape&&shape.startAngle===shape.endAngle){
for(var j=0;j<shadowTemp.length;j++)shadowTemp[j][2]=style[shadowTemp[j][0]],
style[shadowTemp[j][0]]=shadowTemp[j][1];modified=!0;break}}if(Path.prototype.brush.apply(this,arguments),
modified)for(var j=0;j<shadowTemp.length;j++)style[shadowTemp[j][0]]=shadowTemp[j][2];
}:Path.prototype.brush,buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,r0=Math.max(shape.r0||0,0),r=Math.max(shape.r,0),startAngle=shape.startAngle,endAngle=shape.endAngle,clockwise=shape.clockwise,unitX=Math.cos(startAngle),unitY=Math.sin(startAngle);
ctx.moveTo(unitX*r0+x,unitY*r0+y),ctx.lineTo(unitX*r+x,unitY*r+y),
ctx.arc(x,y,r,startAngle,endAngle,!clockwise),ctx.lineTo(Math.cos(endAngle)*r0+x,Math.sin(endAngle)*r0+y),
0!==r0&&ctx.arc(x,y,r0,endAngle,startAngle,clockwise),ctx.closePath();
}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45).extend({
type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(ctx,shape){
var x=shape.cx,y=shape.cy,PI2=2*Math.PI;ctx.moveTo(x+shape.r,y),
ctx.arc(x,y,shape.r,0,PI2,!1),ctx.moveTo(x+shape.r0,y),ctx.arc(x,y,shape.r0,0,PI2,!0);
}})},function(module,exports,__webpack_require__){var polyHelper=__webpack_require__(68);
module.exports=__webpack_require__(45).extend({type:"polygon",
shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(ctx,shape){
polyHelper.buildPath(ctx,shape,!0)}})},function(module,exports,__webpack_require__){
var smoothSpline=__webpack_require__(69),smoothBezier=__webpack_require__(70);
module.exports={buildPath:function(ctx,shape,closePath){var points=shape.points,smooth=shape.smooth;
if(points&&points.length>=2){if(smooth&&"spline"!==smooth){var controlPoints=smoothBezier(points,smooth,closePath,shape.smoothConstraint);
ctx.moveTo(points[0][0],points[0][1]);for(var len=points.length,i=0;i<(closePath?len:len-1);i++){
var cp1=controlPoints[2*i],cp2=controlPoints[2*i+1],p=points[(i+1)%len];
ctx.bezierCurveTo(cp1[0],cp1[1],cp2[0],cp2[1],p[0],p[1])}}else{
"spline"===smooth&&(points=smoothSpline(points,closePath)),ctx.moveTo(points[0][0],points[0][1]);
for(var i=1,l=points.length;i<l;i++)ctx.lineTo(points[i][0],points[i][1]);
}closePath&&ctx.closePath()}}}},function(module,exports,__webpack_require__){
function interpolate(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1);
return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}var vec2=__webpack_require__(10);
module.exports=function(points,isLoop){for(var len=points.length,ret=[],distance=0,i=1;i<len;i++)distance+=vec2.distance(points[i-1],points[i]);
var segs=distance/2;segs=segs<len?len:segs;for(var i=0;i<segs;i++){
var p0,p2,p3,pos=i/(segs-1)*(isLoop?len:len-1),idx=Math.floor(pos),w=pos-idx,p1=points[idx%len];
isLoop?(p0=points[(idx-1+len)%len],p2=points[(idx+1)%len],p3=points[(idx+2)%len]):(p0=points[0===idx?idx:idx-1],
p2=points[idx>len-2?len-1:idx+1],p3=points[idx>len-3?len-1:idx+2]);
var w2=w*w,w3=w*w2;ret.push([interpolate(p0[0],p1[0],p2[0],p3[0],w,w2,w3),interpolate(p0[1],p1[1],p2[1],p3[1],w,w2,w3)]);
}return ret}},function(module,exports,__webpack_require__){var vec2=__webpack_require__(10),v2Min=vec2.min,v2Max=vec2.max,v2Scale=vec2.scale,v2Distance=vec2.distance,v2Add=vec2.add;
module.exports=function(points,smooth,isLoop,constraint){var prevPoint,nextPoint,min,max,cps=[],v=[],v1=[],v2=[];
if(constraint){min=[1/0,1/0],max=[-(1/0),-(1/0)];for(var i=0,len=points.length;i<len;i++)v2Min(min,min,points[i]),
v2Max(max,max,points[i]);v2Min(min,min,constraint[0]),v2Max(max,max,constraint[1]);
}for(var i=0,len=points.length;i<len;i++){var point=points[i];
if(isLoop)prevPoint=points[i?i-1:len-1],nextPoint=points[(i+1)%len];else{
if(0===i||i===len-1){cps.push(vec2.clone(points[i]));continue;
}prevPoint=points[i-1],nextPoint=points[i+1]}vec2.sub(v,nextPoint,prevPoint),
v2Scale(v,v,smooth);var d0=v2Distance(point,prevPoint),d1=v2Distance(point,nextPoint),sum=d0+d1;
0!==sum&&(d0/=sum,d1/=sum),v2Scale(v1,v,-d0),v2Scale(v2,v,d1);
var cp0=v2Add([],point,v1),cp1=v2Add([],point,v2);constraint&&(v2Max(cp0,cp0,min),
v2Min(cp0,cp0,max),v2Max(cp1,cp1,min),v2Min(cp1,cp1,max)),cps.push(cp0),
cps.push(cp1)}return isLoop&&cps.push(cps.shift()),cps}},function(module,exports,__webpack_require__){
var polyHelper=__webpack_require__(68);module.exports=__webpack_require__(45).extend({
type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null
},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){
polyHelper.buildPath(ctx,shape,!1)}})},function(module,exports,__webpack_require__){
var roundRectHelper=__webpack_require__(73);module.exports=__webpack_require__(45).extend({
type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){
var x=shape.x,y=shape.y,width=shape.width,height=shape.height;
shape.r?roundRectHelper.buildPath(ctx,shape):ctx.rect(x,y,width,height),
ctx.closePath()}})},function(module,exports){module.exports={
buildPath:function(ctx,shape){var r1,r2,r3,r4,x=shape.x,y=shape.y,width=shape.width,height=shape.height,r=shape.r;
width<0&&(x+=width,width=-width),height<0&&(y+=height,height=-height),
"number"==typeof r?r1=r2=r3=r4=r:r instanceof Array?1===r.length?r1=r2=r3=r4=r[0]:2===r.length?(r1=r3=r[0],
r2=r4=r[1]):3===r.length?(r1=r[0],r2=r4=r[1],r3=r[2]):(r1=r[0],
r2=r[1],r3=r[2],r4=r[3]):r1=r2=r3=r4=0;var total;r1+r2>width&&(total=r1+r2,
r1*=width/total,r2*=width/total),r3+r4>width&&(total=r3+r4,r3*=width/total,
r4*=width/total),r2+r3>height&&(total=r2+r3,r2*=height/total,
r3*=height/total),r1+r4>height&&(total=r1+r4,r1*=height/total,
r4*=height/total),ctx.moveTo(x+r1,y),ctx.lineTo(x+width-r2,y),
0!==r2&&ctx.quadraticCurveTo(x+width,y,x+width,y+r2),ctx.lineTo(x+width,y+height-r3),
0!==r3&&ctx.quadraticCurveTo(x+width,y+height,x+width-r3,y+height),
ctx.lineTo(x+r4,y+height),0!==r4&&ctx.quadraticCurveTo(x,y+height,x,y+height-r4),
ctx.lineTo(x,y+r1),0!==r1&&ctx.quadraticCurveTo(x,y,x+r1,y)}};
},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45).extend({
type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",
fill:null},buildPath:function(ctx,shape){var x1=shape.x1,y1=shape.y1,x2=shape.x2,y2=shape.y2,percent=shape.percent;
0!==percent&&(ctx.moveTo(x1,y1),percent<1&&(x2=x1*(1-percent)+x2*percent,
y2=y1*(1-percent)+y2*percent),ctx.lineTo(x2,y2))},pointAt:function(p){
var shape=this.shape;return[shape.x1*(1-p)+shape.x2*p,shape.y1*(1-p)+shape.y2*p];
}})},function(module,exports,__webpack_require__){"use strict";
function someVectorAt(shape,t,isTangent){var cpx2=shape.cpx2,cpy2=shape.cpy2;
return null===cpx2||null===cpy2?[(isTangent?cubicDerivativeAt:cubicAt)(shape.x1,shape.cpx1,shape.cpx2,shape.x2,t),(isTangent?cubicDerivativeAt:cubicAt)(shape.y1,shape.cpy1,shape.cpy2,shape.y2,t)]:[(isTangent?quadraticDerivativeAt:quadraticAt)(shape.x1,shape.cpx1,shape.x2,t),(isTangent?quadraticDerivativeAt:quadraticAt)(shape.y1,shape.cpy1,shape.y2,t)];
}var curveTool=__webpack_require__(50),vec2=__webpack_require__(10),quadraticSubdivide=curveTool.quadraticSubdivide,cubicSubdivide=curveTool.cubicSubdivide,quadraticAt=curveTool.quadraticAt,cubicAt=curveTool.cubicAt,quadraticDerivativeAt=curveTool.quadraticDerivativeAt,cubicDerivativeAt=curveTool.cubicDerivativeAt,out=[];
module.exports=__webpack_require__(45).extend({type:"bezier-curve",
shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",
fill:null},buildPath:function(ctx,shape){var x1=shape.x1,y1=shape.y1,x2=shape.x2,y2=shape.y2,cpx1=shape.cpx1,cpy1=shape.cpy1,cpx2=shape.cpx2,cpy2=shape.cpy2,percent=shape.percent;
0!==percent&&(ctx.moveTo(x1,y1),null==cpx2||null==cpy2?(percent<1&&(quadraticSubdivide(x1,cpx1,x2,percent,out),
cpx1=out[1],x2=out[2],quadraticSubdivide(y1,cpy1,y2,percent,out),
cpy1=out[1],y2=out[2]),ctx.quadraticCurveTo(cpx1,cpy1,x2,y2)):(percent<1&&(cubicSubdivide(x1,cpx1,cpx2,x2,percent,out),
cpx1=out[1],cpx2=out[2],x2=out[3],cubicSubdivide(y1,cpy1,cpy2,y2,percent,out),
cpy1=out[1],cpy2=out[2],y2=out[3]),ctx.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,x2,y2)));
},pointAt:function(t){return someVectorAt(this.shape,t,!1)},tangentAt:function(t){
var p=someVectorAt(this.shape,t,!0);return vec2.normalize(p,p);
}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45).extend({
type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,
clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){
var x=shape.cx,y=shape.cy,r=Math.max(shape.r,0),startAngle=shape.startAngle,endAngle=shape.endAngle,clockwise=shape.clockwise,unitX=Math.cos(startAngle),unitY=Math.sin(startAngle);
ctx.moveTo(unitX*r+x,unitY*r+y),ctx.arc(x,y,r,startAngle,endAngle,!clockwise);
}})},function(module,exports,__webpack_require__){var Path=__webpack_require__(45);
module.exports=Path.extend({type:"compound",shape:{paths:null
},_updatePathDirty:function(){for(var dirtyPath=this.__dirtyPath,paths=this.shape.paths,i=0;i<paths.length;i++)dirtyPath=dirtyPath||paths[i].__dirtyPath;
this.__dirtyPath=dirtyPath,this.__dirty=this.__dirty||dirtyPath;
},beforeBrush:function(){this._updatePathDirty();for(var paths=this.shape.paths||[],scale=this.getGlobalScale(),i=0;i<paths.length;i++)paths[i].path.setScale(scale[0],scale[1]);
},buildPath:function(ctx,shape){for(var paths=shape.paths||[],i=0;i<paths.length;i++)paths[i].buildPath(ctx,paths[i].shape,!0);
},afterBrush:function(){for(var paths=this.shape.paths,i=0;i<paths.length;i++)paths[i].__dirtyPath=!1;
},getBoundingRect:function(){return this._updatePathDirty(),Path.prototype.getBoundingRect.call(this);
}})},function(module,exports,__webpack_require__){"use strict";
var zrUtil=__webpack_require__(4),Gradient=__webpack_require__(79),LinearGradient=function(x,y,x2,y2,colorStops,globalCoord){
this.x=null==x?0:x,this.y=null==y?0:y,this.x2=null==x2?1:x2,this.y2=null==y2?0:y2,
this.type="linear",this.global=globalCoord||!1,Gradient.call(this,colorStops);
};LinearGradient.prototype={constructor:LinearGradient},zrUtil.inherits(LinearGradient,Gradient),
module.exports=LinearGradient},function(module,exports){var Gradient=function(colorStops){
this.colorStops=colorStops||[]};Gradient.prototype={constructor:Gradient,
addColorStop:function(offset,color){this.colorStops.push({offset:offset,
color:color})}},module.exports=Gradient},function(module,exports,__webpack_require__){
"use strict";var zrUtil=__webpack_require__(4),Gradient=__webpack_require__(79),RadialGradient=function(x,y,r,colorStops,globalCoord){
this.x=null==x?.5:x,this.y=null==y?.5:y,this.r=null==r?.5:r,this.type="radial",
this.global=globalCoord||!1,Gradient.call(this,colorStops)};RadialGradient.prototype={
constructor:RadialGradient},zrUtil.inherits(RadialGradient,Gradient),
module.exports=RadialGradient},function(module,exports){var lib={},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";
lib.throttle=function(fn,delay,debounce){function exec(){lastExec=(new Date).getTime(),
timer=null,fn.apply(scope,args||[])}var currCall,diff,scope,args,lastCall=0,lastExec=0,timer=null;
delay=delay||0;var cb=function(){currCall=(new Date).getTime(),
scope=this,args=arguments,diff=currCall-(debounce?lastCall:lastExec)-delay,
clearTimeout(timer),debounce?timer=setTimeout(exec,delay):diff>=0?exec():timer=setTimeout(exec,-diff),
lastCall=currCall};return cb.clear=function(){timer&&(clearTimeout(timer),
timer=null)},cb},lib.createOrUpdate=function(obj,fnAttr,rate,throttleType){
var fn=obj[fnAttr];if(fn){var originFn=fn[ORIGIN_METHOD]||fn,lastThrottleType=fn[THROTTLE_TYPE],lastRate=fn[RATE];
if(lastRate!==rate||lastThrottleType!==throttleType){if(null==rate||!throttleType)return obj[fnAttr]=originFn;
fn=obj[fnAttr]=lib.throttle(originFn,rate,"debounce"===throttleType),
fn[ORIGIN_METHOD]=originFn,fn[THROTTLE_TYPE]=throttleType,fn[RATE]=rate;
}return fn}},lib.clear=function(obj,fnAttr){var fn=obj[fnAttr];
fn&&fn[ORIGIN_METHOD]&&(obj[fnAttr]=fn[ORIGIN_METHOD])},module.exports=lib;
},function(module,exports,__webpack_require__){function delInstance(id){
delete instances[id]}var guid=__webpack_require__(32),env=__webpack_require__(2),zrUtil=__webpack_require__(4),Handler=__webpack_require__(83),Storage=__webpack_require__(85),Animation=__webpack_require__(87),HandlerProxy=__webpack_require__(90),useVML=!env.canvasSupported,painterCtors={
canvas:__webpack_require__(92)},instances={},zrender={};zrender.version="3.3.0",
zrender.init=function(dom,opts){var zr=new ZRender(guid(),dom,opts);
return instances[zr.id]=zr,zr},zrender.dispose=function(zr){if(zr)zr.dispose();else{
for(var key in instances)instances.hasOwnProperty(key)&&instances[key].dispose();
instances={}}return zrender},zrender.getInstance=function(id){
return instances[id]},zrender.registerPainter=function(name,Ctor){
painterCtors[name]=Ctor};var ZRender=function(id,dom,opts){opts=opts||{},
this.dom=dom,this.id=id;var self=this,storage=new Storage,rendererType=opts.renderer;
if(useVML){if(!painterCtors.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");
rendererType="vml"}else rendererType&&painterCtors[rendererType]||(rendererType="canvas");
var painter=new painterCtors[rendererType](dom,storage,opts);this.storage=storage,
this.painter=painter;var handerProxy=env.node?null:new HandlerProxy(painter.getViewportRoot());
this.handler=new Handler(storage,painter,handerProxy,painter.root),
this.animation=new Animation({stage:{update:zrUtil.bind(this.flush,this)
}}),this.animation.start(),this._needsRefresh;var oldDelFromMap=storage.delFromMap,oldAddToMap=storage.addToMap;
storage.delFromMap=function(elId){var el=storage.get(elId);oldDelFromMap.call(storage,elId),
el&&el.removeSelfFromZr(self)},storage.addToMap=function(el){
oldAddToMap.call(storage,el),el.addSelfToZr(self)}};ZRender.prototype={
constructor:ZRender,getId:function(){return this.id},add:function(el){
this.storage.addRoot(el),this._needsRefresh=!0},remove:function(el){
this.storage.delRoot(el),this._needsRefresh=!0},configLayer:function(zLevel,config){
this.painter.configLayer(zLevel,config),this._needsRefresh=!0;
},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),
this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0;
},flush:function(){this._needsRefresh&&this.refreshImmediately(),
this._needsRefreshHover&&this.refreshHoverImmediately()},addHover:function(el,style){
this.painter.addHover&&(this.painter.addHover(el,style),this.refreshHover());
},removeHover:function(el){this.painter.removeHover&&(this.painter.removeHover(el),
this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),
this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0;
},refreshHoverImmediately:function(){this._needsRefreshHover=!1,
this.painter.refreshHover&&this.painter.refreshHover()},resize:function(opts){
opts=opts||{},this.painter.resize(opts.width,opts.height),this.handler.resize();
},clearAnimation:function(){this.animation.clear()},getWidth:function(){
return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight();
},pathToImage:function(e,width,height){var id=guid();return this.painter.pathToImage(id,e,width,height);
},setCursorStyle:function(cursorStyle){this.handler.setCursorStyle(cursorStyle);
},on:function(eventName,eventHandler,context){this.handler.on(eventName,eventHandler,context);
},off:function(eventName,eventHandler){this.handler.off(eventName,eventHandler);
},trigger:function(eventName,event){this.handler.trigger(eventName,event);
},clear:function(){this.storage.delRoot(),this.painter.clear();
},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),
this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,
delInstance(this.id)}},module.exports=zrender},function(module,exports,__webpack_require__){
"use strict";function makeEventPacket(eveType,target,event){return{
type:eveType,event:event,target:target,cancelBubble:!1,offsetX:event.zrX,
offsetY:event.zrY,gestureEvent:event.gestureEvent,pinchX:event.pinchX,
pinchY:event.pinchY,pinchScale:event.pinchScale,wheelDelta:event.zrDelta,
zrByTouch:event.zrByTouch}}function EmptyProxy(){}function isHover(displayable,x,y){
if(displayable[displayable.rectHover?"rectContain":"contain"](x,y)){
for(var el=displayable;el;){if(el.silent||el.clipPath&&!el.clipPath.contain(x,y))return!1;
el=el.parent}return!0}return!1}var util=__webpack_require__(4),Draggable=__webpack_require__(84),Eventful=__webpack_require__(33);
EmptyProxy.prototype.dispose=function(){};var handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Handler=function(storage,painter,proxy,painterRoot){
Eventful.call(this),this.storage=storage,this.painter=painter,
this.painterRoot=painterRoot,proxy=proxy||new EmptyProxy,this.proxy=proxy,
proxy.handler=this,this._hovered,this._lastTouchMoment,this._lastX,
this._lastY,Draggable.call(this),util.each(handlerNames,function(name){
proxy.on&&proxy.on(name,this[name],this)},this)};Handler.prototype={
constructor:Handler,mousemove:function(event){var x=event.zrX,y=event.zrY,hovered=this.findHover(x,y,null),lastHovered=this._hovered,proxy=this.proxy;
this._hovered=hovered,proxy.setCursor&&proxy.setCursor(hovered?hovered.cursor:"default"),
lastHovered&&hovered!==lastHovered&&lastHovered.__zr&&this.dispatchToElement(lastHovered,"mouseout",event),
this.dispatchToElement(hovered,"mousemove",event),hovered&&hovered!==lastHovered&&this.dispatchToElement(hovered,"mouseover",event);
},mouseout:function(event){this.dispatchToElement(this._hovered,"mouseout",event);
var innerDom,element=event.toElement||event.relatedTarget;do element=element&&element.parentNode;while(element&&9!=element.nodeType&&!(innerDom=element===this.painterRoot));
!innerDom&&this.trigger("globalout",{event:event})},resize:function(event){
this._hovered=null},dispatch:function(eventName,eventArgs){var handler=this[eventName];
handler&&handler.call(this,eventArgs)},dispose:function(){this.proxy.dispose(),
this.storage=this.proxy=this.painter=null},setCursorStyle:function(cursorStyle){
var proxy=this.proxy;proxy.setCursor&&proxy.setCursor(cursorStyle);
},dispatchToElement:function(targetEl,eventName,event){for(var eventHandler="on"+eventName,eventPacket=makeEventPacket(eventName,targetEl,event),el=targetEl;el&&(el[eventHandler]&&(eventPacket.cancelBubble=el[eventHandler].call(el,eventPacket)),
el.trigger(eventName,eventPacket),el=el.parent,!eventPacket.cancelBubble););
eventPacket.cancelBubble||(this.trigger(eventName,eventPacket),
this.painter&&this.painter.eachOtherLayer(function(layer){"function"==typeof layer[eventHandler]&&layer[eventHandler].call(layer,eventPacket),
layer.trigger&&layer.trigger(eventName,eventPacket)}))},findHover:function(x,y,exclude){
for(var list=this.storage.getDisplayList(),i=list.length-1;i>=0;i--)if(!list[i].silent&&list[i]!==exclude&&!list[i].ignore&&isHover(list[i],x,y))return list[i];
}},util.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){
Handler.prototype[name]=function(event){var hovered=this.findHover(event.zrX,event.zrY,null);
if("mousedown"===name)this._downel=hovered,this._upel=hovered;else if("mosueup"===name)this._upel=hovered;else if("click"===name&&this._downel!==this._upel)return;
this.dispatchToElement(hovered,name,event)}}),util.mixin(Handler,Eventful),
util.mixin(Handler,Draggable),module.exports=Handler},function(module,exports){
function Draggable(){this.on("mousedown",this._dragStart,this),
this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),
this.on("globalout",this._dragEnd,this)}Draggable.prototype={
constructor:Draggable,_dragStart:function(e){var draggingTarget=e.target;
draggingTarget&&draggingTarget.draggable&&(this._draggingTarget=draggingTarget,
draggingTarget.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,
this.dispatchToElement(draggingTarget,"dragstart",e.event))},
_drag:function(e){var draggingTarget=this._draggingTarget;if(draggingTarget){
var x=e.offsetX,y=e.offsetY,dx=x-this._x,dy=y-this._y;this._x=x,
this._y=y,draggingTarget.drift(dx,dy,e),this.dispatchToElement(draggingTarget,"drag",e.event);
var dropTarget=this.findHover(x,y,draggingTarget),lastDropTarget=this._dropTarget;
this._dropTarget=dropTarget,draggingTarget!==dropTarget&&(lastDropTarget&&dropTarget!==lastDropTarget&&this.dispatchToElement(lastDropTarget,"dragleave",e.event),
dropTarget&&dropTarget!==lastDropTarget&&this.dispatchToElement(dropTarget,"dragenter",e.event));
}},_dragEnd:function(e){var draggingTarget=this._draggingTarget;
draggingTarget&&(draggingTarget.dragging=!1),this.dispatchToElement(draggingTarget,"dragend",e.event),
this._dropTarget&&this.dispatchToElement(this._dropTarget,"drop",e.event),
this._draggingTarget=null,this._dropTarget=null}},module.exports=Draggable;
},function(module,exports,__webpack_require__){"use strict";function shapeCompareFunc(a,b){
return a.zlevel===b.zlevel?a.z===b.z?a.z2-b.z2:a.z-b.z:a.zlevel-b.zlevel;
}var util=__webpack_require__(4),env=__webpack_require__(2),Group=__webpack_require__(30),timsort=__webpack_require__(86),Storage=function(){
this._elements={},this._roots=[],this._displayList=[],this._displayListLen=0;
};Storage.prototype={constructor:Storage,traverse:function(cb,context){
for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(cb,context);
},getDisplayList:function(update,includeIgnore){return includeIgnore=includeIgnore||!1,
update&&this.updateDisplayList(includeIgnore),this._displayList;
},updateDisplayList:function(includeIgnore){this._displayListLen=0;
for(var roots=this._roots,displayList=this._displayList,i=0,len=roots.length;i<len;i++)this._updateAndAddDisplayable(roots[i],null,includeIgnore);
displayList.length=this._displayListLen,env.canvasSupported&&timsort(displayList,shapeCompareFunc);
},_updateAndAddDisplayable:function(el,clipPaths,includeIgnore){
if(!el.ignore||includeIgnore){el.beforeUpdate(),el.__dirty&&el.update(),
el.afterUpdate();var userSetClipPath=el.clipPath;if(userSetClipPath){
clipPaths=clipPaths?clipPaths.slice():[];for(var currentClipPath=userSetClipPath,parentClipPath=el;currentClipPath;)currentClipPath.parent=parentClipPath,
currentClipPath.updateTransform(),clipPaths.push(currentClipPath),
parentClipPath=currentClipPath,currentClipPath=currentClipPath.clipPath;
}if(el.isGroup){for(var children=el._children,i=0;i<children.length;i++){
var child=children[i];el.__dirty&&(child.__dirty=!0),this._updateAndAddDisplayable(child,clipPaths,includeIgnore);
}el.__dirty=!1}else el.__clipPaths=clipPaths,this._displayList[this._displayListLen++]=el;
}},addRoot:function(el){this._elements[el.id]||(el instanceof Group&&el.addChildrenToStorage(this),
this.addToMap(el),this._roots.push(el))},delRoot:function(elId){
if(null==elId){for(var i=0;i<this._roots.length;i++){var root=this._roots[i];
root instanceof Group&&root.delChildrenFromStorage(this)}return this._elements={},
this._roots=[],this._displayList=[],void(this._displayListLen=0);
}if(elId instanceof Array)for(var i=0,l=elId.length;i<l;i++)this.delRoot(elId[i]);else{
var el;el="string"==typeof elId?this._elements[elId]:elId;var idx=util.indexOf(this._roots,el);
idx>=0&&(this.delFromMap(el.id),this._roots.splice(idx,1),el instanceof Group&&el.delChildrenFromStorage(this));
}},addToMap:function(el){return el instanceof Group&&(el.__storage=this),
el.dirty(!1),this._elements[el.id]=el,this},get:function(elId){
return this._elements[elId]},delFromMap:function(elId){var elements=this._elements,el=elements[elId];
return el&&(delete elements[elId],el instanceof Group&&(el.__storage=null)),
this},dispose:function(){this._elements=this._renderList=this._roots=null;
},displayableSortFunc:shapeCompareFunc},module.exports=Storage;
},function(module,exports){function minRunLength(n){for(var r=0;n>=DEFAULT_MIN_MERGE;)r|=1&n,
n>>=1;return n+r}function makeAscendingRun(array,lo,hi,compare){
var runHi=lo+1;if(runHi===hi)return 1;if(compare(array[runHi++],array[lo])<0){
for(;runHi<hi&&compare(array[runHi],array[runHi-1])<0;)runHi++;
reverseRun(array,lo,runHi)}else for(;runHi<hi&&compare(array[runHi],array[runHi-1])>=0;)runHi++;
return runHi-lo}function reverseRun(array,lo,hi){for(hi--;lo<hi;){
var t=array[lo];array[lo++]=array[hi],array[hi--]=t}}function binaryInsertionSort(array,lo,hi,start,compare){
for(start===lo&&start++;start<hi;start++){for(var mid,pivot=array[start],left=lo,right=start;left<right;)mid=left+right>>>1,
compare(pivot,array[mid])<0?right=mid:left=mid+1;var n=start-left;
switch(n){case 3:array[left+3]=array[left+2];case 2:array[left+2]=array[left+1];
case 1:array[left+1]=array[left];break;default:for(;n>0;)array[left+n]=array[left+n-1],
n--}array[left]=pivot}}function gallopLeft(value,array,start,length,hint,compare){
var lastOffset=0,maxOffset=0,offset=1;if(compare(value,array[start+hint])>0){
for(maxOffset=length-hint;offset<maxOffset&&compare(value,array[start+hint+offset])>0;)lastOffset=offset,
offset=(offset<<1)+1,offset<=0&&(offset=maxOffset);offset>maxOffset&&(offset=maxOffset),
lastOffset+=hint,offset+=hint}else{for(maxOffset=hint+1;offset<maxOffset&&compare(value,array[start+hint-offset])<=0;)lastOffset=offset,
offset=(offset<<1)+1,offset<=0&&(offset=maxOffset);offset>maxOffset&&(offset=maxOffset);
var tmp=lastOffset;lastOffset=hint-offset,offset=hint-tmp}for(lastOffset++;lastOffset<offset;){
var m=lastOffset+(offset-lastOffset>>>1);compare(value,array[start+m])>0?lastOffset=m+1:offset=m;
}return offset}function gallopRight(value,array,start,length,hint,compare){
var lastOffset=0,maxOffset=0,offset=1;if(compare(value,array[start+hint])<0){
for(maxOffset=hint+1;offset<maxOffset&&compare(value,array[start+hint-offset])<0;)lastOffset=offset,
offset=(offset<<1)+1,offset<=0&&(offset=maxOffset);offset>maxOffset&&(offset=maxOffset);
var tmp=lastOffset;lastOffset=hint-offset,offset=hint-tmp}else{
for(maxOffset=length-hint;offset<maxOffset&&compare(value,array[start+hint+offset])>=0;)lastOffset=offset,
offset=(offset<<1)+1,offset<=0&&(offset=maxOffset);offset>maxOffset&&(offset=maxOffset),
lastOffset+=hint,offset+=hint}for(lastOffset++;lastOffset<offset;){
var m=lastOffset+(offset-lastOffset>>>1);compare(value,array[start+m])<0?offset=m:lastOffset=m+1;
}return offset}function TimSort(array,compare){function pushRun(_runStart,_runLength){
runStart[stackSize]=_runStart,runLength[stackSize]=_runLength,
stackSize+=1}function mergeRuns(){for(;stackSize>1;){var n=stackSize-2;
if(n>=1&&runLength[n-1]<=runLength[n]+runLength[n+1]||n>=2&&runLength[n-2]<=runLength[n]+runLength[n-1])runLength[n-1]<runLength[n+1]&&n--;else if(runLength[n]>runLength[n+1])break;
mergeAt(n)}}function forceMergeRuns(){for(;stackSize>1;){var n=stackSize-2;
n>0&&runLength[n-1]<runLength[n+1]&&n--,mergeAt(n)}}function mergeAt(i){
var start1=runStart[i],length1=runLength[i],start2=runStart[i+1],length2=runLength[i+1];
runLength[i]=length1+length2,i===stackSize-3&&(runStart[i+1]=runStart[i+2],
runLength[i+1]=runLength[i+2]),stackSize--;var k=gallopRight(array[start2],array,start1,length1,0,compare);
start1+=k,length1-=k,0!==length1&&(length2=gallopLeft(array[start1+length1-1],array,start2,length2,length2-1,compare),
0!==length2&&(length1<=length2?mergeLow(start1,length1,start2,length2):mergeHigh(start1,length1,start2,length2)));
}function mergeLow(start1,length1,start2,length2){var i=0;for(i=0;i<length1;i++)tmp[i]=array[start1+i];
var cursor1=0,cursor2=start2,dest=start1;if(array[dest++]=array[cursor2++],
0!==--length2){if(1===length1){for(i=0;i<length2;i++)array[dest+i]=array[cursor2+i];
return void(array[dest+length2]=tmp[cursor1])}for(var count1,count2,exit,_minGallop=minGallop;;){
count1=0,count2=0,exit=!1;do if(compare(array[cursor2],tmp[cursor1])<0){
if(array[dest++]=array[cursor2++],count2++,count1=0,0===--length2){
exit=!0;break}}else if(array[dest++]=tmp[cursor1++],count1++,
count2=0,1===--length1){exit=!0;break}while((count1|count2)<_minGallop);
if(exit)break;do{if(count1=gallopRight(array[cursor2],tmp,cursor1,length1,0,compare),
0!==count1){for(i=0;i<count1;i++)array[dest+i]=tmp[cursor1+i];
if(dest+=count1,cursor1+=count1,length1-=count1,length1<=1){exit=!0;
break}}if(array[dest++]=array[cursor2++],0===--length2){exit=!0;
break}if(count2=gallopLeft(tmp[cursor1],array,cursor2,length2,0,compare),
0!==count2){for(i=0;i<count2;i++)array[dest+i]=array[cursor2+i];
if(dest+=count2,cursor2+=count2,length2-=count2,0===length2){
exit=!0;break}}if(array[dest++]=tmp[cursor1++],1===--length1){
exit=!0;break}_minGallop--}while(count1>=DEFAULT_MIN_GALLOPING||count2>=DEFAULT_MIN_GALLOPING);
if(exit)break;_minGallop<0&&(_minGallop=0),_minGallop+=2}if(minGallop=_minGallop,
minGallop<1&&(minGallop=1),1===length1){for(i=0;i<length2;i++)array[dest+i]=array[cursor2+i];
array[dest+length2]=tmp[cursor1]}else{if(0===length1)throw new Error;
for(i=0;i<length1;i++)array[dest+i]=tmp[cursor1+i]}}else for(i=0;i<length1;i++)array[dest+i]=tmp[cursor1+i];
}function mergeHigh(start1,length1,start2,length2){var i=0;for(i=0;i<length2;i++)tmp[i]=array[start2+i];
var cursor1=start1+length1-1,cursor2=length2-1,dest=start2+length2-1,customCursor=0,customDest=0;
if(array[dest--]=array[cursor1--],0!==--length1){if(1===length2){
for(dest-=length1,cursor1-=length1,customDest=dest+1,customCursor=cursor1+1,
i=length1-1;i>=0;i--)array[customDest+i]=array[customCursor+i];
return void(array[dest]=tmp[cursor2])}for(var _minGallop=minGallop;;){
var count1=0,count2=0,exit=!1;do if(compare(tmp[cursor2],array[cursor1])<0){
if(array[dest--]=array[cursor1--],count1++,count2=0,0===--length1){
exit=!0;break}}else if(array[dest--]=tmp[cursor2--],count2++,
count1=0,1===--length2){exit=!0;break}while((count1|count2)<_minGallop);
if(exit)break;do{if(count1=length1-gallopRight(tmp[cursor2],array,start1,length1,length1-1,compare),
0!==count1){for(dest-=count1,cursor1-=count1,length1-=count1,
customDest=dest+1,customCursor=cursor1+1,i=count1-1;i>=0;i--)array[customDest+i]=array[customCursor+i];
if(0===length1){exit=!0;break}}if(array[dest--]=tmp[cursor2--],
1===--length2){exit=!0;break}if(count2=length2-gallopLeft(array[cursor1],tmp,0,length2,length2-1,compare),
0!==count2){for(dest-=count2,cursor2-=count2,length2-=count2,
customDest=dest+1,customCursor=cursor2+1,i=0;i<count2;i++)array[customDest+i]=tmp[customCursor+i];
if(length2<=1){exit=!0;break}}if(array[dest--]=array[cursor1--],
0===--length1){exit=!0;break}_minGallop--}while(count1>=DEFAULT_MIN_GALLOPING||count2>=DEFAULT_MIN_GALLOPING);
if(exit)break;_minGallop<0&&(_minGallop=0),_minGallop+=2}if(minGallop=_minGallop,
minGallop<1&&(minGallop=1),1===length2){for(dest-=length1,cursor1-=length1,
customDest=dest+1,customCursor=cursor1+1,i=length1-1;i>=0;i--)array[customDest+i]=array[customCursor+i];
array[dest]=tmp[cursor2]}else{if(0===length2)throw new Error;for(customCursor=dest-(length2-1),
i=0;i<length2;i++)array[customCursor+i]=tmp[i]}}else for(customCursor=dest-(length2-1),
i=0;i<length2;i++)array[customCursor+i]=tmp[i]}var runStart,runLength,minGallop=DEFAULT_MIN_GALLOPING,length=0,tmpStorageLength=DEFAULT_TMP_STORAGE_LENGTH,stackLength=0,stackSize=0;
length=array.length,length<2*DEFAULT_TMP_STORAGE_LENGTH&&(tmpStorageLength=length>>>1);
var tmp=[];stackLength=length<120?5:length<1542?10:length<119151?19:40,
runStart=[],runLength=[],this.mergeRuns=mergeRuns,this.forceMergeRuns=forceMergeRuns,
this.pushRun=pushRun}function sort(array,compare,lo,hi){lo||(lo=0),
hi||(hi=array.length);var remaining=hi-lo;if(!(remaining<2)){
var runLength=0;if(remaining<DEFAULT_MIN_MERGE)return runLength=makeAscendingRun(array,lo,hi,compare),
void binaryInsertionSort(array,lo,hi,lo+runLength,compare);var ts=new TimSort(array,compare),minRun=minRunLength(remaining);
do{if(runLength=makeAscendingRun(array,lo,hi,compare),runLength<minRun){
var force=remaining;force>minRun&&(force=minRun),binaryInsertionSort(array,lo,lo+force,lo+runLength,compare),
runLength=force}ts.pushRun(lo,runLength),ts.mergeRuns(),remaining-=runLength,
lo+=runLength}while(0!==remaining);ts.forceMergeRuns()}}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7,DEFAULT_TMP_STORAGE_LENGTH=256;
module.exports=sort},function(module,exports,__webpack_require__){
"use strict";var util=__webpack_require__(4),Dispatcher=__webpack_require__(88).Dispatcher,requestAnimationFrame=__webpack_require__(89),Animator=__webpack_require__(36),Animation=function(options){
options=options||{},this.stage=options.stage||{},this.onframe=options.onframe||function(){},
this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,
this._paused=!1,Dispatcher.call(this)};Animation.prototype={constructor:Animation,
addClip:function(clip){this._clips.push(clip)},addAnimator:function(animator){
animator.animation=this;for(var clips=animator.getClips(),i=0;i<clips.length;i++)this.addClip(clips[i]);
},removeClip:function(clip){var idx=util.indexOf(this._clips,clip);
idx>=0&&this._clips.splice(idx,1)},removeAnimator:function(animator){
for(var clips=animator.getClips(),i=0;i<clips.length;i++)this.removeClip(clips[i]);
animator.animation=null},_update:function(){for(var time=(new Date).getTime()-this._pausedTime,delta=time-this._time,clips=this._clips,len=clips.length,deferredEvents=[],deferredClips=[],i=0;i<len;i++){
var clip=clips[i],e=clip.step(time);e&&(deferredEvents.push(e),
deferredClips.push(clip))}for(var i=0;i<len;)clips[i]._needsRemove?(clips[i]=clips[len-1],
clips.pop(),len--):i++;len=deferredEvents.length;for(var i=0;i<len;i++)deferredClips[i].fire(deferredEvents[i]);
this._time=time,this.onframe(delta),this.trigger("frame",delta),
this.stage.update&&this.stage.update()},_startLoop:function(){
function step(){self._running&&(requestAnimationFrame(step),!self._paused&&self._update());
}var self=this;this._running=!0,requestAnimationFrame(step)},
start:function(){this._time=(new Date).getTime(),this._pausedTime=0,
this._startLoop()},stop:function(){this._running=!1},pause:function(){
this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0);
},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,
this._paused=!1)},clear:function(){this._clips=[]},animate:function(target,options){
options=options||{};var animator=new Animator(target,options.loop,options.getter,options.setter);
return this.addAnimator(animator),animator}},util.mixin(Animation,Dispatcher),
module.exports=Animation},function(module,exports,__webpack_require__){
"use strict";function getBoundingClientRect(el){return el.getBoundingClientRect?el.getBoundingClientRect():{
left:0,top:0}}function clientToLocal(el,e,out,calculate){return out=out||{},
calculate||!env.canvasSupported?defaultGetZrXY(el,e,out):env.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(out.zrX=e.layerX,
out.zrY=e.layerY):null!=e.offsetX?(out.zrX=e.offsetX,out.zrY=e.offsetY):defaultGetZrXY(el,e,out),
out}function defaultGetZrXY(el,e,out){var box=getBoundingClientRect(el);
out.zrX=e.clientX-box.left,out.zrY=e.clientY-box.top}function normalizeEvent(el,e,calculate){
if(e=e||window.event,null!=e.zrX)return e;var eventType=e.type,isTouch=eventType&&eventType.indexOf("touch")>=0;
if(isTouch){var touch="touchend"!=eventType?e.targetTouches[0]:e.changedTouches[0];
touch&&clientToLocal(el,touch,e,calculate)}else clientToLocal(el,e,e,calculate),
e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;return e;
}function addEventListener(el,name,handler){isDomLevel2?el.addEventListener(name,handler):el.attachEvent("on"+name,handler);
}function removeEventListener(el,name,handler){isDomLevel2?el.removeEventListener(name,handler):el.detachEvent("on"+name,handler);
}var Eventful=__webpack_require__(33),env=__webpack_require__(2),isDomLevel2="undefined"!=typeof window&&!!window.addEventListener,stop=isDomLevel2?function(e){
e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){
e.returnValue=!1,e.cancelBubble=!0};module.exports={clientToLocal:clientToLocal,
normalizeEvent:normalizeEvent,addEventListener:addEventListener,
removeEventListener:removeEventListener,stop:stop,Dispatcher:Eventful
}},function(module,exports){module.exports="undefined"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(func){
setTimeout(func,16)}},function(module,exports,__webpack_require__){
function eventNameFix(name){return"mousewheel"===name&&env.browser.firefox?"DOMMouseScroll":name;
}function processGesture(proxy,event,stage){var gestureMgr=proxy._gestureMgr;
"start"===stage&&gestureMgr.clear();var gestureInfo=gestureMgr.recognize(event,proxy.handler.findHover(event.zrX,event.zrY,null),proxy.dom);
if("end"===stage&&gestureMgr.clear(),gestureInfo){var type=gestureInfo.type;
event.gestureEvent=type,proxy.handler.dispatchToElement(gestureInfo.target,type,gestureInfo.event);
}}function setTouchTimer(instance){instance._touching=!0,clearTimeout(instance._touchTimer),
instance._touchTimer=setTimeout(function(){instance._touching=!1;
},700)}function isPointerFromTouch(event){var pointerType=event.pointerType;
return"pen"===pointerType||"touch"===pointerType}function initDomHandler(instance){
function makeMouseHandler(fn,instance){return function(){if(!instance._touching)return fn.apply(instance,arguments);
}}zrUtil.each(touchHandlerNames,function(name){instance._handlers[name]=zrUtil.bind(domHandlers[name],instance);
}),zrUtil.each(pointerHandlerNames,function(name){instance._handlers[name]=zrUtil.bind(domHandlers[name],instance);
}),zrUtil.each(mouseHandlerNames,function(name){instance._handlers[name]=makeMouseHandler(domHandlers[name],instance);
})}function HandlerDomProxy(dom){function mountHandlers(handlerNames,instance){
zrUtil.each(handlerNames,function(name){addEventListener(dom,eventNameFix(name),instance._handlers[name]);
},instance)}Eventful.call(this),this.dom=dom,this._touching=!1,
this._touchTimer,this._gestureMgr=new GestureMgr,this._handlers={},
initDomHandler(this),env.pointerEventsSupported?mountHandlers(pointerHandlerNames,this):(env.touchEventsSupported&&mountHandlers(touchHandlerNames,this),
mountHandlers(mouseHandlerNames,this))}var eventTool=__webpack_require__(88),zrUtil=__webpack_require__(4),Eventful=__webpack_require__(33),env=__webpack_require__(2),GestureMgr=__webpack_require__(91),addEventListener=eventTool.addEventListener,removeEventListener=eventTool.removeEventListener,normalizeEvent=eventTool.normalizeEvent,TOUCH_CLICK_DELAY=300,mouseHandlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touchHandlerNames=["touchstart","touchend","touchmove"],pointerEventNames={
pointerdown:1,pointerup:1,pointermove:1,pointerout:1},pointerHandlerNames=zrUtil.map(mouseHandlerNames,function(name){
var nm=name.replace("mouse","pointer");return pointerEventNames[nm]?nm:name;
}),domHandlers={mousemove:function(event){event=normalizeEvent(this.dom,event),
this.trigger("mousemove",event)},mouseout:function(event){event=normalizeEvent(this.dom,event);
var element=event.toElement||event.relatedTarget;if(element!=this.dom)for(;element&&9!=element.nodeType;){
if(element===this.dom)return;element=element.parentNode}this.trigger("mouseout",event);
},touchstart:function(event){event=normalizeEvent(this.dom,event),
event.zrByTouch=!0,this._lastTouchMoment=new Date,processGesture(this,event,"start"),
domHandlers.mousemove.call(this,event),domHandlers.mousedown.call(this,event),
setTouchTimer(this)},touchmove:function(event){event=normalizeEvent(this.dom,event),
event.zrByTouch=!0,processGesture(this,event,"change"),domHandlers.mousemove.call(this,event),
setTouchTimer(this)},touchend:function(event){event=normalizeEvent(this.dom,event),
event.zrByTouch=!0,processGesture(this,event,"end"),domHandlers.mouseup.call(this,event),
+new Date-this._lastTouchMoment<TOUCH_CLICK_DELAY&&domHandlers.click.call(this,event),
setTouchTimer(this)},pointerdown:function(event){domHandlers.mousedown.call(this,event);
},pointermove:function(event){isPointerFromTouch(event)||domHandlers.mousemove.call(this,event);
},pointerup:function(event){domHandlers.mouseup.call(this,event);
},pointerout:function(event){isPointerFromTouch(event)||domHandlers.mouseout.call(this,event);
}};zrUtil.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){
domHandlers[name]=function(event){event=normalizeEvent(this.dom,event),
this.trigger(name,event)}});var handlerDomProxyProto=HandlerDomProxy.prototype;
handlerDomProxyProto.dispose=function(){for(var handlerNames=mouseHandlerNames.concat(touchHandlerNames),i=0;i<handlerNames.length;i++){
var name=handlerNames[i];removeEventListener(this.dom,eventNameFix(name),this._handlers[name]);
}},handlerDomProxyProto.setCursor=function(cursorStyle){this.dom.style.cursor=cursorStyle||"default";
},zrUtil.mixin(HandlerDomProxy,Eventful),module.exports=HandlerDomProxy;
},function(module,exports,__webpack_require__){"use strict";function dist(pointPair){
var dx=pointPair[1][0]-pointPair[0][0],dy=pointPair[1][1]-pointPair[0][1];
return Math.sqrt(dx*dx+dy*dy)}function center(pointPair){return[(pointPair[0][0]+pointPair[1][0])/2,(pointPair[0][1]+pointPair[1][1])/2];
}var eventUtil=__webpack_require__(88),GestureMgr=function(){
this._track=[]};GestureMgr.prototype={constructor:GestureMgr,
recognize:function(event,target,root){return this._doTrack(event,target,root),
this._recognize(event)},clear:function(){return this._track.length=0,
this},_doTrack:function(event,target,root){var touches=event.touches;
if(touches){for(var trackItem={points:[],touches:[],target:target,
event:event},i=0,len=touches.length;i<len;i++){var touch=touches[i],pos=eventUtil.clientToLocal(root,touch,{});
trackItem.points.push([pos.zrX,pos.zrY]),trackItem.touches.push(touch);
}this._track.push(trackItem)}},_recognize:function(event){for(var eventName in recognizers)if(recognizers.hasOwnProperty(eventName)){
var gestureInfo=recognizers[eventName](this._track,event);if(gestureInfo)return gestureInfo;
}}};var recognizers={pinch:function(track,event){var trackLen=track.length;
if(trackLen){var pinchEnd=(track[trackLen-1]||{}).points,pinchPre=(track[trackLen-2]||{}).points||pinchEnd;
if(pinchPre&&pinchPre.length>1&&pinchEnd&&pinchEnd.length>1){
var pinchScale=dist(pinchEnd)/dist(pinchPre);!isFinite(pinchScale)&&(pinchScale=1),
event.pinchScale=pinchScale;var pinchCenter=center(pinchEnd);return event.pinchX=pinchCenter[0],
event.pinchY=pinchCenter[1],{type:"pinch",target:track[0].target,
event:event}}}}};module.exports=GestureMgr},function(module,exports,__webpack_require__){
"use strict";function parseInt10(val){return parseInt(val,10);
}function isLayerValid(layer){return!!layer&&(!!layer.isBuildin||"function"==typeof layer.resize&&"function"==typeof layer.refresh);
}function preProcessLayer(layer){layer.__unusedCount++}function postProcessLayer(layer){
1==layer.__unusedCount&&layer.clear()}function isDisplayableCulled(el,width,height){
return tmpRect.copy(el.getBoundingRect()),el.transform&&tmpRect.applyTransform(el.transform),
viewRect.width=width,viewRect.height=height,!tmpRect.intersect(viewRect);
}function isClipPathChanged(clipPaths,prevClipPaths){if(clipPaths==prevClipPaths)return!1;
if(!clipPaths||!prevClipPaths||clipPaths.length!==prevClipPaths.length)return!0;
for(var i=0;i<clipPaths.length;i++)if(clipPaths[i]!==prevClipPaths[i])return!0;
}function doClip(clipPaths,ctx){for(var i=0;i<clipPaths.length;i++){
var clipPath=clipPaths[i],path=clipPath.path;clipPath.setTransform(ctx),
path.beginPath(ctx),clipPath.buildPath(path,clipPath.shape),ctx.clip(),
clipPath.restoreTransform(ctx)}}function createRoot(width,height){
var domRoot=document.createElement("div");return domRoot.style.cssText=["position:relative","overflow:hidden","width:"+width+"px","height:"+height+"px","padding:0","margin:0","border-width:0"].join(";")+";",
domRoot}var config=__webpack_require__(41),util=__webpack_require__(4),log=__webpack_require__(40),BoundingRect=__webpack_require__(9),timsort=__webpack_require__(86),Layer=__webpack_require__(93),requestAnimationFrame=__webpack_require__(89),MAX_PROGRESSIVE_LAYER_NUMBER=5,tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0),Painter=function(root,storage,opts){
var singleCanvas=!root.nodeName||"CANVAS"===root.nodeName.toUpperCase();
this._opts=opts=util.extend({},opts||{}),this.dpr=opts.devicePixelRatio||config.devicePixelRatio,
this._singleCanvas=singleCanvas,this.root=root;var rootStyle=root.style;
rootStyle&&(rootStyle["-webkit-tap-highlight-color"]="transparent",
rootStyle["-webkit-user-select"]=rootStyle["user-select"]=rootStyle["-webkit-touch-callout"]="none",
root.innerHTML=""),this.storage=storage;var zlevelList=this._zlevelList=[],layers=this._layers={};
if(this._layerConfig={},singleCanvas){var width=root.width,height=root.height;
this._width=width,this._height=height;var mainLayer=new Layer(root,this,1);
mainLayer.initContext(),layers[0]=mainLayer,zlevelList.push(0),
this._domRoot=root}else{this._width=this._getSize(0),this._height=this._getSize(1);
var domRoot=this._domRoot=createRoot(this._width,this._height);
root.appendChild(domRoot)}this.pathToImage=this._createPathToImage(),
this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[];
};Painter.prototype={constructor:Painter,isSingleCanvas:function(){
return this._singleCanvas},getViewportRoot:function(){return this._domRoot;
},refresh:function(paintAll){var list=this.storage.getDisplayList(!0),zlevelList=this._zlevelList;
this._paintList(list,paintAll);for(var i=0;i<zlevelList.length;i++){
var z=zlevelList[i],layer=this._layers[z];!layer.isBuildin&&layer.refresh&&layer.refresh();
}return this.refreshHover(),this._progressiveLayers.length&&this._startProgessive(),
this},addHover:function(el,hoverStyle){if(!el.__hoverMir){var elMirror=new el.constructor({
style:el.style,shape:el.shape});elMirror.__from=el,el.__hoverMir=elMirror,
elMirror.setStyle(hoverStyle),this._hoverElements.push(elMirror);
}},removeHover:function(el){var elMirror=el.__hoverMir,hoverElements=this._hoverElements,idx=util.indexOf(hoverElements,elMirror);
idx>=0&&hoverElements.splice(idx,1),el.__hoverMir=null},clearHover:function(el){
for(var hoverElements=this._hoverElements,i=0;i<hoverElements.length;i++){
var from=hoverElements[i].__from;from&&(from.__hoverMir=null);
}hoverElements.length=0},refreshHover:function(){var hoverElements=this._hoverElements,len=hoverElements.length,hoverLayer=this._hoverlayer;
if(hoverLayer&&hoverLayer.clear(),len){timsort(hoverElements,this.storage.displayableSortFunc),
hoverLayer||(hoverLayer=this._hoverlayer=this.getLayer(1e5));var scope={};
hoverLayer.ctx.save();for(var i=0;i<len;){var el=hoverElements[i],originalEl=el.__from;
originalEl&&originalEl.__zr?(i++,originalEl.invisible||(el.transform=originalEl.transform,
el.invTransform=originalEl.invTransform,el.__clipPaths=originalEl.__clipPaths,
this._doPaintEl(el,hoverLayer,!0,scope))):(hoverElements.splice(i,1),
originalEl.__hoverMir=null,len--)}hoverLayer.ctx.restore()}},
_startProgessive:function(){function step(){token===self._progressiveToken&&self.storage&&(self._doPaintList(self.storage.getDisplayList()),
self._furtherProgressive?(self._progress++,requestAnimationFrame(step)):self._progressiveToken=-1);
}var self=this;if(self._furtherProgressive){var token=self._progressiveToken=+new Date;
self._progress++,requestAnimationFrame(step)}},_clearProgressive:function(){
this._progressiveToken=-1,this._progress=0,util.each(this._progressiveLayers,function(layer){
layer.__dirty&&layer.clear()})},_paintList:function(list,paintAll){
null==paintAll&&(paintAll=!1),this._updateLayerStatus(list),this._clearProgressive(),
this.eachBuildinLayer(preProcessLayer),this._doPaintList(list,paintAll),
this.eachBuildinLayer(postProcessLayer)},_doPaintList:function(list,paintAll){
function flushProgressiveLayer(layer){var dpr=ctx.dpr||1;ctx.save(),
ctx.globalAlpha=1,ctx.shadowBlur=0,currentLayer.__dirty=!0,ctx.setTransform(1,0,0,1,0,0),
ctx.drawImage(layer.dom,0,0,width*dpr,height*dpr),ctx.restore();
}for(var currentLayer,currentZLevel,ctx,scope,currentProgressiveLayer,layerProgress,progressiveLayerIdx=0,width=this._width,height=this._height,frame=this._progress,i=0,l=list.length;i<l;i++){
var el=list[i],elZLevel=this._singleCanvas?0:el.zlevel,elFrame=el.__frame;
if(elFrame<0&&currentProgressiveLayer&&(flushProgressiveLayer(currentProgressiveLayer),
currentProgressiveLayer=null),currentZLevel!==elZLevel&&(ctx&&ctx.restore(),
scope={},currentZLevel=elZLevel,currentLayer=this.getLayer(currentZLevel),
currentLayer.isBuildin||log("ZLevel "+currentZLevel+" has been used by unkown layer "+currentLayer.id),
ctx=currentLayer.ctx,ctx.save(),currentLayer.__unusedCount=0,
(currentLayer.__dirty||paintAll)&&currentLayer.clear()),currentLayer.__dirty||paintAll){
if(elFrame>=0){if(!currentProgressiveLayer){if(currentProgressiveLayer=this._progressiveLayers[Math.min(progressiveLayerIdx++,MAX_PROGRESSIVE_LAYER_NUMBER-1)],
currentProgressiveLayer.ctx.save(),currentProgressiveLayer.renderScope={},
currentProgressiveLayer&&currentProgressiveLayer.__progress>currentProgressiveLayer.__maxProgress){
i=currentProgressiveLayer.__nextIdxNotProg-1;continue}layerProgress=currentProgressiveLayer.__progress,
currentProgressiveLayer.__dirty||(frame=layerProgress),currentProgressiveLayer.__progress=frame+1;
}elFrame===frame&&this._doPaintEl(el,currentProgressiveLayer,!0,currentProgressiveLayer.renderScope);
}else this._doPaintEl(el,currentLayer,paintAll,scope);el.__dirty=!1;
}}currentProgressiveLayer&&flushProgressiveLayer(currentProgressiveLayer),
ctx&&ctx.restore(),this._furtherProgressive=!1,util.each(this._progressiveLayers,function(layer){
layer.__maxProgress>=layer.__progress&&(this._furtherProgressive=!0);
},this)},_doPaintEl:function(el,currentLayer,forcePaint,scope){
var ctx=currentLayer.ctx,m=el.transform;if((currentLayer.__dirty||forcePaint)&&!el.invisible&&0!==el.style.opacity&&(!m||m[0]||m[3])&&(!el.culling||!isDisplayableCulled(el,this._width,this._height))){
var clipPaths=el.__clipPaths;(scope.prevClipLayer!==currentLayer||isClipPathChanged(clipPaths,scope.prevElClipPaths))&&(scope.prevElClipPaths&&(scope.prevClipLayer.ctx.restore(),
scope.prevClipLayer=scope.prevElClipPaths=null,scope.prevEl=null),
clipPaths&&(ctx.save(),doClip(clipPaths,ctx),scope.prevClipLayer=currentLayer,
scope.prevElClipPaths=clipPaths)),el.beforeBrush&&el.beforeBrush(ctx),
el.brush(ctx,scope.prevEl||null),scope.prevEl=el,el.afterBrush&&el.afterBrush(ctx);
}},getLayer:function(zlevel){if(this._singleCanvas)return this._layers[0];
var layer=this._layers[zlevel];return layer||(layer=new Layer("zr_"+zlevel,this,this.dpr),
layer.isBuildin=!0,this._layerConfig[zlevel]&&util.merge(layer,this._layerConfig[zlevel],!0),
this.insertLayer(zlevel,layer),layer.initContext()),layer},insertLayer:function(zlevel,layer){
var layersMap=this._layers,zlevelList=this._zlevelList,len=zlevelList.length,prevLayer=null,i=-1,domRoot=this._domRoot;
if(layersMap[zlevel])return void log("ZLevel "+zlevel+" has been used already");
if(!isLayerValid(layer))return void log("Layer of zlevel "+zlevel+" is not valid");
if(len>0&&zlevel>zlevelList[0]){for(i=0;i<len-1&&!(zlevelList[i]<zlevel&&zlevelList[i+1]>zlevel);i++);
prevLayer=layersMap[zlevelList[i]]}if(zlevelList.splice(i+1,0,zlevel),
prevLayer){var prevDom=prevLayer.dom;prevDom.nextSibling?domRoot.insertBefore(layer.dom,prevDom.nextSibling):domRoot.appendChild(layer.dom);
}else domRoot.firstChild?domRoot.insertBefore(layer.dom,domRoot.firstChild):domRoot.appendChild(layer.dom);
layersMap[zlevel]=layer},eachLayer:function(cb,context){var z,i,zlevelList=this._zlevelList;
for(i=0;i<zlevelList.length;i++)z=zlevelList[i],cb.call(context,this._layers[z],z);
},eachBuildinLayer:function(cb,context){var layer,z,i,zlevelList=this._zlevelList;
for(i=0;i<zlevelList.length;i++)z=zlevelList[i],layer=this._layers[z],
layer.isBuildin&&cb.call(context,layer,z)},eachOtherLayer:function(cb,context){
var layer,z,i,zlevelList=this._zlevelList;for(i=0;i<zlevelList.length;i++)z=zlevelList[i],
layer=this._layers[z],layer.isBuildin||cb.call(context,layer,z);
},getLayers:function(){return this._layers},_updateLayerStatus:function(list){
var layers=this._layers,progressiveLayers=this._progressiveLayers,elCountsLastFrame={},progressiveElCountsLastFrame={};
this.eachBuildinLayer(function(layer,z){elCountsLastFrame[z]=layer.elCount,
layer.elCount=0,layer.__dirty=!1}),util.each(progressiveLayers,function(layer,idx){
progressiveElCountsLastFrame[idx]=layer.elCount,layer.elCount=0,
layer.__dirty=!1});for(var currentProgressiveLayer,lastProgressiveKey,progressiveLayerCount=0,frameCount=0,i=0,l=list.length;i<l;i++){
var el=list[i],zlevel=this._singleCanvas?0:el.zlevel,layer=layers[zlevel],elProgress=el.progressive;
if(layer&&(layer.elCount++,layer.__dirty=layer.__dirty||el.__dirty),
elProgress>=0){lastProgressiveKey!==elProgress&&(lastProgressiveKey=elProgress,
frameCount++);var elFrame=el.__frame=frameCount-1;if(!currentProgressiveLayer){
var idx=Math.min(progressiveLayerCount,MAX_PROGRESSIVE_LAYER_NUMBER-1);
currentProgressiveLayer=progressiveLayers[idx],currentProgressiveLayer||(currentProgressiveLayer=progressiveLayers[idx]=new Layer("progressive",this,this.dpr),
currentProgressiveLayer.initContext()),currentProgressiveLayer.__maxProgress=0;
}currentProgressiveLayer.__dirty=currentProgressiveLayer.__dirty||el.__dirty,
currentProgressiveLayer.elCount++,currentProgressiveLayer.__maxProgress=Math.max(currentProgressiveLayer.__maxProgress,elFrame),
currentProgressiveLayer.__maxProgress>=currentProgressiveLayer.__progress&&(layer.__dirty=!0);
}else el.__frame=-1,currentProgressiveLayer&&(currentProgressiveLayer.__nextIdxNotProg=i,
progressiveLayerCount++,currentProgressiveLayer=null)}currentProgressiveLayer&&(progressiveLayerCount++,
currentProgressiveLayer.__nextIdxNotProg=i),this.eachBuildinLayer(function(layer,z){
elCountsLastFrame[z]!==layer.elCount&&(layer.__dirty=!0)}),progressiveLayers.length=Math.min(progressiveLayerCount,MAX_PROGRESSIVE_LAYER_NUMBER),
util.each(progressiveLayers,function(layer,idx){progressiveElCountsLastFrame[idx]!==layer.elCount&&(el.__dirty=!0),
layer.__dirty&&(layer.__progress=0)})},clear:function(){return this.eachBuildinLayer(this._clearLayer),
this},_clearLayer:function(layer){layer.clear()},configLayer:function(zlevel,config){
if(config){var layerConfig=this._layerConfig;layerConfig[zlevel]?util.merge(layerConfig[zlevel],config,!0):layerConfig[zlevel]=config;
var layer=this._layers[zlevel];layer&&util.merge(layer,layerConfig[zlevel],!0);
}},delLayer:function(zlevel){var layers=this._layers,zlevelList=this._zlevelList,layer=layers[zlevel];
layer&&(layer.dom.parentNode.removeChild(layer.dom),delete layers[zlevel],
zlevelList.splice(util.indexOf(zlevelList,zlevel),1))},resize:function(width,height){
var domRoot=this._domRoot;domRoot.style.display="none";var opts=this._opts;
if(null!=width&&(opts.width=width),null!=height&&(opts.height=height),
width=this._getSize(0),height=this._getSize(1),domRoot.style.display="",
this._width!=width||height!=this._height){domRoot.style.width=width+"px",
domRoot.style.height=height+"px";for(var id in this._layers)this._layers.hasOwnProperty(id)&&this._layers[id].resize(width,height);
util.each(this._progressiveLayers,function(layer){layer.resize(width,height);
}),this.refresh(!0)}return this._width=width,this._height=height,
this},clearLayer:function(zlevel){var layer=this._layers[zlevel];
layer&&layer.clear()},dispose:function(){this.root.innerHTML="",
this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(opts){
if(opts=opts||{},this._singleCanvas)return this._layers[0].dom;
var imageLayer=new Layer("image",this,opts.pixelRatio||this.dpr);
imageLayer.initContext(),imageLayer.clearColor=opts.backgroundColor,
imageLayer.clear();for(var displayList=this.storage.getDisplayList(!0),scope={},i=0;i<displayList.length;i++){
var el=displayList[i];this._doPaintEl(el,imageLayer,!0,scope);
}return imageLayer.dom},getWidth:function(){return this._width;
},getHeight:function(){return this._height},_getSize:function(whIdx){
var opts=this._opts,wh=["width","height"][whIdx],cwh=["clientWidth","clientHeight"][whIdx],plt=["paddingLeft","paddingTop"][whIdx],prb=["paddingRight","paddingBottom"][whIdx];
if(null!=opts[wh]&&"auto"!==opts[wh])return parseFloat(opts[wh]);
var root=this.root,stl=document.defaultView.getComputedStyle(root);
return(root[cwh]||parseInt10(stl[wh])||parseInt10(root.style[wh]))-(parseInt10(stl[plt])||0)-(parseInt10(stl[prb])||0)|0;
},_pathToImage:function(id,path,width,height,dpr){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");
canvas.width=width*dpr,canvas.height=height*dpr,ctx.clearRect(0,0,width*dpr,height*dpr);
var pathTransform={position:path.position,rotation:path.rotation,
scale:path.scale};path.position=[0,0,0],path.rotation=0,path.scale=[1,1],
path&&path.brush(ctx);var ImageShape=__webpack_require__(61),imgShape=new ImageShape({
id:id,style:{x:0,y:0,image:canvas}});return null!=pathTransform.position&&(imgShape.position=path.position=pathTransform.position),
null!=pathTransform.rotation&&(imgShape.rotation=path.rotation=pathTransform.rotation),
null!=pathTransform.scale&&(imgShape.scale=path.scale=pathTransform.scale),
imgShape},_createPathToImage:function(){var me=this;return function(id,e,width,height){
return me._pathToImage(id,e,width,height,me.dpr)}}},module.exports=Painter;
},function(module,exports,__webpack_require__){function returnFalse(){
return!1}function createDom(id,type,painter,dpr){var newDom=document.createElement(type),width=painter.getWidth(),height=painter.getHeight(),newDomStyle=newDom.style;
return newDomStyle.position="absolute",newDomStyle.left=0,newDomStyle.top=0,
newDomStyle.width=width+"px",newDomStyle.height=height+"px",newDom.width=width*dpr,
newDom.height=height*dpr,newDom.setAttribute("data-zr-dom-id",id),
newDom}var util=__webpack_require__(4),config=__webpack_require__(41),Style=__webpack_require__(47),Pattern=__webpack_require__(59),Layer=function(id,painter,dpr){
var dom;dpr=dpr||config.devicePixelRatio,"string"==typeof id?dom=createDom(id,"canvas",painter,dpr):util.isObject(id)&&(dom=id,
id=dom.id),this.id=id,this.dom=dom;var domStyle=dom.style;domStyle&&(dom.onselectstart=returnFalse,
domStyle["-webkit-user-select"]="none",domStyle["user-select"]="none",
domStyle["-webkit-touch-callout"]="none",domStyle["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",
domStyle.padding=0,domStyle.margin=0,domStyle["border-width"]=0),
this.domBack=null,this.ctxBack=null,this.painter=painter,this.config=null,
this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=dpr;
};Layer.prototype={constructor:Layer,elCount:0,__dirty:!0,initContext:function(){
this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){
var dpr=this.dpr;this.domBack=createDom("back-"+this.id,"canvas",this.painter,dpr),
this.ctxBack=this.domBack.getContext("2d"),1!=dpr&&this.ctxBack.scale(dpr,dpr);
},resize:function(width,height){var dpr=this.dpr,dom=this.dom,domStyle=dom.style,domBack=this.domBack;
domStyle.width=width+"px",domStyle.height=height+"px",dom.width=width*dpr,
dom.height=height*dpr,domBack&&(domBack.width=width*dpr,domBack.height=height*dpr,
1!=dpr&&this.ctxBack.scale(dpr,dpr))},clear:function(clearAll){
var dom=this.dom,ctx=this.ctx,width=dom.width,height=dom.height,clearColor=this.clearColor,haveMotionBLur=this.motionBlur&&!clearAll,lastFrameAlpha=this.lastFrameAlpha,dpr=this.dpr;
if(haveMotionBLur&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",
this.ctxBack.drawImage(dom,0,0,width/dpr,height/dpr)),ctx.clearRect(0,0,width,height),
clearColor){var clearColorGradientOrPattern;clearColor.colorStops?(clearColorGradientOrPattern=clearColor.__canvasGradient||Style.getGradient(ctx,clearColor,{
x:0,y:0,width:width,height:height}),clearColor.__canvasGradient=clearColorGradientOrPattern):clearColor.image&&(clearColorGradientOrPattern=Pattern.prototype.getCanvasPattern.call(clearColor,ctx)),
ctx.save(),ctx.fillStyle=clearColorGradientOrPattern||clearColor,
ctx.fillRect(0,0,width,height),ctx.restore()}if(haveMotionBLur){
var domBack=this.domBack;ctx.save(),ctx.globalAlpha=lastFrameAlpha,
ctx.drawImage(domBack,0,0,width,height),ctx.restore()}}},module.exports=Layer;
},function(module,exports,__webpack_require__){var Gradient=__webpack_require__(79);
module.exports=function(ecModel){function encodeColor(seriesModel){
var colorAccessPath=(seriesModel.visualColorAccessPath||"itemStyle.normal.color").split("."),data=seriesModel.getData(),color=seriesModel.get(colorAccessPath)||seriesModel.getColorFromPalette(seriesModel.get("name"));
data.setVisual("color",color),ecModel.isSeriesFiltered(seriesModel)||("function"!=typeof color||color instanceof Gradient||data.each(function(idx){
data.setItemVisual(idx,"color",color(seriesModel.getDataParams(idx)));
}),data.each(function(idx){var itemModel=data.getItemModel(idx),color=itemModel.get(colorAccessPath,!0);
null!=color&&data.setItemVisual(idx,"color",color)}))}ecModel.eachRawSeries(encodeColor);
}},function(module,exports,__webpack_require__){function get(opt,path){
path=path.split(",");for(var obj=opt,i=0;i<path.length&&(obj=obj&&obj[path[i]],
null!=obj);i++);return obj}function set(opt,path,val,overwrite){
path=path.split(",");for(var key,obj=opt,i=0;i<path.length-1;i++)key=path[i],
null==obj[key]&&(obj[key]={}),obj=obj[key];(overwrite||null==obj[path[i]])&&(obj[path[i]]=val);
}function compatLayoutProperties(option){each(LAYOUT_PROPERTIES,function(prop){
prop[0]in option&&!(prop[1]in option)&&(option[prop[1]]=option[prop[0]]);
})}var zrUtil=__webpack_require__(4),compatStyle=__webpack_require__(96),LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],COMPATITABLE_SERIES=["bar","boxplot","candlestick","chord","effectScatter","funnel","gauge","lines","graph","heatmap","line","map","parallel","pie","radar","sankey","scatter","treemap"],each=zrUtil.each;
module.exports=function(option){each(option.series,function(seriesOpt){
if(zrUtil.isObject(seriesOpt)){var seriesType=seriesOpt.type;if(compatStyle(seriesOpt),
"pie"!==seriesType&&"gauge"!==seriesType||null!=seriesOpt.clockWise&&(seriesOpt.clockwise=seriesOpt.clockWise),
"gauge"===seriesType){var pointerColor=get(seriesOpt,"pointer.color");
null!=pointerColor&&set(seriesOpt,"itemStyle.normal.color",pointerColor);
}for(var i=0;i<COMPATITABLE_SERIES.length;i++)if(COMPATITABLE_SERIES[i]===seriesOpt.type){
compatLayoutProperties(seriesOpt);break}}}),option.dataRange&&(option.visualMap=option.dataRange),
each(COMPATITABLE_COMPONENTS,function(componentName){var options=option[componentName];
options&&(zrUtil.isArray(options)||(options=[options]),each(options,function(option){
compatLayoutProperties(option)}))})}},function(module,exports,__webpack_require__){
function compatItemStyle(opt){var itemStyleOpt=opt&&opt.itemStyle;
itemStyleOpt&&zrUtil.each(POSSIBLE_STYLES,function(styleName){
var normalItemStyleOpt=itemStyleOpt.normal,emphasisItemStyleOpt=itemStyleOpt.emphasis;
normalItemStyleOpt&&normalItemStyleOpt[styleName]&&(opt[styleName]=opt[styleName]||{},
opt[styleName].normal?zrUtil.merge(opt[styleName].normal,normalItemStyleOpt[styleName]):opt[styleName].normal=normalItemStyleOpt[styleName],
normalItemStyleOpt[styleName]=null),emphasisItemStyleOpt&&emphasisItemStyleOpt[styleName]&&(opt[styleName]=opt[styleName]||{},
opt[styleName].emphasis?zrUtil.merge(opt[styleName].emphasis,emphasisItemStyleOpt[styleName]):opt[styleName].emphasis=emphasisItemStyleOpt[styleName],
emphasisItemStyleOpt[styleName]=null)})}var zrUtil=__webpack_require__(4),POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];
module.exports=function(seriesOpt){if(seriesOpt){compatItemStyle(seriesOpt),
compatItemStyle(seriesOpt.markPoint),compatItemStyle(seriesOpt.markLine);
var data=seriesOpt.data;if(data){for(var i=0;i<data.length;i++)compatItemStyle(data[i]);
var markPoint=seriesOpt.markPoint;if(markPoint&&markPoint.data)for(var mpData=markPoint.data,i=0;i<mpData.length;i++)compatItemStyle(mpData[i]);
var markLine=seriesOpt.markLine;if(markLine&&markLine.data)for(var mlData=markLine.data,i=0;i<mlData.length;i++)zrUtil.isArray(mlData[i])?(compatItemStyle(mlData[i][0]),
compatItemStyle(mlData[i][1])):compatItemStyle(mlData[i])}}}},function(module,exports,__webpack_require__){
var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),PI=Math.PI;
module.exports=function(api,opts){opts=opts||{},zrUtil.defaults(opts,{
text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",
zlevel:0});var mask=new graphic.Rect({style:{fill:opts.maskColor
},zlevel:opts.zlevel,z:1e4}),arc=new graphic.Arc({shape:{startAngle:-PI/2,
endAngle:-PI/2+.1,r:10},style:{stroke:opts.color,lineCap:"round",
lineWidth:5},zlevel:opts.zlevel,z:10001}),labelRect=new graphic.Rect({
style:{fill:"none",text:opts.text,textPosition:"right",textDistance:10,
textFill:opts.textColor},zlevel:opts.zlevel,z:10001});arc.animateShape(!0).when(1e3,{
endAngle:3*PI/2}).start("circularInOut"),arc.animateShape(!0).when(1e3,{
startAngle:3*PI/2}).delay(300).start("circularInOut");var group=new graphic.Group;
return group.add(arc),group.add(labelRect),group.add(mask),group.resize=function(){
var cx=api.getWidth()/2,cy=api.getHeight()/2;arc.setShape({cx:cx,
cy:cy});var r=arc.shape.r;labelRect.setShape({x:cx-r,y:cy-r,width:2*r,
height:2*r}),mask.setShape({x:0,y:0,width:api.getWidth(),height:api.getHeight()
})},group.resize(),group}},function(module,exports,__webpack_require__){
(function(global){function normalizeDimensions(dimensions){return zrUtil.isArray(dimensions)||(dimensions=[dimensions]),
dimensions}function cloneListForMapAndSample(original,excludeDimensions){
var allDimensions=original.dimensions,list=new List(zrUtil.map(allDimensions,original.getDimensionInfo,original),original.hostModel);
transferProperties(list,original);for(var storage=list._storage={},originalStorage=original._storage,i=0;i<allDimensions.length;i++){
var dim=allDimensions[i],dimStore=originalStorage[dim];zrUtil.indexOf(excludeDimensions,dim)>=0?storage[dim]=new dimStore.constructor(originalStorage[dim].length):storage[dim]=originalStorage[dim];
}return list}var UNDEFINED="undefined",globalObj="undefined"==typeof window?global:window,Float64Array=typeof globalObj.Float64Array===UNDEFINED?Array:globalObj.Float64Array,Int32Array=typeof globalObj.Int32Array===UNDEFINED?Array:globalObj.Int32Array,dataCtors={
float:Float64Array,int:Int32Array,ordinal:Array,number:Array,
time:Array},Model=__webpack_require__(12),DataDiffer=__webpack_require__(99),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),isObject=zrUtil.isObject,TRANSFERABLE_PROPERTIES=["stackedOn","hasItemOption","_nameList","_idList","_rawData"],transferProperties=function(a,b){
zrUtil.each(TRANSFERABLE_PROPERTIES.concat(b.__wrappedMethods||[]),function(propName){
b.hasOwnProperty(propName)&&(a[propName]=b[propName])}),a.__wrappedMethods=b.__wrappedMethods;
},List=function(dimensions,hostModel){dimensions=dimensions||["x","y"];
for(var dimensionInfos={},dimensionNames=[],i=0;i<dimensions.length;i++){
var dimensionName,dimensionInfo={};"string"==typeof dimensions[i]?(dimensionName=dimensions[i],
dimensionInfo={name:dimensionName,stackable:!1,type:"number"}):(dimensionInfo=dimensions[i],
dimensionName=dimensionInfo.name,dimensionInfo.type=dimensionInfo.type||"number"),
dimensionNames.push(dimensionName),dimensionInfos[dimensionName]=dimensionInfo;
}this.dimensions=dimensionNames,this._dimensionInfos=dimensionInfos,
this.hostModel=hostModel,this.dataType,this.indices=[],this._storage={},
this._nameList=[],this._idList=[],this._optionModels=[],this.stackedOn=null,
this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],
this._graphicEls=[],this._rawData,this._extent},listProto=List.prototype;
listProto.type="list",listProto.hasItemOption=!0,listProto.getDimension=function(dim){
return isNaN(dim)||(dim=this.dimensions[dim]||dim),dim},listProto.getDimensionInfo=function(dim){
return zrUtil.clone(this._dimensionInfos[this.getDimension(dim)]);
},listProto.initData=function(data,nameList,dimValueGetter){if(data=data||[],
!zrUtil.isArray(data))throw new Error("Invalid data.");this._rawData=data;
var storage=this._storage={},indices=this.indices=[],dimensions=this.dimensions,size=data.length,dimensionInfoMap=this._dimensionInfos,idList=[],nameRepeatCount={};
nameList=nameList||[];for(var i=0;i<dimensions.length;i++){var dimInfo=dimensionInfoMap[dimensions[i]],DataCtor=dataCtors[dimInfo.type];
storage[dimensions[i]]=new DataCtor(size)}var self=this;dimValueGetter||(self.hasItemOption=!1),
dimValueGetter=dimValueGetter||function(dataItem,dimName,dataIndex,dimIndex){
var value=modelUtil.getDataItemValue(dataItem);return modelUtil.isDataItemOption(dataItem)&&(self.hasItemOption=!0),
modelUtil.converDataValue(value instanceof Array?value[dimIndex]:value,dimensionInfoMap[dimName]);
};for(var idx=0;idx<data.length;idx++){for(var dataItem=data[idx],k=0;k<dimensions.length;k++){
var dim=dimensions[k],dimStorage=storage[dim];dimStorage[idx]=dimValueGetter(dataItem,dim,idx,k);
}indices.push(idx)}for(var i=0;i<data.length;i++){nameList[i]||data[i]&&null!=data[i].name&&(nameList[i]=data[i].name);
var name=nameList[i]||"",id=data[i]&&data[i].id;!id&&name&&(nameRepeatCount[name]=nameRepeatCount[name]||0,
id=name,nameRepeatCount[name]>0&&(id+="__ec__"+nameRepeatCount[name]),
nameRepeatCount[name]++),id&&(idList[i]=id)}this._nameList=nameList,
this._idList=idList},listProto.count=function(){return this.indices.length;
},listProto.get=function(dim,idx,stack){var storage=this._storage,dataIndex=this.indices[idx];
if(null==dataIndex)return NaN;var value=storage[dim]&&storage[dim][dataIndex];
if(stack){var dimensionInfo=this._dimensionInfos[dim];if(dimensionInfo&&dimensionInfo.stackable)for(var stackedOn=this.stackedOn;stackedOn;){
var stackedValue=stackedOn.get(dim,idx);(value>=0&&stackedValue>0||value<=0&&stackedValue<0)&&(value+=stackedValue),
stackedOn=stackedOn.stackedOn}}return value},listProto.getValues=function(dimensions,idx,stack){
var values=[];zrUtil.isArray(dimensions)||(stack=idx,idx=dimensions,
dimensions=this.dimensions);for(var i=0,len=dimensions.length;i<len;i++)values.push(this.get(dimensions[i],idx,stack));
return values},listProto.hasValue=function(idx){for(var dimensions=this.dimensions,dimensionInfos=this._dimensionInfos,i=0,len=dimensions.length;i<len;i++)if("ordinal"!==dimensionInfos[dimensions[i]].type&&isNaN(this.get(dimensions[i],idx)))return!1;
return!0},listProto.getDataExtent=function(dim,stack,filter){
dim=this.getDimension(dim);var dimData=this._storage[dim],dimInfo=this.getDimensionInfo(dim);
stack=dimInfo&&dimInfo.stackable&&stack;var value,dimExtent=(this._extent||(this._extent={}))[dim+!!stack];
if(dimExtent)return dimExtent;if(dimData){for(var min=1/0,max=-(1/0),i=0,len=this.count();i<len;i++)value=this.get(dim,i,stack),
filter&&!filter(value,dim,i)||(value<min&&(min=value),value>max&&(max=value));
return this._extent[dim+!!stack]=[min,max]}return[1/0,-(1/0)];
},listProto.getSum=function(dim,stack){var dimData=this._storage[dim],sum=0;
if(dimData)for(var i=0,len=this.count();i<len;i++){var value=this.get(dim,i,stack);
isNaN(value)||(sum+=value)}return sum},listProto.indexOf=function(dim,value){
var storage=this._storage,dimData=storage[dim],indices=this.indices;
if(dimData)for(var i=0,len=indices.length;i<len;i++){var rawIndex=indices[i];
if(dimData[rawIndex]===value)return i}return-1},listProto.indexOfName=function(name){
for(var indices=this.indices,nameList=this._nameList,i=0,len=indices.length;i<len;i++){
var rawIndex=indices[i];if(nameList[rawIndex]===name)return i;
}return-1},listProto.indexOfRawIndex=function(rawIndex){var indices=this.indices,rawDataIndex=indices[rawIndex];
if(null!=rawDataIndex&&rawDataIndex===rawIndex)return rawIndex;
for(var left=0,right=indices.length-1;left<=right;){var mid=(left+right)/2|0;
if(indices[mid]<rawIndex)left=mid+1;else{if(!(indices[mid]>rawIndex))return mid;
right=mid-1}}return-1},listProto.indexOfNearest=function(dim,value,stack,maxDistance){
var storage=this._storage,dimData=storage[dim];null==maxDistance&&(maxDistance=1/0);
var nearestIdx=-1;if(dimData)for(var minDist=Number.MAX_VALUE,i=0,len=this.count();i<len;i++){
var diff=value-this.get(dim,i,stack),dist=Math.abs(diff);diff<=maxDistance&&(dist<minDist||dist===minDist&&diff>0)&&(minDist=dist,
nearestIdx=i)}return nearestIdx},listProto.getRawIndex=function(idx){
var rawIdx=this.indices[idx];return null==rawIdx?-1:rawIdx},listProto.getRawDataItem=function(idx){
return this._rawData[this.getRawIndex(idx)]},listProto.getName=function(idx){
return this._nameList[this.indices[idx]]||""},listProto.getId=function(idx){
return this._idList[this.indices[idx]]||this.getRawIndex(idx)+"";
},listProto.each=function(dims,cb,stack,context){"function"==typeof dims&&(context=stack,
stack=cb,cb=dims,dims=[]),dims=zrUtil.map(normalizeDimensions(dims),this.getDimension,this);
var value=[],dimSize=dims.length,indices=this.indices;context=context||this;
for(var i=0;i<indices.length;i++)switch(dimSize){case 0:cb.call(context,i);
break;case 1:cb.call(context,this.get(dims[0],i,stack),i);break;
case 2:cb.call(context,this.get(dims[0],i,stack),this.get(dims[1],i,stack),i);
break;default:for(var k=0;k<dimSize;k++)value[k]=this.get(dims[k],i,stack);
value[k]=i,cb.apply(context,value)}},listProto.filterSelf=function(dimensions,cb,stack,context){
"function"==typeof dimensions&&(context=stack,stack=cb,cb=dimensions,
dimensions=[]),dimensions=zrUtil.map(normalizeDimensions(dimensions),this.getDimension,this);
var newIndices=[],value=[],dimSize=dimensions.length,indices=this.indices;
context=context||this;for(var i=0;i<indices.length;i++){var keep;
if(1===dimSize)keep=cb.call(context,this.get(dimensions[0],i,stack),i);else{
for(var k=0;k<dimSize;k++)value[k]=this.get(dimensions[k],i,stack);
value[k]=i,keep=cb.apply(context,value)}keep&&newIndices.push(indices[i]);
}return this.indices=newIndices,this._extent={},this},listProto.mapArray=function(dimensions,cb,stack,context){
"function"==typeof dimensions&&(context=stack,stack=cb,cb=dimensions,
dimensions=[]);var result=[];return this.each(dimensions,function(){
result.push(cb&&cb.apply(this,arguments))},stack,context),result;
},listProto.map=function(dimensions,cb,stack,context){dimensions=zrUtil.map(normalizeDimensions(dimensions),this.getDimension,this);
var list=cloneListForMapAndSample(this,dimensions),indices=list.indices=this.indices,storage=list._storage,tmpRetValue=[];
return this.each(dimensions,function(){var idx=arguments[arguments.length-1],retValue=cb&&cb.apply(this,arguments);
if(null!=retValue){"number"==typeof retValue&&(tmpRetValue[0]=retValue,
retValue=tmpRetValue);for(var i=0;i<retValue.length;i++){var dim=dimensions[i],dimStore=storage[dim],rawIdx=indices[idx];
dimStore&&(dimStore[rawIdx]=retValue[i])}}},stack,context),list;
},listProto.downSample=function(dimension,rate,sampleValue,sampleIndex){
for(var list=cloneListForMapAndSample(this,[dimension]),storage=this._storage,targetStorage=list._storage,originalIndices=this.indices,indices=list.indices=[],frameValues=[],frameIndices=[],frameSize=Math.floor(1/rate),dimStore=targetStorage[dimension],len=this.count(),i=0;i<storage[dimension].length;i++)targetStorage[dimension][i]=storage[dimension][i];
for(var i=0;i<len;i+=frameSize){frameSize>len-i&&(frameSize=len-i,
frameValues.length=frameSize);for(var k=0;k<frameSize;k++){var idx=originalIndices[i+k];
frameValues[k]=dimStore[idx],frameIndices[k]=idx}var value=sampleValue(frameValues),idx=frameIndices[sampleIndex(frameValues,value)||0];
dimStore[idx]=value,indices.push(idx)}return list},listProto.getItemModel=function(idx){
var hostModel=this.hostModel;return idx=this.indices[idx],new Model(this._rawData[idx],hostModel,hostModel&&hostModel.ecModel);
},listProto.diff=function(otherList){var val,idList=this._idList,otherIdList=otherList&&otherList._idList,prefix="e\0\0";
return new DataDiffer(otherList?otherList.indices:[],this.indices,function(idx){
return null!=(val=otherIdList[idx])?val:prefix+idx},function(idx){
return null!=(val=idList[idx])?val:prefix+idx})},listProto.getVisual=function(key){
var visual=this._visual;return visual&&visual[key]},listProto.setVisual=function(key,val){
if(isObject(key))for(var name in key)key.hasOwnProperty(name)&&this.setVisual(name,key[name]);else this._visual=this._visual||{},
this._visual[key]=val},listProto.setLayout=function(key,val){
if(isObject(key))for(var name in key)key.hasOwnProperty(name)&&this.setLayout(name,key[name]);else this._layout[key]=val;
},listProto.getLayout=function(key){return this._layout[key]},
listProto.getItemLayout=function(idx){return this._itemLayouts[idx];
},listProto.setItemLayout=function(idx,layout,merge){this._itemLayouts[idx]=merge?zrUtil.extend(this._itemLayouts[idx]||{},layout):layout;
},listProto.clearItemLayouts=function(){this._itemLayouts.length=0;
},listProto.getItemVisual=function(idx,key,ignoreParent){var itemVisual=this._itemVisuals[idx],val=itemVisual&&itemVisual[key];
return null!=val||ignoreParent?val:this.getVisual(key)},listProto.setItemVisual=function(idx,key,value){
var itemVisual=this._itemVisuals[idx]||{};if(this._itemVisuals[idx]=itemVisual,
isObject(key))for(var name in key)key.hasOwnProperty(name)&&(itemVisual[name]=key[name]);else itemVisual[key]=value;
},listProto.clearAllVisual=function(){this._visual={},this._itemVisuals=[];
};var setItemDataAndSeriesIndex=function(child){child.seriesIndex=this.seriesIndex,
child.dataIndex=this.dataIndex,child.dataType=this.dataType};listProto.setItemGraphicEl=function(idx,el){
var hostModel=this.hostModel;el&&(el.dataIndex=idx,el.dataType=this.dataType,
el.seriesIndex=hostModel&&hostModel.seriesIndex,"group"===el.type&&el.traverse(setItemDataAndSeriesIndex,el)),
this._graphicEls[idx]=el},listProto.getItemGraphicEl=function(idx){
return this._graphicEls[idx]},listProto.eachItemGraphicEl=function(cb,context){
zrUtil.each(this._graphicEls,function(el,idx){el&&cb&&cb.call(context,el,idx);
})},listProto.cloneShallow=function(){var dimensionInfoList=zrUtil.map(this.dimensions,this.getDimensionInfo,this),list=new List(dimensionInfoList,this.hostModel);
return list._storage=this._storage,transferProperties(list,this),
list.indices=this.indices.slice(),this._extent&&(list._extent=zrUtil.extend({},this._extent)),
list},listProto.wrapMethod=function(methodName,injectFunction){
var originalMethod=this[methodName];"function"==typeof originalMethod&&(this.__wrappedMethods=this.__wrappedMethods||[],
this.__wrappedMethods.push(methodName),this[methodName]=function(){
var res=originalMethod.apply(this,arguments);return injectFunction.apply(this,[res].concat(zrUtil.slice(arguments)));
})},listProto.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],
listProto.CHANGABLE_METHODS=["filterSelf"],module.exports=List;
}).call(exports,function(){return this}())},function(module,exports){
"use strict";function defaultKeyGetter(item){return item}function DataDiffer(oldArr,newArr,oldKeyGetter,newKeyGetter){
this._old=oldArr,this._new=newArr,this._oldKeyGetter=oldKeyGetter||defaultKeyGetter,
this._newKeyGetter=newKeyGetter||defaultKeyGetter}function initIndexMap(arr,map,keyArr,keyGetter){
for(var i=0;i<arr.length;i++){var key=keyGetter(arr[i],i),existence=map[key];
null==existence?(keyArr.push(key),map[key]=i):(existence.length||(map[key]=existence=[existence]),
existence.push(i))}}DataDiffer.prototype={constructor:DataDiffer,
add:function(func){return this._add=func,this},update:function(func){
return this._update=func,this},remove:function(func){return this._remove=func,
this},execute:function(){var i,oldArr=this._old,newArr=this._new,oldKeyGetter=this._oldKeyGetter,newKeyGetter=this._newKeyGetter,oldDataIndexMap={},newDataIndexMap={},oldDataKeyArr=[],newDataKeyArr=[];
for(initIndexMap(oldArr,oldDataIndexMap,oldDataKeyArr,oldKeyGetter),
initIndexMap(newArr,newDataIndexMap,newDataKeyArr,newKeyGetter),
i=0;i<oldArr.length;i++){var key=oldDataKeyArr[i],idx=newDataIndexMap[key];
if(null!=idx){var len=idx.length;len?(1===len&&(newDataIndexMap[key]=null),
idx=idx.unshift()):newDataIndexMap[key]=null,this._update&&this._update(idx,i);
}else this._remove&&this._remove(i)}for(var i=0;i<newDataKeyArr.length;i++){
var key=newDataKeyArr[i];if(newDataIndexMap.hasOwnProperty(key)){
var idx=newDataIndexMap[key];if(null==idx)continue;if(idx.length)for(var j=0,len=idx.length;j<len;j++)this._add&&this._add(idx[j]);else this._add&&this._add(idx);
}}}},module.exports=DataDiffer},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1),PRIORITY=echarts.PRIORITY;
__webpack_require__(101),__webpack_require__(104),echarts.registerVisual(zrUtil.curry(__webpack_require__(110),"line","circle","line")),
echarts.registerLayout(zrUtil.curry(__webpack_require__(111),"line")),
echarts.registerProcessor(PRIORITY.PROCESSOR.STATISTIC,zrUtil.curry(__webpack_require__(112),"line")),
__webpack_require__(113)},function(module,exports,__webpack_require__){
"use strict";var createListFromArray=__webpack_require__(102),SeriesModel=__webpack_require__(28);
module.exports=SeriesModel.extend({type:"series.line",dependencies:["grid","polar"],
getInitialData:function(option,ecModel){var coordSys=option.coordinateSystem;
if("polar"!==coordSys&&"cartesian2d"!==coordSys)throw new Error("Line not support coordinateSystem besides cartesian and polar");
return createListFromArray(option.data,this,ecModel)},defaultOption:{
zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,
hoverAnimation:!0,clipOverflow:!0,label:{normal:{position:"top"
}},lineStyle:{normal:{width:2,type:"solid"}},step:!1,smooth:!1,
smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,
showSymbol:!0,showAllSymbol:!1,connectNulls:!1,sampling:"none",
animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0
}})},function(module,exports,__webpack_require__){"use strict";
function firstDataNotNull(data){for(var i=0;i<data.length&&null==data[i];)i++;
return data[i]}function ifNeedCompleteOrdinalData(data){var sampleItem=firstDataNotNull(data);
return null!=sampleItem&&!zrUtil.isArray(getDataItemValue(sampleItem));
}function createListFromArray(data,seriesModel,ecModel){if(data=data||[],
!zrUtil.isArray(data))throw new Error("Invalid data.");var coordSysName=seriesModel.get("coordinateSystem"),creator=creators[coordSysName],registeredCoordSys=CoordinateSystem.get(coordSysName),axesInfo=creator&&creator(data,seriesModel,ecModel),dimensions=axesInfo&&axesInfo.dimensions;
dimensions||(dimensions=registeredCoordSys&&registeredCoordSys.dimensions||["x","y"],
dimensions=completeDimensions(dimensions,data,dimensions.concat(["value"])));
var categoryIndex=axesInfo?axesInfo.categoryIndex:-1,list=new List(dimensions,seriesModel),nameList=createNameList(axesInfo,data),categories={},dimValueGetter=categoryIndex>=0&&ifNeedCompleteOrdinalData(data)?function(itemOpt,dimName,dataIndex,dimIndex){
return modelUtil.isDataItemOption(itemOpt)&&(list.hasItemOption=!0),
dimIndex===categoryIndex?dataIndex:converDataValue(getDataItemValue(itemOpt),dimensions[dimIndex]);
}:function(itemOpt,dimName,dataIndex,dimIndex){var value=getDataItemValue(itemOpt),val=converDataValue(value&&value[dimIndex],dimensions[dimIndex]);
modelUtil.isDataItemOption(itemOpt)&&(list.hasItemOption=!0);var categoryAxesModels=axesInfo&&axesInfo.categoryAxesModels;
return categoryAxesModels&&categoryAxesModels[dimName]&&"string"==typeof val&&(categories[dimName]=categories[dimName]||categoryAxesModels[dimName].getCategories(),
val=zrUtil.indexOf(categories[dimName],val),val<0&&!isNaN(val)&&(val=+val)),
val};return list.hasItemOption=!1,list.initData(data,nameList,dimValueGetter),
list}function isStackable(axisType){return"category"!==axisType&&"time"!==axisType;
}function getDimTypeByAxis(axisType){return"category"===axisType?"ordinal":"time"===axisType?"time":"float";
}function createNameList(result,data){var categoryAxisModel,nameList=[],categoryDim=result&&result.dimensions[result.categoryIndex];
if(categoryDim&&(categoryAxisModel=result.categoryAxesModels[categoryDim.name]),
categoryAxisModel){var categories=categoryAxisModel.getCategories();
if(categories){var dataLen=data.length;if(zrUtil.isArray(data[0])&&data[0].length>1){
nameList=[];for(var i=0;i<dataLen;i++)nameList[i]=categories[data[i][result.categoryIndex||0]];
}else nameList=categories.slice(0)}}return nameList}var List=__webpack_require__(98),completeDimensions=__webpack_require__(103),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),CoordinateSystem=__webpack_require__(26),getDataItemValue=modelUtil.getDataItemValue,converDataValue=modelUtil.converDataValue,creators={
cartesian2d:function(data,seriesModel,ecModel){var axesModels=zrUtil.map(["xAxis","yAxis"],function(name){
return ecModel.queryComponents({mainType:name,index:seriesModel.get(name+"Index"),
id:seriesModel.get(name+"Id")})[0]}),xAxisModel=axesModels[0],yAxisModel=axesModels[1];
if(!xAxisModel)throw new Error('xAxis "'+zrUtil.retrieve(seriesModel.get("xAxisIndex"),seriesModel.get("xAxisId"),0)+'" not found');
if(!yAxisModel)throw new Error('yAxis "'+zrUtil.retrieve(seriesModel.get("xAxisIndex"),seriesModel.get("yAxisId"),0)+'" not found');
var xAxisType=xAxisModel.get("type"),yAxisType=yAxisModel.get("type"),dimensions=[{
name:"x",type:getDimTypeByAxis(xAxisType),stackable:isStackable(xAxisType)
},{name:"y",type:getDimTypeByAxis(yAxisType),stackable:isStackable(yAxisType)
}],isXAxisCateogry="category"===xAxisType,isYAxisCategory="category"===yAxisType;
completeDimensions(dimensions,data,["x","y","z"]);var categoryAxesModels={};
return isXAxisCateogry&&(categoryAxesModels.x=xAxisModel),isYAxisCategory&&(categoryAxesModels.y=yAxisModel),
{dimensions:dimensions,categoryIndex:isXAxisCateogry?0:isYAxisCategory?1:-1,
categoryAxesModels:categoryAxesModels}},singleAxis:function(data,seriesModel,ecModel){
var singleAxisModel=ecModel.queryComponents({mainType:"singleAxis",
index:seriesModel.get("singleAxisIndex"),id:seriesModel.get("singleAxisId")
})[0];if(!singleAxisModel)throw new Error("singleAxis should be specified.");
var singleAxisType=singleAxisModel.get("type"),isCategory="category"===singleAxisType,dimensions=[{
name:"single",type:getDimTypeByAxis(singleAxisType),stackable:isStackable(singleAxisType)
}];completeDimensions(dimensions,data);var categoryAxesModels={};
return isCategory&&(categoryAxesModels.single=singleAxisModel),
{dimensions:dimensions,categoryIndex:isCategory?0:-1,categoryAxesModels:categoryAxesModels
}},polar:function(data,seriesModel,ecModel){var polarModel=ecModel.queryComponents({
mainType:"polar",index:seriesModel.get("polarIndex"),id:seriesModel.get("polarId")
})[0],angleAxisModel=polarModel.findAxisModel("angleAxis"),radiusAxisModel=polarModel.findAxisModel("radiusAxis");
if(!angleAxisModel)throw new Error("angleAxis option not found");
if(!radiusAxisModel)throw new Error("radiusAxis option not found");
var radiusAxisType=radiusAxisModel.get("type"),angleAxisType=angleAxisModel.get("type"),dimensions=[{
name:"radius",type:getDimTypeByAxis(radiusAxisType),stackable:isStackable(radiusAxisType)
},{name:"angle",type:getDimTypeByAxis(angleAxisType),stackable:isStackable(angleAxisType)
}],isAngleAxisCateogry="category"===angleAxisType,isRadiusAxisCateogry="category"===radiusAxisType;
completeDimensions(dimensions,data,["radius","angle","value"]);
var categoryAxesModels={};return isRadiusAxisCateogry&&(categoryAxesModels.radius=radiusAxisModel),
isAngleAxisCateogry&&(categoryAxesModels.angle=angleAxisModel),
{dimensions:dimensions,categoryIndex:isAngleAxisCateogry?1:isRadiusAxisCateogry?0:-1,
categoryAxesModels:categoryAxesModels}},geo:function(data,seriesModel,ecModel){
return{dimensions:completeDimensions([{name:"lng"},{name:"lat"
}],data,["lng","lat","value"])}}};module.exports=createListFromArray;
},function(module,exports,__webpack_require__){function completeDimensions(dimensions,data,defaultNames,extraPrefix){
if(!data)return dimensions;var value0=retrieveValue(data[0]),dimSize=zrUtil.isArray(value0)&&value0.length||1;
defaultNames=defaultNames||[],extraPrefix=extraPrefix||"extra";
for(var i=0;i<dimSize;i++)if(!dimensions[i]){var name=defaultNames[i]||extraPrefix+(i-defaultNames.length);
dimensions[i]=guessOrdinal(data,i)?{type:"ordinal",name:name}:name;
}return dimensions}function retrieveValue(o){return zrUtil.isArray(o)?o:zrUtil.isObject(o)?o.value:o;
}var zrUtil=__webpack_require__(4),guessOrdinal=completeDimensions.guessOrdinal=function(data,dimIndex){
for(var i=0,len=data.length;i<len;i++){var value=retrieveValue(data[i]);
if(!zrUtil.isArray(value))return!1;var value=value[dimIndex];if(null!=value&&isFinite(value))return!1;
if(zrUtil.isString(value)&&"-"!==value)return!0}return!1};module.exports=completeDimensions;
},function(module,exports,__webpack_require__){"use strict";function isPointsSame(points1,points2){
if(points1.length===points2.length){for(var i=0;i<points1.length;i++){
var p1=points1[i],p2=points2[i];if(p1[0]!==p2[0]||p1[1]!==p2[1])return;
}return!0}}function getSmooth(smooth){return"number"==typeof smooth?smooth:smooth?.3:0;
}function getAxisExtentWithGap(axis){var extent=axis.getGlobalExtent();
if(axis.onBand){var halfBandWidth=axis.getBandWidth()/2-1,dir=extent[1]>extent[0]?1:-1;
extent[0]+=dir*halfBandWidth,extent[1]-=dir*halfBandWidth}return extent;
}function sign(val){return val>=0?1:-1}function getStackedOnPoints(coordSys,data){
var baseAxis=coordSys.getBaseAxis(),valueAxis=coordSys.getOtherAxis(baseAxis),valueStart=baseAxis.onZero?0:valueAxis.scale.getExtent()[0],valueDim=valueAxis.dim,baseDataOffset="x"===valueDim||"radius"===valueDim?1:0;
return data.mapArray([valueDim],function(val,idx){for(var stackedOnSameSign,stackedOn=data.stackedOn;stackedOn&&sign(stackedOn.get(valueDim,idx))===sign(val);){
stackedOnSameSign=stackedOn;break}var stackedData=[];return stackedData[baseDataOffset]=data.get(baseAxis.dim,idx),
stackedData[1-baseDataOffset]=stackedOnSameSign?stackedOnSameSign.get(valueDim,idx,!0):valueStart,
coordSys.dataToPoint(stackedData)},!0)}function createGridClipShape(cartesian,hasAnimation,seriesModel){
var xExtent=getAxisExtentWithGap(cartesian.getAxis("x")),yExtent=getAxisExtentWithGap(cartesian.getAxis("y")),isHorizontal=cartesian.getBaseAxis().isHorizontal(),x=Math.min(xExtent[0],xExtent[1]),y=Math.min(yExtent[0],yExtent[1]),width=Math.max(xExtent[0],xExtent[1])-x,height=Math.max(yExtent[0],yExtent[1])-y,lineWidth=seriesModel.get("lineStyle.normal.width")||2,expandSize=seriesModel.get("clipOverflow")?lineWidth/2:Math.max(width,height);
isHorizontal?(y-=expandSize,height+=2*expandSize):(x-=expandSize,
width+=2*expandSize);var clipPath=new graphic.Rect({shape:{x:x,
y:y,width:width,height:height}});return hasAnimation&&(clipPath.shape[isHorizontal?"width":"height"]=0,
graphic.initProps(clipPath,{shape:{width:width,height:height}
},seriesModel)),clipPath}function createPolarClipShape(polar,hasAnimation,seriesModel){
var angleAxis=polar.getAngleAxis(),radiusAxis=polar.getRadiusAxis(),radiusExtent=radiusAxis.getExtent(),angleExtent=angleAxis.getExtent(),RADIAN=Math.PI/180,clipPath=new graphic.Sector({
shape:{cx:polar.cx,cy:polar.cy,r0:radiusExtent[0],r:radiusExtent[1],
startAngle:-angleExtent[0]*RADIAN,endAngle:-angleExtent[1]*RADIAN,
clockwise:angleAxis.inverse}});return hasAnimation&&(clipPath.shape.endAngle=-angleExtent[0]*RADIAN,
graphic.initProps(clipPath,{shape:{endAngle:-angleExtent[1]*RADIAN
}},seriesModel)),clipPath}function createClipShape(coordSys,hasAnimation,seriesModel){
return"polar"===coordSys.type?createPolarClipShape(coordSys,hasAnimation,seriesModel):createGridClipShape(coordSys,hasAnimation,seriesModel);
}function turnPointsIntoStep(points,coordSys,stepTurnAt){for(var baseAxis=coordSys.getBaseAxis(),baseIndex="x"===baseAxis.dim||"radius"===baseAxis.dim?0:1,stepPoints=[],i=0;i<points.length-1;i++){
var nextPt=points[i+1],pt=points[i];stepPoints.push(pt);var stepPt=[];
switch(stepTurnAt){case"end":stepPt[baseIndex]=nextPt[baseIndex],
stepPt[1-baseIndex]=pt[1-baseIndex],stepPoints.push(stepPt);break;
case"middle":var middle=(pt[baseIndex]+nextPt[baseIndex])/2,stepPt2=[];
stepPt[baseIndex]=stepPt2[baseIndex]=middle,stepPt[1-baseIndex]=pt[1-baseIndex],
stepPt2[1-baseIndex]=nextPt[1-baseIndex],stepPoints.push(stepPt),
stepPoints.push(stepPt2);break;default:stepPt[baseIndex]=pt[baseIndex],
stepPt[1-baseIndex]=nextPt[1-baseIndex],stepPoints.push(stepPt);
}}return points[i]&&stepPoints.push(points[i]),stepPoints}function getVisualGradient(data,coordSys){
var visualMetaList=data.getVisual("visualMeta");if(visualMetaList&&visualMetaList.length&&data.count()){
for(var visualMeta,i=visualMetaList.length-1;i>=0;i--)if(visualMetaList[i].dimension<2){
visualMeta=visualMetaList[i];break}if(!visualMeta||"cartesian2d"!==coordSys.type)return void console.warn("Visual map on line style only support x or y dimension.");
var dimension=visualMeta.dimension,dimName=data.dimensions[dimension],axis=coordSys.getAxis(dimName),colorStops=zrUtil.map(visualMeta.stops,function(stop){
return{coord:axis.toGlobalCoord(axis.dataToCoord(stop.value)),
color:stop.color}}),stopLen=colorStops.length,outerColors=visualMeta.outerColors.slice();
stopLen&&colorStops[0].coord>colorStops[stopLen-1].coord&&(colorStops.reverse(),
outerColors.reverse());var tinyExtent=10,minCoord=colorStops[0].coord-tinyExtent,maxCoord=colorStops[stopLen-1].coord+tinyExtent,coordSpan=maxCoord-minCoord;
if(coordSpan<.001)return"transparent";zrUtil.each(colorStops,function(stop){
stop.offset=(stop.coord-minCoord)/coordSpan}),colorStops.push({
offset:stopLen?colorStops[stopLen-1].offset:.5,color:outerColors[1]||"transparent"
}),colorStops.unshift({offset:stopLen?colorStops[0].offset:.5,
color:outerColors[0]||"transparent"});var gradient=new graphic.LinearGradient(0,0,0,0,colorStops,(!0));
return gradient[dimName]=minCoord,gradient[dimName+"2"]=maxCoord,
gradient}}var zrUtil=__webpack_require__(4),SymbolDraw=__webpack_require__(105),Symbol=__webpack_require__(106),lineAnimationDiff=__webpack_require__(108),graphic=__webpack_require__(43),modelUtil=__webpack_require__(5),polyHelper=__webpack_require__(109),ChartView=__webpack_require__(42);
module.exports=ChartView.extend({type:"line",init:function(){
var lineGroup=new graphic.Group,symbolDraw=new SymbolDraw;this.group.add(symbolDraw.group),
this._symbolDraw=symbolDraw,this._lineGroup=lineGroup},render:function(seriesModel,ecModel,api){
var coordSys=seriesModel.coordinateSystem,group=this.group,data=seriesModel.getData(),lineStyleModel=seriesModel.getModel("lineStyle.normal"),areaStyleModel=seriesModel.getModel("areaStyle.normal"),points=data.mapArray(data.getItemLayout,!0),isCoordSysPolar="polar"===coordSys.type,prevCoordSys=this._coordSys,symbolDraw=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,lineGroup=this._lineGroup,hasAnimation=seriesModel.get("animation"),isAreaChart=!areaStyleModel.isEmpty(),stackedOnPoints=getStackedOnPoints(coordSys,data),showSymbol=seriesModel.get("showSymbol"),isSymbolIgnore=showSymbol&&!isCoordSysPolar&&!seriesModel.get("showAllSymbol")&&this._getSymbolIgnoreFunc(data,coordSys),oldData=this._data;
oldData&&oldData.eachItemGraphicEl(function(el,idx){el.__temp&&(group.remove(el),
oldData.setItemGraphicEl(idx,null))}),showSymbol||symbolDraw.remove(),
group.add(lineGroup);var step=!isCoordSysPolar&&seriesModel.get("step");
polyline&&prevCoordSys.type===coordSys.type&&step===this._step?(isAreaChart&&!polygon?polygon=this._newPolygon(points,stackedOnPoints,coordSys,hasAnimation):polygon&&!isAreaChart&&(lineGroup.remove(polygon),
polygon=this._polygon=null),lineGroup.setClipPath(createClipShape(coordSys,!1,seriesModel)),
showSymbol&&symbolDraw.updateData(data,isSymbolIgnore),data.eachItemGraphicEl(function(el){
el.stopAnimation(!0)}),isPointsSame(this._stackedOnPoints,stackedOnPoints)&&isPointsSame(this._points,points)||(hasAnimation?this._updateAnimation(data,stackedOnPoints,coordSys,api,step):(step&&(points=turnPointsIntoStep(points,coordSys,step),
stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step)),
polyline.setShape({points:points}),polygon&&polygon.setShape({
points:points,stackedOnPoints:stackedOnPoints})))):(showSymbol&&symbolDraw.updateData(data,isSymbolIgnore),
step&&(points=turnPointsIntoStep(points,coordSys,step),stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step)),
polyline=this._newPolyline(points,coordSys,hasAnimation),isAreaChart&&(polygon=this._newPolygon(points,stackedOnPoints,coordSys,hasAnimation)),
lineGroup.setClipPath(createClipShape(coordSys,!0,seriesModel)));
var visualColor=getVisualGradient(data,coordSys)||data.getVisual("color");
polyline.useStyle(zrUtil.defaults(lineStyleModel.getLineStyle(),{
fill:"none",stroke:visualColor,lineJoin:"bevel"}));var smooth=seriesModel.get("smooth");
if(smooth=getSmooth(seriesModel.get("smooth")),polyline.setShape({
smooth:smooth,smoothMonotone:seriesModel.get("smoothMonotone"),
connectNulls:seriesModel.get("connectNulls")}),polygon){var stackedOn=data.stackedOn,stackedOnSmooth=0;
if(polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(),{
fill:visualColor,opacity:.7,lineJoin:"bevel"})),stackedOn){var stackedOnSeries=stackedOn.hostModel;
stackedOnSmooth=getSmooth(stackedOnSeries.get("smooth"))}polygon.setShape({
smooth:smooth,stackedOnSmooth:stackedOnSmooth,smoothMonotone:seriesModel.get("smoothMonotone"),
connectNulls:seriesModel.get("connectNulls")})}this._data=data,
this._coordSys=coordSys,this._stackedOnPoints=stackedOnPoints,
this._points=points,this._step=step},dispose:function(){},highlight:function(seriesModel,ecModel,api,payload){
var data=seriesModel.getData(),dataIndex=modelUtil.queryDataIndex(data,payload);
if(!(dataIndex instanceof Array)&&null!=dataIndex&&dataIndex>=0){
var symbol=data.getItemGraphicEl(dataIndex);if(!symbol){var pt=data.getItemLayout(dataIndex);
if(!pt)return;symbol=new Symbol(data,dataIndex),symbol.position=pt,
symbol.setZ(seriesModel.get("zlevel"),seriesModel.get("z")),symbol.ignore=isNaN(pt[0])||isNaN(pt[1]),
symbol.__temp=!0,data.setItemGraphicEl(dataIndex,symbol),symbol.stopSymbolAnimation(!0),
this.group.add(symbol)}symbol.highlight()}else ChartView.prototype.highlight.call(this,seriesModel,ecModel,api,payload);
},downplay:function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(),dataIndex=modelUtil.queryDataIndex(data,payload);
if(null!=dataIndex&&dataIndex>=0){var symbol=data.getItemGraphicEl(dataIndex);
symbol&&(symbol.__temp?(data.setItemGraphicEl(dataIndex,null),
this.group.remove(symbol)):symbol.downplay())}else ChartView.prototype.downplay.call(this,seriesModel,ecModel,api,payload);
},_newPolyline:function(points){var polyline=this._polyline;return polyline&&this._lineGroup.remove(polyline),
polyline=new polyHelper.Polyline({shape:{points:points},silent:!0,
z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,
polyline},_newPolygon:function(points,stackedOnPoints){var polygon=this._polygon;
return polygon&&this._lineGroup.remove(polygon),polygon=new polyHelper.Polygon({
shape:{points:points,stackedOnPoints:stackedOnPoints},silent:!0
}),this._lineGroup.add(polygon),this._polygon=polygon,polygon;
},_getSymbolIgnoreFunc:function(data,coordSys){var categoryAxis=coordSys.getAxesByScale("ordinal")[0];
if(categoryAxis&&categoryAxis.isLabelIgnored)return zrUtil.bind(categoryAxis.isLabelIgnored,categoryAxis);
},_updateAnimation:function(data,stackedOnPoints,coordSys,api,step){
var polyline=this._polyline,polygon=this._polygon,seriesModel=data.hostModel,diff=lineAnimationDiff(this._data,data,this._stackedOnPoints,stackedOnPoints,this._coordSys,coordSys),current=diff.current,stackedOnCurrent=diff.stackedOnCurrent,next=diff.next,stackedOnNext=diff.stackedOnNext;
step&&(current=turnPointsIntoStep(diff.current,coordSys,step),
stackedOnCurrent=turnPointsIntoStep(diff.stackedOnCurrent,coordSys,step),
next=turnPointsIntoStep(diff.next,coordSys,step),stackedOnNext=turnPointsIntoStep(diff.stackedOnNext,coordSys,step)),
polyline.shape.__points=diff.current,polyline.shape.points=current,
graphic.updateProps(polyline,{shape:{points:next}},seriesModel),
polygon&&(polygon.setShape({points:current,stackedOnPoints:stackedOnCurrent
}),graphic.updateProps(polygon,{shape:{points:next,stackedOnPoints:stackedOnNext
}},seriesModel));for(var updatedDataInfo=[],diffStatus=diff.status,i=0;i<diffStatus.length;i++){
var cmd=diffStatus[i].cmd;if("="===cmd){var el=data.getItemGraphicEl(diffStatus[i].idx1);
el&&updatedDataInfo.push({el:el,ptIdx:i})}}polyline.animators&&polyline.animators.length&&polyline.animators[0].during(function(){
for(var i=0;i<updatedDataInfo.length;i++){var el=updatedDataInfo[i].el;
el.attr("position",polyline.shape.__points[updatedDataInfo[i].ptIdx]);
}})},remove:function(ecModel){var group=this.group,oldData=this._data;
this._lineGroup.removeAll(),this._symbolDraw.remove(!0),oldData&&oldData.eachItemGraphicEl(function(el,idx){
el.__temp&&(group.remove(el),oldData.setItemGraphicEl(idx,null));
}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null;
}})},function(module,exports,__webpack_require__){function SymbolDraw(symbolCtor){
this.group=new graphic.Group,this._symbolCtor=symbolCtor||Symbol;
}function symbolNeedsDraw(data,idx,isIgnore){var point=data.getItemLayout(idx);
return point&&!isNaN(point[0])&&!isNaN(point[1])&&!(isIgnore&&isIgnore(idx))&&"none"!==data.getItemVisual(idx,"symbol");
}var graphic=__webpack_require__(43),Symbol=__webpack_require__(106),symbolDrawProto=SymbolDraw.prototype;
symbolDrawProto.updateData=function(data,isIgnore){var group=this.group,seriesModel=data.hostModel,oldData=this._data,SymbolCtor=this._symbolCtor,seriesScope={
itemStyle:seriesModel.getModel("itemStyle.normal").getItemStyle(["color"]),
hoverItemStyle:seriesModel.getModel("itemStyle.emphasis").getItemStyle(),
symbolRotate:seriesModel.get("symbolRotate"),symbolOffset:seriesModel.get("symbolOffset"),
hoverAnimation:seriesModel.get("hoverAnimation"),labelModel:seriesModel.getModel("label.normal"),
hoverLabelModel:seriesModel.getModel("label.emphasis")};data.diff(oldData).add(function(newIdx){
var point=data.getItemLayout(newIdx);if(symbolNeedsDraw(data,newIdx,isIgnore)){
var symbolEl=new SymbolCtor(data,newIdx,seriesScope);symbolEl.attr("position",point),
data.setItemGraphicEl(newIdx,symbolEl),group.add(symbolEl)}}).update(function(newIdx,oldIdx){
var symbolEl=oldData.getItemGraphicEl(oldIdx),point=data.getItemLayout(newIdx);
return symbolNeedsDraw(data,newIdx,isIgnore)?(symbolEl?(symbolEl.updateData(data,newIdx,seriesScope),
graphic.updateProps(symbolEl,{position:point},seriesModel)):(symbolEl=new SymbolCtor(data,newIdx),
symbolEl.attr("position",point)),group.add(symbolEl),void data.setItemGraphicEl(newIdx,symbolEl)):void group.remove(symbolEl);
}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);
el&&el.fadeOut(function(){group.remove(el)})}).execute(),this._data=data;
},symbolDrawProto.updateLayout=function(){var data=this._data;
data&&data.eachItemGraphicEl(function(el,idx){var point=data.getItemLayout(idx);
el.attr("position",point)})},symbolDrawProto.remove=function(enableAnimation){
var group=this.group,data=this._data;data&&(enableAnimation?data.eachItemGraphicEl(function(el){
el.fadeOut(function(){group.remove(el)})}):group.removeAll());
},module.exports=SymbolDraw},function(module,exports,__webpack_require__){
function getSymbolSize(data,idx){var symbolSize=data.getItemVisual(idx,"symbolSize");
return symbolSize instanceof Array?symbolSize.slice():[+symbolSize,+symbolSize];
}function getScale(symbolSize){return[symbolSize[0]/2,symbolSize[1]/2];
}function Symbol(data,idx,seriesScope){graphic.Group.call(this),
this.updateData(data,idx,seriesScope)}function driftSymbol(dx,dy){
this.parent.drift(dx,dy)}var zrUtil=__webpack_require__(4),symbolUtil=__webpack_require__(107),graphic=__webpack_require__(43),numberUtil=__webpack_require__(7),symbolProto=Symbol.prototype;
symbolProto._createSymbol=function(symbolType,data,idx,symbolSize){
this.removeAll();var seriesModel=data.hostModel,color=data.getItemVisual(idx,"color"),symbolPath=symbolUtil.createSymbol(symbolType,-1,-1,2,2,color);
symbolPath.attr({z2:100,culling:!0,scale:[0,0]}),symbolPath.drift=driftSymbol,
graphic.initProps(symbolPath,{scale:getScale(symbolSize)},seriesModel,idx),
this._symbolType=symbolType,this.add(symbolPath)},symbolProto.stopSymbolAnimation=function(toLastFrame){
this.childAt(0).stopAnimation(toLastFrame)},symbolProto.getSymbolPath=function(){
return this.childAt(0)},symbolProto.getScale=function(){return this.childAt(0).scale;
},symbolProto.highlight=function(){this.childAt(0).trigger("emphasis");
},symbolProto.downplay=function(){this.childAt(0).trigger("normal");
},symbolProto.setZ=function(zlevel,z){var symbolPath=this.childAt(0);
symbolPath.zlevel=zlevel,symbolPath.z=z},symbolProto.setDraggable=function(draggable){
var symbolPath=this.childAt(0);symbolPath.draggable=draggable,
symbolPath.cursor=draggable?"move":"pointer"},symbolProto.updateData=function(data,idx,seriesScope){
this.silent=!1;var symbolType=data.getItemVisual(idx,"symbol")||"circle",seriesModel=data.hostModel,symbolSize=getSymbolSize(data,idx);
if(symbolType!==this._symbolType)this._createSymbol(symbolType,data,idx,symbolSize);else{
var symbolPath=this.childAt(0);graphic.updateProps(symbolPath,{
scale:getScale(symbolSize)},seriesModel,idx)}this._updateCommon(data,idx,symbolSize,seriesScope),
this._seriesModel=seriesModel};var normalStyleAccessPath=["itemStyle","normal"],emphasisStyleAccessPath=["itemStyle","emphasis"],normalLabelAccessPath=["label","normal"],emphasisLabelAccessPath=["label","emphasis"];
symbolProto._updateCommon=function(data,idx,symbolSize,seriesScope){
var symbolPath=this.childAt(0),seriesModel=data.hostModel,color=data.getItemVisual(idx,"color");
"image"!==symbolPath.type&&symbolPath.useStyle({strokeNoScale:!0
}),seriesScope=seriesScope||null;var itemStyle=seriesScope&&seriesScope.itemStyle,hoverItemStyle=seriesScope&&seriesScope.hoverItemStyle,symbolRotate=seriesScope&&seriesScope.symbolRotate,symbolOffset=seriesScope&&seriesScope.symbolOffset,labelModel=seriesScope&&seriesScope.labelModel,hoverLabelModel=seriesScope&&seriesScope.hoverLabelModel,hoverAnimation=seriesScope&&seriesScope.hoverAnimation;
if(!seriesScope||data.hasItemOption){var itemModel=data.getItemModel(idx);
itemStyle=itemModel.getModel(normalStyleAccessPath).getItemStyle(["color"]),
hoverItemStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle(),
symbolRotate=itemModel.getShallow("symbolRotate"),symbolOffset=itemModel.getShallow("symbolOffset"),
labelModel=itemModel.getModel(normalLabelAccessPath),hoverLabelModel=itemModel.getModel(emphasisLabelAccessPath),
hoverAnimation=itemModel.getShallow("hoverAnimation")}else hoverItemStyle=zrUtil.extend({},hoverItemStyle);
var elStyle=symbolPath.style;symbolPath.attr("rotation",(symbolRotate||0)*Math.PI/180||0),
symbolOffset&&symbolPath.attr("position",[numberUtil.parsePercent(symbolOffset[0],symbolSize[0]),numberUtil.parsePercent(symbolOffset[1],symbolSize[1])]),
symbolPath.setColor(color),symbolPath.setStyle(itemStyle);var opacity=data.getItemVisual(idx,"opacity");
null!=opacity&&(elStyle.opacity=opacity);for(var valueDim,dataType,dimensions=data.dimensions.slice();dimensions.length&&(valueDim=dimensions.pop(),
dataType=data.getDimensionInfo(valueDim).type,"ordinal"===dataType||"time"===dataType););
null!=valueDim&&labelModel.getShallow("show")?(graphic.setText(elStyle,labelModel,color),
elStyle.text=zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"normal"),data.get(valueDim,idx))):elStyle.text="",
null!=valueDim&&hoverLabelModel.getShallow("show")?(graphic.setText(hoverItemStyle,hoverLabelModel,color),
hoverItemStyle.text=zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"emphasis"),data.get(valueDim,idx))):hoverItemStyle.text="",
symbolPath.off("mouseover").off("mouseout").off("emphasis").off("normal"),
symbolPath.hoverStyle=hoverItemStyle,graphic.setHoverStyle(symbolPath);
var scale=getScale(symbolSize);if(hoverAnimation&&seriesModel.isAnimationEnabled()){
var onEmphasis=function(){var ratio=scale[1]/scale[0];this.animateTo({
scale:[Math.max(1.1*scale[0],scale[0]+3),Math.max(1.1*scale[1],scale[1]+3*ratio)]
},400,"elasticOut")},onNormal=function(){this.animateTo({scale:scale
},400,"elasticOut")};symbolPath.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal);
}},symbolProto.fadeOut=function(cb){var symbolPath=this.childAt(0);
this.silent=!0,symbolPath.style.text="",graphic.updateProps(symbolPath,{
scale:[0,0]},this._seriesModel,this.dataIndex,cb)},zrUtil.inherits(Symbol,graphic.Group),
module.exports=Symbol},function(module,exports,__webpack_require__){
"use strict";var graphic=__webpack_require__(43),BoundingRect=__webpack_require__(9),Triangle=graphic.extendShape({
type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){
var cx=shape.cx,cy=shape.cy,width=shape.width/2,height=shape.height/2;
path.moveTo(cx,cy-height),path.lineTo(cx+width,cy+height),path.lineTo(cx-width,cy+height),
path.closePath()}}),Diamond=graphic.extendShape({type:"diamond",
shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){
var cx=shape.cx,cy=shape.cy,width=shape.width/2,height=shape.height/2;
path.moveTo(cx,cy-height),path.lineTo(cx+width,cy),path.lineTo(cx,cy+height),
path.lineTo(cx-width,cy),path.closePath()}}),Pin=graphic.extendShape({
type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(path,shape){
var x=shape.x,y=shape.y,w=shape.width/5*3,h=Math.max(w,shape.height),r=w/2,dy=r*r/(h-r),cy=y-h+r+dy,angle=Math.asin(dy/r),dx=Math.cos(angle)*r,tanX=Math.sin(angle),tanY=Math.cos(angle);
path.arc(x,cy,r,Math.PI-angle,2*Math.PI+angle);var cpLen=.6*r,cpLen2=.7*r;
path.bezierCurveTo(x+dx-tanX*cpLen,cy+dy+tanY*cpLen,x,y-cpLen2,x,y),
path.bezierCurveTo(x,y-cpLen2,x-dx+tanX*cpLen,cy+dy+tanY*cpLen,x-dx,cy+dy),
path.closePath()}}),Arrow=graphic.extendShape({type:"arrow",shape:{
x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var height=shape.height,width=shape.width,x=shape.x,y=shape.y,dx=width/3*2;
ctx.moveTo(x,y),ctx.lineTo(x+dx,y+height),ctx.lineTo(x,y+height/4*3),
ctx.lineTo(x-dx,y+height),ctx.lineTo(x,y),ctx.closePath()}}),symbolCtors={
line:graphic.Line,rect:graphic.Rect,roundRect:graphic.Rect,square:graphic.Rect,
circle:graphic.Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle
},symbolShapeMakers={line:function(x,y,w,h,shape){shape.x1=x,
shape.y1=y+h/2,shape.x2=x+w,shape.y2=y+h/2},rect:function(x,y,w,h,shape){
shape.x=x,shape.y=y,shape.width=w,shape.height=h},roundRect:function(x,y,w,h,shape){
shape.x=x,shape.y=y,shape.width=w,shape.height=h,shape.r=Math.min(w,h)/4;
},square:function(x,y,w,h,shape){var size=Math.min(w,h);shape.x=x,
shape.y=y,shape.width=size,shape.height=size},circle:function(x,y,w,h,shape){
shape.cx=x+w/2,shape.cy=y+h/2,shape.r=Math.min(w,h)/2},diamond:function(x,y,w,h,shape){
shape.cx=x+w/2,shape.cy=y+h/2,shape.width=w,shape.height=h},pin:function(x,y,w,h,shape){
shape.x=x+w/2,shape.y=y+h/2,shape.width=w,shape.height=h},arrow:function(x,y,w,h,shape){
shape.x=x+w/2,shape.y=y+h/2,shape.width=w,shape.height=h},triangle:function(x,y,w,h,shape){
shape.cx=x+w/2,shape.cy=y+h/2,shape.width=w,shape.height=h}},symbolBuildProxies={};
for(var name in symbolCtors)symbolCtors.hasOwnProperty(name)&&(symbolBuildProxies[name]=new symbolCtors[name]);
var Symbol=graphic.extendShape({type:"symbol",shape:{symbolType:"",
x:0,y:0,width:0,height:0},beforeBrush:function(){var style=this.style,shape=this.shape;
"pin"===shape.symbolType&&"inside"===style.textPosition&&(style.textPosition=["50%","40%"],
style.textAlign="center",style.textVerticalAlign="middle")},buildPath:function(ctx,shape,inBundle){
var symbolType=shape.symbolType,proxySymbol=symbolBuildProxies[symbolType];
"none"!==shape.symbolType&&(proxySymbol||(symbolType="rect",proxySymbol=symbolBuildProxies[symbolType]),
symbolShapeMakers[symbolType](shape.x,shape.y,shape.width,shape.height,proxySymbol.shape),
proxySymbol.buildPath(ctx,proxySymbol.shape,inBundle))}}),symbolPathSetColor=function(color){
if("image"!==this.type){var symbolStyle=this.style,symbolShape=this.shape;
symbolShape&&"line"===symbolShape.symbolType?symbolStyle.stroke=color:this.__isEmptyBrush?(symbolStyle.stroke=color,
symbolStyle.fill="#fff"):(symbolStyle.fill&&(symbolStyle.fill=color),
symbolStyle.stroke&&(symbolStyle.stroke=color)),this.dirty(!1);
}},symbolUtil={createSymbol:function(symbolType,x,y,w,h,color){
var isEmpty=0===symbolType.indexOf("empty");isEmpty&&(symbolType=symbolType.substr(5,1).toLowerCase()+symbolType.substr(6));
var symbolPath;return symbolPath=0===symbolType.indexOf("image://")?new graphic.Image({
style:{image:symbolType.slice(8),x:x,y:y,width:w,height:h}}):0===symbolType.indexOf("path://")?graphic.makePath(symbolType.slice(7),{},new BoundingRect(x,y,w,h)):new Symbol({
shape:{symbolType:symbolType,x:x,y:y,width:w,height:h}}),symbolPath.__isEmptyBrush=isEmpty,
symbolPath.setColor=symbolPathSetColor,symbolPath.setColor(color),
symbolPath}};module.exports=symbolUtil},function(module,exports){
function sign(val){return val>=0?1:-1}function getStackedOnPoint(coordSys,data,idx){
for(var stackedOnSameSign,baseAxis=coordSys.getBaseAxis(),valueAxis=coordSys.getOtherAxis(baseAxis),valueStart=baseAxis.onZero?0:valueAxis.scale.getExtent()[0],valueDim=valueAxis.dim,baseDataOffset="x"===valueDim||"radius"===valueDim?1:0,stackedOn=data.stackedOn,val=data.get(valueDim,idx);stackedOn&&sign(stackedOn.get(valueDim,idx))===sign(val);){
stackedOnSameSign=stackedOn;break}var stackedData=[];return stackedData[baseDataOffset]=data.get(baseAxis.dim,idx),
stackedData[1-baseDataOffset]=stackedOnSameSign?stackedOnSameSign.get(valueDim,idx,!0):valueStart,
coordSys.dataToPoint(stackedData)}function diffData(oldData,newData){
var diffResult=[];return newData.diff(oldData).add(function(idx){
diffResult.push({cmd:"+",idx:idx})}).update(function(newIdx,oldIdx){
diffResult.push({cmd:"=",idx:oldIdx,idx1:newIdx})}).remove(function(idx){
diffResult.push({cmd:"-",idx:idx})}).execute(),diffResult}module.exports=function(oldData,newData,oldStackedOnPoints,newStackedOnPoints,oldCoordSys,newCoordSys){
for(var diff=diffData(oldData,newData),currPoints=[],nextPoints=[],currStackedPoints=[],nextStackedPoints=[],status=[],sortedIndices=[],rawIndices=[],dims=newCoordSys.dimensions,i=0;i<diff.length;i++){
var diffItem=diff[i],pointAdded=!0;switch(diffItem.cmd){case"=":
var currentPt=oldData.getItemLayout(diffItem.idx),nextPt=newData.getItemLayout(diffItem.idx1);
(isNaN(currentPt[0])||isNaN(currentPt[1]))&&(currentPt=nextPt.slice()),
currPoints.push(currentPt),nextPoints.push(nextPt),currStackedPoints.push(oldStackedOnPoints[diffItem.idx]),
nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]),rawIndices.push(newData.getRawIndex(diffItem.idx1));
break;case"+":var idx=diffItem.idx;currPoints.push(oldCoordSys.dataToPoint([newData.get(dims[0],idx,!0),newData.get(dims[1],idx,!0)])),
nextPoints.push(newData.getItemLayout(idx).slice()),currStackedPoints.push(getStackedOnPoint(oldCoordSys,newData,idx)),
nextStackedPoints.push(newStackedOnPoints[idx]),rawIndices.push(newData.getRawIndex(idx));
break;case"-":var idx=diffItem.idx,rawIndex=oldData.getRawIndex(idx);
rawIndex!==idx?(currPoints.push(oldData.getItemLayout(idx)),nextPoints.push(newCoordSys.dataToPoint([oldData.get(dims[0],idx,!0),oldData.get(dims[1],idx,!0)])),
currStackedPoints.push(oldStackedOnPoints[idx]),nextStackedPoints.push(getStackedOnPoint(newCoordSys,oldData,idx)),
rawIndices.push(rawIndex)):pointAdded=!1}pointAdded&&(status.push(diffItem),
sortedIndices.push(sortedIndices.length))}sortedIndices.sort(function(a,b){
return rawIndices[a]-rawIndices[b]});for(var sortedCurrPoints=[],sortedNextPoints=[],sortedCurrStackedPoints=[],sortedNextStackedPoints=[],sortedStatus=[],i=0;i<sortedIndices.length;i++){
var idx=sortedIndices[i];sortedCurrPoints[i]=currPoints[idx],
sortedNextPoints[i]=nextPoints[idx],sortedCurrStackedPoints[i]=currStackedPoints[idx],
sortedNextStackedPoints[i]=nextStackedPoints[idx],sortedStatus[i]=status[idx];
}return{current:sortedCurrPoints,next:sortedNextPoints,stackedOnCurrent:sortedCurrStackedPoints,
stackedOnNext:sortedNextStackedPoints,status:sortedStatus}}},function(module,exports,__webpack_require__){
function isPointNull(p){return isNaN(p[0])||isNaN(p[1])}function drawSegment(ctx,points,start,segLen,allLen,dir,smoothMin,smoothMax,smooth,smoothMonotone,connectNulls){
for(var prevIdx=0,idx=start,k=0;k<segLen;k++){var p=points[idx];
if(idx>=allLen||idx<0)break;if(isPointNull(p)){if(connectNulls){
idx+=dir;continue}break}if(idx===start)ctx[dir>0?"moveTo":"lineTo"](p[0],p[1]),
v2Copy(cp0,p);else if(smooth>0){var nextIdx=idx+dir,nextP=points[nextIdx];
if(connectNulls)for(;nextP&&isPointNull(points[nextIdx]);)nextIdx+=dir,
nextP=points[nextIdx];var ratioNextSeg=.5,prevP=points[prevIdx],nextP=points[nextIdx];
if(!nextP||isPointNull(nextP))v2Copy(cp1,p);else{isPointNull(nextP)&&!connectNulls&&(nextP=p),
vec2.sub(v,nextP,prevP);var lenPrevSeg,lenNextSeg;if("x"===smoothMonotone||"y"===smoothMonotone){
var dim="x"===smoothMonotone?0:1;lenPrevSeg=Math.abs(p[dim]-prevP[dim]),
lenNextSeg=Math.abs(p[dim]-nextP[dim])}else lenPrevSeg=vec2.dist(p,prevP),
lenNextSeg=vec2.dist(p,nextP);ratioNextSeg=lenNextSeg/(lenNextSeg+lenPrevSeg),
scaleAndAdd(cp1,p,v,-smooth*(1-ratioNextSeg))}vec2Min(cp0,cp0,smoothMax),
vec2Max(cp0,cp0,smoothMin),vec2Min(cp1,cp1,smoothMax),vec2Max(cp1,cp1,smoothMin),
ctx.bezierCurveTo(cp0[0],cp0[1],cp1[0],cp1[1],p[0],p[1]),scaleAndAdd(cp0,p,v,smooth*ratioNextSeg);
}else ctx.lineTo(p[0],p[1]);prevIdx=idx,idx+=dir}return k}function getBoundingBox(points,smoothConstraint){
var ptMin=[1/0,1/0],ptMax=[-(1/0),-(1/0)];if(smoothConstraint)for(var i=0;i<points.length;i++){
var pt=points[i];pt[0]<ptMin[0]&&(ptMin[0]=pt[0]),pt[1]<ptMin[1]&&(ptMin[1]=pt[1]),
pt[0]>ptMax[0]&&(ptMax[0]=pt[0]),pt[1]>ptMax[1]&&(ptMax[1]=pt[1]);
}return{min:smoothConstraint?ptMin:ptMax,max:smoothConstraint?ptMax:ptMin
}}var Path=__webpack_require__(45),vec2=__webpack_require__(10),vec2Min=vec2.min,vec2Max=vec2.max,scaleAndAdd=vec2.scaleAndAdd,v2Copy=vec2.copy,v=[],cp0=[],cp1=[];
module.exports={Polyline:Path.extend({type:"ec-polyline",shape:{
points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1
},style:{fill:null,stroke:"#000"},buildPath:function(ctx,shape){
var points=shape.points,i=0,len=points.length,result=getBoundingBox(points,shape.smoothConstraint);
if(shape.connectNulls){for(;len>0&&isPointNull(points[len-1]);len--);
for(;i<len&&isPointNull(points[i]);i++);}for(;i<len;)i+=drawSegment(ctx,points,i,len,len,1,result.min,result.max,shape.smooth,shape.smoothMonotone,shape.connectNulls)+1;
}}),Polygon:Path.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],
smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,
connectNulls:!1},buildPath:function(ctx,shape){var points=shape.points,stackedOnPoints=shape.stackedOnPoints,i=0,len=points.length,smoothMonotone=shape.smoothMonotone,bbox=getBoundingBox(points,shape.smoothConstraint),stackedOnBBox=getBoundingBox(stackedOnPoints,shape.smoothConstraint);
if(shape.connectNulls){for(;len>0&&isPointNull(points[len-1]);len--);
for(;i<len&&isPointNull(points[i]);i++);}for(;i<len;){var k=drawSegment(ctx,points,i,len,len,1,bbox.min,bbox.max,shape.smooth,smoothMonotone,shape.connectNulls);
drawSegment(ctx,stackedOnPoints,i+k-1,k,len,-1,stackedOnBBox.min,stackedOnBBox.max,shape.stackedOnSmooth,smoothMonotone,shape.connectNulls),
i+=k+1,ctx.closePath()}}})}},function(module,exports){module.exports=function(seriesType,defaultSymbolType,legendSymbol,ecModel,api){
ecModel.eachRawSeriesByType(seriesType,function(seriesModel){
var data=seriesModel.getData(),symbolType=seriesModel.get("symbol")||defaultSymbolType,symbolSize=seriesModel.get("symbolSize");
data.setVisual({legendSymbol:legendSymbol||symbolType,symbol:symbolType,
symbolSize:symbolSize}),ecModel.isSeriesFiltered(seriesModel)||("function"==typeof symbolSize&&data.each(function(idx){
var rawValue=seriesModel.getRawValue(idx),params=seriesModel.getDataParams(idx);
data.setItemVisual(idx,"symbolSize",symbolSize(rawValue,params));
}),data.each(function(idx){var itemModel=data.getItemModel(idx),itemSymbolType=itemModel.getShallow("symbol",!0),itemSymbolSize=itemModel.getShallow("symbolSize",!0);
null!=itemSymbolType&&data.setItemVisual(idx,"symbol",itemSymbolType),
null!=itemSymbolSize&&data.setItemVisual(idx,"symbolSize",itemSymbolSize);
}))})}},function(module,exports){module.exports=function(seriesType,ecModel){
ecModel.eachSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem;
if(coordSys){var dims=coordSys.dimensions;"singleAxis"===coordSys.type?data.each(dims[0],function(x,idx){
data.setItemLayout(idx,isNaN(x)?[NaN,NaN]:coordSys.dataToPoint(x));
}):data.each(dims,function(x,y,idx){data.setItemLayout(idx,isNaN(x)||isNaN(y)?[NaN,NaN]:coordSys.dataToPoint([x,y]));
},!0)}})}},function(module,exports){var samplers={average:function(frame){
for(var sum=0,count=0,i=0;i<frame.length;i++)isNaN(frame[i])||(sum+=frame[i],
count++);return 0===count?NaN:sum/count},sum:function(frame){
for(var sum=0,i=0;i<frame.length;i++)sum+=frame[i]||0;return sum;
},max:function(frame){for(var max=-(1/0),i=0;i<frame.length;i++)frame[i]>max&&(max=frame[i]);
return max},min:function(frame){for(var min=1/0,i=0;i<frame.length;i++)frame[i]<min&&(min=frame[i]);
return min},nearest:function(frame){return frame[0]}},indexSampler=function(frame,value){
return Math.round(frame.length/2)};module.exports=function(seriesType,ecModel,api){
ecModel.eachSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData(),sampling=seriesModel.get("sampling"),coordSys=seriesModel.coordinateSystem;
if("cartesian2d"===coordSys.type&&sampling){var baseAxis=coordSys.getBaseAxis(),valueAxis=coordSys.getOtherAxis(baseAxis),extent=baseAxis.getExtent(),size=extent[1]-extent[0],rate=Math.round(data.count()/size);
if(rate>1){var sampler;"string"==typeof sampling?sampler=samplers[sampling]:"function"==typeof sampling&&(sampler=sampling),
sampler&&(data=data.downSample(valueAxis.dim,1/rate,sampler,indexSampler),
seriesModel.setData(data))}}},this)}},function(module,exports,__webpack_require__){
"use strict";var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);
__webpack_require__(114),__webpack_require__(131),echarts.extendComponentView({
type:"grid",render:function(gridModel,ecModel){this.group.removeAll(),
gridModel.get("show")&&this.group.add(new graphic.Rect({shape:gridModel.coordinateSystem.getRect(),
style:zrUtil.defaults({fill:gridModel.get("backgroundColor")},gridModel.getItemStyle()),
silent:!0,z2:-1}))}}),echarts.registerPreprocessor(function(option){
option.xAxis&&option.yAxis&&!option.grid&&(option.grid={})})},function(module,exports,__webpack_require__){
function isAxisUsedInTheGrid(axisModel,gridModel,ecModel){return axisModel.getCoordSysModel()===gridModel;
}function getLabelUnionRect(axis){var rect,axisModel=axis.model,labels=axisModel.getFormattedLabels(),textStyleModel=axisModel.getModel("axisLabel.textStyle"),step=1,labelCount=labels.length;
labelCount>40&&(step=Math.ceil(labelCount/40));for(var i=0;i<labelCount;i+=step)if(!axis.isLabelIgnored(i)){
var singleRect=textStyleModel.getTextRect(labels[i]);rect?rect.union(singleRect):rect=singleRect;
}return rect}function Grid(gridModel,ecModel,api){this._coordsMap={},
this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(gridModel,ecModel,api),
this._model=gridModel}function updateAxisTransfrom(axis,coordBase){
var axisExtent=axis.getExtent(),axisExtentSum=axisExtent[0]+axisExtent[1];
axis.toGlobalCoord="x"===axis.dim?function(coord){return coord+coordBase;
}:function(coord){return axisExtentSum-coord+coordBase},axis.toLocalCoord="x"===axis.dim?function(coord){
return coord-coordBase}:function(coord){return axisExtentSum-coord+coordBase;
}}function findAxesModels(seriesModel,ecModel){return zrUtil.map(axesTypes,function(axisType){
var axisModel=seriesModel.getReferringComponents(axisType)[0];
if(!axisModel)throw new Error(axisType+' "'+zrUtil.retrieve(seriesModel.get(axisType+"Index"),seriesModel.get(axisType+"Id"),0)+'" not found');
return axisModel})}function isCartesian2D(seriesModel){return"cartesian2d"===seriesModel.get("coordinateSystem");
}var layout=__webpack_require__(21),axisHelper=__webpack_require__(115),zrUtil=__webpack_require__(4),Cartesian2D=__webpack_require__(121),Axis2D=__webpack_require__(123),each=zrUtil.each,ifAxisCrossZero=axisHelper.ifAxisCrossZero,niceScaleExtent=axisHelper.niceScaleExtent;
__webpack_require__(126);var gridProto=Grid.prototype;gridProto.type="grid",
gridProto.getRect=function(){return this._rect},gridProto.update=function(ecModel,api){
function ifAxisCanNotOnZero(otherAxisDim){var axes=axesMap[otherAxisDim];
for(var idx in axes)if(axes.hasOwnProperty(idx)){var axis=axes[idx];
if(axis&&("category"===axis.type||!ifAxisCrossZero(axis)))return!0;
}return!1}var axesMap=this._axesMap;this._updateScale(ecModel,this._model),
each(axesMap.x,function(xAxis){niceScaleExtent(xAxis,xAxis.model);
}),each(axesMap.y,function(yAxis){niceScaleExtent(yAxis,yAxis.model);
}),each(axesMap.x,function(xAxis){ifAxisCanNotOnZero("y")&&(xAxis.onZero=!1);
}),each(axesMap.y,function(yAxis){ifAxisCanNotOnZero("x")&&(yAxis.onZero=!1);
}),this.resize(this._model,api)},gridProto.resize=function(gridModel,api){
function adjustAxes(){each(axesList,function(axis){var isHorizontal=axis.isHorizontal(),extent=isHorizontal?[0,gridRect.width]:[0,gridRect.height],idx=axis.inverse?1:0;
axis.setExtent(extent[idx],extent[1-idx]),updateAxisTransfrom(axis,isHorizontal?gridRect.x:gridRect.y);
})}var gridRect=layout.getLayoutRect(gridModel.getBoxLayoutParams(),{
width:api.getWidth(),height:api.getHeight()});this._rect=gridRect;
var axesList=this._axesList;adjustAxes(),gridModel.get("containLabel")&&(each(axesList,function(axis){
if(!axis.model.get("axisLabel.inside")){var labelUnionRect=getLabelUnionRect(axis);
if(labelUnionRect){var dim=axis.isHorizontal()?"height":"width",margin=axis.model.get("axisLabel.margin");
gridRect[dim]-=labelUnionRect[dim]+margin,"top"===axis.position?gridRect.y+=labelUnionRect.height+margin:"left"===axis.position&&(gridRect.x+=labelUnionRect.width+margin);
}}}),adjustAxes())},gridProto.getAxis=function(axisType,axisIndex){
var axesMapOnDim=this._axesMap[axisType];if(null!=axesMapOnDim){
if(null==axisIndex)for(var name in axesMapOnDim)if(axesMapOnDim.hasOwnProperty(name))return axesMapOnDim[name];
return axesMapOnDim[axisIndex]}},gridProto.getCartesian=function(xAxisIndex,yAxisIndex){
if(null!=xAxisIndex&&null!=yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex;
return this._coordsMap[key]}for(var i=0,coordList=this._coordsList;i<coordList.length;i++)if(coordList[i].getAxis("x").index===xAxisIndex||coordList[i].getAxis("y").index===yAxisIndex)return coordList[i];
},gridProto.convertToPixel=function(ecModel,finder,value){var target=this._findConvertTarget(ecModel,finder);
return target.cartesian?target.cartesian.dataToPoint(value):target.axis?target.axis.toGlobalCoord(target.axis.dataToCoord(value)):null;
},gridProto.convertFromPixel=function(ecModel,finder,value){var target=this._findConvertTarget(ecModel,finder);
return target.cartesian?target.cartesian.pointToData(value):target.axis?target.axis.coordToData(target.axis.toLocalCoord(value)):null;
},gridProto._findConvertTarget=function(ecModel,finder){var cartesian,axis,seriesModel=finder.seriesModel,xAxisModel=finder.xAxisModel||seriesModel&&seriesModel.getReferringComponents("xAxis")[0],yAxisModel=finder.yAxisModel||seriesModel&&seriesModel.getReferringComponents("yAxis")[0],gridModel=finder.gridModel,coordsList=this._coordsList;
if(seriesModel)cartesian=seriesModel.coordinateSystem,zrUtil.indexOf(coordsList,cartesian)<0&&(cartesian=null);else if(xAxisModel&&yAxisModel)cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex);else if(xAxisModel)axis=this.getAxis("x",xAxisModel.componentIndex);else if(yAxisModel)axis=this.getAxis("y",yAxisModel.componentIndex);else if(gridModel){
var grid=gridModel.coordinateSystem;grid===this&&(cartesian=this._coordsList[0]);
}return{cartesian:cartesian,axis:axis}},gridProto.containPoint=function(point){
var coord=this._coordsList[0];if(coord)return coord.containPoint(point);
},gridProto._initCartesian=function(gridModel,ecModel,api){function createAxisCreator(axisType){
return function(axisModel,idx){if(isAxisUsedInTheGrid(axisModel,gridModel,ecModel)){
var axisPosition=axisModel.get("position");"x"===axisType?"top"!==axisPosition&&"bottom"!==axisPosition&&(axisPosition="bottom",
axisPositionUsed[axisPosition]&&(axisPosition="top"===axisPosition?"bottom":"top")):"left"!==axisPosition&&"right"!==axisPosition&&(axisPosition="left",
axisPositionUsed[axisPosition]&&(axisPosition="left"===axisPosition?"right":"left")),
axisPositionUsed[axisPosition]=!0;var axis=new Axis2D(axisType,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisPosition),isCategory="category"===axis.type;
axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),
axis.onZero=axisModel.get("axisLine.onZero"),axisModel.axis=axis,
axis.model=axisModel,axis.grid=this,axis.index=idx,this._axesList.push(axis),
axesMap[axisType][idx]=axis,axesCount[axisType]++}}}var axisPositionUsed={
left:!1,right:!1,top:!1,bottom:!1},axesMap={x:{},y:{}},axesCount={
x:0,y:0};return ecModel.eachComponent("xAxis",createAxisCreator("x"),this),
ecModel.eachComponent("yAxis",createAxisCreator("y"),this),axesCount.x&&axesCount.y?(this._axesMap=axesMap,
void each(axesMap.x,function(xAxis,xAxisIndex){each(axesMap.y,function(yAxis,yAxisIndex){
var key="x"+xAxisIndex+"y"+yAxisIndex,cartesian=new Cartesian2D(key);
cartesian.grid=this,this._coordsMap[key]=cartesian,this._coordsList.push(cartesian),
cartesian.addAxis(xAxis),cartesian.addAxis(yAxis)},this)},this)):(this._axesMap={},
void(this._axesList=[]))},gridProto._updateScale=function(ecModel,gridModel){
function unionExtent(data,axis,seriesModel){each(seriesModel.coordDimToDataDim(axis.dim),function(dim){
axis.scale.unionExtentFromData(data,dim)})}zrUtil.each(this._axesList,function(axis){
axis.scale.setExtent(1/0,-(1/0))}),ecModel.eachSeries(function(seriesModel){
if(isCartesian2D(seriesModel)){var axesModels=findAxesModels(seriesModel,ecModel),xAxisModel=axesModels[0],yAxisModel=axesModels[1];
if(!isAxisUsedInTheGrid(xAxisModel,gridModel,ecModel)||!isAxisUsedInTheGrid(yAxisModel,gridModel,ecModel))return;
var cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex),data=seriesModel.getData(),xAxis=cartesian.getAxis("x"),yAxis=cartesian.getAxis("y");
"list"===data.type&&(unionExtent(data,xAxis,seriesModel),unionExtent(data,yAxis,seriesModel));
}},this)};var axesTypes=["xAxis","yAxis"];Grid.create=function(ecModel,api){
var grids=[];return ecModel.eachComponent("grid",function(gridModel,idx){
var grid=new Grid(gridModel,ecModel,api);grid.name="grid_"+idx,
grid.resize(gridModel,api),gridModel.coordinateSystem=grid,grids.push(grid);
}),ecModel.eachSeries(function(seriesModel){if(isCartesian2D(seriesModel)){
var axesModels=findAxesModels(seriesModel,ecModel),xAxisModel=axesModels[0],yAxisModel=axesModels[1],gridModel=xAxisModel.getCoordSysModel();
if(!gridModel)throw new Error('Grid "'+zrUtil.retrieve(xAxisModel.get("gridIndex"),xAxisModel.get("gridId"),0)+'" not found');
if(xAxisModel.getCoordSysModel()!==yAxisModel.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid");
var grid=gridModel.coordinateSystem;seriesModel.coordinateSystem=grid.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex);
}}),grids},Grid.dimensions=Cartesian2D.prototype.dimensions,__webpack_require__(26).register("cartesian2d",Grid),
module.exports=Grid},function(module,exports,__webpack_require__){
var OrdinalScale=__webpack_require__(116),IntervalScale=__webpack_require__(118);
__webpack_require__(119),__webpack_require__(120);var Scale=__webpack_require__(117),numberUtil=__webpack_require__(7),zrUtil=__webpack_require__(4),textContain=__webpack_require__(8),axisHelper={};
axisHelper.getScaleExtent=function(axis,model){var axisDataLen,boundaryGap,span,scale=axis.scale,scaleType=scale.type,min=model.getMin(),max=model.getMax(),fixMin=null!=min,fixMax=null!=max,originalExtent=scale.getExtent();
return"ordinal"===scaleType?axisDataLen=(model.get("data")||[]).length:(boundaryGap=model.get("boundaryGap"),
zrUtil.isArray(boundaryGap)||(boundaryGap=[boundaryGap||0,boundaryGap||0]),
boundaryGap[0]=numberUtil.parsePercent(boundaryGap[0],1),boundaryGap[1]=numberUtil.parsePercent(boundaryGap[1],1),
span=originalExtent[1]-originalExtent[0]),null==min&&(min="ordinal"===scaleType?axisDataLen?0:NaN:originalExtent[0]-boundaryGap[0]*span),
null==max&&(max="ordinal"===scaleType?axisDataLen?axisDataLen-1:NaN:originalExtent[1]+boundaryGap[1]*span),
"dataMin"===min&&(min=originalExtent[0]),"dataMax"===max&&(max=originalExtent[1]),
(null==min||!isFinite(min))&&(min=NaN),(null==max||!isFinite(max))&&(max=NaN),
axis.setBlank(zrUtil.eqNaN(min)||zrUtil.eqNaN(max)),model.getNeedCrossZero()&&(min>0&&max>0&&!fixMin&&(min=0),
min<0&&max<0&&!fixMax&&(max=0)),[min,max]},axisHelper.niceScaleExtent=function(axis,model){
var scale=axis.scale,extent=axisHelper.getScaleExtent(axis,model),fixMin=null!=model.getMin(),fixMax=null!=model.getMax(),splitNumber=model.get("splitNumber");
"log"===scale.type&&(scale.base=model.get("logBase")),scale.setExtent(extent[0],extent[1]),
scale.niceExtent(splitNumber,fixMin,fixMax);var minInterval=model.get("minInterval");
if(isFinite(minInterval)&&!fixMin&&!fixMax&&"interval"===scale.type){
var interval=scale.getInterval(),intervalScale=Math.max(Math.abs(interval),minInterval)/interval;
extent=scale.getExtent();var origin=(extent[1]+extent[0])/2;scale.setExtent(intervalScale*(extent[0]-origin)+origin,intervalScale*(extent[1]-origin)+origin),
scale.niceExtent(splitNumber)}var interval=model.get("interval");
null!=interval&&scale.setInterval&&scale.setInterval(interval);
},axisHelper.createScaleByModel=function(model,axisType){if(axisType=axisType||model.get("type"))switch(axisType){
case"category":return new OrdinalScale(model.getCategories(),[1/0,-(1/0)]);
case"value":return new IntervalScale;default:return(Scale.getClass(axisType)||IntervalScale).create(model);
}},axisHelper.ifAxisCrossZero=function(axis){var dataExtent=axis.scale.getExtent(),min=dataExtent[0],max=dataExtent[1];
return!(min>0&&max>0||min<0&&max<0)},axisHelper.getAxisLabelInterval=function(tickCoords,labels,font,isAxisHorizontal){
var textSpaceTakenRect,autoLabelInterval=0,accumulatedLabelInterval=0,step=1;
labels.length>40&&(step=Math.floor(labels.length/40));for(var i=0;i<tickCoords.length;i+=step){
var tickCoord=tickCoords[i],rect=textContain.getBoundingRect(labels[i],font,"center","top");
rect[isAxisHorizontal?"x":"y"]+=tickCoord,rect[isAxisHorizontal?"width":"height"]*=1.3,
textSpaceTakenRect?textSpaceTakenRect.intersect(rect)?(accumulatedLabelInterval++,
autoLabelInterval=Math.max(autoLabelInterval,accumulatedLabelInterval)):(textSpaceTakenRect.union(rect),
accumulatedLabelInterval=0):textSpaceTakenRect=rect.clone()}return 0===autoLabelInterval&&step>1?step:(autoLabelInterval+1)*step-1;
},axisHelper.getFormattedLabels=function(axis,labelFormatter){
var scale=axis.scale,labels=scale.getTicksLabels(),ticks=scale.getTicks();
return"string"==typeof labelFormatter?(labelFormatter=function(tpl){
return function(val){return tpl.replace("{value}",null!=val?val:"");
}}(labelFormatter),zrUtil.map(labels,labelFormatter)):"function"==typeof labelFormatter?zrUtil.map(ticks,function(tick,idx){
return labelFormatter("category"===axis.type?scale.getLabel(tick):tick,idx);
},this):labels},module.exports=axisHelper},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),Scale=__webpack_require__(117),scaleProto=Scale.prototype,OrdinalScale=Scale.extend({
type:"ordinal",init:function(data,extent){this._data=data,this._extent=extent||[0,data.length-1];
},parse:function(val){return"string"==typeof val?zrUtil.indexOf(this._data,val):Math.round(val);
},contain:function(rank){return rank=this.parse(rank),scaleProto.contain.call(this,rank)&&null!=this._data[rank];
},normalize:function(val){return scaleProto.normalize.call(this,this.parse(val));
},scale:function(val){return Math.round(scaleProto.scale.call(this,val));
},getTicks:function(){for(var ticks=[],extent=this._extent,rank=extent[0];rank<=extent[1];)ticks.push(rank),
rank++;return ticks},getLabel:function(n){return this._data[n];
},count:function(){return this._extent[1]-this._extent[0]+1},
unionExtentFromData:function(data,dim){this.unionExtent(data.getDataExtent(dim,!1));
},niceTicks:zrUtil.noop,niceExtent:zrUtil.noop});OrdinalScale.create=function(){
return new OrdinalScale},module.exports=OrdinalScale},function(module,exports,__webpack_require__){
function Scale(){this._extent=[1/0,-(1/0)],this._interval=0,this.init&&this.init.apply(this,arguments);
}var clazzUtil=__webpack_require__(13),scaleProto=Scale.prototype;
scaleProto.parse=function(val){return val},scaleProto.contain=function(val){
var extent=this._extent;return val>=extent[0]&&val<=extent[1];
},scaleProto.normalize=function(val){var extent=this._extent;return extent[1]===extent[0]?.5:(val-extent[0])/(extent[1]-extent[0]);
},scaleProto.scale=function(val){var extent=this._extent;return val*(extent[1]-extent[0])+extent[0];
},scaleProto.unionExtent=function(other){var extent=this._extent;
other[0]<extent[0]&&(extent[0]=other[0]),other[1]>extent[1]&&(extent[1]=other[1]);
},scaleProto.unionExtentFromData=function(data,dim){this.unionExtent(data.getDataExtent(dim,!0));
},scaleProto.getExtent=function(){return this._extent.slice();
},scaleProto.setExtent=function(start,end){var thisExtent=this._extent;
isNaN(start)||(thisExtent[0]=start),isNaN(end)||(thisExtent[1]=end);
},scaleProto.getTicksLabels=function(){for(var labels=[],ticks=this.getTicks(),i=0;i<ticks.length;i++)labels.push(this.getLabel(ticks[i]));
return labels},clazzUtil.enableClassExtend(Scale),clazzUtil.enableClassManagement(Scale,{
registerWhenExtend:!0}),module.exports=Scale},function(module,exports,__webpack_require__){
var numberUtil=__webpack_require__(7),formatUtil=__webpack_require__(6),Scale=__webpack_require__(117),mathFloor=Math.floor,mathCeil=Math.ceil,getPrecisionSafe=numberUtil.getPrecisionSafe,roundingErrorFix=numberUtil.round,IntervalScale=Scale.extend({
type:"interval",_interval:0,setExtent:function(start,end){var thisExtent=this._extent;
isNaN(start)||(thisExtent[0]=parseFloat(start)),isNaN(end)||(thisExtent[1]=parseFloat(end));
},unionExtent:function(other){var extent=this._extent;other[0]<extent[0]&&(extent[0]=other[0]),
other[1]>extent[1]&&(extent[1]=other[1]),IntervalScale.prototype.setExtent.call(this,extent[0],extent[1]);
},getInterval:function(){return this._interval||this.niceTicks(),
this._interval},setInterval:function(interval){this._interval=interval,
this._niceExtent=this._extent.slice()},getTicks:function(){this._interval||this.niceTicks();
var interval=this._interval,extent=this._extent,ticks=[],safeLimit=1e4;
if(interval){var niceExtent=this._niceExtent,precision=getPrecisionSafe(interval)+2;
extent[0]<niceExtent[0]&&ticks.push(extent[0]);for(var tick=niceExtent[0];tick<=niceExtent[1];)if(ticks.push(tick),
tick=roundingErrorFix(tick+interval,precision),ticks.length>safeLimit)return[];
extent[1]>(ticks.length?ticks[ticks.length-1]:niceExtent[1])&&ticks.push(extent[1]);
}return ticks},getTicksLabels:function(){for(var labels=[],ticks=this.getTicks(),i=0;i<ticks.length;i++)labels.push(this.getLabel(ticks[i]));
return labels},getLabel:function(data){return formatUtil.addCommas(data);
},niceTicks:function(splitNumber){splitNumber=splitNumber||5;var extent=this._extent,span=extent[1]-extent[0];
if(isFinite(span)){span<0&&(span=-span,extent.reverse());var step=roundingErrorFix(numberUtil.nice(span/splitNumber,!0),Math.max(getPrecisionSafe(extent[0]),getPrecisionSafe(extent[1]))+2),precision=getPrecisionSafe(step)+2,niceExtent=[roundingErrorFix(mathCeil(extent[0]/step)*step,precision),roundingErrorFix(mathFloor(extent[1]/step)*step,precision)];
this._interval=step,this._niceExtent=niceExtent}},niceExtent:function(splitNumber,fixMin,fixMax){
var extent=this._extent;if(extent[0]===extent[1])if(0!==extent[0]){
var expandSize=extent[0];fixMax?extent[0]-=expandSize/2:(extent[1]+=expandSize/2,
extent[0]-=expandSize/2)}else extent[1]=1;var span=extent[1]-extent[0];
isFinite(span)||(extent[0]=0,extent[1]=1),this.niceTicks(splitNumber);
var interval=this._interval;fixMin||(extent[0]=roundingErrorFix(mathFloor(extent[0]/interval)*interval)),
fixMax||(extent[1]=roundingErrorFix(mathCeil(extent[1]/interval)*interval));
}});IntervalScale.create=function(){return new IntervalScale},
module.exports=IntervalScale},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),formatUtil=__webpack_require__(6),IntervalScale=__webpack_require__(118),intervalScaleProto=IntervalScale.prototype,mathCeil=Math.ceil,mathFloor=Math.floor,ONE_SECOND=1e3,ONE_MINUTE=60*ONE_SECOND,ONE_HOUR=60*ONE_MINUTE,ONE_DAY=24*ONE_HOUR,bisect=function(a,x,lo,hi){
for(;lo<hi;){var mid=lo+hi>>>1;a[mid][2]<x?lo=mid+1:hi=mid}return lo;
},TimeScale=IntervalScale.extend({type:"time",getLabel:function(val){
var stepLvl=this._stepLvl,date=new Date(val);return formatUtil.formatTime(stepLvl[0],date);
},niceExtent:function(approxTickNum,fixMin,fixMax){var extent=this._extent;
if(extent[0]===extent[1]&&(extent[0]-=ONE_DAY,extent[1]+=ONE_DAY),
extent[1]===-(1/0)&&extent[0]===1/0){var d=new Date;extent[1]=new Date(d.getFullYear(),d.getMonth(),d.getDate()),
extent[0]=extent[1]-ONE_DAY}this.niceTicks(approxTickNum);var interval=this._interval;
fixMin||(extent[0]=numberUtil.round(mathFloor(extent[0]/interval)*interval)),
fixMax||(extent[1]=numberUtil.round(mathCeil(extent[1]/interval)*interval));
},niceTicks:function(approxTickNum){approxTickNum=approxTickNum||10;
var extent=this._extent,span=extent[1]-extent[0],approxInterval=span/approxTickNum,scaleLevelsLen=scaleLevels.length,idx=bisect(scaleLevels,approxInterval,0,scaleLevelsLen),level=scaleLevels[Math.min(idx,scaleLevelsLen-1)],interval=level[2];
if("year"===level[0]){var yearSpan=span/interval,yearStep=numberUtil.nice(yearSpan/approxTickNum,!0);
interval*=yearStep}var niceExtent=[mathCeil(extent[0]/interval)*interval,mathFloor(extent[1]/interval)*interval];
this._stepLvl=level,this._interval=interval,this._niceExtent=niceExtent;
},parse:function(val){return+numberUtil.parseDate(val)}});zrUtil.each(["contain","normalize"],function(methodName){
TimeScale.prototype[methodName]=function(val){return intervalScaleProto[methodName].call(this,this.parse(val));
}});var scaleLevels=[["hh:mm:ss",1,ONE_SECOND],["hh:mm:ss",5,5*ONE_SECOND],["hh:mm:ss",10,10*ONE_SECOND],["hh:mm:ss",15,15*ONE_SECOND],["hh:mm:ss",30,30*ONE_SECOND],["hh:mm\nMM-dd",1,ONE_MINUTE],["hh:mm\nMM-dd",5,5*ONE_MINUTE],["hh:mm\nMM-dd",10,10*ONE_MINUTE],["hh:mm\nMM-dd",15,15*ONE_MINUTE],["hh:mm\nMM-dd",30,30*ONE_MINUTE],["hh:mm\nMM-dd",1,ONE_HOUR],["hh:mm\nMM-dd",2,2*ONE_HOUR],["hh:mm\nMM-dd",6,6*ONE_HOUR],["hh:mm\nMM-dd",12,12*ONE_HOUR],["MM-dd\nyyyy",1,ONE_DAY],["week",7,7*ONE_DAY],["month",1,31*ONE_DAY],["quarter",3,380*ONE_DAY/4],["half-year",6,380*ONE_DAY/2],["year",1,380*ONE_DAY]];
TimeScale.create=function(){return new TimeScale},module.exports=TimeScale;
},function(module,exports,__webpack_require__){function fixRoundingError(val,originalVal){
return roundingErrorFix(val,getPrecisionSafe(originalVal))}var zrUtil=__webpack_require__(4),Scale=__webpack_require__(117),numberUtil=__webpack_require__(7),IntervalScale=__webpack_require__(118),scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,getPrecisionSafe=numberUtil.getPrecisionSafe,roundingErrorFix=numberUtil.round,mathFloor=Math.floor,mathCeil=Math.ceil,mathPow=Math.pow,mathLog=Math.log,LogScale=Scale.extend({
type:"log",base:10,$constructor:function(){Scale.apply(this,arguments),
this._originalScale=new IntervalScale},getTicks:function(){var originalScale=this._originalScale,extent=this._extent,originalExtent=originalScale.getExtent();
return zrUtil.map(intervalScaleProto.getTicks.call(this),function(val){
var powVal=numberUtil.round(mathPow(this.base,val));return powVal=val===extent[0]&&originalScale.__fixMin?fixRoundingError(powVal,originalExtent[0]):powVal,
powVal=val===extent[1]&&originalScale.__fixMax?fixRoundingError(powVal,originalExtent[1]):powVal;
},this)},getLabel:intervalScaleProto.getLabel,scale:function(val){
return val=scaleProto.scale.call(this,val),mathPow(this.base,val);
},setExtent:function(start,end){var base=this.base;start=mathLog(start)/mathLog(base),
end=mathLog(end)/mathLog(base),intervalScaleProto.setExtent.call(this,start,end);
},getExtent:function(){var base=this.base,extent=scaleProto.getExtent.call(this);
extent[0]=mathPow(base,extent[0]),extent[1]=mathPow(base,extent[1]);
var originalScale=this._originalScale,originalExtent=originalScale.getExtent();
return originalScale.__fixMin&&(extent[0]=fixRoundingError(extent[0],originalExtent[0])),
originalScale.__fixMax&&(extent[1]=fixRoundingError(extent[1],originalExtent[1])),
extent},unionExtent:function(extent){this._originalScale.unionExtent(extent);
var base=this.base;extent[0]=mathLog(extent[0])/mathLog(base),
extent[1]=mathLog(extent[1])/mathLog(base),scaleProto.unionExtent.call(this,extent);
},unionExtentFromData:function(data,dim){this.unionExtent(data.getDataExtent(dim,!0,function(val){
return val>0}))},niceTicks:function(approxTickNum){approxTickNum=approxTickNum||10;
var extent=this._extent,span=extent[1]-extent[0];if(!(span===1/0||span<=0)){
var interval=numberUtil.quantity(span),err=approxTickNum/span*interval;
for(err<=.5&&(interval*=10);!isNaN(interval)&&Math.abs(interval)<1&&Math.abs(interval)>0;)interval*=10;
var niceExtent=[numberUtil.round(mathCeil(extent[0]/interval)*interval),numberUtil.round(mathFloor(extent[1]/interval)*interval)];
this._interval=interval,this._niceExtent=niceExtent}},niceExtent:function(splitNumber,fixMin,fixMax){
intervalScaleProto.niceExtent.call(this,splitNumber,fixMin,fixMax);
var originalScale=this._originalScale;originalScale.__fixMin=fixMin,
originalScale.__fixMax=fixMax}});zrUtil.each(["contain","normalize"],function(methodName){
LogScale.prototype[methodName]=function(val){return val=mathLog(val)/mathLog(this.base),
scaleProto[methodName].call(this,val)}}),LogScale.create=function(){
return new LogScale},module.exports=LogScale},function(module,exports,__webpack_require__){
"use strict";function Cartesian2D(name){Cartesian.call(this,name);
}var zrUtil=__webpack_require__(4),Cartesian=__webpack_require__(122);
Cartesian2D.prototype={constructor:Cartesian2D,type:"cartesian2d",
dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x");
},containPoint:function(point){var axisX=this.getAxis("x"),axisY=this.getAxis("y");
return axisX.contain(axisX.toLocalCoord(point[0]))&&axisY.contain(axisY.toLocalCoord(point[1]));
},containData:function(data){return this.getAxis("x").containData(data[0])&&this.getAxis("y").containData(data[1]);
},dataToPoints:function(data,stack){return data.mapArray(["x","y"],function(x,y){
return this.dataToPoint([x,y])},stack,this)},dataToPoint:function(data,clamp){
var xAxis=this.getAxis("x"),yAxis=this.getAxis("y");return[xAxis.toGlobalCoord(xAxis.dataToCoord(data[0],clamp)),yAxis.toGlobalCoord(yAxis.dataToCoord(data[1],clamp))];
},pointToData:function(point,clamp){var xAxis=this.getAxis("x"),yAxis=this.getAxis("y");
return[xAxis.coordToData(xAxis.toLocalCoord(point[0]),clamp),yAxis.coordToData(yAxis.toLocalCoord(point[1]),clamp)];
},getOtherAxis:function(axis){return this.getAxis("x"===axis.dim?"y":"x");
}},zrUtil.inherits(Cartesian2D,Cartesian),module.exports=Cartesian2D;
},function(module,exports,__webpack_require__){"use strict";function dimAxisMapper(dim){
return this._axes[dim]}var zrUtil=__webpack_require__(4),Cartesian=function(name){
this._axes={},this._dimList=[],this.name=name||""};Cartesian.prototype={
constructor:Cartesian,type:"cartesian",getAxis:function(dim){
return this._axes[dim]},getAxes:function(){return zrUtil.map(this._dimList,dimAxisMapper,this);
},getAxesByScale:function(scaleType){return scaleType=scaleType.toLowerCase(),
zrUtil.filter(this.getAxes(),function(axis){return axis.scale.type===scaleType;
})},addAxis:function(axis){var dim=axis.dim;this._axes[dim]=axis,
this._dimList.push(dim)},dataToCoord:function(val){return this._dataCoordConvert(val,"dataToCoord");
},coordToData:function(val){return this._dataCoordConvert(val,"coordToData");
},_dataCoordConvert:function(input,method){for(var dimList=this._dimList,output=input instanceof Array?[]:{},i=0;i<dimList.length;i++){
var dim=dimList[i],axis=this._axes[dim];output[dim]=axis[method](input[dim]);
}return output}},module.exports=Cartesian},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),Axis=__webpack_require__(124),axisLabelInterval=__webpack_require__(125),Axis2D=function(dim,scale,coordExtent,axisType,position){
Axis.call(this,dim,scale,coordExtent),this.type=axisType||"value",
this.position=position||"bottom"};Axis2D.prototype={constructor:Axis2D,
index:0,onZero:!1,model:null,isHorizontal:function(){var position=this.position;
return"top"===position||"bottom"===position},getGlobalExtent:function(){
var ret=this.getExtent();return ret[0]=this.toGlobalCoord(ret[0]),
ret[1]=this.toGlobalCoord(ret[1]),ret},getLabelInterval:function(){
var labelInterval=this._labelInterval;return labelInterval||(labelInterval=this._labelInterval=axisLabelInterval(this)),
labelInterval},isLabelIgnored:function(idx){if("category"===this.type){
var labelInterval=this.getLabelInterval();return"function"==typeof labelInterval&&!labelInterval(idx,this.scale.getLabel(idx))||idx%(labelInterval+1);
}},toLocalCoord:null,toGlobalCoord:null},zrUtil.inherits(Axis2D,Axis),
module.exports=Axis2D},function(module,exports,__webpack_require__){
function fixExtentWithBands(extent,nTick){var size=extent[1]-extent[0],len=nTick,margin=size/len/2;
extent[0]+=margin,extent[1]-=margin}var numberUtil=__webpack_require__(7),linearMap=numberUtil.linearMap,zrUtil=__webpack_require__(4),normalizedExtent=[0,1],Axis=function(dim,scale,extent){
this.dim=dim,this.scale=scale,this._extent=extent||[0,0],this.inverse=!1,
this.onBand=!1};Axis.prototype={constructor:Axis,contain:function(coord){
var extent=this._extent,min=Math.min(extent[0],extent[1]),max=Math.max(extent[0],extent[1]);
return coord>=min&&coord<=max},containData:function(data){return this.contain(this.dataToCoord(data));
},getExtent:function(){var ret=this._extent.slice();return ret;
},getPixelPrecision:function(dataExtent){return numberUtil.getPixelPrecision(dataExtent||this.scale.getExtent(),this._extent);
},setExtent:function(start,end){var extent=this._extent;extent[0]=start,
extent[1]=end},dataToCoord:function(data,clamp){var extent=this._extent,scale=this.scale;
return data=scale.normalize(data),this.onBand&&"ordinal"===scale.type&&(extent=extent.slice(),
fixExtentWithBands(extent,scale.count())),linearMap(data,normalizedExtent,extent,clamp);
},coordToData:function(coord,clamp){var extent=this._extent,scale=this.scale;
this.onBand&&"ordinal"===scale.type&&(extent=extent.slice(),fixExtentWithBands(extent,scale.count()));
var t=linearMap(coord,extent,normalizedExtent,clamp);return this.scale.scale(t);
},getTicksCoords:function(alignWithLabel){if(this.onBand&&!alignWithLabel){
for(var bands=this.getBands(),coords=[],i=0;i<bands.length;i++)coords.push(bands[i][0]);
return bands[i-1]&&coords.push(bands[i-1][1]),coords}return zrUtil.map(this.scale.getTicks(),this.dataToCoord,this);
},getLabelsCoords:function(){return zrUtil.map(this.scale.getTicks(),this.dataToCoord,this);
},getBands:function(){for(var extent=this.getExtent(),bands=[],len=this.scale.count(),start=extent[0],end=extent[1],span=end-start,i=0;i<len;i++)bands.push([span*i/len+start,span*(i+1)/len+start]);
return bands},getBandWidth:function(){var axisExtent=this._extent,dataExtent=this.scale.getExtent(),len=dataExtent[1]-dataExtent[0]+(this.onBand?1:0);
0===len&&(len=1);var size=Math.abs(axisExtent[1]-axisExtent[0]);
return Math.abs(size)/len},isBlank:function(){return this._isBlank;
},setBlank:function(isBlank){this._isBlank=isBlank}},module.exports=Axis;
},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),axisHelper=__webpack_require__(115);
module.exports=function(axis){var axisModel=axis.model,labelModel=axisModel.getModel("axisLabel"),labelInterval=labelModel.get("interval");
return"category"!==axis.type||"auto"!==labelInterval?"auto"===labelInterval?0:labelInterval:axisHelper.getAxisLabelInterval(zrUtil.map(axis.scale.getTicks(),axis.dataToCoord,axis),axisModel.getFormattedLabels(),labelModel.getModel("textStyle").getFont(),axis.isHorizontal());
}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(127);
var ComponentModel=__webpack_require__(19);module.exports=ComponentModel.extend({
type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,
defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",
bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,
borderColor:"#ccc"}})},function(module,exports,__webpack_require__){
"use strict";function getAxisType(axisDim,option){return option.type||(option.data?"category":"value");
}var ComponentModel=__webpack_require__(19),zrUtil=__webpack_require__(4),axisModelCreator=__webpack_require__(128),AxisModel=ComponentModel.extend({
type:"cartesian2dAxis",axis:null,init:function(){AxisModel.superApply(this,"init",arguments),
this.resetRange()},mergeOption:function(){AxisModel.superApply(this,"mergeOption",arguments),
this.resetRange()},restoreData:function(){AxisModel.superApply(this,"restoreData",arguments),
this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({
mainType:"grid",index:this.option.gridIndex,id:this.option.gridId
})[0]}});zrUtil.merge(AxisModel.prototype,__webpack_require__(130));
var extraOption={offset:0};axisModelCreator("x",AxisModel,getAxisType,extraOption),
axisModelCreator("y",AxisModel,getAxisType,extraOption),module.exports=AxisModel;
},function(module,exports,__webpack_require__){var axisDefault=__webpack_require__(129),zrUtil=__webpack_require__(4),ComponentModel=__webpack_require__(19),layout=__webpack_require__(21),AXIS_TYPES=["value","category","time","log"];
module.exports=function(axisName,BaseAxisModelClass,axisTypeDefaulter,extraDefaultOption){
zrUtil.each(AXIS_TYPES,function(axisType){BaseAxisModelClass.extend({
type:axisName+"Axis."+axisType,mergeDefaultAndTheme:function(option,ecModel){
var layoutMode=this.layoutMode,inputPositionParams=layoutMode?layout.getLayoutParams(option):{},themeModel=ecModel.getTheme();
zrUtil.merge(option,themeModel.get(axisType+"Axis")),zrUtil.merge(option,this.getDefaultOption()),
option.type=axisTypeDefaulter(axisName,option),layoutMode&&layout.mergeLayoutParam(option,inputPositionParams,layoutMode);
},defaultOption:zrUtil.mergeAll([{},axisDefault[axisType+"Axis"],extraDefaultOption],!0)
})}),ComponentModel.registerSubTypeDefaulter(axisName+"Axis",zrUtil.curry(axisTypeDefaulter,axisName));
}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),defaultOption={
show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,
nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},
nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisLine:{
show:!0,onZero:!0,lineStyle:{color:"#333",width:1,type:"solid"
}},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},
axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12
}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"
}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]
}}},categoryAxis=zrUtil.merge({boundaryGap:!0,splitLine:{show:!1
},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"
}},defaultOption),valueAxis=zrUtil.merge({boundaryGap:[0,0],splitNumber:5
},defaultOption),timeAxis=zrUtil.defaults({scale:!0,min:"dataMin",
max:"dataMax"},valueAxis),logAxis=zrUtil.defaults({logBase:10
},valueAxis);logAxis.scale=!0,module.exports={categoryAxis:categoryAxis,
valueAxis:valueAxis,timeAxis:timeAxis,logAxis:logAxis}},function(module,exports,__webpack_require__){
function getName(obj){return zrUtil.isObject(obj)&&null!=obj.value?obj.value:obj;
}var zrUtil=__webpack_require__(4),axisHelper=__webpack_require__(115);
module.exports={getFormattedLabels:function(){return axisHelper.getFormattedLabels(this.axis,this.get("axisLabel.formatter"));
},getCategories:function(){return"category"===this.get("type")&&zrUtil.map(this.get("data"),getName);
},getMin:function(origin){var option=this.option,min=origin||null==option.rangeStart?option.min:option.rangeStart;
return null==min||"dataMin"===min||zrUtil.eqNaN(min)||(min=this.axis.scale.parse(min)),
min},getMax:function(origin){var option=this.option,max=origin||null==option.rangeEnd?option.max:option.rangeEnd;
return null==max||"dataMax"===max||zrUtil.eqNaN(max)||(max=this.axis.scale.parse(max)),
max},getNeedCrossZero:function(){var option=this.option;return null==option.rangeStart&&null==option.rangeEnd&&!option.scale;
},getCoordSysModel:zrUtil.noop,setRange:function(rangeStart,rangeEnd){
this.option.rangeStart=rangeStart,this.option.rangeEnd=rangeEnd;
},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null;
}}},function(module,exports,__webpack_require__){"use strict";
__webpack_require__(127),__webpack_require__(132)},function(module,exports,__webpack_require__){
function layoutAxis(gridModel,axisModel){function getZero(dim,val){
var theAxis=grid.getAxis(dim);return theAxis.toGlobalCoord(theAxis.dataToCoord(0));
}var grid=gridModel.coordinateSystem,axis=axisModel.axis,layout={},rawAxisPosition=axis.position,axisPosition=axis.onZero?"onZero":rawAxisPosition,axisDim=axis.dim,rect=grid.getRect(),rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height],axisOffset=axisModel.get("offset")||0,posMap={
x:{top:rectBound[2]-axisOffset,bottom:rectBound[3]+axisOffset
},y:{left:rectBound[0]-axisOffset,right:rectBound[1]+axisOffset
}};posMap.x.onZero=Math.max(Math.min(getZero("y"),posMap.x.bottom),posMap.x.top),
posMap.y.onZero=Math.max(Math.min(getZero("x"),posMap.y.right),posMap.y.left),
layout.position=["y"===axisDim?posMap.y[axisPosition]:rectBound[0],"x"===axisDim?posMap.x[axisPosition]:rectBound[3]],
layout.rotation=Math.PI/2*("x"===axisDim?0:1);var dirMap={top:-1,
bottom:1,left:-1,right:1};layout.labelDirection=layout.tickDirection=layout.nameDirection=dirMap[rawAxisPosition],
axis.onZero&&(layout.labelOffset=posMap[axisDim][rawAxisPosition]-posMap[axisDim].onZero),
axisModel.getModel("axisTick").get("inside")&&(layout.tickDirection=-layout.tickDirection),
axisModel.getModel("axisLabel").get("inside")&&(layout.labelDirection=-layout.labelDirection);
var labelRotation=axisModel.getModel("axisLabel").get("rotate");
return layout.labelRotation="top"===axisPosition?-labelRotation:labelRotation,
layout.labelInterval=axis.getLabelInterval(),layout.z2=1,layout;
}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),AxisBuilder=__webpack_require__(133),ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick,getInterval=AxisBuilder.getInterval,axisBuilderAttrs=["axisLine","axisLabel","axisTick","axisName"],selfBuilderAttrs=["splitArea","splitLine"],AxisView=__webpack_require__(1).extendComponentView({
type:"axis",render:function(axisModel,ecModel){this.group.removeAll();
var oldAxisGroup=this._axisGroup;if(this._axisGroup=new graphic.Group,
this.group.add(this._axisGroup),axisModel.get("show")){var gridModel=axisModel.getCoordSysModel(),layout=layoutAxis(gridModel,axisModel),axisBuilder=new AxisBuilder(axisModel,layout);
zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),this._axisGroup.add(axisBuilder.getGroup()),
zrUtil.each(selfBuilderAttrs,function(name){axisModel.get(name+".show")&&this["_"+name](axisModel,gridModel,layout.labelInterval);
},this),graphic.groupTransition(oldAxisGroup,this._axisGroup,axisModel);
}},_splitLine:function(axisModel,gridModel,labelInterval){var axis=axisModel.axis;
if(!axis.isBlank()){var splitLineModel=axisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineInterval=getInterval(splitLineModel,labelInterval);
lineColors=zrUtil.isArray(lineColors)?lineColors:[lineColors];
for(var gridRect=gridModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),lineCount=0,ticksCoords=axis.getTicksCoords(),ticks=axis.scale.getTicks(),p1=[],p2=[],lineStyle=lineStyleModel.getLineStyle(),i=0;i<ticksCoords.length;i++)if(!ifIgnoreOnTick(axis,i,lineInterval)){
var tickCoord=axis.toGlobalCoord(ticksCoords[i]);isHorizontal?(p1[0]=tickCoord,
p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,
p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);
var colorIndex=lineCount++%lineColors.length;this._axisGroup.add(new graphic.Line(graphic.subPixelOptimizeLine({
anid:"line_"+ticks[i],shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]
},style:zrUtil.defaults({stroke:lineColors[colorIndex]},lineStyle),
silent:!0})))}}},_splitArea:function(axisModel,gridModel,labelInterval){
var axis=axisModel.axis;if(!axis.isBlank()){var splitAreaModel=axisModel.getModel("splitArea"),areaStyleModel=splitAreaModel.getModel("areaStyle"),areaColors=areaStyleModel.get("color"),gridRect=gridModel.coordinateSystem.getRect(),ticksCoords=axis.getTicksCoords(),ticks=axis.scale.getTicks(),prevX=axis.toGlobalCoord(ticksCoords[0]),prevY=axis.toGlobalCoord(ticksCoords[0]),count=0,areaInterval=getInterval(splitAreaModel,labelInterval),areaStyle=areaStyleModel.getAreaStyle();
areaColors=zrUtil.isArray(areaColors)?areaColors:[areaColors];
for(var i=1;i<ticksCoords.length;i++)if(!ifIgnoreOnTick(axis,i,areaInterval)){
var x,y,width,height,tickCoord=axis.toGlobalCoord(ticksCoords[i]);
axis.isHorizontal()?(x=prevX,y=gridRect.y,width=tickCoord-x,height=gridRect.height):(x=gridRect.x,
y=prevY,width=gridRect.width,height=tickCoord-y);var colorIndex=count++%areaColors.length;
this._axisGroup.add(new graphic.Rect({anid:"area_"+ticks[i],shape:{
x:x,y:y,width:width,height:height},style:zrUtil.defaults({fill:areaColors[colorIndex]
},areaStyle),silent:!0})),prevX=x+width,prevY=y+height}}}});AxisView.extend({
type:"xAxis"}),AxisView.extend({type:"yAxis"})},function(module,exports,__webpack_require__){
function makeAxisEventDataBase(axisModel){var eventData={componentType:axisModel.mainType
};return eventData[axisModel.mainType+"Index"]=axisModel.componentIndex,
eventData}function innerTextLayout(opt,textRotation,direction){
var textAlign,verticalAlign,rotationDiff=remRadian(textRotation-opt.rotation);
return isRadianAroundZero(rotationDiff)?(verticalAlign=direction>0?"top":"bottom",
textAlign="center"):isRadianAroundZero(rotationDiff-PI)?(verticalAlign=direction>0?"bottom":"top",
textAlign="center"):(verticalAlign="middle",textAlign=rotationDiff>0&&rotationDiff<PI?direction>0?"right":"left":direction>0?"left":"right"),
{rotation:rotationDiff,textAlign:textAlign,verticalAlign:verticalAlign
}}function endTextLayout(opt,textPosition,textRotate,extent){
var textAlign,verticalAlign,rotationDiff=remRadian(textRotate-opt.rotation),inverse=extent[0]>extent[1],onLeft="start"===textPosition&&!inverse||"start"!==textPosition&&inverse;
return isRadianAroundZero(rotationDiff-PI/2)?(verticalAlign=onLeft?"bottom":"top",
textAlign="center"):isRadianAroundZero(rotationDiff-1.5*PI)?(verticalAlign=onLeft?"top":"bottom",
textAlign="center"):(verticalAlign="middle",textAlign=rotationDiff<1.5*PI&&rotationDiff>PI/2?onLeft?"left":"right":onLeft?"right":"left"),
{rotation:rotationDiff,textAlign:textAlign,verticalAlign:verticalAlign
}}function isSilent(axisModel){var tooltipOpt=axisModel.get("tooltip");
return axisModel.get("silent")||!(axisModel.get("triggerEvent")||tooltipOpt&&tooltipOpt.show);
}var zrUtil=__webpack_require__(4),formatUtil=__webpack_require__(6),graphic=__webpack_require__(43),Model=__webpack_require__(12),numberUtil=__webpack_require__(7),remRadian=numberUtil.remRadian,isRadianAroundZero=numberUtil.isRadianAroundZero,vec2=__webpack_require__(10),v2ApplyTransform=vec2.applyTransform,retrieve=zrUtil.retrieve,PI=Math.PI,AxisBuilder=function(axisModel,opt){
this.opt=opt,this.axisModel=axisModel,zrUtil.defaults(opt,{labelOffset:0,
nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),
this.group=new graphic.Group;var dumbGroup=new graphic.Group({
position:opt.position.slice(),rotation:opt.rotation});dumbGroup.updateTransform(),
this._transform=dumbGroup.transform,this._dumbGroup=dumbGroup;
};AxisBuilder.prototype={constructor:AxisBuilder,hasBuilder:function(name){
return!!builders[name]},add:function(name){builders[name].call(this);
},getGroup:function(){return this.group}};var builders={axisLine:function(){
var opt=this.opt,axisModel=this.axisModel;if(axisModel.get("axisLine.show")){
var extent=this.axisModel.axis.getExtent(),matrix=this._transform,pt1=[extent[0],0],pt2=[extent[1],0];
matrix&&(v2ApplyTransform(pt1,pt1,matrix),v2ApplyTransform(pt2,pt2,matrix)),
this.group.add(new graphic.Line(graphic.subPixelOptimizeLine({
anid:"line",shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:zrUtil.extend({
lineCap:"round"},axisModel.getModel("axisLine.lineStyle").getLineStyle()),
strokeContainThreshold:opt.strokeContainThreshold||5,silent:!0,
z2:1})))}},axisTick:function(){var axisModel=this.axisModel,axis=axisModel.axis;
if(axisModel.get("axisTick.show")&&!axis.isBlank())for(var tickModel=axisModel.getModel("axisTick"),opt=this.opt,lineStyleModel=tickModel.getModel("lineStyle"),tickLen=tickModel.get("length"),tickInterval=getInterval(tickModel,opt.labelInterval),ticksCoords=axis.getTicksCoords(tickModel.get("alignWithLabel")),ticks=axis.scale.getTicks(),pt1=[],pt2=[],matrix=this._transform,i=0;i<ticksCoords.length;i++)if(!ifIgnoreOnTick(axis,i,tickInterval)){
var tickCoord=ticksCoords[i];pt1[0]=tickCoord,pt1[1]=0,pt2[0]=tickCoord,
pt2[1]=opt.tickDirection*tickLen,matrix&&(v2ApplyTransform(pt1,pt1,matrix),
v2ApplyTransform(pt2,pt2,matrix)),this.group.add(new graphic.Line(graphic.subPixelOptimizeLine({
anid:"tick_"+ticks[i],shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]
},style:zrUtil.defaults(lineStyleModel.getLineStyle(),{stroke:axisModel.get("axisLine.lineStyle.color")
}),z2:2,silent:!0})))}},axisLabel:function(){function isTwoLabelOverlapped(current,next){
var firstRect=current&&current.getBoundingRect().clone(),nextRect=next&&next.getBoundingRect().clone();
if(firstRect&&nextRect)return firstRect.applyTransform(current.getLocalTransform()),
nextRect.applyTransform(next.getLocalTransform()),firstRect.intersect(nextRect);
}var opt=this.opt,axisModel=this.axisModel,axis=axisModel.axis,show=retrieve(opt.axisLabelShow,axisModel.get("axisLabel.show"));
if(show&&!axis.isBlank()){var labelModel=axisModel.getModel("axisLabel"),textStyleModel=labelModel.getModel("textStyle"),labelMargin=labelModel.get("margin"),ticks=axis.scale.getTicks(),labels=axisModel.getFormattedLabels(),labelRotation=retrieve(opt.labelRotation,labelModel.get("rotate"))||0;
labelRotation=labelRotation*PI/180;var labelLayout=innerTextLayout(opt,labelRotation,opt.labelDirection),categoryData=axisModel.get("data"),textEls=[],silent=isSilent(axisModel),triggerEvent=axisModel.get("triggerEvent");
if(zrUtil.each(ticks,function(tickVal,index){if(!ifIgnoreOnTick(axis,index,opt.labelInterval)){
var itemTextStyleModel=textStyleModel;categoryData&&categoryData[tickVal]&&categoryData[tickVal].textStyle&&(itemTextStyleModel=new Model(categoryData[tickVal].textStyle,textStyleModel,axisModel.ecModel));
var textColor=itemTextStyleModel.getTextColor()||axisModel.get("axisLine.lineStyle.color"),tickCoord=axis.dataToCoord(tickVal),pos=[tickCoord,opt.labelOffset+opt.labelDirection*labelMargin],labelBeforeFormat=axis.scale.getLabel(tickVal),textEl=new graphic.Text({
anid:"label_"+tickVal,style:{text:labels[index],textAlign:itemTextStyleModel.get("align",!0)||labelLayout.textAlign,
textVerticalAlign:itemTextStyleModel.get("baseline",!0)||labelLayout.verticalAlign,
textFont:itemTextStyleModel.getFont(),fill:"function"==typeof textColor?textColor(labelBeforeFormat):textColor
},position:pos,rotation:labelLayout.rotation,silent:silent,z2:10
});triggerEvent&&(textEl.eventData=makeAxisEventDataBase(axisModel),
textEl.eventData.targetType="axisLabel",textEl.eventData.value=labelBeforeFormat),
this._dumbGroup.add(textEl),textEl.updateTransform(),textEls.push(textEl),
this.group.add(textEl),textEl.decomposeTransform()}},this),null!=axisModel.getMin()){
var firstLabel=textEls[0],nextLabel=textEls[1];isTwoLabelOverlapped(firstLabel,nextLabel)&&(firstLabel.ignore=!0);
}if(null!=axisModel.getMax()){var lastLabel=textEls[textEls.length-1],prevLabel=textEls[textEls.length-2];
isTwoLabelOverlapped(prevLabel,lastLabel)&&(lastLabel.ignore=!0);
}}},axisName:function(){var opt=this.opt,axisModel=this.axisModel,name=retrieve(opt.axisName,axisModel.get("name"));
if(name){var labelLayout,nameLocation=axisModel.get("nameLocation"),nameDirection=opt.nameDirection,textStyleModel=axisModel.getModel("nameTextStyle"),gap=axisModel.get("nameGap")||0,extent=this.axisModel.axis.getExtent(),gapSignal=extent[0]>extent[1]?-1:1,pos=["start"===nameLocation?extent[0]-gapSignal*gap:"end"===nameLocation?extent[1]+gapSignal*gap:(extent[0]+extent[1])/2,"middle"===nameLocation?opt.labelOffset+nameDirection*gap:0],nameRotation=axisModel.get("nameRotate");
null!=nameRotation&&(nameRotation=nameRotation*PI/180);var axisNameAvailableWidth;
"middle"===nameLocation?labelLayout=innerTextLayout(opt,null!=nameRotation?nameRotation:opt.rotation,nameDirection):(labelLayout=endTextLayout(opt,nameLocation,nameRotation||0,extent),
axisNameAvailableWidth=opt.axisNameAvailableWidth,null!=axisNameAvailableWidth&&(axisNameAvailableWidth=Math.abs(axisNameAvailableWidth/Math.sin(labelLayout.rotation)),
!isFinite(axisNameAvailableWidth)&&(axisNameAvailableWidth=null)));
var textFont=textStyleModel.getFont(),truncateOpt=axisModel.get("nameTruncate",!0)||{},ellipsis=truncateOpt.ellipsis,maxWidth=retrieve(truncateOpt.maxWidth,axisNameAvailableWidth),truncatedText=null!=ellipsis&&null!=maxWidth?formatUtil.truncateText(name,maxWidth,textFont,ellipsis,{
minChar:2,placeholder:truncateOpt.placeholder}):name,tooltipOpt=axisModel.get("tooltip",!0),mainType=axisModel.mainType,formatterParams={
componentType:mainType,name:name,$vars:["name"]};formatterParams[mainType+"Index"]=axisModel.componentIndex;
var textEl=new graphic.Text({anid:"name",__fullText:name,__truncatedText:truncatedText,
style:{text:truncatedText,textFont:textFont,fill:textStyleModel.getTextColor()||axisModel.get("axisLine.lineStyle.color"),
textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.verticalAlign
},position:pos,rotation:labelLayout.rotation,silent:isSilent(axisModel),
z2:1,tooltip:tooltipOpt&&tooltipOpt.show?zrUtil.extend({content:name,
formatter:function(){return name},formatterParams:formatterParams
},tooltipOpt):null});axisModel.get("triggerEvent")&&(textEl.eventData=makeAxisEventDataBase(axisModel),
textEl.eventData.targetType="axisName",textEl.eventData.name=name),
this._dumbGroup.add(textEl),textEl.updateTransform(),this.group.add(textEl),
textEl.decomposeTransform()}}},ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick=function(axis,i,interval){
var rawTick,scale=axis.scale;return"ordinal"===scale.type&&("function"==typeof interval?(rawTick=scale.getTicks()[i],
!interval(rawTick,scale.getLabel(rawTick))):i%(interval+1))},getInterval=AxisBuilder.getInterval=function(model,labelInterval){
var interval=model.get("interval");return null!=interval&&"auto"!=interval||(interval=labelInterval),
interval};module.exports=AxisBuilder},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4);__webpack_require__(114),__webpack_require__(135),
__webpack_require__(137);var barLayoutGrid=__webpack_require__(140),echarts=__webpack_require__(1);
echarts.registerLayout(zrUtil.curry(barLayoutGrid,"bar")),echarts.registerVisual(function(ecModel){
ecModel.eachSeriesByType("bar",function(seriesModel){var data=seriesModel.getData();
data.setVisual("legendSymbol","roundRect")})}),__webpack_require__(113);
},function(module,exports,__webpack_require__){module.exports=__webpack_require__(136).extend({
type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect"
})},function(module,exports,__webpack_require__){"use strict";
var SeriesModel=__webpack_require__(28),createListFromArray=__webpack_require__(102);
module.exports=SeriesModel.extend({type:"series.__base_bar__",
getInitialData:function(option,ecModel){var coordSys=option.coordinateSystem;
if("cartesian2d"!==coordSys)throw new Error("Bar only support cartesian2d coordinateSystem");
return createListFromArray(option.data,this,ecModel)},getMarkerPosition:function(value){
var coordSys=this.coordinateSystem;if(coordSys){var pt=coordSys.dataToPoint(value,!0),data=this.getData(),offset=data.getLayout("offset"),size=data.getLayout("size"),offsetIndex=coordSys.getBaseAxis().isHorizontal()?0:1;
return pt[offsetIndex]+=offset+size/2,pt}return[NaN,NaN]},defaultOption:{
zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,
barMinHeight:0,itemStyle:{normal:{},emphasis:{}}}})},function(module,exports,__webpack_require__){
"use strict";function createRect(data,dataIndex,itemModel,layout,isHorizontal,animationModel,isUpdate){
var rect=new graphic.Rect({shape:zrUtil.extend({},layout)});if(animationModel){
var rectShape=rect.shape,animateProperty=isHorizontal?"height":"width",animateTarget={};
rectShape[animateProperty]=0,animateTarget[animateProperty]=layout[animateProperty],
graphic[isUpdate?"updateProps":"initProps"](rect,{shape:animateTarget
},animationModel,dataIndex)}return rect}function removeRect(dataIndex,animationModel,el){
el.style.text="",graphic.updateProps(el,{shape:{width:0}},animationModel,dataIndex,function(){
el.parent&&el.parent.remove(el)})}function getRectItemLayout(data,dataIndex,itemModel){
var layout=data.getItemLayout(dataIndex),fixedLineWidth=getLineWidth(itemModel,layout),signX=layout.width>0?1:-1,signY=layout.height>0?1:-1;
return{x:layout.x+signX*fixedLineWidth/2,y:layout.y+signY*fixedLineWidth/2,
width:layout.width-signX*fixedLineWidth,height:layout.height-signY*fixedLineWidth
}}function updateStyle(el,data,dataIndex,itemModel,layout,seriesModel,isHorizontal){
var color=data.getItemVisual(dataIndex,"color"),opacity=data.getItemVisual(dataIndex,"opacity"),itemStyleModel=itemModel.getModel("itemStyle.normal"),hoverStyle=itemModel.getModel("itemStyle.emphasis").getBarItemStyle();
el.setShape("r",itemStyleModel.get("barBorderRadius")||0),el.useStyle(zrUtil.defaults({
fill:color,opacity:opacity},itemStyleModel.getBarItemStyle()));
var labelPositionOutside=isHorizontal?layout.height>0?"bottom":"top":layout.width>0?"left":"right";
helper.setLabel(el.style,hoverStyle,itemModel,color,seriesModel,dataIndex,labelPositionOutside),
graphic.setHoverStyle(el,hoverStyle)}function getLineWidth(itemModel,rawLayout){
var lineWidth=itemModel.get(BAR_BORDER_WIDTH_QUERY)||0;return Math.min(lineWidth,Math.abs(rawLayout.width),Math.abs(rawLayout.height));
}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),helper=__webpack_require__(138),BAR_BORDER_WIDTH_QUERY=["itemStyle","normal","barBorderWidth"];
zrUtil.extend(__webpack_require__(12).prototype,__webpack_require__(139));
var BarView=__webpack_require__(1).extendChartView({type:"bar",
render:function(seriesModel,ecModel,api){var coordinateSystemType=seriesModel.get("coordinateSystem");
return"cartesian2d"===coordinateSystemType&&this._renderOnCartesian(seriesModel,ecModel,api),
this.group},dispose:zrUtil.noop,_renderOnCartesian:function(seriesModel,ecModel,api){
var group=this.group,data=seriesModel.getData(),oldData=this._data,cartesian=seriesModel.coordinateSystem,baseAxis=cartesian.getBaseAxis(),isHorizontal=baseAxis.isHorizontal(),animationModel=seriesModel.isAnimationEnabled()?seriesModel:null;
data.diff(oldData).add(function(dataIndex){if(data.hasValue(dataIndex)){
var itemModel=data.getItemModel(dataIndex),layout=getRectItemLayout(data,dataIndex,itemModel),el=createRect(data,dataIndex,itemModel,layout,isHorizontal,animationModel);
data.setItemGraphicEl(dataIndex,el),group.add(el),updateStyle(el,data,dataIndex,itemModel,layout,seriesModel,isHorizontal);
}}).update(function(newIndex,oldIndex){var el=oldData.getItemGraphicEl(oldIndex);
if(!data.hasValue(newIndex))return void group.remove(el);var itemModel=data.getItemModel(newIndex),layout=getRectItemLayout(data,newIndex,itemModel);
el?graphic.updateProps(el,{shape:layout},animationModel,newIndex):el=createRect(data,newIndex,itemModel,layout,isHorizontal,animationModel,!0),
data.setItemGraphicEl(newIndex,el),group.add(el),updateStyle(el,data,newIndex,itemModel,layout,seriesModel,isHorizontal);
}).remove(function(dataIndex){var el=oldData.getItemGraphicEl(dataIndex);
el&&removeRect(dataIndex,animationModel,el)}).execute(),this._data=data;
},remove:function(ecModel,api){var group=this.group,data=this._data;
ecModel.get("animation")?data&&data.eachItemGraphicEl(function(el){
removeRect(el.dataIndex,ecModel,el)}):group.removeAll()}});module.exports=BarView;
},function(module,exports,__webpack_require__){function setLabel(style,model,color,labelText,labelPositionOutside){
graphic.setText(style,model,color),style.text=labelText,"outside"===style.textPosition&&(style.textPosition=labelPositionOutside);
}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),helper={};
helper.setLabel=function(normalStyle,hoverStyle,itemModel,color,seriesModel,dataIndex,labelPositionOutside){
var labelModel=itemModel.getModel("label.normal"),hoverLabelModel=itemModel.getModel("label.emphasis");
labelModel.get("show")?setLabel(normalStyle,labelModel,color,zrUtil.retrieve(seriesModel.getFormattedLabel(dataIndex,"normal"),seriesModel.getRawValue(dataIndex)),labelPositionOutside):normalStyle.text="",
hoverLabelModel.get("show")?setLabel(hoverStyle,hoverLabelModel,color,zrUtil.retrieve(seriesModel.getFormattedLabel(dataIndex,"emphasis"),seriesModel.getRawValue(dataIndex)),labelPositionOutside):hoverStyle.text="";
},module.exports=helper},function(module,exports,__webpack_require__){
var getBarItemStyle=__webpack_require__(15)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);
module.exports={getBarItemStyle:function(excludes){var style=getBarItemStyle.call(this,excludes);
if(this.getBorderLineDash){var lineDash=this.getBorderLineDash();
lineDash&&(style.lineDash=lineDash)}return style}}},function(module,exports,__webpack_require__){
"use strict";function getSeriesStackId(seriesModel){return seriesModel.get("stack")||"__ec_stack_"+seriesModel.seriesIndex;
}function getAxisKey(axis){return axis.dim+axis.index}function calBarWidthAndOffset(barSeries,api){
var columnsMap={};zrUtil.each(barSeries,function(seriesModel,idx){
var data=seriesModel.getData(),cartesian=seriesModel.coordinateSystem,baseAxis=cartesian.getBaseAxis(),axisExtent=baseAxis.getExtent(),bandWidth="category"===baseAxis.type?baseAxis.getBandWidth():Math.abs(axisExtent[1]-axisExtent[0])/data.count(),columnsOnAxis=columnsMap[getAxisKey(baseAxis)]||{
bandWidth:bandWidth,remainedWidth:bandWidth,autoWidthCount:0,
categoryGap:"20%",gap:"30%",stacks:{}},stacks=columnsOnAxis.stacks;
columnsMap[getAxisKey(baseAxis)]=columnsOnAxis;var stackId=getSeriesStackId(seriesModel);
stacks[stackId]||columnsOnAxis.autoWidthCount++,stacks[stackId]=stacks[stackId]||{
width:0,maxWidth:0};var barWidth=parsePercent(seriesModel.get("barWidth"),bandWidth),barMaxWidth=parsePercent(seriesModel.get("barMaxWidth"),bandWidth),barGap=seriesModel.get("barGap"),barCategoryGap=seriesModel.get("barCategoryGap");
barWidth&&!stacks[stackId].width&&(barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth),
stacks[stackId].width=barWidth,columnsOnAxis.remainedWidth-=barWidth),
barMaxWidth&&(stacks[stackId].maxWidth=barMaxWidth),null!=barGap&&(columnsOnAxis.gap=barGap),
null!=barCategoryGap&&(columnsOnAxis.categoryGap=barCategoryGap);
});var result={};return zrUtil.each(columnsMap,function(columnsOnAxis,coordSysName){
result[coordSysName]={};var stacks=columnsOnAxis.stacks,bandWidth=columnsOnAxis.bandWidth,categoryGap=parsePercent(columnsOnAxis.categoryGap,bandWidth),barGapPercent=parsePercent(columnsOnAxis.gap,1),remainedWidth=columnsOnAxis.remainedWidth,autoWidthCount=columnsOnAxis.autoWidthCount,autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);
autoWidth=Math.max(autoWidth,0),zrUtil.each(stacks,function(column,stack){
var maxWidth=column.maxWidth;!column.width&&maxWidth&&maxWidth<autoWidth&&(maxWidth=Math.min(maxWidth,remainedWidth),
remainedWidth-=maxWidth,column.width=maxWidth,autoWidthCount--);
}),autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent),
autoWidth=Math.max(autoWidth,0);var lastColumn,widthSum=0;zrUtil.each(stacks,function(column,idx){
column.width||(column.width=autoWidth),lastColumn=column,widthSum+=column.width*(1+barGapPercent);
}),lastColumn&&(widthSum-=lastColumn.width*barGapPercent);var offset=-widthSum/2;
zrUtil.each(stacks,function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{
offset:offset,width:column.width},offset+=column.width*(1+barGapPercent);
})}),result}function barLayoutGrid(seriesType,ecModel,api){var barWidthAndOffset=calBarWidthAndOffset(zrUtil.filter(ecModel.getSeriesByType(seriesType),function(seriesModel){
return!ecModel.isSeriesFiltered(seriesModel)&&seriesModel.coordinateSystem&&"cartesian2d"===seriesModel.coordinateSystem.type;
})),lastStackCoords={},lastStackCoordsOrigin={};ecModel.eachSeriesByType(seriesType,function(seriesModel){
var data=seriesModel.getData(),cartesian=seriesModel.coordinateSystem,baseAxis=cartesian.getBaseAxis(),stackId=getSeriesStackId(seriesModel),columnLayoutInfo=barWidthAndOffset[getAxisKey(baseAxis)][stackId],columnOffset=columnLayoutInfo.offset,columnWidth=columnLayoutInfo.width,valueAxis=cartesian.getOtherAxis(baseAxis),barMinHeight=seriesModel.get("barMinHeight")||0,valueAxisStart=baseAxis.onZero?valueAxis.toGlobalCoord(valueAxis.dataToCoord(0)):valueAxis.getGlobalExtent()[0],coords=cartesian.dataToPoints(data,!0);
lastStackCoords[stackId]=lastStackCoords[stackId]||[],lastStackCoordsOrigin[stackId]=lastStackCoordsOrigin[stackId]||[],
data.setLayout({offset:columnOffset,size:columnWidth}),data.each(valueAxis.dim,function(value,idx){
if(!isNaN(value)){lastStackCoords[stackId][idx]||(lastStackCoords[stackId][idx]={
p:valueAxisStart,n:valueAxisStart},lastStackCoordsOrigin[stackId][idx]={
p:valueAxisStart,n:valueAxisStart});var x,y,width,height,sign=value>=0?"p":"n",coord=coords[idx],lastCoord=lastStackCoords[stackId][idx][sign],lastCoordOrigin=lastStackCoordsOrigin[stackId][idx][sign];
valueAxis.isHorizontal()?(x=lastCoord,y=coord[1]+columnOffset,
width=coord[0]-lastCoordOrigin,height=columnWidth,lastStackCoordsOrigin[stackId][idx][sign]+=width,
Math.abs(width)<barMinHeight&&(width=(width<0?-1:1)*barMinHeight),
lastStackCoords[stackId][idx][sign]+=width):(x=coord[0]+columnOffset,
y=lastCoord,width=columnWidth,height=coord[1]-lastCoordOrigin,
lastStackCoordsOrigin[stackId][idx][sign]+=height,Math.abs(height)<barMinHeight&&(height=(height<=0?-1:1)*barMinHeight),
lastStackCoords[stackId][idx][sign]+=height),data.setItemLayout(idx,{
x:x,y:y,width:width,height:height})}},!0)},this)}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent;
module.exports=barLayoutGrid},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);
__webpack_require__(142),__webpack_require__(144),__webpack_require__(145)("pie",[{
type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"
},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",
event:"pieunselected",method:"unSelect"}]),echarts.registerVisual(zrUtil.curry(__webpack_require__(146),"pie")),
echarts.registerLayout(zrUtil.curry(__webpack_require__(147),"pie")),
echarts.registerProcessor(zrUtil.curry(__webpack_require__(149),"pie"));
},function(module,exports,__webpack_require__){"use strict";var List=__webpack_require__(98),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),completeDimensions=__webpack_require__(103),dataSelectableMixin=__webpack_require__(143),PieSeries=__webpack_require__(1).extendSeriesModel({
type:"series.pie",init:function(option){PieSeries.superApply(this,"init",arguments),
this.legendDataProvider=function(){return this.getRawData()},
this.updateSelectedMap(option.data),this._defaultLabelLine(option);
},mergeOption:function(newOption){PieSeries.superCall(this,"mergeOption",newOption),
this.updateSelectedMap(this.option.data)},getInitialData:function(option,ecModel){
var dimensions=completeDimensions(["value"],option.data),list=new List(dimensions,this);
return list.initData(option.data),list},getDataParams:function(dataIndex){
var data=this.getData(),params=PieSeries.superCall(this,"getDataParams",dataIndex),sum=data.getSum("value");
return params.percent=sum?+(data.get("value",dataIndex)/sum*100).toFixed(2):0,
params.$vars.push("percent"),params},_defaultLabelLine:function(option){
modelUtil.defaultEmphasis(option.labelLine,["show"]);var labelLineNormalOpt=option.labelLine.normal,labelLineEmphasisOpt=option.labelLine.emphasis;
labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.normal.show,
labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.label.emphasis.show;
},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,
center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,
minAngle:0,selectedOffset:10,avoidLabelOverlap:!0,stillShowZeroSum:!0,
label:{normal:{rotate:!1,show:!0,position:"outer"},emphasis:{}
},labelLine:{normal:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{
width:1,type:"solid"}}},itemStyle:{normal:{borderWidth:1},emphasis:{}
},animationType:"expansion",animationEasing:"cubicOut",data:[]
}});zrUtil.mixin(PieSeries,dataSelectableMixin),module.exports=PieSeries;
},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);
module.exports={updateSelectedMap:function(targetList){this._selectTargetMap=zrUtil.reduce(targetList||[],function(targetMap,target){
return targetMap[target.name]=target,targetMap},{})},select:function(name){
var targetMap=this._selectTargetMap,target=targetMap[name],selectedMode=this.get("selectedMode");
"single"===selectedMode&&zrUtil.each(targetMap,function(target){
target.selected=!1}),target&&(target.selected=!0)},unSelect:function(name){
var target=this._selectTargetMap[name];target&&(target.selected=!1);
},toggleSelected:function(name){var target=this._selectTargetMap[name];
if(null!=target)return this[target.selected?"unSelect":"select"](name),
target.selected},isSelected:function(name){var target=this._selectTargetMap[name];
return target&&target.selected}}},function(module,exports,__webpack_require__){
function updateDataSelected(uid,seriesModel,hasAnimation,api){
var data=seriesModel.getData(),dataIndex=this.dataIndex,name=data.getName(dataIndex),selectedOffset=seriesModel.get("selectedOffset");
api.dispatchAction({type:"pieToggleSelect",from:uid,name:name,
seriesId:seriesModel.id}),data.each(function(idx){toggleItemSelected(data.getItemGraphicEl(idx),data.getItemLayout(idx),seriesModel.isSelected(data.getName(idx)),selectedOffset,hasAnimation);
})}function toggleItemSelected(el,layout,isSelected,selectedOffset,hasAnimation){
var midAngle=(layout.startAngle+layout.endAngle)/2,dx=Math.cos(midAngle),dy=Math.sin(midAngle),offset=isSelected?selectedOffset:0,position=[dx*offset,dy*offset];
hasAnimation?el.animate().when(200,{position:position}).start("bounceOut"):el.attr("position",position);
}function PiePiece(data,idx){function onEmphasis(){polyline.ignore=polyline.hoverIgnore,
text.ignore=text.hoverIgnore}function onNormal(){polyline.ignore=polyline.normalIgnore,
text.ignore=text.normalIgnore}graphic.Group.call(this);var sector=new graphic.Sector({
z2:2}),polyline=new graphic.Polyline,text=new graphic.Text;this.add(sector),
this.add(polyline),this.add(text),this.updateData(data,idx,!0),
this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal);
}function getLabelStyle(data,idx,state,labelModel,labelPosition){
var textStyleModel=labelModel.getModel("textStyle"),isLabelInside="inside"===labelPosition||"inner"===labelPosition;
return{fill:textStyleModel.getTextColor()||(isLabelInside?"#fff":data.getItemVisual(idx,"color")),
opacity:data.getItemVisual(idx,"opacity"),textFont:textStyleModel.getFont(),
text:zrUtil.retrieve(data.hostModel.getFormattedLabel(idx,state),data.getName(idx))
}}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),piePieceProto=PiePiece.prototype;
piePieceProto.updateData=function(data,idx,firstCreate){function onEmphasis(){
sector.stopAnimation(!0),sector.animateTo({shape:{r:layout.r+10
}},300,"elasticOut")}function onNormal(){sector.stopAnimation(!0),
sector.animateTo({shape:{r:layout.r}},300,"elasticOut")}var sector=this.childAt(0),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),sectorShape=zrUtil.extend({},layout);
if(sectorShape.label=null,firstCreate){sector.setShape(sectorShape);
var animationType=seriesModel.getShallow("animationType");"scale"===animationType?(sector.shape.r=layout.r0,
graphic.initProps(sector,{shape:{r:layout.r}},seriesModel,idx)):(sector.shape.endAngle=layout.startAngle,
graphic.updateProps(sector,{shape:{endAngle:layout.endAngle}},seriesModel,idx));
}else graphic.updateProps(sector,{shape:sectorShape},seriesModel,idx);
var itemStyleModel=itemModel.getModel("itemStyle"),visualColor=data.getItemVisual(idx,"color");
sector.useStyle(zrUtil.defaults({lineJoin:"bevel",fill:visualColor
},itemStyleModel.getModel("normal").getItemStyle())),sector.hoverStyle=itemStyleModel.getModel("emphasis").getItemStyle(),
toggleItemSelected(this,data.getItemLayout(idx),itemModel.get("selected"),seriesModel.get("selectedOffset"),seriesModel.get("animation")),
sector.off("mouseover").off("mouseout").off("emphasis").off("normal"),
itemModel.get("hoverAnimation")&&seriesModel.isAnimationEnabled()&&sector.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal),
this._updateLabel(data,idx),graphic.setHoverStyle(this)},piePieceProto._updateLabel=function(data,idx){
var labelLine=this.childAt(1),labelText=this.childAt(2),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),labelLayout=layout.label,visualColor=data.getItemVisual(idx,"color");
graphic.updateProps(labelLine,{shape:{points:labelLayout.linePoints||[[labelLayout.x,labelLayout.y],[labelLayout.x,labelLayout.y],[labelLayout.x,labelLayout.y]]
}},seriesModel,idx),graphic.updateProps(labelText,{style:{x:labelLayout.x,
y:labelLayout.y}},seriesModel,idx),labelText.attr({style:{textVerticalAlign:labelLayout.verticalAlign,
textAlign:labelLayout.textAlign,textFont:labelLayout.font},rotation:labelLayout.rotation,
origin:[labelLayout.x,labelLayout.y],z2:10});var labelModel=itemModel.getModel("label.normal"),labelHoverModel=itemModel.getModel("label.emphasis"),labelLineModel=itemModel.getModel("labelLine.normal"),labelLineHoverModel=itemModel.getModel("labelLine.emphasis"),labelPosition=labelModel.get("position")||labelHoverModel.get("position");
labelText.setStyle(getLabelStyle(data,idx,"normal",labelModel,labelPosition)),
labelText.ignore=labelText.normalIgnore=!labelModel.get("show"),
labelText.hoverIgnore=!labelHoverModel.get("show"),labelLine.ignore=labelLine.normalIgnore=!labelLineModel.get("show"),
labelLine.hoverIgnore=!labelLineHoverModel.get("show"),labelLine.setStyle({
stroke:visualColor,opacity:data.getItemVisual(idx,"opacity")}),
labelLine.setStyle(labelLineModel.getModel("lineStyle").getLineStyle()),
labelText.hoverStyle=getLabelStyle(data,idx,"emphasis",labelHoverModel,labelPosition),
labelLine.hoverStyle=labelLineHoverModel.getModel("lineStyle").getLineStyle();
var smooth=labelLineModel.get("smooth");smooth&&smooth===!0&&(smooth=.4),
labelLine.setShape({smooth:smooth})},zrUtil.inherits(PiePiece,graphic.Group);
var Pie=__webpack_require__(42).extend({type:"pie",init:function(){
var sectorGroup=new graphic.Group;this._sectorGroup=sectorGroup;
},render:function(seriesModel,ecModel,api,payload){if(!payload||payload.from!==this.uid){
var data=seriesModel.getData(),oldData=this._data,group=this.group,hasAnimation=ecModel.get("animation"),isFirstRender=!oldData,animationType=seriesModel.get("animationType"),onSectorClick=zrUtil.curry(updateDataSelected,this.uid,seriesModel,hasAnimation,api),selectedMode=seriesModel.get("selectedMode");
if(data.diff(oldData).add(function(idx){var piePiece=new PiePiece(data,idx);
isFirstRender&&"scale"!==animationType&&piePiece.eachChild(function(child){
child.stopAnimation(!0)}),selectedMode&&piePiece.on("click",onSectorClick),
data.setItemGraphicEl(idx,piePiece),group.add(piePiece)}).update(function(newIdx,oldIdx){
var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx),
piePiece.off("click"),selectedMode&&piePiece.on("click",onSectorClick),
group.add(piePiece),data.setItemGraphicEl(newIdx,piePiece)}).remove(function(idx){
var piePiece=oldData.getItemGraphicEl(idx);group.remove(piePiece);
}).execute(),hasAnimation&&isFirstRender&&data.count()>0&&"scale"!==animationType){
var shape=data.getItemLayout(0),r=Math.max(api.getWidth(),api.getHeight())/2,removeClipPath=zrUtil.bind(group.removeClipPath,group);
group.setClipPath(this._createClipPath(shape.cx,shape.cy,r,shape.startAngle,shape.clockwise,removeClipPath,seriesModel));
}this._data=data}},dispose:function(){},_createClipPath:function(cx,cy,r,startAngle,clockwise,cb,seriesModel){
var clipPath=new graphic.Sector({shape:{cx:cx,cy:cy,r0:0,r:r,
startAngle:startAngle,endAngle:startAngle,clockwise:clockwise
}});return graphic.initProps(clipPath,{shape:{endAngle:startAngle+(clockwise?1:-1)*Math.PI*2
}},seriesModel,cb),clipPath},containPoint:function(point,seriesModel){
var data=seriesModel.getData(),itemLayout=data.getItemLayout(0);
if(itemLayout){var dx=point[0]-itemLayout.cx,dy=point[1]-itemLayout.cy,radius=Math.sqrt(dx*dx+dy*dy);
return radius<=itemLayout.r&&radius>=itemLayout.r0}}});module.exports=Pie;
},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);
module.exports=function(seriesType,actionInfos){zrUtil.each(actionInfos,function(actionInfo){
actionInfo.update="updateView",echarts.registerAction(actionInfo,function(payload,ecModel){
var selected={};return ecModel.eachComponent({mainType:"series",
subType:seriesType,query:payload},function(seriesModel){seriesModel[actionInfo.method]&&seriesModel[actionInfo.method](payload.name);
var data=seriesModel.getData();data.each(function(idx){var name=data.getName(idx);
selected[name]=seriesModel.isSelected(name)||!1})}),{name:payload.name,
selected:selected}})})}},function(module,exports){module.exports=function(seriesType,ecModel){
var paletteScope={};ecModel.eachRawSeriesByType(seriesType,function(seriesModel){
var dataAll=seriesModel.getRawData(),idxMap={};if(!ecModel.isSeriesFiltered(seriesModel)){
var data=seriesModel.getData();data.each(function(idx){var rawIdx=data.getRawIndex(idx);
idxMap[rawIdx]=idx}),dataAll.each(function(rawIdx){var filteredIdx=idxMap[rawIdx],singleDataColor=null!=filteredIdx&&data.getItemVisual(filteredIdx,"color",!0);
if(singleDataColor)dataAll.setItemVisual(rawIdx,"color",singleDataColor);else{
var itemModel=dataAll.getItemModel(rawIdx),color=itemModel.get("itemStyle.normal.color")||seriesModel.getColorFromPalette(dataAll.getName(rawIdx),paletteScope);
dataAll.setItemVisual(rawIdx,"color",color),null!=filteredIdx&&data.setItemVisual(filteredIdx,"color",color);
}})}})}},function(module,exports,__webpack_require__){var numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent,labelLayout=__webpack_require__(148),zrUtil=__webpack_require__(4),PI2=2*Math.PI,RADIAN=Math.PI/180;
module.exports=function(seriesType,ecModel,api,payload){ecModel.eachSeriesByType(seriesType,function(seriesModel){
var center=seriesModel.get("center"),radius=seriesModel.get("radius");
zrUtil.isArray(radius)||(radius=[0,radius]),zrUtil.isArray(center)||(center=[center,center]);
var width=api.getWidth(),height=api.getHeight(),size=Math.min(width,height),cx=parsePercent(center[0],width),cy=parsePercent(center[1],height),r0=parsePercent(radius[0],size/2),r=parsePercent(radius[1],size/2),data=seriesModel.getData(),startAngle=-seriesModel.get("startAngle")*RADIAN,minAngle=seriesModel.get("minAngle")*RADIAN,sum=data.getSum("value"),unitRadian=Math.PI/(sum||data.count())*2,clockwise=seriesModel.get("clockwise"),roseType=seriesModel.get("roseType"),stillShowZeroSum=seriesModel.get("stillShowZeroSum"),extent=data.getDataExtent("value");
extent[0]=0;var restAngle=PI2,valueSumLargerThanMinAngle=0,currentAngle=startAngle,dir=clockwise?1:-1;
if(data.each("value",function(value,idx){var angle;if(isNaN(value))return void data.setItemLayout(idx,{
angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:clockwise,cx:cx,
cy:cy,r0:r0,r:roseType?NaN:r});angle="area"!==roseType?0===sum&&stillShowZeroSum?unitRadian:value*unitRadian:PI2/(data.count()||1),
angle<minAngle?(angle=minAngle,restAngle-=minAngle):valueSumLargerThanMinAngle+=value;
var endAngle=currentAngle+dir*angle;data.setItemLayout(idx,{angle:angle,
startAngle:currentAngle,endAngle:endAngle,clockwise:clockwise,
cx:cx,cy:cy,r0:r0,r:roseType?numberUtil.linearMap(value,extent,[r0,r]):r
}),currentAngle=endAngle},!0),restAngle<PI2)if(restAngle<=.001){
var angle=PI2/data.count();data.each(function(idx){var layout=data.getItemLayout(idx);
layout.startAngle=startAngle+dir*idx*angle,layout.endAngle=startAngle+dir*(idx+1)*angle;
})}else unitRadian=restAngle/valueSumLargerThanMinAngle,currentAngle=startAngle,
data.each("value",function(value,idx){var layout=data.getItemLayout(idx),angle=layout.angle===minAngle?minAngle:value*unitRadian;
layout.startAngle=currentAngle,layout.endAngle=currentAngle+dir*angle,
currentAngle+=dir*angle});labelLayout(seriesModel,r,width,height);
})}},function(module,exports,__webpack_require__){"use strict";
function adjustSingleSide(list,cx,cy,r,dir,viewWidth,viewHeight){
function shiftDown(start,end,delta,dir){for(var j=start;j<end;j++)if(list[j].y+=delta,
j>start&&j+1<end&&list[j+1].y>list[j].y+list[j].height)return void shiftUp(j,delta/2);
shiftUp(end-1,delta/2)}function shiftUp(end,delta){for(var j=end;j>=0&&(list[j].y-=delta,
!(j>0&&list[j].y>list[j-1].y+list[j-1].height));j--);}function changeX(list,isDownList,cx,cy,r,dir){
for(var lastDeltaX=dir>0?isDownList?Number.MAX_VALUE:0:isDownList?Number.MAX_VALUE:0,i=0,l=list.length;i<l;i++)if("center"!==list[i].position){
var deltaY=Math.abs(list[i].y-cy),length=list[i].len,length2=list[i].len2,deltaX=deltaY<r+length?Math.sqrt((r+length+length2)*(r+length+length2)-deltaY*deltaY):Math.abs(list[i].x-cx);
isDownList&&deltaX>=lastDeltaX&&(deltaX=lastDeltaX-10),!isDownList&&deltaX<=lastDeltaX&&(deltaX=lastDeltaX+10),
list[i].x=cx+deltaX*dir,lastDeltaX=deltaX}}list.sort(function(a,b){
return a.y-b.y});for(var delta,lastY=0,len=list.length,upList=[],downList=[],i=0;i<len;i++)delta=list[i].y-lastY,
delta<0&&shiftDown(i,len,-delta,dir),lastY=list[i].y+list[i].height;
viewHeight-lastY<0&&shiftUp(len-1,lastY-viewHeight);for(var i=0;i<len;i++)list[i].y>=cy?downList.push(list[i]):upList.push(list[i]);
changeX(upList,!1,cx,cy,r,dir),changeX(downList,!0,cx,cy,r,dir);
}function avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight){
for(var leftList=[],rightList=[],i=0;i<labelLayoutList.length;i++)labelLayoutList[i].x<cx?leftList.push(labelLayoutList[i]):rightList.push(labelLayoutList[i]);
adjustSingleSide(rightList,cx,cy,r,1,viewWidth,viewHeight),adjustSingleSide(leftList,cx,cy,r,-1,viewWidth,viewHeight);
for(var i=0;i<labelLayoutList.length;i++){var linePoints=labelLayoutList[i].linePoints;
if(linePoints){var dist=linePoints[1][0]-linePoints[2][0];labelLayoutList[i].x<cx?linePoints[2][0]=labelLayoutList[i].x+3:linePoints[2][0]=labelLayoutList[i].x-3,
linePoints[1][1]=linePoints[2][1]=labelLayoutList[i].y,linePoints[1][0]=linePoints[2][0]+dist;
}}}var textContain=__webpack_require__(8);module.exports=function(seriesModel,r,viewWidth,viewHeight){
var cx,cy,data=seriesModel.getData(),labelLayoutList=[],hasLabelRotate=!1;
data.each(function(idx){var textX,textY,linePoints,textAlign,layout=data.getItemLayout(idx),itemModel=data.getItemModel(idx),labelModel=itemModel.getModel("label.normal"),labelPosition=labelModel.get("position")||itemModel.get("label.emphasis.position"),labelLineModel=itemModel.getModel("labelLine.normal"),labelLineLen=labelLineModel.get("length"),labelLineLen2=labelLineModel.get("length2"),midAngle=(layout.startAngle+layout.endAngle)/2,dx=Math.cos(midAngle),dy=Math.sin(midAngle);
cx=layout.cx,cy=layout.cy;var isLabelInside="inside"===labelPosition||"inner"===labelPosition;
if("center"===labelPosition)textX=layout.cx,textY=layout.cy,textAlign="center";else{
var x1=(isLabelInside?(layout.r+layout.r0)/2*dx:layout.r*dx)+cx,y1=(isLabelInside?(layout.r+layout.r0)/2*dy:layout.r*dy)+cy;
if(textX=x1+3*dx,textY=y1+3*dy,!isLabelInside){var x2=x1+dx*(labelLineLen+r-layout.r),y2=y1+dy*(labelLineLen+r-layout.r),x3=x2+(dx<0?-1:1)*labelLineLen2,y3=y2;
textX=x3+(dx<0?-5:5),textY=y3,linePoints=[[x1,y1],[x2,y2],[x3,y3]];
}textAlign=isLabelInside?"center":dx>0?"left":"right"}var font=labelModel.getModel("textStyle").getFont(),labelRotate=labelModel.get("rotate")?dx<0?-midAngle+Math.PI:-midAngle:0,text=seriesModel.getFormattedLabel(idx,"normal")||data.getName(idx),textRect=textContain.getBoundingRect(text,font,textAlign,"top");
hasLabelRotate=!!labelRotate,layout.label={x:textX,y:textY,position:labelPosition,
height:textRect.height,len:labelLineLen,len2:labelLineLen2,linePoints:linePoints,
textAlign:textAlign,verticalAlign:"middle",font:font,rotation:labelRotate
},isLabelInside||labelLayoutList.push(layout.label)}),!hasLabelRotate&&seriesModel.get("avoidLabelOverlap")&&avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight);
}},function(module,exports){module.exports=function(seriesType,ecModel){
var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&&legendModels.length&&ecModel.eachSeriesByType(seriesType,function(series){
var data=series.getData();data.filterSelf(function(idx){for(var name=data.getName(idx),i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(name))return!1;
return!0},this)},this)}},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);
__webpack_require__(151),__webpack_require__(152),echarts.registerVisual(zrUtil.curry(__webpack_require__(110),"scatter","circle",null)),
echarts.registerLayout(zrUtil.curry(__webpack_require__(111),"scatter")),
__webpack_require__(113)},function(module,exports,__webpack_require__){
"use strict";var createListFromArray=__webpack_require__(102),SeriesModel=__webpack_require__(28);
module.exports=SeriesModel.extend({type:"series.scatter",dependencies:["grid","polar"],
getInitialData:function(option,ecModel){var list=createListFromArray(option.data,this,ecModel);
return list},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",
zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,
large:!1,largeThreshold:2e3,itemStyle:{normal:{opacity:.8}}}});
},function(module,exports,__webpack_require__){var SymbolDraw=__webpack_require__(105),LargeSymbolDraw=__webpack_require__(153);
__webpack_require__(1).extendChartView({type:"scatter",init:function(){
this._normalSymbolDraw=new SymbolDraw,this._largeSymbolDraw=new LargeSymbolDraw;
},render:function(seriesModel,ecModel,api){var data=seriesModel.getData(),largeSymbolDraw=this._largeSymbolDraw,normalSymbolDraw=this._normalSymbolDraw,group=this.group,symbolDraw=seriesModel.get("large")&&data.count()>seriesModel.get("largeThreshold")?largeSymbolDraw:normalSymbolDraw;
this._symbolDraw=symbolDraw,symbolDraw.updateData(data),group.add(symbolDraw.group),
group.remove(symbolDraw===largeSymbolDraw?normalSymbolDraw.group:largeSymbolDraw.group);
},updateLayout:function(seriesModel){this._symbolDraw.updateLayout(seriesModel);
},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(api,!0);
},dispose:function(){}})},function(module,exports,__webpack_require__){
function LargeSymbolDraw(){this.group=new graphic.Group,this._symbolEl=new LargeSymbolPath({});
}var graphic=__webpack_require__(43),symbolUtil=__webpack_require__(107),LargeSymbolPath=graphic.extendShape({
shape:{points:null,sizes:null},symbolProxy:null,buildPath:function(path,shape){
for(var points=shape.points,sizes=shape.sizes,symbolProxy=this.symbolProxy,symbolProxyShape=symbolProxy.shape,i=0;i<points.length;i++){
var pt=points[i],size=sizes[i];size[0]<4?path.rect(pt[0]-size[0]/2,pt[1]-size[1]/2,size[0],size[1]):(symbolProxyShape.x=pt[0]-size[0]/2,
symbolProxyShape.y=pt[1]-size[1]/2,symbolProxyShape.width=size[0],
symbolProxyShape.height=size[1],symbolProxy.buildPath(path,symbolProxyShape,!0));
}},findDataIndex:function(x,y){for(var shape=this.shape,points=shape.points,sizes=shape.sizes,i=points.length-1;i>=0;i--){
var pt=points[i],size=sizes[i],x0=pt[0]-size[0]/2,y0=pt[1]-size[1]/2;
if(x>=x0&&y>=y0&&x<=x0+size[0]&&y<=y0+size[1])return i}return-1;
}}),largeSymbolProto=LargeSymbolDraw.prototype;largeSymbolProto.updateData=function(data){
this.group.removeAll();var symbolEl=this._symbolEl,seriesModel=data.hostModel;
symbolEl.setShape({points:data.mapArray(data.getItemLayout),sizes:data.mapArray(function(idx){
var size=data.getItemVisual(idx,"symbolSize");return size instanceof Array||(size=[size,size]),
size})}),symbolEl.symbolProxy=symbolUtil.createSymbol(data.getVisual("symbol"),0,0,0,0),
symbolEl.setColor=symbolEl.symbolProxy.setColor,symbolEl.useStyle(seriesModel.getModel("itemStyle.normal").getItemStyle(["color"]));
var visualColor=data.getVisual("color");visualColor&&symbolEl.setColor(visualColor),
symbolEl.seriesIndex=seriesModel.seriesIndex,symbolEl.on("mousemove",function(e){
symbolEl.dataIndex=null;var dataIndex=symbolEl.findDataIndex(e.offsetX,e.offsetY);
dataIndex>0&&(symbolEl.dataIndex=dataIndex)}),this.group.add(symbolEl);
},largeSymbolProto.updateLayout=function(seriesModel){var data=seriesModel.getData();
this._symbolEl.setShape({points:data.mapArray(data.getItemLayout)
})},largeSymbolProto.remove=function(){this.group.removeAll();
},module.exports=LargeSymbolDraw},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);
__webpack_require__(155),__webpack_require__(160),__webpack_require__(161),
echarts.registerVisual(zrUtil.curry(__webpack_require__(146),"radar")),
echarts.registerVisual(zrUtil.curry(__webpack_require__(110),"radar","circle",null)),
echarts.registerLayout(__webpack_require__(162)),echarts.registerProcessor(zrUtil.curry(__webpack_require__(149),"radar")),
echarts.registerPreprocessor(__webpack_require__(163))},function(module,exports,__webpack_require__){
__webpack_require__(156),__webpack_require__(158),__webpack_require__(159);
},function(module,exports,__webpack_require__){function Radar(radarModel,ecModel,api){
this._model=radarModel,this.dimensions=[],this._indicatorAxes=zrUtil.map(radarModel.getIndicatorModels(),function(indicatorModel,idx){
var dim="indicator_"+idx,indicatorAxis=new IndicatorAxis(dim,new IntervalScale);
return indicatorAxis.name=indicatorModel.get("name"),indicatorAxis.model=indicatorModel,
indicatorModel.axis=indicatorAxis,this.dimensions.push(dim),indicatorAxis;
},this),this.resize(radarModel,api),this.cx,this.cy,this.r,this.startAngle;
}var zrUtil=__webpack_require__(4),IndicatorAxis=__webpack_require__(157),IntervalScale=__webpack_require__(118),numberUtil=__webpack_require__(7),axisHelper=__webpack_require__(115);
Radar.prototype.getIndicatorAxes=function(){return this._indicatorAxes;
},Radar.prototype.dataToPoint=function(value,indicatorIndex){
var indicatorAxis=this._indicatorAxes[indicatorIndex];return this.coordToPoint(indicatorAxis.dataToCoord(value),indicatorIndex);
},Radar.prototype.coordToPoint=function(coord,indicatorIndex){
var indicatorAxis=this._indicatorAxes[indicatorIndex],angle=indicatorAxis.angle,x=this.cx+coord*Math.cos(angle),y=this.cy-coord*Math.sin(angle);
return[x,y]},Radar.prototype.pointToData=function(pt){var dx=pt[0]-this.cx,dy=pt[1]-this.cy,radius=Math.sqrt(dx*dx+dy*dy);
dx/=radius,dy/=radius;for(var closestAxis,radian=Math.atan2(-dy,dx),minRadianDiff=1/0,closestAxisIdx=-1,i=0;i<this._indicatorAxes.length;i++){
var indicatorAxis=this._indicatorAxes[i],diff=Math.abs(radian-indicatorAxis.angle);
diff<minRadianDiff&&(closestAxis=indicatorAxis,closestAxisIdx=i,
minRadianDiff=diff)}return[closestAxisIdx,+(closestAxis&&closestAxis.coodToData(radius))];
},Radar.prototype.resize=function(radarModel,api){var center=radarModel.get("center"),viewWidth=api.getWidth(),viewHeight=api.getHeight(),viewSize=Math.min(viewWidth,viewHeight)/2;
this.cx=numberUtil.parsePercent(center[0],viewWidth),this.cy=numberUtil.parsePercent(center[1],viewHeight),
this.startAngle=radarModel.get("startAngle")*Math.PI/180,this.r=numberUtil.parsePercent(radarModel.get("radius"),viewSize),
zrUtil.each(this._indicatorAxes,function(indicatorAxis,idx){indicatorAxis.setExtent(0,this.r);
var angle=this.startAngle+idx*Math.PI*2/this._indicatorAxes.length;
angle=Math.atan2(Math.sin(angle),Math.cos(angle)),indicatorAxis.angle=angle;
},this)},Radar.prototype.update=function(ecModel,api){function increaseInterval(interval){
var exp10=Math.pow(10,Math.floor(Math.log(interval)/Math.LN10)),f=interval/exp10;
return 2===f?f=5:f*=2,f*exp10}var indicatorAxes=this._indicatorAxes,radarModel=this._model;
zrUtil.each(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.setExtent(1/0,-(1/0));
}),ecModel.eachSeriesByType("radar",function(radarSeries,idx){
if("radar"===radarSeries.get("coordinateSystem")&&ecModel.getComponent("radar",radarSeries.get("radarIndex"))===radarModel){
var data=radarSeries.getData();zrUtil.each(indicatorAxes,function(indicatorAxis){
indicatorAxis.scale.unionExtentFromData(data,indicatorAxis.dim);
})}},this);var splitNumber=radarModel.get("splitNumber");zrUtil.each(indicatorAxes,function(indicatorAxis,idx){
var rawExtent=axisHelper.getScaleExtent(indicatorAxis,indicatorAxis.model);
axisHelper.niceScaleExtent(indicatorAxis,indicatorAxis.model);
var axisModel=indicatorAxis.model,scale=indicatorAxis.scale,fixedMin=axisModel.getMin(),fixedMax=axisModel.getMax(),interval=scale.getInterval();
if(null!=fixedMin&&null!=fixedMax)scale.setInterval((fixedMax-fixedMin)/splitNumber);else if(null!=fixedMin){
var max;do max=fixedMin+interval*splitNumber,scale.setExtent(+fixedMin,max),
scale.setInterval(interval),interval=increaseInterval(interval);while(max<rawExtent[1]&&isFinite(max)&&isFinite(rawExtent[1]));
}else if(null!=fixedMax){var min;do min=fixedMax-interval*splitNumber,
scale.setExtent(min,+fixedMax),scale.setInterval(interval),interval=increaseInterval(interval);while(min>rawExtent[0]&&isFinite(min)&&isFinite(rawExtent[0]));
}else{var nicedSplitNumber=scale.getTicks().length-1;nicedSplitNumber>splitNumber&&(interval=increaseInterval(interval));
var center=Math.round((rawExtent[0]+rawExtent[1])/2/interval)*interval,halfSplitNumber=Math.round(splitNumber/2);
scale.setExtent(numberUtil.round(center-halfSplitNumber*interval),numberUtil.round(center+(splitNumber-halfSplitNumber)*interval)),
scale.setInterval(interval)}})},Radar.dimensions=[],Radar.create=function(ecModel,api){
var radarList=[];return ecModel.eachComponent("radar",function(radarModel){
var radar=new Radar(radarModel,ecModel,api);radarList.push(radar),
radarModel.coordinateSystem=radar}),ecModel.eachSeriesByType("radar",function(radarSeries){
"radar"===radarSeries.get("coordinateSystem")&&(radarSeries.coordinateSystem=radarList[radarSeries.get("radarIndex")||0]);
}),radarList},__webpack_require__(26).register("radar",Radar),
module.exports=Radar},function(module,exports,__webpack_require__){
function IndicatorAxis(dim,scale,radiusExtent){Axis.call(this,dim,scale,radiusExtent),
this.type="value",this.angle=0,this.name="",this.model}var zrUtil=__webpack_require__(4),Axis=__webpack_require__(124);
zrUtil.inherits(IndicatorAxis,Axis),module.exports=IndicatorAxis;
},function(module,exports,__webpack_require__){function defaultsShow(opt,show){
return zrUtil.defaults({show:show},opt)}var axisDefault=__webpack_require__(129),valueAxisDefault=axisDefault.valueAxis,Model=__webpack_require__(12),zrUtil=__webpack_require__(4),axisModelCommonMixin=__webpack_require__(130),RadarModel=__webpack_require__(1).extendComponentModel({
type:"radar",optionUpdated:function(){var boundaryGap=this.get("boundaryGap"),splitNumber=this.get("splitNumber"),scale=this.get("scale"),axisLine=this.get("axisLine"),axisTick=this.get("axisTick"),axisLabel=this.get("axisLabel"),nameTextStyle=this.get("name.textStyle"),showName=this.get("name.show"),nameFormatter=this.get("name.formatter"),nameGap=this.get("nameGap"),triggerEvent=this.get("triggerEvent"),indicatorModels=zrUtil.map(this.get("indicator")||[],function(indicatorOpt){
if(null!=indicatorOpt.max&&indicatorOpt.max>0&&!indicatorOpt.min?indicatorOpt.min=0:null!=indicatorOpt.min&&indicatorOpt.min<0&&!indicatorOpt.max&&(indicatorOpt.max=0),
indicatorOpt=zrUtil.merge(zrUtil.clone(indicatorOpt),{boundaryGap:boundaryGap,
splitNumber:splitNumber,scale:scale,axisLine:axisLine,axisTick:axisTick,
axisLabel:axisLabel,name:indicatorOpt.text,nameLocation:"end",
nameGap:nameGap,nameTextStyle:nameTextStyle,triggerEvent:triggerEvent
},!1),showName||(indicatorOpt.name=""),"string"==typeof nameFormatter){
var indName=indicatorOpt.name;indicatorOpt.name=nameFormatter.replace("{value}",null!=indName?indName:"");
}else"function"==typeof nameFormatter&&(indicatorOpt.name=nameFormatter(indicatorOpt.name,indicatorOpt));
var model=zrUtil.extend(new Model(indicatorOpt,null,this.ecModel),axisModelCommonMixin);
return model.mainType="radar",model.componentIndex=this.componentIndex,
model},this);this.getIndicatorModels=function(){return indicatorModels;
}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",
startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,
nameGap:15,scale:!1,shape:"polygon",axisLine:zrUtil.merge({lineStyle:{
color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),
axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),
splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]
}});module.exports=RadarModel},function(module,exports,__webpack_require__){
var AxisBuilder=__webpack_require__(133),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),axisBuilderAttrs=["axisLine","axisLabel","axisTick","axisName"];
module.exports=__webpack_require__(1).extendComponentView({type:"radar",
render:function(radarModel,ecModel,api){var group=this.group;group.removeAll(),
this._buildAxes(radarModel),this._buildSplitLineAndArea(radarModel);
},_buildAxes:function(radarModel){var radar=radarModel.coordinateSystem,indicatorAxes=radar.getIndicatorAxes(),axisBuilders=zrUtil.map(indicatorAxes,function(indicatorAxis){
var axisBuilder=new AxisBuilder(indicatorAxis.model,{position:[radar.cx,radar.cy],
rotation:indicatorAxis.angle,labelDirection:-1,tickDirection:-1,
nameDirection:1});return axisBuilder});zrUtil.each(axisBuilders,function(axisBuilder){
zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),this.group.add(axisBuilder.getGroup());
},this)},_buildSplitLineAndArea:function(radarModel){function getColorIndex(areaOrLine,areaOrLineColorList,idx){
var colorIndex=idx%areaOrLineColorList.length;return areaOrLine[colorIndex]=areaOrLine[colorIndex]||[],
colorIndex}var radar=radarModel.coordinateSystem,indicatorAxes=radar.getIndicatorAxes();
if(indicatorAxes.length){var shape=radarModel.get("shape"),splitLineModel=radarModel.getModel("splitLine"),splitAreaModel=radarModel.getModel("splitArea"),lineStyleModel=splitLineModel.getModel("lineStyle"),areaStyleModel=splitAreaModel.getModel("areaStyle"),showSplitLine=splitLineModel.get("show"),showSplitArea=splitAreaModel.get("show"),splitLineColors=lineStyleModel.get("color"),splitAreaColors=areaStyleModel.get("color");
splitLineColors=zrUtil.isArray(splitLineColors)?splitLineColors:[splitLineColors],
splitAreaColors=zrUtil.isArray(splitAreaColors)?splitAreaColors:[splitAreaColors];
var splitLines=[],splitAreas=[];if("circle"===shape)for(var ticksRadius=indicatorAxes[0].getTicksCoords(),cx=radar.cx,cy=radar.cy,i=0;i<ticksRadius.length;i++){
if(showSplitLine){var colorIndex=getColorIndex(splitLines,splitLineColors,i);
splitLines[colorIndex].push(new graphic.Circle({shape:{cx:cx,
cy:cy,r:ticksRadius[i]}}))}if(showSplitArea&&i<ticksRadius.length-1){
var colorIndex=getColorIndex(splitAreas,splitAreaColors,i);splitAreas[colorIndex].push(new graphic.Ring({
shape:{cx:cx,cy:cy,r0:ticksRadius[i],r:ticksRadius[i+1]}}))}}else for(var realSplitNumber=-1,axesTicksPoints=zrUtil.map(indicatorAxes,function(indicatorAxis,idx){
var ticksCoords=indicatorAxis.getTicksCoords();return realSplitNumber=Math.max(ticksCoords.length-1,realSplitNumber),
zrUtil.map(ticksCoords,function(tickCoord){return radar.coordToPoint(tickCoord,idx);
})}),prevPoints=[],i=0;i<=realSplitNumber;i++){for(var points=[],j=0;j<indicatorAxes.length;j++)points.push(axesTicksPoints[j][i]);
if(points[0]?points.push(points[0].slice()):console.error("Can't draw value axis "+i),
showSplitLine){var colorIndex=getColorIndex(splitLines,splitLineColors,i);
splitLines[colorIndex].push(new graphic.Polyline({shape:{points:points
}}))}if(showSplitArea&&prevPoints){var colorIndex=getColorIndex(splitAreas,splitAreaColors,i-1);
splitAreas[colorIndex].push(new graphic.Polygon({shape:{points:points.concat(prevPoints)
}}))}prevPoints=points.slice().reverse()}var lineStyle=lineStyleModel.getLineStyle(),areaStyle=areaStyleModel.getAreaStyle();
zrUtil.each(splitAreas,function(splitAreas,idx){this.group.add(graphic.mergePath(splitAreas,{
style:zrUtil.defaults({stroke:"none",fill:splitAreaColors[idx%splitAreaColors.length]
},areaStyle),silent:!0}))},this),zrUtil.each(splitLines,function(splitLines,idx){
this.group.add(graphic.mergePath(splitLines,{style:zrUtil.defaults({
fill:"none",stroke:splitLineColors[idx%splitLineColors.length]
},lineStyle),silent:!0}))},this)}}})},function(module,exports,__webpack_require__){
"use strict";var SeriesModel=__webpack_require__(28),List=__webpack_require__(98),completeDimensions=__webpack_require__(103),zrUtil=__webpack_require__(4),encodeHTML=__webpack_require__(6).encodeHTML,RadarSeries=SeriesModel.extend({
type:"series.radar",dependencies:["radar"],init:function(option){
RadarSeries.superApply(this,"init",arguments),this.legendDataProvider=function(){
return this.getRawData()}},getInitialData:function(option,ecModel){
var data=option.data||[],dimensions=completeDimensions([],data,[],"indicator_"),list=new List(dimensions,this);
return list.initData(data),list},formatTooltip:function(dataIndex){
var value=this.getRawValue(dataIndex),coordSys=this.coordinateSystem,indicatorAxes=coordSys.getIndicatorAxes(),name=this.getData().getName(dataIndex);
return encodeHTML(""===name?this.name:name)+"<br/>"+zrUtil.map(indicatorAxes,function(axis,idx){
return encodeHTML(axis.name+" : "+value[idx])}).join("<br />");
},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,
radarIndex:0,lineStyle:{normal:{width:2,type:"solid"}},label:{
normal:{position:"top"}},symbol:"emptyCircle",symbolSize:4}});
module.exports=RadarSeries},function(module,exports,__webpack_require__){
function normalizeSymbolSize(symbolSize){return zrUtil.isArray(symbolSize)||(symbolSize=[+symbolSize,+symbolSize]),
symbolSize}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),symbolUtil=__webpack_require__(107);
module.exports=__webpack_require__(1).extendChartView({type:"radar",
render:function(seriesModel,ecModel,api){function createSymbol(data,idx){
var symbolType=data.getItemVisual(idx,"symbol")||"circle",color=data.getItemVisual(idx,"color");
if("none"!==symbolType){var symbolPath=symbolUtil.createSymbol(symbolType,-.5,-.5,1,1,color);
return symbolPath.attr({style:{strokeNoScale:!0},z2:100,scale:normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"))
}),symbolPath}}function updateSymbols(oldPoints,newPoints,symbolGroup,data,idx,isInit){
symbolGroup.removeAll();for(var i=0;i<newPoints.length-1;i++){
var symbolPath=createSymbol(data,idx);symbolPath&&(symbolPath.__dimIdx=i,
oldPoints[i]?(symbolPath.attr("position",oldPoints[i]),graphic[isInit?"initProps":"updateProps"](symbolPath,{
position:newPoints[i]},seriesModel,idx)):symbolPath.attr("position",newPoints[i]),
symbolGroup.add(symbolPath))}}function getInitialPoints(points){
return zrUtil.map(points,function(pt){return[polar.cx,polar.cy];
})}var polar=seriesModel.coordinateSystem,group=this.group,data=seriesModel.getData(),oldData=this._data;
data.diff(oldData).add(function(idx){var points=data.getItemLayout(idx);
if(points){var polygon=new graphic.Polygon,polyline=new graphic.Polyline,target={
shape:{points:points}};polygon.shape.points=getInitialPoints(points),
polyline.shape.points=getInitialPoints(points),graphic.initProps(polygon,target,seriesModel,idx),
graphic.initProps(polyline,target,seriesModel,idx);var itemGroup=new graphic.Group,symbolGroup=new graphic.Group;
itemGroup.add(polyline),itemGroup.add(polygon),itemGroup.add(symbolGroup),
updateSymbols(polyline.shape.points,points,symbolGroup,data,idx,!0),
data.setItemGraphicEl(idx,itemGroup)}}).update(function(newIdx,oldIdx){
var itemGroup=oldData.getItemGraphicEl(oldIdx),polyline=itemGroup.childAt(0),polygon=itemGroup.childAt(1),symbolGroup=itemGroup.childAt(2),target={
shape:{points:data.getItemLayout(newIdx)}};target.shape.points&&(updateSymbols(polyline.shape.points,target.shape.points,symbolGroup,data,newIdx,!1),
graphic.updateProps(polyline,target,seriesModel),graphic.updateProps(polygon,target,seriesModel),
data.setItemGraphicEl(newIdx,itemGroup))}).remove(function(idx){
group.remove(oldData.getItemGraphicEl(idx))}).execute(),data.eachItemGraphicEl(function(itemGroup,idx){
function onEmphasis(){polygon.attr("ignore",hoverPolygonIgnore);
}function onNormal(){polygon.attr("ignore",polygonIgnore)}var itemModel=data.getItemModel(idx),polyline=itemGroup.childAt(0),polygon=itemGroup.childAt(1),symbolGroup=itemGroup.childAt(2),color=data.getItemVisual(idx,"color");
group.add(itemGroup),polyline.useStyle(zrUtil.defaults(itemModel.getModel("lineStyle.normal").getLineStyle(),{
fill:"none",stroke:color})),polyline.hoverStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle();
var areaStyleModel=itemModel.getModel("areaStyle.normal"),hoverAreaStyleModel=itemModel.getModel("areaStyle.emphasis"),polygonIgnore=areaStyleModel.isEmpty()&&areaStyleModel.parentModel.isEmpty(),hoverPolygonIgnore=hoverAreaStyleModel.isEmpty()&&hoverAreaStyleModel.parentModel.isEmpty();
hoverPolygonIgnore=hoverPolygonIgnore&&polygonIgnore,polygon.ignore=polygonIgnore,
polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(),{
fill:color,opacity:.7})),polygon.hoverStyle=hoverAreaStyleModel.getAreaStyle();
var itemStyle=itemModel.getModel("itemStyle.normal").getItemStyle(["color"]),itemHoverStyle=itemModel.getModel("itemStyle.emphasis").getItemStyle(),labelModel=itemModel.getModel("label.normal"),labelHoverModel=itemModel.getModel("label.emphasis");
symbolGroup.eachChild(function(symbolPath){symbolPath.setStyle(itemStyle),
symbolPath.hoverStyle=zrUtil.clone(itemHoverStyle);var defaultText=data.get(data.dimensions[symbolPath.__dimIdx],idx);
graphic.setText(symbolPath.style,labelModel,color),symbolPath.setStyle({
text:labelModel.get("show")?zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"normal",null,symbolPath.__dimIdx),defaultText):""
}),graphic.setText(symbolPath.hoverStyle,labelHoverModel,color),
symbolPath.hoverStyle.text=labelHoverModel.get("show")?zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"emphasis",null,symbolPath.__dimIdx),defaultText):"";
}),itemGroup.off("mouseover").off("mouseout").off("normal").off("emphasis"),
itemGroup.on("emphasis",onEmphasis).on("mouseover",onEmphasis).on("normal",onNormal).on("mouseout",onNormal),
graphic.setHoverStyle(itemGroup)}),this._data=data},remove:function(){
this.group.removeAll(),this._data=null},dispose:function(){}});
},function(module,exports){module.exports=function(ecModel){ecModel.eachSeriesByType("radar",function(seriesModel){
function pointsConverter(val,idx){points[idx]=points[idx]||[],
points[idx][i]=coordSys.dataToPoint(val,i)}var data=seriesModel.getData(),points=[],coordSys=seriesModel.coordinateSystem;
if(coordSys){for(var i=0;i<coordSys.getIndicatorAxes().length;i++){
var dim=data.dimensions[i];data.each(dim,pointsConverter)}data.each(function(idx){
points[idx][0]&&points[idx].push(points[idx][0].slice()),data.setItemLayout(idx,points[idx]);
})}})}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);
module.exports=function(option){var polarOptArr=option.polar;if(polarOptArr){
zrUtil.isArray(polarOptArr)||(polarOptArr=[polarOptArr]);var polarNotRadar=[];
zrUtil.each(polarOptArr,function(polarOpt,idx){polarOpt.indicator?(polarOpt.type&&!polarOpt.shape&&(polarOpt.shape=polarOpt.type),
option.radar=option.radar||[],zrUtil.isArray(option.radar)||(option.radar=[option.radar]),
option.radar.push(polarOpt)):polarNotRadar.push(polarOpt)}),option.polar=polarNotRadar;
}zrUtil.each(option.series,function(seriesOpt){"radar"===seriesOpt.type&&seriesOpt.polarIndex&&(seriesOpt.radarIndex=seriesOpt.polarIndex);
})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),PRIORITY=echarts.PRIORITY;
__webpack_require__(165),__webpack_require__(175),__webpack_require__(179),
__webpack_require__(166),echarts.registerLayout(__webpack_require__(181)),
echarts.registerVisual(__webpack_require__(182)),echarts.registerProcessor(PRIORITY.PROCESSOR.STATISTIC,__webpack_require__(183)),
echarts.registerPreprocessor(__webpack_require__(184)),__webpack_require__(145)("map",[{
type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"
},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",
event:"mapunselected",method:"unSelect"}])},function(module,exports,__webpack_require__){
var List=__webpack_require__(98),SeriesModel=__webpack_require__(28),zrUtil=__webpack_require__(4),completeDimensions=__webpack_require__(103),formatUtil=__webpack_require__(6),encodeHTML=formatUtil.encodeHTML,addCommas=formatUtil.addCommas,dataSelectableMixin=__webpack_require__(143),geoCreator=__webpack_require__(166),MapSeries=SeriesModel.extend({
type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,
seriesGroup:[],init:function(option){option=this._fillOption(option,this.getMapType()),
this.option=option,MapSeries.superApply(this,"init",arguments),
this.updateSelectedMap(option.data)},getInitialData:function(option){
var dimensions=completeDimensions(["value"],option.data||[]),list=new List(dimensions,this);
return list.initData(option.data),list},mergeOption:function(newOption){
newOption.data&&(newOption=this._fillOption(newOption,this.getMapType())),
MapSeries.superCall(this,"mergeOption",newOption),this.updateSelectedMap(this.option.data);
},getHostGeoModel:function(){var geoIndex=this.option.geoIndex;
return null!=geoIndex?this.dependentModels.geo[geoIndex]:null;
},getMapType:function(){return(this.getHostGeoModel()||this).option.map;
},_fillOption:function(option,mapName){return option=zrUtil.extend({},option),
option.data=geoCreator.getFilledRegions(option.data,mapName),
option},getRawValue:function(dataIndex){return this.getData().get("value",dataIndex);
},getRegionModel:function(regionName){var data=this.getData();
return data.getItemModel(data.indexOfName(regionName))},formatTooltip:function(dataIndex){
for(var data=this.getData(),formattedValue=addCommas(this.getRawValue(dataIndex)),name=data.getName(dataIndex),seriesGroup=this.seriesGroup,seriesNames=[],i=0;i<seriesGroup.length;i++){
var otherIndex=seriesGroup[i].originalData.indexOfName(name);isNaN(seriesGroup[i].originalData.get("value",otherIndex))||seriesNames.push(encodeHTML(seriesGroup[i].name));
}return seriesNames.join(", ")+"<br />"+encodeHTML(name+" : "+formattedValue);
},getTooltipPosition:function(dataIndex){if(null!=dataIndex){
var name=this.getData().getName(dataIndex),geo=this.coordinateSystem,region=geo.getRegion(name);
return region&&geo.dataToPoint(region.center)}},setZoom:function(zoom){
this.option.zoom=zoom},setCenter:function(center){this.option.center=center;
},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",
top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,
center:null,zoom:1,scaleLimit:null,label:{normal:{show:!1,textStyle:{
color:"#000"}},emphasis:{show:!0,textStyle:{color:"rgb(100,0,0)"
}}},itemStyle:{normal:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"
},emphasis:{areaColor:"rgba(255,215,0,0.8)"}}}});zrUtil.mixin(MapSeries,dataSelectableMixin),
module.exports=MapSeries},function(module,exports,__webpack_require__){
function resizeGeo(geoModel,api){var boxLayoutOption,rect=this.getBoundingRect(),center=geoModel.get("layoutCenter"),size=geoModel.get("layoutSize"),viewWidth=api.getWidth(),viewHeight=api.getHeight(),aspectScale=geoModel.get("aspectScale")||.75,aspect=rect.width/rect.height*aspectScale,useCenterAndSize=!1;
center&&size&&(center=[numberUtil.parsePercent(center[0],viewWidth),numberUtil.parsePercent(center[1],viewHeight)],
size=numberUtil.parsePercent(size,Math.min(viewWidth,viewHeight)),
isNaN(center[0])||isNaN(center[1])||isNaN(size)?console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."):useCenterAndSize=!0);
var viewRect;if(useCenterAndSize){var viewRect={};aspect>1?(viewRect.width=size,
viewRect.height=size/aspect):(viewRect.height=size,viewRect.width=size*aspect),
viewRect.y=center[1]-viewRect.height/2,viewRect.x=center[0]-viewRect.width/2;
}else boxLayoutOption=geoModel.getBoxLayoutParams(),boxLayoutOption.aspect=aspect,
viewRect=layout.getLayoutRect(boxLayoutOption,{width:viewWidth,
height:viewHeight});this.setViewRect(viewRect.x,viewRect.y,viewRect.width,viewRect.height),
this.setCenter(geoModel.get("center")),this.setZoom(geoModel.get("zoom"));
}function setGeoCoords(geo,model){zrUtil.each(model.get("geoCoord"),function(geoCoord,name){
geo.addGeoCoord(name,geoCoord)})}var Geo=__webpack_require__(167),layout=__webpack_require__(21),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),mapDataStores={},mapNotExistsError=function(name){
console.error("Map "+name+" not exists. You can download map file on http://echarts.baidu.com/download-map.html");
},geoCreator={dimensions:Geo.prototype.dimensions,create:function(ecModel,api){
var geoList=[];ecModel.eachComponent("geo",function(geoModel,idx){
var name=geoModel.get("map"),mapData=mapDataStores[name];mapData||mapNotExistsError(name);
var geo=new Geo(name+idx,name,mapData&&mapData.geoJson,mapData&&mapData.specialAreas,geoModel.get("nameMap"));
geo.zoomLimit=geoModel.get("scaleLimit"),geoList.push(geo),setGeoCoords(geo,geoModel),
geoModel.coordinateSystem=geo,geo.model=geoModel,geo.resize=resizeGeo,
geo.resize(geoModel,api)}),ecModel.eachSeries(function(seriesModel){
var coordSys=seriesModel.get("coordinateSystem");if("geo"===coordSys){
var geoIndex=seriesModel.get("geoIndex")||0;seriesModel.coordinateSystem=geoList[geoIndex];
}});var mapModelGroupBySeries={};return ecModel.eachSeriesByType("map",function(seriesModel){
if(!seriesModel.getHostGeoModel()){var mapType=seriesModel.getMapType();
mapModelGroupBySeries[mapType]=mapModelGroupBySeries[mapType]||[],
mapModelGroupBySeries[mapType].push(seriesModel)}}),zrUtil.each(mapModelGroupBySeries,function(mapSeries,mapType){
var mapData=mapDataStores[mapType];mapData||mapNotExistsError(mapSeries[0].get("map"));
var nameMapList=zrUtil.map(mapSeries,function(singleMapSeries){
return singleMapSeries.get("nameMap")}),geo=new Geo(mapType,mapType,mapData&&mapData.geoJson,mapData&&mapData.specialAreas,zrUtil.mergeAll(nameMapList));
geo.zoomLimit=zrUtil.retrieve.apply(null,zrUtil.map(mapSeries,function(singleMapSeries){
return singleMapSeries.get("scaleLimit")})),geoList.push(geo),
geo.resize=resizeGeo,geo.resize(mapSeries[0],api),zrUtil.each(mapSeries,function(singleMapSeries){
singleMapSeries.coordinateSystem=geo,setGeoCoords(geo,singleMapSeries);
})}),geoList},registerMap:function(mapName,geoJson,specialAreas){
geoJson.geoJson&&!geoJson.features&&(specialAreas=geoJson.specialAreas,
geoJson=geoJson.geoJson),"string"==typeof geoJson&&(geoJson="undefined"!=typeof JSON&&JSON.parse?JSON.parse(geoJson):new Function("return ("+geoJson+");")()),
mapDataStores[mapName]={geoJson:geoJson,specialAreas:specialAreas
}},getMap:function(mapName){return mapDataStores[mapName]},getFilledRegions:function(originRegionArr,mapName){
var regionsArr=(originRegionArr||[]).slice(),map=geoCreator.getMap(mapName),geoJson=map&&map.geoJson;
if(!geoJson)return mapNotExistsError(mapName),originRegionArr;
for(var dataNameMap={},features=geoJson.features,i=0;i<regionsArr.length;i++)dataNameMap[regionsArr[i].name]=regionsArr[i];
for(var i=0;i<features.length;i++){var name=features[i].properties.name;
dataNameMap[name]||regionsArr.push({name:name})}return regionsArr;
}},echarts=__webpack_require__(1);echarts.registerMap=geoCreator.registerMap,
echarts.getMap=geoCreator.getMap,echarts.loadMap=function(){},
echarts.registerCoordinateSystem("geo",geoCreator),module.exports=geoCreator;
},function(module,exports,__webpack_require__){function Geo(name,map,geoJson,specialAreas,nameMap){
View.call(this,name),this.map=map,this._nameCoordMap={},this.loadGeoJson(geoJson,specialAreas,nameMap);
}function doConvert(methodName,ecModel,finder,value){var geoModel=finder.geoModel,seriesModel=finder.seriesModel,coordSys=geoModel?geoModel.coordinateSystem:seriesModel?seriesModel.coordinateSystem||(seriesModel.getReferringComponents("geo")[0]||{}).coordinateSystem:null;
return coordSys===this?coordSys[methodName](value):null}var parseGeoJson=__webpack_require__(168),zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),View=__webpack_require__(171),geoFixFuncs=[__webpack_require__(172),__webpack_require__(173),__webpack_require__(174)];
Geo.prototype={constructor:Geo,type:"geo",dimensions:["lng","lat"],
containCoord:function(coord){for(var regions=this.regions,i=0;i<regions.length;i++)if(regions[i].contain(coord))return!0;
return!1},loadGeoJson:function(geoJson,specialAreas,nameMap){
try{this.regions=geoJson?parseGeoJson(geoJson):[]}catch(e){throw"Invalid geoJson format\n"+e;
}specialAreas=specialAreas||{},nameMap=nameMap||{};for(var regions=this.regions,regionsMap={},i=0;i<regions.length;i++){
var regionName=regions[i].name;regionName=nameMap[regionName]||regionName,
regions[i].name=regionName,regionsMap[regionName]=regions[i],
this.addGeoCoord(regionName,regions[i].center);var specialArea=specialAreas[regionName];
specialArea&&regions[i].transformTo(specialArea.left,specialArea.top,specialArea.width,specialArea.height);
}this._regionsMap=regionsMap,this._rect=null,zrUtil.each(geoFixFuncs,function(fixFunc){
fixFunc(this)},this)},transformTo:function(x,y,width,height){
var rect=this.getBoundingRect();rect=rect.clone(),rect.y=-rect.y-rect.height;
var viewTransform=this._viewTransform;viewTransform.transform=rect.calculateTransform(new BoundingRect(x,y,width,height)),
viewTransform.decomposeTransform();var scale=viewTransform.scale;
scale[1]=-scale[1],viewTransform.updateTransform(),this._updateTransform();
},getRegion:function(name){return this._regionsMap[name]},getRegionByCoord:function(coord){
for(var regions=this.regions,i=0;i<regions.length;i++)if(regions[i].contain(coord))return regions[i];
},addGeoCoord:function(name,geoCoord){this._nameCoordMap[name]=geoCoord;
},getGeoCoord:function(name){return this._nameCoordMap[name]},
getBoundingRect:function(){if(this._rect)return this._rect;for(var rect,regions=this.regions,i=0;i<regions.length;i++){
var regionRect=regions[i].getBoundingRect();rect=rect||regionRect.clone(),
rect.union(regionRect)}return this._rect=rect||new BoundingRect(0,0,0,0);
},dataToPoints:function(data){var item=[];return data.mapArray(["lng","lat"],function(lon,lat){
return item[0]=lon,item[1]=lat,this.dataToPoint(item)},this)},
dataToPoint:function(data){if("string"==typeof data&&(data=this.getGeoCoord(data)),
data)return View.prototype.dataToPoint.call(this,data)},convertToPixel:zrUtil.curry(doConvert,"dataToPoint"),
convertFromPixel:zrUtil.curry(doConvert,"pointToData")},zrUtil.mixin(Geo,View),
module.exports=Geo},function(module,exports,__webpack_require__){
function decode(json){if(!json.UTF8Encoding)return json;for(var features=json.features,f=0;f<features.length;f++)for(var feature=features[f],geometry=feature.geometry,coordinates=geometry.coordinates,encodeOffsets=geometry.encodeOffsets,c=0;c<coordinates.length;c++){
var coordinate=coordinates[c];if("Polygon"===geometry.type)coordinates[c]=decodePolygon(coordinate,encodeOffsets[c]);else if("MultiPolygon"===geometry.type)for(var c2=0;c2<coordinate.length;c2++){
var polygon=coordinate[c2];coordinate[c2]=decodePolygon(polygon,encodeOffsets[c][c2]);
}}return json.UTF8Encoding=!1,json}function decodePolygon(coordinate,encodeOffsets){
for(var result=[],prevX=encodeOffsets[0],prevY=encodeOffsets[1],i=0;i<coordinate.length;i+=2){
var x=coordinate.charCodeAt(i)-64,y=coordinate.charCodeAt(i+1)-64;
x=x>>1^-(1&x),y=y>>1^-(1&y),x+=prevX,y+=prevY,prevX=x,prevY=y,
result.push([x/1024,y/1024])}return result}function flattern2D(array){
for(var ret=[],i=0;i<array.length;i++)for(var k=0;k<array[i].length;k++)ret.push(array[i][k]);
return ret}var zrUtil=__webpack_require__(4),Region=__webpack_require__(169);
module.exports=function(geoJson){return decode(geoJson),zrUtil.map(zrUtil.filter(geoJson.features,function(featureObj){
return featureObj.geometry&&featureObj.properties}),function(featureObj){
var properties=featureObj.properties,geometry=featureObj.geometry,coordinates=geometry.coordinates;
return"MultiPolygon"===geometry.type&&(coordinates=flattern2D(coordinates)),
new Region(properties.name,coordinates,properties.cp)})}},function(module,exports,__webpack_require__){
function Region(name,contours,cp){if(this.name=name,this.contours=contours,
cp)cp=[cp[0],cp[1]];else{var rect=this.getBoundingRect();cp=[rect.x+rect.width/2,rect.y+rect.height/2];
}this.center=cp}var polygonContain=__webpack_require__(170),BoundingRect=__webpack_require__(9),bbox=__webpack_require__(51),vec2=__webpack_require__(10);
Region.prototype={constructor:Region,getBoundingRect:function(){
var rect=this._rect;if(rect)return rect;for(var MAX_NUMBER=Number.MAX_VALUE,min=[MAX_NUMBER,MAX_NUMBER],max=[-MAX_NUMBER,-MAX_NUMBER],min2=[],max2=[],contours=this.contours,i=0;i<contours.length;i++)bbox.fromPoints(contours[i],min2,max2),
vec2.min(min,min,min2),vec2.max(max,max,max2);return 0===i&&(min[0]=min[1]=max[0]=max[1]=0),
this._rect=new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1]);
},contain:function(coord){var rect=this.getBoundingRect(),contours=this.contours;
if(rect.contain(coord[0],coord[1]))for(var i=0,len=contours.length;i<len;i++)if(polygonContain.contain(contours[i],coord[0],coord[1]))return!0;
return!1},transformTo:function(x,y,width,height){var rect=this.getBoundingRect(),aspect=rect.width/rect.height;
width?height||(height=width/aspect):width=aspect*height;for(var target=new BoundingRect(x,y,width,height),transform=rect.calculateTransform(target),contours=this.contours,i=0;i<contours.length;i++)for(var p=0;p<contours[i].length;p++)vec2.applyTransform(contours[i][p],contours[i][p],transform);
rect=this._rect,rect.copy(target),this.center=[rect.x+rect.width/2,rect.y+rect.height/2];
}},module.exports=Region},function(module,exports,__webpack_require__){
function isAroundEqual(a,b){return Math.abs(a-b)<EPSILON}function contain(points,x,y){
var w=0,p=points[0];if(!p)return!1;for(var i=1;i<points.length;i++){
var p2=points[i];w+=windingLine(p[0],p[1],p2[0],p2[1],x,y),p=p2;
}var p0=points[0];return isAroundEqual(p[0],p0[0])&&isAroundEqual(p[1],p0[1])||(w+=windingLine(p[0],p[1],p0[0],p0[1],x,y)),
0!==w}var windingLine=__webpack_require__(58),EPSILON=1e-8;module.exports={
contain:contain}},function(module,exports,__webpack_require__){
function TransformDummy(){Transformable.call(this)}function View(name){
this.name=name,this.zoomLimit,Transformable.call(this),this._roamTransform=new TransformDummy,
this._viewTransform=new TransformDummy,this._center,this._zoom;
}function doConvert(methodName,ecModel,finder,value){var seriesModel=finder.seriesModel,coordSys=seriesModel?seriesModel.coordinateSystem:null;
return coordSys===this?coordSys[methodName](value):null}var vector=__webpack_require__(10),matrix=__webpack_require__(11),Transformable=__webpack_require__(34),zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),v2ApplyTransform=vector.applyTransform;
zrUtil.mixin(TransformDummy,Transformable),View.prototype={constructor:View,
type:"view",dimensions:["x","y"],setBoundingRect:function(x,y,width,height){
return this._rect=new BoundingRect(x,y,width,height),this._rect;
},getBoundingRect:function(){return this._rect},setViewRect:function(x,y,width,height){
this.transformTo(x,y,width,height),this._viewRect=new BoundingRect(x,y,width,height);
},transformTo:function(x,y,width,height){var rect=this.getBoundingRect(),viewTransform=this._viewTransform;
viewTransform.transform=rect.calculateTransform(new BoundingRect(x,y,width,height)),
viewTransform.decomposeTransform(),this._updateTransform()},setCenter:function(centerCoord){
centerCoord&&(this._center=centerCoord,this._updateCenterAndZoom());
},setZoom:function(zoom){zoom=zoom||1;var zoomLimit=this.zoomLimit;
zoomLimit&&(null!=zoomLimit.max&&(zoom=Math.min(zoomLimit.max,zoom)),
null!=zoomLimit.min&&(zoom=Math.max(zoomLimit.min,zoom))),this._zoom=zoom,
this._updateCenterAndZoom()},getDefaultCenter:function(){var rawRect=this.getBoundingRect(),cx=rawRect.x+rawRect.width/2,cy=rawRect.y+rawRect.height/2;
return[cx,cy]},getCenter:function(){return this._center||this.getDefaultCenter();
},getZoom:function(){return this._zoom||1},getRoamTransform:function(){
return this._roamTransform},_updateCenterAndZoom:function(){var viewTransformMatrix=this._viewTransform.getLocalTransform(),roamTransform=this._roamTransform,defaultCenter=this.getDefaultCenter(),center=this.getCenter(),zoom=this.getZoom();
center=vector.applyTransform([],center,viewTransformMatrix),defaultCenter=vector.applyTransform([],defaultCenter,viewTransformMatrix),
roamTransform.origin=center,roamTransform.position=[defaultCenter[0]-center[0],defaultCenter[1]-center[1]],
roamTransform.scale=[zoom,zoom],this._updateTransform()},_updateTransform:function(){
var roamTransform=this._roamTransform,viewTransform=this._viewTransform;
viewTransform.parent=roamTransform,roamTransform.updateTransform(),
viewTransform.updateTransform(),viewTransform.transform&&matrix.copy(this.transform||(this.transform=[]),viewTransform.transform),
this.transform?(this.invTransform=this.invTransform||[],matrix.invert(this.invTransform,this.transform)):this.invTransform=null,
this.decomposeTransform()},getViewRect:function(){return this._viewRect;
},getViewRectAfterRoam:function(){var rect=this.getBoundingRect().clone();
return rect.applyTransform(this.transform),rect},dataToPoint:function(data){
var transform=this.transform;return transform?v2ApplyTransform([],data,transform):[data[0],data[1]];
},pointToData:function(point){var invTransform=this.invTransform;
return invTransform?v2ApplyTransform([],point,invTransform):[point[0],point[1]];
},convertToPixel:zrUtil.curry(doConvert,"dataToPoint"),convertFromPixel:zrUtil.curry(doConvert,"pointToData"),
containPoint:function(point){return this.getViewRectAfterRoam().contain(point[0],point[1]);
}},zrUtil.mixin(View,Transformable),module.exports=View},function(module,exports,__webpack_require__){
for(var Region=__webpack_require__(169),geoCoord=[126,25],points=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],i=0;i<points.length;i++)for(var k=0;k<points[i].length;k++)points[i][k][0]/=10.5,
points[i][k][1]/=-14,points[i][k][0]+=geoCoord[0],points[i][k][1]+=geoCoord[1];
module.exports=function(geo){"china"===geo.map&&geo.regions.push(new Region("南海诸岛",points,geoCoord));
}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),coordsOffsetMap={
"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]
};module.exports=function(geo){zrUtil.each(geo.regions,function(region){
var coordFix=coordsOffsetMap[region.name];if(coordFix){var cp=region.center;
cp[0]+=coordFix[0]/10.5,cp[1]+=-coordFix[1]/14}})}},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),geoCoordMap={Russia:[100,60],
"United States of America":[-99,38]};module.exports=function(geo){
zrUtil.each(geo.regions,function(region){var geoCoord=geoCoordMap[region.name];
if(geoCoord){var cp=region.center;cp[0]=geoCoord[0],cp[1]=geoCoord[1];
}})}},function(module,exports,__webpack_require__){var graphic=__webpack_require__(43),MapDraw=__webpack_require__(176);
__webpack_require__(1).extendChartView({type:"map",render:function(mapModel,ecModel,api,payload){
if(!payload||"mapToggleSelect"!==payload.type||payload.from!==this.uid){
var group=this.group;if(group.removeAll(),!mapModel.getHostGeoModel()){
if(payload&&"geoRoam"===payload.type&&"series"===payload.componentType&&payload.seriesId===mapModel.id){
var mapDraw=this._mapDraw;mapDraw&&group.add(mapDraw.group)}else if(mapModel.needsDrawMap){
var mapDraw=this._mapDraw||new MapDraw(api,(!0));group.add(mapDraw.group),
mapDraw.draw(mapModel,ecModel,api,this,payload),this._mapDraw=mapDraw;
}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;
mapModel.get("showLegendSymbol")&&ecModel.getComponent("legend")&&this._renderSymbols(mapModel,ecModel,api);
}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,
this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),
this._mapDraw=null},_renderSymbols:function(mapModel,ecModel,api){
var originalData=mapModel.originalData,group=this.group;originalData.each("value",function(value,idx){
if(!isNaN(value)){var layout=originalData.getItemLayout(idx);if(layout&&layout.point){
var point=layout.point,offset=layout.offset,circle=new graphic.Circle({
style:{fill:mapModel.getData().getVisual("color")},shape:{cx:point[0]+9*offset,
cy:point[1],r:3},silent:!0,z2:10});if(!offset){var fullData=mapModel.mainSeries.getData(),name=originalData.getName(idx),labelText=name,fullIndex=fullData.indexOfName(name),itemModel=originalData.getItemModel(idx),labelModel=itemModel.getModel("label.normal"),hoverLabelModel=itemModel.getModel("label.emphasis"),textStyleModel=labelModel.getModel("textStyle"),hoverTextStyleModel=hoverLabelModel.getModel("textStyle"),polygonGroups=fullData.getItemGraphicEl(fullIndex);
circle.setStyle({textPosition:"bottom"});var onEmphasis=function(){
circle.setStyle({text:hoverLabelModel.get("show")?labelText:"",
textFill:hoverTextStyleModel.getTextColor(),textFont:hoverTextStyleModel.getFont()
})},onNormal=function(){circle.setStyle({text:labelModel.get("show")?labelText:"",
textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()
})};polygonGroups.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal),
onNormal()}group.add(circle)}}})}})},function(module,exports,__webpack_require__){
function getFixedItemStyle(model,scale){var itemStyle=model.getItemStyle(),areaColor=model.get("areaColor");
return null!=areaColor&&(itemStyle.fill=areaColor),itemStyle}
function updateMapSelectHandler(mapDraw,mapOrGeoModel,group,api,fromView){
group.off("click"),group.off("mousedown"),mapOrGeoModel.get("selectedMode")&&(group.on("mousedown",function(){
mapDraw._mouseDownFlag=!0}),group.on("click",function(e){if(mapDraw._mouseDownFlag){
mapDraw._mouseDownFlag=!1;for(var el=e.target;!el.__region;)el=el.parent;
if(el){var region=el.__region,action={type:("geo"===mapOrGeoModel.mainType?"geo":"map")+"ToggleSelect",
name:region.name,from:fromView.uid};action[mapOrGeoModel.mainType+"Id"]=mapOrGeoModel.id,
api.dispatchAction(action),updateMapSelected(mapOrGeoModel,group);
}}}))}function updateMapSelected(mapOrGeoModel,group){group.eachChild(function(otherRegionEl){
otherRegionEl.__region&&otherRegionEl.trigger(mapOrGeoModel.isSelected(otherRegionEl.__region.name)?"emphasis":"normal");
})}function MapDraw(api,updateGroup){var group=new graphic.Group;
this._controller=new RoamController(api.getZr(),updateGroup?group:null,null),
this.group=group,this._updateGroup=updateGroup,this._mouseDownFlag;
}var RoamController=__webpack_require__(177),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4);
MapDraw.prototype={constructor:MapDraw,draw:function(mapOrGeoModel,ecModel,api,fromView,payload){
var isGeo="geo"===mapOrGeoModel.mainType,data=mapOrGeoModel.getData&&mapOrGeoModel.getData();
isGeo&&ecModel.eachComponent({mainType:"series",subType:"map"
},function(mapSeries){data||mapSeries.getHostGeoModel()!==mapOrGeoModel||(data=mapSeries.getData());
});var geo=mapOrGeoModel.coordinateSystem,group=this.group,scale=geo.scale,groupNewProp={
position:geo.position,scale:scale};!group.childAt(0)||payload?group.attr(groupNewProp):graphic.updateProps(group,groupNewProp,mapOrGeoModel),
group.removeAll();var itemStyleAccessPath=["itemStyle","normal"],hoverItemStyleAccessPath=["itemStyle","emphasis"],labelAccessPath=["label","normal"],hoverLabelAccessPath=["label","emphasis"];
zrUtil.each(geo.regions,function(region){var regionGroup=new graphic.Group,compoundPath=new graphic.CompoundPath({
shape:{paths:[]}});regionGroup.add(compoundPath);var dataIdx,regionModel=mapOrGeoModel.getRegionModel(region.name)||mapOrGeoModel,itemStyleModel=regionModel.getModel(itemStyleAccessPath),hoverItemStyleModel=regionModel.getModel(hoverItemStyleAccessPath),itemStyle=getFixedItemStyle(itemStyleModel,scale),hoverItemStyle=getFixedItemStyle(hoverItemStyleModel,scale),labelModel=regionModel.getModel(labelAccessPath),hoverLabelModel=regionModel.getModel(hoverLabelAccessPath);
if(data){dataIdx=data.indexOfName(region.name);var visualColor=data.getItemVisual(dataIdx,"color",!0);
visualColor&&(itemStyle.fill=visualColor)}var textStyleModel=labelModel.getModel("textStyle"),hoverTextStyleModel=hoverLabelModel.getModel("textStyle");
zrUtil.each(region.contours,function(contour){var polygon=new graphic.Polygon({
shape:{points:contour}});compoundPath.shape.paths.push(polygon);
}),compoundPath.setStyle(itemStyle),compoundPath.style.strokeNoScale=!0,
compoundPath.culling=!0;var showLabel=labelModel.get("show"),hoverShowLabel=hoverLabelModel.get("show"),isDataNaN=data&&isNaN(data.get("value",dataIdx)),itemLayout=data&&data.getItemLayout(dataIdx);
if(isGeo||isDataNaN&&(showLabel||hoverShowLabel)||itemLayout&&itemLayout.showLabel){
var query=data?dataIdx:region.name,formattedStr=mapOrGeoModel.getFormattedLabel(query,"normal"),hoverFormattedStr=mapOrGeoModel.getFormattedLabel(query,"emphasis"),text=new graphic.Text({
style:{text:showLabel?formattedStr||region.name:"",fill:textStyleModel.getTextColor(),
textFont:textStyleModel.getFont(),textAlign:"center",textVerticalAlign:"middle"
},hoverStyle:{text:hoverShowLabel?hoverFormattedStr||region.name:"",
fill:hoverTextStyleModel.getTextColor(),textFont:hoverTextStyleModel.getFont()
},position:region.center.slice(),scale:[1/scale[0],1/scale[1]],
z2:10,silent:!0});regionGroup.add(text)}if(data)data.setItemGraphicEl(dataIdx,regionGroup);else{
var regionModel=mapOrGeoModel.getRegionModel(region.name);compoundPath.eventData={
componentType:"geo",geoIndex:mapOrGeoModel.componentIndex,name:region.name,
region:regionModel&&regionModel.option||{}}}regionGroup.__region=region,
graphic.setHoverStyle(regionGroup,hoverItemStyle,{hoverSilentOnTouch:!!mapOrGeoModel.get("selectedMode")
}),group.add(regionGroup)}),this._updateController(mapOrGeoModel,ecModel,api),
updateMapSelectHandler(this,mapOrGeoModel,group,api,fromView),
updateMapSelected(mapOrGeoModel,group)},remove:function(){this.group.removeAll(),
this._controller.dispose()},_updateController:function(mapOrGeoModel,ecModel,api){
function makeActionBase(){var action={type:"geoRoam",componentType:mainType
};return action[mainType+"Id"]=mapOrGeoModel.id,action}var geo=mapOrGeoModel.coordinateSystem,controller=this._controller;
controller.zoomLimit=mapOrGeoModel.get("scaleLimit"),controller.zoom=geo.getZoom(),
controller.enable(mapOrGeoModel.get("roam")||!1);var mainType=mapOrGeoModel.mainType;
controller.off("pan").on("pan",function(dx,dy){this._mouseDownFlag=!1,
api.dispatchAction(zrUtil.extend(makeActionBase(),{dx:dx,dy:dy
}))},this),controller.off("zoom").on("zoom",function(zoom,mouseX,mouseY){
if(this._mouseDownFlag=!1,api.dispatchAction(zrUtil.extend(makeActionBase(),{
zoom:zoom,originX:mouseX,originY:mouseY})),this._updateGroup){
var group=this.group,scale=group.scale;group.traverse(function(el){
"text"===el.type&&el.attr("scale",[1/scale[0],1/scale[1]])})}
},this),controller.setContainsPoint(function(x,y){return geo.getViewRectAfterRoam().contain(x,y);
})}},module.exports=MapDraw},function(module,exports,__webpack_require__){
function mousedown(e){if(!e.target||!e.target.draggable){var x=e.offsetX,y=e.offsetY;
this.containsPoint&&this.containsPoint(x,y)&&(this._x=x,this._y=y,
this._dragging=!0)}}function mousemove(e){if(this._dragging&&(eventTool.stop(e.event),
"pinch"!==e.gestureEvent)){if(interactionMutex.isTaken(this._zr,"globalPan"))return;
var x=e.offsetX,y=e.offsetY,oldX=this._x,oldY=this._y,dx=x-oldX,dy=y-oldY;
this._x=x,this._y=y;var target=this.target;if(target){var pos=target.position;
pos[0]+=dx,pos[1]+=dy,target.dirty()}eventTool.stop(e.event),
this.trigger("pan",dx,dy,oldX,oldY,x,y)}}function mouseup(e){
this._dragging=!1}function mousewheel(e){var zoomDelta=e.wheelDelta>0?1.1:1/1.1;
zoom.call(this,e,zoomDelta,e.offsetX,e.offsetY)}function pinch(e){
if(!interactionMutex.isTaken(this._zr,"globalPan")){var zoomDelta=e.pinchScale>1?1.1:1/1.1;
zoom.call(this,e,zoomDelta,e.pinchX,e.pinchY)}}function zoom(e,zoomDelta,zoomX,zoomY){
if(this.containsPoint&&this.containsPoint(zoomX,zoomY)){eventTool.stop(e.event);
var target=this.target,zoomLimit=this.zoomLimit;if(target){var pos=target.position,scale=target.scale,newZoom=this.zoom=this.zoom||1;
if(newZoom*=zoomDelta,zoomLimit){var zoomMin=zoomLimit.min||0,zoomMax=zoomLimit.max||1/0;
newZoom=Math.max(Math.min(zoomMax,newZoom),zoomMin)}var zoomScale=newZoom/this.zoom;
this.zoom=newZoom,pos[0]-=(zoomX-pos[0])*(zoomScale-1),pos[1]-=(zoomY-pos[1])*(zoomScale-1),
scale[0]*=zoomScale,scale[1]*=zoomScale,target.dirty()}this.trigger("zoom",zoomDelta,zoomX,zoomY);
}}function RoamController(zr,target){this.target=target,this.containsPoint,
this.zoomLimit,this.zoom,this._zr=zr;var bind=zrUtil.bind,mousedownHandler=bind(mousedown,this),mousemoveHandler=bind(mousemove,this),mouseupHandler=bind(mouseup,this),mousewheelHandler=bind(mousewheel,this),pinchHandler=bind(pinch,this);
Eventful.call(this),this.setContainsPoint=function(containsPoint){
this.containsPoint=containsPoint},this.enable=function(controlType){
this.disable(),null==controlType&&(controlType=!0),controlType!==!0&&"move"!==controlType&&"pan"!==controlType||(zr.on("mousedown",mousedownHandler),
zr.on("mousemove",mousemoveHandler),zr.on("mouseup",mouseupHandler)),
controlType!==!0&&"scale"!==controlType&&"zoom"!==controlType||(zr.on("mousewheel",mousewheelHandler),
zr.on("pinch",pinchHandler))},this.disable=function(){zr.off("mousedown",mousedownHandler),
zr.off("mousemove",mousemoveHandler),zr.off("mouseup",mouseupHandler),
zr.off("mousewheel",mousewheelHandler),zr.off("pinch",pinchHandler);
},this.dispose=this.disable,this.isDragging=function(){return this._dragging;
},this.isPinching=function(){return this._pinching}}var Eventful=__webpack_require__(33),zrUtil=__webpack_require__(4),eventTool=__webpack_require__(88),interactionMutex=__webpack_require__(178);
zrUtil.mixin(RoamController,Eventful),module.exports=RoamController;
},function(module,exports,__webpack_require__){function getStore(zr){
return zr[ATTR]||(zr[ATTR]={})}var ATTR="\0_ec_interaction_mutex",interactionMutex={
take:function(zr,resourceKey,userKey){var store=getStore(zr);store[resourceKey]=userKey;
},release:function(zr,resourceKey,userKey){var store=getStore(zr),uKey=store[resourceKey];
uKey===userKey&&(store[resourceKey]=null)},isTaken:function(zr,resourceKey){
return!!getStore(zr)[resourceKey]}};__webpack_require__(1).registerAction({
type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"
},function(){}),module.exports=interactionMutex},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),roamHelper=__webpack_require__(180),echarts=__webpack_require__(1);
echarts.registerAction({type:"geoRoam",event:"geoRoam",update:"updateLayout"
},function(payload,ecModel){var componentType=payload.componentType||"series";
ecModel.eachComponent({mainType:componentType,query:payload},function(componentModel){
var geo=componentModel.coordinateSystem;if("geo"===geo.type){
var res=roamHelper.updateCenterAndZoom(geo,payload,componentModel.get("scaleLimit"));
componentModel.setCenter&&componentModel.setCenter(res.center),
componentModel.setZoom&&componentModel.setZoom(res.zoom),"series"===componentType&&zrUtil.each(componentModel.seriesGroup,function(seriesModel){
seriesModel.setCenter(res.center),seriesModel.setZoom(res.zoom);
})}})})},function(module,exports){var roamHelper={};roamHelper.updateCenterAndZoom=function(view,payload,zoomLimit){
var previousZoom=view.getZoom(),center=view.getCenter(),zoom=payload.zoom,point=view.dataToPoint(center);
if(null!=payload.dx&&null!=payload.dy){point[0]-=payload.dx,point[1]-=payload.dy;
var center=view.pointToData(point);view.setCenter(center)}if(null!=zoom){
if(zoomLimit){var zoomMin=zoomLimit.min||0,zoomMax=zoomLimit.max||1/0;
zoom=Math.max(Math.min(previousZoom*zoom,zoomMax),zoomMin)/previousZoom;
}view.scale[0]*=zoom,view.scale[1]*=zoom;var position=view.position,fixX=(payload.originX-position[0])*(zoom-1),fixY=(payload.originY-position[1])*(zoom-1);
position[0]-=fixX,position[1]-=fixY,view.updateTransform();var center=view.pointToData(point);
view.setCenter(center),view.setZoom(zoom*previousZoom)}return{
center:view.getCenter(),zoom:view.getZoom()}},module.exports=roamHelper;
},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);
module.exports=function(ecModel){var processedMapType={};ecModel.eachSeriesByType("map",function(mapSeries){
var mapType=mapSeries.getMapType();if(!mapSeries.getHostGeoModel()&&!processedMapType[mapType]){
var mapSymbolOffsets={};zrUtil.each(mapSeries.seriesGroup,function(subMapSeries){
var geo=subMapSeries.coordinateSystem,data=subMapSeries.originalData;
subMapSeries.get("showLegendSymbol")&&ecModel.getComponent("legend")&&data.each("value",function(value,idx){
var name=data.getName(idx),region=geo.getRegion(name);if(region&&!isNaN(value)){
var offset=mapSymbolOffsets[name]||0,point=geo.dataToPoint(region.center);
mapSymbolOffsets[name]=offset+1,data.setItemLayout(idx,{point:point,
offset:offset})}})});var data=mapSeries.getData();data.each(function(idx){
var name=data.getName(idx),layout=data.getItemLayout(idx)||{};
layout.showLabel=!mapSymbolOffsets[name],data.setItemLayout(idx,layout);
}),processedMapType[mapType]=!0}})}},function(module,exports){
module.exports=function(ecModel){ecModel.eachSeriesByType("map",function(seriesModel){
var colorList=seriesModel.get("color"),itemStyleModel=seriesModel.getModel("itemStyle.normal"),areaColor=itemStyleModel.get("areaColor"),color=itemStyleModel.get("color")||colorList[seriesModel.seriesIndex%colorList.length];
seriesModel.getData().setVisual({areaColor:areaColor,color:color
})})}},function(module,exports,__webpack_require__){function dataStatistics(datas,statisticType){
var dataNameMap={},dims=["value"];return zrUtil.each(datas,function(data){
data.each(dims,function(value,idx){var name=data.getName(idx);
dataNameMap[name]=dataNameMap[name]||[],isNaN(value)||dataNameMap[name].push(value);
})}),datas[0].map(dims,function(value,idx){for(var name=datas[0].getName(idx),sum=0,min=1/0,max=-(1/0),len=dataNameMap[name].length,i=0;i<len;i++)min=Math.min(min,dataNameMap[name][i]),
max=Math.max(max,dataNameMap[name][i]),sum+=dataNameMap[name][i];
var result;return result="min"===statisticType?min:"max"===statisticType?max:"average"===statisticType?sum/len:sum,
0===len?NaN:result})}var zrUtil=__webpack_require__(4);module.exports=function(ecModel){
var seriesGroups={};ecModel.eachSeriesByType("map",function(seriesModel){
var hostGeoModel=seriesModel.getHostGeoModel(),key=hostGeoModel?"o"+hostGeoModel.id:"i"+seriesModel.getMapType();
(seriesGroups[key]=seriesGroups[key]||[]).push(seriesModel)}),
zrUtil.each(seriesGroups,function(seriesList,key){for(var data=dataStatistics(zrUtil.map(seriesList,function(seriesModel){
return seriesModel.getData()}),seriesList[0].get("mapValueCalculation")),i=0;i<seriesList.length;i++)seriesList[i].originalData=seriesList[i].getData();
for(var i=0;i<seriesList.length;i++)seriesList[i].seriesGroup=seriesList,
seriesList[i].needsDrawMap=0===i&&!seriesList[i].getHostGeoModel(),
seriesList[i].setData(data.cloneShallow()),seriesList[i].mainSeries=seriesList[0];
})}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);
module.exports=function(option){var mapSeries=[];zrUtil.each(option.series,function(seriesOpt){
"map"===seriesOpt.type&&mapSeries.push(seriesOpt)}),zrUtil.each(mapSeries,function(seriesOpt){
seriesOpt.map=seriesOpt.map||seriesOpt.mapType,zrUtil.defaults(seriesOpt,seriesOpt.mapLocation);
})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);
__webpack_require__(186),__webpack_require__(190),__webpack_require__(193),
echarts.registerVisual(__webpack_require__(194)),echarts.registerLayout(__webpack_require__(196));
},function(module,exports,__webpack_require__){function completeTreeValue(dataNode,arrValueLength){
var sum=0;zrUtil.each(dataNode.children,function(child){completeTreeValue(child,arrValueLength);
var childValue=child.value;zrUtil.isArray(childValue)&&(childValue=childValue[0]),
sum+=childValue});var thisValue=dataNode.value;arrValueLength>=0&&(zrUtil.isArray(thisValue)?thisValue=thisValue[0]:dataNode.value=new Array(arrValueLength)),
(null==thisValue||isNaN(thisValue))&&(thisValue=sum),thisValue<0&&(thisValue=0),
arrValueLength>=0?dataNode.value[0]=thisValue:dataNode.value=thisValue;
}function setDefault(levels,ecModel){var globalColorList=ecModel.get("color");
if(globalColorList){levels=levels||[];var hasColorDefine;if(zrUtil.each(levels,function(levelDefine){
var model=new Model(levelDefine),modelColor=model.get("color");
(model.get("itemStyle.normal.color")||modelColor&&"none"!==modelColor)&&(hasColorDefine=!0);
}),!hasColorDefine){var level0=levels[0]||(levels[0]={});level0.color=globalColorList.slice();
}return levels}}var SeriesModel=__webpack_require__(28),Tree=__webpack_require__(187),zrUtil=__webpack_require__(4),Model=__webpack_require__(12),formatUtil=__webpack_require__(6),helper=__webpack_require__(189),encodeHTML=formatUtil.encodeHTML,addCommas=formatUtil.addCommas;
module.exports=SeriesModel.extend({type:"series.treemap",layoutMode:"box",
dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,
hoverLayerThreshold:1/0,left:"center",top:"middle",right:null,
bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",
squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",
zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,
animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{
show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,
itemStyle:{normal:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",
borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,
shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{
textStyle:{}}}},label:{normal:{show:!0,position:"inside",textStyle:{
color:"#fff",ellipsis:!0}}},itemStyle:{normal:{color:null,colorAlpha:null,
colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",
borderColorSaturation:null},emphasis:{}},visualDimension:0,visualMin:null,
visualMax:null,color:[],colorAlpha:null,colorSaturation:null,
colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,
levels:[]},getInitialData:function(option,ecModel){var data=option.data||[],rootName=option.name;
null==rootName&&(rootName=option.name);var root={name:rootName,
children:option.data},value0=(data[0]||{}).value;completeTreeValue(root,zrUtil.isArray(value0)?value0.length:-1);
var levels=option.levels||[];return levels=option.levels=setDefault(levels,ecModel),
Tree.createTree(root,this,levels).data},optionUpdated:function(){
this.resetViewRoot()},formatTooltip:function(dataIndex){var data=this.getData(),value=this.getRawValue(dataIndex),formattedValue=addCommas(zrUtil.isArray(value)?value[0]:value),name=data.getName(dataIndex);
return encodeHTML(name+": "+formattedValue)},getDataParams:function(dataIndex){
var params=SeriesModel.prototype.getDataParams.apply(this,arguments),node=this.getData().tree.getNodeByDataIndex(dataIndex);
return params.treePathInfo=helper.wrapTreePathInfo(node,this),
params},setLayoutInfo:function(layoutInfo){this.layoutInfo=this.layoutInfo||{},
zrUtil.extend(this.layoutInfo,layoutInfo)},mapIdToIndex:function(id){
var idIndexMap=this._idIndexMap;idIndexMap||(idIndexMap=this._idIndexMap={},
this._idIndexMapCount=0);var index=idIndexMap[id];return null==index&&(idIndexMap[id]=index=this._idIndexMapCount++),
index},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(viewRoot){
viewRoot?this._viewRoot=viewRoot:viewRoot=this._viewRoot;var root=this.getData().tree.root;
viewRoot&&(viewRoot===root||root.contains(viewRoot))||(this._viewRoot=root);
}})},function(module,exports,__webpack_require__){function Tree(hostModel,levelOptions){
this.root,this.data,this._nodes=[],this.hostModel=hostModel,this.levelModels=zrUtil.map(levelOptions||[],function(levelDefine){
return new Model(levelDefine,hostModel,hostModel.ecModel)})}function addChild(child,node){
var children=node.children;child.parentNode!==node&&(children.push(child),
child.parentNode=node)}var zrUtil=__webpack_require__(4),Model=__webpack_require__(12),List=__webpack_require__(98),linkList=__webpack_require__(188),completeDimensions=__webpack_require__(103),TreeNode=function(name,hostTree){
this.name=name||"",this.depth=0,this.height=0,this.parentNode=null,
this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=hostTree;
};TreeNode.prototype={constructor:TreeNode,isRemoved:function(){
return this.dataIndex<0},eachNode:function(options,cb,context){
"function"==typeof options&&(context=cb,cb=options,options=null),
options=options||{},zrUtil.isString(options)&&(options={order:options
});var suppressVisitSub,order=options.order||"preorder",children=this[options.attr||"children"];
"preorder"===order&&(suppressVisitSub=cb.call(context,this));for(var i=0;!suppressVisitSub&&i<children.length;i++)children[i].eachNode(options,cb,context);
"postorder"===order&&cb.call(context,this)},updateDepthAndHeight:function(depth){
var height=0;this.depth=depth;for(var i=0;i<this.children.length;i++){
var child=this.children[i];child.updateDepthAndHeight(depth+1),
child.height>height&&(height=child.height)}this.height=height+1;
},getNodeById:function(id){if(this.getId()===id)return this;for(var i=0,children=this.children,len=children.length;i<len;i++){
var res=children[i].getNodeById(id);if(res)return res}},contains:function(node){
if(node===this)return!0;for(var i=0,children=this.children,len=children.length;i<len;i++){
var res=children[i].contains(node);if(res)return res}},getAncestors:function(includeSelf){
for(var ancestors=[],node=includeSelf?this:this.parentNode;node;)ancestors.push(node),
node=node.parentNode;return ancestors.reverse(),ancestors},getValue:function(dimension){
var data=this.hostTree.data;return data.get(data.getDimension(dimension||"value"),this.dataIndex);
},setLayout:function(layout,merge){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,layout,merge);
},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex);
},getModel:function(path){if(!(this.dataIndex<0)){var hostTree=this.hostTree,itemModel=hostTree.data.getItemModel(this.dataIndex),levelModel=this.getLevelModel();
return itemModel.getModel(path,(levelModel||hostTree.hostModel).getModel(path));
}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth];
},setVisual:function(key,value){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,key,value);
},getVisual:function(key,ignoreParent){return this.hostTree.data.getItemVisual(this.dataIndex,key,ignoreParent);
},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex);
},getId:function(){return this.hostTree.data.getId(this.dataIndex);
}},Tree.prototype={constructor:Tree,type:"tree",eachNode:function(options,cb,context){
this.root.eachNode(options,cb,context)},getNodeByDataIndex:function(dataIndex){
var rawIndex=this.data.getRawIndex(dataIndex);return this._nodes[rawIndex];
},getNodeByName:function(name){return this.root.getNodeByName(name);
},update:function(){for(var data=this.data,nodes=this._nodes,i=0,len=nodes.length;i<len;i++)nodes[i].dataIndex=-1;
for(var i=0,len=data.count();i<len;i++)nodes[data.getRawIndex(i)].dataIndex=i;
},clearLayouts:function(){this.data.clearItemLayouts()}},Tree.createTree=function(dataRoot,hostModel,levelOptions){
function buildHierarchy(dataNode,parentNode){listData.push(dataNode);
var node=new TreeNode(dataNode.name,tree);parentNode?addChild(node,parentNode):tree.root=node,
tree._nodes.push(node);var children=dataNode.children;if(children)for(var i=0;i<children.length;i++)buildHierarchy(children[i],node);
}var tree=new Tree(hostModel,levelOptions),listData=[];buildHierarchy(dataRoot),
tree.root.updateDepthAndHeight(0);var dimensions=completeDimensions([{
name:"value"}],listData),list=new List(dimensions,hostModel);return list.initData(listData),
linkList({mainData:list,struct:tree,structAttr:"tree"}),tree.update(),
tree},module.exports=Tree},function(module,exports,__webpack_require__){
function linkList(opt){var mainData=opt.mainData,datas=opt.datas;
datas||(datas={main:mainData},opt.datasAttr={main:"data"}),opt.datas=opt.mainData=null,
linkAll(mainData,datas,opt),each(datas,function(data){each(mainData.TRANSFERABLE_METHODS,function(methodName){
data.wrapMethod(methodName,zrUtil.curry(transferInjection,opt));
})}),mainData.wrapMethod("cloneShallow",zrUtil.curry(cloneShallowInjection,opt)),
each(mainData.CHANGABLE_METHODS,function(methodName){mainData.wrapMethod(methodName,zrUtil.curry(changeInjection,opt));
}),zrUtil.assert(datas[mainData.dataType]===mainData)}function transferInjection(opt,res){
if(isMainData(this)){var datas=zrUtil.extend({},this[DATAS]);datas[this.dataType]=res,
linkAll(res,datas,opt)}else linkSingle(res,this.dataType,this[MAIN_DATA],opt);
return res}function changeInjection(opt,res){return opt.struct&&opt.struct.update(this),
res}function cloneShallowInjection(opt,res){return each(res[DATAS],function(data,dataType){
data!==res&&linkSingle(data.cloneShallow(),dataType,res,opt)}),
res}function getLinkedData(dataType){var mainData=this[MAIN_DATA];
return null==dataType||null==mainData?mainData:mainData[DATAS][dataType];
}function isMainData(data){return data[MAIN_DATA]===data}function linkAll(mainData,datas,opt){
mainData[DATAS]={},each(datas,function(data,dataType){linkSingle(data,dataType,mainData,opt);
})}function linkSingle(data,dataType,mainData,opt){mainData[DATAS][dataType]=data,
data[MAIN_DATA]=mainData,data.dataType=dataType,opt.struct&&(data[opt.structAttr]=opt.struct,
opt.struct[opt.datasAttr[dataType]]=data),data.getLinkedData=getLinkedData;
}var zrUtil=__webpack_require__(4),each=zrUtil.each,DATAS="\0__link_datas",MAIN_DATA="\0__link_mainData";
module.exports=linkList},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),helper={retrieveTargetInfo:function(payload,seriesModel){
if(payload&&("treemapZoomToNode"===payload.type||"treemapRootToNode"===payload.type)){
var root=seriesModel.getData().tree.root,targetNode=payload.targetNode;
if(targetNode&&root.contains(targetNode))return{node:targetNode
};var targetNodeId=payload.targetNodeId;if(null!=targetNodeId&&(targetNode=root.getNodeById(targetNodeId)))return{
node:targetNode}}},getPathToRoot:function(node){for(var path=[];node;)node=node.parentNode,
node&&path.push(node);return path.reverse()},aboveViewRoot:function(viewRoot,node){
var viewPath=helper.getPathToRoot(viewRoot);return zrUtil.indexOf(viewPath,node)>=0;
},wrapTreePathInfo:function(node,seriesModel){for(var treePathInfo=[];node;){
var nodeDataIndex=node.dataIndex;treePathInfo.push({name:node.name,
dataIndex:nodeDataIndex,value:seriesModel.getRawValue(nodeDataIndex)
}),node=node.parentNode}return treePathInfo.reverse(),treePathInfo;
}};module.exports=helper},function(module,exports,__webpack_require__){
function createStorage(){return{nodeGroup:[],background:[],content:[]
}}function renderNode(seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls,thisNode,oldNode,parentGroup,depth){
function renderContent(group){content.dataIndex=thisNode.dataIndex,
content.seriesIndex=seriesModel.seriesIndex;var borderWidth=thisLayout.borderWidth,contentWidth=Math.max(thisWidth-2*borderWidth,0),contentHeight=Math.max(thisHeight-2*borderWidth,0);
content.culling=!0,content.setShape({x:borderWidth,y:borderWidth,
width:contentWidth,height:contentHeight});var visualColor=thisNode.getVisual("color",!0);
updateStyle(content,function(){var normalStyle={fill:visualColor
},emphasisStyle=thisNode.getModel("itemStyle.emphasis").getItemStyle();
prepareText(normalStyle,emphasisStyle,visualColor,contentWidth,contentHeight),
content.setStyle(normalStyle),graphic.setHoverStyle(content,emphasisStyle);
}),group.add(content)}function updateStyle(element,cb){thisInvisible?!element.invisible&&willInvisibleEls.push(element):(cb(),
element.__tmWillVisible||(element.invisible=!1))}function prepareText(normalStyle,emphasisStyle,visualColor,contentWidth,contentHeight){
var nodeModel=thisNode.getModel(),text=nodeModel.get("name");if(thisLayout.isLeafRoot){
var iconChar=seriesModel.get("drillDownIcon",!0);text=iconChar?iconChar+" "+text:text;
}setText(text,normalStyle,nodeModel,PATH_LABEL_NORMAL,visualColor,contentWidth,contentHeight),
setText(text,emphasisStyle,nodeModel,PATH_LABEL_EMPHASIS,visualColor,contentWidth,contentHeight);
}function setText(text,style,nodeModel,labelPath,visualColor,contentWidth,contentHeight){
var labelModel=nodeModel.getModel(labelPath),labelTextStyleModel=labelModel.getModel("textStyle");
graphic.setText(style,labelModel,visualColor),style.textAlign=labelTextStyleModel.get("align"),
style.textVerticalAlign=labelTextStyleModel.get("baseline");var textRect=labelTextStyleModel.getTextRect(text);
!labelModel.getShallow("show")||textRect.height>contentHeight?style.text="":textRect.width>contentWidth?style.text=labelTextStyleModel.get("ellipsis")?labelTextStyleModel.truncateText(text,contentWidth,null,{
minChar:2}):"":style.text=text}function giveGraphic(storageName,Ctor,depth,z){
var element=null!=oldRawIndex&&oldStorage[storageName][oldRawIndex],lasts=lastsForAnimation[storageName];
return element?(oldStorage[storageName][oldRawIndex]=null,prepareAnimationWhenHasOld(lasts,element,storageName)):thisInvisible||(element=new Ctor({
z:calculateZ(depth,z)}),element.__tmDepth=depth,element.__tmStorageName=storageName,
prepareAnimationWhenNoOld(lasts,element,storageName)),thisStorage[storageName][thisRawIndex]=element;
}function prepareAnimationWhenHasOld(lasts,element,storageName){
var lastCfg=lasts[thisRawIndex]={};lastCfg.old="nodeGroup"===storageName?element.position.slice():zrUtil.extend({},element.shape);
}function prepareAnimationWhenNoOld(lasts,element,storageName){
var lastCfg=lasts[thisRawIndex]={},parentNode=thisNode.parentNode;
if(parentNode&&(!reRoot||"drillDown"===reRoot.direction)){var parentOldX=0,parentOldY=0,parentOldBg=lastsForAnimation.background[parentNode.getRawIndex()];
!reRoot&&parentOldBg&&parentOldBg.old&&(parentOldX=parentOldBg.old.width,
parentOldY=parentOldBg.old.height),lastCfg.old="nodeGroup"===storageName?[0,parentOldY]:{
x:parentOldX,y:parentOldY,width:0,height:0}}lastCfg.fadein="nodeGroup"!==storageName;
}if(thisNode){var thisLayout=thisNode.getLayout();if(thisLayout&&thisLayout.isInView){
var thisWidth=thisLayout.width,thisHeight=thisLayout.height,thisInvisible=thisLayout.invisible,thisRawIndex=thisNode.getRawIndex(),oldRawIndex=oldNode&&oldNode.getRawIndex(),group=giveGraphic("nodeGroup",Group);
if(group){if(parentGroup.add(group),group.attr("position",[thisLayout.x||0,thisLayout.y||0]),
group.__tmNodeWidth=thisWidth,group.__tmNodeHeight=thisHeight,
thisLayout.isAboveViewRoot)return group;var bg=giveGraphic("background",Rect,depth,Z_BG);
bg&&(bg.setShape({x:0,y:0,width:thisWidth,height:thisHeight}),
updateStyle(bg,function(){bg.setStyle("fill",thisNode.getVisual("borderColor",!0));
}),group.add(bg));var thisViewChildren=thisNode.viewChildren;if(!thisViewChildren||!thisViewChildren.length){
var content=giveGraphic("content",Rect,depth,Z_CONTENT);content&&renderContent(group);
}return group}}}}function calculateZ(depth,zInLevel){var zb=depth*Z_BASE+zInLevel;
return(zb-1)/zb}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),DataDiffer=__webpack_require__(99),helper=__webpack_require__(189),Breadcrumb=__webpack_require__(191),RoamController=__webpack_require__(177),BoundingRect=__webpack_require__(9),matrix=__webpack_require__(11),animationUtil=__webpack_require__(192),bind=zrUtil.bind,Group=graphic.Group,Rect=graphic.Rect,each=zrUtil.each,DRAG_THRESHOLD=3,PATH_LABEL_NORMAL=["label","normal"],PATH_LABEL_EMPHASIS=["label","emphasis"],Z_BASE=10,Z_BG=1,Z_CONTENT=2;
module.exports=__webpack_require__(1).extendChartView({type:"treemap",
init:function(o,api){this._containerGroup,this._storage=createStorage(),
this._oldTree,this._breadcrumb,this._controller,this._state="ready",
this._mayClick},render:function(seriesModel,ecModel,api,payload){
var models=ecModel.findComponents({mainType:"series",subType:"treemap",
query:payload});if(!(zrUtil.indexOf(models,seriesModel)<0)){this.seriesModel=seriesModel,
this.api=api,this.ecModel=ecModel;var targetInfo=helper.retrieveTargetInfo(payload,seriesModel),payloadType=payload&&payload.type,layoutInfo=seriesModel.layoutInfo,isInit=!this._oldTree,thisStorage=this._storage,reRoot="treemapRootToNode"===payloadType&&targetInfo&&thisStorage?{
rootNodeGroup:thisStorage.nodeGroup[targetInfo.node.getRawIndex()],
direction:payload.direction}:null,containerGroup=this._giveContainerGroup(layoutInfo),renderResult=this._doRender(containerGroup,seriesModel,reRoot);
isInit||payloadType&&"treemapZoomToNode"!==payloadType&&"treemapRootToNode"!==payloadType?renderResult.renderFinally():this._doAnimation(containerGroup,renderResult,seriesModel,reRoot),
this._resetController(api),this._renderBreadcrumb(seriesModel,api,targetInfo);
}},_giveContainerGroup:function(layoutInfo){var containerGroup=this._containerGroup;
return containerGroup||(containerGroup=this._containerGroup=new Group,
this._initEvents(containerGroup),this.group.add(containerGroup)),
containerGroup.attr("position",[layoutInfo.x,layoutInfo.y]),containerGroup;
},_doRender:function(containerGroup,seriesModel,reRoot){function dualTravel(thisViewChildren,oldViewChildren,parentGroup,sameTree,depth){
function getKey(node){return node.getId()}function processNode(newIndex,oldIndex){
var thisNode=null!=newIndex?thisViewChildren[newIndex]:null,oldNode=null!=oldIndex?oldViewChildren[oldIndex]:null,group=doRenderNode(thisNode,oldNode,parentGroup,depth);
group&&dualTravel(thisNode&&thisNode.viewChildren||[],oldNode&&oldNode.viewChildren||[],group,sameTree,depth+1);
}sameTree?(oldViewChildren=thisViewChildren,each(thisViewChildren,function(child,index){
!child.isRemoved()&&processNode(index,index)})):new DataDiffer(oldViewChildren,thisViewChildren,getKey,getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode,null)).execute();
}function clearStorage(storage){var willDeleteEls=createStorage();
return storage&&each(storage,function(store,storageName){var delEls=willDeleteEls[storageName];
each(store,function(el){el&&(delEls.push(el),el.__tmWillDelete=1);
})}),willDeleteEls}function renderFinally(){each(willDeleteEls,function(els){
each(els,function(el){el.parent&&el.parent.remove(el)})}),each(willInvisibleEls,function(el){
el.invisible=!0,el.dirty()})}var thisTree=seriesModel.getData().tree,oldTree=this._oldTree,lastsForAnimation=createStorage(),thisStorage=createStorage(),oldStorage=this._storage,willInvisibleEls=[],doRenderNode=zrUtil.curry(renderNode,seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls);
dualTravel(thisTree.root?[thisTree.root]:[],oldTree&&oldTree.root?[oldTree.root]:[],containerGroup,thisTree===oldTree||!oldTree,0);
var willDeleteEls=clearStorage(oldStorage);return this._oldTree=thisTree,
this._storage=thisStorage,{lastsForAnimation:lastsForAnimation,
willDeleteEls:willDeleteEls,renderFinally:renderFinally}},_doAnimation:function(containerGroup,renderResult,seriesModel,reRoot){
if(seriesModel.get("animation")){var duration=seriesModel.get("animationDurationUpdate"),easing=seriesModel.get("animationEasing"),animationWrap=animationUtil.createWrap();
each(renderResult.willDeleteEls,function(store,storageName){each(store,function(el,rawIndex){
if(!el.invisible){var target,parent=el.parent;if(reRoot&&"drillDown"===reRoot.direction)target=parent===reRoot.rootNodeGroup?{
shape:{x:0,y:0,width:parent.__tmNodeWidth,height:parent.__tmNodeHeight
},style:{opacity:0}}:{style:{opacity:0}};else{var targetX=0,targetY=0;
parent.__tmWillDelete||(targetX=parent.__tmNodeWidth/2,targetY=parent.__tmNodeHeight/2),
target="nodeGroup"===storageName?{position:[targetX,targetY],
style:{opacity:0}}:{shape:{x:targetX,y:targetY,width:0,height:0
},style:{opacity:0}}}target&&animationWrap.add(el,target,duration,easing);
}})}),each(this._storage,function(store,storageName){each(store,function(el,rawIndex){
var last=renderResult.lastsForAnimation[storageName][rawIndex],target={};
last&&("nodeGroup"===storageName?last.old&&(target.position=el.position.slice(),
el.attr("position",last.old)):(last.old&&(target.shape=zrUtil.extend({},el.shape),
el.setShape(last.old)),last.fadein?(el.setStyle("opacity",0),
target.style={opacity:1}):1!==el.style.opacity&&(target.style={
opacity:1})),animationWrap.add(el,target,duration,easing))})},this),
this._state="animating",animationWrap.done(bind(function(){this._state="ready",
renderResult.renderFinally()},this)).start()}},_resetController:function(api){
var controller=this._controller;controller||(controller=this._controller=new RoamController(api.getZr()),
controller.enable(this.seriesModel.get("roam")),controller.on("pan",bind(this._onPan,this)),
controller.on("zoom",bind(this._onZoom,this)));var rect=new BoundingRect(0,0,api.getWidth(),api.getHeight());
controller.setContainsPoint(function(x,y){return rect.contain(x,y);
})},_clearController:function(){var controller=this._controller;
controller&&(controller.dispose(),controller=null)},_onPan:function(dx,dy){
if(this._mayClick=!1,"animating"!==this._state&&(Math.abs(dx)>DRAG_THRESHOLD||Math.abs(dy)>DRAG_THRESHOLD)){
var root=this.seriesModel.getData().tree.root;if(!root)return;
var rootLayout=root.getLayout();if(!rootLayout)return;this.api.dispatchAction({
type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,
rootRect:{x:rootLayout.x+dx,y:rootLayout.y+dy,width:rootLayout.width,
height:rootLayout.height}})}},_onZoom:function(scale,mouseX,mouseY){
if(this._mayClick=!1,"animating"!==this._state){var root=this.seriesModel.getData().tree.root;
if(!root)return;var rootLayout=root.getLayout();if(!rootLayout)return;
var rect=new BoundingRect(rootLayout.x,rootLayout.y,rootLayout.width,rootLayout.height),layoutInfo=this.seriesModel.layoutInfo;
mouseX-=layoutInfo.x,mouseY-=layoutInfo.y;var m=matrix.create();
matrix.translate(m,m,[-mouseX,-mouseY]),matrix.scale(m,m,[scale,scale]),
matrix.translate(m,m,[mouseX,mouseY]),rect.applyTransform(m),
this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,
rootRect:{x:rect.x,y:rect.y,width:rect.width,height:rect.height
}})}},_initEvents:function(containerGroup){function onClick(e){
var nodeClick=this.seriesModel.get("nodeClick",!0);if(nodeClick){
var targetInfo=this.findTarget(e.offsetX,e.offsetY);if(targetInfo){
var node=targetInfo.node;if(node.getLayout().isLeafRoot)this._rootToNode(targetInfo);else if("zoomToNode"===nodeClick)this._zoomToNode(targetInfo);else if("link"===nodeClick){
var itemModel=node.hostTree.data.getItemModel(node.dataIndex),link=itemModel.get("link",!0),linkTarget=itemModel.get("target",!0)||"blank";
link&&window.open(link,linkTarget)}}}}containerGroup.on("mousedown",function(e){
"ready"===this._state&&(this._mayClick=!0)},this),containerGroup.on("mouseup",function(e){
this._mayClick&&(this._mayClick=!1,"ready"===this._state&&onClick.call(this,e));
},this)},_renderBreadcrumb:function(seriesModel,api,targetInfo){
function onSelect(node){"animating"!==this._state&&(helper.aboveViewRoot(seriesModel.getViewRoot(),node)?this._rootToNode({
node:node}):this._zoomToNode({node:node}))}targetInfo||(targetInfo=null!=seriesModel.get("leafDepth",!0)?{
node:seriesModel.getViewRoot()}:this.findTarget(api.getWidth()/2,api.getHeight()/2),
targetInfo||(targetInfo={node:seriesModel.getData().tree.root
})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(seriesModel,api,targetInfo.node,bind(onSelect,this));
},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),
this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove();
},dispose:function(){this._clearController()},_zoomToNode:function(targetInfo){
this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,
seriesId:this.seriesModel.id,targetNode:targetInfo.node})},_rootToNode:function(targetInfo){
this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,
seriesId:this.seriesModel.id,targetNode:targetInfo.node})},findTarget:function(x,y){
var targetInfo,viewRoot=this.seriesModel.getViewRoot();return viewRoot.eachNode({
attr:"viewChildren",order:"preorder"},function(node){var bgEl=this._storage.background[node.getRawIndex()];
if(bgEl){var point=bgEl.transformCoordToLocal(x,y),shape=bgEl.shape;
if(!(shape.x<=point[0]&&point[0]<=shape.x+shape.width&&shape.y<=point[1]&&point[1]<=shape.y+shape.height))return!1;
targetInfo={node:node,offsetX:point[0],offsetY:point[1]}}},this),
targetInfo}})},function(module,exports,__webpack_require__){function Breadcrumb(containerGroup){
this.group=new graphic.Group,containerGroup.add(this.group)}function makeItemPoints(x,y,itemWidth,itemHeight,head,tail){
var points=[[head?x:x-ARRAY_LENGTH,y],[x+itemWidth,y],[x+itemWidth,y+itemHeight],[head?x:x-ARRAY_LENGTH,y+itemHeight]];
return!tail&&points.splice(2,0,[x+itemWidth+ARRAY_LENGTH,y+itemHeight/2]),
!head&&points.push([x,y+itemHeight/2]),points}function packEventData(el,seriesModel,itemNode){
el.eventData={componentType:"series",componentSubType:"treemap",
seriesIndex:seriesModel.componentIndex,seriesName:seriesModel.name,
seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:itemNode&&itemNode.dataIndex,
name:itemNode&&itemNode.name},treePathInfo:itemNode&&helper.wrapTreePathInfo(itemNode,seriesModel)
}}var graphic=__webpack_require__(43),layout=__webpack_require__(21),zrUtil=__webpack_require__(4),helper=__webpack_require__(189),TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5;
Breadcrumb.prototype={constructor:Breadcrumb,render:function(seriesModel,api,targetNode,onSelect){
var model=seriesModel.getModel("breadcrumb"),thisGroup=this.group;
if(thisGroup.removeAll(),model.get("show")&&targetNode){var normalStyleModel=model.getModel("itemStyle.normal"),textStyleModel=normalStyleModel.getModel("textStyle"),layoutParam={
pos:{left:model.get("left"),right:model.get("right"),top:model.get("top"),
bottom:model.get("bottom")},box:{width:api.getWidth(),height:api.getHeight()
},emptyItemWidth:model.get("emptyItemWidth"),totalWidth:0,renderList:[]
};this._prepare(targetNode,layoutParam,textStyleModel),this._renderContent(seriesModel,layoutParam,normalStyleModel,textStyleModel,onSelect),
layout.positionElement(thisGroup,layoutParam.pos,layoutParam.box);
}},_prepare:function(targetNode,layoutParam,textStyleModel){for(var node=targetNode;node;node=node.parentNode){
var text=node.getModel().get("name"),textRect=textStyleModel.getTextRect(text),itemWidth=Math.max(textRect.width+2*TEXT_PADDING,layoutParam.emptyItemWidth);
layoutParam.totalWidth+=itemWidth+ITEM_GAP,layoutParam.renderList.push({
node:node,text:text,width:itemWidth})}},_renderContent:function(seriesModel,layoutParam,normalStyleModel,textStyleModel,onSelect){
for(var lastX=0,emptyItemWidth=layoutParam.emptyItemWidth,height=seriesModel.get("breadcrumb.height"),availableSize=layout.getAvailableSize(layoutParam.pos,layoutParam.box),totalWidth=layoutParam.totalWidth,renderList=layoutParam.renderList,i=renderList.length-1;i>=0;i--){
var item=renderList[i],itemNode=item.node,itemWidth=item.width,text=item.text;
totalWidth>availableSize.width&&(totalWidth-=itemWidth-emptyItemWidth,
itemWidth=emptyItemWidth,text="");var el=new graphic.Polygon({
shape:{points:makeItemPoints(lastX,0,itemWidth,height,i===renderList.length-1,0===i)
},style:zrUtil.defaults(normalStyleModel.getItemStyle(),{lineJoin:"bevel",
text:text,textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()
}),z:10,onclick:zrUtil.curry(onSelect,itemNode)});this.group.add(el),
packEventData(el,seriesModel,itemNode),lastX+=itemWidth+ITEM_GAP;
}},remove:function(){this.group.removeAll()}},module.exports=Breadcrumb;
},function(module,exports,__webpack_require__){function createWrap(){
var doneCallback,storage=[],elExistsMap={};return{add:function(el,target,time,delay,easing){
return zrUtil.isString(delay)&&(easing=delay,delay=0),!elExistsMap[el.id]&&(elExistsMap[el.id]=1,
storage.push({el:el,target:target,time:time,delay:delay,easing:easing
}),!0)},done:function(callback){return doneCallback=callback,
this},start:function(){function done(){count--,count||(storage.length=0,
elExistsMap={},doneCallback&&doneCallback())}for(var count=storage.length,i=0,len=storage.length;i<len;i++){
var item=storage[i];item.el.animateTo(item.target,item.time,item.delay,item.easing,done);
}return this}}}var zrUtil=__webpack_require__(4);module.exports={
createWrap:createWrap}},function(module,exports,__webpack_require__){
for(var echarts=__webpack_require__(1),helper=__webpack_require__(189),noop=function(){},actionTypes=["treemapZoomToNode","treemapRender","treemapMove"],i=0;i<actionTypes.length;i++)echarts.registerAction({
type:actionTypes[i],update:"updateView"},noop);echarts.registerAction({
type:"treemapRootToNode",update:"updateView"},function(payload,ecModel){
function handleRootToNode(model,index){var targetInfo=helper.retrieveTargetInfo(payload,model);
if(targetInfo){var originViewRoot=model.getViewRoot();originViewRoot&&(payload.direction=helper.aboveViewRoot(originViewRoot,targetInfo.node)?"rollUp":"drillDown"),
model.resetViewRoot(targetInfo.node)}}ecModel.eachComponent({
mainType:"series",subType:"treemap",query:payload},handleRootToNode);
})},function(module,exports,__webpack_require__){function travelTree(node,designatedVisual,levelItemStyles,seriesItemStyleModel,viewRootAncestors,seriesModel){
var nodeModel=node.getModel(),nodeLayout=node.getLayout();if(nodeLayout&&!nodeLayout.invisible&&nodeLayout.isInView){
var thisNodeColor,nodeItemStyleModel=node.getModel(ITEM_STYLE_NORMAL),levelItemStyle=levelItemStyles[node.depth],visuals=buildVisuals(nodeItemStyleModel,designatedVisual,levelItemStyle,seriesItemStyleModel),borderColor=nodeItemStyleModel.get("borderColor"),borderColorSaturation=nodeItemStyleModel.get("borderColorSaturation");
null!=borderColorSaturation&&(thisNodeColor=calculateColor(visuals,node),
borderColor=calculateBorderColor(borderColorSaturation,thisNodeColor)),
node.setVisual("borderColor",borderColor);var viewChildren=node.viewChildren;
if(viewChildren&&viewChildren.length){var mapping=buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren);
zrUtil.each(viewChildren,function(child,index){if(child.depth>=viewRootAncestors.length||child===viewRootAncestors[child.depth]){
var childVisual=mapVisual(nodeModel,visuals,child,index,mapping,seriesModel);
travelTree(child,childVisual,levelItemStyles,seriesItemStyleModel,viewRootAncestors,seriesModel);
}})}else thisNodeColor=calculateColor(visuals,node),node.setVisual("color",thisNodeColor);
}}function buildVisuals(nodeItemStyleModel,designatedVisual,levelItemStyle,seriesItemStyleModel){
var visuals=zrUtil.extend({},designatedVisual);return zrUtil.each(["color","colorAlpha","colorSaturation"],function(visualName){
var val=nodeItemStyleModel.get(visualName,!0);null==val&&levelItemStyle&&(val=levelItemStyle[visualName]),
null==val&&(val=designatedVisual[visualName]),null==val&&(val=seriesItemStyleModel.get(visualName)),
null!=val&&(visuals[visualName]=val)}),visuals}function calculateColor(visuals){
var color=getValueVisualDefine(visuals,"color");if(color){var colorAlpha=getValueVisualDefine(visuals,"colorAlpha"),colorSaturation=getValueVisualDefine(visuals,"colorSaturation");
return colorSaturation&&(color=zrColor.modifyHSL(color,null,null,colorSaturation)),
colorAlpha&&(color=zrColor.modifyAlpha(color,colorAlpha)),color;
}}function calculateBorderColor(borderColorSaturation,thisNodeColor){
return null!=thisNodeColor?zrColor.modifyHSL(thisNodeColor,null,null,borderColorSaturation):null;
}function getValueVisualDefine(visuals,name){var value=visuals[name];
if(null!=value&&"none"!==value)return value}function buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren){
if(viewChildren&&viewChildren.length){var rangeVisual=getRangeVisual(nodeModel,"color")||null!=visuals.color&&"none"!==visuals.color&&(getRangeVisual(nodeModel,"colorAlpha")||getRangeVisual(nodeModel,"colorSaturation"));
if(rangeVisual){var visualMin=nodeModel.get("visualMin"),visualMax=nodeModel.get("visualMax"),dataExtent=nodeLayout.dataExtent.slice();
null!=visualMin&&visualMin<dataExtent[0]&&(dataExtent[0]=visualMin),
null!=visualMax&&visualMax>dataExtent[1]&&(dataExtent[1]=visualMax);
var colorMappingBy=nodeModel.get("colorMappingBy"),opt={type:rangeVisual.name,
dataExtent:dataExtent,visual:rangeVisual.range};"color"!==opt.type||"index"!==colorMappingBy&&"id"!==colorMappingBy?opt.mappingMethod="linear":(opt.mappingMethod="category",
opt.loop=!0);var mapping=new VisualMapping(opt);return mapping.__drColorMappingBy=colorMappingBy,
mapping}}}function getRangeVisual(nodeModel,name){var range=nodeModel.get(name);
return isArray(range)&&range.length?{name:name,range:range}:null;
}function mapVisual(nodeModel,visuals,child,index,mapping,seriesModel){
var childVisuals=zrUtil.extend({},visuals);if(mapping){var mappingType=mapping.type,colorMappingBy="color"===mappingType&&mapping.__drColorMappingBy,value="index"===colorMappingBy?index:"id"===colorMappingBy?seriesModel.mapIdToIndex(child.getId()):child.getValue(nodeModel.get("visualDimension"));
childVisuals[mappingType]=mapping.mapValueToVisual(value)}return childVisuals;
}var VisualMapping=__webpack_require__(195),zrColor=__webpack_require__(39),zrUtil=__webpack_require__(4),isArray=zrUtil.isArray,ITEM_STYLE_NORMAL="itemStyle.normal";
module.exports=function(ecModel,api,payload){var condition={mainType:"series",
subType:"treemap",query:payload};ecModel.eachComponent(condition,function(seriesModel){
var tree=seriesModel.getData().tree,root=tree.root,seriesItemStyleModel=seriesModel.getModel(ITEM_STYLE_NORMAL);
if(!root.isRemoved()){var levelItemStyles=zrUtil.map(tree.levelModels,function(levelModel){
return levelModel?levelModel.get(ITEM_STYLE_NORMAL):null});travelTree(root,{},levelItemStyles,seriesItemStyleModel,seriesModel.getViewRoot().getAncestors(),seriesModel);
}})}},function(module,exports,__webpack_require__){function preprocessForPiecewise(thisOption){
var pieceList=thisOption.pieceList;thisOption.hasSpecialVisual=!1,
zrUtil.each(pieceList,function(piece,index){piece.originIndex=index,
null!=piece.visual&&(thisOption.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(thisOption){
var categories=thisOption.categories,visual=thisOption.visual,categoryMap=thisOption.categoryMap={};
if(each(categories,function(cate,index){categoryMap[cate]=index;
}),!zrUtil.isArray(visual)){var visualArr=[];zrUtil.isObject(visual)?each(visual,function(v,cate){
var index=categoryMap[cate];visualArr[null!=index?index:CATEGORY_DEFAULT_VISUAL_INDEX]=v;
}):visualArr[CATEGORY_DEFAULT_VISUAL_INDEX]=visual,visual=thisOption.visual=visualArr;
}for(var i=categories.length-1;i>=0;i--)null==visual[i]&&(delete categoryMap[categories[i]],
categories.pop())}function normalizeVisualRange(thisOption,isCategory){
var visual=thisOption.visual,visualArr=[];zrUtil.isObject(visual)?each(visual,function(v){
visualArr.push(v)}):null!=visual&&visualArr.push(visual);var doNotNeedPair={
color:1,symbol:1};isCategory||1!==visualArr.length||doNotNeedPair.hasOwnProperty(thisOption.type)||(visualArr[1]=visualArr[0]),
thisOption.visual=visualArr}function makePartialColorVisualHandler(applyValue){
return{applyVisual:function(value,getter,setter){value=this.mapValueToVisual(value),
setter("color",applyValue(getter("color"),value))},_doMap:makeDoMap([0,1])
}}function doMapToArray(normalized){var visual=this.option.visual;
return visual[Math.round(linearMap(normalized,[0,1],[0,visual.length-1],!0))]||{};
}function makeApplyVisual(visualType){return function(value,getter,setter){
setter(visualType,this.mapValueToVisual(value))}}function doMapCategory(normalized){
var visual=this.option.visual;return visual[this.option.loop&&normalized!==CATEGORY_DEFAULT_VISUAL_INDEX?normalized%visual.length:normalized];
}function doMapFixed(){return this.option.visual[0]}function makeDoMap(sourceExtent){
return{linear:function(normalized){return linearMap(normalized,sourceExtent,this.option.visual,!0);
},category:doMapCategory,piecewise:function(normalized,value){
var result=getSpecifiedVisual.call(this,value);return null==result&&(result=linearMap(normalized,sourceExtent,this.option.visual,!0)),
result},fixed:doMapFixed}}function getSpecifiedVisual(value){
var thisOption=this.option,pieceList=thisOption.pieceList;if(thisOption.hasSpecialVisual){
var pieceIndex=VisualMapping.findPieceIndex(value,pieceList),piece=pieceList[pieceIndex];
if(piece&&piece.visual)return piece.visual[this.type]}}function littleThan(close,a,b){
return close?a<=b:a<b}var zrUtil=__webpack_require__(4),zrColor=__webpack_require__(39),linearMap=__webpack_require__(7).linearMap,each=zrUtil.each,isObject=zrUtil.isObject,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(option){
var mappingMethod=option.mappingMethod,visualType=option.type,thisOption=this.option=zrUtil.clone(option);
this.type=visualType,this.mappingMethod=mappingMethod,this._normalizeData=normalizers[mappingMethod];
var visualHandler=visualHandlers[visualType];this.applyVisual=visualHandler.applyVisual,
this.getColorMapper=visualHandler.getColorMapper,this._doMap=visualHandler._doMap[mappingMethod],
"piecewise"===mappingMethod?(normalizeVisualRange(thisOption),
preprocessForPiecewise(thisOption)):"category"===mappingMethod?thisOption.categories?preprocessForSpecifiedCategory(thisOption):normalizeVisualRange(thisOption,!0):(zrUtil.assert("linear"!==mappingMethod||thisOption.dataExtent),
normalizeVisualRange(thisOption))};VisualMapping.prototype={constructor:VisualMapping,
mapValueToVisual:function(value){var normalized=this._normalizeData(value);
return this._doMap(normalized,value)},getNormalizer:function(){
return zrUtil.bind(this._normalizeData,this)}};var visualHandlers=VisualMapping.visualHandlers={
color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){
var thisOption=this.option,parsedVisual=zrUtil.map(thisOption.visual,zrColor.parse);
return zrUtil.bind("category"===thisOption.mappingMethod?function(value,isNormalized){
return!isNormalized&&(value=this._normalizeData(value)),doMapCategory.call(this,value);
}:function(value,isNormalized,out){var returnRGBArray=!!out;return!isNormalized&&(value=this._normalizeData(value)),
out=zrColor.fastMapToColor(value,parsedVisual,out),returnRGBArray?out:zrUtil.stringify(out,"rgba");
},this)},_doMap:{linear:function(normalized){return zrColor.mapToColor(normalized,this.option.visual);
},category:doMapCategory,piecewise:function(normalized,value){
var result=getSpecifiedVisual.call(this,value);return null==result&&(result=zrColor.mapToColor(normalized,this.option.visual)),
result},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(color,value){
return zrColor.modifyHSL(color,value)}),colorSaturation:makePartialColorVisualHandler(function(color,value){
return zrColor.modifyHSL(color,null,value)}),colorLightness:makePartialColorVisualHandler(function(color,value){
return zrColor.modifyHSL(color,null,null,value)}),colorAlpha:makePartialColorVisualHandler(function(color,value){
return zrColor.modifyAlpha(color,value)}),opacity:{applyVisual:makeApplyVisual("opacity"),
_doMap:makeDoMap([0,1])},symbol:{applyVisual:function(value,getter,setter){
var symbolCfg=this.mapValueToVisual(value);if(zrUtil.isString(symbolCfg))setter("symbol",symbolCfg);else if(isObject(symbolCfg))for(var name in symbolCfg)symbolCfg.hasOwnProperty(name)&&setter(name,symbolCfg[name]);
},_doMap:{linear:doMapToArray,category:doMapCategory,piecewise:function(normalized,value){
var result=getSpecifiedVisual.call(this,value);return null==result&&(result=doMapToArray.call(this,normalized)),
result},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),
_doMap:makeDoMap([0,1])}},normalizers={linear:function(value){
return linearMap(value,this.option.dataExtent,[0,1],!0)},piecewise:function(value){
var pieceList=this.option.pieceList,pieceIndex=VisualMapping.findPieceIndex(value,pieceList,!0);
if(null!=pieceIndex)return linearMap(pieceIndex,[0,pieceList.length-1],[0,1],!0);
},category:function(value){var index=this.option.categories?this.option.categoryMap[value]:value;
return null==index?CATEGORY_DEFAULT_VISUAL_INDEX:index},fixed:zrUtil.noop
};VisualMapping.listVisualTypes=function(){var visualTypes=[];
return zrUtil.each(visualHandlers,function(handler,key){visualTypes.push(key);
}),visualTypes},VisualMapping.addVisualHandler=function(name,handler){
visualHandlers[name]=handler},VisualMapping.isValidType=function(visualType){
return visualHandlers.hasOwnProperty(visualType)},VisualMapping.eachVisual=function(visual,callback,context){
zrUtil.isObject(visual)?zrUtil.each(visual,callback,context):callback.call(context,visual);
},VisualMapping.mapVisual=function(visual,callback,context){var isPrimary,newVisual=zrUtil.isArray(visual)?[]:zrUtil.isObject(visual)?{}:(isPrimary=!0,
null);return VisualMapping.eachVisual(visual,function(v,key){
var newVal=callback.call(context,v,key);isPrimary?newVisual=newVal:newVisual[key]=newVal;
}),newVisual},VisualMapping.retrieveVisuals=function(obj){var hasVisual,ret={};
return obj&&each(visualHandlers,function(h,visualType){obj.hasOwnProperty(visualType)&&(ret[visualType]=obj[visualType],
hasVisual=!0)}),hasVisual?ret:null},VisualMapping.prepareVisualTypes=function(visualTypes){
if(isObject(visualTypes)){var types=[];each(visualTypes,function(item,type){
types.push(type)}),visualTypes=types}else{if(!zrUtil.isArray(visualTypes))return[];
visualTypes=visualTypes.slice()}return visualTypes.sort(function(type1,type2){
return"color"===type2&&"color"!==type1&&0===type1.indexOf("color")?1:-1;
}),visualTypes},VisualMapping.dependsOn=function(visualType1,visualType2){
return"color"===visualType2?!(!visualType1||0!==visualType1.indexOf(visualType2)):visualType1===visualType2;
},VisualMapping.findPieceIndex=function(value,pieceList,findClosestWhenOutside){
function updatePossible(val,index){var newAbs=Math.abs(val-value);
newAbs<abs&&(abs=newAbs,possibleI=index)}for(var possibleI,abs=1/0,i=0,len=pieceList.length;i<len;i++){
var pieceValue=pieceList[i].value;if(null!=pieceValue){if(pieceValue===value)return i;
findClosestWhenOutside&&updatePossible(pieceValue,i)}}for(var i=0,len=pieceList.length;i<len;i++){
var piece=pieceList[i],interval=piece.interval,close=piece.close;
if(interval){if(interval[0]===-(1/0)){if(littleThan(close[1],value,interval[1]))return i;
}else if(interval[1]===1/0){if(littleThan(close[0],interval[0],value))return i;
}else if(littleThan(close[0],interval[0],value)&&littleThan(close[1],value,interval[1]))return i;
findClosestWhenOutside&&updatePossible(interval[0],i),findClosestWhenOutside&&updatePossible(interval[1],i);
}}if(findClosestWhenOutside)return value===1/0?pieceList.length-1:value===-(1/0)?0:possibleI;
},module.exports=VisualMapping},function(module,exports,__webpack_require__){
function update(ecModel,api,payload){var condition={mainType:"series",
subType:"treemap",query:payload};ecModel.eachComponent(condition,function(seriesModel){
var ecWidth=api.getWidth(),ecHeight=api.getHeight(),seriesOption=seriesModel.option,layoutInfo=layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{
width:api.getWidth(),height:api.getHeight()}),size=seriesOption.size||[],containerWidth=parsePercent(retrieveValue(layoutInfo.width,size[0]),ecWidth),containerHeight=parsePercent(retrieveValue(layoutInfo.height,size[1]),ecHeight),payloadType=payload&&payload.type,targetInfo=helper.retrieveTargetInfo(payload,seriesModel),rootRect="treemapRender"===payloadType||"treemapMove"===payloadType?payload.rootRect:null,viewRoot=seriesModel.getViewRoot(),viewAbovePath=helper.getPathToRoot(viewRoot);
if("treemapMove"!==payloadType){var rootSize="treemapZoomToNode"===payloadType?estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight):rootRect?[rootRect.width,rootRect.height]:[containerWidth,containerHeight],sort=seriesOption.sort;
sort&&"asc"!==sort&&"desc"!==sort&&(sort="desc");var options={
squareRatio:seriesOption.squareRatio,sort:sort,leafDepth:seriesOption.leafDepth
};viewRoot.hostTree.clearLayouts();var viewRootLayout={x:0,y:0,
width:rootSize[0],height:rootSize[1],area:rootSize[0]*rootSize[1]
};viewRoot.setLayout(viewRootLayout),squarify(viewRoot,options,!1,0);
var viewRootLayout=viewRoot.getLayout();each(viewAbovePath,function(node,index){
var childValue=(viewAbovePath[index+1]||viewRoot).getValue();node.setLayout(zrUtil.extend({
dataExtent:[childValue,childValue],borderWidth:0},viewRootLayout));
})}var treeRoot=seriesModel.getData().tree.root;treeRoot.setLayout(calculateRootPosition(layoutInfo,rootRect,targetInfo),!0),
seriesModel.setLayoutInfo(layoutInfo),prunning(treeRoot,new BoundingRect((-layoutInfo.x),(-layoutInfo.y),ecWidth,ecHeight),viewAbovePath,viewRoot,0);
})}function squarify(node,options,hideChildren,depth){var width,height;
if(!node.isRemoved()){var thisLayout=node.getLayout();width=thisLayout.width,
height=thisLayout.height;var itemStyleModel=node.getModel("itemStyle.normal"),borderWidth=itemStyleModel.get("borderWidth"),halfGapWidth=itemStyleModel.get("gapWidth")/2,layoutOffset=borderWidth-halfGapWidth,nodeModel=node.getModel();
node.setLayout({borderWidth:borderWidth},!0),width=mathMax(width-2*layoutOffset,0),
height=mathMax(height-2*layoutOffset,0);var totalArea=width*height,viewChildren=initChildren(node,nodeModel,totalArea,options,hideChildren,depth);
if(viewChildren.length){var rect={x:layoutOffset,y:layoutOffset,
width:width,height:height},rowFixedLength=mathMin(width,height),best=1/0,row=[];
row.area=0;for(var i=0,len=viewChildren.length;i<len;){var child=viewChildren[i];
row.push(child),row.area+=child.getLayout().area;var score=worst(row,rowFixedLength,options.squareRatio);
score<=best?(i++,best=score):(row.area-=row.pop().getLayout().area,
position(row,rowFixedLength,rect,halfGapWidth,!1),rowFixedLength=mathMin(rect.width,rect.height),
row.length=row.area=0,best=1/0)}if(row.length&&position(row,rowFixedLength,rect,halfGapWidth,!0),
!hideChildren){var childrenVisibleMin=nodeModel.get("childrenVisibleMin");
null!=childrenVisibleMin&&totalArea<childrenVisibleMin&&(hideChildren=!0);
}for(var i=0,len=viewChildren.length;i<len;i++)squarify(viewChildren[i],options,hideChildren,depth+1);
}}}function initChildren(node,nodeModel,totalArea,options,hideChildren,depth){
var viewChildren=node.children||[],orderBy=options.sort;"asc"!==orderBy&&"desc"!==orderBy&&(orderBy=null);
var overLeafDepth=null!=options.leafDepth&&options.leafDepth<=depth;
if(hideChildren&&!overLeafDepth)return node.viewChildren=[];viewChildren=zrUtil.filter(viewChildren,function(child){
return!child.isRemoved()}),sort(viewChildren,orderBy);var info=statistic(nodeModel,viewChildren,orderBy);
if(0===info.sum)return node.viewChildren=[];if(info.sum=filterByThreshold(nodeModel,totalArea,info.sum,orderBy,viewChildren),
0===info.sum)return node.viewChildren=[];for(var i=0,len=viewChildren.length;i<len;i++){
var area=viewChildren[i].getValue()/info.sum*totalArea;viewChildren[i].setLayout({
area:area})}return overLeafDepth&&(viewChildren.length&&node.setLayout({
isLeafRoot:!0},!0),viewChildren.length=0),node.viewChildren=viewChildren,
node.setLayout({dataExtent:info.dataExtent},!0),viewChildren}
function filterByThreshold(nodeModel,totalArea,sum,orderBy,orderedChildren){
if(!orderBy)return sum;for(var visibleMin=nodeModel.get("visibleMin"),len=orderedChildren.length,deletePoint=len,i=len-1;i>=0;i--){
var value=orderedChildren["asc"===orderBy?len-i-1:i].getValue();
value/sum*totalArea<visibleMin&&(deletePoint=i,sum-=value)}return"asc"===orderBy?orderedChildren.splice(0,len-deletePoint):orderedChildren.splice(deletePoint,len-deletePoint),
sum}function sort(viewChildren,orderBy){return orderBy&&viewChildren.sort(function(a,b){
return"asc"===orderBy?a.getValue()-b.getValue():b.getValue()-a.getValue();
}),viewChildren}function statistic(nodeModel,children,orderBy){
for(var sum=0,i=0,len=children.length;i<len;i++)sum+=children[i].getValue();
var dataExtent,dimension=nodeModel.get("visualDimension");if(children&&children.length)if("value"===dimension&&orderBy)dataExtent=[children[children.length-1].getValue(),children[0].getValue()],
"asc"===orderBy&&dataExtent.reverse();else{var dataExtent=[1/0,-(1/0)];
each(children,function(child){var value=child.getValue(dimension);
value<dataExtent[0]&&(dataExtent[0]=value),value>dataExtent[1]&&(dataExtent[1]=value);
})}else dataExtent=[NaN,NaN];return{sum:sum,dataExtent:dataExtent
}}function worst(row,rowFixedLength,ratio){for(var area,areaMax=0,areaMin=1/0,i=0,len=row.length;i<len;i++)area=row[i].getLayout().area,
area&&(area<areaMin&&(areaMin=area),area>areaMax&&(areaMax=area));
var squareArea=row.area*row.area,f=rowFixedLength*rowFixedLength*ratio;
return squareArea?mathMax(f*areaMax/squareArea,squareArea/(f*areaMin)):1/0;
}function position(row,rowFixedLength,rect,halfGapWidth,flush){
var idx0WhenH=rowFixedLength===rect.width?0:1,idx1WhenH=1-idx0WhenH,xy=["x","y"],wh=["width","height"],last=rect[xy[idx0WhenH]],rowOtherLength=rowFixedLength?row.area/rowFixedLength:0;
(flush||rowOtherLength>rect[wh[idx1WhenH]])&&(rowOtherLength=rect[wh[idx1WhenH]]);
for(var i=0,rowLen=row.length;i<rowLen;i++){var node=row[i],nodeLayout={},step=rowOtherLength?node.getLayout().area/rowOtherLength:0,wh1=nodeLayout[wh[idx1WhenH]]=mathMax(rowOtherLength-2*halfGapWidth,0),remain=rect[xy[idx0WhenH]]+rect[wh[idx0WhenH]]-last,modWH=i===rowLen-1||remain<step?remain:step,wh0=nodeLayout[wh[idx0WhenH]]=mathMax(modWH-2*halfGapWidth,0);
nodeLayout[xy[idx1WhenH]]=rect[xy[idx1WhenH]]+mathMin(halfGapWidth,wh1/2),
nodeLayout[xy[idx0WhenH]]=last+mathMin(halfGapWidth,wh0/2),last+=modWH,
node.setLayout(nodeLayout,!0)}rect[xy[idx1WhenH]]+=rowOtherLength,
rect[wh[idx1WhenH]]-=rowOtherLength}function estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight){
var currNode=(targetInfo||{}).node,defaultSize=[containerWidth,containerHeight];
if(!currNode||currNode===viewRoot)return defaultSize;for(var parent,viewArea=containerWidth*containerHeight,area=viewArea*seriesModel.option.zoomToNodeRatio;parent=currNode.parentNode;){
for(var sum=0,siblings=parent.children,i=0,len=siblings.length;i<len;i++)sum+=siblings[i].getValue();
var currNodeValue=currNode.getValue();if(0===currNodeValue)return defaultSize;
area*=sum/currNodeValue;var borderWidth=parent.getModel("itemStyle.normal").get("borderWidth");
isFinite(borderWidth)&&(area+=4*borderWidth*borderWidth+4*borderWidth*Math.pow(area,.5)),
area>numberUtil.MAX_SAFE_INTEGER&&(area=numberUtil.MAX_SAFE_INTEGER),
currNode=parent}area<viewArea&&(area=viewArea);var scale=Math.pow(area/viewArea,.5);
return[containerWidth*scale,containerHeight*scale]}function calculateRootPosition(layoutInfo,rootRect,targetInfo){
if(rootRect)return{x:rootRect.x,y:rootRect.y};var defaultPosition={
x:0,y:0};if(!targetInfo)return defaultPosition;var targetNode=targetInfo.node,layout=targetNode.getLayout();
if(!layout)return defaultPosition;for(var targetCenter=[layout.width/2,layout.height/2],node=targetNode;node;){
var nodeLayout=node.getLayout();targetCenter[0]+=nodeLayout.x,
targetCenter[1]+=nodeLayout.y,node=node.parentNode}return{x:layoutInfo.width/2-targetCenter[0],
y:layoutInfo.height/2-targetCenter[1]}}function prunning(node,clipRect,viewAbovePath,viewRoot,depth){
var nodeLayout=node.getLayout(),nodeInViewAbovePath=viewAbovePath[depth],isAboveViewRoot=nodeInViewAbovePath&&nodeInViewAbovePath===node;
if(!(nodeInViewAbovePath&&!isAboveViewRoot||depth===viewAbovePath.length&&node!==viewRoot)){
node.setLayout({isInView:!0,invisible:!isAboveViewRoot&&!clipRect.intersect(nodeLayout),
isAboveViewRoot:isAboveViewRoot},!0);var childClipRect=new BoundingRect(clipRect.x-nodeLayout.x,clipRect.y-nodeLayout.y,clipRect.width,clipRect.height);
each(node.viewChildren||[],function(child){prunning(child,childClipRect,viewAbovePath,viewRoot,depth+1);
})}}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),layout=__webpack_require__(21),helper=__webpack_require__(189),BoundingRect=__webpack_require__(9),helper=__webpack_require__(189),mathMax=Math.max,mathMin=Math.min,parsePercent=numberUtil.parsePercent,retrieveValue=zrUtil.retrieve,each=zrUtil.each;
module.exports=update},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);
__webpack_require__(198),__webpack_require__(201),__webpack_require__(206),
echarts.registerProcessor(__webpack_require__(207)),echarts.registerVisual(zrUtil.curry(__webpack_require__(110),"graph","circle",null)),
echarts.registerVisual(__webpack_require__(208)),echarts.registerVisual(__webpack_require__(209)),
echarts.registerLayout(__webpack_require__(210)),echarts.registerLayout(__webpack_require__(213)),
echarts.registerLayout(__webpack_require__(215)),echarts.registerCoordinateSystem("graphView",{
create:__webpack_require__(217)})},function(module,exports,__webpack_require__){
"use strict";var List=__webpack_require__(98),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),Model=__webpack_require__(12),formatUtil=__webpack_require__(6),createGraphFromNodeEdge=__webpack_require__(199),GraphSeries=__webpack_require__(1).extendSeriesModel({
type:"series.graph",init:function(option){GraphSeries.superApply(this,"init",arguments),
this.legendDataProvider=function(){return this._categoriesData;
},this.fillDataTextStyle(option.edges||option.links),this._updateCategoriesData();
},mergeOption:function(option){GraphSeries.superApply(this,"mergeOption",arguments),
this.fillDataTextStyle(option.edges||option.links),this._updateCategoriesData();
},mergeDefaultAndTheme:function(option){GraphSeries.superApply(this,"mergeDefaultAndTheme",arguments),
modelUtil.defaultEmphasis(option.edgeLabel,modelUtil.LABEL_OPTIONS);
},getInitialData:function(option,ecModel){function beforeLink(nodeData,edgeData){
function edgeGetParent(path){return path=this.parsePath(path),
path&&"label"===path[0]?fakeSeriesModel:this.parentModel}nodeData.wrapMethod("getItemModel",function(model){
var categoriesModels=self._categoriesModels,categoryIdx=model.getShallow("category"),categoryModel=categoriesModels[categoryIdx];
return categoryModel&&(categoryModel.parentModel=model.parentModel,
model.parentModel=categoryModel),model});var edgeLabelModel=self.getModel("edgeLabel"),fakeSeriesModel=new Model({
label:edgeLabelModel.option},edgeLabelModel.parentModel,ecModel);
edgeData.wrapMethod("getItemModel",function(model){return model.customizeGetParent(edgeGetParent),
model})}var edges=option.edges||option.links||[],nodes=option.data||option.nodes||[],self=this;
if(nodes&&edges)return createGraphFromNodeEdge(nodes,edges,this,!0,beforeLink).data;
},getGraph:function(){return this.getData().graph},getEdgeData:function(){
return this.getGraph().edgeData},getCategoriesData:function(){
return this._categoriesData},formatTooltip:function(dataIndex,multipleSeries,dataType){
if("edge"===dataType){var nodeData=this.getData(),params=this.getDataParams(dataIndex,dataType),edge=nodeData.graph.getEdgeByIndex(dataIndex),sourceName=nodeData.getName(edge.node1.dataIndex),targetName=nodeData.getName(edge.node2.dataIndex),html=[];
return null!=sourceName&&html.push(sourceName),null!=targetName&&html.push(targetName),
html=formatUtil.encodeHTML(html.join(" > ")),params.value&&(html+=" : "+formatUtil.encodeHTML(params.value)),
html}return GraphSeries.superApply(this,"formatTooltip",arguments);
},_updateCategoriesData:function(){var categories=zrUtil.map(this.option.categories||[],function(category){
return null!=category.value?category:zrUtil.extend({value:0},category);
}),categoriesData=new List(["value"],this);categoriesData.initData(categories),
this._categoriesData=categoriesData,this._categoriesModels=categoriesData.mapArray(function(idx){
return categoriesData.getItemModel(idx,!0)})},setZoom:function(zoom){
this.option.zoom=zoom},setCenter:function(center){this.option.center=center;
},isAnimationEnabled:function(){return GraphSeries.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"));
},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,
hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{
rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,
edgeLength:30,layoutAnimation:!0},left:"center",top:"center",
symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,
edgeLabel:{normal:{position:"middle"},emphasis:{}},draggable:!1,
roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{normal:{show:!1,
formatter:"{b}"},emphasis:{show:!0}},itemStyle:{normal:{},emphasis:{}
},lineStyle:{normal:{color:"#aaa",width:1,curveness:0,opacity:.5
},emphasis:{}}}});module.exports=GraphSeries},function(module,exports,__webpack_require__){
var List=__webpack_require__(98),Graph=__webpack_require__(200),linkList=__webpack_require__(188),completeDimensions=__webpack_require__(103),CoordinateSystem=__webpack_require__(26),zrUtil=__webpack_require__(4),createListFromArray=__webpack_require__(102);
module.exports=function(nodes,edges,hostModel,directed,beforeLink){
for(var graph=new Graph(directed),i=0;i<nodes.length;i++)graph.addNode(zrUtil.retrieve(nodes[i].id,nodes[i].name,i),i);
for(var linkNameList=[],validEdges=[],linkCount=0,i=0;i<edges.length;i++){
var link=edges[i],source=link.source,target=link.target;graph.addEdge(source,target,linkCount)&&(validEdges.push(link),
linkNameList.push(zrUtil.retrieve(link.id,source+" > "+target)),
linkCount++)}var nodeData,coordSys=hostModel.get("coordinateSystem");
if("cartesian2d"===coordSys||"polar"===coordSys)nodeData=createListFromArray(nodes,hostModel,hostModel.ecModel);else{
var coordSysCtor=CoordinateSystem.get(coordSys),dimensionNames=completeDimensions((coordSysCtor&&"view"!==coordSysCtor.type?coordSysCtor.dimensions||[]:[]).concat(["value"]),nodes);
nodeData=new List(dimensionNames,hostModel),nodeData.initData(nodes);
}var edgeData=new List(["value"],hostModel);return edgeData.initData(validEdges,linkNameList),
beforeLink&&beforeLink(nodeData,edgeData),linkList({mainData:nodeData,
struct:graph,structAttr:"graph",datas:{node:nodeData,edge:edgeData
},datasAttr:{node:"data",edge:"edgeData"}}),graph.update(),graph;
}},function(module,exports,__webpack_require__){"use strict";function Node(id,dataIndex){
this.id=null==id?"":id,this.inEdges=[],this.outEdges=[],this.edges=[],
this.hostGraph,this.dataIndex=null==dataIndex?-1:dataIndex}function Edge(n1,n2,dataIndex){
this.node1=n1,this.node2=n2,this.dataIndex=null==dataIndex?-1:dataIndex;
}var zrUtil=__webpack_require__(4),Graph=function(directed){this._directed=directed||!1,
this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},
this.data,this.edgeData},graphProto=Graph.prototype;graphProto.type="graph",
graphProto.isDirected=function(){return this._directed},graphProto.addNode=function(id,dataIndex){
id=id||""+dataIndex;var nodesMap=this._nodesMap;if(!nodesMap[id]){
var node=new Node(id,dataIndex);return node.hostGraph=this,this.nodes.push(node),
nodesMap[id]=node,node}},graphProto.getNodeByIndex=function(dataIndex){
var rawIdx=this.data.getRawIndex(dataIndex);return this.nodes[rawIdx];
},graphProto.getNodeById=function(id){return this._nodesMap[id];
},graphProto.addEdge=function(n1,n2,dataIndex){var nodesMap=this._nodesMap,edgesMap=this._edgesMap;
if("number"==typeof n1&&(n1=this.nodes[n1]),"number"==typeof n2&&(n2=this.nodes[n2]),
n1 instanceof Node||(n1=nodesMap[n1]),n2 instanceof Node||(n2=nodesMap[n2]),
n1&&n2){var key=n1.id+"-"+n2.id;if(!edgesMap[key]){var edge=new Edge(n1,n2,dataIndex);
return edge.hostGraph=this,this._directed&&(n1.outEdges.push(edge),
n2.inEdges.push(edge)),n1.edges.push(edge),n1!==n2&&n2.edges.push(edge),
this.edges.push(edge),edgesMap[key]=edge,edge}}},graphProto.getEdgeByIndex=function(dataIndex){
var rawIdx=this.edgeData.getRawIndex(dataIndex);return this.edges[rawIdx];
},graphProto.getEdge=function(n1,n2){n1 instanceof Node&&(n1=n1.id),
n2 instanceof Node&&(n2=n2.id);var edgesMap=this._edgesMap;return this._directed?edgesMap[n1+"-"+n2]:edgesMap[n1+"-"+n2]||edgesMap[n2+"-"+n1];
},graphProto.eachNode=function(cb,context){for(var nodes=this.nodes,len=nodes.length,i=0;i<len;i++)nodes[i].dataIndex>=0&&cb.call(context,nodes[i],i);
},graphProto.eachEdge=function(cb,context){for(var edges=this.edges,len=edges.length,i=0;i<len;i++)edges[i].dataIndex>=0&&edges[i].node1.dataIndex>=0&&edges[i].node2.dataIndex>=0&&cb.call(context,edges[i],i);
},graphProto.breadthFirstTraverse=function(cb,startNode,direction,context){
if(startNode instanceof Node||(startNode=this._nodesMap[startNode]),
startNode){for(var edgeType="out"===direction?"outEdges":"in"===direction?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;
if(!cb.call(context,startNode,null))for(var queue=[startNode];queue.length;)for(var currentNode=queue.shift(),edges=currentNode[edgeType],i=0;i<edges.length;i++){
var e=edges[i],otherNode=e.node1===currentNode?e.node2:e.node1;
if(!otherNode.__visited){if(cb.call(otherNode,otherNode,currentNode))return;
queue.push(otherNode),otherNode.__visited=!0}}}},graphProto.update=function(){
for(var data=this.data,edgeData=this.edgeData,nodes=this.nodes,edges=this.edges,i=0,len=nodes.length;i<len;i++)nodes[i].dataIndex=-1;
for(var i=0,len=data.count();i<len;i++)nodes[data.getRawIndex(i)].dataIndex=i;
edgeData.filterSelf(function(idx){var edge=edges[edgeData.getRawIndex(idx)];
return edge.node1.dataIndex>=0&&edge.node2.dataIndex>=0});for(var i=0,len=edges.length;i<len;i++)edges[i].dataIndex=-1;
for(var i=0,len=edgeData.count();i<len;i++)edges[edgeData.getRawIndex(i)].dataIndex=i;
},graphProto.clone=function(){for(var graph=new Graph(this._directed),nodes=this.nodes,edges=this.edges,i=0;i<nodes.length;i++)graph.addNode(nodes[i].id,nodes[i].dataIndex);
for(var i=0;i<edges.length;i++){var e=edges[i];graph.addEdge(e.node1.id,e.node2.id,e.dataIndex);
}return graph},Node.prototype={constructor:Node,degree:function(){
return this.edges.length},inDegree:function(){return this.inEdges.length;
},outDegree:function(){return this.outEdges.length},getModel:function(path){
if(!(this.dataIndex<0)){var graph=this.hostGraph,itemModel=graph.data.getItemModel(this.dataIndex);
return itemModel.getModel(path)}}},Edge.prototype.getModel=function(path){
if(!(this.dataIndex<0)){var graph=this.hostGraph,itemModel=graph.edgeData.getItemModel(this.dataIndex);
return itemModel.getModel(path)}};var createGraphDataProxyMixin=function(hostName,dataName){
return{getValue:function(dimension){var data=this[hostName][dataName];
return data.get(data.getDimension(dimension||"value"),this.dataIndex);
},setVisual:function(key,value){this.dataIndex>=0&&this[hostName][dataName].setItemVisual(this.dataIndex,key,value);
},getVisual:function(key,ignoreParent){return this[hostName][dataName].getItemVisual(this.dataIndex,key,ignoreParent);
},setLayout:function(layout,merge){this.dataIndex>=0&&this[hostName][dataName].setItemLayout(this.dataIndex,layout,merge);
},getLayout:function(){return this[hostName][dataName].getItemLayout(this.dataIndex);
},getGraphicEl:function(){return this[hostName][dataName].getItemGraphicEl(this.dataIndex);
},getRawIndex:function(){return this[hostName][dataName].getRawIndex(this.dataIndex);
}}};zrUtil.mixin(Node,createGraphDataProxyMixin("hostGraph","data")),
zrUtil.mixin(Edge,createGraphDataProxyMixin("hostGraph","edgeData")),
Graph.Node=Node,Graph.Edge=Edge,module.exports=Graph},function(module,exports,__webpack_require__){
function getItemOpacity(item,opacityPath){return item.getVisual("opacity")||item.getModel().get(opacityPath);
}var SymbolDraw=__webpack_require__(105),LineDraw=__webpack_require__(202),RoamController=__webpack_require__(177),graphic=__webpack_require__(43),adjustEdge=__webpack_require__(205),zrUtil=__webpack_require__(4),nodeOpacityPath=["itemStyle","normal","opacity"],lineOpacityPath=["lineStyle","normal","opacity"];
__webpack_require__(1).extendChartView({type:"graph",init:function(ecModel,api){
var symbolDraw=new SymbolDraw,lineDraw=new LineDraw,group=this.group,controller=new RoamController(api.getZr(),group);
group.add(symbolDraw.group),group.add(lineDraw.group),this._symbolDraw=symbolDraw,
this._lineDraw=lineDraw,this._controller=controller,this._firstRender=!0;
},render:function(seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;
this._model=seriesModel,this._nodeScaleRatio=seriesModel.get("nodeScaleRatio");
var symbolDraw=this._symbolDraw,lineDraw=this._lineDraw,group=this.group;
if("view"===coordSys.type){var groupNewProp={position:coordSys.position,
scale:coordSys.scale};this._firstRender?group.attr(groupNewProp):graphic.updateProps(group,groupNewProp,seriesModel);
}adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel));
var data=seriesModel.getData();symbolDraw.updateData(data);var edgeData=seriesModel.getEdgeData();
lineDraw.updateData(edgeData),this._updateNodeAndLinkScale(),
this._updateController(seriesModel,api),clearTimeout(this._layoutTimeout);
var forceLayout=seriesModel.forceLayout,layoutAnimation=seriesModel.get("force.layoutAnimation");
forceLayout&&this._startForceLayoutIteration(forceLayout,layoutAnimation),
data.eachItemGraphicEl(function(el,idx){var itemModel=data.getItemModel(idx);
el.off("drag").off("dragend");var draggable=data.getItemModel(idx).get("draggable");
draggable&&el.on("drag",function(){forceLayout&&(forceLayout.warmUp(),
!this._layouting&&this._startForceLayoutIteration(forceLayout,layoutAnimation),
forceLayout.setFixed(idx),data.setItemLayout(idx,el.position));
},this).on("dragend",function(){forceLayout&&forceLayout.setUnfixed(idx);
},this),el.setDraggable(draggable&&forceLayout),el.off("mouseover",el.__focusNodeAdjacency),
el.off("mouseout",el.__unfocusNodeAdjacency),itemModel.get("focusNodeAdjacency")&&(el.on("mouseover",el.__focusNodeAdjacency=function(){
api.dispatchAction({type:"focusNodeAdjacency",seriesId:seriesModel.id,
dataIndex:el.dataIndex})}),el.on("mouseout",el.__unfocusNodeAdjacency=function(){
api.dispatchAction({type:"unfocusNodeAdjacency",seriesId:seriesModel.id
})}))},this);var circularRotateLabel="circular"===seriesModel.get("layout")&&seriesModel.get("circular.rotateLabel"),cx=data.getLayout("cx"),cy=data.getLayout("cy");
data.eachItemGraphicEl(function(el,idx){var symbolPath=el.getSymbolPath();
if(circularRotateLabel){var pos=data.getItemLayout(idx),rad=Math.atan2(pos[1]-cy,pos[0]-cx);
rad<0&&(rad=2*Math.PI+rad);var isLeft=pos[0]<cx;isLeft&&(rad-=Math.PI);
var textPosition=isLeft?"left":"right";symbolPath.setStyle({textRotation:rad,
textPosition:textPosition}),symbolPath.hoverStyle&&(symbolPath.hoverStyle.textPosition=textPosition);
}else symbolPath.setStyle({textRotation:0})}),this._firstRender=!1;
},dispose:function(){this._controller&&this._controller.dispose();
},focusNodeAdjacency:function(seriesModel,ecModel,api,payload){
function fadeOutItem(item,opacityPath){var opacity=getItemOpacity(item,opacityPath),el=item.getGraphicEl();
null==opacity&&(opacity=1),el.traverse(function(child){child.trigger("normal"),
"group"!==child.type&&child.setStyle("opacity",.1*opacity)})}
function fadeInItem(item,opacityPath){var opacity=getItemOpacity(item,opacityPath),el=item.getGraphicEl();
el.traverse(function(child){child.trigger("emphasis"),"group"!==child.type&&child.setStyle("opacity",opacity);
})}var data=this._model.getData(),dataIndex=payload.dataIndex,el=data.getItemGraphicEl(dataIndex);
if(el){var graph=data.graph,dataType=el.dataType;if(null!==dataIndex&&"edge"!==dataType){
graph.eachNode(function(node){fadeOutItem(node,nodeOpacityPath);
}),graph.eachEdge(function(edge){fadeOutItem(edge,lineOpacityPath);
});var node=graph.getNodeByIndex(dataIndex);fadeInItem(node,nodeOpacityPath),
zrUtil.each(node.edges,function(edge){edge.dataIndex<0||(fadeInItem(edge,lineOpacityPath),
fadeInItem(edge.node1,nodeOpacityPath),fadeInItem(edge.node2,nodeOpacityPath));
})}}},unfocusNodeAdjacency:function(seriesModel,ecModel,api,payload){
var graph=this._model.getData().graph;graph.eachNode(function(node){
var opacity=getItemOpacity(node,nodeOpacityPath);node.getGraphicEl().traverse(function(child){
child.trigger("normal"),"group"!==child.type&&child.setStyle("opacity",opacity);
})}),graph.eachEdge(function(edge){var opacity=getItemOpacity(edge,lineOpacityPath);
edge.getGraphicEl().traverse(function(child){child.trigger("normal"),
"group"!==child.type&&child.setStyle("opacity",opacity)})})},
_startForceLayoutIteration:function(forceLayout,layoutAnimation){
var self=this;!function step(){forceLayout.step(function(stopped){
self.updateLayout(self._model),(self._layouting=!stopped)&&(layoutAnimation?self._layoutTimeout=setTimeout(step,16):step());
})}()},_updateController:function(seriesModel,api){var controller=this._controller,group=this.group;
return controller.setContainsPoint(function(x,y){var rect=group.getBoundingRect();
return rect.applyTransform(group.transform),rect.contain(x,y);
}),"view"!==seriesModel.coordinateSystem.type?void controller.disable():(controller.enable(seriesModel.get("roam")),
controller.zoomLimit=seriesModel.get("scaleLimit"),controller.zoom=seriesModel.coordinateSystem.getZoom(),
void controller.off("pan").off("zoom").on("pan",function(dx,dy){
api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",
dx:dx,dy:dy})}).on("zoom",function(zoom,mouseX,mouseY){api.dispatchAction({
seriesId:seriesModel.id,type:"graphRoam",zoom:zoom,originX:mouseX,
originY:mouseY}),this._updateNodeAndLinkScale(),adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel)),
this._lineDraw.updateLayout()},this))},_updateNodeAndLinkScale:function(){
var seriesModel=this._model,data=seriesModel.getData(),nodeScale=this._getNodeGlobalScale(seriesModel),invScale=[nodeScale,nodeScale];
data.eachItemGraphicEl(function(el,idx){el.attr("scale",invScale);
})},_getNodeGlobalScale:function(seriesModel){var coordSys=seriesModel.coordinateSystem;
if("view"!==coordSys.type)return 1;var nodeScaleRatio=this._nodeScaleRatio,groupScale=coordSys.scale,groupZoom=groupScale&&groupScale[0]||1,roamZoom=coordSys.getZoom(),nodeScale=(roamZoom-1)*nodeScaleRatio+1;
return nodeScale/groupZoom},updateLayout:function(seriesModel){
adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel)),
this._symbolDraw.updateLayout(),this._lineDraw.updateLayout();
},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(),
this._lineDraw&&this._lineDraw.remove()}})},function(module,exports,__webpack_require__){
function isPointNaN(pt){return isNaN(pt[0])||isNaN(pt[1])}function lineNeedsDraw(pts){
return!isPointNaN(pts[0])&&!isPointNaN(pts[1])}function LineDraw(ctor){
this._ctor=ctor||LineGroup,this.group=new graphic.Group}var graphic=__webpack_require__(43),LineGroup=__webpack_require__(203),lineDrawProto=LineDraw.prototype;
lineDrawProto.updateData=function(lineData){var oldLineData=this._lineData,group=this.group,LineCtor=this._ctor,hostModel=lineData.hostModel,seriesScope={
lineStyle:hostModel.getModel("lineStyle.normal").getLineStyle(),
hoverLineStyle:hostModel.getModel("lineStyle.emphasis").getLineStyle(),
labelModel:hostModel.getModel("label.normal"),hoverLabelModel:hostModel.getModel("label.emphasis")
};lineData.diff(oldLineData).add(function(idx){if(lineNeedsDraw(lineData.getItemLayout(idx))){
var lineGroup=new LineCtor(lineData,idx,seriesScope);lineData.setItemGraphicEl(idx,lineGroup),
group.add(lineGroup)}}).update(function(newIdx,oldIdx){var lineGroup=oldLineData.getItemGraphicEl(oldIdx);
return lineNeedsDraw(lineData.getItemLayout(newIdx))?(lineGroup?lineGroup.updateData(lineData,newIdx,seriesScope):lineGroup=new LineCtor(lineData,newIdx,seriesScope),
lineData.setItemGraphicEl(newIdx,lineGroup),void group.add(lineGroup)):void group.remove(lineGroup);
}).remove(function(idx){group.remove(oldLineData.getItemGraphicEl(idx));
}).execute(),this._lineData=lineData},lineDrawProto.updateLayout=function(){
var lineData=this._lineData;lineData.eachItemGraphicEl(function(el,idx){
el.updateLayout(lineData,idx)},this)},lineDrawProto.remove=function(){
this.group.removeAll()},module.exports=LineDraw},function(module,exports,__webpack_require__){
function makeSymbolTypeKey(symbolCategory){return"_"+symbolCategory+"Type";
}function createSymbol(name,lineData,idx){var color=lineData.getItemVisual(idx,"color"),symbolType=lineData.getItemVisual(idx,name),symbolSize=lineData.getItemVisual(idx,name+"Size");
if(symbolType&&"none"!==symbolType){zrUtil.isArray(symbolSize)||(symbolSize=[symbolSize,symbolSize]);
var symbolPath=symbolUtil.createSymbol(symbolType,-symbolSize[0]/2,-symbolSize[1]/2,symbolSize[0],symbolSize[1],color);
return symbolPath.name=name,symbolPath}}function createLine(points){
var line=new LinePath({name:"line"});return setLinePoints(line.shape,points),
line}function setLinePoints(targetShape,points){var p1=points[0],p2=points[1],cp1=points[2];
targetShape.x1=p1[0],targetShape.y1=p1[1],targetShape.x2=p2[0],
targetShape.y2=p2[1],targetShape.percent=1,cp1?(targetShape.cpx1=cp1[0],
targetShape.cpy1=cp1[1]):(targetShape.cpx1=NaN,targetShape.cpy1=NaN);
}function updateSymbolAndLabelBeforeLineUpdate(){var lineGroup=this,symbolFrom=lineGroup.childOfName("fromSymbol"),symbolTo=lineGroup.childOfName("toSymbol"),label=lineGroup.childOfName("label");
if(symbolFrom||symbolTo||!label.ignore){for(var invScale=1,parentNode=this.parent;parentNode;)parentNode.scale&&(invScale/=parentNode.scale[0]),
parentNode=parentNode.parent;var line=lineGroup.childOfName("line");
if(this.__dirty||line.__dirty){var percent=line.shape.percent,fromPos=line.pointAt(0),toPos=line.pointAt(percent),d=vector.sub([],toPos,fromPos);
if(vector.normalize(d,d),symbolFrom){symbolFrom.attr("position",fromPos);
var tangent=line.tangentAt(0);symbolFrom.attr("rotation",Math.PI/2-Math.atan2(tangent[1],tangent[0])),
symbolFrom.attr("scale",[invScale*percent,invScale*percent])}
if(symbolTo){symbolTo.attr("position",toPos);var tangent=line.tangentAt(1);
symbolTo.attr("rotation",-Math.PI/2-Math.atan2(tangent[1],tangent[0])),
symbolTo.attr("scale",[invScale*percent,invScale*percent])}if(!label.ignore){
label.attr("position",toPos);var textPosition,textAlign,textVerticalAlign,distance=5*invScale;
if("end"===label.__position)textPosition=[d[0]*distance+toPos[0],d[1]*distance+toPos[1]],
textAlign=d[0]>.8?"left":d[0]<-.8?"right":"center",textVerticalAlign=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";else if("middle"===label.__position){
var halfPercent=percent/2,tangent=line.tangentAt(halfPercent),n=[tangent[1],-tangent[0]],cp=line.pointAt(halfPercent);
n[1]>0&&(n[0]=-n[0],n[1]=-n[1]),textPosition=[cp[0]+n[0]*distance,cp[1]+n[1]*distance],
textAlign="center",textVerticalAlign="bottom";var rotation=-Math.atan2(tangent[1],tangent[0]);
toPos[0]<fromPos[0]&&(rotation=Math.PI+rotation),label.attr("rotation",rotation);
}else textPosition=[-d[0]*distance+fromPos[0],-d[1]*distance+fromPos[1]],
textAlign=d[0]>.8?"right":d[0]<-.8?"left":"center",textVerticalAlign=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";
label.attr({style:{textVerticalAlign:label.__verticalAlign||textVerticalAlign,
textAlign:label.__textAlign||textAlign},position:textPosition,
scale:[invScale,invScale]})}}}}function Line(lineData,idx,seriesScope){
graphic.Group.call(this),this._createLine(lineData,idx,seriesScope);
}var symbolUtil=__webpack_require__(107),vector=__webpack_require__(10),LinePath=__webpack_require__(204),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"],lineProto=Line.prototype;
lineProto.beforeUpdate=updateSymbolAndLabelBeforeLineUpdate,lineProto._createLine=function(lineData,idx,seriesScope){
var seriesModel=lineData.hostModel,linePoints=lineData.getItemLayout(idx),line=createLine(linePoints);
line.shape.percent=0,graphic.initProps(line,{shape:{percent:1
}},seriesModel,idx),this.add(line);var label=new graphic.Text({
name:"label"});this.add(label),zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){
var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol),
this[makeSymbolTypeKey(symbolCategory)]=lineData.getItemVisual(idx,symbolCategory);
},this),this._updateCommonStl(lineData,idx,seriesScope)},lineProto.updateData=function(lineData,idx,seriesScope){
var seriesModel=lineData.hostModel,line=this.childOfName("line"),linePoints=lineData.getItemLayout(idx),target={
shape:{}};setLinePoints(target.shape,linePoints),graphic.updateProps(line,target,seriesModel,idx),
zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){var symbolType=lineData.getItemVisual(idx,symbolCategory),key=makeSymbolTypeKey(symbolCategory);
if(this[key]!==symbolType){this.remove(this.childOfName(symbolCategory));
var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol);
}this[key]=symbolType},this),this._updateCommonStl(lineData,idx,seriesScope);
},lineProto._updateCommonStl=function(lineData,idx,seriesScope){
var seriesModel=lineData.hostModel,line=this.childOfName("line"),lineStyle=seriesScope&&seriesScope.lineStyle,hoverLineStyle=seriesScope&&seriesScope.hoverLineStyle,labelModel=seriesScope&&seriesScope.labelModel,hoverLabelModel=seriesScope&&seriesScope.hoverLabelModel;
if(!seriesScope||lineData.hasItemOption){var itemModel=lineData.getItemModel(idx);
lineStyle=itemModel.getModel("lineStyle.normal").getLineStyle(),
hoverLineStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle(),
labelModel=itemModel.getModel("label.normal"),hoverLabelModel=itemModel.getModel("label.emphasis");
}var visualColor=lineData.getItemVisual(idx,"color"),visualOpacity=zrUtil.retrieve(lineData.getItemVisual(idx,"opacity"),lineStyle.opacity,1);
line.useStyle(zrUtil.defaults({strokeNoScale:!0,fill:"none",stroke:visualColor,
opacity:visualOpacity},lineStyle)),line.hoverStyle=hoverLineStyle,
zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=this.childOfName(symbolCategory);
symbol&&(symbol.setColor(visualColor),symbol.setStyle({opacity:visualOpacity
}))},this);var defaultLabelColor,defaultText,showLabel=labelModel.getShallow("show"),hoverShowLabel=hoverLabelModel.getShallow("show"),label=this.childOfName("label");
if(showLabel||hoverShowLabel){var rawVal=seriesModel.getRawValue(idx);
defaultText=null==rawVal?defaultText=lineData.getName(idx):isFinite(rawVal)?numberUtil.round(rawVal):rawVal,
defaultLabelColor=visualColor||"#000"}if(showLabel){var textStyleModel=labelModel.getModel("textStyle");
label.setStyle({text:zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"normal",lineData.dataType),defaultText),
textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()||defaultLabelColor
}),label.__textAlign=textStyleModel.get("align"),label.__verticalAlign=textStyleModel.get("baseline"),
label.__position=labelModel.get("position")}else label.setStyle("text","");
if(hoverShowLabel){var textStyleHoverModel=hoverLabelModel.getModel("textStyle");
label.hoverStyle={text:zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"emphasis",lineData.dataType),defaultText),
textFont:textStyleHoverModel.getFont(),fill:textStyleHoverModel.getTextColor()||defaultLabelColor
}}else label.hoverStyle={text:""};label.ignore=!showLabel&&!hoverShowLabel,
graphic.setHoverStyle(this)},lineProto.updateLayout=function(lineData,idx){
this.setLinePoints(lineData.getItemLayout(idx))},lineProto.setLinePoints=function(points){
var linePath=this.childOfName("line");setLinePoints(linePath.shape,points),
linePath.dirty()},zrUtil.inherits(Line,graphic.Group),module.exports=Line;
},function(module,exports,__webpack_require__){function isLine(shape){
return isNaN(+shape.cpx1)||isNaN(+shape.cpy1)}var graphic=__webpack_require__(43),vec2=__webpack_require__(10),straightLineProto=graphic.Line.prototype,bezierCurveProto=graphic.BezierCurve.prototype;
module.exports=graphic.extendShape({type:"ec-line",style:{stroke:"#000",
fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null
},buildPath:function(ctx,shape){(isLine(shape)?straightLineProto:bezierCurveProto).buildPath(ctx,shape);
},pointAt:function(t){return isLine(this.shape)?straightLineProto.pointAt.call(this,t):bezierCurveProto.pointAt.call(this,t);
},tangentAt:function(t){var shape=this.shape,p=isLine(shape)?[shape.x2-shape.x1,shape.y2-shape.y1]:bezierCurveProto.tangentAt.call(this,t);
return vec2.normalize(p,p)}})},function(module,exports,__webpack_require__){
function intersectCurveCircle(curvePoints,center,radius){for(var t,p0=curvePoints[0],p1=curvePoints[1],p2=curvePoints[2],d=1/0,radiusSquare=radius*radius,interval=.1,_t=.1;_t<=.9;_t+=.1){
v1[0]=quadraticAt(p0[0],p1[0],p2[0],_t),v1[1]=quadraticAt(p0[1],p1[1],p2[1],_t);
var diff=mathAbs(v2DistSquare(v1,center)-radiusSquare);diff<d&&(d=diff,
t=_t)}for(var i=0;i<32;i++){var next=t+interval;v2[0]=quadraticAt(p0[0],p1[0],p2[0],t),
v2[1]=quadraticAt(p0[1],p1[1],p2[1],t),v3[0]=quadraticAt(p0[0],p1[0],p2[0],next),
v3[1]=quadraticAt(p0[1],p1[1],p2[1],next);var diff=v2DistSquare(v2,center)-radiusSquare;
if(mathAbs(diff)<.01)break;var nextDiff=v2DistSquare(v3,center)-radiusSquare;
interval/=2,diff<0?nextDiff>=0?t+=interval:t-=interval:nextDiff>=0?t-=interval:t+=interval;
}return t}var curveTool=__webpack_require__(50),vec2=__webpack_require__(10),v1=[],v2=[],v3=[],quadraticAt=curveTool.quadraticAt,v2DistSquare=vec2.distSquare,mathAbs=Math.abs;
module.exports=function(graph,scale){function getSymbolSize(node){
var symbolSize=node.getVisual("symbolSize");return symbolSize instanceof Array&&(symbolSize=(symbolSize[0]+symbolSize[1])/2),
symbolSize}var tmp0=[],quadraticSubdivide=curveTool.quadraticSubdivide,pts=[[],[],[]],pts2=[[],[]],v=[];
scale/=2,graph.eachEdge(function(edge,idx){var linePoints=edge.getLayout(),fromSymbol=edge.getVisual("fromSymbol"),toSymbol=edge.getVisual("toSymbol");
linePoints.__original||(linePoints.__original=[vec2.clone(linePoints[0]),vec2.clone(linePoints[1])],
linePoints[2]&&linePoints.__original.push(vec2.clone(linePoints[2])));
var originalPoints=linePoints.__original;if(null!=linePoints[2]){
if(vec2.copy(pts[0],originalPoints[0]),vec2.copy(pts[1],originalPoints[2]),
vec2.copy(pts[2],originalPoints[1]),fromSymbol&&"none"!=fromSymbol){
var symbolSize=getSymbolSize(edge.node1),t=intersectCurveCircle(pts,originalPoints[0],symbolSize*scale);
quadraticSubdivide(pts[0][0],pts[1][0],pts[2][0],t,tmp0),pts[0][0]=tmp0[3],
pts[1][0]=tmp0[4],quadraticSubdivide(pts[0][1],pts[1][1],pts[2][1],t,tmp0),
pts[0][1]=tmp0[3],pts[1][1]=tmp0[4]}if(toSymbol&&"none"!=toSymbol){
var symbolSize=getSymbolSize(edge.node2),t=intersectCurveCircle(pts,originalPoints[1],symbolSize*scale);
quadraticSubdivide(pts[0][0],pts[1][0],pts[2][0],t,tmp0),pts[1][0]=tmp0[1],
pts[2][0]=tmp0[2],quadraticSubdivide(pts[0][1],pts[1][1],pts[2][1],t,tmp0),
pts[1][1]=tmp0[1],pts[2][1]=tmp0[2]}vec2.copy(linePoints[0],pts[0]),
vec2.copy(linePoints[1],pts[2]),vec2.copy(linePoints[2],pts[1]);
}else{if(vec2.copy(pts2[0],originalPoints[0]),vec2.copy(pts2[1],originalPoints[1]),
vec2.sub(v,pts2[1],pts2[0]),vec2.normalize(v,v),fromSymbol&&"none"!=fromSymbol){
var symbolSize=getSymbolSize(edge.node1);vec2.scaleAndAdd(pts2[0],pts2[0],v,symbolSize*scale);
}if(toSymbol&&"none"!=toSymbol){var symbolSize=getSymbolSize(edge.node2);
vec2.scaleAndAdd(pts2[1],pts2[1],v,-symbolSize*scale)}vec2.copy(linePoints[0],pts2[0]),
vec2.copy(linePoints[1],pts2[1])}})}},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1),roamHelper=__webpack_require__(180),actionInfo={
type:"graphRoam",event:"graphRoam",update:"none"};echarts.registerAction(actionInfo,function(payload,ecModel){
ecModel.eachComponent({mainType:"series",query:payload},function(seriesModel){
var coordSys=seriesModel.coordinateSystem,res=roamHelper.updateCenterAndZoom(coordSys,payload);
seriesModel.setCenter&&seriesModel.setCenter(res.center),seriesModel.setZoom&&seriesModel.setZoom(res.zoom);
})}),echarts.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",
update:"series.graph:focusNodeAdjacency"},function(){}),echarts.registerAction({
type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series.graph:unfocusNodeAdjacency"
},function(){})},function(module,exports){module.exports=function(ecModel){
var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&&legendModels.length&&ecModel.eachSeriesByType("graph",function(graphSeries){
var categoriesData=graphSeries.getCategoriesData(),graph=graphSeries.getGraph(),data=graph.data,categoryNames=categoriesData.mapArray(categoriesData.getName);
data.filterSelf(function(idx){var model=data.getItemModel(idx),category=model.getShallow("category");
if(null!=category){"number"==typeof category&&(category=categoryNames[category]);
for(var i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(category))return!1;
}return!0})},this)}},function(module,exports){module.exports=function(ecModel){
var paletteScope={};ecModel.eachSeriesByType("graph",function(seriesModel){
var categoriesData=seriesModel.getCategoriesData(),data=seriesModel.getData(),categoryNameIdxMap={};
categoriesData.each(function(idx){var name=categoriesData.getName(idx);
categoryNameIdxMap[name]=idx;var itemModel=categoriesData.getItemModel(idx),color=itemModel.get("itemStyle.normal.color")||seriesModel.getColorFromPalette(name,paletteScope);
categoriesData.setItemVisual(idx,"color",color)}),categoriesData.count()&&data.each(function(idx){
var model=data.getItemModel(idx),category=model.getShallow("category");
null!=category&&("string"==typeof category&&(category=categoryNameIdxMap[category]),
data.getItemVisual(idx,"color",!0)||data.setItemVisual(idx,"color",categoriesData.getItemVisual(category,"color")));
})})}},function(module,exports){function normalize(a){return a instanceof Array||(a=[a,a]),
a}module.exports=function(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){
var graph=seriesModel.getGraph(),edgeData=seriesModel.getEdgeData(),symbolType=normalize(seriesModel.get("edgeSymbol")),symbolSize=normalize(seriesModel.get("edgeSymbolSize")),colorQuery="lineStyle.normal.color".split("."),opacityQuery="lineStyle.normal.opacity".split(".");
edgeData.setVisual("fromSymbol",symbolType&&symbolType[0]),edgeData.setVisual("toSymbol",symbolType&&symbolType[1]),
edgeData.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]),
edgeData.setVisual("toSymbolSize",symbolSize&&symbolSize[1]),
edgeData.setVisual("color",seriesModel.get(colorQuery)),edgeData.setVisual("opacity",seriesModel.get(opacityQuery)),
edgeData.each(function(idx){var itemModel=edgeData.getItemModel(idx),edge=graph.getEdgeByIndex(idx),symbolType=normalize(itemModel.getShallow("symbol",!0)),symbolSize=normalize(itemModel.getShallow("symbolSize",!0)),color=itemModel.get(colorQuery),opacity=itemModel.get(opacityQuery);
switch(color){case"source":color=edge.node1.getVisual("color");
break;case"target":color=edge.node2.getVisual("color")}symbolType[0]&&edge.setVisual("fromSymbol",symbolType[0]),
symbolType[1]&&edge.setVisual("toSymbol",symbolType[1]),symbolSize[0]&&edge.setVisual("fromSymbolSize",symbolSize[0]),
symbolSize[1]&&edge.setVisual("toSymbolSize",symbolSize[1]),edge.setVisual("color",color),
edge.setVisual("opacity",opacity)})})}},function(module,exports,__webpack_require__){
var simpleLayoutHelper=__webpack_require__(211),simpleLayoutEdge=__webpack_require__(212);
module.exports=function(ecModel,api){ecModel.eachSeriesByType("graph",function(seriesModel){
var layout=seriesModel.get("layout"),coordSys=seriesModel.coordinateSystem;
if(coordSys&&"view"!==coordSys.type){var data=seriesModel.getData();
data.each(coordSys.dimensions,function(x,y,idx){isNaN(x)||isNaN(y)?data.setItemLayout(idx,[NaN,NaN]):data.setItemLayout(idx,coordSys.dataToPoint([x,y]));
}),simpleLayoutEdge(data.graph)}else layout&&"none"!==layout||simpleLayoutHelper(seriesModel);
})}},function(module,exports,__webpack_require__){var simpleLayoutEdge=__webpack_require__(212);
module.exports=function(seriesModel){var coordSys=seriesModel.coordinateSystem;
if(!coordSys||"view"===coordSys.type){var graph=seriesModel.getGraph();
graph.eachNode(function(node){var model=node.getModel();node.setLayout([+model.get("x"),+model.get("y")]);
}),simpleLayoutEdge(graph)}}},function(module,exports,__webpack_require__){
var vec2=__webpack_require__(10);module.exports=function(graph){
graph.eachEdge(function(edge){var curveness=edge.getModel().get("lineStyle.normal.curveness")||0,p1=vec2.clone(edge.node1.getLayout()),p2=vec2.clone(edge.node2.getLayout()),points=[p1,p2];
+curveness&&points.push([(p1[0]+p2[0])/2-(p1[1]-p2[1])*curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*curveness]),
edge.setLayout(points)})}},function(module,exports,__webpack_require__){
var circularLayoutHelper=__webpack_require__(214);module.exports=function(ecModel){
ecModel.eachSeriesByType("graph",function(seriesModel){"circular"===seriesModel.get("layout")&&circularLayoutHelper(seriesModel);
})}},function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);
module.exports=function(seriesModel){var coordSys=seriesModel.coordinateSystem;
if(!coordSys||"view"===coordSys.type){var rect=coordSys.getBoundingRect(),nodeData=seriesModel.getData(),graph=nodeData.graph,angle=0,sum=nodeData.getSum("value"),unitAngle=2*Math.PI/(sum||nodeData.count()),cx=rect.width/2+rect.x,cy=rect.height/2+rect.y,r=Math.min(rect.width,rect.height)/2;
graph.eachNode(function(node){var value=node.getValue("value");
angle+=unitAngle*(sum?value:1)/2,node.setLayout([r*Math.cos(angle)+cx,r*Math.sin(angle)+cy]),
angle+=unitAngle*(sum?value:1)/2}),nodeData.setLayout({cx:cx,
cy:cy}),graph.eachEdge(function(edge){var cp1,curveness=edge.getModel().get("lineStyle.normal.curveness")||0,p1=vec2.clone(edge.node1.getLayout()),p2=vec2.clone(edge.node2.getLayout()),x12=(p1[0]+p2[0])/2,y12=(p1[1]+p2[1])/2;
+curveness&&(curveness*=3,cp1=[cx*curveness+x12*(1-curveness),cy*curveness+y12*(1-curveness)]),
edge.setLayout([p1,p2,cp1])})}}},function(module,exports,__webpack_require__){
var forceHelper=__webpack_require__(216),numberUtil=__webpack_require__(7),simpleLayoutHelper=__webpack_require__(211),circularLayoutHelper=__webpack_require__(214),vec2=__webpack_require__(10),zrUtil=__webpack_require__(4);
module.exports=function(ecModel){ecModel.eachSeriesByType("graph",function(graphSeries){
var coordSys=graphSeries.coordinateSystem;if(!coordSys||"view"===coordSys.type)if("force"===graphSeries.get("layout")){
var preservedPoints=graphSeries.preservedPoints||{},graph=graphSeries.getGraph(),nodeData=graph.data,edgeData=graph.edgeData,forceModel=graphSeries.getModel("force"),initLayout=forceModel.get("initLayout");
graphSeries.preservedPoints?nodeData.each(function(idx){var id=nodeData.getId(idx);
nodeData.setItemLayout(idx,preservedPoints[id]||[NaN,NaN])}):initLayout&&"none"!==initLayout?"circular"===initLayout&&circularLayoutHelper(graphSeries):simpleLayoutHelper(graphSeries);
var nodeDataExtent=nodeData.getDataExtent("value"),edgeDataExtent=edgeData.getDataExtent("value"),repulsion=forceModel.get("repulsion"),edgeLength=forceModel.get("edgeLength");
zrUtil.isArray(repulsion)||(repulsion=[repulsion,repulsion]),
zrUtil.isArray(edgeLength)||(edgeLength=[edgeLength,edgeLength]),
edgeLength=[edgeLength[1],edgeLength[0]];var nodes=nodeData.mapArray("value",function(value,idx){
var point=nodeData.getItemLayout(idx),rep=numberUtil.linearMap(value,nodeDataExtent,repulsion);
return isNaN(rep)&&(rep=(repulsion[0]+repulsion[1])/2),{w:rep,
rep:rep,p:!point||isNaN(point[0])||isNaN(point[1])?null:point
}}),edges=edgeData.mapArray("value",function(value,idx){var edge=graph.getEdgeByIndex(idx),d=numberUtil.linearMap(value,edgeDataExtent,edgeLength);
return isNaN(d)&&(d=(edgeLength[0]+edgeLength[1])/2),{n1:nodes[edge.node1.dataIndex],
n2:nodes[edge.node2.dataIndex],d:d,curveness:edge.getModel().get("lineStyle.normal.curveness")||0
}}),coordSys=graphSeries.coordinateSystem,rect=coordSys.getBoundingRect(),forceInstance=forceHelper(nodes,edges,{
rect:rect,gravity:forceModel.get("gravity")}),oldStep=forceInstance.step;
forceInstance.step=function(cb){for(var i=0,l=nodes.length;i<l;i++)nodes[i].fixed&&vec2.copy(nodes[i].p,graph.getNodeByIndex(i).getLayout());
oldStep(function(nodes,edges,stopped){for(var i=0,l=nodes.length;i<l;i++)nodes[i].fixed||graph.getNodeByIndex(i).setLayout(nodes[i].p),
preservedPoints[nodeData.getId(i)]=nodes[i].p;for(var i=0,l=edges.length;i<l;i++){
var e=edges[i],edge=graph.getEdgeByIndex(i),p1=e.n1.p,p2=e.n2.p,points=edge.getLayout();
points=points?points.slice():[],points[0]=points[0]||[],points[1]=points[1]||[],
vec2.copy(points[0],p1),vec2.copy(points[1],p2),+e.curveness&&(points[2]=[(p1[0]+p2[0])/2-(p1[1]-p2[1])*e.curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*e.curveness]),
edge.setLayout(points)}cb&&cb(stopped)})},graphSeries.forceLayout=forceInstance,
graphSeries.preservedPoints=preservedPoints,forceInstance.step();
}else graphSeries.forceLayout=null})}},function(module,exports,__webpack_require__){
var vec2=__webpack_require__(10),scaleAndAdd=vec2.scaleAndAdd;
module.exports=function(nodes,edges,opts){for(var rect=opts.rect,width=rect.width,height=rect.height,center=[rect.x+width/2,rect.y+height/2],gravity=null==opts.gravity?.1:opts.gravity,i=0;i<nodes.length;i++){
var n=nodes[i];n.p||(n.p=vec2.create(width*(Math.random()-.5)+center[0],height*(Math.random()-.5)+center[1])),
n.pp=vec2.clone(n.p),n.edges=null}var friction=.6;return{warmUp:function(){
friction=.5},setFixed:function(idx){nodes[idx].fixed=!0},setUnfixed:function(idx){
nodes[idx].fixed=!1},step:function(cb){for(var v12=[],nLen=nodes.length,i=0;i<edges.length;i++){
var e=edges[i],n1=e.n1,n2=e.n2;vec2.sub(v12,n2.p,n1.p);var d=vec2.len(v12)-e.d,w=n2.w/(n1.w+n2.w);
vec2.normalize(v12,v12),!n1.fixed&&scaleAndAdd(n1.p,n1.p,v12,w*d*friction),
!n2.fixed&&scaleAndAdd(n2.p,n2.p,v12,-(1-w)*d*friction)}for(var i=0;i<nLen;i++){
var n=nodes[i];n.fixed||(vec2.sub(v12,center,n.p),vec2.scaleAndAdd(n.p,n.p,v12,gravity*friction));
}for(var i=0;i<nLen;i++)for(var n1=nodes[i],j=i+1;j<nLen;j++){
var n2=nodes[j];vec2.sub(v12,n2.p,n1.p);var d=vec2.len(v12);0===d&&(vec2.set(v12,Math.random()-.5,Math.random()-.5),
d=1);var repFact=(n1.rep+n2.rep)/d/d;!n1.fixed&&scaleAndAdd(n1.pp,n1.pp,v12,repFact),
!n2.fixed&&scaleAndAdd(n2.pp,n2.pp,v12,-repFact)}for(var v=[],i=0;i<nLen;i++){
var n=nodes[i];n.fixed||(vec2.sub(v,n.p,n.pp),vec2.scaleAndAdd(n.p,n.p,v,friction),
vec2.copy(n.pp,n.p))}friction=.992*friction,cb&&cb(nodes,edges,friction<.01);
}}}},function(module,exports,__webpack_require__){function getViewRect(seriesModel,api,aspect){
var option=seriesModel.getBoxLayoutParams();return option.aspect=aspect,
layout.getLayoutRect(option,{width:api.getWidth(),height:api.getHeight()
})}var View=__webpack_require__(171),layout=__webpack_require__(21),bbox=__webpack_require__(51);
module.exports=function(ecModel,api){var viewList=[];return ecModel.eachSeriesByType("graph",function(seriesModel){
var coordSysType=seriesModel.get("coordinateSystem");if(!coordSysType||"view"===coordSysType){
var data=seriesModel.getData(),positions=data.mapArray(function(idx){
var itemModel=data.getItemModel(idx);return[+itemModel.get("x"),+itemModel.get("y")];
}),min=[],max=[];bbox.fromPoints(positions,min,max),max[0]-min[0]===0&&(max[0]+=1,
min[0]-=1),max[1]-min[1]===0&&(max[1]+=1,min[1]-=1);var aspect=(max[0]-min[0])/(max[1]-min[1]),viewRect=getViewRect(seriesModel,api,aspect);
isNaN(aspect)&&(min=[viewRect.x,viewRect.y],max=[viewRect.x+viewRect.width,viewRect.y+viewRect.height]);
var bbWidth=max[0]-min[0],bbHeight=max[1]-min[1],viewWidth=viewRect.width,viewHeight=viewRect.height,viewCoordSys=seriesModel.coordinateSystem=new View;
viewCoordSys.zoomLimit=seriesModel.get("scaleLimit"),viewCoordSys.setBoundingRect(min[0],min[1],bbWidth,bbHeight),
viewCoordSys.setViewRect(viewRect.x,viewRect.y,viewWidth,viewHeight),
viewCoordSys.setCenter(seriesModel.get("center")),viewCoordSys.setZoom(seriesModel.get("zoom")),
viewList.push(viewCoordSys)}}),viewList}},function(module,exports,__webpack_require__){
__webpack_require__(219),__webpack_require__(220)},function(module,exports,__webpack_require__){
var List=__webpack_require__(98),SeriesModel=__webpack_require__(28),zrUtil=__webpack_require__(4),GaugeSeries=SeriesModel.extend({
type:"series.gauge",getInitialData:function(option,ecModel){var list=new List(["value"],this),dataOpt=option.data||[];
return zrUtil.isArray(dataOpt)||(dataOpt=[dataOpt]),list.initData(dataOpt),
list},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,
radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,
splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],
width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",
width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,
lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,
distance:5,textStyle:{color:"auto"}},pointer:{show:!0,length:"80%",
width:8},itemStyle:{normal:{color:"auto"}},title:{show:!0,offsetCenter:[0,"-40%"],
textStyle:{color:"#333",fontSize:15}},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",
borderWidth:0,borderColor:"#ccc",width:100,height:40,offsetCenter:[0,"40%"],
textStyle:{color:"auto",fontSize:30}}}});module.exports=GaugeSeries;
},function(module,exports,__webpack_require__){function parsePosition(seriesModel,api){
var center=seriesModel.get("center"),width=api.getWidth(),height=api.getHeight(),size=Math.min(width,height),cx=parsePercent(center[0],api.getWidth()),cy=parsePercent(center[1],api.getHeight()),r=parsePercent(seriesModel.get("radius"),size/2);
return{cx:cx,cy:cy,r:r}}function formatLabel(label,labelFormatter){
return labelFormatter&&("string"==typeof labelFormatter?label=labelFormatter.replace("{value}",null!=label?label:""):"function"==typeof labelFormatter&&(label=labelFormatter(label))),
label}var PointerPath=__webpack_require__(221),graphic=__webpack_require__(43),numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent,PI2=2*Math.PI,GaugeView=__webpack_require__(42).extend({
type:"gauge",render:function(seriesModel,ecModel,api){this.group.removeAll();
var colorList=seriesModel.get("axisLine.lineStyle.color"),posInfo=parsePosition(seriesModel,api);
this._renderMain(seriesModel,ecModel,api,colorList,posInfo)},
dispose:function(){},_renderMain:function(seriesModel,ecModel,api,colorList,posInfo){
for(var group=this.group,axisLineModel=seriesModel.getModel("axisLine"),lineStyleModel=axisLineModel.getModel("lineStyle"),clockwise=seriesModel.get("clockwise"),startAngle=-seriesModel.get("startAngle")/180*Math.PI,endAngle=-seriesModel.get("endAngle")/180*Math.PI,angleRangeSpan=(endAngle-startAngle)%PI2,prevEndAngle=startAngle,axisLineWidth=lineStyleModel.get("width"),i=0;i<colorList.length;i++){
var percent=Math.min(Math.max(colorList[i][0],0),1),endAngle=startAngle+angleRangeSpan*percent,sector=new graphic.Sector({
shape:{startAngle:prevEndAngle,endAngle:endAngle,cx:posInfo.cx,
cy:posInfo.cy,clockwise:clockwise,r0:posInfo.r-axisLineWidth,
r:posInfo.r},silent:!0});sector.setStyle({fill:colorList[i][1]
}),sector.setStyle(lineStyleModel.getLineStyle(["color","borderWidth","borderColor"])),
group.add(sector),prevEndAngle=endAngle}var getColor=function(percent){
if(percent<=0)return colorList[0][1];for(var i=0;i<colorList.length;i++)if(colorList[i][0]>=percent&&(0===i?0:colorList[i-1][0])<percent)return colorList[i][1];
return colorList[i-1][1]};if(!clockwise){var tmp=startAngle;startAngle=endAngle,
endAngle=tmp}this._renderTicks(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise),
this._renderPointer(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise),
this._renderTitle(seriesModel,ecModel,api,getColor,posInfo),this._renderDetail(seriesModel,ecModel,api,getColor,posInfo);
},_renderTicks:function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise){
for(var group=this.group,cx=posInfo.cx,cy=posInfo.cy,r=posInfo.r,minVal=+seriesModel.get("min"),maxVal=+seriesModel.get("max"),splitLineModel=seriesModel.getModel("splitLine"),tickModel=seriesModel.getModel("axisTick"),labelModel=seriesModel.getModel("axisLabel"),splitNumber=seriesModel.get("splitNumber"),subSplitNumber=tickModel.get("splitNumber"),splitLineLen=parsePercent(splitLineModel.get("length"),r),tickLen=parsePercent(tickModel.get("length"),r),angle=startAngle,step=(endAngle-startAngle)/splitNumber,subStep=step/subSplitNumber,splitLineStyle=splitLineModel.getModel("lineStyle").getLineStyle(),tickLineStyle=tickModel.getModel("lineStyle").getLineStyle(),textStyleModel=labelModel.getModel("textStyle"),i=0;i<=splitNumber;i++){
var unitX=Math.cos(angle),unitY=Math.sin(angle);if(splitLineModel.get("show")){
var splitLine=new graphic.Line({shape:{x1:unitX*r+cx,y1:unitY*r+cy,
x2:unitX*(r-splitLineLen)+cx,y2:unitY*(r-splitLineLen)+cy},style:splitLineStyle,
silent:!0});"auto"===splitLineStyle.stroke&&splitLine.setStyle({
stroke:getColor(i/splitNumber)}),group.add(splitLine)}if(labelModel.get("show")){
var label=formatLabel(numberUtil.round(i/splitNumber*(maxVal-minVal)+minVal),labelModel.get("formatter")),distance=labelModel.get("distance"),text=new graphic.Text({
style:{text:label,x:unitX*(r-splitLineLen-distance)+cx,y:unitY*(r-splitLineLen-distance)+cy,
fill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont(),
textVerticalAlign:unitY<-.4?"top":unitY>.4?"bottom":"middle",
textAlign:unitX<-.4?"left":unitX>.4?"right":"center"},silent:!0
});"auto"===text.style.fill&&text.setStyle({fill:getColor(i/splitNumber)
}),group.add(text)}if(tickModel.get("show")&&i!==splitNumber){
for(var j=0;j<=subSplitNumber;j++){var unitX=Math.cos(angle),unitY=Math.sin(angle),tickLine=new graphic.Line({
shape:{x1:unitX*r+cx,y1:unitY*r+cy,x2:unitX*(r-tickLen)+cx,y2:unitY*(r-tickLen)+cy
},silent:!0,style:tickLineStyle});"auto"===tickLineStyle.stroke&&tickLine.setStyle({
stroke:getColor((i+j/subSplitNumber)/splitNumber)}),group.add(tickLine),
angle+=subStep}angle-=subStep}else angle+=step}},_renderPointer:function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise){
var group=this.group,oldData=this._data;if(!seriesModel.get("pointer.show"))return void oldData.eachItemGraphicEl(function(el){
group.remove(el)});var valueExtent=[+seriesModel.get("min"),+seriesModel.get("max")],angleExtent=[startAngle,endAngle],data=seriesModel.getData();
data.diff(oldData).add(function(idx){var pointer=new PointerPath({
shape:{angle:startAngle}});graphic.updateProps(pointer,{shape:{
angle:numberUtil.linearMap(data.get("value",idx),valueExtent,angleExtent,!0)
}},seriesModel),group.add(pointer),data.setItemGraphicEl(idx,pointer);
}).update(function(newIdx,oldIdx){var pointer=oldData.getItemGraphicEl(oldIdx);
graphic.updateProps(pointer,{shape:{angle:numberUtil.linearMap(data.get("value",newIdx),valueExtent,angleExtent,!0)
}},seriesModel),group.add(pointer),data.setItemGraphicEl(newIdx,pointer);
}).remove(function(idx){var pointer=oldData.getItemGraphicEl(idx);
group.remove(pointer)}).execute(),data.eachItemGraphicEl(function(pointer,idx){
var itemModel=data.getItemModel(idx),pointerModel=itemModel.getModel("pointer");
pointer.setShape({x:posInfo.cx,y:posInfo.cy,width:parsePercent(pointerModel.get("width"),posInfo.r),
r:parsePercent(pointerModel.get("length"),posInfo.r)}),pointer.useStyle(itemModel.getModel("itemStyle.normal").getItemStyle()),
"auto"===pointer.style.fill&&pointer.setStyle("fill",getColor((data.get("value",idx)-valueExtent[0])/(valueExtent[1]-valueExtent[0]))),
graphic.setHoverStyle(pointer,itemModel.getModel("itemStyle.emphasis").getItemStyle());
}),this._data=data},_renderTitle:function(seriesModel,ecModel,api,getColor,posInfo){
var titleModel=seriesModel.getModel("title");if(titleModel.get("show")){
var textStyleModel=titleModel.getModel("textStyle"),offsetCenter=titleModel.get("offsetCenter"),x=posInfo.cx+parsePercent(offsetCenter[0],posInfo.r),y=posInfo.cy+parsePercent(offsetCenter[1],posInfo.r),text=new graphic.Text({
style:{x:x,y:y,text:seriesModel.getData().getName(0),fill:textStyleModel.getTextColor(),
textFont:textStyleModel.getFont(),textAlign:"center",textVerticalAlign:"middle"
}});this.group.add(text)}},_renderDetail:function(seriesModel,ecModel,api,getColor,posInfo){
var detailModel=seriesModel.getModel("detail"),minVal=+seriesModel.get("min"),maxVal=+seriesModel.get("max");
if(detailModel.get("show")){var textStyleModel=detailModel.getModel("textStyle"),offsetCenter=detailModel.get("offsetCenter"),x=posInfo.cx+parsePercent(offsetCenter[0],posInfo.r),y=posInfo.cy+parsePercent(offsetCenter[1],posInfo.r),width=parsePercent(detailModel.get("width"),posInfo.r),height=parsePercent(detailModel.get("height"),posInfo.r),value=seriesModel.getData().get("value",0),rect=new graphic.Rect({
shape:{x:x-width/2,y:y-height/2,width:width,height:height},style:{
text:formatLabel(value,detailModel.get("formatter")),fill:detailModel.get("backgroundColor"),
textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()
}});"auto"===rect.style.textFill&&rect.setStyle("textFill",getColor(numberUtil.linearMap(value,[minVal,maxVal],[0,1],!0))),
rect.setStyle(detailModel.getItemStyle(["color"])),this.group.add(rect);
}}});module.exports=GaugeView},function(module,exports,__webpack_require__){
module.exports=__webpack_require__(45).extend({type:"echartsGaugePointer",
shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(ctx,shape){
var mathCos=Math.cos,mathSin=Math.sin,r=shape.r,width=shape.width,angle=shape.angle,x=shape.x-mathCos(angle)*width*(width>=r/3?1:2),y=shape.y-mathSin(angle)*width*(width>=r/3?1:2);
angle=shape.angle-Math.PI/2,ctx.moveTo(x,y),ctx.lineTo(shape.x+mathCos(angle)*width,shape.y+mathSin(angle)*width),
ctx.lineTo(shape.x+mathCos(shape.angle)*r,shape.y+mathSin(shape.angle)*r),
ctx.lineTo(shape.x-mathCos(angle)*width,shape.y-mathSin(angle)*width),
ctx.lineTo(x,y)}})},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);
__webpack_require__(223),__webpack_require__(224),echarts.registerVisual(zrUtil.curry(__webpack_require__(146),"funnel")),
echarts.registerLayout(__webpack_require__(225)),echarts.registerProcessor(zrUtil.curry(__webpack_require__(149),"funnel"));
},function(module,exports,__webpack_require__){"use strict";var List=__webpack_require__(98),modelUtil=__webpack_require__(5),completeDimensions=__webpack_require__(103),FunnelSeries=__webpack_require__(1).extendSeriesModel({
type:"series.funnel",init:function(option){FunnelSeries.superApply(this,"init",arguments),
this.legendDataProvider=function(){return this.getRawData()},
this._defaultLabelLine(option)},getInitialData:function(option,ecModel){
var dimensions=completeDimensions(["value"],option.data),list=new List(dimensions,this);
return list.initData(option.data),list},_defaultLabelLine:function(option){
modelUtil.defaultEmphasis(option.labelLine,["show"]);var labelLineNormalOpt=option.labelLine.normal,labelLineEmphasisOpt=option.labelLine.emphasis;
labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.normal.show,
labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.label.emphasis.show;
},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,
right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",
gap:0,funnelAlign:"center",label:{normal:{show:!0,position:"outer"
},emphasis:{show:!0}},labelLine:{normal:{show:!0,length:20,lineStyle:{
width:1,type:"solid"}},emphasis:{}},itemStyle:{normal:{borderColor:"#fff",
borderWidth:1},emphasis:{}}}});module.exports=FunnelSeries},function(module,exports,__webpack_require__){
function FunnelPiece(data,idx){function onEmphasis(){labelLine.ignore=labelLine.hoverIgnore,
text.ignore=text.hoverIgnore}function onNormal(){labelLine.ignore=labelLine.normalIgnore,
text.ignore=text.normalIgnore}graphic.Group.call(this);var polygon=new graphic.Polygon,labelLine=new graphic.Polyline,text=new graphic.Text;
this.add(polygon),this.add(labelLine),this.add(text),this.updateData(data,idx,!0),
this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal);
}function getLabelStyle(data,idx,state,labelModel){var textStyleModel=labelModel.getModel("textStyle"),position=labelModel.get("position"),isLabelInside="inside"===position||"inner"===position||"center"===position;
return{fill:textStyleModel.getTextColor()||(isLabelInside?"#fff":data.getItemVisual(idx,"color")),
textFont:textStyleModel.getFont(),text:zrUtil.retrieve(data.hostModel.getFormattedLabel(idx,state),data.getName(idx))
}}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),funnelPieceProto=FunnelPiece.prototype,opacityAccessPath=["itemStyle","normal","opacity"];
funnelPieceProto.updateData=function(data,idx,firstCreate){var polygon=this.childAt(0),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),opacity=data.getItemModel(idx).get(opacityAccessPath);
opacity=null==opacity?1:opacity,polygon.useStyle({}),firstCreate?(polygon.setShape({
points:layout.points}),polygon.setStyle({opacity:0}),graphic.initProps(polygon,{
style:{opacity:opacity}},seriesModel,idx)):graphic.updateProps(polygon,{
style:{opacity:opacity},shape:{points:layout.points}},seriesModel,idx);
var itemStyleModel=itemModel.getModel("itemStyle"),visualColor=data.getItemVisual(idx,"color");
polygon.setStyle(zrUtil.defaults({lineJoin:"round",fill:visualColor
},itemStyleModel.getModel("normal").getItemStyle(["opacity"]))),
polygon.hoverStyle=itemStyleModel.getModel("emphasis").getItemStyle(),
this._updateLabel(data,idx),graphic.setHoverStyle(this)},funnelPieceProto._updateLabel=function(data,idx){
var labelLine=this.childAt(1),labelText=this.childAt(2),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),labelLayout=layout.label,visualColor=data.getItemVisual(idx,"color");
graphic.updateProps(labelLine,{shape:{points:labelLayout.linePoints||labelLayout.linePoints
}},seriesModel,idx),graphic.updateProps(labelText,{style:{x:labelLayout.x,
y:labelLayout.y}},seriesModel,idx),labelText.attr({style:{textAlign:labelLayout.textAlign,
textVerticalAlign:labelLayout.verticalAlign,textFont:labelLayout.font
},rotation:labelLayout.rotation,origin:[labelLayout.x,labelLayout.y],
z2:10});var labelModel=itemModel.getModel("label.normal"),labelHoverModel=itemModel.getModel("label.emphasis"),labelLineModel=itemModel.getModel("labelLine.normal"),labelLineHoverModel=itemModel.getModel("labelLine.emphasis");
labelText.setStyle(getLabelStyle(data,idx,"normal",labelModel)),
labelText.ignore=labelText.normalIgnore=!labelModel.get("show"),
labelText.hoverIgnore=!labelHoverModel.get("show"),labelLine.ignore=labelLine.normalIgnore=!labelLineModel.get("show"),
labelLine.hoverIgnore=!labelLineHoverModel.get("show"),labelLine.setStyle({
stroke:visualColor}),labelLine.setStyle(labelLineModel.getModel("lineStyle").getLineStyle()),
labelText.hoverStyle=getLabelStyle(data,idx,"emphasis",labelHoverModel),
labelLine.hoverStyle=labelLineHoverModel.getModel("lineStyle").getLineStyle();
},zrUtil.inherits(FunnelPiece,graphic.Group);var Funnel=__webpack_require__(42).extend({
type:"funnel",render:function(seriesModel,ecModel,api){var data=seriesModel.getData(),oldData=this._data,group=this.group;
data.diff(oldData).add(function(idx){var funnelPiece=new FunnelPiece(data,idx);
data.setItemGraphicEl(idx,funnelPiece),group.add(funnelPiece);
}).update(function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);
piePiece.updateData(data,newIdx),group.add(piePiece),data.setItemGraphicEl(newIdx,piePiece);
}).remove(function(idx){var piePiece=oldData.getItemGraphicEl(idx);
group.remove(piePiece)}).execute(),this._data=data},remove:function(){
this.group.removeAll(),this._data=null},dispose:function(){}});
module.exports=Funnel},function(module,exports,__webpack_require__){
function getViewRect(seriesModel,api){return layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{
width:api.getWidth(),height:api.getHeight()})}function getSortedIndices(data,sort){
for(var valueArr=data.mapArray("value",function(val){return val;
}),indices=[],isAscending="ascending"===sort,i=0,len=data.count();i<len;i++)indices[i]=i;
return indices.sort(function(a,b){return isAscending?valueArr[a]-valueArr[b]:valueArr[b]-valueArr[a];
}),indices}function labelLayout(data){data.each(function(idx){
var textAlign,textX,textY,linePoints,itemModel=data.getItemModel(idx),labelModel=itemModel.getModel("label.normal"),labelPosition=labelModel.get("position"),labelLineModel=itemModel.getModel("labelLine.normal"),layout=data.getItemLayout(idx),points=layout.points,isLabelInside="inner"===labelPosition||"inside"===labelPosition||"center"===labelPosition;
if(isLabelInside)textX=(points[0][0]+points[1][0]+points[2][0]+points[3][0])/4,
textY=(points[0][1]+points[1][1]+points[2][1]+points[3][1])/4,
textAlign="center",linePoints=[[textX,textY],[textX,textY]];else{
var x1,y1,x2,labelLineLen=labelLineModel.get("length");"left"===labelPosition?(x1=(points[3][0]+points[0][0])/2,
y1=(points[3][1]+points[0][1])/2,x2=x1-labelLineLen,textX=x2-5,
textAlign="right"):(x1=(points[1][0]+points[2][0])/2,y1=(points[1][1]+points[2][1])/2,
x2=x1+labelLineLen,textX=x2+5,textAlign="left");var y2=y1;linePoints=[[x1,y1],[x2,y2]],
textY=y2}layout.label={linePoints:linePoints,x:textX,y:textY,
verticalAlign:"middle",textAlign:textAlign,inside:isLabelInside
}})}var layout=__webpack_require__(21),number=__webpack_require__(7),parsePercent=number.parsePercent;
module.exports=function(ecModel,api,payload){ecModel.eachSeriesByType("funnel",function(seriesModel){
var data=seriesModel.getData(),sort=seriesModel.get("sort"),viewRect=getViewRect(seriesModel,api),indices=getSortedIndices(data,sort),sizeExtent=[parsePercent(seriesModel.get("minSize"),viewRect.width),parsePercent(seriesModel.get("maxSize"),viewRect.width)],dataExtent=data.getDataExtent("value"),min=seriesModel.get("min"),max=seriesModel.get("max");
null==min&&(min=Math.min(dataExtent[0],0)),null==max&&(max=dataExtent[1]);
var funnelAlign=seriesModel.get("funnelAlign"),gap=seriesModel.get("gap"),itemHeight=(viewRect.height-gap*(data.count()-1))/data.count(),y=viewRect.y,getLinePoints=function(idx,offY){
var x0,val=data.get("value",idx)||0,itemWidth=number.linearMap(val,[min,max],sizeExtent,!0);
switch(funnelAlign){case"left":x0=viewRect.x;break;case"center":
x0=viewRect.x+(viewRect.width-itemWidth)/2;break;case"right":
x0=viewRect.x+viewRect.width-itemWidth}return[[x0,offY],[x0+itemWidth,offY]];
};"ascending"===sort&&(itemHeight=-itemHeight,gap=-gap,y+=viewRect.height,
indices=indices.reverse());for(var i=0;i<indices.length;i++){
var idx=indices[i],nextIdx=indices[i+1],start=getLinePoints(idx,y),end=getLinePoints(nextIdx,y+itemHeight);
y+=itemHeight+gap,data.setItemLayout(idx,{points:start.concat(end.slice().reverse())
})}labelLayout(data)})}},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1);__webpack_require__(227),__webpack_require__(238),
__webpack_require__(239),echarts.registerVisual(__webpack_require__(240));
},function(module,exports,__webpack_require__){__webpack_require__(228),
__webpack_require__(231),__webpack_require__(233);var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4),CLICK_THRESHOLD=5;
echarts.extendComponentView({type:"parallel",render:function(parallelModel,ecModel,api){
var zr=api.getZr();if(!this.__onMouseDown){var mousedownPoint;
zr.on("mousedown",this.__onMouseDown=function(e){mousedownPoint=[e.offsetX,e.offsetY];
}),zr.on("mouseup",this.__onMouseUp=function(e){var point=[e.offsetX,e.offsetY],dist=Math.pow(mousedownPoint[0]-point[0],2)+Math.pow(mousedownPoint[1]-point[1],2);
if(parallelModel.get("axisExpandable")&&!(dist>CLICK_THRESHOLD)){
var coordSys=parallelModel.coordinateSystem,closestDim=coordSys.findClosestAxisDim(point);
if(closestDim){var axisIndex=zrUtil.indexOf(coordSys.dimensions,closestDim);
api.dispatchAction({type:"parallelAxisExpand",axisExpandCenter:axisIndex
})}}})}},dispose:function(ecModel,api){api.getZr().off(this.__onMouseDown),
api.getZr().off(this.__onMouseUp)}}),echarts.registerPreprocessor(__webpack_require__(237));
},function(module,exports,__webpack_require__){function create(ecModel,api){
var coordSysList=[];return ecModel.eachComponent("parallel",function(parallelModel,idx){
var coordSys=new Parallel(parallelModel,ecModel,api);coordSys.name="parallel_"+idx,
coordSys.resize(parallelModel,api),parallelModel.coordinateSystem=coordSys,
coordSys.model=parallelModel,coordSysList.push(coordSys)}),ecModel.eachSeries(function(seriesModel){
if("parallel"===seriesModel.get("coordinateSystem")){var parallelModel=ecModel.queryComponents({
mainType:"parallel",index:seriesModel.get("parallelIndex"),id:seriesModel.get("parallelId")
})[0];seriesModel.coordinateSystem=parallelModel.coordinateSystem;
}}),coordSysList}var Parallel=__webpack_require__(229);__webpack_require__(26).register("parallel",{
create:create})},function(module,exports,__webpack_require__){
function Parallel(parallelModel,ecModel,api){this._axesMap={},
this._axesLayout={},this.dimensions=parallelModel.dimensions,
this._rect,this._model=parallelModel,this._init(parallelModel,ecModel,api);
}var layout=__webpack_require__(21),axisHelper=__webpack_require__(115),zrUtil=__webpack_require__(4),ParallelAxis=__webpack_require__(230),graphic=__webpack_require__(43),matrix=__webpack_require__(11),each=zrUtil.each,PI=Math.PI;
Parallel.prototype={type:"parallel",constructor:Parallel,_init:function(parallelModel,ecModel,api){
var dimensions=parallelModel.dimensions,parallelAxisIndex=parallelModel.parallelAxisIndex;
each(dimensions,function(dim,idx){var axisIndex=parallelAxisIndex[idx],axisModel=ecModel.getComponent("parallelAxis",axisIndex),axis=this._axesMap[dim]=new ParallelAxis(dim,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisIndex),isCategory="category"===axis.type;
axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),
axisModel.axis=axis,axis.model=axisModel},this)},update:function(ecModel,api){
this._updateAxesFromSeries(this._model,ecModel)},_updateAxesFromSeries:function(parallelModel,ecModel){
ecModel.eachSeries(function(seriesModel){if(parallelModel.contains(seriesModel,ecModel)){
var data=seriesModel.getData();each(this.dimensions,function(dim){
var axis=this._axesMap[dim];axis.scale.unionExtentFromData(data,dim),
axisHelper.niceScaleExtent(axis,axis.model)},this)}},this)},resize:function(parallelModel,api){
this._rect=layout.getLayoutRect(parallelModel.getBoxLayoutParams(),{
width:api.getWidth(),height:api.getHeight()}),this._layoutAxes(parallelModel);
},getRect:function(){return this._rect},_layoutAxes:function(parallelModel){
var rect=this._rect,layout=parallelModel.get("layout"),axes=this._axesMap,dimensions=this.dimensions,size=[rect.width,rect.height],sizeIdx="horizontal"===layout?0:1,layoutLength=size[sizeIdx],axisLength=size[1-sizeIdx],axisExtent=[0,axisLength];
each(axes,function(axis){var idx=axis.inverse?1:0;axis.setExtent(axisExtent[idx],axisExtent[1-idx]);
});var axisExpandWindow,axisExpandable=parallelModel.get("axisExpandable"),axisExpandWidth=parallelModel.get("axisExpandWidth"),axisExpandCenter=parallelModel.get("axisExpandCenter"),axisExpandCount=parallelModel.get("axisExpandCount")||0;
if(null!=axisExpandCenter){var left=Math.max(0,Math.floor(axisExpandCenter-(axisExpandCount-1)/2)),right=left+axisExpandCount-1;
right>=dimensions.length&&(right=dimensions.length-1,left=Math.max(0,Math.floor(right-axisExpandCount+1))),
axisExpandWindow=[left,right]}var calcPos=axisExpandable&&axisExpandWindow&&axisExpandWidth?function(axisIndex,layoutLength,axisCount){
var position,peekIntervalCount=axisExpandWindow[1]-axisExpandWindow[0],otherWidth=(layoutLength-axisExpandWidth*peekIntervalCount)/(axisCount-1-peekIntervalCount);
return position=axisIndex<axisExpandWindow[0]?(axisIndex-1)*otherWidth:axisIndex<=axisExpandWindow[1]?axisExpandWindow[0]*otherWidth+(axisIndex-axisExpandWindow[0])*axisExpandWidth:axisIndex===axisCount-1?layoutLength:axisExpandWindow[0]*otherWidth+peekIntervalCount*axisExpandWidth+(axisIndex-axisExpandWindow[1])*otherWidth,
{position:position,axisNameAvailableWidth:axisExpandWindow[0]<axisIndex&&axisIndex<axisExpandWindow[1]?axisExpandWidth:otherWidth
}}:function(axisIndex,layoutLength,axisCount){var step=layoutLength/(axisCount-1);
return{position:step*axisIndex,axisNameAvailableWidth:step}};each(dimensions,function(dim,idx){
var posInfo=calcPos(idx,layoutLength,dimensions.length),positionTable={
horizontal:{x:posInfo.position,y:axisLength},vertical:{x:0,y:posInfo.position
}},rotationTable={horizontal:PI/2,vertical:0},position=[positionTable[layout].x+rect.x,positionTable[layout].y+rect.y],rotation=rotationTable[layout],transform=matrix.create();
matrix.rotate(transform,transform,rotation),matrix.translate(transform,transform,position),
this._axesLayout[dim]={position:position,rotation:rotation,transform:transform,
axisNameAvailableWidth:posInfo.axisNameAvailableWidth,tickDirection:1,
labelDirection:1,axisExpandWindow:axisExpandWindow}},this)},getAxis:function(dim){
return this._axesMap[dim]},dataToPoint:function(value,dim){return this.axisCoordToPoint(this._axesMap[dim].dataToCoord(value),dim);
},eachActiveState:function(data,callback,context){for(var dimensions=this.dimensions,axesMap=this._axesMap,hasActiveSet=this.hasAxisbrushed(),i=0,len=data.count();i<len;i++){
var activeState,values=data.getValues(dimensions,i);if(hasActiveSet){
activeState="active";for(var j=0,lenj=dimensions.length;j<lenj;j++){
var dimName=dimensions[j],state=axesMap[dimName].model.getActiveState(values[j],j);
if("inactive"===state){activeState="inactive";break}}}else activeState="normal";
callback.call(context,activeState,i)}},hasAxisbrushed:function(){
for(var dimensions=this.dimensions,axesMap=this._axesMap,hasActiveSet=!1,j=0,lenj=dimensions.length;j<lenj;j++)"normal"!==axesMap[dimensions[j]].model.getActiveState()&&(hasActiveSet=!0);
return hasActiveSet},axisCoordToPoint:function(coord,dim){var axisLayout=this._axesLayout[dim];
return graphic.applyTransform([coord,0],axisLayout.transform);
},getAxisLayout:function(dim){return zrUtil.clone(this._axesLayout[dim]);
},findClosestAxisDim:function(point){var axisDim,minDist=1/0;return zrUtil.each(this._axesLayout,function(axisLayout,dim){
var localPoint=graphic.applyTransform(point,axisLayout.transform,!0),extent=this._axesMap[dim].getExtent();
if(!(localPoint[0]<extent[0]||localPoint[0]>extent[1])){var dist=Math.abs(localPoint[1]);
dist<minDist&&(minDist=dist,axisDim=dim)}},this),axisDim}},module.exports=Parallel;
},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Axis=__webpack_require__(124),ParallelAxis=function(dim,scale,coordExtent,axisType,axisIndex){
Axis.call(this,dim,scale,coordExtent),this.type=axisType||"value",
this.axisIndex=axisIndex};ParallelAxis.prototype={constructor:ParallelAxis,
model:null},zrUtil.inherits(ParallelAxis,Axis),module.exports=ParallelAxis;
},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Component=__webpack_require__(19);
__webpack_require__(232),Component.extend({type:"parallel",dependencies:["parallelAxis"],
coordinateSystem:null,dimensions:null,parallelAxisIndex:null,
layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,
bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,
axisExpandCount:0,axisExpandWidth:50,parallelAxisDefault:null
},init:function(){Component.prototype.init.apply(this,arguments),
this.mergeOption({})},mergeOption:function(newOption){var thisOption=this.option;
newOption&&zrUtil.merge(thisOption,newOption,!0),this._initDimensions();
},contains:function(model,ecModel){var parallelIndex=model.get("parallelIndex");
return null!=parallelIndex&&ecModel.getComponent("parallel",parallelIndex)===this;
},setAxisExpand:function(opt){zrUtil.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth"],function(name){
opt.hasOwnProperty(name)&&(this.option[name]=opt[name])},this);
},_initDimensions:function(){var dimensions=this.dimensions=[],parallelAxisIndex=this.parallelAxisIndex=[],axisModels=zrUtil.filter(this.dependentModels.parallelAxis,function(axisModel){
return axisModel.get("parallelIndex")===this.componentIndex});
zrUtil.each(axisModels,function(axisModel){dimensions.push("dim"+axisModel.get("dim")),
parallelAxisIndex.push(axisModel.componentIndex)})}})},function(module,exports,__webpack_require__){
function getAxisType(axisName,option){return option.type||(option.data?"category":"value");
}var ComponentModel=__webpack_require__(19),zrUtil=__webpack_require__(4),makeStyleMapper=__webpack_require__(15),axisModelCreator=__webpack_require__(128),numberUtil=__webpack_require__(7),AxisModel=ComponentModel.extend({
type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){
return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]]).call(this.getModel("areaSelectStyle"));
},setActiveIntervals:function(intervals){var activeIntervals=this.activeIntervals=zrUtil.clone(intervals);
if(activeIntervals)for(var i=activeIntervals.length-1;i>=0;i--)numberUtil.asc(activeIntervals[i]);
},getActiveState:function(value){var activeIntervals=this.activeIntervals;
if(!activeIntervals.length)return"normal";if(null==value)return"inactive";
for(var i=0,len=activeIntervals.length;i<len;i++)if(activeIntervals[i][0]<=value&&value<=activeIntervals[i][1])return"active";
return"inactive"}}),defaultOption={type:"value",dim:null,areaSelectStyle:{
width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",
opacity:.3},realtime:!0,z:10};zrUtil.merge(AxisModel.prototype,__webpack_require__(130)),
axisModelCreator("parallel",AxisModel,getAxisType,defaultOption),
module.exports=AxisModel},function(module,exports,__webpack_require__){
__webpack_require__(228),__webpack_require__(234),__webpack_require__(235);
},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),actionInfo={
type:"axisAreaSelect",event:"axisAreaSelected",update:"updateVisual"
};echarts.registerAction(actionInfo,function(payload,ecModel){
ecModel.eachComponent({mainType:"parallelAxis",query:payload},function(parallelAxisModel){
parallelAxisModel.axis.model.setActiveIntervals(payload.intervals);
})}),echarts.registerAction("parallelAxisExpand",function(payload,ecModel){
ecModel.eachComponent({mainType:"parallel",query:payload},function(parallelModel){
parallelModel.setAxisExpand(payload)})})},function(module,exports,__webpack_require__){
function fromAxisAreaSelect(axisModel,ecModel,payload){return payload&&"axisAreaSelect"===payload.type&&ecModel.findComponents({
mainType:"parallelAxis",query:payload})[0]===axisModel}var zrUtil=__webpack_require__(4),AxisBuilder=__webpack_require__(133),BrushController=__webpack_require__(236),graphic=__webpack_require__(43),elementList=["axisLine","axisLabel","axisTick","axisName"],AxisView=__webpack_require__(1).extendComponentView({
type:"parallelAxis",init:function(ecModel,api){AxisView.superApply(this,"init",arguments),
(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this));
},render:function(axisModel,ecModel,api,payload){if(!fromAxisAreaSelect(axisModel,ecModel,payload)){
this.axisModel=axisModel,this.api=api,this.group.removeAll();var oldAxisGroup=this._axisGroup;
if(this._axisGroup=new graphic.Group,this.group.add(this._axisGroup),
axisModel.get("show")){var axisLabelShow,coordSys=ecModel.getComponent("parallel",axisModel.get("parallelIndex")).coordinateSystem,areaSelectStyle=axisModel.getAreaSelectStyle(),areaWidth=areaSelectStyle.width,dim=axisModel.axis.dim,axisLayout=coordSys.getAxisLayout(dim),axisIndex=zrUtil.indexOf(coordSys.dimensions,dim),axisExpandWindow=axisLayout.axisExpandWindow;
axisExpandWindow&&(axisIndex<=axisExpandWindow[0]||axisIndex>=axisExpandWindow[1])&&(axisLabelShow=!1);
var builderOpt=zrUtil.extend({axisLabelShow:axisLabelShow,strokeContainThreshold:areaWidth
},axisLayout),axisBuilder=new AxisBuilder(axisModel,builderOpt);
zrUtil.each(elementList,axisBuilder.add,axisBuilder),this._axisGroup.add(axisBuilder.getGroup()),
this._refreshBrushController(builderOpt,areaSelectStyle,axisModel,areaWidth),
graphic.groupTransition(oldAxisGroup,this._axisGroup,axisModel);
}}},_refreshBrushController:function(builderOpt,areaSelectStyle,axisModel,areaWidth){
var axis=axisModel.axis,coverInfoList=zrUtil.map(axisModel.activeIntervals,function(interval){
return{brushType:"lineX",panelId:"pl",range:[axis.dataToCoord(interval[0],!0),axis.dataToCoord(interval[1],!0)]
}}),extent=axis.getExtent(),extentLen=extent[1]-extent[0],extra=Math.min(30,.1*Math.abs(extentLen)),rect=graphic.BoundingRect.create({
x:extent[0],y:-areaWidth/2,width:extentLen,height:areaWidth});
rect.x-=extra,rect.width+=2*extra,this._brushController.mount({
enableGlobalPan:!0,rotation:builderOpt.rotation,position:builderOpt.position
}).setPanels([{panelId:"pl",rect:rect}]).enableBrush({brushType:"lineX",
brushStyle:areaSelectStyle,removeOnClick:!0}).updateCovers(coverInfoList);
},_onBrush:function(coverInfoList,opt){var axisModel=this.axisModel,axis=axisModel.axis,intervals=zrUtil.map(coverInfoList,function(coverInfo){
return[axis.coordToData(coverInfo.range[0],!0),axis.coordToData(coverInfo.range[1],!0)];
});(!axisModel.option.realtime===opt.isEnd||opt.removeOnClick)&&this.api.dispatchAction({
type:"axisAreaSelect",parallelAxisId:axisModel.id,intervals:intervals
})},dispose:function(){this._brushController.dispose()}});module.exports=AxisView;
},function(module,exports,__webpack_require__){function BrushController(zr){
zrUtil.assert(zr),Eventful.call(this),this._zr=zr,this.group=new graphic.Group,
this._brushType,this._brushOption,this._panels,this._track=[],
this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,
this._enableGlobalPan,this._mounted,this._uid="brushController_"+baseUID++,
this._handlers={},each(mouseHandlers,function(handler,eventName){
this._handlers[eventName]=zrUtil.bind(handler,this)},this)}function doEnableBrush(controller,brushOption){
var zr=controller._zr;controller._enableGlobalPan||interactionMutex.take(zr,MUTEX_RESOURCE_KEY,controller._uid),
each(controller._handlers,function(handler,eventName){zr.on(eventName,handler);
}),controller._brushType=brushOption.brushType,controller._brushOption=zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT),brushOption,!0);
}function doDisableBrush(controller){var zr=controller._zr;interactionMutex.release(zr,MUTEX_RESOURCE_KEY,controller._uid),
each(controller._handlers,function(handler,eventName){zr.off(eventName,handler);
}),controller._brushType=controller._brushOption=null}function createCover(controller,brushOption){
var cover=coverRenderers[brushOption.brushType].createCover(controller,brushOption);
return updateZ(cover),cover.__brushOption=brushOption,controller.group.add(cover),
cover}function endCreating(controller,creatingCover){var coverRenderer=getCoverRenderer(creatingCover);
return coverRenderer.endCreating&&(coverRenderer.endCreating(controller,creatingCover),
updateZ(creatingCover)),creatingCover}function updateCoverShape(controller,cover){
var brushOption=cover.__brushOption;getCoverRenderer(cover).updateCoverShape(controller,cover,brushOption.range,brushOption);
}function updateZ(group){group.traverse(function(el){el.z=COVER_Z,
el.z2=COVER_Z})}function updateCoverAfterCreation(controller,cover){
getCoverRenderer(cover).updateCommon(controller,cover),updateCoverShape(controller,cover);
}function getCoverRenderer(cover){return coverRenderers[cover.__brushOption.brushType];
}function getPanelByPoint(controller,x,y){var panels=controller._panels;
if(!panels)return!0;var panel;return each(panels,function(pn){
pn.contain(x,y)&&(panel=pn)}),panel}function getPanelByCover(controller,cover){
var panels=controller._panels;if(!panels)return!0;var panelId=cover.__brushOption.panelId;
return null==panelId||panels[panelId]}function clearCovers(controller){
var covers=controller._covers,originalLength=covers.length;return each(covers,function(cover){
controller.group.remove(cover)},controller),covers.length=0,!!originalLength;
}function trigger(controller,opt){var areas=map(controller._covers,function(cover){
var brushOption=cover.__brushOption,range=zrUtil.clone(brushOption.range);
return{brushType:brushOption.brushType,panelId:brushOption.panelId,
range:range}});controller.trigger("brush",areas,{isEnd:!!opt.isEnd,
removeOnClick:!!opt.removeOnClick})}function shouldShowCover(controller){
var track=controller._track;if(!track.length)return!1;var p2=track[track.length-1],p1=track[0],dx=p2[0]-p1[0],dy=p2[1]-p1[1],dist=mathPow(dx*dx+dy*dy,.5);
return dist>UNSELECT_THRESHOLD}function getTrackEnds(track){var tail=track.length-1;
return tail<0&&(tail=0),[track[0],track[tail]]}function createBaseRectCover(doDrift,controller,brushOption,edgeNames){
var cover=new graphic.Group;return cover.add(new graphic.Rect({
name:"main",style:makeStyle(brushOption),silent:!0,draggable:!0,
cursor:"move",drift:curry(doDrift,controller,cover,"nswe"),ondragend:curry(trigger,controller,{
isEnd:!0})})),each(edgeNames,function(name){cover.add(new graphic.Rect({
name:name,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,
drift:curry(doDrift,controller,cover,name),ondragend:curry(trigger,controller,{
isEnd:!0})}))}),cover}function updateBaseRect(controller,cover,localRange,brushOption){
var lineWidth=brushOption.brushStyle.lineWidth||0,handleSize=mathMax(lineWidth,MIN_RESIZE_LINE_WIDTH),x=localRange[0][0],y=localRange[1][0],xa=x-lineWidth/2,ya=y-lineWidth/2,x2=localRange[0][1],y2=localRange[1][1],x2a=x2-handleSize+lineWidth/2,y2a=y2-handleSize+lineWidth/2,width=x2-x,height=y2-y,widtha=width+lineWidth,heighta=height+lineWidth;
updateRectShape(controller,cover,"main",x,y,width,height),brushOption.transformable&&(updateRectShape(controller,cover,"w",xa,ya,handleSize,heighta),
updateRectShape(controller,cover,"e",x2a,ya,handleSize,heighta),
updateRectShape(controller,cover,"n",xa,ya,widtha,handleSize),
updateRectShape(controller,cover,"s",xa,y2a,widtha,handleSize),
updateRectShape(controller,cover,"nw",xa,ya,handleSize,handleSize),
updateRectShape(controller,cover,"ne",x2a,ya,handleSize,handleSize),
updateRectShape(controller,cover,"sw",xa,y2a,handleSize,handleSize),
updateRectShape(controller,cover,"se",x2a,y2a,handleSize,handleSize));
}function updateCommon(controller,cover){var brushOption=cover.__brushOption,transformable=brushOption.transformable,mainEl=cover.childAt(0);
mainEl.useStyle(makeStyle(brushOption)),mainEl.attr({silent:!transformable,
cursor:transformable?"move":"default"}),each(["w","e","n","s","se","sw","ne","nw"],function(name){
var el=cover.childOfName(name),globalDir=getGlobalDirection(controller,name);
el&&el.attr({silent:!transformable,invisible:!transformable,cursor:transformable?CURSOR_MAP[globalDir]+"-resize":null
})})}function updateRectShape(controller,cover,name,x,y,w,h){
var el=cover.childOfName(name);el&&el.setShape(pointsToRect(clipByPanel(controller,cover,[[x,y],[x+w,y+h]])));
}function makeStyle(brushOption){return zrUtil.defaults({strokeNoScale:!0
},brushOption.brushStyle)}function formatRectRange(x,y,x2,y2){
var min=[mathMin(x,x2),mathMin(y,y2)],max=[mathMax(x,x2),mathMax(y,y2)];
return[[min[0],max[0]],[min[1],max[1]]]}function getTransform(controller){
return graphic.getTransform(controller.group)}function getGlobalDirection(controller,localDirection){
if(localDirection.length>1){localDirection=localDirection.split("");
var globalDir=[getGlobalDirection(controller,localDirection[0]),getGlobalDirection(controller,localDirection[1])];
return("e"===globalDir[0]||"w"===globalDir[0])&&globalDir.reverse(),
globalDir.join("")}var map={w:"left",e:"right",n:"top",s:"bottom"
},inverseMap={left:"w",right:"e",top:"n",bottom:"s"},globalDir=graphic.transformDirection(map[localDirection],getTransform(controller));
return inverseMap[globalDir]}function driftRect(toRectRange,fromRectRange,controller,cover,name,dx,dy,e){
var brushOption=cover.__brushOption,rectRange=toRectRange(brushOption.range),localDelta=toLocalDelta(controller,dx,dy);
each(name.split(""),function(namePart){var ind=DIRECTION_MAP[namePart];
rectRange[ind[0]][ind[1]]+=localDelta[ind[0]]}),brushOption.range=fromRectRange(formatRectRange(rectRange[0][0],rectRange[1][0],rectRange[0][1],rectRange[1][1])),
updateCoverAfterCreation(controller,cover),trigger(controller,{
isEnd:!1})}function driftPolygon(controller,cover,dx,dy,e){var range=cover.__brushOption.range,localDelta=toLocalDelta(controller,dx,dy);
each(range,function(point){point[0]+=localDelta[0],point[1]+=localDelta[1];
}),updateCoverAfterCreation(controller,cover),trigger(controller,{
isEnd:!1})}function toLocalDelta(controller,dx,dy){var thisGroup=controller.group,localD=thisGroup.transformCoordToLocal(dx,dy),localZero=thisGroup.transformCoordToLocal(0,0);
return[localD[0]-localZero[0],localD[1]-localZero[1]]}function clipByPanel(controller,cover,data){
var panel=getPanelByCover(controller,cover);if(panel===!0)return zrUtil.clone(data);
var panelRect=panel.getBoundingRect();return zrUtil.map(data,function(point){
var x=point[0];x=mathMax(x,panelRect.x),x=mathMin(x,panelRect.x+panelRect.width);
var y=point[1];return y=mathMax(y,panelRect.y),y=mathMin(y,panelRect.y+panelRect.height),
[x,y]})}function pointsToRect(points){var xmin=mathMin(points[0][0],points[1][0]),ymin=mathMin(points[0][1],points[1][1]),xmax=mathMax(points[0][0],points[1][0]),ymax=mathMax(points[0][1],points[1][1]);
return{x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin}}function resetCursor(controller,e){
var x=e.offsetX,y=e.offsetY,zr=controller._zr;if(controller._brushType){
for(var inCover,panels=controller._panels,covers=controller._covers,i=0;i<covers.length;i++)if(coverRenderers[covers[i].__brushOption.brushType].contain(covers[i],x,y)){
inCover=!0;break}inCover||(panels?each(panels,function(panel){
panel.contain(x,y)&&zr.setCursorStyle("crosshair")}):zr.setCursorStyle("crosshair"));
}}function preventDefault(e){var rawE=e.event;rawE.preventDefault&&rawE.preventDefault();
}function mainShapeContain(cover,x,y){return cover.childOfName("main").contain(x,y);
}function updateCoverByMouse(controller,e,isEnd){var eventParams,x=e.offsetX,y=e.offsetY,creatingCover=controller._creatingCover,panel=controller._creatingPanel,thisBrushOption=controller._brushOption;
if(controller._track.push(controller.group.transformCoordToLocal(x,y)),
shouldShowCover(controller)||creatingCover){if(panel&&!creatingCover){
"single"===thisBrushOption.brushMode&&clearCovers(controller);
var brushOption=zrUtil.clone(thisBrushOption);brushOption.panelId=panel===!0?null:panel.__brushPanelId,
creatingCover=controller._creatingCover=createCover(controller,brushOption),
controller._covers.push(creatingCover)}if(creatingCover){var coverRenderer=coverRenderers[controller._brushType],coverBrushOption=creatingCover.__brushOption;
coverBrushOption.range=coverRenderer.getCreatingRange(clipByPanel(controller,creatingCover,controller._track)),
isEnd&&(endCreating(controller,creatingCover),coverRenderer.updateCommon(controller,creatingCover)),
updateCoverShape(controller,creatingCover),eventParams={isEnd:isEnd
}}}else isEnd&&"single"===thisBrushOption.brushMode&&thisBrushOption.removeOnClick&&getPanelByPoint(controller,x,y)&&clearCovers(controller)&&(eventParams={
isEnd:isEnd,removeOnClick:!0});return eventParams}function handleDragEnd(e){
if(this._dragging){preventDefault(e);var eventParams=updateCoverByMouse(this,e,!0);
this._dragging=!1,this._track=[],this._creatingCover=null,eventParams&&trigger(this,eventParams);
}}function getLineRenderer(xyIndex){return{createCover:function(controller,brushOption){
return createBaseRectCover(curry(driftRect,function(range){var rectRange=[range,[0,100]];
return xyIndex&&rectRange.reverse(),rectRange},function(rectRange){
return rectRange[xyIndex]}),controller,brushOption,[["w","e"],["n","s"]][xyIndex]);
},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack),min=mathMin(ends[0][xyIndex],ends[1][xyIndex]),max=mathMax(ends[0][xyIndex],ends[1][xyIndex]);
return[min,max]},updateCoverShape:function(controller,cover,localRange,brushOption){
var otherExtent,brushWidth=brushOption.brushStyle.width;if(null==brushWidth){
var panel=getPanelByCover(controller,cover),base=0;if(panel!==!0){
var rect=panel.getBoundingRect();brushWidth=xyIndex?rect.width:rect.height,
base=xyIndex?rect.x:rect.y}otherExtent=[base,base+(brushWidth||0)];
}else otherExtent=[-brushWidth/2,brushWidth/2];var rectRange=[localRange,otherExtent];
xyIndex&&rectRange.reverse(),updateBaseRect(controller,cover,rectRange,brushOption);
},updateCommon:updateCommon,contain:mainShapeContain}}var Eventful=__webpack_require__(33),zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),graphic=__webpack_require__(43),interactionMutex=__webpack_require__(178),DataDiffer=__webpack_require__(99),curry=zrUtil.curry,each=zrUtil.each,map=zrUtil.map,mathMin=Math.min,mathMax=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={
w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",
s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={
brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"
},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0;
BrushController.prototype={constructor:BrushController,enableBrush:function(brushOption){
return zrUtil.assert(this._mounted),this._brushType&&doDisableBrush(this),
brushOption.brushType&&doEnableBrush(this,brushOption),this},
setPanels:function(panelOpts){var oldPanels=this._panels||{},newPanels=this._panels=panelOpts&&panelOpts.length&&{},thisGroup=this.group;
return newPanels&&each(panelOpts,function(panelOpt){var panelId=panelOpt.panelId,panel=oldPanels[panelId];
panel||(panel=new graphic.Rect({silent:!0,invisible:!0}),thisGroup.add(panel));
var rect=panelOpt.rect;rect instanceof BoundingRect||(rect=BoundingRect.create(rect)),
panel.attr("shape",rect.plain()),panel.__brushPanelId=panelId,
newPanels[panelId]=panel,oldPanels[panelId]=null}),each(oldPanels,function(panel){
panel&&thisGroup.remove(panel)}),this},mount:function(opt){opt=opt||{},
this._mounted=!0,this._enableGlobalPan=opt.enableGlobalPan;var thisGroup=this.group;
return this._zr.add(thisGroup),thisGroup.attr({position:opt.position||[0,0],
rotation:opt.rotation||0,scale:opt.scale||[1,1]}),this},eachCover:function(cb,context){
each(this._covers,cb,context)},updateCovers:function(brushOptionList){
function getKey(brushOption,index){return(null!=brushOption.id?brushOption.id:tmpIdPrefix+index)+"-"+brushOption.brushType;
}function oldGetKey(cover,index){return getKey(cover.__brushOption,index);
}function addOrUpdate(newIndex,oldIndex){var newBrushOption=brushOptionList[newIndex];
if(null!=oldIndex&&oldCovers[oldIndex]===creatingCover)newCovers[newIndex]=oldCovers[oldIndex];else{
var cover=newCovers[newIndex]=null!=oldIndex?(oldCovers[oldIndex].__brushOption=newBrushOption,
oldCovers[oldIndex]):endCreating(controller,createCover(controller,newBrushOption));
updateCoverAfterCreation(controller,cover)}}function remove(oldIndex){
oldCovers[oldIndex]!==creatingCover&&controller.group.remove(oldCovers[oldIndex]);
}zrUtil.assert(this._mounted),brushOptionList=zrUtil.map(brushOptionList,function(brushOption){
return zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT),brushOption,!0);
});var tmpIdPrefix="\0-brush-index-",oldCovers=this._covers,newCovers=this._covers=[],controller=this,creatingCover=this._creatingCover;
return new DataDiffer(oldCovers,brushOptionList,oldGetKey,getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute(),
this},unmount:function(){return this.enableBrush(!1),clearCovers(this),
this._zr.remove(this.group),this._mounted=!1,this},dispose:function(){
this.unmount(),this.off()}},zrUtil.mixin(BrushController,Eventful);
var mouseHandlers={mousedown:function(e){if(this._dragging)handleDragEnd.call(this,e);else if(!e.target||!e.target.draggable){
preventDefault(e);var x=e.offsetX,y=e.offsetY;this._creatingCover=null;
var panel=this._creatingPanel=getPanelByPoint(this,x,y);panel&&(this._dragging=!0,
this._track=[this.group.transformCoordToLocal(x,y)])}},mousemove:function(e){
if(resetCursor(this,e),this._dragging){preventDefault(e);var eventParams=updateCoverByMouse(this,e,!1);
eventParams&&trigger(this,eventParams)}},mouseup:handleDragEnd
},coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),
rect:{createCover:function(controller,brushOption){return createBaseRectCover(curry(driftRect,function(range){
return range},function(range){return range}),controller,brushOption,["w","e","n","s","se","sw","ne","nw"]);
},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);
return formatRectRange(ends[1][0],ends[1][1],ends[0][0],ends[0][1]);
},updateCoverShape:function(controller,cover,localRange,brushOption){
updateBaseRect(controller,cover,localRange,brushOption)},updateCommon:updateCommon,
contain:mainShapeContain},polygon:{createCover:function(controller,brushOption){
var cover=new graphic.Group;return cover.add(new graphic.Polyline({
name:"main",style:makeStyle(brushOption),silent:!0})),cover},
getCreatingRange:function(localTrack){return localTrack},endCreating:function(controller,cover){
cover.remove(cover.childAt(0)),cover.add(new graphic.Polygon({
name:"main",draggable:!0,drift:curry(driftPolygon,controller,cover),
ondragend:curry(trigger,controller,{isEnd:!0})}))},updateCoverShape:function(controller,cover,localRange,brushOption){
cover.childAt(0).setShape({points:clipByPanel(controller,cover,localRange)
})},updateCommon:updateCommon,contain:mainShapeContain}};module.exports=BrushController;
},function(module,exports,__webpack_require__){function createParallelIfNeeded(option){
if(!option.parallel){var hasParallelSeries=!1;zrUtil.each(option.series,function(seriesOpt){
seriesOpt&&"parallel"===seriesOpt.type&&(hasParallelSeries=!0);
}),hasParallelSeries&&(option.parallel=[{}])}}function mergeAxisOptionFromParallel(option){
var axes=modelUtil.normalizeToArray(option.parallelAxis);zrUtil.each(axes,function(axisOption){
if(zrUtil.isObject(axisOption)){var parallelIndex=axisOption.parallelIndex||0,parallelOption=modelUtil.normalizeToArray(option.parallel)[parallelIndex];
parallelOption&&parallelOption.parallelAxisDefault&&zrUtil.merge(axisOption,parallelOption.parallelAxisDefault,!1);
}})}var zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5);
module.exports=function(option){createParallelIfNeeded(option),
mergeAxisOptionFromParallel(option)}},function(module,exports,__webpack_require__){
function translateCategoryValue(axisModel,dim,rawData){var axisData=axisModel.get("data"),numberDim=convertDimNameToNumber(dim);
axisData&&axisData.length&&zrUtil.each(rawData,function(dataItem){
if(dataItem){var index=zrUtil.indexOf(axisData,dataItem[numberDim]);
dataItem[numberDim]=index>=0?index:NaN}})}function convertDimNameToNumber(dimName){
return+dimName.replace("dim","")}function generateDataDims(modelDims,rawData){
var maxDimNum=0;zrUtil.each(modelDims,function(dimName){var numberDim=convertDimNameToNumber(dimName);
numberDim>maxDimNum&&(maxDimNum=numberDim)});var firstItem=rawData[0];
firstItem&&firstItem.length-1>maxDimNum&&(maxDimNum=firstItem.length-1);
for(var dataDims=[],i=0;i<=maxDimNum;i++)dataDims.push("dim"+i);
return dataDims}var List=__webpack_require__(98),zrUtil=__webpack_require__(4),SeriesModel=__webpack_require__(28),completeDimensions=__webpack_require__(103);
module.exports=SeriesModel.extend({type:"series.parallel",dependencies:["parallel"],
getInitialData:function(option,ecModel){var parallelModel=ecModel.getComponent("parallel",this.get("parallelIndex")),parallelAxisIndices=parallelModel.parallelAxisIndex,rawData=option.data,modelDims=parallelModel.dimensions,dataDims=generateDataDims(modelDims,rawData),dataDimsInfo=zrUtil.map(dataDims,function(dim,dimIndex){
var modelDimsIndex=zrUtil.indexOf(modelDims,dim),axisModel=modelDimsIndex>=0&&ecModel.getComponent("parallelAxis",parallelAxisIndices[modelDimsIndex]);
return axisModel&&"category"===axisModel.get("type")?(translateCategoryValue(axisModel,dim,rawData),
{name:dim,type:"ordinal"}):modelDimsIndex<0&&completeDimensions.guessOrdinal(rawData,dimIndex)?{
name:dim,type:"ordinal"}:dim}),list=new List(dataDimsInfo,this);
return list.initData(rawData),this.option.progressive&&(this.option.animation=!1),
list},getRawIndicesByActiveState:function(activeState){var coordSys=this.coordinateSystem,data=this.getData(),indices=[];
return coordSys.eachActiveState(data,function(theActiveState,dataIndex){
activeState===theActiveState&&indices.push(data.getRawIndex(dataIndex));
}),indices},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",
parallelIndex:0,label:{normal:{show:!1},emphasis:{show:!1}},inactiveOpacity:.05,
activeOpacity:1,lineStyle:{normal:{width:1,opacity:.45,type:"solid"
}},progressive:!1,smooth:!1,animationEasing:"linear"}})},function(module,exports,__webpack_require__){
function createGridClipShape(coordSys,seriesModel,cb){var parallelModel=coordSys.model,rect=coordSys.getRect(),rectEl=new graphic.Rect({
shape:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}
}),dim="horizontal"===parallelModel.get("layout")?"width":"height";
return rectEl.setShape(dim,0),graphic.initProps(rectEl,{shape:{
width:rect.width,height:rect.height}},seriesModel,cb),rectEl}
function createLinePoints(data,dataIndex,dimensions,coordSys){
for(var points=[],i=0;i<dimensions.length;i++){var dimName=dimensions[i],value=data.get(dimName,dataIndex);
isEmptyValue(value,coordSys.getAxis(dimName).type)||points.push(coordSys.dataToPoint(value,dimName));
}return points}function addEl(data,dataGroup,dataIndex,dimensions,coordSys){
var points=createLinePoints(data,dataIndex,dimensions,coordSys),line=new graphic.Polyline({
shape:{points:points},silent:!0,z2:10});dataGroup.add(line),data.setItemGraphicEl(dataIndex,line);
}function updateElCommon(data,smooth){var seriesStyleModel=data.hostModel.getModel("lineStyle.normal"),lineStyle=seriesStyleModel.getLineStyle();
data.eachItemGraphicEl(function(line,dataIndex){if(data.hasItemOption){
var itemModel=data.getItemModel(dataIndex),lineStyleModel=itemModel.getModel("lineStyle.normal",seriesStyleModel);
lineStyle=lineStyleModel.getLineStyle()}line.useStyle(zrUtil.extend(lineStyle,{
fill:null,stroke:data.getItemVisual(dataIndex,"color"),opacity:data.getItemVisual(dataIndex,"opacity")
})),line.shape.smooth=smooth})}function isEmptyValue(val,axisType){
return"category"===axisType?null==val:null==val||isNaN(val)}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),SMOOTH=.3,ParallelView=__webpack_require__(42).extend({
type:"parallel",init:function(){this._dataGroup=new graphic.Group,
this.group.add(this._dataGroup),this._data},render:function(seriesModel,ecModel,api,payload){
this._renderForNormal(seriesModel)},dispose:function(){},_renderForNormal:function(seriesModel){
function add(newDataIndex){addEl(data,dataGroup,newDataIndex,dimensions,coordSys,null,smooth);
}function update(newDataIndex,oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex),points=createLinePoints(data,newDataIndex,dimensions,coordSys);
data.setItemGraphicEl(newDataIndex,line),graphic.updateProps(line,{
shape:{points:points}},seriesModel,newDataIndex)}function remove(oldDataIndex){
var line=oldData.getItemGraphicEl(oldDataIndex);dataGroup.remove(line);
}var dataGroup=this._dataGroup,data=seriesModel.getData(),oldData=this._data,coordSys=seriesModel.coordinateSystem,dimensions=coordSys.dimensions,option=seriesModel.option,smooth=option.smooth?SMOOTH:null;
if(data.diff(oldData).add(add).update(update).remove(remove).execute(),
updateElCommon(data,smooth),!this._data){var clipPath=createGridClipShape(coordSys,seriesModel,function(){
setTimeout(function(){dataGroup.removeClipPath()})});dataGroup.setClipPath(clipPath);
}this._data=data},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),
this._data=null}});module.exports=ParallelView},function(module,exports){
module.exports=function(ecModel){ecModel.eachSeriesByType("parallel",function(seriesModel){
var itemStyleModel=seriesModel.getModel("itemStyle.normal"),lineStyleModel=seriesModel.getModel("lineStyle.normal"),globalColors=ecModel.get("color"),color=lineStyleModel.get("color")||itemStyleModel.get("color")||globalColors[seriesModel.seriesIndex%globalColors.length],inactiveOpacity=seriesModel.get("inactiveOpacity"),activeOpacity=seriesModel.get("activeOpacity"),lineStyle=seriesModel.getModel("lineStyle.normal").getLineStyle(),coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),opacityMap={
normal:lineStyle.opacity,active:activeOpacity,inactive:inactiveOpacity
};coordSys.eachActiveState(data,function(activeState,dataIndex){
data.setItemVisual(dataIndex,"opacity",opacityMap[activeState]);
}),data.setVisual("color",color)})}},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1);__webpack_require__(242),__webpack_require__(243),
echarts.registerLayout(__webpack_require__(244)),echarts.registerVisual(__webpack_require__(246));
},function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(28),createGraphFromNodeEdge=__webpack_require__(199),encodeHTML=__webpack_require__(6).encodeHTML,SankeySeries=SeriesModel.extend({
type:"series.sankey",layoutInfo:null,getInitialData:function(option){
var links=option.edges||option.links,nodes=option.data||option.nodes;
if(nodes&&links){var graph=createGraphFromNodeEdge(nodes,links,this,!0);
return graph.data}},getGraph:function(){return this.getData().graph;
},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(dataIndex,multipleSeries,dataType){
if("edge"===dataType){var params=this.getDataParams(dataIndex,dataType),rawDataOpt=params.data,html=rawDataOpt.source+" -- "+rawDataOpt.target;
return params.value&&(html+=" : "+params.value),encodeHTML(html);
}return SankeySeries.superCall(this,"formatTooltip",dataIndex,multipleSeries);
},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,
left:"5%",top:"5%",right:"20%",bottom:"5%",nodeWidth:20,nodeGap:8,
layoutIterations:32,label:{normal:{show:!0,position:"right",textStyle:{
color:"#000",fontSize:12}},emphasis:{show:!0}},itemStyle:{normal:{
borderWidth:1,borderColor:"#333"}},lineStyle:{normal:{color:"#314656",
opacity:.2,curveness:.5},emphasis:{opacity:.6}},animationEasing:"linear",
animationDuration:1e3}});module.exports=SankeySeries},function(module,exports,__webpack_require__){
function createGridClipShape(rect,seriesModel,cb){var rectEl=new graphic.Rect({
shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}
});return graphic.initProps(rectEl,{shape:{width:rect.width+20,
height:rect.height+20}},seriesModel,cb),rectEl}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),SankeyShape=graphic.extendShape({
shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0
},buildPath:function(ctx,shape){var halfExtent=shape.extent/2;
ctx.moveTo(shape.x1,shape.y1-halfExtent),ctx.bezierCurveTo(shape.cpx1,shape.cpy1-halfExtent,shape.cpx2,shape.cpy2-halfExtent,shape.x2,shape.y2-halfExtent),
ctx.lineTo(shape.x2,shape.y2+halfExtent),ctx.bezierCurveTo(shape.cpx2,shape.cpy2+halfExtent,shape.cpx1,shape.cpy1+halfExtent,shape.x1,shape.y1+halfExtent),
ctx.closePath()}});module.exports=__webpack_require__(1).extendChartView({
type:"sankey",_model:null,render:function(seriesModel,ecModel,api){
var graph=seriesModel.getGraph(),group=this.group,layoutInfo=seriesModel.layoutInfo,nodeData=seriesModel.getData(),edgeData=seriesModel.getData("edge");
this._model=seriesModel,group.removeAll(),group.position=[layoutInfo.x,layoutInfo.y],
graph.eachEdge(function(edge){var curve=new SankeyShape;curve.dataIndex=edge.dataIndex,
curve.seriesIndex=seriesModel.seriesIndex,curve.dataType="edge";
var lineStyleModel=edge.getModel("lineStyle.normal"),curvature=lineStyleModel.get("curveness"),n1Layout=edge.node1.getLayout(),n2Layout=edge.node2.getLayout(),edgeLayout=edge.getLayout();
curve.shape.extent=Math.max(1,edgeLayout.dy);var x1=n1Layout.x+n1Layout.dx,y1=n1Layout.y+edgeLayout.sy+edgeLayout.dy/2,x2=n2Layout.x,y2=n2Layout.y+edgeLayout.ty+edgeLayout.dy/2,cpx1=x1*(1-curvature)+x2*curvature,cpy1=y1,cpx2=x1*curvature+x2*(1-curvature),cpy2=y2;
switch(curve.setShape({x1:x1,y1:y1,x2:x2,y2:y2,cpx1:cpx1,cpy1:cpy1,
cpx2:cpx2,cpy2:cpy2}),curve.setStyle(lineStyleModel.getItemStyle()),
curve.style.fill){case"source":curve.style.fill=edge.node1.getVisual("color");
break;case"target":curve.style.fill=edge.node2.getVisual("color");
}graphic.setHoverStyle(curve,edge.getModel("lineStyle.emphasis").getItemStyle()),
group.add(curve),edgeData.setItemGraphicEl(edge.dataIndex,curve);
}),graph.eachNode(function(node){var layout=node.getLayout(),itemModel=node.getModel(),labelModel=itemModel.getModel("label.normal"),textStyleModel=labelModel.getModel("textStyle"),labelHoverModel=itemModel.getModel("label.emphasis"),textStyleHoverModel=labelHoverModel.getModel("textStyle"),rect=new graphic.Rect({
shape:{x:layout.x,y:layout.y,width:node.getLayout().dx,height:node.getLayout().dy
},style:{text:labelModel.get("show")?seriesModel.getFormattedLabel(node.dataIndex,"normal")||node.id:"",
textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor(),
textPosition:labelModel.get("position")}});rect.setStyle(zrUtil.defaults({
fill:node.getVisual("color")},itemModel.getModel("itemStyle.normal").getItemStyle())),
graphic.setHoverStyle(rect,zrUtil.extend(node.getModel("itemStyle.emphasis"),{
text:labelHoverModel.get("show")?seriesModel.getFormattedLabel(node.dataIndex,"emphasis")||node.id:"",
textFont:textStyleHoverModel.getFont(),textFill:textStyleHoverModel.getTextColor(),
textPosition:labelHoverModel.get("position")})),group.add(rect),
nodeData.setItemGraphicEl(node.dataIndex,rect),rect.dataType="node";
}),!this._data&&seriesModel.get("animation")&&group.setClipPath(createGridClipShape(group.getBoundingRect(),seriesModel,function(){
group.removeClipPath()})),this._data=seriesModel.getData()},dispose:function(){}
})},function(module,exports,__webpack_require__){function getViewRect(seriesModel,api){
return layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{
width:api.getWidth(),height:api.getHeight()})}function layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations){
computeNodeBreadths(nodes,nodeWidth,width),computeNodeDepths(nodes,edges,height,nodeGap,iterations),
computeEdgeDepths(nodes)}function computeNodeValues(nodes){zrUtil.each(nodes,function(node){
var value1=sum(node.outEdges,getEdgeValue),value2=sum(node.inEdges,getEdgeValue),value=Math.max(value1,value2);
node.setLayout({value:value},!0)})}function computeNodeBreadths(nodes,nodeWidth,width){
for(var remainNodes=nodes,nextNode=null,x=0,kx=0;remainNodes.length;){
nextNode=[];for(var i=0,len=remainNodes.length;i<len;i++){var node=remainNodes[i];
node.setLayout({x:x},!0),node.setLayout({dx:nodeWidth},!0);for(var j=0,lenj=node.outEdges.length;j<lenj;j++)nextNode.push(node.outEdges[j].node2);
}remainNodes=nextNode,++x}moveSinksRight(nodes,x),kx=(width-nodeWidth)/(x-1),
scaleNodeBreadths(nodes,kx)}function moveSinksRight(nodes,x){
zrUtil.each(nodes,function(node){node.outEdges.length||node.setLayout({
x:x-1},!0)})}function scaleNodeBreadths(nodes,kx){zrUtil.each(nodes,function(node){
var nodeX=node.getLayout().x*kx;node.setLayout({x:nodeX},!0)});
}function computeNodeDepths(nodes,edges,height,nodeGap,iterations){
var nodesByBreadth=nest().key(function(d){return d.getLayout().x;
}).sortKeys(ascending).entries(nodes).map(function(d){return d.values;
});initializeNodeDepth(nodes,nodesByBreadth,edges,height,nodeGap),
resolveCollisions(nodesByBreadth,nodeGap,height);for(var alpha=1;iterations>0;iterations--)alpha*=.99,
relaxRightToLeft(nodesByBreadth,alpha),resolveCollisions(nodesByBreadth,nodeGap,height),
relaxLeftToRight(nodesByBreadth,alpha),resolveCollisions(nodesByBreadth,nodeGap,height);
}function initializeNodeDepth(nodes,nodesByBreadth,edges,height,nodeGap){
var kyArray=[];zrUtil.each(nodesByBreadth,function(nodes){var n=nodes.length,sum=0;
zrUtil.each(nodes,function(node){sum+=node.getLayout().value});
var ky=(height-(n-1)*nodeGap)/sum;kyArray.push(ky)}),kyArray.sort(function(a,b){
return a-b});var ky0=kyArray[0];zrUtil.each(nodesByBreadth,function(nodes){
zrUtil.each(nodes,function(node,i){node.setLayout({y:i},!0);var nodeDy=node.getLayout().value*ky0;
node.setLayout({dy:nodeDy},!0)})}),zrUtil.each(edges,function(edge){
var edgeDy=+edge.getValue()*ky0;edge.setLayout({dy:edgeDy},!0);
})}function resolveCollisions(nodesByBreadth,nodeGap,height){
zrUtil.each(nodesByBreadth,function(nodes){var node,dy,i,y0=0,n=nodes.length;
for(nodes.sort(ascendingDepth),i=0;i<n;i++){if(node=nodes[i],
dy=y0-node.getLayout().y,dy>0){var nodeY=node.getLayout().y+dy;
node.setLayout({y:nodeY},!0)}y0=node.getLayout().y+node.getLayout().dy+nodeGap;
}if(dy=y0-nodeGap-height,dy>0){var nodeY=node.getLayout().y-dy;
for(node.setLayout({y:nodeY},!0),y0=node.getLayout().y,i=n-2;i>=0;--i)node=nodes[i],
dy=node.getLayout().y+node.getLayout().dy+nodeGap-y0,dy>0&&(nodeY=node.getLayout().y-dy,
node.setLayout({y:nodeY},!0)),y0=node.getLayout().y}})}function relaxRightToLeft(nodesByBreadth,alpha){
zrUtil.each(nodesByBreadth.slice().reverse(),function(nodes){
zrUtil.each(nodes,function(node){if(node.outEdges.length){var y=sum(node.outEdges,weightedTarget)/sum(node.outEdges,getEdgeValue),nodeY=node.getLayout().y+(y-center(node))*alpha;
node.setLayout({y:nodeY},!0)}})})}function weightedTarget(edge){
return center(edge.node2)*edge.getValue()}function relaxLeftToRight(nodesByBreadth,alpha){
zrUtil.each(nodesByBreadth,function(nodes){zrUtil.each(nodes,function(node){
if(node.inEdges.length){var y=sum(node.inEdges,weightedSource)/sum(node.inEdges,getEdgeValue),nodeY=node.getLayout().y+(y-center(node))*alpha;
node.setLayout({y:nodeY},!0)}})})}function weightedSource(edge){
return center(edge.node1)*edge.getValue()}function computeEdgeDepths(nodes){
zrUtil.each(nodes,function(node){node.outEdges.sort(ascendingTargetDepth),
node.inEdges.sort(ascendingSourceDepth)}),zrUtil.each(nodes,function(node){
var sy=0,ty=0;zrUtil.each(node.outEdges,function(edge){edge.setLayout({
sy:sy},!0),sy+=edge.getLayout().dy}),zrUtil.each(node.inEdges,function(edge){
edge.setLayout({ty:ty},!0),ty+=edge.getLayout().dy})})}function ascendingTargetDepth(a,b){
return a.node2.getLayout().y-b.node2.getLayout().y}function ascendingSourceDepth(a,b){
return a.node1.getLayout().y-b.node1.getLayout().y}function sum(array,f){
for(var sum=0,len=array.length,i=-1;++i<len;){var value=+f.call(array,array[i],i);
isNaN(value)||(sum+=value)}return sum}function center(node){return node.getLayout().y+node.getLayout().dy/2;
}function ascendingDepth(a,b){return a.getLayout().y-b.getLayout().y;
}function ascending(a,b){return a<b?-1:a>b?1:a===b?0:NaN}function getEdgeValue(edge){
return edge.getValue()}var layout=__webpack_require__(21),nest=__webpack_require__(245),zrUtil=__webpack_require__(4);
module.exports=function(ecModel,api,payload){ecModel.eachSeriesByType("sankey",function(seriesModel){
var nodeWidth=seriesModel.get("nodeWidth"),nodeGap=seriesModel.get("nodeGap"),layoutInfo=getViewRect(seriesModel,api);
seriesModel.layoutInfo=layoutInfo;var width=layoutInfo.width,height=layoutInfo.height,graph=seriesModel.getGraph(),nodes=graph.nodes,edges=graph.edges;
computeNodeValues(nodes);var filteredNodes=nodes.filter(function(node){
return 0===node.getLayout().value}),iterations=0!==filteredNodes.length?0:seriesModel.get("layoutIterations");
layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations);
})}},function(module,exports,__webpack_require__){function nest(){
function map(array,depth){if(depth>=keysFunction.length)return array;
for(var i=-1,n=array.length,keyFunction=keysFunction[depth++],mapObject={},valuesByKey={};++i<n;){
var keyValue=keyFunction(array[i]),values=valuesByKey[keyValue];
values?values.push(array[i]):valuesByKey[keyValue]=[array[i]];
}return zrUtil.each(valuesByKey,function(value,key){mapObject[key]=map(value,depth);
}),mapObject}function entriesMap(mapObject,depth){if(depth>=keysFunction.length)return mapObject;
var array=[],sortKeyFunction=sortKeysFunction[depth++];return zrUtil.each(mapObject,function(value,key){
array.push({key:key,values:entriesMap(value,depth)})}),sortKeyFunction?array.sort(function(a,b){
return sortKeyFunction(a.key,b.key)}):array}var keysFunction=[],sortKeysFunction=[];
return{key:function(d){return keysFunction.push(d),this},sortKeys:function(order){
return sortKeysFunction[keysFunction.length-1]=order,this},entries:function(array){
return entriesMap(map(array,0),0)}}}var zrUtil=__webpack_require__(4);
module.exports=nest},function(module,exports,__webpack_require__){
var VisualMapping=__webpack_require__(195),zrUtil=__webpack_require__(4);
module.exports=function(ecModel,payload){ecModel.eachSeriesByType("sankey",function(seriesModel){
var graph=seriesModel.getGraph(),nodes=graph.nodes;nodes.sort(function(a,b){
return a.getLayout().value-b.getLayout().value});var minValue=nodes[0].getLayout().value,maxValue=nodes[nodes.length-1].getLayout().value;
zrUtil.each(nodes,function(node){var mapping=new VisualMapping({
type:"color",mappingMethod:"linear",dataExtent:[minValue,maxValue],
visual:seriesModel.get("color")}),mapValueToColor=mapping.mapValueToVisual(node.getLayout().value);
node.setVisual("color",mapValueToColor);var itemModel=node.getModel(),customColor=itemModel.get("itemStyle.normal.color");
null!=customColor&&node.setVisual("color",customColor)})})}},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1);__webpack_require__(248),__webpack_require__(251),
echarts.registerVisual(__webpack_require__(252)),echarts.registerLayout(__webpack_require__(253));
},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),SeriesModel=__webpack_require__(28),whiskerBoxCommon=__webpack_require__(249),BoxplotSeries=SeriesModel.extend({
type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],valueDimensions:["min","Q1","median","Q3","max"],
dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",
legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],
itemStyle:{normal:{color:"#fff",borderWidth:1},emphasis:{borderWidth:2,
shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"
}},animationEasing:"elasticOut",animationDuration:800}});zrUtil.mixin(BoxplotSeries,whiskerBoxCommon.seriesModelMixin,!0),
module.exports=BoxplotSeries},function(module,exports,__webpack_require__){
"use strict";function getItemValue(item){return null==item.value?item:item.value;
}var List=__webpack_require__(98),completeDimensions=__webpack_require__(103),WhiskerBoxDraw=__webpack_require__(250),zrUtil=__webpack_require__(4),seriesModelMixin={
_baseAxisDim:null,getInitialData:function(option,ecModel){var categories,addOrdinal,xAxisModel=ecModel.getComponent("xAxis",this.get("xAxisIndex")),yAxisModel=ecModel.getComponent("yAxis",this.get("yAxisIndex")),xAxisType=xAxisModel.get("type"),yAxisType=yAxisModel.get("type");
"category"===xAxisType?(option.layout="horizontal",categories=xAxisModel.getCategories(),
addOrdinal=!0):"category"===yAxisType?(option.layout="vertical",
categories=yAxisModel.getCategories(),addOrdinal=!0):option.layout=option.layout||"horizontal",
this._baseAxisDim="horizontal"===option.layout?"x":"y";var data=option.data,dimensions=this.dimensions=["base"].concat(this.valueDimensions);
completeDimensions(dimensions,data);var list=new List(dimensions,this);
return list.initData(data,categories?categories.slice():null,function(dataItem,dimName,idx,dimIdx){
var value=getItemValue(dataItem);return addOrdinal?"base"===dimName?idx:value[dimIdx-1]:value[dimIdx];
}),list},coordDimToDataDim:function(axisDim){var dims=this.valueDimensions.slice(),baseDim=["base"],map={
horizontal:{x:baseDim,y:dims},vertical:{x:dims,y:baseDim}};return map[this.get("layout")][axisDim];
},dataDimToCoordDim:function(dataDim){var dim;return zrUtil.each(["x","y"],function(coordDim,index){
var dataDims=this.coordDimToDataDim(coordDim);zrUtil.indexOf(dataDims,dataDim)>=0&&(dim=coordDim);
},this),dim},getBaseAxis:function(){var dim=this._baseAxisDim;
return this.ecModel.getComponent(dim+"Axis",this.get(dim+"AxisIndex")).axis;
}},viewMixin={init:function(){var whiskerBoxDraw=this._whiskerBoxDraw=new WhiskerBoxDraw(this.getStyleUpdater());
this.group.add(whiskerBoxDraw.group)},render:function(seriesModel,ecModel,api){
this._whiskerBoxDraw.updateData(seriesModel.getData())},remove:function(ecModel){
this._whiskerBoxDraw.remove()}};module.exports={seriesModelMixin:seriesModelMixin,
viewMixin:viewMixin}},function(module,exports,__webpack_require__){
function WhiskerBox(data,idx,styleUpdater,isInit){graphic.Group.call(this),
this.bodyIndex,this.whiskerIndex,this.styleUpdater=styleUpdater,
this._createContent(data,idx,isInit),this.updateData(data,idx,isInit),
this._seriesModel}function transInit(points,dim,itemLayout){return zrUtil.map(points,function(point){
return point=point.slice(),point[dim]=itemLayout.initBaseline,
point})}function makeWhiskerEndsShape(whiskerEnds){var shape={};
return zrUtil.each(whiskerEnds,function(ends,i){shape["ends"+i]=ends;
}),shape}function WhiskerBoxDraw(styleUpdater){this.group=new graphic.Group,
this.styleUpdater=styleUpdater}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),Path=__webpack_require__(45),WhiskerPath=Path.extend({
type:"whiskerInBox",shape:{},buildPath:function(ctx,shape){for(var i in shape)if(shape.hasOwnProperty(i)&&0===i.indexOf("ends")){
var pts=shape[i];ctx.moveTo(pts[0][0],pts[0][1]),ctx.lineTo(pts[1][0],pts[1][1]);
}}}),whiskerBoxProto=WhiskerBox.prototype;whiskerBoxProto._createContent=function(data,idx,isInit){
var itemLayout=data.getItemLayout(idx),constDim="horizontal"===itemLayout.chartLayout?1:0,count=0;
this.add(new graphic.Polygon({shape:{points:isInit?transInit(itemLayout.bodyEnds,constDim,itemLayout):itemLayout.bodyEnds
},style:{strokeNoScale:!0},z2:100})),this.bodyIndex=count++;var whiskerEnds=zrUtil.map(itemLayout.whiskerEnds,function(ends){
return isInit?transInit(ends,constDim,itemLayout):ends});this.add(new WhiskerPath({
shape:makeWhiskerEndsShape(whiskerEnds),style:{strokeNoScale:!0
},z2:100})),this.whiskerIndex=count++},whiskerBoxProto.updateData=function(data,idx,isInit){
var seriesModel=this._seriesModel=data.hostModel,itemLayout=data.getItemLayout(idx),updateMethod=graphic[isInit?"initProps":"updateProps"];
updateMethod(this.childAt(this.bodyIndex),{shape:{points:itemLayout.bodyEnds
}},seriesModel,idx),updateMethod(this.childAt(this.whiskerIndex),{
shape:makeWhiskerEndsShape(itemLayout.whiskerEnds)},seriesModel,idx),
this.styleUpdater.call(null,this,data,idx)},zrUtil.inherits(WhiskerBox,graphic.Group);
var whiskerBoxDrawProto=WhiskerBoxDraw.prototype;whiskerBoxDrawProto.updateData=function(data){
var group=this.group,oldData=this._data,styleUpdater=this.styleUpdater;
data.diff(oldData).add(function(newIdx){if(data.hasValue(newIdx)){
var symbolEl=new WhiskerBox(data,newIdx,styleUpdater,(!0));data.setItemGraphicEl(newIdx,symbolEl),
group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);
return data.hasValue(newIdx)?(symbolEl?symbolEl.updateData(data,newIdx):symbolEl=new WhiskerBox(data,newIdx,styleUpdater),
group.add(symbolEl),void data.setItemGraphicEl(newIdx,symbolEl)):void group.remove(symbolEl);
}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);
el&&group.remove(el)}).execute(),this._data=data},whiskerBoxDrawProto.remove=function(){
var group=this.group,data=this._data;this._data=null,data&&data.eachItemGraphicEl(function(el){
el&&group.remove(el)})},module.exports=WhiskerBoxDraw},function(module,exports,__webpack_require__){
"use strict";function updateStyle(itemGroup,data,idx){var itemModel=data.getItemModel(idx),normalItemStyleModel=itemModel.getModel(normalStyleAccessPath),borderColor=data.getItemVisual(idx,"color"),itemStyle=normalItemStyleModel.getItemStyle(["borderColor"]),whiskerEl=itemGroup.childAt(itemGroup.whiskerIndex);
whiskerEl.style.set(itemStyle),whiskerEl.style.stroke=borderColor,
whiskerEl.dirty();var bodyEl=itemGroup.childAt(itemGroup.bodyIndex);
bodyEl.style.set(itemStyle),bodyEl.style.stroke=borderColor,bodyEl.dirty();
var hoverStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle();
graphic.setHoverStyle(itemGroup,hoverStyle)}var zrUtil=__webpack_require__(4),ChartView=__webpack_require__(42),graphic=__webpack_require__(43),whiskerBoxCommon=__webpack_require__(249),BoxplotView=ChartView.extend({
type:"boxplot",getStyleUpdater:function(){return updateStyle},
dispose:zrUtil.noop});zrUtil.mixin(BoxplotView,whiskerBoxCommon.viewMixin,!0);
var normalStyleAccessPath=["itemStyle","normal"],emphasisStyleAccessPath=["itemStyle","emphasis"];
module.exports=BoxplotView},function(module,exports){var borderColorQuery=["itemStyle","normal","borderColor"];
module.exports=function(ecModel,api){var globalColors=ecModel.get("color");
ecModel.eachRawSeriesByType("boxplot",function(seriesModel){var defaulColor=globalColors[seriesModel.seriesIndex%globalColors.length],data=seriesModel.getData();
data.setVisual({legendSymbol:"roundRect",color:seriesModel.get(borderColorQuery)||defaulColor
}),ecModel.isSeriesFiltered(seriesModel)||data.each(function(idx){
var itemModel=data.getItemModel(idx);data.setItemVisual(idx,{
color:itemModel.get(borderColorQuery,!0)})})})}},function(module,exports,__webpack_require__){
function groupSeriesByAxis(ecModel){var result=[],axisList=[];
return ecModel.eachSeriesByType("boxplot",function(seriesModel){
var baseAxis=seriesModel.getBaseAxis(),idx=zrUtil.indexOf(axisList,baseAxis);
idx<0&&(idx=axisList.length,axisList[idx]=baseAxis,result[idx]={
axis:baseAxis,seriesModels:[]}),result[idx].seriesModels.push(seriesModel);
}),result}function calculateBase(groupItem){var extent,bandWidth,baseAxis=groupItem.axis,seriesModels=groupItem.seriesModels,seriesCount=seriesModels.length,boxWidthList=groupItem.boxWidthList=[],boxOffsetList=groupItem.boxOffsetList=[],boundList=[];
if("category"===baseAxis.type)bandWidth=baseAxis.getBandWidth();else{
var maxDataCount=0;each(seriesModels,function(seriesModel){maxDataCount=Math.max(maxDataCount,seriesModel.getData().count());
}),extent=baseAxis.getExtent(),Math.abs(extent[1]-extent[0])/maxDataCount;
}each(seriesModels,function(seriesModel){var boxWidthBound=seriesModel.get("boxWidth");
zrUtil.isArray(boxWidthBound)||(boxWidthBound=[boxWidthBound,boxWidthBound]),
boundList.push([parsePercent(boxWidthBound[0],bandWidth)||0,parsePercent(boxWidthBound[1],bandWidth)||0]);
});var availableWidth=.8*bandWidth-2,boxGap=availableWidth/seriesCount*.3,boxWidth=(availableWidth-boxGap*(seriesCount-1))/seriesCount,base=boxWidth/2-availableWidth/2;
each(seriesModels,function(seriesModel,idx){boxOffsetList.push(base),
base+=boxGap+boxWidth,boxWidthList.push(Math.min(Math.max(boxWidth,boundList[idx][0]),boundList[idx][1]));
})}function layoutSingleSeries(seriesModel,offset,boxWidth){var coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),dimensions=seriesModel.dimensions,chartLayout=seriesModel.get("layout"),halfWidth=boxWidth/2;
data.each(dimensions,function(){function getPoint(val){var p=[];
p[variableDim]=axisDimVal,p[constDim]=val;var point;return isNaN(axisDimVal)||isNaN(val)?point=[NaN,NaN]:(point=coordSys.dataToPoint(p),
point[variableDim]+=offset),point}function addBodyEnd(point,start){
var point1=point.slice(),point2=point.slice();point1[variableDim]+=halfWidth,
point2[variableDim]-=halfWidth,start?bodyEnds.push(point1,point2):bodyEnds.push(point2,point1);
}function layEndLine(endCenter){var line=[endCenter.slice(),endCenter.slice()];
line[0][variableDim]-=halfWidth,line[1][variableDim]+=halfWidth,
whiskerEnds.push(line)}var args=arguments,dimLen=dimensions.length,axisDimVal=args[0],idx=args[dimLen],variableDim="horizontal"===chartLayout?0:1,constDim=1-variableDim,median=getPoint(args[3]),end1=getPoint(args[1]),end5=getPoint(args[5]),whiskerEnds=[[end1,getPoint(args[2])],[end5,getPoint(args[4])]];
layEndLine(end1),layEndLine(end5),layEndLine(median);var bodyEnds=[];
addBodyEnd(whiskerEnds[0][1],0),addBodyEnd(whiskerEnds[1][1],1),
data.setItemLayout(idx,{chartLayout:chartLayout,initBaseline:median[constDim],
median:median,bodyEnds:bodyEnds,whiskerEnds:whiskerEnds})})}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent,each=zrUtil.each;
module.exports=function(ecModel){var groupResult=groupSeriesByAxis(ecModel);
each(groupResult,function(groupItem){var seriesModels=groupItem.seriesModels;
seriesModels.length&&(calculateBase(groupItem),each(seriesModels,function(seriesModel,idx){
layoutSingleSeries(seriesModel,groupItem.boxOffsetList[idx],groupItem.boxWidthList[idx]);
}))})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);
__webpack_require__(255),__webpack_require__(256),echarts.registerPreprocessor(__webpack_require__(257)),
echarts.registerVisual(__webpack_require__(258)),echarts.registerLayout(__webpack_require__(259));
},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),SeriesModel=__webpack_require__(28),whiskerBoxCommon=__webpack_require__(249),formatUtil=__webpack_require__(6),encodeHTML=formatUtil.encodeHTML,addCommas=formatUtil.addCommas,CandlestickSeries=SeriesModel.extend({
type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],
valueDimensions:["open","close","lowest","highest"],dimensions:null,
defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,
hoverAnimation:!0,layout:null,itemStyle:{normal:{color:"#c23531",
color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"
},emphasis:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,
barWidth:null,animationUpdate:!1,animationEasing:"linear",animationDuration:300
},getShadowDim:function(){return"open"},formatTooltip:function(dataIndex,mutipleSeries){
var valueHTML=zrUtil.map(this.valueDimensions,function(dim){return encodeHTML(dim+": "+addCommas(this.getData().get(dim,dataIndex)));
},this).join("<br />"),html=[];return null!=this.name&&html.push(encodeHTML(this.name)),
null!=valueHTML&&html.push(valueHTML),html.join("<br />")},brushSelector:function(itemLayout,selectors){
return selectors.rect(itemLayout.brushRect)}});zrUtil.mixin(CandlestickSeries,whiskerBoxCommon.seriesModelMixin,!0),
module.exports=CandlestickSeries},function(module,exports,__webpack_require__){
"use strict";function updateStyle(itemGroup,data,idx){var itemModel=data.getItemModel(idx),normalItemStyleModel=itemModel.getModel(normalStyleAccessPath),color=data.getItemVisual(idx,"color"),borderColor=data.getItemVisual(idx,"borderColor")||color,itemStyle=normalItemStyleModel.getItemStyle(["color","color0","borderColor","borderColor0"]),whiskerEl=itemGroup.childAt(itemGroup.whiskerIndex);
whiskerEl.useStyle(itemStyle),whiskerEl.style.stroke=borderColor;
var bodyEl=itemGroup.childAt(itemGroup.bodyIndex);bodyEl.useStyle(itemStyle),
bodyEl.style.fill=color,bodyEl.style.stroke=borderColor;var hoverStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle();
graphic.setHoverStyle(itemGroup,hoverStyle)}var zrUtil=__webpack_require__(4),ChartView=__webpack_require__(42),graphic=__webpack_require__(43),whiskerBoxCommon=__webpack_require__(249),CandlestickView=ChartView.extend({
type:"candlestick",getStyleUpdater:function(){return updateStyle;
},dispose:zrUtil.noop});zrUtil.mixin(CandlestickView,whiskerBoxCommon.viewMixin,!0);
var normalStyleAccessPath=["itemStyle","normal"],emphasisStyleAccessPath=["itemStyle","emphasis"];
module.exports=CandlestickView},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4);module.exports=function(option){
option&&zrUtil.isArray(option.series)&&zrUtil.each(option.series,function(seriesItem){
zrUtil.isObject(seriesItem)&&"k"===seriesItem.type&&(seriesItem.type="candlestick");
})}},function(module,exports){var positiveBorderColorQuery=["itemStyle","normal","borderColor"],negativeBorderColorQuery=["itemStyle","normal","borderColor0"],positiveColorQuery=["itemStyle","normal","color"],negativeColorQuery=["itemStyle","normal","color0"];
module.exports=function(ecModel,api){ecModel.eachRawSeriesByType("candlestick",function(seriesModel){
var data=seriesModel.getData();data.setVisual({legendSymbol:"roundRect"
}),ecModel.isSeriesFiltered(seriesModel)||data.each(function(idx){
var itemModel=data.getItemModel(idx),sign=data.getItemLayout(idx).sign;
data.setItemVisual(idx,{color:itemModel.get(sign>0?positiveColorQuery:negativeColorQuery),
borderColor:itemModel.get(sign>0?positiveBorderColorQuery:negativeBorderColorQuery)
})})})}},function(module,exports,__webpack_require__){function calculateCandleWidth(seriesModel,data){
var extent,baseAxis=seriesModel.getBaseAxis(),bandWidth="category"===baseAxis.type?baseAxis.getBandWidth():(extent=baseAxis.getExtent(),
Math.abs(extent[1]-extent[0])/data.count()),barMaxWidth=parsePercent(retrieve(seriesModel.get("barMaxWidth"),bandWidth),bandWidth),barMinWidth=parsePercent(retrieve(seriesModel.get("barMinWidth"),1),bandWidth),barWidth=seriesModel.get("barWidth");
return null!=barWidth?parsePercent(barWidth,bandWidth):Math.max(Math.min(bandWidth/2,barMaxWidth),barMinWidth);
}var retrieve=__webpack_require__(4).retrieve,parsePercent=__webpack_require__(7).parsePercent;
module.exports=function(ecModel){ecModel.eachSeriesByType("candlestick",function(seriesModel){
var coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),dimensions=seriesModel.dimensions,chartLayout=seriesModel.get("layout"),candleWidth=calculateCandleWidth(seriesModel,data);
data.each(dimensions,function(){function getPoint(val){var p=[];
return p[variableDim]=axisDimVal,p[constDim]=val,isNaN(axisDimVal)||isNaN(val)?[NaN,NaN]:coordSys.dataToPoint(p);
}function addBodyEnd(point,start){var point1=point.slice(),point2=point.slice();
point1[variableDim]+=candleWidth/2,point2[variableDim]-=candleWidth/2,
start?bodyEnds.push(point1,point2):bodyEnds.push(point2,point1);
}function makeBrushRect(){var pmin=getPoint(Math.min(openVal,closeVal,lowestVal,highestVal)),pmax=getPoint(Math.max(openVal,closeVal,lowestVal,highestVal));
return pmin[variableDim]-=candleWidth/2,pmax[variableDim]-=candleWidth/2,
{x:pmin[0],y:pmin[1],width:constDim?candleWidth:pmax[0]-pmin[0],
height:constDim?pmax[1]-pmin[1]:candleWidth}}var args=arguments,dimLen=dimensions.length,axisDimVal=args[0],idx=args[dimLen],variableDim="horizontal"===chartLayout?0:1,constDim=1-variableDim,openVal=args[1],closeVal=args[2],lowestVal=args[3],highestVal=args[4],ocLow=Math.min(openVal,closeVal),ocHigh=Math.max(openVal,closeVal),ocLowPoint=getPoint(ocLow),ocHighPoint=getPoint(ocHigh),lowestPoint=getPoint(lowestVal),highestPoint=getPoint(highestVal),whiskerEnds=[[highestPoint,ocHighPoint],[lowestPoint,ocLowPoint]],bodyEnds=[];
addBodyEnd(ocHighPoint,0),addBodyEnd(ocLowPoint,1),data.setItemLayout(idx,{
chartLayout:chartLayout,sign:openVal>closeVal?-1:openVal<closeVal?1:0,
initBaseline:openVal>closeVal?ocHighPoint[constDim]:ocLowPoint[constDim],
bodyEnds:bodyEnds,whiskerEnds:whiskerEnds,brushRect:makeBrushRect()
})},!0)})}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);
__webpack_require__(261),__webpack_require__(262),echarts.registerVisual(zrUtil.curry(__webpack_require__(110),"effectScatter","circle",null)),
echarts.registerLayout(zrUtil.curry(__webpack_require__(111),"effectScatter"));
},function(module,exports,__webpack_require__){"use strict";var createListFromArray=__webpack_require__(102),SeriesModel=__webpack_require__(28);
module.exports=SeriesModel.extend({type:"series.effectScatter",
dependencies:["grid","polar"],getInitialData:function(option,ecModel){
var list=createListFromArray(option.data,this,ecModel);return list;
},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",
zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,
showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"
},symbolSize:10}})},function(module,exports,__webpack_require__){
var SymbolDraw=__webpack_require__(105),EffectSymbol=__webpack_require__(263);
__webpack_require__(1).extendChartView({type:"effectScatter",
init:function(){this._symbolDraw=new SymbolDraw(EffectSymbol);
},render:function(seriesModel,ecModel,api){var data=seriesModel.getData(),effectSymbolDraw=this._symbolDraw;
effectSymbolDraw.updateData(data),this.group.add(effectSymbolDraw.group);
},updateLayout:function(){this._symbolDraw.updateLayout()},remove:function(ecModel,api){
this._symbolDraw&&this._symbolDraw.remove(api)},dispose:function(){}
})},function(module,exports,__webpack_require__){function normalizeSymbolSize(symbolSize){
return zrUtil.isArray(symbolSize)||(symbolSize=[+symbolSize,+symbolSize]),
symbolSize}function updateRipplePath(rippleGroup,effectCfg){rippleGroup.eachChild(function(ripplePath){
ripplePath.attr({z:effectCfg.z,zlevel:effectCfg.zlevel,style:{
stroke:"stroke"===effectCfg.brushType?effectCfg.color:null,fill:"fill"===effectCfg.brushType?effectCfg.color:null
}})})}function EffectSymbol(data,idx){Group.call(this);var symbol=new Symbol(data,idx),rippleGroup=new Group;
this.add(symbol),this.add(rippleGroup),rippleGroup.beforeUpdate=function(){
this.attr(symbol.getScale())},this.updateData(data,idx)}var zrUtil=__webpack_require__(4),symbolUtil=__webpack_require__(107),graphic=__webpack_require__(43),numberUtil=__webpack_require__(7),Symbol=__webpack_require__(106),Group=graphic.Group,EFFECT_RIPPLE_NUMBER=3,effectSymbolProto=EffectSymbol.prototype;
effectSymbolProto.stopEffectAnimation=function(){this.childAt(1).removeAll();
},effectSymbolProto.startEffectAnimation=function(effectCfg){
for(var symbolType=effectCfg.symbolType,color=effectCfg.color,rippleGroup=this.childAt(1),i=0;i<EFFECT_RIPPLE_NUMBER;i++){
var ripplePath=symbolUtil.createSymbol(symbolType,-1,-1,2,2,color);
ripplePath.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]
});var delay=-i/EFFECT_RIPPLE_NUMBER*effectCfg.period+effectCfg.effectOffset;
ripplePath.animate("",!0).when(effectCfg.period,{scale:[effectCfg.rippleScale/2,effectCfg.rippleScale/2]
}).delay(delay).start(),ripplePath.animateStyle(!0).when(effectCfg.period,{
opacity:0}).delay(delay).start(),rippleGroup.add(ripplePath)}
updateRipplePath(rippleGroup,effectCfg)},effectSymbolProto.updateEffectAnimation=function(effectCfg){
for(var oldEffectCfg=this._effectCfg,rippleGroup=this.childAt(1),DIFFICULT_PROPS=["symbolType","period","rippleScale"],i=0;i<DIFFICULT_PROPS;i++){
var propName=DIFFICULT_PROPS[i];if(oldEffectCfg[propName]!==effectCfg[propName])return this.stopEffectAnimation(),
void this.startEffectAnimation(effectCfg)}updateRipplePath(rippleGroup,effectCfg);
},effectSymbolProto.highlight=function(){this.trigger("emphasis");
},effectSymbolProto.downplay=function(){this.trigger("normal");
},effectSymbolProto.updateData=function(data,idx){var seriesModel=data.hostModel;
this.childAt(0).updateData(data,idx);var rippleGroup=this.childAt(1),itemModel=data.getItemModel(idx),symbolType=data.getItemVisual(idx,"symbol"),symbolSize=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize")),color=data.getItemVisual(idx,"color");
rippleGroup.attr("scale",symbolSize),rippleGroup.traverse(function(ripplePath){
ripplePath.attr({fill:color})});var symbolOffset=itemModel.getShallow("symbolOffset");
if(symbolOffset){var pos=rippleGroup.position;pos[0]=numberUtil.parsePercent(symbolOffset[0],symbolSize[0]),
pos[1]=numberUtil.parsePercent(symbolOffset[1],symbolSize[1]);
}rippleGroup.rotation=(itemModel.getShallow("symbolRotate")||0)*Math.PI/180||0;
var effectCfg={};if(effectCfg.showEffectOn=seriesModel.get("showEffectOn"),
effectCfg.rippleScale=itemModel.get("rippleEffect.scale"),effectCfg.brushType=itemModel.get("rippleEffect.brushType"),
effectCfg.period=1e3*itemModel.get("rippleEffect.period"),effectCfg.effectOffset=idx/data.count(),
effectCfg.z=itemModel.getShallow("z")||0,effectCfg.zlevel=itemModel.getShallow("zlevel")||0,
effectCfg.symbolType=symbolType,effectCfg.color=color,this.off("mouseover").off("mouseout").off("emphasis").off("normal"),
"render"===effectCfg.showEffectOn)this._effectCfg?this.updateEffectAnimation(effectCfg):this.startEffectAnimation(effectCfg),
this._effectCfg=effectCfg;else{this._effectCfg=null,this.stopEffectAnimation();
var symbol=this.childAt(0),onEmphasis=function(){symbol.trigger("emphasis"),
"render"!==effectCfg.showEffectOn&&this.startEffectAnimation(effectCfg);
},onNormal=function(){symbol.trigger("normal"),"render"!==effectCfg.showEffectOn&&this.stopEffectAnimation();
};this.on("mouseover",onEmphasis,this).on("mouseout",onNormal,this).on("emphasis",onEmphasis,this).on("normal",onNormal,this);
}this._effectCfg=effectCfg},effectSymbolProto.fadeOut=function(cb){
this.off("mouseover").off("mouseout").off("emphasis").off("normal"),
cb&&cb()},zrUtil.inherits(EffectSymbol,Group),module.exports=EffectSymbol;
},function(module,exports,__webpack_require__){__webpack_require__(265),
__webpack_require__(266);var echarts=__webpack_require__(1);echarts.registerLayout(__webpack_require__(271)),
echarts.registerVisual(__webpack_require__(272))},function(module,exports,__webpack_require__){
"use strict";function preprocessOption(seriesOpt){var data=seriesOpt.data;
data&&data[0]&&data[0][0]&&data[0][0].coord&&(console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),
seriesOpt.data=zrUtil.map(data,function(itemOpt){var coords=[itemOpt[0].coord,itemOpt[1].coord],target={
coords:coords};return itemOpt[0].name&&(target.fromName=itemOpt[0].name),
itemOpt[1].name&&(target.toName=itemOpt[1].name),zrUtil.mergeAll([target,itemOpt[0],itemOpt[1]]);
}))}var SeriesModel=__webpack_require__(28),List=__webpack_require__(98),zrUtil=__webpack_require__(4),formatUtil=__webpack_require__(6),CoordinateSystem=__webpack_require__(26),LinesSeries=SeriesModel.extend({
type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.normal.color",
init:function(option){preprocessOption(option),LinesSeries.superApply(this,"init",arguments);
},mergeOption:function(option){preprocessOption(option),LinesSeries.superApply(this,"mergeOption",arguments);
},getInitialData:function(option,ecModel){var CoordSys=CoordinateSystem.get(option.coordinateSystem);
if(!CoordSys)throw new Error("Unkown coordinate system "+option.coordinateSystem);
var lineData=new List(["value"],this);return lineData.hasItemOption=!1,
lineData.initData(option.data,[],function(dataItem,dimName,dataIndex,dimIndex){
if(dataItem instanceof Array)return NaN;lineData.hasItemOption=!0;
var value=dataItem.value;return null!=value?value instanceof Array?value[dimIndex]:value:void 0;
}),lineData},formatTooltip:function(dataIndex){var data=this.getData(),itemModel=data.getItemModel(dataIndex),name=itemModel.get("name");
if(name)return name;var fromName=itemModel.get("fromName"),toName=itemModel.get("toName"),html=[];
return null!=fromName&&html.push(fromName),null!=toName&&html.push(toName),
formatUtil.encodeHTML(html.join(" > "))},defaultOption:{coordinateSystem:"geo",
zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,
yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,
effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,
loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,
label:{normal:{show:!1,position:"end"}},lineStyle:{normal:{opacity:.5
}}}})},function(module,exports,__webpack_require__){var LineDraw=__webpack_require__(202),EffectLine=__webpack_require__(267),Line=__webpack_require__(203),Polyline=__webpack_require__(268),EffectPolyline=__webpack_require__(269),LargeLineDraw=__webpack_require__(270);
__webpack_require__(1).extendChartView({type:"lines",init:function(){},
render:function(seriesModel,ecModel,api){var data=seriesModel.getData(),lineDraw=this._lineDraw,hasEffect=seriesModel.get("effect.show"),isPolyline=seriesModel.get("polyline"),isLarge=seriesModel.get("large")&&data.count()>=seriesModel.get("largeThreshold");
hasEffect&&isLarge&&console.warn("Large lines not support effect"),
hasEffect===this._hasEffet&&isPolyline===this._isPolyline&&isLarge===this._isLarge||(lineDraw&&lineDraw.remove(),
lineDraw=this._lineDraw=isLarge?new LargeLineDraw:new LineDraw(isPolyline?hasEffect?EffectPolyline:Polyline:hasEffect?EffectLine:Line),
this._hasEffet=hasEffect,this._isPolyline=isPolyline,this._isLarge=isLarge);
var zlevel=seriesModel.get("zlevel"),trailLength=seriesModel.get("effect.trailLength"),zr=api.getZr();
if(zr.painter.getLayer(zlevel).clear(!0),null!=this._lastZlevel&&zr.configLayer(this._lastZlevel,{
motionBlur:!1}),hasEffect&&trailLength){var notInIndividual=!1;
ecModel.eachSeries(function(otherSeriesModel){otherSeriesModel!==seriesModel&&otherSeriesModel.get("zlevel")===zlevel&&(notInIndividual=!0);
}),notInIndividual&&console.warn("Lines with trail effect should have an individual zlevel"),
zr.configLayer(zlevel,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(trailLength/10+.9,1),0)
})}this.group.add(lineDraw.group),lineDraw.updateData(data),this._lastZlevel=zlevel;
},updateLayout:function(seriesModel,ecModel,api){this._lineDraw.updateLayout(seriesModel);
var zr=api.getZr();zr.painter.getLayer(this._lastZlevel).clear(!0);
},remove:function(ecModel,api){this._lineDraw&&this._lineDraw.remove(api,!0);
},dispose:function(){}})},function(module,exports,__webpack_require__){
function EffectLine(lineData,idx,seriesScope){graphic.Group.call(this),
this.add(this.createLine(lineData,idx,seriesScope)),this._updateEffectSymbol(lineData,idx);
}var graphic=__webpack_require__(43),Line=__webpack_require__(203),zrUtil=__webpack_require__(4),symbolUtil=__webpack_require__(107),vec2=__webpack_require__(10),curveUtil=__webpack_require__(50),effectLineProto=EffectLine.prototype;
effectLineProto.createLine=function(lineData,idx,seriesScope){
return new Line(lineData,idx,seriesScope)},effectLineProto._updateEffectSymbol=function(lineData,idx){
var itemModel=lineData.getItemModel(idx),effectModel=itemModel.getModel("effect"),size=effectModel.get("symbolSize"),symbolType=effectModel.get("symbol");
zrUtil.isArray(size)||(size=[size,size]);var color=effectModel.get("color")||lineData.getItemVisual(idx,"color"),symbol=this.childAt(1);
this._symbolType!==symbolType&&(this.remove(symbol),symbol=symbolUtil.createSymbol(symbolType,-.5,-.5,1,1,color),
symbol.z2=100,symbol.culling=!0,this.add(symbol)),symbol&&(symbol.setStyle("shadowColor",color),
symbol.setStyle(effectModel.getItemStyle(["color"])),symbol.attr("scale",size),
symbol.setColor(color),symbol.attr("scale",size),this._symbolType=symbolType,
this._updateEffectAnimation(lineData,effectModel,idx))},effectLineProto._updateEffectAnimation=function(lineData,effectModel,idx){
var symbol=this.childAt(1);if(symbol){var self=this,points=lineData.getItemLayout(idx),period=1e3*effectModel.get("period"),loop=effectModel.get("loop"),constantSpeed=effectModel.get("constantSpeed"),delayExpr=zrUtil.retrieve(effectModel.get("delay"),function(idx){
return idx/lineData.count()*period/3}),isDelayFunc="function"==typeof delayExpr;
if(symbol.ignore=!0,this.updateAnimationPoints(symbol,points),
constantSpeed>0&&(period=this.getLineLength(symbol)/constantSpeed*1e3),
period!==this._period||loop!==this._loop){symbol.stopAnimation();
var delay=delayExpr;isDelayFunc&&(delay=delayExpr(idx)),symbol.__t>0&&(delay=-period*symbol.__t),
symbol.__t=0;var animator=symbol.animate("",loop).when(period,{
__t:1}).delay(delay).during(function(){self.updateSymbolPosition(symbol);
});loop||animator.done(function(){self.remove(symbol)}),animator.start();
}this._period=period,this._loop=loop}},effectLineProto.getLineLength=function(symbol){
return vec2.dist(symbol.__p1,symbol.__cp1)+vec2.dist(symbol.__cp1,symbol.__p2);
},effectLineProto.updateAnimationPoints=function(symbol,points){
symbol.__p1=points[0],symbol.__p2=points[1],symbol.__cp1=points[2]||[(points[0][0]+points[1][0])/2,(points[0][1]+points[1][1])/2];
},effectLineProto.updateData=function(lineData,idx,seriesScope){
this.childAt(0).updateData(lineData,idx,seriesScope),this._updateEffectSymbol(lineData,idx);
},effectLineProto.updateSymbolPosition=function(symbol){var p1=symbol.__p1,p2=symbol.__p2,cp1=symbol.__cp1,t=symbol.__t,pos=symbol.position,quadraticAt=curveUtil.quadraticAt,quadraticDerivativeAt=curveUtil.quadraticDerivativeAt;
pos[0]=quadraticAt(p1[0],cp1[0],p2[0],t),pos[1]=quadraticAt(p1[1],cp1[1],p2[1],t);
var tx=quadraticDerivativeAt(p1[0],cp1[0],p2[0],t),ty=quadraticDerivativeAt(p1[1],cp1[1],p2[1],t);
symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2,symbol.ignore=!1;
},effectLineProto.updateLayout=function(lineData,idx){this.childAt(0).updateLayout(lineData,idx);
var effectModel=lineData.getItemModel(idx).getModel("effect");
this._updateEffectAnimation(lineData,effectModel,idx)},zrUtil.inherits(EffectLine,graphic.Group),
module.exports=EffectLine},function(module,exports,__webpack_require__){
function Polyline(lineData,idx,seriesScope){graphic.Group.call(this),
this._createPolyline(lineData,idx,seriesScope)}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),polylineProto=Polyline.prototype;
polylineProto._createPolyline=function(lineData,idx,seriesScope){
var points=lineData.getItemLayout(idx),line=new graphic.Polyline({
shape:{points:points}});this.add(line),this._updateCommonStl(lineData,idx,seriesScope);
},polylineProto.updateData=function(lineData,idx,seriesScope){
var seriesModel=lineData.hostModel,line=this.childAt(0),target={
shape:{points:lineData.getItemLayout(idx)}};graphic.updateProps(line,target,seriesModel,idx),
this._updateCommonStl(lineData,idx,seriesScope)},polylineProto._updateCommonStl=function(lineData,idx,seriesScope){
var line=this.childAt(0),itemModel=lineData.getItemModel(idx),visualColor=lineData.getItemVisual(idx,"color"),lineStyle=seriesScope&&seriesScope.lineStyle,hoverLineStyle=seriesScope&&seriesScope.hoverLineStyle;
seriesScope&&!lineData.hasItemOption||(lineStyle=itemModel.getModel("lineStyle.normal").getLineStyle(),
hoverLineStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle()),
line.useStyle(zrUtil.defaults({strokeNoScale:!0,fill:"none",stroke:visualColor
},lineStyle)),line.hoverStyle=hoverLineStyle,graphic.setHoverStyle(this);
},polylineProto.updateLayout=function(lineData,idx){var polyline=this.childAt(0);
polyline.setShape("points",lineData.getItemLayout(idx))},zrUtil.inherits(Polyline,graphic.Group),
module.exports=Polyline},function(module,exports,__webpack_require__){
function EffectPolyline(lineData,idx,seriesScope){EffectLine.call(this,lineData,idx,seriesScope),
this._lastFrame=0,this._lastFramePercent=0}var Polyline=__webpack_require__(268),zrUtil=__webpack_require__(4),EffectLine=__webpack_require__(267),vec2=__webpack_require__(10),effectPolylineProto=EffectPolyline.prototype;
effectPolylineProto.createLine=function(lineData,idx,seriesScope){
return new Polyline(lineData,idx,seriesScope)},effectPolylineProto.updateAnimationPoints=function(symbol,points){
this._points=points;for(var accLenArr=[0],len=0,i=1;i<points.length;i++){
var p1=points[i-1],p2=points[i];len+=vec2.dist(p1,p2),accLenArr.push(len);
}if(0!==len){for(var i=0;i<accLenArr.length;i++)accLenArr[i]/=len;
this._offsets=accLenArr,this._length=len}},effectPolylineProto.getLineLength=function(symbol){
return this._length},effectPolylineProto.updateSymbolPosition=function(symbol){
var t=symbol.__t,points=this._points,offsets=this._offsets,len=points.length;
if(offsets){var frame,lastFrame=this._lastFrame;if(t<this._lastFramePercent){
var start=Math.min(lastFrame+1,len-1);for(frame=start;frame>=0&&!(offsets[frame]<=t);frame--);
frame=Math.min(frame,len-2)}else{for(var frame=lastFrame;frame<len&&!(offsets[frame]>t);frame++);
frame=Math.min(frame-1,len-2)}vec2.lerp(symbol.position,points[frame],points[frame+1],(t-offsets[frame])/(offsets[frame+1]-offsets[frame]));
var tx=points[frame+1][0]-points[frame][0],ty=points[frame+1][1]-points[frame][1];
symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2,this._lastFrame=frame,
this._lastFramePercent=t,symbol.ignore=!1}},zrUtil.inherits(EffectPolyline,EffectLine),
module.exports=EffectPolyline},function(module,exports,__webpack_require__){
function LargeLineDraw(){this.group=new graphic.Group,this._lineEl=new LargeLineShape;
}var graphic=__webpack_require__(43),quadraticContain=__webpack_require__(55),lineContain=__webpack_require__(53),LargeLineShape=graphic.extendShape({
shape:{polyline:!1,segs:[]},buildPath:function(path,shape){for(var segs=shape.segs,isPolyline=shape.polyline,i=0;i<segs.length;i++){
var seg=segs[i];if(isPolyline){path.moveTo(seg[0][0],seg[0][1]);
for(var j=1;j<seg.length;j++)path.lineTo(seg[j][0],seg[j][1]);
}else path.moveTo(seg[0][0],seg[0][1]),seg.length>2?path.quadraticCurveTo(seg[2][0],seg[2][1],seg[1][0],seg[1][1]):path.lineTo(seg[1][0],seg[1][1]);
}},findDataIndex:function(x,y){for(var shape=this.shape,segs=shape.segs,isPolyline=shape.polyline,lineWidth=Math.max(this.style.lineWidth,1),i=0;i<segs.length;i++){
var seg=segs[i];if(isPolyline){for(var j=1;j<seg.length;j++)if(lineContain.containStroke(seg[j-1][0],seg[j-1][1],seg[j][0],seg[j][1],lineWidth,x,y))return i;
}else if(seg.length>2){if(quadraticContain.containStroke(seg[0][0],seg[0][1],seg[2][0],seg[2][1],seg[1][0],seg[1][1],lineWidth,x,y))return i;
}else if(lineContain.containStroke(seg[0][0],seg[0][1],seg[1][0],seg[1][1],lineWidth,x,y))return i;
}return-1}}),largeLineProto=LargeLineDraw.prototype;largeLineProto.updateData=function(data){
this.group.removeAll();var lineEl=this._lineEl,seriesModel=data.hostModel;
lineEl.setShape({segs:data.mapArray(data.getItemLayout),polyline:seriesModel.get("polyline")
}),lineEl.useStyle(seriesModel.getModel("lineStyle.normal").getLineStyle());
var visualColor=data.getVisual("color");visualColor&&lineEl.setStyle("stroke",visualColor),
lineEl.setStyle("fill"),lineEl.seriesIndex=seriesModel.seriesIndex,
lineEl.on("mousemove",function(e){lineEl.dataIndex=null;var dataIndex=lineEl.findDataIndex(e.offsetX,e.offsetY);
dataIndex>0&&(lineEl.dataIndex=dataIndex)}),this.group.add(lineEl);
},largeLineProto.updateLayout=function(seriesModel){var data=seriesModel.getData();
this._lineEl.setShape({segs:data.mapArray(data.getItemLayout)
})},largeLineProto.remove=function(){this.group.removeAll()},
module.exports=LargeLineDraw},function(module,exports,__webpack_require__){
module.exports=function(ecModel){ecModel.eachSeriesByType("lines",function(seriesModel){
var coordSys=seriesModel.coordinateSystem,lineData=seriesModel.getData();
lineData.each(function(idx){var itemModel=lineData.getItemModel(idx),coords=itemModel.option instanceof Array?itemModel.option:itemModel.get("coords");
if(!(coords instanceof Array&&coords.length>0&&coords[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(coords)+". Lines must have 2d coords array in data item.");
var pts=[];if(seriesModel.get("polyline"))for(var i=0;i<coords.length;i++)pts.push(coordSys.dataToPoint(coords[i]));else{
pts[0]=coordSys.dataToPoint(coords[0]),pts[1]=coordSys.dataToPoint(coords[1]);
var curveness=itemModel.get("lineStyle.normal.curveness");+curveness&&(pts[2]=[(pts[0][0]+pts[1][0])/2-(pts[0][1]-pts[1][1])*curveness,(pts[0][1]+pts[1][1])/2-(pts[1][0]-pts[0][0])*curveness]);
}lineData.setItemLayout(idx,pts)})})}},function(module,exports){
function normalize(a){return a instanceof Array||(a=[a,a]),a}
module.exports=function(ecModel){ecModel.eachSeriesByType("lines",function(seriesModel){
var data=seriesModel.getData(),symbolType=normalize(seriesModel.get("symbol")),symbolSize=normalize(seriesModel.get("symbolSize")),opacityQuery="lineStyle.normal.opacity".split(".");
data.setVisual("fromSymbol",symbolType&&symbolType[0]),data.setVisual("toSymbol",symbolType&&symbolType[1]),
data.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]),data.setVisual("toSymbolSize",symbolSize&&symbolSize[1]),
data.setVisual("opacity",seriesModel.get(opacityQuery)),data.each(function(idx){
var itemModel=data.getItemModel(idx),symbolType=normalize(itemModel.getShallow("symbol",!0)),symbolSize=normalize(itemModel.getShallow("symbolSize",!0)),opacity=itemModel.get(opacityQuery);
symbolType[0]&&data.setItemVisual(idx,"fromSymbol",symbolType[0]),
symbolType[1]&&data.setItemVisual(idx,"toSymbol",symbolType[1]),
symbolSize[0]&&data.setItemVisual(idx,"fromSymbolSize",symbolSize[0]),
symbolSize[1]&&data.setItemVisual(idx,"toSymbolSize",symbolSize[1]),
data.setItemVisual(idx,"opacity",opacity)})})}},function(module,exports,__webpack_require__){
__webpack_require__(274),__webpack_require__(275)},function(module,exports,__webpack_require__){
var SeriesModel=__webpack_require__(28),createListFromArray=__webpack_require__(102);
module.exports=SeriesModel.extend({type:"series.heatmap",getInitialData:function(option,ecModel){
return createListFromArray(option.data,this,ecModel)},defaultOption:{
coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,
pointSize:20,maxOpacity:1,minOpacity:0}})},function(module,exports,__webpack_require__){
function getIsInPiecewiseRange(dataExtent,pieceList,selected){
var dataSpan=dataExtent[1]-dataExtent[0];pieceList=zrUtil.map(pieceList,function(piece){
return{interval:[(piece.interval[0]-dataExtent[0])/dataSpan,(piece.interval[1]-dataExtent[0])/dataSpan]
}});var len=pieceList.length,lastIndex=0;return function(val){
for(var i=lastIndex;i<len;i++){var interval=pieceList[i].interval;
if(interval[0]<=val&&val<=interval[1]){lastIndex=i;break}}if(i===len)for(var i=lastIndex-1;i>=0;i--){
var interval=pieceList[i].interval;if(interval[0]<=val&&val<=interval[1]){
lastIndex=i;break}}return i>=0&&i<len&&selected[i]}}function getIsInContinuousRange(dataExtent,range){
var dataSpan=dataExtent[1]-dataExtent[0];return range=[(range[0]-dataExtent[0])/dataSpan,(range[1]-dataExtent[0])/dataSpan],
function(val){return val>=range[0]&&val<=range[1]}}function isGeoCoordSys(coordSys){
var dimensions=coordSys.dimensions;return"lng"===dimensions[0]&&"lat"===dimensions[1];
}var graphic=__webpack_require__(43),HeatmapLayer=__webpack_require__(276),zrUtil=__webpack_require__(4);
module.exports=__webpack_require__(1).extendChartView({type:"heatmap",
render:function(seriesModel,ecModel,api){var visualMapOfThisSeries;
if(ecModel.eachComponent("visualMap",function(visualMap){visualMap.eachTargetSeries(function(targetSeries){
targetSeries===seriesModel&&(visualMapOfThisSeries=visualMap);
})}),!visualMapOfThisSeries)throw new Error("Heatmap must use with visualMap");
this.group.removeAll();var coordSys=seriesModel.coordinateSystem;
"cartesian2d"===coordSys.type?this._renderOnCartesian(coordSys,seriesModel,api):isGeoCoordSys(coordSys)&&this._renderOnGeo(coordSys,seriesModel,visualMapOfThisSeries,api);
},dispose:function(){},_renderOnCartesian:function(cartesian,seriesModel,api){
var xAxis=cartesian.getAxis("x"),yAxis=cartesian.getAxis("y"),group=this.group;
if("category"!==xAxis.type||"category"!==yAxis.type)throw new Error("Heatmap on cartesian must have two category axes");
if(!xAxis.onBand||!yAxis.onBand)throw new Error("Heatmap on cartesian must have two axes with boundaryGap true");
var width=xAxis.getBandWidth(),height=yAxis.getBandWidth(),data=seriesModel.getData(),itemStyleQuery="itemStyle.normal",hoverItemStyleQuery="itemStyle.emphasis",labelQuery="label.normal",hoverLabelQuery="label.emphasis",style=seriesModel.getModel(itemStyleQuery).getItemStyle(["color"]),hoverStl=seriesModel.getModel(hoverItemStyleQuery).getItemStyle(),labelModel=seriesModel.getModel("label.normal"),hoverLabelModel=seriesModel.getModel("label.emphasis");
data.each(["x","y","z"],function(x,y,z,idx){var itemModel=data.getItemModel(idx),point=cartesian.dataToPoint([x,y]);
if(!isNaN(z)){var rect=new graphic.Rect({shape:{x:point[0]-width/2,
y:point[1]-height/2,width:width,height:height},style:{fill:data.getItemVisual(idx,"color"),
opacity:data.getItemVisual(idx,"opacity")}});data.hasItemOption&&(style=itemModel.getModel(itemStyleQuery).getItemStyle(["color"]),
hoverStl=itemModel.getModel(hoverItemStyleQuery).getItemStyle(),
labelModel=itemModel.getModel(labelQuery),hoverLabelModel=itemModel.getModel(hoverLabelQuery));
var rawValue=seriesModel.getRawValue(idx),defaultText="-";rawValue&&null!=rawValue[2]&&(defaultText=rawValue[2]),
labelModel.getShallow("show")&&(graphic.setText(style,labelModel),
style.text=seriesModel.getFormattedLabel(idx,"normal")||defaultText),
hoverLabelModel.getShallow("show")&&(graphic.setText(hoverStl,hoverLabelModel),
hoverStl.text=seriesModel.getFormattedLabel(idx,"emphasis")||defaultText),
rect.setStyle(style),graphic.setHoverStyle(rect,data.hasItemOption?hoverStl:zrUtil.extend({},hoverStl)),
group.add(rect),data.setItemGraphicEl(idx,rect)}})},_renderOnGeo:function(geo,seriesModel,visualMapModel,api){
var inRangeVisuals=visualMapModel.targetVisuals.inRange,outOfRangeVisuals=visualMapModel.targetVisuals.outOfRange,data=seriesModel.getData(),hmLayer=this._hmLayer||this._hmLayer||new HeatmapLayer;
hmLayer.blurSize=seriesModel.get("blurSize"),hmLayer.pointSize=seriesModel.get("pointSize"),
hmLayer.minOpacity=seriesModel.get("minOpacity"),hmLayer.maxOpacity=seriesModel.get("maxOpacity");
var rect=geo.getViewRect().clone(),roamTransform=geo.getRoamTransform().transform;
rect.applyTransform(roamTransform);var x=Math.max(rect.x,0),y=Math.max(rect.y,0),x2=Math.min(rect.width+rect.x,api.getWidth()),y2=Math.min(rect.height+rect.y,api.getHeight()),width=x2-x,height=y2-y,points=data.mapArray(["lng","lat","value"],function(lng,lat,value){
var pt=geo.dataToPoint([lng,lat]);return pt[0]-=x,pt[1]-=y,pt.push(value),
pt}),dataExtent=visualMapModel.getExtent(),isInRange="visualMap.continuous"===visualMapModel.type?getIsInContinuousRange(dataExtent,visualMapModel.option.range):getIsInPiecewiseRange(dataExtent,visualMapModel.getPieceList(),visualMapModel.option.selected);
hmLayer.update(points,width,height,inRangeVisuals.color.getNormalizer(),{
inRange:inRangeVisuals.color.getColorMapper(),outOfRange:outOfRangeVisuals.color.getColorMapper()
},isInRange);var img=new graphic.Image({style:{width:width,height:height,
x:x,y:y,image:hmLayer.canvas},silent:!0});this.group.add(img);
}})},function(module,exports,__webpack_require__){function Heatmap(){
var canvas=zrUtil.createCanvas();this.canvas=canvas,this.blurSize=30,
this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={};
}var GRADIENT_LEVELS=256,zrUtil=__webpack_require__(4);Heatmap.prototype={
update:function(data,width,height,normalize,colorFunc,isInRange){
var brush=this._getBrush(),gradientInRange=this._getGradient(data,colorFunc,"inRange"),gradientOutOfRange=this._getGradient(data,colorFunc,"outOfRange"),r=this.pointSize+this.blurSize,canvas=this.canvas,ctx=canvas.getContext("2d"),len=data.length;
canvas.width=width,canvas.height=height;for(var i=0;i<len;++i){
var p=data[i],x=p[0],y=p[1],value=p[2],alpha=normalize(value);
ctx.globalAlpha=alpha,ctx.drawImage(brush,x-r,y-r)}for(var imageData=ctx.getImageData(0,0,canvas.width,canvas.height),pixels=imageData.data,offset=0,pixelLen=pixels.length,minOpacity=this.minOpacity,maxOpacity=this.maxOpacity,diffOpacity=maxOpacity-minOpacity;offset<pixelLen;){
var alpha=pixels[offset+3]/256,gradientOffset=4*Math.floor(alpha*(GRADIENT_LEVELS-1));
if(alpha>0){var gradient=isInRange(alpha)?gradientInRange:gradientOutOfRange;
alpha>0&&(alpha=alpha*diffOpacity+minOpacity),pixels[offset++]=gradient[gradientOffset],
pixels[offset++]=gradient[gradientOffset+1],pixels[offset++]=gradient[gradientOffset+2],
pixels[offset++]=gradient[gradientOffset+3]*alpha*256}else offset+=4;
}return ctx.putImageData(imageData,0,0),canvas},_getBrush:function(){
var brushCanvas=this._brushCanvas||(this._brushCanvas=zrUtil.createCanvas()),r=this.pointSize+this.blurSize,d=2*r;
brushCanvas.width=d,brushCanvas.height=d;var ctx=brushCanvas.getContext("2d");
return ctx.clearRect(0,0,d,d),ctx.shadowOffsetX=d,ctx.shadowBlur=this.blurSize,
ctx.shadowColor="#000",ctx.beginPath(),ctx.arc(-r,r,this.pointSize,0,2*Math.PI,!0),
ctx.closePath(),ctx.fill(),brushCanvas},_getGradient:function(data,colorFunc,state){
for(var gradientPixels=this._gradientPixels,pixelsSingleState=gradientPixels[state]||(gradientPixels[state]=new Uint8ClampedArray(1024)),color=[],off=0,i=0;i<256;i++)colorFunc[state](i/255,!0,color),
pixelsSingleState[off++]=color[0],pixelsSingleState[off++]=color[1],
pixelsSingleState[off++]=color[2],pixelsSingleState[off++]=color[3];
return pixelsSingleState}},module.exports=Heatmap},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4);__webpack_require__(114),__webpack_require__(278),
__webpack_require__(279);var barLayoutGrid=__webpack_require__(140),echarts=__webpack_require__(1);
echarts.registerLayout(zrUtil.curry(barLayoutGrid,"pictorialBar")),
echarts.registerVisual(zrUtil.curry(__webpack_require__(110),"pictorialBar","roundRect",null)),
__webpack_require__(113)},function(module,exports,__webpack_require__){
var PictorialBarSeries=__webpack_require__(136).extend({type:"series.pictorialBar",
dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,
symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,
symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,
symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1
},getInitialData:function(option){return option.stack=null,PictorialBarSeries.superApply(this,"getInitialData",arguments);
}});module.exports=PictorialBarSeries},function(module,exports,__webpack_require__){
function getSymbolMeta(data,dataIndex,itemModel,opt){var layout=data.getItemLayout(dataIndex),symbolRepeat=itemModel.get("symbolRepeat"),symbolClip=itemModel.get("symbolClip"),symbolPosition=itemModel.get("symbolPosition")||"start",symbolRotate=itemModel.get("symbolRotate"),rotation=(symbolRotate||0)*Math.PI/180||0,symbolPatternSize=itemModel.get("symbolPatternSize")||2,isAnimationEnabled=itemModel.isAnimationEnabled(),symbolMeta={
dataIndex:dataIndex,layout:layout,itemModel:itemModel,symbolType:data.getItemVisual(dataIndex,"symbol")||"circle",
color:data.getItemVisual(dataIndex,"color"),symbolClip:symbolClip,
symbolRepeat:symbolRepeat,symbolRepeatDirection:itemModel.get("symbolRepeatDirection"),
symbolPatternSize:symbolPatternSize,rotation:rotation,animationModel:isAnimationEnabled?itemModel:null,
hoverAnimation:isAnimationEnabled&&itemModel.get("hoverAnimation"),
z2:itemModel.getShallow("z",!0)||0};prepareBarLength(itemModel,symbolRepeat,layout,opt,symbolMeta),
prepareSymbolSize(data,dataIndex,layout,symbolRepeat,symbolClip,symbolMeta.boundingLength,symbolMeta.pxSign,symbolPatternSize,opt,symbolMeta),
prepareLineWidth(itemModel,symbolMeta.symbolScale,rotation,opt,symbolMeta);
var symbolSize=symbolMeta.symbolSize,symbolOffset=itemModel.get("symbolOffset");
return zrUtil.isArray(symbolOffset)&&(symbolOffset=[parsePercent(symbolOffset[0],symbolSize[0]),parsePercent(symbolOffset[1],symbolSize[1])]),
prepareLayoutInfo(itemModel,symbolSize,layout,symbolRepeat,symbolClip,symbolOffset,symbolPosition,symbolMeta.valueLineWidth,symbolMeta.boundingLength,symbolMeta.repeatCutLength,opt,symbolMeta),
symbolMeta}function prepareBarLength(itemModel,symbolRepeat,layout,opt,output){
var valueDim=opt.valueDim,symbolBoundingData=itemModel.get("symbolBoundingData"),valueAxis=opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis()),zeroPx=valueAxis.toGlobalCoord(valueAxis.dataToCoord(0)),boundingLength=output.boundingLength=null!=symbolBoundingData?valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.scale.parse(symbolBoundingData)))-zeroPx:symbolRepeat?opt.coordSysExtent[valueDim.index][1-+(layout[valueDim.wh]<=0)]-zeroPx:layout[valueDim.wh];
symbolRepeat&&(output.repeatCutLength=layout[valueDim.wh]),output.pxSign=boundingLength>0?1:boundingLength<0?-1:0;
}function prepareSymbolSize(data,dataIndex,layout,symbolRepeat,symbolClip,boundingLength,pxSign,symbolPatternSize,opt,output){
var valueDim=opt.valueDim,categoryDim=opt.categoryDim,categorySize=Math.abs(layout[categoryDim.wh]),symbolSize=data.getItemVisual(dataIndex,"symbolSize");
zrUtil.isArray(symbolSize)?symbolSize=symbolSize.slice():(null==symbolSize&&(symbolSize="100%"),
symbolSize=[symbolSize,symbolSize]),symbolSize[categoryDim.index]=parsePercent(symbolSize[categoryDim.index],categorySize),
symbolSize[valueDim.index]=parsePercent(symbolSize[valueDim.index],symbolRepeat?categorySize:Math.abs(boundingLength)),
output.symbolSize=symbolSize;var symbolScale=output.symbolScale=[symbolSize[0]/symbolPatternSize,symbolSize[1]/symbolPatternSize];
symbolScale[valueDim.index]*=(opt.isHorizontal?-1:1)*pxSign}function prepareLineWidth(itemModel,symbolScale,rotation,opt,output){
var valueLineWidth=itemModel.get(BAR_BORDER_WIDTH_QUERY)||0;valueLineWidth&&(pathForLineWidth.attr({
scale:symbolScale.slice(),rotation:rotation}),pathForLineWidth.updateTransform(),
valueLineWidth/=pathForLineWidth.getLineScale(),valueLineWidth*=symbolScale[opt.valueDim.index]),
output.valueLineWidth=valueLineWidth}function prepareLayoutInfo(itemModel,symbolSize,layout,symbolRepeat,symbolClip,symbolOffset,symbolPosition,valueLineWidth,boundingLength,repeatCutLength,opt,output){
var categoryDim=opt.categoryDim,valueDim=opt.valueDim,pxSign=output.pxSign,unitLength=Math.max(symbolSize[valueDim.index]+valueLineWidth,0),pathLen=unitLength;
if(symbolRepeat){var absBoundingLength=Math.abs(boundingLength),symbolMargin=zrUtil.retrieve(itemModel.get("symbolMargin"),"15%")+"",hasEndGap=!1;
symbolMargin.lastIndexOf("!")===symbolMargin.length-1&&(hasEndGap=!0,
symbolMargin=symbolMargin.slice(0,symbolMargin.length-1)),symbolMargin=parsePercent(symbolMargin,symbolSize[valueDim.index]);
var uLenWithMargin=Math.max(unitLength+2*symbolMargin,0),endFix=hasEndGap?0:2*symbolMargin,repeatSpecified=numberUtil.isNumeric(symbolRepeat),repeatTimes=repeatSpecified?symbolRepeat:toIntTimes((absBoundingLength+endFix)/uLenWithMargin),mDiff=absBoundingLength-repeatTimes*unitLength;
symbolMargin=mDiff/2/(hasEndGap?repeatTimes:repeatTimes-1),uLenWithMargin=unitLength+2*symbolMargin,
endFix=hasEndGap?0:2*symbolMargin,repeatSpecified||"fixed"===symbolRepeat||(repeatTimes=repeatCutLength?toIntTimes((Math.abs(repeatCutLength)+endFix)/uLenWithMargin):0),
pathLen=repeatTimes*uLenWithMargin-endFix,output.repeatTimes=repeatTimes,
output.symbolMargin=symbolMargin}var sizeFix=pxSign*(pathLen/2),pathPosition=output.pathPosition=[];
pathPosition[categoryDim.index]=layout[categoryDim.wh]/2,pathPosition[valueDim.index]="start"===symbolPosition?sizeFix:"end"===symbolPosition?boundingLength-sizeFix:boundingLength/2,
symbolOffset&&(pathPosition[0]+=symbolOffset[0],pathPosition[1]+=symbolOffset[1]);
var bundlePosition=output.bundlePosition=[];bundlePosition[categoryDim.index]=layout[categoryDim.xy],
bundlePosition[valueDim.index]=layout[valueDim.xy];var barRectShape=output.barRectShape=zrUtil.extend({},layout);
barRectShape[valueDim.wh]=pxSign*Math.max(Math.abs(layout[valueDim.wh]),Math.abs(pathPosition[valueDim.index]+sizeFix)),
barRectShape[categoryDim.wh]=layout[categoryDim.wh];var clipShape=output.clipShape={};
clipShape[categoryDim.xy]=-layout[categoryDim.xy],clipShape[categoryDim.wh]=opt.ecSize[categoryDim.wh],
clipShape[valueDim.xy]=0,clipShape[valueDim.wh]=layout[valueDim.wh];
}function createPath(symbolMeta){var symbolPatternSize=symbolMeta.symbolPatternSize,path=symbolUtil.createSymbol(symbolMeta.symbolType,-symbolPatternSize/2,-symbolPatternSize/2,symbolPatternSize,symbolPatternSize,symbolMeta.color);
return path.attr({culling:!0}),"image"!==path.type&&path.setStyle({
strokeNoScale:!0}),path}function createOrUpdateRepeatSymbols(bar,opt,symbolMeta,isUpdate){
function makeTarget(index){var position=pathPosition.slice(),pxSign=symbolMeta.pxSign,i=index;
return("start"===symbolMeta.symbolRepeatDirection?pxSign>0:pxSign<0)&&(i=repeatTimes-1-index),
position[valueDim.index]=unit*(i-repeatTimes/2+.5)+pathPosition[valueDim.index],
{position:position,scale:symbolMeta.symbolScale.slice(),rotation:symbolMeta.rotation
}}function onMouseOver(){eachPath(bar,function(path){path.trigger("emphasis");
})}function onMouseOut(){eachPath(bar,function(path){path.trigger("normal");
})}var bundle=bar.__pictorialBundle,symbolSize=symbolMeta.symbolSize,valueLineWidth=symbolMeta.valueLineWidth,pathPosition=symbolMeta.pathPosition,valueDim=opt.valueDim,repeatTimes=symbolMeta.repeatTimes||0,index=0,unit=symbolSize[opt.valueDim.index]+valueLineWidth+2*symbolMeta.symbolMargin;
for(eachPath(bar,function(path){path.__pictorialAnimationIndex=index,
path.__pictorialRepeatTimes=repeatTimes,index<repeatTimes?updateAttr(path,null,makeTarget(index),symbolMeta,isUpdate):updateAttr(path,null,{
scale:[0,0]},symbolMeta,isUpdate,function(){bundle.remove(path);
}),updateHoverAnimation(path,symbolMeta),index++});index<repeatTimes;index++){
var path=createPath(symbolMeta);path.__pictorialAnimationIndex=index,
path.__pictorialRepeatTimes=repeatTimes,bundle.add(path);var target=makeTarget(index,!0);
updateAttr(path,{position:target.position,scale:[0,0]},{scale:target.scale,
rotation:target.rotation},symbolMeta,isUpdate),path.on("mouseover",onMouseOver).on("mouseout",onMouseOut),
updateHoverAnimation(path,symbolMeta)}}function createOrUpdateSingleSymbol(bar,opt,symbolMeta,isUpdate){
function onMouseOver(){this.trigger("emphasis")}function onMouseOut(){
this.trigger("normal")}var bundle=bar.__pictorialBundle,mainPath=bar.__pictorialMainPath;
mainPath?updateAttr(mainPath,null,{position:symbolMeta.pathPosition.slice(),
scale:symbolMeta.symbolScale.slice(),rotation:symbolMeta.rotation
},symbolMeta,isUpdate):(mainPath=bar.__pictorialMainPath=createPath(symbolMeta),
bundle.add(mainPath),updateAttr(mainPath,{position:symbolMeta.pathPosition.slice(),
scale:[0,0],rotation:symbolMeta.rotation},{scale:symbolMeta.symbolScale.slice()
},symbolMeta,isUpdate),mainPath.on("mouseover",onMouseOver).on("mouseout",onMouseOut)),
updateHoverAnimation(mainPath,symbolMeta)}function createOrUpdateBarRect(bar,symbolMeta,isUpdate){
var rectShape=zrUtil.extend({},symbolMeta.barRectShape),barRect=bar.__pictorialBarRect;
barRect?updateAttr(barRect,null,{shape:rectShape},symbolMeta,isUpdate):(barRect=bar.__pictorialBarRect=new graphic.Rect({
z2:2,shape:rectShape,silent:!0,style:{stroke:"transparent",fill:"transparent",
lineWidth:0}}),bar.add(barRect))}function createOrUpdateClip(bar,opt,symbolMeta,isUpdate){
if(symbolMeta.symbolClip){var clipPath=bar.__pictorialClipPath,clipShape=zrUtil.extend({},symbolMeta.clipShape),valueDim=opt.valueDim,animationModel=symbolMeta.animationModel,dataIndex=symbolMeta.dataIndex;
if(clipPath)graphic.updateProps(clipPath,{shape:clipShape},animationModel,dataIndex);else{
clipShape[valueDim.wh]=0,clipPath=new graphic.Rect({shape:clipShape
}),bar.__pictorialBundle.setClipPath(clipPath),bar.__pictorialClipPath=clipPath;
var target={};target[valueDim.wh]=symbolMeta.clipShape[valueDim.wh],
graphic[isUpdate?"updateProps":"initProps"](clipPath,{shape:target
},animationModel,dataIndex)}}}function getItemModel(data,dataIndex){
var itemModel=data.getItemModel(dataIndex);return itemModel.getAnimationDelayParams=getAnimationDelayParams,
itemModel.isAnimationEnabled=isAnimationEnabled,itemModel}function getAnimationDelayParams(path){
return{index:path.__pictorialAnimationIndex,count:path.__pictorialRepeatTimes
}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation");
}function updateHoverAnimation(path,symbolMeta){path.off("emphasis").off("normal");
var scale=symbolMeta.symbolScale.slice();symbolMeta.hoverAnimation&&path.on("emphasis",function(){
this.animateTo({scale:[1.1*scale[0],1.1*scale[1]]},400,"elasticOut");
}).on("normal",function(){this.animateTo({scale:scale.slice()
},400,"elasticOut")})}function createBar(data,opt,symbolMeta,isUpdate){
var bar=new graphic.Group,bundle=new graphic.Group;return bar.add(bundle),
bar.__pictorialBundle=bundle,bundle.attr("position",symbolMeta.bundlePosition.slice()),
symbolMeta.symbolRepeat?createOrUpdateRepeatSymbols(bar,opt,symbolMeta):createOrUpdateSingleSymbol(bar,opt,symbolMeta),
createOrUpdateBarRect(bar,symbolMeta,isUpdate),createOrUpdateClip(bar,opt,symbolMeta,isUpdate),
bar.__pictorialShapeStr=getShapeStr(data,symbolMeta),bar.__pictorialSymbolMeta=symbolMeta,
bar}function updateBar(bar,opt,symbolMeta){var animationModel=symbolMeta.animationModel,dataIndex=symbolMeta.dataIndex,bundle=bar.__pictorialBundle;
graphic.updateProps(bundle,{position:symbolMeta.bundlePosition.slice()
},animationModel,dataIndex),symbolMeta.symbolRepeat?createOrUpdateRepeatSymbols(bar,opt,symbolMeta,!0):createOrUpdateSingleSymbol(bar,opt,symbolMeta,!0),
createOrUpdateBarRect(bar,symbolMeta,!0),createOrUpdateClip(bar,opt,symbolMeta,!0);
}function removeBar(data,dataIndex,animationModel,bar){var labelRect=bar.__pictorialBarRect;
labelRect&&(labelRect.style.text="");var pathes=[];eachPath(bar,function(path){
pathes.push(path)}),bar.__pictorialMainPath&&pathes.push(bar.__pictorialMainPath),
bar.__pictorialClipPath&&(animationModel=null),zrUtil.each(pathes,function(path){
graphic.updateProps(path,{scale:[0,0]},animationModel,dataIndex,function(){
bar.parent&&bar.parent.remove(bar)})}),data.setItemGraphicEl(dataIndex,null);
}function getShapeStr(data,symbolMeta){return[data.getItemVisual(symbolMeta.dataIndex,"symbol")||"none",!!symbolMeta.symbolRepeat,!!symbolMeta.symbolClip].join(":");
}function eachPath(bar,cb,context){zrUtil.each(bar.__pictorialBundle.children(),function(el){
el!==bar.__pictorialBarRect&&cb.call(context,el)})}function updateAttr(el,immediateAttrs,animationAttrs,symbolMeta,isUpdate,cb){
immediateAttrs&&el.attr(immediateAttrs),symbolMeta.symbolClip&&!isUpdate?animationAttrs&&el.attr(animationAttrs):animationAttrs&&graphic[isUpdate?"updateProps":"initProps"](el,animationAttrs,symbolMeta.animationModel,symbolMeta.dataIndex,cb);
}function updateCommon(bar,opt,symbolMeta){var color=symbolMeta.color,dataIndex=symbolMeta.dataIndex,itemModel=symbolMeta.itemModel,normalStyle=itemModel.getModel("itemStyle.normal").getItemStyle(["color"]),hoverStyle=itemModel.getModel("itemStyle.emphasis").getItemStyle();
eachPath(bar,function(path){path.setColor(color),path.setStyle(zrUtil.defaults({
fill:color,opacity:symbolMeta.opacity},normalStyle)),graphic.setHoverStyle(path,hoverStyle),
path.z2=symbolMeta.z2});var barRectHoverStyle={},barPositionOutside=opt.valueDim.posDesc[+(symbolMeta.boundingLength>0)],barRect=bar.__pictorialBarRect;
helper.setLabel(barRect.style,barRectHoverStyle,itemModel,color,opt.seriesModel,dataIndex,barPositionOutside),
graphic.setHoverStyle(barRect,barRectHoverStyle)}function toIntTimes(times){
var roundedTimes=Math.round(times);return Math.abs(times-roundedTimes)<1e-4?roundedTimes:Math.ceil(times);
}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),symbolUtil=__webpack_require__(107),numberUtil=__webpack_require__(7),helper=__webpack_require__(138),parsePercent=numberUtil.parsePercent,BAR_BORDER_WIDTH_QUERY=["itemStyle","normal","borderWidth"],LAYOUT_ATTRS=[{
xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",
index:1,posDesc:["top","bottom"]}],pathForLineWidth=new graphic.Circle,BarView=__webpack_require__(1).extendChartView({
type:"pictorialBar",render:function(seriesModel,ecModel,api){
var group=this.group,data=seriesModel.getData(),oldData=this._data,cartesian=seriesModel.coordinateSystem,baseAxis=cartesian.getBaseAxis(),isHorizontal=!!baseAxis.isHorizontal(),coordSysRect=cartesian.grid.getRect(),opt={
ecSize:{width:api.getWidth(),height:api.getHeight()},seriesModel:seriesModel,
coordSys:cartesian,coordSysExtent:[[coordSysRect.x,coordSysRect.x+coordSysRect.width],[coordSysRect.y,coordSysRect.y+coordSysRect.height]],
isHorizontal:isHorizontal,valueDim:LAYOUT_ATTRS[+isHorizontal],
categoryDim:LAYOUT_ATTRS[1-isHorizontal]};return data.diff(oldData).add(function(dataIndex){
if(data.hasValue(dataIndex)){var itemModel=getItemModel(data,dataIndex),symbolMeta=getSymbolMeta(data,dataIndex,itemModel,opt),bar=createBar(data,opt,symbolMeta);
data.setItemGraphicEl(dataIndex,bar),group.add(bar),updateCommon(bar,opt,symbolMeta);
}}).update(function(newIndex,oldIndex){var bar=oldData.getItemGraphicEl(oldIndex);
if(!data.hasValue(newIndex))return void group.remove(bar);var itemModel=getItemModel(data,newIndex),symbolMeta=getSymbolMeta(data,newIndex,itemModel,opt),pictorialShapeStr=getShapeStr(data,symbolMeta);
bar&&pictorialShapeStr!==bar.__pictorialShapeStr&&(group.remove(bar),
data.setItemGraphicEl(newIndex,null),bar=null),bar?updateBar(bar,opt,symbolMeta):bar=createBar(data,opt,symbolMeta,!0),
data.setItemGraphicEl(newIndex,bar),bar.__pictorialSymbolMeta=symbolMeta,
group.add(bar),updateCommon(bar,opt,symbolMeta)}).remove(function(dataIndex){
var bar=oldData.getItemGraphicEl(dataIndex);bar&&removeBar(oldData,dataIndex,bar.__pictorialSymbolMeta.animationModel,bar);
}).execute(),this._data=data,this.group},dispose:zrUtil.noop,
remove:function(ecModel,api){var group=this.group,data=this._data;
ecModel.get("animation")?data&&data.eachItemGraphicEl(function(bar){
removeBar(data,bar.dataIndex,ecModel,bar)}):group.removeAll();
}});module.exports=BarView},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);
__webpack_require__(281),__webpack_require__(287),__webpack_require__(288),
echarts.registerLayout(__webpack_require__(290)),echarts.registerVisual(__webpack_require__(291)),
echarts.registerProcessor(zrUtil.curry(__webpack_require__(149),"themeRiver"));
},function(module,exports,__webpack_require__){__webpack_require__(282),
__webpack_require__(285),__webpack_require__(286);var echarts=__webpack_require__(1);
echarts.extendComponentView({type:"single"})},function(module,exports,__webpack_require__){
function create(ecModel,api){var singles=[];return ecModel.eachComponent("singleAxis",function(axisModel,idx){
var single=new Single(axisModel,ecModel,api);single.name="single_"+idx,
single.resize(axisModel,api),axisModel.coordinateSystem=single,
singles.push(single)}),ecModel.eachSeries(function(seriesModel){
if("singleAxis"===seriesModel.get("coordinateSystem")){var singleAxisModel=ecModel.queryComponents({
mainType:"singleAxis",index:seriesModel.get("singleAxisIndex"),
id:seriesModel.get("singleAxisId")})[0];seriesModel.coordinateSystem=singleAxisModel&&singleAxisModel.coordinateSystem;
}}),singles}var Single=__webpack_require__(283);__webpack_require__(26).register("single",{
create:create,dimensions:Single.prototype.dimensions})},function(module,exports,__webpack_require__){
function Single(axisModel,ecModel,api){this.dimension="single",
this.dimensions=["single"],this._axis=null,this._rect,this._init(axisModel,ecModel,api),
this._model=axisModel}var SingleAxis=__webpack_require__(284),axisHelper=__webpack_require__(115),layout=__webpack_require__(21);
Single.prototype={type:"singleAxis",constructor:Single,_init:function(axisModel,ecModel,api){
var dim=this.dimension,axis=new SingleAxis(dim,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisModel.get("position")),isCategory="category"===axis.type;
axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),
axis.orient=axisModel.get("orient"),axisModel.axis=axis,axis.model=axisModel,
this._axis=axis},update:function(ecModel,api){ecModel.eachSeries(function(seriesModel){
if(seriesModel.coordinateSystem===this){var data=seriesModel.getData(),dim=this.dimension;
this._axis.scale.unionExtentFromData(data,seriesModel.coordDimToDataDim(dim)),
axisHelper.niceScaleExtent(this._axis,this._axis.model)}},this);
},resize:function(axisModel,api){this._rect=layout.getLayoutRect({
left:axisModel.get("left"),top:axisModel.get("top"),right:axisModel.get("right"),
bottom:axisModel.get("bottom"),width:axisModel.get("width"),height:axisModel.get("height")
},{width:api.getWidth(),height:api.getHeight()}),this._adjustAxis();
},getRect:function(){return this._rect},_adjustAxis:function(){
var rect=this._rect,axis=this._axis,isHorizontal=axis.isHorizontal(),extent=isHorizontal?[0,rect.width]:[0,rect.height],idx=axis.reverse?1:0;
axis.setExtent(extent[idx],extent[1-idx]),this._updateAxisTransform(axis,isHorizontal?rect.x:rect.y);
},_updateAxisTransform:function(axis,coordBase){var axisExtent=axis.getExtent(),extentSum=axisExtent[0]+axisExtent[1],isHorizontal=axis.isHorizontal();
axis.toGlobalCoord=isHorizontal?function(coord){return coord+coordBase;
}:function(coord){return extentSum-coord+coordBase},axis.toLocalCoord=isHorizontal?function(coord){
return coord-coordBase}:function(coord){return extentSum-coord+coordBase;
}},getAxis:function(){return this._axis},getBaseAxis:function(){
return this._axis},containPoint:function(point){var rect=this.getRect(),axis=this.getAxis(),orient=axis.orient;
return"horizontal"===orient?axis.contain(axis.toLocalCoord(point[0]))&&point[1]>=rect.y&&point[1]<=rect.y+rect.height:axis.contain(axis.toLocalCoord(point[1]))&&point[0]>=rect.y&&point[0]<=rect.y+rect.height;
},pointToData:function(point){var axis=this.getAxis();return[axis.coordToData(axis.toLocalCoord(point["horizontal"===axis.orient?0:1]))];
},dataToPoint:function(val){var axis=this.getAxis(),rect=this.getRect(),pt=[],idx="horizontal"===axis.orient?0:1;
return pt[idx]=axis.toGlobalCoord(axis.dataToCoord(+val)),pt[1-idx]=0===idx?rect.y+rect.height/2:rect.x+rect.width/2,
pt}},module.exports=Single},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),Axis=__webpack_require__(124),axisHelper=__webpack_require__(115),SingleAxis=function(dim,scale,coordExtent,axisType,position){
Axis.call(this,dim,scale,coordExtent),this.type=axisType||"value",
this.position=position||"bottom",this.orient=null,this._labelInterval=null;
};SingleAxis.prototype={constructor:SingleAxis,model:null,isHorizontal:function(){
var position=this.position;return"top"===position||"bottom"===position;
},getLabelInterval:function(){var labelInterval=this._labelInterval;
if(!labelInterval){var axisModel=this.model,labelModel=axisModel.getModel("axisLabel"),interval=labelModel.get("interval");
if("category"!==this.type||"auto"!==interval)return labelInterval=this._labelInterval="auto"===interval?0:interval;
labelInterval=this._labelInterval=axisHelper.getAxisLabelInterval(zrUtil.map(this.scale.getTicks(),this.dataToCoord,this),axisModel.getFormattedLabels(),labelModel.getModel("textStyle").getFont(),this.isHorizontal());
}return labelInterval},toGlobalCoord:null,toLocalCoord:null},
zrUtil.inherits(SingleAxis,Axis),module.exports=SingleAxis},function(module,exports,__webpack_require__){
function axisLayout(axisModel){var single=axisModel.coordinateSystem,axis=axisModel.axis,layout={},axisPosition=axis.position,orient=axis.orient,rect=single.getRect(),rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height],positionMap={
horizontal:{top:rectBound[2],bottom:rectBound[3]},vertical:{left:rectBound[0],
right:rectBound[1]}};layout.position=["vertical"===orient?positionMap.vertical[axisPosition]:rectBound[0],"horizontal"===orient?positionMap.horizontal[axisPosition]:rectBound[3]];
var r={horizontal:0,vertical:1};layout.rotation=Math.PI/2*r[orient];
var directionMap={top:-1,bottom:1,right:1,left:-1};layout.labelDirection=layout.tickDirection=layout.nameDirection=directionMap[axisPosition],
axisModel.getModel("axisTick").get("inside")&&(layout.tickDirection=-layout.tickDirection),
axisModel.getModel("axisLabel").get("inside")&&(layout.labelDirection=-layout.labelDirection);
var labelRotation=axisModel.getModel("axisLabel").get("rotate");
return layout.labelRotation="top"===axisPosition?-labelRotation:labelRotation,
layout.labelInterval=axis.getLabelInterval(),layout.z2=1,layout;
}var AxisBuilder=__webpack_require__(133),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),getInterval=AxisBuilder.getInterval,ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick,axisBuilderAttrs=["axisLine","axisLabel","axisTick","axisName"],selfBuilderAttr="splitLine",AxisView=__webpack_require__(1).extendComponentView({
type:"singleAxis",render:function(axisModel,ecModel){var group=this.group;
group.removeAll();var layout=axisLayout(axisModel),axisBuilder=new AxisBuilder(axisModel,layout);
zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),group.add(axisBuilder.getGroup()),
axisModel.get(selfBuilderAttr+".show")&&this["_"+selfBuilderAttr](axisModel,layout.labelInterval);
},_splitLine:function(axisModel,labelInterval){var axis=axisModel.axis;
if(!axis.isBlank()){var splitLineModel=axisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineWidth=lineStyleModel.get("width"),lineColors=lineStyleModel.get("color"),lineInterval=getInterval(splitLineModel,labelInterval);
lineColors=lineColors instanceof Array?lineColors:[lineColors];
for(var gridRect=axisModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),splitLines=[],lineCount=0,ticksCoords=axis.getTicksCoords(),p1=[],p2=[],i=0;i<ticksCoords.length;++i)if(!ifIgnoreOnTick(axis,i,lineInterval)){
var tickCoord=axis.toGlobalCoord(ticksCoords[i]);isHorizontal?(p1[0]=tickCoord,
p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,
p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);
var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],
splitLines[colorIndex].push(new graphic.Line(graphic.subPixelOptimizeLine({
shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:{lineWidth:lineWidth
},silent:!0})))}for(var i=0;i<splitLines.length;++i)this.group.add(graphic.mergePath(splitLines[i],{
style:{stroke:lineColors[i%lineColors.length],lineDash:lineStyleModel.getLineDash(lineWidth),
lineWidth:lineWidth},silent:!0}))}}});module.exports=AxisView;
},function(module,exports,__webpack_require__){function getAxisType(axisName,option){
return option.type||(option.data?"category":"value")}var ComponentModel=__webpack_require__(19),axisModelCreator=__webpack_require__(128),zrUtil=__webpack_require__(4),AxisModel=ComponentModel.extend({
type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,
getCoordSysModel:function(){return this}}),defaultOption={left:"5%",
top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",
orient:"horizontal",axisLine:{show:!0,lineStyle:{width:2,type:"solid"
}},axisTick:{show:!0,length:6,lineStyle:{width:2}},axisLabel:{
show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",
opacity:.2}}};zrUtil.merge(AxisModel.prototype,__webpack_require__(130)),
axisModelCreator("single",AxisModel,getAxisType,defaultOption),
module.exports=AxisModel},function(module,exports,__webpack_require__){
"use strict";var completeDimensions=__webpack_require__(103),SeriesModel=__webpack_require__(28),List=__webpack_require__(98),zrUtil=__webpack_require__(4),formatUtil=__webpack_require__(6),encodeHTML=formatUtil.encodeHTML,nest=__webpack_require__(245),DATA_NAME_INDEX=2,ThemeRiverSeries=SeriesModel.extend({
type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,
init:function(option){ThemeRiverSeries.superApply(this,"init",arguments),
this.legendDataProvider=function(){return this.getRawData()}},
fixData:function(data){for(var rawDataLength=data.length,dataByName=nest().key(function(dataItem){
return dataItem[2]}).entries(data),layData=zrUtil.map(dataByName,function(d){
return{name:d.key,dataList:d.values}}),layerNum=layData.length,largestLayer=-1,index=-1,i=0;i<layerNum;++i){
var len=layData[i].dataList.length;len>largestLayer&&(largestLayer=len,
index=i)}for(var k=0;k<layerNum;++k)if(k!==index)for(var name=layData[k].name,j=0;j<largestLayer;++j){
for(var timeValue=layData[index].dataList[j][0],length=layData[k].dataList.length,keyIndex=-1,l=0;l<length;++l){
var value=layData[k].dataList[l][0];if(value===timeValue){keyIndex=l;
break}}keyIndex===-1&&(data[rawDataLength]=[],data[rawDataLength][0]=timeValue,
data[rawDataLength][1]=0,data[rawDataLength][2]=name,rawDataLength++);
}return data},getInitialData:function(option,ecModel){var dimensions=[],singleAxisModel=ecModel.queryComponents({
mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")
})[0],axisType=singleAxisModel.get("type");dimensions=[{name:"time",
type:"category"===axisType?"ordinal":"time"===axisType?"time":"float"
},{name:"value",type:"float"},{name:"name",type:"ordinal"}];for(var filterData=zrUtil.filter(option.data,function(dataItem){
return void 0!==dataItem[2]}),data=this.fixData(filterData||[]),nameList=[],nameMap=this.nameMap={},count=0,i=0;i<data.length;++i)nameList.push(data[i][DATA_NAME_INDEX]),
nameMap[data[i][DATA_NAME_INDEX]]||(nameMap[data[i][DATA_NAME_INDEX]]=count++);
completeDimensions(dimensions,data);var list=new List(dimensions,this);
return list.initData(data,nameList),list},coordDimToDataDim:function(axisDim){
return["time"]},getLayerSeries:function(){function comparer(index1,index2){
return data.get("time",index1)-data.get("time",index2)}for(var data=this.getData(),lenCount=data.count(),indexArr=[],i=0;i<lenCount;++i)indexArr[i]=i;
for(var dataByName=nest().key(function(index){return data.get("name",index);
}).entries(indexArr),layerSeries=zrUtil.map(dataByName,function(d){
return{name:d.key,indices:d.values}}),j=0;j<layerSeries.length;++j)layerSeries[j].indices.sort(comparer);
return layerSeries},getAxisTooltipDataIndex:function(dim,value,baseAxis){
zrUtil.isArray(dim)||(dim=dim?[dim]:[]);var data=this.getData();
value="horizontal"===baseAxis.orient?value[0]:value[1];for(var layerSeries=this.getLayerSeries(),indices=[],layerNum=layerSeries.length,i=0;i<layerNum;++i){
for(var minDist=Number.MAX_VALUE,nearestIdx=-1,pointNum=layerSeries[i].indices.length,j=0;j<pointNum;++j){
var dist=Math.abs(data.get(dim[0],layerSeries[i].indices[j])-value);
dist<=minDist&&(minDist=dist,nearestIdx=layerSeries[i].indices[j]);
}indices.push(nearestIdx)}return indices},formatTooltip:function(dataIndexs){
var data=this.getData(),len=dataIndexs.length,time=data.get("time",dataIndexs[0]),single=this.coordinateSystem,axis=single.getAxis();
"time"===axis.scale.type&&(time=formatUtil.formatTime("yyyy-MM-dd",time));
for(var html=encodeHTML(time)+"<br />",i=0;i<len;++i){var htmlName=data.get("name",dataIndexs[i]),htmlValue=data.get("value",dataIndexs[i]);
(isNaN(htmlValue)||null==htmlValue)&&(htmlValue="-"),html+=encodeHTML(htmlName+" : "+htmlValue)+"<br />";
}return html},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",
boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",
label:{normal:{margin:4,textAlign:"right",show:!0,position:"left",
textStyle:{color:"#000",fontSize:11}},emphasis:{show:!0}}}});module.exports=ThemeRiverSeries;
},function(module,exports,__webpack_require__){(function(process){
function createGridClipShape(rect,seriesModel,cb){var rectEl=new graphic.Rect({
shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}
});return graphic.initProps(rectEl,{shape:{width:rect.width+20,
height:rect.height+20}},seriesModel,cb),rectEl}var poly=__webpack_require__(109),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),DataDiffer=__webpack_require__(99);
module.exports=__webpack_require__(1).extendChartView({type:"themeRiver",
init:function(){this._layers=[]},render:function(seriesModel,ecModel,api){
function keyGetter(item){return item.name}function process(status,idx,oldIdx){
var oldLayersGroups=this._layers;if("remove"===status)return void group.remove(oldLayersGroups[idx]);
for(var color,points0=[],points1=[],indices=layerSeries[idx].indices,j=0;j<indices.length;j++){
var layout=data.getItemLayout(indices[j]),x=layout.x,y0=layout.y0,y=layout.y;
points0.push([x,y0]),points1.push([x,y0+y]),color=rawData.getItemVisual(indices[j],"color");
}var polygon,text,textLayout=data.getItemLayout(indices[0]),itemModel=data.getItemModel(indices[j-1]),labelModel=itemModel.getModel("label.normal"),margin=labelModel.get("margin");
if("add"===status){var layerGroup=newLayersGroups[idx]=new graphic.Group;
polygon=new poly.Polygon({shape:{points:points0,stackedOnPoints:points1,
smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),text=new graphic.Text({
style:{x:textLayout.x-margin,y:textLayout.y0+textLayout.y/2}}),
layerGroup.add(polygon),layerGroup.add(text),group.add(layerGroup),
polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(),seriesModel,function(){
polygon.removeClipPath()}))}else{var layerGroup=oldLayersGroups[oldIdx];
polygon=layerGroup.childAt(0),text=layerGroup.childAt(1),group.add(layerGroup),
newLayersGroups[idx]=layerGroup,graphic.updateProps(polygon,{
shape:{points:points0,stackedOnPoints:points1}},seriesModel),
graphic.updateProps(text,{style:{x:textLayout.x-margin,y:textLayout.y0+textLayout.y/2
}},seriesModel)}var hoverItemStyleModel=itemModel.getModel("itemStyle.emphasis"),itemStyleModel=itemModel.getModel("itemStyle.normal"),textStyleModel=labelModel.getModel("textStyle");
text.setStyle({text:labelModel.get("show")?seriesModel.getFormattedLabel(indices[j-1],"normal")||data.getName(indices[j-1]):"",
textFont:textStyleModel.getFont(),textAlign:labelModel.get("textAlign"),
textVerticalAlign:"middle"}),polygon.setStyle(zrUtil.extend({
fill:color},itemStyleModel.getItemStyle(["color"]))),graphic.setHoverStyle(polygon,hoverItemStyleModel.getItemStyle());
}var data=seriesModel.getData(),rawData=seriesModel.getRawData();
if(data.count()){var group=this.group,layerSeries=seriesModel.getLayerSeries(),layoutInfo=data.getLayout("layoutInfo"),rect=layoutInfo.rect,boundaryGap=layoutInfo.boundaryGap;
group.attr("position",[0,rect.y+boundaryGap[0]]);var dataDiffer=new DataDiffer(this._layersSeries||[],layerSeries,keyGetter,keyGetter),newLayersGroups={};
dataDiffer.add(zrUtil.bind(zrUtil.curry(process,"add"),this)).update(zrUtil.bind(zrUtil.curry(process,"update"),this)).remove(zrUtil.bind(zrUtil.curry(process,"remove"),this)).execute(),
this._layersSeries=layerSeries,this._layers=newLayersGroups}},
dispose:function(){}})}).call(exports,__webpack_require__(289));
},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined");
}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined");
}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);
if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,
setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){
try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0);
}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);
if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,
clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){
try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker);
}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,
currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,
queue.length&&drainQueue())}function drainQueue(){if(!draining){
var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){
for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();
queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,
runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,
this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};
!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout;
}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout;
}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;
process.nextTick=function(fun){var args=new Array(arguments.length-1);
if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];
queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue);
},Item.prototype.run=function(){this.fun.apply(null,this.array);
},process.title="browser",process.browser=!0,process.env={},process.argv=[],
process.version="",process.versions={},process.on=noop,process.addListener=noop,
process.once=noop,process.off=noop,process.removeListener=noop,
process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){
throw new Error("process.binding is not supported")},process.cwd=function(){
return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported");
},process.umask=function(){return 0}},function(module,exports,__webpack_require__){
function themeRiverLayout(data,seriesModel,height){if(data.count())for(var baseY0,coordSys=seriesModel.coordinateSystem,layerSeries=seriesModel.getLayerSeries(),layerPoints=zrUtil.map(layerSeries,function(singleLayer){
return zrUtil.map(singleLayer.indices,function(idx){var pt=coordSys.dataToPoint(data.get("time",idx));
return pt[1]=data.get("value",idx),pt})}),base=computeBaseline(layerPoints),baseLine=base.y0,ky=height/base.max,n=layerSeries.length,m=layerSeries[0].indices.length,j=0;j<m;++j){
baseY0=baseLine[j]*ky,data.setItemLayout(layerSeries[0].indices[j],{
layerIndex:0,x:layerPoints[0][j][0],y0:baseY0,y:layerPoints[0][j][1]*ky
});for(var i=1;i<n;++i)baseY0+=layerPoints[i-1][j][1]*ky,data.setItemLayout(layerSeries[i].indices[j],{
layerIndex:i,x:layerPoints[i][j][0],y0:baseY0,y:layerPoints[i][j][1]*ky
})}}function computeBaseline(data){for(var temp,layerNum=data.length,pointNum=data[0].length,sums=[],y0=[],max=0,base={},i=0;i<pointNum;++i){
for(var j=0,temp=0;j<layerNum;++j)temp+=data[j][i][1];temp>max&&(max=temp),
sums.push(temp)}for(var k=0;k<pointNum;++k)y0[k]=(max-sums[k])/2;
max=0;for(var l=0;l<pointNum;++l){var sum=sums[l]+y0[l];sum>max&&(max=sum);
}return base.y0=y0,base.max=max,base}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7);
module.exports=function(ecModel,api){ecModel.eachSeriesByType("themeRiver",function(seriesModel){
var data=seriesModel.getData(),single=seriesModel.coordinateSystem,layoutInfo={},rect=single.getRect();
layoutInfo.rect=rect;var boundaryGap=seriesModel.get("boundaryGap"),axis=single.getAxis();
if(layoutInfo.boundaryGap=boundaryGap,"horizontal"===axis.orient){
boundaryGap[0]=numberUtil.parsePercent(boundaryGap[0],rect.height),
boundaryGap[1]=numberUtil.parsePercent(boundaryGap[1],rect.height);
var height=rect.height-boundaryGap[0]-boundaryGap[1];themeRiverLayout(data,seriesModel,height);
}else{boundaryGap[0]=numberUtil.parsePercent(boundaryGap[0],rect.width),
boundaryGap[1]=numberUtil.parsePercent(boundaryGap[1],rect.width);
var width=rect.width-boundaryGap[0]-boundaryGap[1];themeRiverLayout(data,seriesModel,width);
}data.setLayout("layoutInfo",layoutInfo)})}},function(module,exports){
module.exports=function(ecModel){ecModel.eachSeriesByType("themeRiver",function(seriesModel){
var data=seriesModel.getData(),rawData=seriesModel.getRawData(),colorList=seriesModel.get("color");
data.each(function(index){var name=data.getName(index),color=colorList[(seriesModel.nameMap[name]-1)%colorList.length];
rawData.setItemVisual(index,"color",color)})})}},function(module,exports,__webpack_require__){
function createEl(id,targetElParent,elOption,elMap){var graphicType=elOption.type;
zrUtil.assert(graphicType,"graphic type MUST be set");var Clz=graphicUtil[graphicType.charAt(0).toUpperCase()+graphicType.slice(1)];
zrUtil.assert(Clz,"graphic type can not be found");var el=new Clz(elOption);
targetElParent.add(el),elMap[id]=el,el.__ecGraphicId=id}function removeEl(existEl,elMap){
var existElParent=existEl&&existEl.parent;existElParent&&("group"===existEl.type&&existEl.traverse(function(el){
removeEl(el,elMap)}),delete elMap[existEl.__ecGraphicId],existElParent.remove(existEl));
}function getCleanedElOption(elOption){return elOption=zrUtil.extend({},elOption),
zrUtil.each(["id","parentId","$action","hv","bounding"].concat(layoutUtil.LOCATION_PARAMS),function(name){
delete elOption[name]}),elOption}function isSetLoc(obj,props){
var isSet;return zrUtil.each(props,function(prop){null!=obj[prop]&&"auto"!==obj[prop]&&(isSet=!0);
}),isSet}var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),graphicUtil=__webpack_require__(43),layoutUtil=__webpack_require__(21);
echarts.registerPreprocessor(function(option){var graphicOption=option&&option.graphic;
zrUtil.isArray(graphicOption)?graphicOption[0]&&graphicOption[0].elements?option.graphic=[option.graphic[0]]:option.graphic=[{
elements:graphicOption}]:graphicOption&&!graphicOption.elements&&(option.graphic=[{
elements:[graphicOption]}])});var GraphicModel=echarts.extendComponentModel({
type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,
mergeOption:function(option){var elements=this.option.elements;
this.option.elements=null,GraphicModel.superApply(this,"mergeOption",arguments),
this.option.elements=elements},optionUpdated:function(newOption,isInit){
var thisOption=this.option,newList=(isInit?thisOption:newOption).elements,existList=thisOption.elements=isInit?[]:thisOption.elements,flattenedList=[];
this._flatten(newList,flattenedList);var mappingResult=modelUtil.mappingToExists(existList,flattenedList);
modelUtil.makeIdAndName(mappingResult);var elOptionsToUpdate=this._elOptionsToUpdate=[];
zrUtil.each(mappingResult,function(resultItem,index){var existElOption=resultItem.exist,newElOption=resultItem.option;
if(zrUtil.assert(zrUtil.isObject(newElOption)||existElOption,"Empty graphic option definition"),
newElOption){newElOption.id=resultItem.keyInfo.id;var newElParentId=newElOption.parentId,newElParentOption=newElOption.parentOption,existElParentId=existElOption&&existElOption.parentId;
!newElOption.type&&existElOption&&(newElOption.type=existElOption.type),
newElOption.parentId=newElParentId?newElParentId:newElParentOption?newElParentOption.id:existElParentId?existElParentId:null,
newElOption.parentOption=null,elOptionsToUpdate.push(newElOption);
var newElOptCopy=zrUtil.extend({},newElOption),$action=newElOption.$action;
if($action&&"merge"!==$action)"replace"===$action?existList[index]=newElOptCopy:"remove"===$action&&existElOption&&(existList[index]=null);else if(existElOption){
var newType=newElOption.type;zrUtil.assert(!newType||existElOption.type===newType,'Please set $action: "replace" to change `type`'),
zrUtil.merge(existElOption,newElOptCopy,!0),layoutUtil.mergeLayoutParam(existElOption,newElOptCopy,{
ignoreSize:!0}),layoutUtil.copyLayoutParams(newElOption,existElOption);
}else existList[index]=newElOptCopy;existList[index]&&(existList[index].hv=newElOption.hv=[isSetLoc(newElOption,["left","right"]),isSetLoc(newElOption,["top","bottom"])],
"group"===existList[index].type&&(null==existList[index].width&&(existList[index].width=newElOption.width=0),
null==existList[index].height&&(existList[index].height=newElOption.height=0)));
}},this);for(var i=existList.length-1;i>=0;i--)null==existList[i]?existList.splice(i,1):delete existList[i].$action;
},_flatten:function(optionList,result,parentOption){zrUtil.each(optionList,function(option){
if(option){parentOption&&(option.parentOption=parentOption),result.push(option);
var children=option.children;"group"===option.type&&children&&this._flatten(children,result,option),
delete option.children}},this)},useElOptionsToUpdate:function(){
var els=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,
els}});echarts.extendComponentView({type:"graphic",init:function(ecModel,api){
this._elMap={},this._lastGraphicModel},render:function(graphicModel,ecModel,api){
graphicModel!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=graphicModel,
this._updateElements(graphicModel,api),this._relocate(graphicModel,api);
},_updateElements:function(graphicModel,api){var elOptionsToUpdate=graphicModel.useElOptionsToUpdate();
if(elOptionsToUpdate){var elMap=this._elMap,rootGroup=this.group;
zrUtil.each(elOptionsToUpdate,function(elOption){var $action=elOption.$action,id=elOption.id,existEl=elMap[id],parentId=elOption.parentId,targetElParent=null!=parentId?elMap[parentId]:rootGroup;
elOption.hv&&elOption.hv[1]&&"text"===elOption.type&&(elOption.style=zrUtil.defaults({
textBaseline:"middle"},elOption.style),elOption.style.textVerticalAlign=null);
var elOptionCleaned=getCleanedElOption(elOption);existEl&&zrUtil.assert(targetElParent===existEl.parent,"Changing parent is not supported."),
$action&&"merge"!==$action?"replace"===$action?(removeEl(existEl,elMap),
createEl(id,targetElParent,elOptionCleaned,elMap)):"remove"===$action&&removeEl(existEl,elMap):existEl?existEl.attr(elOptionCleaned):createEl(id,targetElParent,elOptionCleaned,elMap),
elMap[id]&&(elMap[id].__ecGraphicWidth=elOption.width,elMap[id].__ecGraphicHeight=elOption.height);
})}},_relocate:function(graphicModel,api){for(var elOptions=graphicModel.option.elements,rootGroup=this.group,elMap=this._elMap,i=elOptions.length-1;i>=0;i--){
var elOption=elOptions[i],el=elMap[elOption.id];if(el){var parentEl=el.parent,containerInfo=parentEl===rootGroup?{
width:api.getWidth(),height:api.getHeight()}:{width:parentEl.__ecGraphicWidth||0,
height:parentEl.__ecGraphicHeight||0};layoutUtil.positionElement(el,elOption,containerInfo,null,{
hv:elOption.hv,boundingMode:elOption.bounding})}}},_clear:function(){
var elMap=this._elMap;zrUtil.each(elMap,function(el){removeEl(el,elMap);
}),this._elMap={}},dispose:function(){this._clear()}})},function(module,exports,__webpack_require__){
__webpack_require__(294),__webpack_require__(295),__webpack_require__(296);
var echarts=__webpack_require__(1);echarts.registerProcessor(__webpack_require__(298));
},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),Model=__webpack_require__(12),LegendModel=__webpack_require__(1).extendComponentModel({
type:"legend",dependencies:["series"],layoutMode:{type:"box",
ignoreSize:!0},init:function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel),
option.selected=option.selected||{}},mergeOption:function(option){
LegendModel.superCall(this,"mergeOption",option)},optionUpdated:function(){
this._updateData(this.ecModel);var legendData=this._data;if(legendData[0]&&"single"===this.get("selectedMode")){
for(var hasSelected=!1,i=0;i<legendData.length;i++){var name=legendData[i].get("name");
if(this.isSelected(name)){this.select(name),hasSelected=!0;break;
}}!hasSelected&&this.select(legendData[0].get("name"))}},_updateData:function(ecModel){
var legendData=zrUtil.map(this.get("data")||[],function(dataItem){
return"string"!=typeof dataItem&&"number"!=typeof dataItem||(dataItem={
name:dataItem}),new Model(dataItem,this,this.ecModel)},this);this._data=legendData;
var availableNames=zrUtil.map(ecModel.getSeries(),function(series){
return series.name});ecModel.eachSeries(function(seriesModel){
if(seriesModel.legendDataProvider){var data=seriesModel.legendDataProvider();
availableNames=availableNames.concat(data.mapArray(data.getName));
}}),this._availableNames=availableNames},getData:function(){return this._data;
},select:function(name){var selected=this.option.selected,selectedMode=this.get("selectedMode");
if("single"===selectedMode){var data=this._data;zrUtil.each(data,function(dataItem){
selected[dataItem.get("name")]=!1})}selected[name]=!0},unSelect:function(name){
"single"!==this.get("selectedMode")&&(this.option.selected[name]=!1);
},toggleSelected:function(name){var selected=this.option.selected;
selected.hasOwnProperty(name)||(selected[name]=!0),this[selected[name]?"unSelect":"select"](name);
},isSelected:function(name){var selected=this.option.selected;
return!(selected.hasOwnProperty(name)&&!selected[name])&&zrUtil.indexOf(this._availableNames,name)>=0;
},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",
top:"top",align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",
borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,
inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,
tooltip:{show:!1}}});module.exports=LegendModel},function(module,exports,__webpack_require__){
function legendSelectActionHandler(methodName,payload,ecModel){
var isSelected,selectedMap={},isToggleSelect="toggleSelected"===methodName;
return ecModel.eachComponent("legend",function(legendModel){isToggleSelect&&null!=isSelected?legendModel[isSelected?"select":"unSelect"](payload.name):(legendModel[methodName](payload.name),
isSelected=legendModel.isSelected(payload.name));var legendData=legendModel.getData();
zrUtil.each(legendData,function(model){var name=model.get("name");
if("\n"!==name&&""!==name){var isItemSelected=legendModel.isSelected(name);
name in selectedMap?selectedMap[name]=selectedMap[name]&&isItemSelected:selectedMap[name]=isItemSelected;
}})}),{name:payload.name,selected:selectedMap}}var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);
echarts.registerAction("legendToggleSelect","legendselectchanged",zrUtil.curry(legendSelectActionHandler,"toggleSelected")),
echarts.registerAction("legendSelect","legendselected",zrUtil.curry(legendSelectActionHandler,"select")),
echarts.registerAction("legendUnSelect","legendunselected",zrUtil.curry(legendSelectActionHandler,"unSelect"));
},function(module,exports,__webpack_require__){function dispatchSelectAction(name,api){
api.dispatchAction({type:"legendToggleSelect",name:name})}function dispatchHighlightAction(seriesModel,dataName,api){
var el=api.getZr().storage.getDisplayList()[0];el&&el.useHoverLayer||seriesModel.get("legendHoverLink")&&api.dispatchAction({
type:"highlight",seriesName:seriesModel.name,name:dataName})}
function dispatchDownplayAction(seriesModel,dataName,api){var el=api.getZr().storage.getDisplayList()[0];
el&&el.useHoverLayer||seriesModel.get("legendHoverLink")&&api.dispatchAction({
type:"downplay",seriesName:seriesModel.name,name:dataName})}var zrUtil=__webpack_require__(4),symbolCreator=__webpack_require__(107),graphic=__webpack_require__(43),listComponentHelper=__webpack_require__(297),curry=zrUtil.curry;
module.exports=__webpack_require__(1).extendComponentView({type:"legend",
init:function(){this._symbolTypeStore={}},render:function(legendModel,ecModel,api){
var group=this.group;if(group.removeAll(),legendModel.get("show")){
var selectMode=legendModel.get("selectedMode"),itemAlign=legendModel.get("align");
"auto"===itemAlign&&(itemAlign="right"===legendModel.get("left")&&"vertical"===legendModel.get("orient")?"right":"left");
var legendDrawedMap={};zrUtil.each(legendModel.getData(),function(itemModel){
var name=itemModel.get("name");if(""===name||"\n"===name)return void group.add(new graphic.Group({
newline:!0}));var seriesModel=ecModel.getSeriesByName(name)[0];
if(!legendDrawedMap[name]){if(seriesModel){var data=seriesModel.getData(),color=data.getVisual("color");
"function"==typeof color&&(color=color(seriesModel.getDataParams(0)));
var legendSymbolType=data.getVisual("legendSymbol")||"roundRect",symbolType=data.getVisual("symbol"),itemGroup=this._createItem(name,itemModel,legendModel,legendSymbolType,symbolType,itemAlign,color,selectMode);
itemGroup.on("click",curry(dispatchSelectAction,name,api)).on("mouseover",curry(dispatchHighlightAction,seriesModel,null,api)).on("mouseout",curry(dispatchDownplayAction,seriesModel,null,api)),
legendDrawedMap[name]=!0}else ecModel.eachRawSeries(function(seriesModel){
if(!legendDrawedMap[name]&&seriesModel.legendDataProvider){var data=seriesModel.legendDataProvider(),idx=data.indexOfName(name);
if(idx<0)return;var color=data.getItemVisual(idx,"color"),legendSymbolType="roundRect",itemGroup=this._createItem(name,itemModel,legendModel,legendSymbolType,null,itemAlign,color,selectMode);
itemGroup.on("click",curry(dispatchSelectAction,name,api)).on("mouseover",curry(dispatchHighlightAction,seriesModel,name,api)).on("mouseout",curry(dispatchDownplayAction,seriesModel,name,api)),
legendDrawedMap[name]=!0}},this);legendDrawedMap[name]||console.warn(name+" series not exists. Legend data should be same with series name or data name.");
}},this),listComponentHelper.layout(group,legendModel,api),listComponentHelper.addBackground(group,legendModel);
}},_createItem:function(name,itemModel,legendModel,legendSymbolType,symbolType,itemAlign,color,selectMode){
var itemWidth=legendModel.get("itemWidth"),itemHeight=legendModel.get("itemHeight"),inactiveColor=legendModel.get("inactiveColor"),isSelected=legendModel.isSelected(name),itemGroup=new graphic.Group,textStyleModel=itemModel.getModel("textStyle"),itemIcon=itemModel.get("icon"),tooltipModel=itemModel.getModel("tooltip"),legendGlobalTooltipModel=tooltipModel.parentModel;
if(legendSymbolType=itemIcon||legendSymbolType,itemGroup.add(symbolCreator.createSymbol(legendSymbolType,0,0,itemWidth,itemHeight,isSelected?color:inactiveColor)),
!itemIcon&&symbolType&&(symbolType!==legendSymbolType||"none"==symbolType)){
var size=.8*itemHeight;"none"===symbolType&&(symbolType="circle"),
itemGroup.add(symbolCreator.createSymbol(symbolType,(itemWidth-size)/2,(itemHeight-size)/2,size,size,isSelected?color:inactiveColor));
}var textX="left"===itemAlign?itemWidth+5:-5,textAlign=itemAlign,formatter=legendModel.get("formatter"),content=name;
"string"==typeof formatter&&formatter?content=formatter.replace("{name}",null!=name?name:""):"function"==typeof formatter&&(content=formatter(name));
var text=new graphic.Text({style:{text:content,x:textX,y:itemHeight/2,
fill:isSelected?textStyleModel.getTextColor():inactiveColor,textFont:textStyleModel.getFont(),
textAlign:textAlign,textVerticalAlign:"middle"}});itemGroup.add(text);
var hitRect=new graphic.Rect({shape:itemGroup.getBoundingRect(),
invisible:!0,tooltip:tooltipModel.get("show")?zrUtil.extend({
content:name,formatter:legendGlobalTooltipModel.get("formatter",!0)||function(){
return name},formatterParams:{componentType:"legend",legendIndex:legendModel.componentIndex,
name:name,$vars:["name"]}},tooltipModel.option):null});return itemGroup.add(hitRect),
itemGroup.eachChild(function(child){child.silent=!0}),hitRect.silent=!selectMode,
this.group.add(itemGroup),graphic.setHoverStyle(itemGroup),itemGroup;
}})},function(module,exports,__webpack_require__){function positionGroup(group,model,api){
layout.positionElement(group,model.getBoxLayoutParams(),{width:api.getWidth(),
height:api.getHeight()},model.get("padding"))}var layout=__webpack_require__(21),formatUtil=__webpack_require__(6),graphic=__webpack_require__(43);
module.exports={layout:function(group,componentModel,api){var rect=layout.getLayoutRect(componentModel.getBoxLayoutParams(),{
width:api.getWidth(),height:api.getHeight()},componentModel.get("padding"));
layout.box(componentModel.get("orient"),group,componentModel.get("itemGap"),rect.width,rect.height),
positionGroup(group,componentModel,api)},addBackground:function(group,componentModel){
var padding=formatUtil.normalizeCssArray(componentModel.get("padding")),boundingRect=group.getBoundingRect(),style=componentModel.getItemStyle(["color","opacity"]);
style.fill=componentModel.get("backgroundColor");var rect=new graphic.Rect({
shape:{x:boundingRect.x-padding[3],y:boundingRect.y-padding[0],
width:boundingRect.width+padding[1]+padding[3],height:boundingRect.height+padding[0]+padding[2]
},style:style,silent:!0,z2:-1});graphic.subPixelOptimizeRect(rect),
group.add(rect)}}},function(module,exports){module.exports=function(ecModel){
var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&&legendModels.length&&ecModel.filterSeries(function(series){
for(var i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(series.name))return!1;
return!0})}},function(module,exports,__webpack_require__){__webpack_require__(300),
__webpack_require__(301),__webpack_require__(1).registerAction({
type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"
},function(){}),__webpack_require__(1).registerAction({type:"hideTip",
event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});
},function(module,exports,__webpack_require__){__webpack_require__(1).extendComponentModel({
type:"tooltip",defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,
trigger:"item",triggerOn:"mousemove",alwaysShowContent:!1,confine:!1,
showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,
backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,
borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",
axis:"auto",animation:!0,animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",
lineStyle:{color:"#555",width:1,type:"solid"},crossStyle:{color:"#555",
width:1,type:"dashed",textStyle:{}},shadowStyle:{color:"rgba(150,150,150,0.3)"
}},textStyle:{color:"#fff",fontSize:14}}})},function(module,exports,__webpack_require__){
function dataEqual(a,b){if(!a||!b)return!1;var round=numberUtil.round;
return round(a[0])===round(b[0])&&round(a[1])===round(b[1])}function makeLineShape(x1,y1,x2,y2){
return{x1:x1,y1:y1,x2:x2,y2:y2}}function makeRectShape(x,y,width,height){
return{x:x,y:y,width:width,height:height}}function makeSectorShape(cx,cy,r0,r,startAngle,endAngle){
return{cx:cx,cy:cy,r0:r0,r:r,startAngle:startAngle,endAngle:endAngle,
clockwise:!0}}function refixTooltipPosition(x,y,el,viewWidth,viewHeight){
var width=el.clientWidth,height=el.clientHeight,gap=20;return x+width+gap>viewWidth?x-=width+gap:x+=gap,
y+height+gap>viewHeight?y-=height+gap:y+=gap,[x,y]}function confineTooltipPosition(x,y,el,viewWidth,viewHeight){
var width=el.clientWidth,height=el.clientHeight;return x=Math.min(x+width,viewWidth)-width,
y=Math.min(y+height,viewHeight)-height,x=Math.max(x,0),y=Math.max(y,0),
[x,y]}function calcTooltipPosition(position,rect,dom){var domWidth=dom.clientWidth,domHeight=dom.clientHeight,gap=5,x=0,y=0,rectWidth=rect.width,rectHeight=rect.height;
switch(position){case"inside":x=rect.x+rectWidth/2-domWidth/2,
y=rect.y+rectHeight/2-domHeight/2;break;case"top":x=rect.x+rectWidth/2-domWidth/2,
y=rect.y-domHeight-gap;break;case"bottom":x=rect.x+rectWidth/2-domWidth/2,
y=rect.y+rectHeight+gap;break;case"left":x=rect.x-domWidth-gap,
y=rect.y+rectHeight/2-domHeight/2;break;case"right":x=rect.x+rectWidth+gap,
y=rect.y+rectHeight/2-domHeight/2}return[x,y]}function updatePosition(positionExpr,x,y,confine,content,params,el,api){
var viewWidth=api.getWidth(),viewHeight=api.getHeight(),rect=el&&el.getBoundingRect().clone();
if(el&&rect.applyTransform(el.transform),"function"==typeof positionExpr&&(positionExpr=positionExpr([x,y],params,content.el,rect)),
zrUtil.isArray(positionExpr))x=parsePercent(positionExpr[0],viewWidth),
y=parsePercent(positionExpr[1],viewHeight);else if("string"==typeof positionExpr&&el){
var pos=calcTooltipPosition(positionExpr,rect,content.el);x=pos[0],
y=pos[1]}else{var pos=refixTooltipPosition(x,y,content.el,viewWidth,viewHeight);
x=pos[0],y=pos[1]}if(confine){var pos=confineTooltipPosition(x,y,content.el,viewWidth,viewHeight);
x=pos[0],y=pos[1]}content.moveTo(x,y)}function ifSeriesSupportAxisTrigger(seriesModel){
var coordSys=seriesModel.coordinateSystem,trigger=seriesModel.get("tooltip.trigger",!0);
return!(!coordSys||"cartesian2d"!==coordSys.type&&"polar"!==coordSys.type&&"singleAxis"!==coordSys.type||"item"===trigger);
}var TooltipContent=__webpack_require__(302),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),formatUtil=__webpack_require__(6),numberUtil=__webpack_require__(7),modelUtil=__webpack_require__(5),parsePercent=numberUtil.parsePercent,env=__webpack_require__(2),Model=__webpack_require__(12);
__webpack_require__(1).extendComponentView({type:"tooltip",_axisPointers:{},
init:function(ecModel,api){if(!env.node){var tooltipContent=new TooltipContent(api.getDom(),api);
this._tooltipContent=tooltipContent}},render:function(tooltipModel,ecModel,api){
if(!env.node){this.group.removeAll(),this._axisPointers={},this._tooltipModel=tooltipModel,
this._ecModel=ecModel,this._api=api,this._lastHover={};var tooltipContent=this._tooltipContent;
tooltipContent.update(),tooltipContent.enterable=tooltipModel.get("enterable"),
this._alwaysShowContent=tooltipModel.get("alwaysShowContent"),
this._seriesGroupByAxis=this._prepareAxisTriggerData(tooltipModel,ecModel);
var crossText=this._crossText;crossText&&this.group.add(crossText);
var triggerOn=tooltipModel.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==triggerOn){
var self=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){
self.manuallyShowTip(tooltipModel,ecModel,api,{x:self._lastX,
y:self._lastY})})}var zr=this._api.getZr();zr.off("click",this._tryShow),
zr.off("mousemove",this._mousemove),zr.off("mouseout",this._hide),
zr.off("globalout",this._hide),"click"===triggerOn?zr.on("click",this._tryShow,this):"mousemove"===triggerOn&&(zr.on("mousemove",this._mousemove,this),
zr.on("mouseout",this._hide,this),zr.on("globalout",this._hide,this));
}},_mousemove:function(e){var showDelay=this._tooltipModel.get("showDelay"),self=this;
clearTimeout(this._showTimeout),showDelay>0?this._showTimeout=setTimeout(function(){
self._tryShow(e)},showDelay):this._tryShow(e)},manuallyShowTip:function(tooltipModel,ecModel,api,payload){
function seriesHaveDataOnIndex(_series){var data=_series.getData(),dataIndex=modelUtil.queryDataIndex(data,payload);
if(null!=dataIndex&&!zrUtil.isArray(dataIndex)&&data.hasValue(dataIndex))return!0;
}if(payload.from!==this.uid){var ecModel=this._ecModel,seriesIndex=payload.seriesIndex,seriesModel=ecModel.getSeriesByIndex(seriesIndex),api=this._api,isTriggerAxis="axis"===this._tooltipModel.get("trigger");
if(null==payload.x||null==payload.y){if(isTriggerAxis?(seriesModel&&!seriesHaveDataOnIndex(seriesModel)&&(seriesModel=null),
seriesModel||ecModel.eachSeries(function(_series){ifSeriesSupportAxisTrigger(_series)&&!seriesModel&&seriesHaveDataOnIndex(_series)&&(seriesModel=_series);
})):seriesModel=seriesModel||ecModel.getSeriesByIndex(0),seriesModel){
var data=seriesModel.getData(),dataIndex=modelUtil.queryDataIndex(data,payload);
if(null==dataIndex||zrUtil.isArray(dataIndex))return;var cx,cy,el=data.getItemGraphicEl(dataIndex),coordSys=seriesModel.coordinateSystem;
if(seriesModel.getTooltipPosition){var point=seriesModel.getTooltipPosition(dataIndex)||[];
cx=point[0],cy=point[1]}else if(coordSys&&coordSys.dataToPoint){
var point=coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions,function(dim){
return seriesModel.coordDimToDataDim(dim)[0]}),dataIndex,!0));
cx=point&&point[0],cy=point&&point[1]}else if(el){var rect=el.getBoundingRect().clone();
rect.applyTransform(el.transform),cx=rect.x+rect.width/2,cy=rect.y+rect.height/2;
}null!=cx&&null!=cy&&this._tryShow({offsetX:cx,offsetY:cy,position:payload.position,
target:el,event:{}})}}else{var el=api.getZr().handler.findHover(payload.x,payload.y);
this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,
target:el,event:{}})}}},manuallyHideTip:function(tooltipModel,ecModel,api,payload){
payload.from!==this.uid&&this._hide()},_prepareAxisTriggerData:function(tooltipModel,ecModel){
var seriesGroupByAxis={};return ecModel.eachSeries(function(seriesModel){
if(ifSeriesSupportAxisTrigger(seriesModel)){var baseAxis,key,coordSys=seriesModel.coordinateSystem;
"cartesian2d"===coordSys.type?(baseAxis=coordSys.getBaseAxis(),
key=baseAxis.dim+baseAxis.index):"singleAxis"===coordSys.type?(baseAxis=coordSys.getAxis(),
key=baseAxis.dim+baseAxis.type):(baseAxis=coordSys.getBaseAxis(),
key=baseAxis.dim+coordSys.name),seriesGroupByAxis[key]=seriesGroupByAxis[key]||{
coordSys:[],series:[]},seriesGroupByAxis[key].coordSys.push(coordSys),
seriesGroupByAxis[key].series.push(seriesModel)}},this),seriesGroupByAxis;
},_tryShow:function(e){var el=e.target,tooltipModel=this._tooltipModel,globalTrigger=tooltipModel.get("trigger"),ecModel=this._ecModel,api=this._api;
if(tooltipModel)if(this._lastX=e.offsetX,this._lastY=e.offsetY,
el&&null!=el.dataIndex){var dataModel=el.dataModel||ecModel.getSeriesByIndex(el.seriesIndex),dataIndex=el.dataIndex,data=dataModel.getData(),itemModel=data.getItemModel(dataIndex);
"axis"===(itemModel.get("tooltip.trigger")||globalTrigger)?this._showAxisTooltip(tooltipModel,ecModel,e):(this._ticket="",
this._hideAxisPointer(),this._resetLastHover(),this._showItemTooltipContent(dataModel,dataIndex,el.dataType,e)),
api.dispatchAction({type:"showTip",from:this.uid,dataIndexInside:dataIndex,
dataIndex:data.getRawIndex(dataIndex),seriesIndex:el.seriesIndex
})}else if(el&&el.tooltip){var tooltipOpt=el.tooltip;if("string"==typeof tooltipOpt){
var content=tooltipOpt;tooltipOpt={content:content,formatter:content
}}var subTooltipModel=new Model(tooltipOpt,tooltipModel),defaultHtml=subTooltipModel.get("content"),asyncTicket=Math.random();
this._showTooltipContent(subTooltipModel,defaultHtml,subTooltipModel.get("formatterParams")||{},asyncTicket,e.offsetX,e.offsetY,e.position,el,api);
}else"item"===globalTrigger?this._hide():this._showAxisTooltip(tooltipModel,ecModel,e),
"cross"===tooltipModel.get("axisPointer.type")&&api.dispatchAction({
type:"showTip",from:this.uid,x:e.offsetX,y:e.offsetY})},_showAxisTooltip:function(tooltipModel,ecModel,e){
var axisPointerModel=tooltipModel.getModel("axisPointer"),axisPointerType=axisPointerModel.get("type");
if("cross"===axisPointerType){var el=e.target;if(el&&null!=el.dataIndex){
var seriesModel=ecModel.getSeriesByIndex(el.seriesIndex),dataIndex=el.dataIndex;
this._showItemTooltipContent(seriesModel,dataIndex,el.dataType,e);
}}this._showAxisPointer();var allNotShow=!0;zrUtil.each(this._seriesGroupByAxis,function(seriesCoordSysSameAxis){
var allCoordSys=seriesCoordSysSameAxis.coordSys,coordSys=allCoordSys[0],point=[e.offsetX,e.offsetY];
if(!coordSys.containPoint(point))return void this._hideAxisPointer(coordSys.name);
allNotShow=!1;var dimensions=coordSys.dimensions,value=coordSys.pointToData(point,!0);
point=coordSys.dataToPoint(value);var baseAxis=coordSys.getBaseAxis(),axisType=axisPointerModel.get("axis");
if("auto"===axisType&&(axisType=baseAxis.dim),baseAxis.isBlank()||zrUtil.eqNaN(point[0])||zrUtil.eqNaN(point[1]))return void this._hideAxisPointer(coordSys.name);
var contentNotChange=!1,lastHover=this._lastHover;if("cross"===axisPointerType)dataEqual(lastHover.data,value)&&(contentNotChange=!0),
lastHover.data=value;else{var valIndex=zrUtil.indexOf(dimensions,axisType);
lastHover.data===value[valIndex]&&(contentNotChange=!0),lastHover.data=value[valIndex];
}var enableAnimation=tooltipModel.get("animation");"cartesian2d"!==coordSys.type||contentNotChange?"polar"!==coordSys.type||contentNotChange?"singleAxis"!==coordSys.type||contentNotChange||this._showSinglePointer(axisPointerModel,coordSys,axisType,point,enableAnimation):this._showPolarPointer(axisPointerModel,coordSys,axisType,point,enableAnimation):this._showCartesianPointer(axisPointerModel,coordSys,axisType,point,enableAnimation),
"cross"!==axisPointerType&&this._dispatchAndShowSeriesTooltipContent(coordSys,seriesCoordSysSameAxis.series,point,value,contentNotChange,e.position);
},this),this._tooltipModel.get("show")||this._hideAxisPointer(),
allNotShow&&this._hide()},_showCartesianPointer:function(axisPointerModel,cartesian,axisType,point,enableAnimation){
function moveGridLine(axisType,point,otherExtent){var targetShape="x"===axisType?makeLineShape(point[0],otherExtent[0],point[0],otherExtent[1]):makeLineShape(otherExtent[0],point[1],otherExtent[1],point[1]),pointerEl=self._getPointerElement(cartesian,axisPointerModel,axisType,targetShape);
graphic.subPixelOptimizeLine({shape:targetShape,style:pointerEl.style
}),moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape
},axisPointerModel):pointerEl.attr({shape:targetShape})}function moveGridShadow(axisType,point,otherExtent){
var axis=cartesian.getAxis(axisType),bandWidth=axis.getBandWidth(),span=otherExtent[1]-otherExtent[0],targetShape="x"===axisType?makeRectShape(point[0]-bandWidth/2,otherExtent[0],bandWidth,span):makeRectShape(otherExtent[0],point[1]-bandWidth/2,span,bandWidth),pointerEl=self._getPointerElement(cartesian,axisPointerModel,axisType,targetShape);
moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape
},axisPointerModel):pointerEl.attr({shape:targetShape})}var self=this,axisPointerType=axisPointerModel.get("type"),baseAxis=cartesian.getBaseAxis(),moveAnimation=enableAnimation&&"cross"!==axisPointerType&&"category"===baseAxis.type&&baseAxis.getBandWidth()>20;
if("cross"===axisPointerType)moveGridLine("x",point,cartesian.getAxis("y").getGlobalExtent()),
moveGridLine("y",point,cartesian.getAxis("x").getGlobalExtent()),
this._updateCrossText(cartesian,point,axisPointerModel);else{
var otherAxis=cartesian.getAxis("x"===axisType?"y":"x"),otherExtent=otherAxis.getGlobalExtent();
"cartesian2d"===cartesian.type&&("line"===axisPointerType?moveGridLine:moveGridShadow)(axisType,point,otherExtent);
}},_showSinglePointer:function(axisPointerModel,single,axisType,point,enableAnimation){
function moveSingleLine(axisType,point,otherExtent){var axis=single.getAxis(),orient=axis.orient,targetShape="horizontal"===orient?makeLineShape(point[0],otherExtent[0],point[0],otherExtent[1]):makeLineShape(otherExtent[0],point[1],otherExtent[1],point[1]),pointerEl=self._getPointerElement(single,axisPointerModel,axisType,targetShape);
moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape
},axisPointerModel):pointerEl.attr({shape:targetShape})}var self=this,axisPointerType=axisPointerModel.get("type"),moveAnimation=enableAnimation&&"cross"!==axisPointerType&&"category"===single.getBaseAxis().type,rect=single.getRect(),otherExtent=[rect.y,rect.y+rect.height];
moveSingleLine(axisType,point,otherExtent)},_showPolarPointer:function(axisPointerModel,polar,axisType,point,enableAnimation){
function movePolarLine(axisType,point,otherExtent){var targetShape,mouseCoord=polar.pointToCoord(point);
if("angle"===axisType){var p1=polar.coordToPoint([otherExtent[0],mouseCoord[1]]),p2=polar.coordToPoint([otherExtent[1],mouseCoord[1]]);
targetShape=makeLineShape(p1[0],p1[1],p2[0],p2[1])}else targetShape={
cx:polar.cx,cy:polar.cy,r:mouseCoord[0]};var pointerEl=self._getPointerElement(polar,axisPointerModel,axisType,targetShape);
moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape
},axisPointerModel):pointerEl.attr({shape:targetShape})}function movePolarShadow(axisType,point,otherExtent){
var targetShape,axis=polar.getAxis(axisType),bandWidth=axis.getBandWidth(),mouseCoord=polar.pointToCoord(point),radian=Math.PI/180;
targetShape="angle"===axisType?makeSectorShape(polar.cx,polar.cy,otherExtent[0],otherExtent[1],(-mouseCoord[1]-bandWidth/2)*radian,(-mouseCoord[1]+bandWidth/2)*radian):makeSectorShape(polar.cx,polar.cy,mouseCoord[0]-bandWidth/2,mouseCoord[0]+bandWidth/2,0,2*Math.PI);
var pointerEl=self._getPointerElement(polar,axisPointerModel,axisType,targetShape);
moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape
},axisPointerModel):pointerEl.attr({shape:targetShape})}var self=this,axisPointerType=axisPointerModel.get("type"),angleAxis=polar.getAngleAxis(),radiusAxis=polar.getRadiusAxis(),moveAnimation=enableAnimation&&"cross"!==axisPointerType&&"category"===polar.getBaseAxis().type;
if("cross"===axisPointerType)movePolarLine("angle",point,radiusAxis.getExtent()),
movePolarLine("radius",point,angleAxis.getExtent()),this._updateCrossText(polar,point,axisPointerModel);else{
var otherAxis=polar.getAxis("radius"===axisType?"angle":"radius"),otherExtent=otherAxis.getExtent();
("line"===axisPointerType?movePolarLine:movePolarShadow)(axisType,point,otherExtent);
}},_updateCrossText:function(coordSys,point,axisPointerModel){
var crossStyleModel=axisPointerModel.getModel("crossStyle"),textStyleModel=crossStyleModel.getModel("textStyle"),tooltipModel=this._tooltipModel,text=this._crossText;
text||(text=this._crossText=new graphic.Text({style:{textAlign:"left",
textVerticalAlign:"bottom"}}),this.group.add(text));var value=coordSys.pointToData(point),dims=coordSys.dimensions;
value=zrUtil.map(value,function(val,idx){var axis=coordSys.getAxis(dims[idx]);
return val="category"===axis.type||"time"===axis.type?axis.scale.getLabel(val):formatUtil.addCommas(val.toFixed(axis.getPixelPrecision()));
}),text.setStyle({fill:textStyleModel.getTextColor()||crossStyleModel.get("color"),
textFont:textStyleModel.getFont(),text:value.join(", "),x:point[0]+5,
y:point[1]-5}),text.z=tooltipModel.get("z"),text.zlevel=tooltipModel.get("zlevel");
},_getPointerElement:function(coordSys,pointerModel,axisType,initShape){
var tooltipModel=this._tooltipModel,z=tooltipModel.get("z"),zlevel=tooltipModel.get("zlevel"),axisPointers=this._axisPointers,coordSysName=coordSys.name;
if(axisPointers[coordSysName]=axisPointers[coordSysName]||{},
axisPointers[coordSysName][axisType])return axisPointers[coordSysName][axisType];
var pointerType=pointerModel.get("type"),styleModel=pointerModel.getModel(pointerType+"Style"),isShadow="shadow"===pointerType,style=styleModel[isShadow?"getAreaStyle":"getLineStyle"](),elementType="polar"===coordSys.type?isShadow?"Sector":"radius"===axisType?"Circle":"Line":isShadow?"Rect":"Line";
isShadow?style.stroke=null:style.fill=null;var el=axisPointers[coordSysName][axisType]=new graphic[elementType]({
style:style,z:z,zlevel:zlevel,silent:!0,shape:initShape});return this.group.add(el),
el},_dispatchAndShowSeriesTooltipContent:function(coordSys,seriesList,point,value,contentNotChange,positionExpr){
var rootTooltipModel=this._tooltipModel,baseAxis=coordSys.getBaseAxis(),baseDimIndex={
x:1,radius:1,single:1}[baseAxis.dim]?0:1;if(seriesList.length){
var sampleSeriesIndex,payloadBatch=zrUtil.map(seriesList,function(series){
return{seriesIndex:series.seriesIndex,dataIndexInside:series.getAxisTooltipDataIndex?series.getAxisTooltipDataIndex(series.coordDimToDataDim(baseAxis.dim),value,baseAxis):series.getData().indexOfNearest(series.coordDimToDataDim(baseAxis.dim)[0],value[baseDimIndex],!1,"category"===baseAxis.type?.5:null)
}});zrUtil.each(payloadBatch,function(payload,idx){seriesList[idx].getData().hasValue(payload.dataIndexInside)&&(sampleSeriesIndex=idx);
}),sampleSeriesIndex=sampleSeriesIndex||0;var lastHover=this._lastHover,api=this._api;
lastHover.payloadBatch&&!contentNotChange&&api.dispatchAction({
type:"downplay",batch:lastHover.payloadBatch}),contentNotChange||(api.dispatchAction({
type:"highlight",batch:payloadBatch}),lastHover.payloadBatch=payloadBatch);
var dataIndex=payloadBatch[sampleSeriesIndex].dataIndexInside;
if(api.dispatchAction({type:"showTip",dataIndexInside:dataIndex,
dataIndex:seriesList[sampleSeriesIndex].getData().getRawIndex(dataIndex),
seriesIndex:payloadBatch[sampleSeriesIndex].seriesIndex,from:this.uid
}),baseAxis&&rootTooltipModel.get("showContent")&&rootTooltipModel.get("show")){
var paramsList=zrUtil.map(seriesList,function(series,index){return series.getDataParams(payloadBatch[index].dataIndexInside);
});if(contentNotChange)updatePosition(positionExpr||rootTooltipModel.get("position"),point[0],point[1],rootTooltipModel.get("confine"),this._tooltipContent,paramsList,null,api);else{
var firstDataIndex=payloadBatch[sampleSeriesIndex].dataIndexInside,firstLine="time"===baseAxis.type?baseAxis.scale.getLabel(value[baseDimIndex]):seriesList[sampleSeriesIndex].getData().getName(firstDataIndex),defaultHtml=(firstLine?formatUtil.encodeHTML(firstLine)+"<br />":"")+zrUtil.map(seriesList,function(series,index){
return series.formatTooltip(payloadBatch[index].dataIndexInside,!0);
}).join("<br />"),asyncTicket="axis_"+coordSys.name+"_"+firstDataIndex;
this._showTooltipContent(rootTooltipModel,defaultHtml,paramsList,asyncTicket,point[0],point[1],positionExpr,null,api);
}}}},_showItemTooltipContent:function(seriesModel,dataIndex,dataType,e){
var api=this._api,data=seriesModel.getData(dataType),itemModel=data.getItemModel(dataIndex),tooltipOpt=itemModel.get("tooltip",!0);
if("string"==typeof tooltipOpt){var tooltipContent=tooltipOpt;
tooltipOpt={formatter:tooltipContent}}var rootTooltipModel=this._tooltipModel,seriesTooltipModel=seriesModel.getModel("tooltip",rootTooltipModel),tooltipModel=new Model(tooltipOpt,seriesTooltipModel,seriesTooltipModel.ecModel),params=seriesModel.getDataParams(dataIndex,dataType),defaultHtml=seriesModel.formatTooltip(dataIndex,!1,dataType),asyncTicket="item_"+seriesModel.name+"_"+dataIndex;
this._showTooltipContent(tooltipModel,defaultHtml,params,asyncTicket,e.offsetX,e.offsetY,e.position,e.target,api);
},_showTooltipContent:function(tooltipModel,defaultHtml,params,asyncTicket,x,y,positionExpr,target,api){
if(this._ticket="",tooltipModel.get("showContent")&&tooltipModel.get("show")){
var tooltipContent=this._tooltipContent,confine=tooltipModel.get("confine"),formatter=tooltipModel.get("formatter");
positionExpr=positionExpr||tooltipModel.get("position");var html=defaultHtml;
if(formatter)if("string"==typeof formatter)html=formatUtil.formatTpl(formatter,params,!0);else if("function"==typeof formatter){
var self=this,ticket=asyncTicket,callback=function(cbTicket,html){
cbTicket===self._ticket&&(tooltipContent.setContent(html),updatePosition(positionExpr,x,y,confine,tooltipContent,params,target,api));
};self._ticket=ticket,html=formatter(params,ticket,callback)}
tooltipContent.show(tooltipModel),tooltipContent.setContent(html),
updatePosition(positionExpr,x,y,confine,tooltipContent,params,target,api);
}},_showAxisPointer:function(coordSysName){if(coordSysName){var axisPointers=this._axisPointers[coordSysName];
axisPointers&&zrUtil.each(axisPointers,function(el){el.show();
})}else this.group.eachChild(function(child){child.show()}),this.group.show();
},_resetLastHover:function(){var lastHover=this._lastHover;lastHover.payloadBatch&&this._api.dispatchAction({
type:"downplay",batch:lastHover.payloadBatch}),this._lastHover={};
},_hideAxisPointer:function(coordSysName){if(coordSysName){var axisPointers=this._axisPointers[coordSysName];
axisPointers&&zrUtil.each(axisPointers,function(el){el.hide();
})}else this.group.children().length&&this.group.hide()},_hide:function(){
clearTimeout(this._showTimeout),this._hideAxisPointer(),this._resetLastHover(),
this._alwaysShowContent||this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),
this._api.dispatchAction({type:"hideTip",from:this.uid}),this._lastX=this._lastY=null;
},dispose:function(ecModel,api){if(!env.node){var zr=api.getZr();
this._tooltipContent.hide(),zr.off("click",this._tryShow),zr.off("mousemove",this._mousemove),
zr.off("mouseout",this._hide),zr.off("globalout",this._hide)}
}})},function(module,exports,__webpack_require__){function assembleTransition(duration){
var transitionCurve="cubic-bezier(0.23, 1, 0.32, 1)",transitionText="left "+duration+"s "+transitionCurve+",top "+duration+"s "+transitionCurve;
return zrUtil.map(vendors,function(vendorPrefix){return vendorPrefix+"transition:"+transitionText;
}).join(";")}function assembleFont(textStyleModel){var cssText=[],fontSize=textStyleModel.get("fontSize"),color=textStyleModel.getTextColor();
return color&&cssText.push("color:"+color),cssText.push("font:"+textStyleModel.getFont()),
fontSize&&cssText.push("line-height:"+Math.round(3*fontSize/2)+"px"),
each(["decoration","align"],function(name){var val=textStyleModel.get(name);
val&&cssText.push("text-"+name+":"+val)}),cssText.join(";")}function assembleCssText(tooltipModel){
tooltipModel=tooltipModel;var cssText=[],transitionDuration=tooltipModel.get("transitionDuration"),backgroundColor=tooltipModel.get("backgroundColor"),textStyleModel=tooltipModel.getModel("textStyle"),padding=tooltipModel.get("padding");
return transitionDuration&&cssText.push(assembleTransition(transitionDuration)),
backgroundColor&&(env.canvasSupported?cssText.push("background-Color:"+backgroundColor):(cssText.push("background-Color:#"+zrColor.toHex(backgroundColor)),
cssText.push("filter:alpha(opacity=70)"))),each(["width","color","radius"],function(name){
var borderName="border-"+name,camelCase=toCamelCase(borderName),val=tooltipModel.get(camelCase);
null!=val&&cssText.push(borderName+":"+val+("color"===name?"":"px"));
}),cssText.push(assembleFont(textStyleModel)),null!=padding&&cssText.push("padding:"+formatUtil.normalizeCssArray(padding).join("px ")+"px"),
cssText.join(";")+";"}function TooltipContent(container,api){
var el=document.createElement("div"),zr=api.getZr();this.el=el,
this._x=api.getWidth()/2,this._y=api.getHeight()/2,container.appendChild(el),
this._container=container,this._show=!1,this._hideTimeout;var self=this;
el.onmouseenter=function(){self.enterable&&(clearTimeout(self._hideTimeout),
self._show=!0),self._inContent=!0},el.onmousemove=function(e){
if(e=e||window.event,!self.enterable){var handler=zr.handler;eventUtil.normalizeEvent(container,e,!0),
handler.dispatch("mousemove",e)}},el.onmouseleave=function(){
self.enterable&&self._show&&self.hideLater(self._hideDelay),self._inContent=!1;
}}var zrUtil=__webpack_require__(4),zrColor=__webpack_require__(39),eventUtil=__webpack_require__(88),formatUtil=__webpack_require__(6),each=zrUtil.each,toCamelCase=formatUtil.toCamelCase,env=__webpack_require__(2),vendors=["","-webkit-","-moz-","-o-"],gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";
TooltipContent.prototype={constructor:TooltipContent,enterable:!0,
update:function(){var container=this._container,stl=container.currentStyle||document.defaultView.getComputedStyle(container),domStyle=container.style;
"absolute"!==domStyle.position&&"absolute"!==stl.position&&(domStyle.position="relative");
},show:function(tooltipModel){clearTimeout(this._hideTimeout);
var el=this.el;el.style.cssText=gCssText+assembleCssText(tooltipModel)+";left:"+this._x+"px;top:"+this._y+"px;"+(tooltipModel.get("extraCssText")||""),
el.style.display=el.innerHTML?"block":"none",this._show=!0},setContent:function(content){
var el=this.el;el.innerHTML=content,el.style.display=content?"block":"none";
},moveTo:function(x,y){var style=this.el.style;style.left=x+"px",
style.top=y+"px",this._x=x,this._y=y},hide:function(){this.el.style.display="none",
this._show=!1},hideLater:function(time){!this._show||this._inContent&&this.enterable||(time?(this._hideDelay=time,
this._show=!1,this._hideTimeout=setTimeout(zrUtil.bind(this.hide,this),time)):this.hide());
},isShow:function(){return this._show}},module.exports=TooltipContent;
},function(module,exports,__webpack_require__){"use strict";__webpack_require__(304),
__webpack_require__(310),__webpack_require__(312),__webpack_require__(1).extendComponentView({
type:"polar"})},function(module,exports,__webpack_require__){
function resizePolar(polarModel,api){var center=polarModel.get("center"),radius=polarModel.get("radius"),width=api.getWidth(),height=api.getHeight(),parsePercent=numberUtil.parsePercent;
this.cx=parsePercent(center[0],width),this.cy=parsePercent(center[1],height);
var radiusAxis=this.getRadiusAxis(),size=Math.min(width,height)/2;
radiusAxis.setExtent(0,parsePercent(radius,size))}function updatePolarScale(ecModel,api){
var polar=this,angleAxis=polar.getAngleAxis(),radiusAxis=polar.getRadiusAxis();
if(angleAxis.scale.setExtent(1/0,-(1/0)),radiusAxis.scale.setExtent(1/0,-(1/0)),
ecModel.eachSeries(function(seriesModel){if(seriesModel.coordinateSystem===polar){
var data=seriesModel.getData();radiusAxis.scale.unionExtentFromData(data,"radius"),
angleAxis.scale.unionExtentFromData(data,"angle")}}),niceScaleExtent(angleAxis,angleAxis.model),
niceScaleExtent(radiusAxis,radiusAxis.model),"category"===angleAxis.type&&!angleAxis.onBand){
var extent=angleAxis.getExtent(),diff=360/angleAxis.scale.count();
angleAxis.inverse?extent[1]+=diff:extent[1]-=diff,angleAxis.setExtent(extent[0],extent[1]);
}}function setAxis(axis,axisModel){if(axis.type=axisModel.get("type"),
axis.scale=axisHelper.createScaleByModel(axisModel),axis.onBand=axisModel.get("boundaryGap")&&"category"===axis.type,
"angleAxis"===axisModel.mainType){var startAngle=axisModel.get("startAngle");
axis.inverse=axisModel.get("inverse")^axisModel.get("clockwise"),
axis.setExtent(startAngle,startAngle+(axis.inverse?-360:360));
}axisModel.axis=axis,axis.model=axisModel}var Polar=__webpack_require__(305),numberUtil=__webpack_require__(7),zrUtil=__webpack_require__(4),axisHelper=__webpack_require__(115),niceScaleExtent=axisHelper.niceScaleExtent;
__webpack_require__(308);var polarCreator={dimensions:Polar.prototype.dimensions,
create:function(ecModel,api){var polarList=[];return ecModel.eachComponent("polar",function(polarModel,idx){
var polar=new Polar(idx);polar.resize=resizePolar,polar.update=updatePolarScale;
var radiusAxis=polar.getRadiusAxis(),angleAxis=polar.getAngleAxis(),radiusAxisModel=polarModel.findAxisModel("radiusAxis"),angleAxisModel=polarModel.findAxisModel("angleAxis");
setAxis(radiusAxis,radiusAxisModel),setAxis(angleAxis,angleAxisModel),
polar.resize(polarModel,api),polarList.push(polar),polarModel.coordinateSystem=polar;
}),ecModel.eachSeries(function(seriesModel){if("polar"===seriesModel.get("coordinateSystem")){
var polarModel=ecModel.queryComponents({mainType:"polar",index:seriesModel.get("polarIndex"),
id:seriesModel.get("polarId")})[0];if(!polarModel)throw new Error('Polar "'+zrUtil.retrieve(seriesModel.get("polarIndex"),seriesModel.get("polarId"),0)+'" not found');
seriesModel.coordinateSystem=polarModel.coordinateSystem}}),polarList;
}};__webpack_require__(26).register("polar",polarCreator)},function(module,exports,__webpack_require__){
"use strict";var RadiusAxis=__webpack_require__(306),AngleAxis=__webpack_require__(307),Polar=function(name){
this.name=name||"",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,
this._angleAxis=new AngleAxis};Polar.prototype={constructor:Polar,
type:"polar",dimensions:["radius","angle"],containPoint:function(point){
var coord=this.pointToCoord(point);return this._radiusAxis.contain(coord[0])&&this._angleAxis.contain(coord[1]);
},containData:function(data){return this._radiusAxis.containData(data[0])&&this._angleAxis.containData(data[1]);
},getAxis:function(axisType){return this["_"+axisType+"Axis"];
},getAxesByScale:function(scaleType){var axes=[],angleAxis=this._angleAxis,radiusAxis=this._radiusAxis;
return angleAxis.scale.type===scaleType&&axes.push(angleAxis),
radiusAxis.scale.type===scaleType&&axes.push(radiusAxis),axes;
},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){
return this._radiusAxis},getOtherAxis:function(axis){var angleAxis=this._angleAxis;
return axis===angleAxis?this._radiusAxis:angleAxis},getBaseAxis:function(){
return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis();
},dataToPoints:function(data){return data.mapArray(this.dimensions,function(radius,angle){
return this.dataToPoint([radius,angle])},this)},dataToPoint:function(data,clamp){
return this.coordToPoint([this._radiusAxis.dataToRadius(data[0],clamp),this._angleAxis.dataToAngle(data[1],clamp)]);
},pointToData:function(point,clamp){var coord=this.pointToCoord(point);
return[this._radiusAxis.radiusToData(coord[0],clamp),this._angleAxis.angleToData(coord[1],clamp)];
},pointToCoord:function(point){var dx=point[0]-this.cx,dy=point[1]-this.cy,angleAxis=this.getAngleAxis(),extent=angleAxis.getExtent(),minAngle=Math.min(extent[0],extent[1]),maxAngle=Math.max(extent[0],extent[1]);
angleAxis.inverse?minAngle=maxAngle-360:maxAngle=minAngle+360;
var radius=Math.sqrt(dx*dx+dy*dy);dx/=radius,dy/=radius;for(var radian=Math.atan2(-dy,dx)/Math.PI*180,dir=radian<minAngle?1:-1;radian<minAngle||radian>maxAngle;)radian+=360*dir;
return[radius,radian]},coordToPoint:function(coord){var radius=coord[0],radian=coord[1]/180*Math.PI,x=Math.cos(radian)*radius+this.cx,y=-Math.sin(radian)*radius+this.cy;
return[x,y]}},module.exports=Polar},function(module,exports,__webpack_require__){
"use strict";function RadiusAxis(scale,radiusExtent){Axis.call(this,"radius",scale,radiusExtent),
this.type="category"}var zrUtil=__webpack_require__(4),Axis=__webpack_require__(124);
RadiusAxis.prototype={constructor:RadiusAxis,dataToRadius:Axis.prototype.dataToCoord,
radiusToData:Axis.prototype.coordToData},zrUtil.inherits(RadiusAxis,Axis),
module.exports=RadiusAxis},function(module,exports,__webpack_require__){
"use strict";function AngleAxis(scale,angleExtent){angleExtent=angleExtent||[0,360],
Axis.call(this,"angle",scale,angleExtent),this.type="category";
}var zrUtil=__webpack_require__(4),Axis=__webpack_require__(124);
AngleAxis.prototype={constructor:AngleAxis,dataToAngle:Axis.prototype.dataToCoord,
angleToData:Axis.prototype.coordToData},zrUtil.inherits(AngleAxis,Axis),
module.exports=AngleAxis},function(module,exports,__webpack_require__){
"use strict";__webpack_require__(309),__webpack_require__(1).extendComponentModel({
type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,
findAxisModel:function(axisType){var foundAxisModel,ecModel=this.ecModel;
return ecModel.eachComponent(axisType,function(axisModel){axisModel.getCoordSysModel()===this&&(foundAxisModel=axisModel);
},this),foundAxisModel},defaultOption:{zlevel:0,z:0,center:["50%","50%"],
radius:"80%"}})},function(module,exports,__webpack_require__){
"use strict";function getAxisType(axisDim,option){return option.type||(option.data?"category":"value");
}var zrUtil=__webpack_require__(4),ComponentModel=__webpack_require__(19),axisModelCreator=__webpack_require__(128),PolarAxisModel=ComponentModel.extend({
type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({
mainType:"polar",index:this.option.polarIndex,id:this.option.polarId
})[0]}});zrUtil.merge(PolarAxisModel.prototype,__webpack_require__(130));
var polarAxisDefaultExtendedOption={angle:{startAngle:90,clockwise:!0,
splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};
axisModelCreator("angle",PolarAxisModel,getAxisType,polarAxisDefaultExtendedOption.angle),
axisModelCreator("radius",PolarAxisModel,getAxisType,polarAxisDefaultExtendedOption.radius);
},function(module,exports,__webpack_require__){"use strict";__webpack_require__(304),
__webpack_require__(311)},function(module,exports,__webpack_require__){
"use strict";function getAxisLineShape(polar,r0,r,angle){var start=polar.coordToPoint([r0,angle]),end=polar.coordToPoint([r,angle]);
return{x1:start[0],y1:start[1],x2:end[0],y2:end[1]}}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),Model=__webpack_require__(12),elementList=["axisLine","axisLabel","axisTick","splitLine","splitArea"];
__webpack_require__(1).extendComponentView({type:"angleAxis",
render:function(angleAxisModel,ecModel){if(this.group.removeAll(),
angleAxisModel.get("show")){var polarModel=ecModel.getComponent("polar",angleAxisModel.get("polarIndex")),angleAxis=angleAxisModel.axis,polar=polarModel.coordinateSystem,radiusExtent=polar.getRadiusAxis().getExtent(),ticksAngles=angleAxis.getTicksCoords();
"category"!==angleAxis.type&&ticksAngles.pop(),zrUtil.each(elementList,function(name){
!angleAxisModel.get(name+".show")||angleAxis.isBlank()&&"axisLine"!==name||this["_"+name](angleAxisModel,polar,ticksAngles,radiusExtent);
},this)}},_axisLine:function(angleAxisModel,polar,ticksAngles,radiusExtent){
var lineStyleModel=angleAxisModel.getModel("axisLine.lineStyle"),circle=new graphic.Circle({
shape:{cx:polar.cx,cy:polar.cy,r:radiusExtent[1]},style:lineStyleModel.getLineStyle(),
z2:1,silent:!0});circle.style.fill=null,this.group.add(circle);
},_axisTick:function(angleAxisModel,polar,ticksAngles,radiusExtent){
var tickModel=angleAxisModel.getModel("axisTick"),tickLen=(tickModel.get("inside")?-1:1)*tickModel.get("length"),lines=zrUtil.map(ticksAngles,function(tickAngle){
return new graphic.Line({shape:getAxisLineShape(polar,radiusExtent[1],radiusExtent[1]+tickLen,tickAngle)
})});this.group.add(graphic.mergePath(lines,{style:zrUtil.defaults(tickModel.getModel("lineStyle").getLineStyle(),{
stroke:angleAxisModel.get("axisLine.lineStyle.color")})}))},_axisLabel:function(angleAxisModel,polar,ticksAngles,radiusExtent){
for(var axis=angleAxisModel.axis,categoryData=angleAxisModel.get("data"),labelModel=angleAxisModel.getModel("axisLabel"),axisTextStyleModel=labelModel.getModel("textStyle"),labels=angleAxisModel.getFormattedLabels(),labelMargin=labelModel.get("margin"),labelsAngles=axis.getLabelsCoords(),i=0;i<ticksAngles.length;i++){
var r=radiusExtent[1],p=polar.coordToPoint([r+labelMargin,labelsAngles[i]]),cx=polar.cx,cy=polar.cy,labelTextAlign=Math.abs(p[0]-cx)/r<.3?"center":p[0]>cx?"left":"right",labelTextBaseline=Math.abs(p[1]-cy)/r<.3?"middle":p[1]>cy?"top":"bottom",textStyleModel=axisTextStyleModel;
categoryData&&categoryData[i]&&categoryData[i].textStyle&&(textStyleModel=new Model(categoryData[i].textStyle,axisTextStyleModel)),
this.group.add(new graphic.Text({style:{x:p[0],y:p[1],fill:textStyleModel.getTextColor()||angleAxisModel.get("axisLine.lineStyle.color"),
text:labels[i],textAlign:labelTextAlign,textVerticalAlign:labelTextBaseline,
textFont:textStyleModel.getFont()},silent:!0}))}},_splitLine:function(angleAxisModel,polar,ticksAngles,radiusExtent){
var splitLineModel=angleAxisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineCount=0;
lineColors=lineColors instanceof Array?lineColors:[lineColors];
for(var splitLines=[],i=0;i<ticksAngles.length;i++){var colorIndex=lineCount++%lineColors.length;
splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new graphic.Line({
shape:getAxisLineShape(polar,radiusExtent[0],radiusExtent[1],ticksAngles[i])
}))}for(var i=0;i<splitLines.length;i++)this.group.add(graphic.mergePath(splitLines[i],{
style:zrUtil.defaults({stroke:lineColors[i%lineColors.length]
},lineStyleModel.getLineStyle()),silent:!0,z:angleAxisModel.get("z")
}))},_splitArea:function(angleAxisModel,polar,ticksAngles,radiusExtent){
var splitAreaModel=angleAxisModel.getModel("splitArea"),areaStyleModel=splitAreaModel.getModel("areaStyle"),areaColors=areaStyleModel.get("color"),lineCount=0;
areaColors=areaColors instanceof Array?areaColors:[areaColors];
for(var splitAreas=[],RADIAN=Math.PI/180,prevAngle=-ticksAngles[0]*RADIAN,r0=Math.min(radiusExtent[0],radiusExtent[1]),r1=Math.max(radiusExtent[0],radiusExtent[1]),clockwise=angleAxisModel.get("clockwise"),i=1;i<ticksAngles.length;i++){
var colorIndex=lineCount++%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[],
splitAreas[colorIndex].push(new graphic.Sector({shape:{cx:polar.cx,
cy:polar.cy,r0:r0,r:r1,startAngle:prevAngle,endAngle:-ticksAngles[i]*RADIAN,
clockwise:clockwise},silent:!0})),prevAngle=-ticksAngles[i]*RADIAN;
}for(var i=0;i<splitAreas.length;i++)this.group.add(graphic.mergePath(splitAreas[i],{
style:zrUtil.defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),
silent:!0}))}})},function(module,exports,__webpack_require__){
__webpack_require__(304),__webpack_require__(313)},function(module,exports,__webpack_require__){
"use strict";function layoutAxis(polar,radiusAxisModel,axisAngle){
return{position:[polar.cx,polar.cy],rotation:axisAngle/180*Math.PI,
labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotation:radiusAxisModel.getModel("axisLabel").get("rotate"),
z2:1}}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),AxisBuilder=__webpack_require__(133),axisBuilderAttrs=["axisLine","axisLabel","axisTick","axisName"],selfBuilderAttrs=["splitLine","splitArea"];
__webpack_require__(1).extendComponentView({type:"radiusAxis",
render:function(radiusAxisModel,ecModel){if(this.group.removeAll(),
radiusAxisModel.get("show")){var polarModel=ecModel.getComponent("polar",radiusAxisModel.get("polarIndex")),angleAxis=polarModel.coordinateSystem.getAngleAxis(),radiusAxis=radiusAxisModel.axis,polar=polarModel.coordinateSystem,ticksCoords=radiusAxis.getTicksCoords(),axisAngle=angleAxis.getExtent()[0],radiusExtent=radiusAxis.getExtent(),layout=layoutAxis(polar,radiusAxisModel,axisAngle),axisBuilder=new AxisBuilder(radiusAxisModel,layout);
zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),this.group.add(axisBuilder.getGroup()),
zrUtil.each(selfBuilderAttrs,function(name){radiusAxisModel.get(name+".show")&&!radiusAxis.isBlank()&&this["_"+name](radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords);
},this)}},_splitLine:function(radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){
var splitLineModel=radiusAxisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineCount=0;
lineColors=lineColors instanceof Array?lineColors:[lineColors];
for(var splitLines=[],i=0;i<ticksCoords.length;i++){var colorIndex=lineCount++%lineColors.length;
splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new graphic.Circle({
shape:{cx:polar.cx,cy:polar.cy,r:ticksCoords[i]},silent:!0}));
}for(var i=0;i<splitLines.length;i++)this.group.add(graphic.mergePath(splitLines[i],{
style:zrUtil.defaults({stroke:lineColors[i%lineColors.length],
fill:null},lineStyleModel.getLineStyle()),silent:!0}))},_splitArea:function(radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){
var splitAreaModel=radiusAxisModel.getModel("splitArea"),areaStyleModel=splitAreaModel.getModel("areaStyle"),areaColors=areaStyleModel.get("color"),lineCount=0;
areaColors=areaColors instanceof Array?areaColors:[areaColors];
for(var splitAreas=[],prevRadius=ticksCoords[0],i=1;i<ticksCoords.length;i++){
var colorIndex=lineCount++%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[],
splitAreas[colorIndex].push(new graphic.Sector({shape:{cx:polar.cx,
cy:polar.cy,r0:prevRadius,r:ticksCoords[i],startAngle:0,endAngle:2*Math.PI
},silent:!0})),prevRadius=ticksCoords[i]}for(var i=0;i<splitAreas.length;i++)this.group.add(graphic.mergePath(splitAreas[i],{
style:zrUtil.defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),
silent:!0}))}})},function(module,exports,__webpack_require__){
function makeAction(method,actionInfo){actionInfo.update="updateView",
echarts.registerAction(actionInfo,function(payload,ecModel){var selected={};
return ecModel.eachComponent({mainType:"geo",query:payload},function(geoModel){
geoModel[method](payload.name);var geo=geoModel.coordinateSystem;
zrUtil.each(geo.regions,function(region){selected[region.name]=geoModel.isSelected(region.name)||!1;
})}),{selected:selected,name:payload.name}})}__webpack_require__(315),
__webpack_require__(166),__webpack_require__(316),__webpack_require__(179);
var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);
makeAction("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"
}),makeAction("select",{type:"geoSelect",event:"geoselected"}),
makeAction("unSelect",{type:"geoUnSelect",event:"geounselected"
})},function(module,exports,__webpack_require__){"use strict";
var modelUtil=__webpack_require__(5),ComponentModel=__webpack_require__(19),Model=__webpack_require__(12),zrUtil=__webpack_require__(4),selectableMixin=__webpack_require__(143),geoCreator=__webpack_require__(166),GeoModel=ComponentModel.extend({
type:"geo",coordinateSystem:null,layoutMode:"box",init:function(option){
ComponentModel.prototype.init.apply(this,arguments),modelUtil.defaultEmphasis(option.label,["position","show","textStyle","distance","formatter"]);
},optionUpdated:function(){var option=this.option,self=this;option.regions=geoCreator.getFilledRegions(option.regions,option.map),
this._optionModelMap=zrUtil.reduce(option.regions||[],function(obj,regionOpt){
return regionOpt.name&&(obj[regionOpt.name]=new Model(regionOpt,self)),
obj},{}),this.updateSelectedMap(option.regions)},defaultOption:{
zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:.75,
silent:!1,map:"",center:null,zoom:1,scaleLimit:null,label:{normal:{
show:!1,textStyle:{color:"#000"}},emphasis:{show:!0,textStyle:{
color:"rgb(100,0,0)"}}},itemStyle:{normal:{borderWidth:.5,borderColor:"#444",
color:"#eee"},emphasis:{color:"rgba(255,215,0,0.8)"}},regions:[]
},getRegionModel:function(name){return this._optionModelMap[name];
},getFormattedLabel:function(name,status){var formatter=this.get("label."+status+".formatter"),params={
name:name};if("function"==typeof formatter)return params.status=status,
formatter(params);if("string"==typeof formatter){var serName=params.seriesName;
return formatter.replace("{a}",null!=serName?serName:"")}},setZoom:function(zoom){
this.option.zoom=zoom},setCenter:function(center){this.option.center=center;
}});zrUtil.mixin(GeoModel,selectableMixin),module.exports=GeoModel;
},function(module,exports,__webpack_require__){"use strict";var MapDraw=__webpack_require__(176);
module.exports=__webpack_require__(1).extendComponentView({type:"geo",
init:function(ecModel,api){var mapDraw=new MapDraw(api,(!0));this._mapDraw=mapDraw,
this.group.add(mapDraw.group)},render:function(geoModel,ecModel,api,payload){
if(!payload||"geoToggleSelect"!==payload.type||payload.from!==this.uid){
var mapDraw=this._mapDraw;geoModel.get("show")?mapDraw.draw(geoModel,ecModel,api,this,payload):this._mapDraw.group.removeAll(),
this.group.silent=geoModel.get("silent")}},dispose:function(){
this._mapDraw&&this._mapDraw.remove()}})},function(module,exports,__webpack_require__){
__webpack_require__(1).registerPreprocessor(__webpack_require__(318)),
__webpack_require__(319),__webpack_require__(323),__webpack_require__(324),
__webpack_require__(325),__webpack_require__(326)},function(module,exports,__webpack_require__){
function removeDuplicate(arr){var map={};zrUtil.each(arr,function(val){
map[val]=1}),arr.length=0,zrUtil.each(map,function(flag,val){
arr.push(val)})}var zrUtil=__webpack_require__(4),DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];
module.exports=function(option,isNew){var brushComponents=option&&option.brush;
if(zrUtil.isArray(brushComponents)||(brushComponents=brushComponents?[brushComponents]:[]),
brushComponents.length){var brushComponentSpecifiedBtns=[];zrUtil.each(brushComponents,function(brushOpt){
var tbs=brushOpt.hasOwnProperty("toolbox")?brushOpt.toolbox:[];
tbs instanceof Array&&(brushComponentSpecifiedBtns=brushComponentSpecifiedBtns.concat(tbs));
});var toolbox=option&&option.toolbox;zrUtil.isArray(toolbox)&&(toolbox=toolbox[0]),
toolbox||(toolbox={feature:{}},option.toolbox=[toolbox]);var toolboxFeature=toolbox.feature||(toolbox.feature={}),toolboxBrush=toolboxFeature.brush||(toolboxFeature.brush={}),brushTypes=toolboxBrush.type||(toolboxBrush.type=[]);
brushTypes.push.apply(brushTypes,brushComponentSpecifiedBtns),
removeDuplicate(brushTypes),isNew&&!brushTypes.length&&brushTypes.push.apply(brushTypes,DEFAULT_TOOLBOX_BTNS);
}}},function(module,exports,__webpack_require__){function dispatchAction(api,throttleType,throttleDelay,brushSelected,payload){
if(payload){var zr=api.getZr();if(!zr[DISPATCH_FLAG]){zr[DISPATCH_METHOD]||(zr[DISPATCH_METHOD]=doDispatch);
var fn=throttle.createOrUpdate(zr,DISPATCH_METHOD,throttleDelay,throttleType);
fn(api,brushSelected)}}}function doDispatch(api,brushSelected){
if(!api.isDisposed()){var zr=api.getZr();zr[DISPATCH_FLAG]=!0,
api.dispatchAction({type:"brushSelect",batch:brushSelected}),
zr[DISPATCH_FLAG]=!1}}function checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex){
for(var itemLayout=data.getItemLayout(dataIndex),i=0,len=rangeInfoList.length;i<len;i++){
var area=rangeInfoList[i];if(selectorsByBrushType[area.brushType](itemLayout,area.selectors,area))return!0;
}}function getSelectorsByBrushType(seriesModel){var brushSelector=seriesModel.brushSelector;
if(zrUtil.isString(brushSelector)){var sels=[];return zrUtil.each(selector,function(selectorsByElementType,brushType){
sels[brushType]=selectorsByElementType[brushSelector]}),sels}
if(zrUtil.isFunction(brushSelector)){var bSelector={};return zrUtil.each(selector,function(sel,brushType){
bSelector[brushType]=brushSelector}),bSelector}return brushSelector;
}function brushModelNotControll(brushModel,seriesIndex){var seriesIndices=brushModel.option.seriesIndex;
return null!=seriesIndices&&"all"!==seriesIndices&&(zrUtil.isArray(seriesIndices)?zrUtil.indexOf(seriesIndices,seriesIndex)<0:seriesIndex!==seriesIndices);
}function bindSelector(area){var selectors=area.selectors={};return zrUtil.each(selector[area.brushType],function(selFn,elType){
selectors[elType]=function(itemLayout){return selFn(itemLayout,selectors,area);
}}),area}function getBoundingRectFromMinMax(minMax){return new BoundingRect(minMax[0][0],minMax[1][0],minMax[0][1]-minMax[0][0],minMax[1][1]-minMax[1][0]);
}var echarts=__webpack_require__(1),visualSolution=__webpack_require__(320),zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),selector=__webpack_require__(321),throttle=__webpack_require__(81),brushHelper=__webpack_require__(322),STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent",PRIORITY_BRUSH=echarts.PRIORITY.VISUAL.BRUSH;
echarts.registerLayout(PRIORITY_BRUSH,function(ecModel,api,payload){
ecModel.eachComponent({mainType:"brush"},function(brushModel){
payload&&"takeGlobalCursor"===payload.type&&brushModel.setBrushOption("brush"===payload.key?payload.brushOption:{
brushType:!1}),brushModel.coordInfoList=brushHelper.makeCoordInfoList(brushModel.option,ecModel),
brushHelper.parseInputRanges(brushModel,ecModel)})}),echarts.registerVisual(PRIORITY_BRUSH,function(ecModel,api,payload){
var throttleType,throttleDelay,brushSelected=[];ecModel.eachComponent({
mainType:"brush"},function(brushModel,brushIndex){function linkOthers(seriesIndex){
return"all"===brushLink||linkedSeriesMap[seriesIndex]}function brushed(rangeInfoList){
return!!rangeInfoList.length}function stepAParallel(seriesModel,seriesIndex){
var coordSys=seriesModel.coordinateSystem;hasBrushExists|=coordSys.hasAxisbrushed(),
linkOthers(seriesIndex)&&coordSys.eachActiveState(seriesModel.getData(),function(activeState,dataIndex){
"active"===activeState&&(selectedDataIndexForLink[dataIndex]=1);
})}function stepAOthers(seriesModel,seriesIndex,rangeInfoList){
var selectorsByBrushType=getSelectorsByBrushType(seriesModel);
if(selectorsByBrushType&&!brushModelNotControll(brushModel,seriesIndex)&&(zrUtil.each(areas,function(area){
selectorsByBrushType[area.brushType]&&brushHelper.controlSeries(area,brushModel,seriesModel)&&rangeInfoList.push(area),
hasBrushExists|=brushed(rangeInfoList)}),linkOthers(seriesIndex)&&brushed(rangeInfoList))){
var data=seriesModel.getData();data.each(function(dataIndex){
checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex)&&(selectedDataIndexForLink[dataIndex]=1);
})}}var thisBrushSelected={brushId:brushModel.id,brushIndex:brushIndex,
brushName:brushModel.name,areas:zrUtil.clone(brushModel.areas),
selected:[]};brushSelected.push(thisBrushSelected);var brushOption=brushModel.option,brushLink=brushOption.brushLink,linkedSeriesMap=[],selectedDataIndexForLink=[],rangeInfoBySeries=[],hasBrushExists=0;
brushIndex||(throttleType=brushOption.throttleType,throttleDelay=brushOption.throttleDelay);
var areas=zrUtil.map(brushModel.areas,function(area){return bindSelector(zrUtil.defaults({
boundingRect:boundingRectBuilders[area.brushType](area)},area));
}),visualMappings=visualSolution.createVisualMappings(brushModel.option,STATE_LIST,function(mappingOption){
mappingOption.mappingMethod="fixed"});zrUtil.isArray(brushLink)&&zrUtil.each(brushLink,function(seriesIndex){
linkedSeriesMap[seriesIndex]=1}),ecModel.eachSeries(function(seriesModel,seriesIndex){
var rangeInfoList=rangeInfoBySeries[seriesIndex]=[];"parallel"===seriesModel.subType?stepAParallel(seriesModel,seriesIndex,rangeInfoList):stepAOthers(seriesModel,seriesIndex,rangeInfoList);
}),ecModel.eachSeries(function(seriesModel,seriesIndex){var seriesBrushSelected={
seriesId:seriesModel.id,seriesIndex:seriesIndex,seriesName:seriesModel.name,
dataIndex:[]};thisBrushSelected.selected.push(seriesBrushSelected);
var selectorsByBrushType=getSelectorsByBrushType(seriesModel),rangeInfoList=rangeInfoBySeries[seriesIndex],data=seriesModel.getData(),getValueState=linkOthers(seriesIndex)?function(dataIndex){
return selectedDataIndexForLink[dataIndex]?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),
"inBrush"):"outOfBrush"}:function(dataIndex){return checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex)?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),
"inBrush"):"outOfBrush"};(linkOthers(seriesIndex)?hasBrushExists:brushed(rangeInfoList))&&visualSolution.applyVisual(STATE_LIST,visualMappings,data,getValueState);
})}),dispatchAction(api,throttleType,throttleDelay,brushSelected,payload);
});var boundingRectBuilders={lineX:zrUtil.noop,lineY:zrUtil.noop,
rect:function(area){return getBoundingRectFromMinMax(area.range);
},polygon:function(area){for(var minMax,range=area.range,i=0,len=range.length;i<len;i++){
minMax=minMax||[[1/0,-(1/0)],[1/0,-(1/0)]];var rg=range[i];rg[0]<minMax[0][0]&&(minMax[0][0]=rg[0]),
rg[0]>minMax[0][1]&&(minMax[0][1]=rg[0]),rg[1]<minMax[1][0]&&(minMax[1][0]=rg[1]),
rg[1]>minMax[1][1]&&(minMax[1][1]=rg[1])}return minMax&&getBoundingRectFromMinMax(minMax);
}}},function(module,exports,__webpack_require__){function hasKeys(obj){
if(obj)for(var name in obj)if(obj.hasOwnProperty(name))return!0;
}var zrUtil=__webpack_require__(4),VisualMapping=__webpack_require__(195),each=zrUtil.each,visualSolution={
createVisualMappings:function(option,stateList,supplementVisualOption){
function createMappings(){var Creater=function(){};Creater.prototype.__hidden=Creater.prototype;
var obj=new Creater;return obj}var visualMappings={};return each(stateList,function(state){
var mappings=visualMappings[state]=createMappings();each(option[state],function(visualData,visualType){
if(VisualMapping.isValidType(visualType)){var mappingOption={
type:visualType,visual:visualData};supplementVisualOption&&supplementVisualOption(mappingOption,state),
mappings[visualType]=new VisualMapping(mappingOption),"opacity"===visualType&&(mappingOption=zrUtil.clone(mappingOption),
mappingOption.type="colorAlpha",mappings.__hidden.__alphaForOpacity=new VisualMapping(mappingOption));
}})}),visualMappings},replaceVisualOption:function(thisOption,newOption,keys){
var has;zrUtil.each(keys,function(key){newOption.hasOwnProperty(key)&&hasKeys(newOption[key])&&(has=!0);
}),has&&zrUtil.each(keys,function(key){newOption.hasOwnProperty(key)&&hasKeys(newOption[key])?thisOption[key]=zrUtil.clone(newOption[key]):delete thisOption[key];
})},applyVisual:function(stateList,visualMappings,data,getValueState,scope,dimension){
function getVisual(key){return data.getItemVisual(dataIndex,key);
}function setVisual(key,value){data.setItemVisual(dataIndex,key,value);
}function eachItem(valueOrIndex,index){dataIndex=null==dimension?valueOrIndex:index;
var rawDataItem=data.getRawDataItem(dataIndex);if(!rawDataItem||rawDataItem.visualMap!==!1)for(var valueState=getValueState.call(scope,valueOrIndex),mappings=visualMappings[valueState],visualTypes=visualTypesMap[valueState],i=0,len=visualTypes.length;i<len;i++){
var type=visualTypes[i];mappings[type]&&mappings[type].applyVisual(valueOrIndex,getVisual,setVisual);
}}var visualTypesMap={};zrUtil.each(stateList,function(state){
var visualTypes=VisualMapping.prepareVisualTypes(visualMappings[state]);
visualTypesMap[state]=visualTypes});var dataIndex;null==dimension?data.each(eachItem,!0):data.each([dimension],eachItem,!0);
}};module.exports=visualSolution},function(module,exports,__webpack_require__){
function getLineSelectors(xyIndex){var xy=["x","y"],wh=["width","height"];
return{point:function(itemLayout,selectors,area){var range=area.range,p=itemLayout[xyIndex];
return inLineRange(p,range)},rect:function(itemLayout,selectors,area){
var range=area.range;return inLineRange(itemLayout[xy[xyIndex]],range)||inLineRange(itemLayout[xy[xyIndex]]+itemLayout[wh[xyIndex]],range);
}}}function inLineRange(p,range){return range[0]<=p&&p<=range[1];
}function lineIntersectPolygon(lx,ly,l2x,l2y,points){for(var i=0,p2=points[points.length-1];i<points.length;i++){
var p=points[i];if(lineIntersect(lx,ly,l2x,l2y,p[0],p[1],p2[0],p2[1]))return!0;
p2=p}}function lineIntersect(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){
var delta=determinant(a2x-a1x,b1x-b2x,a2y-a1y,b1y-b2y);if(nearZero(delta))return!1;
var namenda=determinant(b1x-a1x,b1x-b2x,b1y-a1y,b1y-b2y)/delta;
if(namenda<0||namenda>1)return!1;var miu=determinant(a2x-a1x,b1x-a1x,a2y-a1y,b1y-a1y)/delta;
return!(miu<0||miu>1)}function nearZero(val){return val<=1e-6&&val>=-1e-6;
}function determinant(v1,v2,v3,v4){return v1*v4-v2*v3}var polygonContain=__webpack_require__(170).contain,BoundingRect=__webpack_require__(9),selector={
lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(itemLayout,selectors,area){
return area.boundingRect.contain(itemLayout[0],itemLayout[1]);
},rect:function(itemLayout,selectors,area){return area.boundingRect.intersect(itemLayout);
}},polygon:{point:function(itemLayout,selectors,area){return area.boundingRect.contain(itemLayout[0],itemLayout[1])&&polygonContain(area.range,itemLayout[0],itemLayout[1]);
},rect:function(itemLayout,selectors,area){var points=area.range;
if(points.length<=1)return!1;var x=itemLayout.x,y=itemLayout.y,width=itemLayout.width,height=itemLayout.height,p=points[0];
return!!(polygonContain(points,x,y)||polygonContain(points,x+width,y)||polygonContain(points,x,y+height)||polygonContain(points,x+width,y+height)||BoundingRect.create(itemLayout).contain(p[0],p[1])||lineIntersectPolygon(x,y,x+width,y,points)||lineIntersectPolygon(x,y,x,y+height,points)||lineIntersectPolygon(x+width,y,x+width,y+height,points)||lineIntersectPolygon(x,y+height,x+width,y+height,points))||void 0;
}}};module.exports=selector},function(module,exports,__webpack_require__){
function formatMinMax(minMax){return minMax[0]>minMax[1]&&minMax.reverse(),
minMax}function findCoordInfo(area,coordInfoList){for(var isGlobal=!0,j=0;j<COMPONENT_NAMES.length;j++){
var indexAttr=COMPONENT_NAMES[j]+"Index";if(area[indexAttr]>=0){
isGlobal=!1;for(var i=0;i<coordInfoList.length;i++)if(coordInfoList[i][indexAttr]===area[indexAttr])return coordInfoList[i];
}}return isGlobal}function axisConvert(axisName,to,coordInfo,coordRange){
var axis=coordInfo.coordSys.getAxis(axisName);return zrUtil.assert(axis,"line brush is only available in cartesian (grid)."),
formatMinMax(zrUtil.map([0,1],function(i){return to?axis.coordToData(axis.toLocalCoord(coordRange[i])):axis.toGlobalCoord(axis.dataToCoord(coordRange[i]));
}))}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),each=zrUtil.each,helper={},COMPONENT_NAMES=["geo","xAxis","yAxis"],PANEL_ID_SPLIT="--",COORD_CONVERTS=["dataToPoint","pointToData"];
helper.parseOutputRanges=function(areas,coordInfoList,ecModel,rangesCoordInfo){
each(areas,function(area,index){var panelId=area.panelId;if(panelId){
panelId=panelId.split(PANEL_ID_SPLIT),area[panelId[0]+"Index"]=+panelId[1];
var coordInfo=findCoordInfo(area,coordInfoList);area.coordRange=coordConvert[area.brushType](1,coordInfo,area.range),
rangesCoordInfo&&(rangesCoordInfo[index]=coordInfo)}})},helper.parseInputRanges=function(brushModel,ecModel){
each(brushModel.areas,function(area){var coordInfo=findCoordInfo(area,brushModel.coordInfoList);
zrUtil.assert(!coordInfo||coordInfo===!0||area.coordRange,"coordRange must be specified when coord index specified."),
zrUtil.assert(!coordInfo||coordInfo!==!0||area.range,"range must be specified."),
area.range=area.range||[],coordInfo&&coordInfo!==!0&&(area.range=coordConvert[area.brushType](0,coordInfo,area.coordRange),
area.panelId=coordInfo.panelId)})},helper.makePanelOpts=function(coordInfoList){
var panelOpts=[];return each(coordInfoList,function(coordInfo){
var rect,coordSys=coordInfo.coordSys;coordInfo.geoIndex>=0?(rect=coordSys.getBoundingRect().clone(),
rect.applyTransform(graphic.getTransform(coordSys))):rect=coordSys.grid.getRect().clone(),
panelOpts.push({panelId:coordInfo.panelId,rect:rect})}),panelOpts;
},helper.makeCoordInfoList=function(option,ecModel){var coordInfoList=[];
return each(COMPONENT_NAMES,function(componentName){var componentIndices=option[componentName+"Index"];
null!=componentIndices&&"none"!==componentIndices&&("all"===componentIndices||zrUtil.isArray(componentIndices)||(componentIndices=[componentIndices]),
ecModel.eachComponent({mainType:componentName},function(componentModel,index){
if(!("all"!==componentIndices&&zrUtil.indexOf(componentIndices,index)<0)){
var grid,coordSys;"xAxis"===componentName||"yAxis"===componentName?grid=componentModel.axis.grid:coordSys=componentModel.coordinateSystem;
for(var coordInfo,i=0,len=coordInfoList.length;i<len;i++){var cInfo=coordInfoList[i];
if(zrUtil.assert(cInfo[componentName+"Index"]!=index,"Coord should not be defined duplicately: "+componentName+index),
"yAxis"===componentName&&!cInfo.yAxis&&cInfo.xAxis){var aCoordSys=grid.getCartesian(cInfo.xAxisIndex,index);
if(aCoordSys){coordSys=aCoordSys,coordInfo=cInfo;break}}}!coordInfo&&coordInfoList.push(coordInfo={}),
coordInfo[componentName]=componentModel,coordInfo[componentName+"Index"]=index,
coordInfo.panelId=componentName+PANEL_ID_SPLIT+index,coordInfo.coordSys=coordSys||grid.getCartesian(coordInfo.xAxisIndex,coordInfo.yAxisIndex),
coordInfo.coordSys?coordInfoList[componentName+"Has"]=!0:coordInfoList.pop();
}}))}),coordInfoList},helper.controlSeries=function(area,brushModel,seriesModel){
var coordInfo=findCoordInfo(area,brushModel.coordInfoList);return coordInfo===!0||coordInfo&&coordInfo.coordSys===seriesModel.coordinateSystem;
};var coordConvert={lineX:zrUtil.curry(axisConvert,"x"),lineY:zrUtil.curry(axisConvert,"y"),
rect:function(to,coordInfo,coordRange){var coordSys=coordInfo.coordSys,xminymin=coordSys[COORD_CONVERTS[to]]([coordRange[0][0],coordRange[1][0]]),xmaxymax=coordSys[COORD_CONVERTS[to]]([coordRange[0][1],coordRange[1][1]]);
return[formatMinMax([xminymin[0],xmaxymax[0]]),formatMinMax([xminymin[1],xmaxymax[1]])];
},polygon:function(to,coordInfo,coordRange){var coordSys=coordInfo.coordSys;
return zrUtil.map(coordRange,coordSys[COORD_CONVERTS[to]],coordSys);
}};module.exports=helper},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4),visualSolution=__webpack_require__(320),Model=__webpack_require__(12),DEFAULT_OUT_OF_BRUSH_COLOR=["#ddd"],BrushModel=echarts.extendComponentModel({
type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],
defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",
geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",
brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,
color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)",
width:null},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0
},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(newOption,isInit){
var thisOption=this.option;!isInit&&visualSolution.replaceVisualOption(thisOption,newOption,["inBrush","outOfBrush"]),
thisOption.inBrush=thisOption.inBrush||{},thisOption.outOfBrush=thisOption.outOfBrush||{
color:DEFAULT_OUT_OF_BRUSH_COLOR}},setAreas:function(areas){zrUtil.assert(zrUtil.isArray(areas)),
zrUtil.each(areas,function(area){zrUtil.assert(area.brushType,"Illegal areas");
}),areas&&(this.areas=zrUtil.map(areas,function(area){return this._mergeBrushOption(area);
},this))},setBrushOption:function(brushOption){this.brushOption=this._mergeBrushOption(brushOption),
this.brushType=this.brushOption.brushType},_mergeBrushOption:function(brushOption){
var option=this.option;return zrUtil.merge({brushType:option.brushType,
brushMode:option.brushMode,transformable:option.transformable,
brushStyle:new Model(option.brushStyle).getItemStyle(),removeOnClick:option.removeOnClick
},brushOption,!0)}});module.exports=BrushModel},function(module,exports,__webpack_require__){
function updateController(brushModel,ecModel,api,payload){(!payload||payload.$from!==brushModel.id)&&this._brushController.setPanels(brushHelper.makePanelOpts(brushModel.coordInfoList)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());
}var zrUtil=__webpack_require__(4),BrushController=__webpack_require__(236),echarts=__webpack_require__(1),brushHelper=__webpack_require__(322);
module.exports=echarts.extendComponentView({type:"brush",init:function(ecModel,api){
this.ecModel=ecModel,this.api=api,this.model,(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this)).mount();
},render:function(brushModel){return this.model=brushModel,updateController.apply(this,arguments);
},updateView:updateController,updateLayout:updateController,updateVisual:updateController,
dispose:function(){this._brushController.dispose()},_onBrush:function(areas,opt){
var modelId=this.model.id;brushHelper.parseOutputRanges(areas,this.model.coordInfoList,this.ecModel),
(!opt.isEnd||opt.removeOnClick)&&this.api.dispatchAction({type:"brush",
brushId:modelId,areas:zrUtil.clone(areas),$from:modelId})}})},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1);echarts.registerAction({type:"brush",
event:"brush",update:"updateView"},function(payload,ecModel){
ecModel.eachComponent({mainType:"brush",query:payload},function(brushModel){
brushModel.setAreas(payload.areas)})}),echarts.registerAction({
type:"brushSelect",event:"brushSelected",update:"none"},function(){});
},function(module,exports,__webpack_require__){"use strict";function Brush(model,ecModel,api){
this.model=model,this.ecModel=ecModel,this.api=api,this._brushType,
this._brushMode}var featureManager=__webpack_require__(327),zrUtil=__webpack_require__(4);
Brush.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],
icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",
polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",
lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",
lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",
keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",
clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"
},title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",
clear:"清除选择"}};var proto=Brush.prototype;proto.render=proto.updateView=proto.updateLayout=function(featureModel,ecModel,api){
var brushType,brushMode,isBrushed;ecModel.eachComponent({mainType:"brush"
},function(brushModel){brushType=brushModel.brushType,brushMode=brushModel.brushOption.brushMode||"single",
isBrushed|=brushModel.areas.length}),this._brushType=brushType,
this._brushMode=brushMode,zrUtil.each(featureModel.get("type",!0),function(type){
featureModel.setIconStatus(type,("keep"===type?"multiple"===brushMode:"clear"===type?isBrushed:type===brushType)?"emphasis":"normal");
})},proto.getIcons=function(){var model=this.model,availableIcons=model.get("icon",!0),icons={};
return zrUtil.each(model.get("type",!0),function(type){availableIcons[type]&&(icons[type]=availableIcons[type]);
}),icons},proto.onclick=function(ecModel,api,type){var api=this.api,brushType=this._brushType,brushMode=this._brushMode;
"clear"===type?api.dispatchAction({type:"brush",areas:[]}):api.dispatchAction({
type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===type?brushType:brushType!==type&&type,
brushMode:"keep"===type?"multiple"===brushMode?"single":"multiple":brushMode
}})},featureManager.register("brush",Brush),module.exports=Brush;
},function(module,exports){"use strict";var features={};module.exports={
register:function(name,ctor){features[name]=ctor},get:function(name){
return features[name]}}},function(module,exports,__webpack_require__){
"use strict";var echarts=__webpack_require__(1),graphic=__webpack_require__(43),layout=__webpack_require__(21);
echarts.extendComponentModel({type:"title",layoutMode:{type:"box",
ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",
subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",
borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{
fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"
}}}),echarts.extendComponentView({type:"title",render:function(titleModel,ecModel,api){
if(this.group.removeAll(),titleModel.get("show")){var group=this.group,textStyleModel=titleModel.getModel("textStyle"),subtextStyleModel=titleModel.getModel("subtextStyle"),textAlign=titleModel.get("textAlign"),textBaseline=titleModel.get("textBaseline"),textEl=new graphic.Text({
style:{text:titleModel.get("text"),textFont:textStyleModel.getFont(),
fill:textStyleModel.getTextColor()},z2:10}),textRect=textEl.getBoundingRect(),subText=titleModel.get("subtext"),subTextEl=new graphic.Text({
style:{text:subText,textFont:subtextStyleModel.getFont(),fill:subtextStyleModel.getTextColor(),
y:textRect.height+titleModel.get("itemGap"),textBaseline:"top"
},z2:10}),link=titleModel.get("link"),sublink=titleModel.get("sublink");
textEl.silent=!link,subTextEl.silent=!sublink,link&&textEl.on("click",function(){
window.open(link,"_"+titleModel.get("target"))}),sublink&&subTextEl.on("click",function(){
window.open(sublink,"_"+titleModel.get("subtarget"))}),group.add(textEl),
subText&&group.add(subTextEl);var groupRect=group.getBoundingRect(),layoutOption=titleModel.getBoxLayoutParams();
layoutOption.width=groupRect.width,layoutOption.height=groupRect.height;
var layoutRect=layout.getLayoutRect(layoutOption,{width:api.getWidth(),
height:api.getHeight()},titleModel.get("padding"));textAlign||(textAlign=titleModel.get("left")||titleModel.get("right"),
"middle"===textAlign&&(textAlign="center"),"right"===textAlign?layoutRect.x+=layoutRect.width:"center"===textAlign&&(layoutRect.x+=layoutRect.width/2)),
textBaseline||(textBaseline=titleModel.get("top")||titleModel.get("bottom"),
"center"===textBaseline&&(textBaseline="middle"),"bottom"===textBaseline?layoutRect.y+=layoutRect.height:"middle"===textBaseline&&(layoutRect.y+=layoutRect.height/2),
textBaseline=textBaseline||"top"),group.attr("position",[layoutRect.x,layoutRect.y]);
var alignStyle={textAlign:textAlign,textVerticalAlign:textBaseline
};textEl.setStyle(alignStyle),subTextEl.setStyle(alignStyle),
groupRect=group.getBoundingRect();var padding=layoutRect.margin,style=titleModel.getItemStyle(["color","opacity"]);
style.fill=titleModel.get("backgroundColor");var rect=new graphic.Rect({
shape:{x:groupRect.x-padding[3],y:groupRect.y-padding[0],width:groupRect.width+padding[1]+padding[3],
height:groupRect.height+padding[0]+padding[2]},style:style,silent:!0
});graphic.subPixelOptimizeRect(rect),group.add(rect)}}})},function(module,exports,__webpack_require__){
__webpack_require__(330),__webpack_require__(331),__webpack_require__(334),
__webpack_require__(335),__webpack_require__(336),__webpack_require__(338),
__webpack_require__(339),__webpack_require__(341),__webpack_require__(342);
},function(module,exports,__webpack_require__){__webpack_require__(19).registerSubTypeDefaulter("dataZoom",function(option){
return"slider"})},function(module,exports,__webpack_require__){
function retrieveRaw(option){var ret={};return each(["start","end","startValue","endValue","throttle"],function(name){
option.hasOwnProperty(name)&&(ret[name]=option[name])}),ret}function processRangeProp(percentProp,valueProp,rawOption,thisOption){
null!=rawOption[valueProp]&&null==rawOption[percentProp]&&(thisOption[percentProp]=null);
}var zrUtil=__webpack_require__(4),env=__webpack_require__(2),echarts=__webpack_require__(1),modelUtil=__webpack_require__(5),helper=__webpack_require__(332),AxisProxy=__webpack_require__(333),each=zrUtil.each,eachAxisDim=helper.eachAxisDim,DataZoomModel=echarts.extendComponentModel({
type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],
defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,
filterMode:"filter",throttle:null,start:0,end:100,startValue:null,
endValue:null},init:function(option,parentModel,ecModel){this._dataIntervalByAxis={},
this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0;
var rawOption=retrieveRaw(option);this.mergeDefaultAndTheme(option,ecModel),
this.doInit(rawOption)},mergeOption:function(newOption){var rawOption=retrieveRaw(newOption);
zrUtil.merge(this.option,newOption,!0),this.doInit(rawOption);
},doInit:function(rawOption){var thisOption=this.option;env.canvasSupported||(thisOption.realtime=!1),
this._setDefaultThrottle(rawOption),processRangeProp("start","startValue",rawOption,thisOption),
processRangeProp("end","endValue",rawOption,thisOption),this.textStyleModel=this.getModel("textStyle"),
this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){
var axisProxies=this._axisProxies;this.eachTargetAxis(function(dimNames,axisIndex,dataZoomModel,ecModel){
var axisModel=this.dependentModels[dimNames.axis][axisIndex],axisProxy=axisModel.__dzAxisProxy||(axisModel.__dzAxisProxy=new AxisProxy(dimNames.name,axisIndex,this,ecModel));
axisProxies[dimNames.name+"_"+axisIndex]=axisProxy},this)},_resetTarget:function(){
var thisOption=this.option,autoMode=this._judgeAutoMode();eachAxisDim(function(dimNames){
var axisIndexName=dimNames.axisIndex;thisOption[axisIndexName]=modelUtil.normalizeToArray(thisOption[axisIndexName]);
},this),"axisIndex"===autoMode?this._autoSetAxisIndex():"orient"===autoMode&&this._autoSetOrient();
},_judgeAutoMode:function(){var thisOption=this.option,hasIndexSpecified=!1;
eachAxisDim(function(dimNames){null!=thisOption[dimNames.axisIndex]&&(hasIndexSpecified=!0);
},this);var orient=thisOption.orient;return null==orient&&hasIndexSpecified?"orient":hasIndexSpecified?void 0:(null==orient&&(thisOption.orient="horizontal"),
"axisIndex")},_autoSetAxisIndex:function(){var autoAxisIndex=!0,orient=this.get("orient",!0),thisOption=this.option,dependentModels=this.dependentModels;
if(autoAxisIndex){var dimName="vertical"===orient?"y":"x";dependentModels[dimName+"Axis"].length?(thisOption[dimName+"AxisIndex"]=[0],
autoAxisIndex=!1):each(dependentModels.singleAxis,function(singleAxisModel){
autoAxisIndex&&singleAxisModel.get("orient",!0)===orient&&(thisOption.singleAxisIndex=[singleAxisModel.componentIndex],
autoAxisIndex=!1)})}autoAxisIndex&&eachAxisDim(function(dimNames){
if(autoAxisIndex){var axisIndices=[],axisModels=this.dependentModels[dimNames.axis];
if(axisModels.length&&!axisIndices.length)for(var i=0,len=axisModels.length;i<len;i++)"category"===axisModels[i].get("type")&&axisIndices.push(i);
thisOption[dimNames.axisIndex]=axisIndices,axisIndices.length&&(autoAxisIndex=!1);
}},this),autoAxisIndex&&this.ecModel.eachSeries(function(seriesModel){
this._isSeriesHasAllAxesTypeOf(seriesModel,"value")&&eachAxisDim(function(dimNames){
var axisIndices=thisOption[dimNames.axisIndex],axisIndex=seriesModel.get(dimNames.axisIndex),axisId=seriesModel.get(dimNames.axisId),axisModel=seriesModel.ecModel.queryComponents({
mainType:dimNames.axis,index:axisIndex,id:axisId})[0];if(!axisModel)throw new Error(dimNames.axis+' "'+zrUtil.retrieve(axisIndex,axisId,0)+'" not found');
axisIndex=axisModel.componentIndex,zrUtil.indexOf(axisIndices,axisIndex)<0&&axisIndices.push(axisIndex);
})},this)},_autoSetOrient:function(){var dim;this.eachTargetAxis(function(dimNames){
!dim&&(dim=dimNames.name)},this),this.option.orient="y"===dim?"vertical":"horizontal";
},_isSeriesHasAllAxesTypeOf:function(seriesModel,axisType){var is=!0;
return eachAxisDim(function(dimNames){var seriesAxisIndex=seriesModel.get(dimNames.axisIndex),axisModel=this.dependentModels[dimNames.axis][seriesAxisIndex];
axisModel&&axisModel.get("type")===axisType||(is=!1)},this),is;
},_setDefaultThrottle:function(rawOption){if(rawOption.hasOwnProperty("throttle")&&(this._autoThrottle=!1),
this._autoThrottle){var globalOption=this.ecModel.option;this.option.throttle=globalOption.animation&&globalOption.animationDurationUpdate>0?100:20;
}},getFirstTargetAxisModel:function(){var firstAxisModel;return eachAxisDim(function(dimNames){
if(null==firstAxisModel){var indices=this.get(dimNames.axisIndex);
indices.length&&(firstAxisModel=this.dependentModels[dimNames.axis][indices[0]]);
}},this),firstAxisModel},eachTargetAxis:function(callback,context){
var ecModel=this.ecModel;eachAxisDim(function(dimNames){each(this.get(dimNames.axisIndex),function(axisIndex){
callback.call(context,dimNames,axisIndex,this,ecModel)},this);
},this)},getAxisProxy:function(dimName,axisIndex){return this._axisProxies[dimName+"_"+axisIndex];
},setRawRange:function(opt){each(["start","end","startValue","endValue"],function(name){
this.option[name]=opt[name]},this)},getPercentRange:function(){
var axisProxy=this.findRepresentativeAxisProxy();if(axisProxy)return axisProxy.getDataPercentWindow();
},getValueRange:function(axisDimName,axisIndex){if(null!=axisDimName||null!=axisIndex)return this.getAxisProxy(axisDimName,axisIndex).getDataValueWindow();
var axisProxy=this.findRepresentativeAxisProxy();return axisProxy?axisProxy.getDataValueWindow():void 0;
},findRepresentativeAxisProxy:function(){var axisProxies=this._axisProxies;
for(var key in axisProxies)if(axisProxies.hasOwnProperty(key)&&axisProxies[key].hostedBy(this))return axisProxies[key];
for(var key in axisProxies)if(axisProxies.hasOwnProperty(key)&&!axisProxies[key].hostedBy(this))return axisProxies[key];
}});module.exports=DataZoomModel},function(module,exports,__webpack_require__){
var formatUtil=__webpack_require__(6),zrUtil=__webpack_require__(4),helper={},AXIS_DIMS=["x","y","z","radius","angle","single"],COORDS=["cartesian2d","polar","singleAxis"];
helper.isCoordSupported=function(coordType){return zrUtil.indexOf(COORDS,coordType)>=0;
},helper.createNameEach=function(names,attrs){names=names.slice();
var capitalNames=zrUtil.map(names,formatUtil.capitalFirst);attrs=(attrs||[]).slice();
var capitalAttrs=zrUtil.map(attrs,formatUtil.capitalFirst);return function(callback,context){
zrUtil.each(names,function(name,index){for(var nameObj={name:name,
capital:capitalNames[index]},j=0;j<attrs.length;j++)nameObj[attrs[j]]=name+capitalAttrs[j];
callback.call(context,nameObj)})}},helper.eachAxisDim=helper.createNameEach(AXIS_DIMS,["axisIndex","axis","index","id"]),
helper.createLinkedNodesFinder=function(forEachNode,forEachEdgeType,edgeIdGetter){
function isNodeAbsorded(node,result){return zrUtil.indexOf(result.nodes,node)>=0;
}function isLinked(node,result){var hasLink=!1;return forEachEdgeType(function(edgeType){
zrUtil.each(edgeIdGetter(node,edgeType)||[],function(edgeId){
result.records[edgeType.name][edgeId]&&(hasLink=!0)})}),hasLink;
}function absorb(node,result){result.nodes.push(node),forEachEdgeType(function(edgeType){
zrUtil.each(edgeIdGetter(node,edgeType)||[],function(edgeId){
result.records[edgeType.name][edgeId]=!0})})}return function(sourceNode){
function processSingleNode(node){!isNodeAbsorded(node,result)&&isLinked(node,result)&&(absorb(node,result),
existsLink=!0)}var result={nodes:[],records:{}};if(forEachEdgeType(function(edgeType){
result.records[edgeType.name]={}}),!sourceNode)return result;absorb(sourceNode,result);
var existsLink;do existsLink=!1,forEachNode(processSingleNode);while(existsLink);
return result}},module.exports=helper},function(module,exports,__webpack_require__){
function calculateDataExtent(axisDim,seriesModels){var dataExtent=[1/0,-(1/0)];
return each(seriesModels,function(seriesModel){var seriesData=seriesModel.getData();
seriesData&&each(seriesModel.coordDimToDataDim(axisDim),function(dim){
var seriesExtent=seriesData.getDataExtent(dim);seriesExtent[0]<dataExtent[0]&&(dataExtent[0]=seriesExtent[0]),
seriesExtent[1]>dataExtent[1]&&(dataExtent[1]=seriesExtent[1]);
})},this),dataExtent[1]<dataExtent[0]&&(dataExtent=[NaN,NaN]),
dataExtent}function fixExtentByAxis(dataExtent,axisModel){var min=axisModel.getMin(!0);
null!=min&&"dataMin"!==min&&(dataExtent[0]=min);var max=axisModel.getMax(!0);
return null!=max&&"dataMax"!==max&&(dataExtent[1]=max),axisModel.get("scale",!0)||(dataExtent[0]>0&&(dataExtent[0]=0),
dataExtent[1]<0&&(dataExtent[1]=0)),dataExtent}function setAxisModel(axisProxy,isRestore){
var axisModel=axisProxy.getAxisModel(),percentWindow=axisProxy._percentWindow,valueWindow=axisProxy._valueWindow;
if(percentWindow){var precision=numberUtil.getPixelPrecision(valueWindow,[0,500]),useOrigin=isRestore||0===percentWindow[0]&&100===percentWindow[1];
axisModel.setRange(useOrigin?null:+valueWindow[0].toFixed(precision),useOrigin?null:+valueWindow[1].toFixed(precision));
}}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),helper=__webpack_require__(332),each=zrUtil.each,asc=numberUtil.asc,AxisProxy=function(dimName,axisIndex,dataZoomModel,ecModel){
this._dimName=dimName,this._axisIndex=axisIndex,this._valueWindow,
this._percentWindow,this._dataExtent,this.ecModel=ecModel,this._dataZoomModel=dataZoomModel;
};AxisProxy.prototype={constructor:AxisProxy,hostedBy:function(dataZoomModel){
return this._dataZoomModel===dataZoomModel},getDataValueWindow:function(){
return this._valueWindow.slice()},getDataPercentWindow:function(){
return this._percentWindow.slice()},getTargetSeriesModels:function(){
var seriesModels=[],ecModel=this.ecModel;return ecModel.eachSeries(function(seriesModel){
if(helper.isCoordSupported(seriesModel.get("coordinateSystem"))){
var dimName=this._dimName,axisModel=ecModel.queryComponents({
mainType:dimName+"Axis",index:seriesModel.get(dimName+"AxisIndex"),
id:seriesModel.get(dimName+"AxisId")})[0];this._axisIndex===(axisModel&&axisModel.componentIndex)&&seriesModels.push(seriesModel);
}},this),seriesModels},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex);
},getOtherAxisModel:function(){var otherAxisDim,coordSysIndexName,axisDim=this._dimName,ecModel=this.ecModel,axisModel=this.getAxisModel(),isCartesian="x"===axisDim||"y"===axisDim;
isCartesian?(coordSysIndexName="gridIndex",otherAxisDim="x"===axisDim?"y":"x"):(coordSysIndexName="polarIndex",
otherAxisDim="angle"===axisDim?"radius":"angle");var foundOtherAxisModel;
return ecModel.eachComponent(otherAxisDim+"Axis",function(otherAxisModel){
(otherAxisModel.get(coordSysIndexName)||0)===(axisModel.get(coordSysIndexName)||0)&&(foundOtherAxisModel=otherAxisModel);
}),foundOtherAxisModel},calculateDataWindow:function(opt){var dataExtent=this._dataExtent,axisModel=this.getAxisModel(),scale=axisModel.axis.scale,percentExtent=[0,100],percentWindow=[opt.start,opt.end],valueWindow=[];
return dataExtent=dataExtent.slice(),fixExtentByAxis(dataExtent,axisModel),
each(["startValue","endValue"],function(prop){valueWindow.push(null!=opt[prop]?scale.parse(opt[prop]):null);
}),each([0,1],function(idx){var boundValue=valueWindow[idx],boundPercent=percentWindow[idx];
null!=boundPercent||null==boundValue?(null==boundPercent&&(boundPercent=percentExtent[idx]),
boundValue=scale.parse(numberUtil.linearMap(boundPercent,percentExtent,dataExtent,!0))):boundPercent=numberUtil.linearMap(boundValue,dataExtent,percentExtent,!0),
valueWindow[idx]=boundValue,percentWindow[idx]=boundPercent}),
{valueWindow:asc(valueWindow),percentWindow:asc(percentWindow)
}},reset:function(dataZoomModel){if(dataZoomModel===this._dataZoomModel){
this._dataExtent=calculateDataExtent(this._dimName,this.getTargetSeriesModels());
var dataWindow=this.calculateDataWindow(dataZoomModel.option);
this._valueWindow=dataWindow.valueWindow,this._percentWindow=dataWindow.percentWindow,
setAxisModel(this)}},restore:function(dataZoomModel){dataZoomModel===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,
setAxisModel(this,!0))},filterData:function(dataZoomModel){function isInWindow(value){
return value>=valueWindow[0]&&value<=valueWindow[1]}if(dataZoomModel===this._dataZoomModel){
var axisDim=this._dimName,seriesModels=this.getTargetSeriesModels(),filterMode=dataZoomModel.get("filterMode"),valueWindow=this._valueWindow,otherAxisModel=this.getOtherAxisModel();
dataZoomModel.get("$fromToolbox")&&otherAxisModel&&"category"===otherAxisModel.get("type")&&(filterMode="empty"),
each(seriesModels,function(seriesModel){var seriesData=seriesModel.getData();
seriesData&&each(seriesModel.coordDimToDataDim(axisDim),function(dim){
"empty"===filterMode?seriesModel.setData(seriesData.map(dim,function(value){
return isInWindow(value)?value:NaN})):seriesData.filterSelf(dim,isInWindow);
})})}}},module.exports=AxisProxy},function(module,exports,__webpack_require__){
var ComponentView=__webpack_require__(29);module.exports=ComponentView.extend({
type:"dataZoom",render:function(dataZoomModel,ecModel,api,payload){
this.dataZoomModel=dataZoomModel,this.ecModel=ecModel,this.api=api;
},getTargetCoordInfo:function(){function save(coordModel,axisModel,store,coordIndex){
for(var item,i=0;i<store.length;i++)if(store[i].model===coordModel){
item=store[i];break}item||store.push(item={model:coordModel,axisModels:[],
coordIndex:coordIndex}),item.axisModels.push(axisModel)}var dataZoomModel=this.dataZoomModel,ecModel=this.ecModel,coordSysLists={};
return dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){
var axisModel=ecModel.getComponent(dimNames.axis,axisIndex);if(axisModel){
var coordModel=axisModel.getCoordSysModel();coordModel&&save(coordModel,axisModel,coordSysLists[coordModel.mainType]||(coordSysLists[coordModel.mainType]=[]),coordModel.componentIndex);
}},this),coordSysLists}})},function(module,exports,__webpack_require__){
var DataZoomModel=__webpack_require__(331),SliderZoomModel=DataZoomModel.extend({
type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,
right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,
backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{
color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",
opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",
handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",
handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,
labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,
zoomLock:!1,textStyle:{color:"#333"}}});module.exports=SliderZoomModel;
},function(module,exports,__webpack_require__){function getOtherDim(thisDim){
var map={x:"y",y:"x",radius:"angle",angle:"radius"};return map[thisDim];
}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),throttle=__webpack_require__(81),DataZoomView=__webpack_require__(334),Rect=graphic.Rect,numberUtil=__webpack_require__(7),linearMap=numberUtil.linearMap,layout=__webpack_require__(21),sliderMove=__webpack_require__(337),asc=numberUtil.asc,bind=zrUtil.bind,each=zrUtil.each,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],SliderZoomView=DataZoomView.extend({
type:"dataZoom.slider",init:function(ecModel,api){this._displayables={},
this._orient,this._range,this._handleEnds,this._size,this._handleWidth,
this._handleHeight,this._location,this._dragging,this._dataShadowInfo,
this.api=api},render:function(dataZoomModel,ecModel,api,payload){
return SliderZoomView.superApply(this,"render",arguments),throttle.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),
this._orient=dataZoomModel.get("orient"),this.dataZoomModel.get("show")===!1?void this.group.removeAll():(payload&&"dataZoom"===payload.type&&payload.from===this.uid||this._buildView(),
void this._updateView())},remove:function(){SliderZoomView.superApply(this,"remove",arguments),
throttle.clear(this,"_dispatchZoomAction")},dispose:function(){
SliderZoomView.superApply(this,"dispose",arguments),throttle.clear(this,"_dispatchZoomAction");
},_buildView:function(){var thisGroup=this.group;thisGroup.removeAll(),
this._resetLocation(),this._resetInterval();var barGroup=this._displayables.barGroup=new graphic.Group;
this._renderBackground(),this._renderHandle(),this._renderDataShadow(),
thisGroup.add(barGroup),this._positionGroup()},_resetLocation:function(){
var dataZoomModel=this.dataZoomModel,api=this.api,coordRect=this._findCoordRect(),ecSize={
width:api.getWidth(),height:api.getHeight()},positionInfo=this._orient===HORIZONTAL?{
right:ecSize.width-coordRect.x-coordRect.width,top:ecSize.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP,
width:coordRect.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,
top:coordRect.y,width:DEFAULT_FILLER_SIZE,height:coordRect.height
},layoutParams=layout.getLayoutParams(dataZoomModel.option);zrUtil.each(["right","top","width","height"],function(name){
"ph"===layoutParams[name]&&(layoutParams[name]=positionInfo[name]);
});var layoutRect=layout.getLayoutRect(layoutParams,ecSize,dataZoomModel.padding);
this._location={x:layoutRect.x,y:layoutRect.y},this._size=[layoutRect.width,layoutRect.height],
this._orient===VERTICAL&&this._size.reverse()},_positionGroup:function(){
var thisGroup=this.group,location=this._location,orient=this._orient,targetAxisModel=this.dataZoomModel.getFirstTargetAxisModel(),inverse=targetAxisModel&&targetAxisModel.get("inverse"),barGroup=this._displayables.barGroup,otherAxisInverse=(this._dataShadowInfo||{}).otherAxisInverse;
barGroup.attr(orient!==HORIZONTAL||inverse?orient===HORIZONTAL&&inverse?{
scale:otherAxisInverse?[-1,1]:[-1,-1]}:orient!==VERTICAL||inverse?{
scale:otherAxisInverse?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:otherAxisInverse?[1,-1]:[1,1],
rotation:Math.PI/2}:{scale:otherAxisInverse?[1,1]:[1,-1]});var rect=thisGroup.getBoundingRect([barGroup]);
thisGroup.attr("position",[location.x-rect.x,location.y-rect.y]);
},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){
var dataZoomModel=this.dataZoomModel,size=this._size;this._displayables.barGroup.add(new Rect({
silent:!0,shape:{x:0,y:0,width:size[0],height:size[1]},style:{
fill:dataZoomModel.get("backgroundColor")},z2:-40}))},_renderDataShadow:function(){
var info=this._dataShadowInfo=this._prepareDataShadowInfo();if(info){
var size=this._size,seriesModel=info.series,data=seriesModel.getRawData(),otherDim=seriesModel.getShadowDim?seriesModel.getShadowDim():info.otherDim;
if(null!=otherDim){var otherDataExtent=data.getDataExtent(otherDim),otherOffset=.3*(otherDataExtent[1]-otherDataExtent[0]);
otherDataExtent=[otherDataExtent[0]-otherOffset,otherDataExtent[1]+otherOffset];
var lastIsEmpty,otherShadowExtent=[0,size[1]],thisShadowExtent=[0,size[0]],areaPoints=[[size[0],0],[0,0]],linePoints=[],step=thisShadowExtent[1]/(data.count()-1),thisCoord=0,stride=Math.round(data.count()/size[0]);
data.each([otherDim],function(value,index){if(stride>0&&index%stride)return void(thisCoord+=step);
var isEmpty=null==value||isNaN(value)||""===value,otherCoord=isEmpty?0:linearMap(value,otherDataExtent,otherShadowExtent,!0);
isEmpty&&!lastIsEmpty&&index?(areaPoints.push([areaPoints[areaPoints.length-1][0],0]),
linePoints.push([linePoints[linePoints.length-1][0],0])):!isEmpty&&lastIsEmpty&&(areaPoints.push([thisCoord,0]),
linePoints.push([thisCoord,0])),areaPoints.push([thisCoord,otherCoord]),
linePoints.push([thisCoord,otherCoord]),thisCoord+=step,lastIsEmpty=isEmpty;
});var dataZoomModel=this.dataZoomModel;this._displayables.barGroup.add(new graphic.Polygon({
shape:{points:areaPoints},style:zrUtil.defaults({fill:dataZoomModel.get("dataBackgroundColor")
},dataZoomModel.getModel("dataBackground.areaStyle").getAreaStyle()),
silent:!0,z2:-20})),this._displayables.barGroup.add(new graphic.Polyline({
shape:{points:linePoints},style:dataZoomModel.getModel("dataBackground.lineStyle").getLineStyle(),
silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var dataZoomModel=this.dataZoomModel,showDataShadow=dataZoomModel.get("showDataShadow");
if(showDataShadow!==!1){var result,ecModel=this.ecModel;return dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){
var seriesModels=dataZoomModel.getAxisProxy(dimNames.name,axisIndex).getTargetSeriesModels();
zrUtil.each(seriesModels,function(seriesModel){if(!(result||showDataShadow!==!0&&zrUtil.indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,seriesModel.get("type"))<0)){
var otherAxisInverse,thisAxis=ecModel.getComponent(dimNames.axis,axisIndex).axis,otherDim=getOtherDim(dimNames.name),coordSys=seriesModel.coordinateSystem;
null!=otherDim&&coordSys.getOtherAxis&&(otherAxisInverse=coordSys.getOtherAxis(thisAxis).inverse),
result={thisAxis:thisAxis,series:seriesModel,thisDim:dimNames.name,
otherDim:otherDim,otherAxisInverse:otherAxisInverse}}},this)},this),
result}},_renderHandle:function(){var displaybles=this._displayables,handles=displaybles.handles=[],handleLabels=displaybles.handleLabels=[],barGroup=this._displayables.barGroup,size=this._size,dataZoomModel=this.dataZoomModel;
barGroup.add(displaybles.filler=new Rect({draggable:!0,cursor:"move",
drift:bind(this._onDragMove,this,"all"),ondragstart:bind(this._showDataInfo,this,!0),
ondragend:bind(this._onDragEnd,this),onmouseover:bind(this._showDataInfo,this,!0),
onmouseout:bind(this._showDataInfo,this,!1),style:{fill:dataZoomModel.get("fillerColor"),
textPosition:"inside"}})),barGroup.add(new Rect(graphic.subPixelOptimizeRect({
silent:!0,shape:{x:0,y:0,width:size[0],height:size[1]},style:{
stroke:dataZoomModel.get("dataBackgroundColor")||dataZoomModel.get("borderColor"),
lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})));
var iconStr=dataZoomModel.get("handleIcon");each([0,1],function(handleIndex){
var path=graphic.makePath(iconStr,{style:{strokeNoScale:!0},rectHover:!0,
cursor:"vertical"===this._orient?"ns-resize":"ew-resize",draggable:!0,
drift:bind(this._onDragMove,this,handleIndex),ondragend:bind(this._onDragEnd,this),
onmouseover:bind(this._showDataInfo,this,!0),onmouseout:bind(this._showDataInfo,this,!1)
},{x:-.5,y:0,width:1,height:1},"center"),bRect=path.getBoundingRect();
this._handleHeight=numberUtil.parsePercent(dataZoomModel.get("handleSize"),this._size[1]),
this._handleWidth=bRect.width/bRect.height*this._handleHeight,
path.setStyle(dataZoomModel.getModel("handleStyle").getItemStyle());
var handleColor=dataZoomModel.get("handleColor");null!=handleColor&&(path.style.fill=handleColor),
barGroup.add(handles[handleIndex]=path);var textStyleModel=dataZoomModel.textStyleModel;
this.group.add(handleLabels[handleIndex]=new graphic.Text({silent:!0,
invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",
textAlign:"center",fill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()
},z2:10}))},this)},_resetInterval:function(){var range=this._range=this.dataZoomModel.getPercentRange(),viewExtent=this._getViewExtent();
this._handleEnds=[linearMap(range[0],[0,100],viewExtent,!0),linearMap(range[1],[0,100],viewExtent,!0)];
},_updateInterval:function(handleIndex,delta){var handleEnds=this._handleEnds,viewExtend=this._getViewExtent();
sliderMove(delta,handleEnds,viewExtend,"all"===handleIndex||this.dataZoomModel.get("zoomLock")?"rigid":"cross",handleIndex),
this._range=asc([linearMap(handleEnds[0],viewExtend,[0,100],!0),linearMap(handleEnds[1],viewExtend,[0,100],!0)]);
},_updateView:function(nonRealtime){var displaybles=this._displayables,handleEnds=this._handleEnds,handleInterval=asc(handleEnds.slice()),size=this._size;
each([0,1],function(handleIndex){var handle=displaybles.handles[handleIndex],handleHeight=this._handleHeight;
handle.attr({scale:[handleHeight,handleHeight],position:[handleEnds[handleIndex],size[1]/2-handleHeight/2]
})},this),displaybles.filler.setShape({x:handleInterval[0],y:0,
width:handleInterval[1]-handleInterval[0],height:size[1]}),this._updateDataInfo(nonRealtime);
},_updateDataInfo:function(nonRealtime){function setLabel(handleIndex){
var barTransform=graphic.getTransform(displaybles.handles[handleIndex].parent,this.group),direction=graphic.transformDirection(0===handleIndex?"right":"left",barTransform),offset=this._handleWidth/2+LABEL_GAP,textPoint=graphic.applyTransform([orderedHandleEnds[handleIndex]+(0===handleIndex?-offset:offset),this._size[1]/2],barTransform);
handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],
textVerticalAlign:orient===HORIZONTAL?"middle":direction,textAlign:orient===HORIZONTAL?direction:"center",
text:labelTexts[handleIndex]})}var dataZoomModel=this.dataZoomModel,displaybles=this._displayables,handleLabels=displaybles.handleLabels,orient=this._orient,labelTexts=["",""];
if(dataZoomModel.get("showDetail")){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();
if(axisProxy){var axis=axisProxy.getAxisModel().axis,range=this._range,dataInterval=nonRealtime?axisProxy.calculateDataWindow({
start:range[0],end:range[1]}).valueWindow:axisProxy.getDataValueWindow();
labelTexts=[this._formatLabel(dataInterval[0],axis),this._formatLabel(dataInterval[1],axis)];
}}var orderedHandleEnds=asc(this._handleEnds.slice());setLabel.call(this,0),
setLabel.call(this,1)},_formatLabel:function(value,axis){var dataZoomModel=this.dataZoomModel,labelFormatter=dataZoomModel.get("labelFormatter"),labelPrecision=dataZoomModel.get("labelPrecision");
null!=labelPrecision&&"auto"!==labelPrecision||(labelPrecision=axis.getPixelPrecision());
var valueStr=null==value||isNaN(value)?"":"category"===axis.type||"time"===axis.type?axis.scale.getLabel(Math.round(value)):value.toFixed(Math.min(labelPrecision,20));
return zrUtil.isFunction(labelFormatter)?labelFormatter(value,valueStr):zrUtil.isString(labelFormatter)?labelFormatter.replace("{value}",valueStr):valueStr;
},_showDataInfo:function(showOrHide){showOrHide=this._dragging||showOrHide;
var handleLabels=this._displayables.handleLabels;handleLabels[0].attr("invisible",!showOrHide),
handleLabels[1].attr("invisible",!showOrHide)},_onDragMove:function(handleIndex,dx,dy){
this._dragging=!0;var vertex=this._applyBarTransform([dx,dy],!0);
this._updateInterval(handleIndex,vertex[0]);var realtime=this.dataZoomModel.get("realtime");
this._updateView(!realtime),realtime&&realtime&&this._dispatchZoomAction();
},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),
this._dispatchZoomAction()},_dispatchZoomAction:function(){var range=this._range;
this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,
start:range[0],end:range[1]})},_applyBarTransform:function(vertex,inverse){
var barTransform=this._displayables.barGroup.getLocalTransform();
return graphic.applyTransform(vertex,barTransform,inverse)},_findCoordRect:function(){
var rect;if(each(this.getTargetCoordInfo(),function(coordInfoList){
if(!rect&&coordInfoList.length){var coordSys=coordInfoList[0].model.coordinateSystem;
rect=coordSys.getRect&&coordSys.getRect()}}),!rect){var width=this.api.getWidth(),height=this.api.getHeight();
rect={x:.2*width,y:.2*height,width:.6*width,height:.6*height};
}return rect}});module.exports=SliderZoomView},function(module,exports){
module.exports=function(delta,handleEnds,extent,mode,handleIndex){
function getRealDelta(delta,handleEnds,extent){var handleMinMax=handleEnds.length?handleEnds.slice():[handleEnds,handleEnds];
return handleEnds[0]>handleEnds[1]&&handleMinMax.reverse(),delta<0&&handleMinMax[0]+delta<extent[0]&&(delta=extent[0]-handleMinMax[0]),
delta>0&&handleMinMax[1]+delta>extent[1]&&(delta=extent[1]-handleMinMax[1]),
delta}return delta?("rigid"===mode?(delta=getRealDelta(delta,handleEnds,extent),
handleEnds[0]+=delta,handleEnds[1]+=delta):(delta=getRealDelta(delta,handleEnds[handleIndex],extent),
handleEnds[handleIndex]+=delta,"push"===mode&&handleEnds[0]>handleEnds[1]&&(handleEnds[1-handleIndex]=handleEnds[handleIndex])),
handleEnds):handleEnds}},function(module,exports,__webpack_require__){
module.exports=__webpack_require__(331).extend({type:"dataZoom.inside",
defaultOption:{disabled:!1,zoomLock:!1}})},function(module,exports,__webpack_require__){
function fixRange(range){var bound=[0,100];return!(range[0]<=bound[1])&&(range[0]=bound[1]),
!(range[1]<=bound[1])&&(range[1]=bound[1]),!(range[0]>=bound[0])&&(range[0]=bound[0]),
!(range[1]>=bound[0])&&(range[1]=bound[0]),range}var DataZoomView=__webpack_require__(334),zrUtil=__webpack_require__(4),sliderMove=__webpack_require__(337),roams=__webpack_require__(340),bind=zrUtil.bind,InsideZoomView=DataZoomView.extend({
type:"dataZoom.inside",init:function(ecModel,api){this._range;
},render:function(dataZoomModel,ecModel,api,payload){InsideZoomView.superApply(this,"render",arguments),
roams.shouldRecordRange(payload,dataZoomModel.id)&&(this._range=dataZoomModel.getPercentRange()),
zrUtil.each(this.getTargetCoordInfo(),function(coordInfoList,coordSysName){
var allCoordIds=zrUtil.map(coordInfoList,function(coordInfo){
return roams.generateCoordId(coordInfo.model)});zrUtil.each(coordInfoList,function(coordInfo){
var coordModel=coordInfo.model;roams.register(api,{coordId:roams.generateCoordId(coordModel),
allCoordIds:allCoordIds,containsPoint:function(x,y){return coordModel.coordinateSystem.containPoint([x,y]);
},dataZoomId:dataZoomModel.id,throttleRate:dataZoomModel.get("throttle",!0),
panGetRange:bind(this._onPan,this,coordInfo,coordSysName),zoomGetRange:bind(this._onZoom,this,coordInfo,coordSysName)
})},this)},this)},dispose:function(){roams.unregister(this.api,this.dataZoomModel.id),
InsideZoomView.superApply(this,"dispose",arguments),this._range=null;
},_onPan:function(coordInfo,coordSysName,controller,dx,dy,oldX,oldY,newX,newY){
if(this.dataZoomModel.option.disabled)return this._range;var range=this._range.slice(),axisModel=coordInfo.axisModels[0];
if(axisModel){var directionInfo=getDirectionInfo[coordSysName]([oldX,oldY],[newX,newY],axisModel,controller,coordInfo),percentDelta=directionInfo.signal*(range[1]-range[0])*directionInfo.pixel/directionInfo.pixelLength;
return sliderMove(percentDelta,range,[0,100],"rigid"),this._range=range;
}},_onZoom:function(coordInfo,coordSysName,controller,scale,mouseX,mouseY){
var option=this.dataZoomModel.option;if(option.disabled||option.zoomLock)return this._range;
var range=this._range.slice(),axisModel=coordInfo.axisModels[0];
if(axisModel){var directionInfo=getDirectionInfo[coordSysName](null,[mouseX,mouseY],axisModel,controller,coordInfo),percentPoint=(directionInfo.pixel-directionInfo.pixelStart)/directionInfo.pixelLength*(range[1]-range[0])+range[0];
return scale=Math.max(1/scale,0),range[0]=(range[0]-percentPoint)*scale+percentPoint,
range[1]=(range[1]-percentPoint)*scale+percentPoint,this._range=fixRange(range);
}}}),getDirectionInfo={grid:function(oldPoint,newPoint,axisModel,controller,coordInfo){
var axis=axisModel.axis,ret={},rect=coordInfo.model.coordinateSystem.getRect();
return oldPoint=oldPoint||[0,0],"x"===axis.dim?(ret.pixel=newPoint[0]-oldPoint[0],
ret.pixelLength=rect.width,ret.pixelStart=rect.x,ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],
ret.pixelLength=rect.height,ret.pixelStart=rect.y,ret.signal=axis.inverse?-1:1),
ret},polar:function(oldPoint,newPoint,axisModel,controller,coordInfo){
var axis=axisModel.axis,ret={},polar=coordInfo.model.coordinateSystem,radiusExtent=polar.getRadiusAxis().getExtent(),angleExtent=polar.getAngleAxis().getExtent();
return oldPoint=oldPoint?polar.pointToCoord(oldPoint):[0,0],newPoint=polar.pointToCoord(newPoint),
"radiusAxis"===axisModel.mainType?(ret.pixel=newPoint[0]-oldPoint[0],
ret.pixelLength=radiusExtent[1]-radiusExtent[0],ret.pixelStart=radiusExtent[0],
ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],
ret.pixelLength=angleExtent[1]-angleExtent[0],ret.pixelStart=angleExtent[0],
ret.signal=axis.inverse?-1:1),ret},singleAxis:function(oldPoint,newPoint,axisModel,controller,coordInfo){
var axis=axisModel.axis,rect=coordInfo.model.coordinateSystem.getRect(),ret={};
return oldPoint=oldPoint||[0,0],"horizontal"===axis.orient?(ret.pixel=newPoint[0]-oldPoint[0],
ret.pixelLength=rect.width,ret.pixelStart=rect.x,ret.signal=axis.inverse?1:-1):(ret.pixel=newPoint[1]-oldPoint[1],
ret.pixelLength=rect.height,ret.pixelStart=rect.y,ret.signal=axis.inverse?-1:1),
ret}};module.exports=InsideZoomView},function(module,exports,__webpack_require__){
function giveStore(api){var zr=api.getZr();return zr[ATTR]||(zr[ATTR]={});
}function createController(api,dataZoomInfo,newRecord){var controller=new RoamController(api.getZr());
return controller.enable(),controller.on("pan",curry(onPan,newRecord)),
controller.on("zoom",curry(onZoom,newRecord)),controller}function cleanStore(store){
zrUtil.each(store,function(record,coordId){record.count||(record.controller.dispose(),
delete store[coordId])})}function onPan(record,dx,dy,oldX,oldY,newX,newY){
wrapAndDispatch(record,function(info){return info.panGetRange(record.controller,dx,dy,oldX,oldY,newX,newY);
})}function onZoom(record,scale,mouseX,mouseY){wrapAndDispatch(record,function(info){
return info.zoomGetRange(record.controller,scale,mouseX,mouseY);
})}function wrapAndDispatch(record,getRange){var batch=[];zrUtil.each(record.dataZoomInfos,function(info){
var range=getRange(info);range&&batch.push({dataZoomId:info.dataZoomId,
start:range[0],end:range[1]})}),record.dispatchAction(batch)}
function dispatchAction(api,batch){api.dispatchAction({type:"dataZoom",
batch:batch})}var zrUtil=__webpack_require__(4),RoamController=__webpack_require__(177),throttle=__webpack_require__(81),curry=zrUtil.curry,ATTR="\0_ec_dataZoom_roams",roams={
register:function(api,dataZoomInfo){var store=giveStore(api),theDataZoomId=dataZoomInfo.dataZoomId,theCoordId=dataZoomInfo.coordId;
zrUtil.each(store,function(record,coordId){var dataZoomInfos=record.dataZoomInfos;
dataZoomInfos[theDataZoomId]&&zrUtil.indexOf(dataZoomInfo.allCoordIds,theCoordId)<0&&(delete dataZoomInfos[theDataZoomId],
record.count--)}),cleanStore(store);var record=store[theCoordId];
record||(record=store[theCoordId]={coordId:theCoordId,dataZoomInfos:{},
count:0},record.controller=createController(api,dataZoomInfo,record),
record.dispatchAction=zrUtil.curry(dispatchAction,api)),record.controller.setContainsPoint(dataZoomInfo.containsPoint),
throttle.createOrUpdate(record,"dispatchAction",dataZoomInfo.throttleRate,"fixRate"),
!record.dataZoomInfos[theDataZoomId]&&record.count++,record.dataZoomInfos[theDataZoomId]=dataZoomInfo;
},unregister:function(api,dataZoomId){var store=giveStore(api);
zrUtil.each(store,function(record){record.controller.dispose();
var dataZoomInfos=record.dataZoomInfos;dataZoomInfos[dataZoomId]&&(delete dataZoomInfos[dataZoomId],
record.count--)}),cleanStore(store)},shouldRecordRange:function(payload,dataZoomId){
if(payload&&"dataZoom"===payload.type&&payload.batch)for(var i=0,len=payload.batch.length;i<len;i++)if(payload.batch[i].dataZoomId===dataZoomId)return!1;
return!0},generateCoordId:function(coordModel){return coordModel.type+"\0_"+coordModel.id;
}};module.exports=roams},function(module,exports,__webpack_require__){
function resetSingleAxis(dimNames,axisIndex,dataZoomModel){dataZoomModel.getAxisProxy(dimNames.name,axisIndex).reset(dataZoomModel);
}function filterSingleAxis(dimNames,axisIndex,dataZoomModel){
dataZoomModel.getAxisProxy(dimNames.name,axisIndex).filterData(dataZoomModel);
}var echarts=__webpack_require__(1);echarts.registerProcessor(function(ecModel,api){
ecModel.eachComponent("dataZoom",function(dataZoomModel){dataZoomModel.eachTargetAxis(resetSingleAxis),
dataZoomModel.eachTargetAxis(filterSingleAxis)}),ecModel.eachComponent("dataZoom",function(dataZoomModel){
var axisProxy=dataZoomModel.findRepresentativeAxisProxy(),percentRange=axisProxy.getDataPercentWindow(),valueRange=axisProxy.getDataValueWindow();
dataZoomModel.setRawRange({start:percentRange[0],end:percentRange[1],
startValue:valueRange[0],endValue:valueRange[1]})})})},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),helper=__webpack_require__(332),echarts=__webpack_require__(1);
echarts.registerAction("dataZoom",function(payload,ecModel){var linkedNodesFinder=helper.createLinkedNodesFinder(zrUtil.bind(ecModel.eachComponent,ecModel,"dataZoom"),helper.eachAxisDim,function(model,dimNames){
return model.get(dimNames.axisIndex)}),effectedModels=[];ecModel.eachComponent({
mainType:"dataZoom",query:payload},function(model,index){effectedModels.push.apply(effectedModels,linkedNodesFinder(model).nodes);
}),zrUtil.each(effectedModels,function(dataZoomModel,index){dataZoomModel.setRawRange({
start:payload.start,end:payload.end,startValue:payload.startValue,
endValue:payload.endValue})})})},function(module,exports,__webpack_require__){
__webpack_require__(344),__webpack_require__(355)},function(module,exports,__webpack_require__){
__webpack_require__(1).registerPreprocessor(__webpack_require__(345)),
__webpack_require__(346),__webpack_require__(347),__webpack_require__(348),
__webpack_require__(351),__webpack_require__(354)},function(module,exports,__webpack_require__){
function has(obj,name){return obj&&obj.hasOwnProperty&&obj.hasOwnProperty(name);
}var zrUtil=__webpack_require__(4),each=zrUtil.each;module.exports=function(option){
var visualMap=option&&option.visualMap;zrUtil.isArray(visualMap)||(visualMap=visualMap?[visualMap]:[]),
each(visualMap,function(opt){if(opt){has(opt,"splitList")&&!has(opt,"pieces")&&(opt.pieces=opt.splitList,
delete opt.splitList);var pieces=opt.pieces;pieces&&zrUtil.isArray(pieces)&&each(pieces,function(piece){
zrUtil.isObject(piece)&&(has(piece,"start")&&!has(piece,"min")&&(piece.min=piece.start),
has(piece,"end")&&!has(piece,"max")&&(piece.max=piece.end))});
}})}},function(module,exports,__webpack_require__){__webpack_require__(19).registerSubTypeDefaulter("visualMap",function(option){
return option.categories||(option.pieces?option.pieces.length>0:option.splitNumber>0)&&!option.calculable?"piecewise":"continuous";
})},function(module,exports,__webpack_require__){function processSingleVisualMap(visualMapModel,ecModel){
visualMapModel.eachTargetSeries(function(seriesModel){var data=seriesModel.getData();
visualSolution.applyVisual(visualMapModel.stateList,visualMapModel.targetVisuals,data,visualMapModel.getValueState,visualMapModel,visualMapModel.getDataDimension(data));
})}function prepareVisualMeta(ecModel){ecModel.eachSeries(function(seriesModel){
var data=seriesModel.getData(),visualMetaList=[];ecModel.eachComponent("visualMap",function(visualMapModel){
if(visualMapModel.isTargetSeries(seriesModel)){var visualMeta=visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual,null,seriesModel,visualMapModel))||{
stops:[],outerColors:[]};visualMeta.dimension=visualMapModel.getDataDimension(data),
visualMetaList.push(visualMeta)}}),seriesModel.getData().setVisual("visualMeta",visualMetaList);
})}function getColorVisual(seriesModel,visualMapModel,value,valueState){
function getVisual(key){return resultVisual[key]}function setVisual(key,value){
resultVisual[key]=value}for(var mappings=visualMapModel.targetVisuals[valueState],visualTypes=VisualMapping.prepareVisualTypes(mappings),resultVisual={
color:seriesModel.getData().getVisual("color")},i=0,len=visualTypes.length;i<len;i++){
var type=visualTypes[i],mapping=mappings["opacity"===type?"__alphaForOpacity":type];
mapping&&mapping.applyVisual(value,getVisual,setVisual)}return resultVisual.color;
}var echarts=__webpack_require__(1),visualSolution=__webpack_require__(320),VisualMapping=__webpack_require__(195),zrUtil=__webpack_require__(4);
echarts.registerVisual(echarts.PRIORITY.VISUAL.COMPONENT,function(ecModel){
ecModel.eachComponent("visualMap",function(visualMapModel){processSingleVisualMap(visualMapModel,ecModel);
}),prepareVisualMeta(ecModel)})},function(module,exports,__webpack_require__){
function getColorStopValues(visualMapModel,valueState,dataExtent){
if(dataExtent[0]===dataExtent[1])return dataExtent.slice();for(var count=200,step=(dataExtent[1]-dataExtent[0])/count,value=dataExtent[0],stopValues=[],i=0;i<=count&&value<dataExtent[1];i++)stopValues.push(value),
value+=step;return stopValues.push(dataExtent[1]),stopValues}
var VisualMapModel=__webpack_require__(349),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=VisualMapModel.extend({
type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,
range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,
hoverLinkDataSize:null,hoverLinkOnHandle:!0},optionUpdated:function(newOption,isInit){
ContinuousModel.superApply(this,"optionUpdated",arguments),this.resetTargetSeries(),
this.resetExtent(),this.resetVisual(function(mappingOption){mappingOption.mappingMethod="linear",
mappingOption.dataExtent=this.getExtent()}),this._resetRange();
},resetItemSize:function(){ContinuousModel.superApply(this,"resetItemSize",arguments);
var itemSize=this.itemSize;"horizontal"===this._orient&&itemSize.reverse(),
(null==itemSize[0]||isNaN(itemSize[0]))&&(itemSize[0]=DEFAULT_BAR_BOUND[0]),
(null==itemSize[1]||isNaN(itemSize[1]))&&(itemSize[1]=DEFAULT_BAR_BOUND[1]);
},_resetRange:function(){var dataExtent=this.getExtent(),range=this.option.range;
!range||range.auto?(dataExtent.auto=1,this.option.range=dataExtent):zrUtil.isArray(range)&&(range[0]>range[1]&&range.reverse(),
range[0]=Math.max(range[0],dataExtent[0]),range[1]=Math.min(range[1],dataExtent[1]));
},completeVisualOption:function(){VisualMapModel.prototype.completeVisualOption.apply(this,arguments),
zrUtil.each(this.stateList,function(state){var symbolSize=this.option.controller[state].symbolSize;
symbolSize&&symbolSize[0]!==symbolSize[1]&&(symbolSize[0]=0)},this);
},setSelected:function(selected){this.option.range=selected.slice(),
this._resetRange()},getSelected:function(){var dataExtent=this.getExtent(),dataInterval=numberUtil.asc((this.get("range")||[]).slice());
return dataInterval[0]>dataExtent[1]&&(dataInterval[0]=dataExtent[1]),
dataInterval[1]>dataExtent[1]&&(dataInterval[1]=dataExtent[1]),
dataInterval[0]<dataExtent[0]&&(dataInterval[0]=dataExtent[0]),
dataInterval[1]<dataExtent[0]&&(dataInterval[1]=dataExtent[0]),
dataInterval},getValueState:function(value){var range=this.option.range,dataExtent=this.getExtent();
return(range[0]<=dataExtent[0]||range[0]<=value)&&(range[1]>=dataExtent[1]||value<=range[1])?"inRange":"outOfRange";
},findTargetDataIndices:function(range){var result=[];return this.eachTargetSeries(function(seriesModel){
var dataIndices=[],data=seriesModel.getData();data.each(this.getDataDimension(data),function(value,dataIndex){
range[0]<=value&&value<=range[1]&&dataIndices.push(dataIndex);
},!0,this),result.push({seriesId:seriesModel.id,dataIndex:dataIndices
})},this),result},getVisualMeta:function(getColorVisual){function setStop(value,valueState){
stops.push({value:value,color:getColorVisual(value,valueState)
})}for(var oVals=getColorStopValues(this,"outOfRange",this.getExtent()),iVals=getColorStopValues(this,"inRange",this.option.range.slice()),stops=[],iIdx=0,oIdx=0,iLen=iVals.length,oLen=oVals.length;oIdx<oLen&&(!iVals.length||oVals[oIdx]<=iVals[0]);oIdx++)oVals[oIdx]<iVals[iIdx]&&setStop(oVals[oIdx],"outOfRange");
for(var first=1;iIdx<iLen;iIdx++,first=0)first&&stops.length&&setStop(iVals[iIdx],"outOfRange"),
setStop(iVals[iIdx],"inRange");for(var first=1;oIdx<oLen;oIdx++)(!iVals.length||iVals[iVals.length-1]<oVals[oIdx])&&(first&&(stops.length&&setStop(stops[stops.length-1].value,"outOfRange"),
first=0),setStop(oVals[oIdx],"outOfRange"));var stopsLen=stops.length;
return{stops:stops,outerColors:[stopsLen?stops[0].color:"transparent",stopsLen?stops[stopsLen-1].color:"transparent"]
}}});module.exports=ContinuousModel},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4),env=__webpack_require__(2),visualDefault=__webpack_require__(350),VisualMapping=__webpack_require__(195),visualSolution=__webpack_require__(320),mapVisual=VisualMapping.mapVisual,modelUtil=__webpack_require__(5),eachVisual=VisualMapping.eachVisual,numberUtil=__webpack_require__(7),isArray=zrUtil.isArray,each=zrUtil.each,asc=numberUtil.asc,linearMap=numberUtil.linearMap,noop=zrUtil.noop,DEFAULT_COLOR=["#f6efa6","#d88273","#bf444c"],VisualMapModel=echarts.extendComponentModel({
type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],
replacableOptionKeys:["inRange","outOfRange","target","controller","color"],
dataBound:[-(1/0),1/0],layoutMode:{type:"box",ignoreSize:!0},
defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:null,min:0,max:200,
dimension:null,inRange:null,outOfRange:null,left:0,right:null,
top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",
backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",
inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,
color:null,formatter:null,text:null,textStyle:{color:"#333"}},
init:function(option,parentModel,ecModel){this._dataExtent,this.targetVisuals={},
this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(option,ecModel);
},optionUpdated:function(newOption,isInit){var thisOption=this.option;
env.canvasSupported||(thisOption.realtime=!1),!isInit&&visualSolution.replaceVisualOption(thisOption,newOption,this.replacableOptionKeys),
this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),
this.completeVisualOption()},resetVisual:function(supplementVisualOption){
var stateList=this.stateList;supplementVisualOption=zrUtil.bind(supplementVisualOption,this),
this.controllerVisuals=visualSolution.createVisualMappings(this.option.controller,stateList,supplementVisualOption),
this.targetVisuals=visualSolution.createVisualMappings(this.option.target,stateList,supplementVisualOption);
},resetTargetSeries:function(){var thisOption=this.option,allSeriesIndex=null==thisOption.seriesIndex;
thisOption.seriesIndex=allSeriesIndex?[]:modelUtil.normalizeToArray(thisOption.seriesIndex),
allSeriesIndex&&this.ecModel.eachSeries(function(seriesModel,index){
thisOption.seriesIndex.push(index)})},eachTargetSeries:function(callback,context){
zrUtil.each(this.option.seriesIndex,function(seriesIndex){callback.call(context,this.ecModel.getSeriesByIndex(seriesIndex));
},this)},isTargetSeries:function(seriesModel){var is=!1;return this.eachTargetSeries(function(model){
model===seriesModel&&(is=!0)}),is},formatValueText:function(value,isCategory,edgeSymbols){
function toFixed(val){return val===dataBound[0]?"min":val===dataBound[1]?"max":(+val).toFixed(precision);
}var isMinMax,textValue,option=this.option,precision=option.precision,dataBound=this.dataBound,formatter=option.formatter;
return edgeSymbols=edgeSymbols||["<",">"],zrUtil.isArray(value)&&(value=value.slice(),
isMinMax=!0),textValue=isCategory?value:isMinMax?[toFixed(value[0]),toFixed(value[1])]:toFixed(value),
zrUtil.isString(formatter)?formatter.replace("{value}",isMinMax?textValue[0]:textValue).replace("{value2}",isMinMax?textValue[1]:textValue):zrUtil.isFunction(formatter)?isMinMax?formatter(value[0],value[1]):formatter(value):isMinMax?value[0]===dataBound[0]?edgeSymbols[0]+" "+textValue[1]:value[1]===dataBound[1]?edgeSymbols[1]+" "+textValue[0]:textValue[0]+" - "+textValue[1]:textValue;
},resetExtent:function(){var thisOption=this.option,extent=asc([thisOption.min,thisOption.max]);
this._dataExtent=extent},getDataDimension:function(list){var optDim=this.option.dimension;
return null!=optDim?optDim:list.dimensions.length-1},getExtent:function(){
return this._dataExtent.slice()},completeVisualOption:function(){
function completeSingle(base){isArray(thisOption.color)&&!base.inRange&&(base.inRange={
color:thisOption.color.slice().reverse()}),base.inRange=base.inRange||{
color:DEFAULT_COLOR},each(this.stateList,function(state){var visualType=base[state];
if(zrUtil.isString(visualType)){var defa=visualDefault.get(visualType,"active",isCategory);
defa?(base[state]={},base[state][visualType]=defa):delete base[state];
}},this)}function completeInactive(base,stateExist,stateAbsent){
var optExist=base[stateExist],optAbsent=base[stateAbsent];optExist&&!optAbsent&&(optAbsent=base[stateAbsent]={},
each(optExist,function(visualData,visualType){if(VisualMapping.isValidType(visualType)){
var defa=visualDefault.get(visualType,"inactive",isCategory);null!=defa&&(optAbsent[visualType]=defa,
"color"!==visualType||optAbsent.hasOwnProperty("opacity")||optAbsent.hasOwnProperty("colorAlpha")||(optAbsent.opacity=[0,0]));
}}))}function completeController(controller){var symbolExists=(controller.inRange||{}).symbol||(controller.outOfRange||{}).symbol,symbolSizeExists=(controller.inRange||{}).symbolSize||(controller.outOfRange||{}).symbolSize,inactiveColor=this.get("inactiveColor");
each(this.stateList,function(state){var itemSize=this.itemSize,visuals=controller[state];
visuals||(visuals=controller[state]={color:isCategory?inactiveColor:[inactiveColor]
}),null==visuals.symbol&&(visuals.symbol=symbolExists&&zrUtil.clone(symbolExists)||(isCategory?"roundRect":["roundRect"])),
null==visuals.symbolSize&&(visuals.symbolSize=symbolSizeExists&&zrUtil.clone(symbolSizeExists)||(isCategory?itemSize[0]:[itemSize[0],itemSize[0]])),
visuals.symbol=mapVisual(visuals.symbol,function(symbol){return"none"===symbol||"square"===symbol?"roundRect":symbol;
});var symbolSize=visuals.symbolSize;if(null!=symbolSize){var max=-(1/0);
eachVisual(symbolSize,function(value){value>max&&(max=value)}),
visuals.symbolSize=mapVisual(symbolSize,function(value){return linearMap(value,[0,max],[0,itemSize[0]],!0);
})}},this)}var thisOption=this.option,base={inRange:thisOption.inRange,
outOfRange:thisOption.outOfRange},target=thisOption.target||(thisOption.target={}),controller=thisOption.controller||(thisOption.controller={});
zrUtil.merge(target,base),zrUtil.merge(controller,base);var isCategory=this.isCategory();
completeSingle.call(this,target),completeSingle.call(this,controller),
completeInactive.call(this,target,"inRange","outOfRange"),completeController.call(this,controller);
},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))];
},isCategory:function(){return!!this.option.categories},setSelected:noop,
getValueState:noop,getVisualMeta:noop});module.exports=VisualMapModel;
},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),visualDefault={
get:function(visualType,key,isCategory){var value=zrUtil.clone((defaultOption[visualType]||{})[key]);
return isCategory&&zrUtil.isArray(value)?value[value.length-1]:value;
}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]
},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],
inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]
},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],
inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],
inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}
};module.exports=visualDefault},function(module,exports,__webpack_require__){
function createPolygon(points,cursor,onDrift,onDragEnd){return new graphic.Polygon({
shape:{points:points},draggable:!!onDrift,cursor:cursor,drift:onDrift,
ondragend:onDragEnd})}function createHandlePoints(handleIndex,textSize){
return 0===handleIndex?[[0,0],[textSize,0],[textSize,-textSize]]:[[0,0],[textSize,0],[textSize,textSize]];
}function createIndicatorPoints(isRange,halfHoverLinkSize,pos,extentMax){
return isRange?[[0,-mathMin(halfHoverLinkSize,mathMax(pos,0))],[HOVER_LINK_OUT,0],[0,mathMin(halfHoverLinkSize,mathMax(extentMax-pos,0))]]:[[0,0],[5,-5],[5,5]];
}function getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent){
var halfHoverLinkSize=HOVER_LINK_SIZE/2,hoverLinkDataSize=visualMapModel.get("hoverLinkDataSize");
return hoverLinkDataSize&&(halfHoverLinkSize=linearMap(hoverLinkDataSize,dataExtent,sizeExtent,!0)/2),
halfHoverLinkSize}function useHoverLinkOnHandle(visualMapModel){
return!visualMapModel.get("realtime")&&visualMapModel.get("hoverLinkOnHandle");
}var VisualMapView=__webpack_require__(352),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),sliderMove=__webpack_require__(337),LinearGradient=__webpack_require__(78),helper=__webpack_require__(353),modelUtil=__webpack_require__(5),linearMap=numberUtil.linearMap,each=zrUtil.each,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=VisualMapView.extend({
type:"visualMap.continuous",init:function(){ContinuousView.superApply(this,"init",arguments),
this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,
this._useHandle,this._hoverLinkDataIndices=[],this._dragging,
this._hovering},doRender:function(visualMapModel,ecModel,api,payload){
payload&&"selectDataRange"===payload.type&&payload.from===this.uid||this._buildView();
},_buildView:function(){this.group.removeAll();var visualMapModel=this.visualMapModel,thisGroup=this.group;
this._orient=visualMapModel.get("orient"),this._useHandle=visualMapModel.get("calculable"),
this._resetInterval(),this._renderBar(thisGroup);var dataRangeText=visualMapModel.get("text");
this._renderEndsText(thisGroup,dataRangeText,0),this._renderEndsText(thisGroup,dataRangeText,1),
this._updateView(!0),this.renderBackground(thisGroup),this._updateView(),
this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),
this.positionGroup(thisGroup)},_renderEndsText:function(group,dataRangeText,endsIndex){
if(dataRangeText){var text=dataRangeText[1-endsIndex];text=null!=text?text+"":"";
var visualMapModel=this.visualMapModel,textGap=visualMapModel.get("textGap"),itemSize=visualMapModel.itemSize,barGroup=this._shapes.barGroup,position=this._applyTransform([itemSize[0]/2,0===endsIndex?-textGap:itemSize[1]+textGap],barGroup),align=this._applyTransform(0===endsIndex?"bottom":"top",barGroup),orient=this._orient,textStyleModel=this.visualMapModel.textStyleModel;
this.group.add(new graphic.Text({style:{x:position[0],y:position[1],
textVerticalAlign:"horizontal"===orient?"middle":align,textAlign:"horizontal"===orient?align:"center",
text:text,textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()
}}))}},_renderBar:function(targetGroup){var visualMapModel=this.visualMapModel,shapes=this._shapes,itemSize=visualMapModel.itemSize,orient=this._orient,useHandle=this._useHandle,itemAlign=helper.getItemAlign(visualMapModel,this.api,itemSize),barGroup=shapes.barGroup=this._createBarGroup(itemAlign);
barGroup.add(shapes.outOfRange=createPolygon()),barGroup.add(shapes.inRange=createPolygon(null,useHandle?"move":null,zrUtil.bind(this._dragHandle,this,"all",!1),zrUtil.bind(this._dragHandle,this,"all",!0)));
var textRect=visualMapModel.textStyleModel.getTextRect("国"),textSize=mathMax(textRect.width,textRect.height);
useHandle&&(shapes.handleThumbs=[],shapes.handleLabels=[],shapes.handleLabelPoints=[],
this._createHandle(barGroup,0,itemSize,textSize,orient,itemAlign),
this._createHandle(barGroup,1,itemSize,textSize,orient,itemAlign)),
this._createIndicator(barGroup,itemSize,textSize,orient),targetGroup.add(barGroup);
},_createHandle:function(barGroup,handleIndex,itemSize,textSize,orient){
var onDrift=zrUtil.bind(this._dragHandle,this,handleIndex,!1),onDragEnd=zrUtil.bind(this._dragHandle,this,handleIndex,!0),handleThumb=createPolygon(createHandlePoints(handleIndex,textSize),"move",onDrift,onDragEnd);
handleThumb.position[0]=itemSize[0],barGroup.add(handleThumb);
var textStyleModel=this.visualMapModel.textStyleModel,handleLabel=new graphic.Text({
draggable:!0,drift:onDrift,ondragend:onDragEnd,style:{x:0,y:0,
text:"",textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()
}});this.group.add(handleLabel);var handleLabelPoint=["horizontal"===orient?textSize/2:1.5*textSize,"horizontal"===orient?0===handleIndex?-(1.5*textSize):1.5*textSize:0===handleIndex?-textSize/2:textSize/2],shapes=this._shapes;
shapes.handleThumbs[handleIndex]=handleThumb,shapes.handleLabelPoints[handleIndex]=handleLabelPoint,
shapes.handleLabels[handleIndex]=handleLabel},_createIndicator:function(barGroup,itemSize,textSize,orient){
var indicator=createPolygon([[0,0]],"move");indicator.position[0]=itemSize[0],
indicator.attr({invisible:!0,silent:!0}),barGroup.add(indicator);
var textStyleModel=this.visualMapModel.textStyleModel,indicatorLabel=new graphic.Text({
silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:textStyleModel.getFont(),
fill:textStyleModel.getTextColor()}});this.group.add(indicatorLabel);
var indicatorLabelPoint=["horizontal"===orient?textSize/2:HOVER_LINK_OUT+3,0],shapes=this._shapes;
shapes.indicator=indicator,shapes.indicatorLabel=indicatorLabel,
shapes.indicatorLabelPoint=indicatorLabelPoint},_dragHandle:function(handleIndex,isEnd,dx,dy){
if(this._useHandle){if(this._dragging=!isEnd,!isEnd){var vertex=this._applyTransform([dx,dy],this._shapes.barGroup,!0);
this._updateInterval(handleIndex,vertex[1]),this._updateView();
}isEnd===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({
type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,
selected:this._dataInterval.slice()}),isEnd?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[handleIndex],!1);
}},_resetInterval:function(){var visualMapModel=this.visualMapModel,dataInterval=this._dataInterval=visualMapModel.getSelected(),dataExtent=visualMapModel.getExtent(),sizeExtent=[0,visualMapModel.itemSize[1]];
this._handleEnds=[linearMap(dataInterval[0],dataExtent,sizeExtent,!0),linearMap(dataInterval[1],dataExtent,sizeExtent,!0)];
},_updateInterval:function(handleIndex,delta){delta=delta||0;var visualMapModel=this.visualMapModel,handleEnds=this._handleEnds;
sliderMove(delta,handleEnds,[0,visualMapModel.itemSize[1]],"all"===handleIndex?"rigid":"push",handleIndex);
var dataExtent=visualMapModel.getExtent(),sizeExtent=[0,visualMapModel.itemSize[1]];
this._dataInterval=[linearMap(handleEnds[0],sizeExtent,dataExtent,!0),linearMap(handleEnds[1],sizeExtent,dataExtent,!0)];
},_updateView:function(forSketch){var visualMapModel=this.visualMapModel,dataExtent=visualMapModel.getExtent(),shapes=this._shapes,outOfRangeHandleEnds=[0,visualMapModel.itemSize[1]],inRangeHandleEnds=forSketch?outOfRangeHandleEnds:this._handleEnds,visualInRange=this._createBarVisual(this._dataInterval,dataExtent,inRangeHandleEnds,"inRange"),visualOutOfRange=this._createBarVisual(dataExtent,dataExtent,outOfRangeHandleEnds,"outOfRange");
shapes.inRange.setStyle({fill:visualInRange.barColor,opacity:visualInRange.opacity
}).setShape("points",visualInRange.barPoints),shapes.outOfRange.setStyle({
fill:visualOutOfRange.barColor,opacity:visualOutOfRange.opacity
}).setShape("points",visualOutOfRange.barPoints),this._updateHandle(inRangeHandleEnds,visualInRange);
},_createBarVisual:function(dataInterval,dataExtent,handleEnds,forceState){
var opts={forceState:forceState,convertOpacityToAlpha:!0},colorStops=this._makeColorGradient(dataInterval,opts),symbolSizes=[this.getControllerVisual(dataInterval[0],"symbolSize",opts),this.getControllerVisual(dataInterval[1],"symbolSize",opts)],barPoints=this._createBarPoints(handleEnds,symbolSizes);
return{barColor:new LinearGradient(0,0,0,1,colorStops),barPoints:barPoints,
handlesColor:[colorStops[0].color,colorStops[colorStops.length-1].color]
}},_makeColorGradient:function(dataInterval,opts){var sampleNumber=100,colorStops=[],step=(dataInterval[1]-dataInterval[0])/sampleNumber;
colorStops.push({color:this.getControllerVisual(dataInterval[0],"color",opts),
offset:0});for(var i=1;i<sampleNumber;i++){var currValue=dataInterval[0]+step*i;
if(currValue>dataInterval[1])break;colorStops.push({color:this.getControllerVisual(currValue,"color",opts),
offset:i/sampleNumber})}return colorStops.push({color:this.getControllerVisual(dataInterval[1],"color",opts),
offset:1}),colorStops},_createBarPoints:function(handleEnds,symbolSizes){
var itemSize=this.visualMapModel.itemSize;return[[itemSize[0]-symbolSizes[0],handleEnds[0]],[itemSize[0],handleEnds[0]],[itemSize[0],handleEnds[1]],[itemSize[0]-symbolSizes[1],handleEnds[1]]];
},_createBarGroup:function(itemAlign){var orient=this._orient,inverse=this.visualMapModel.get("inverse");
return new graphic.Group("horizontal"!==orient||inverse?"horizontal"===orient&&inverse?{
scale:"bottom"===itemAlign?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==orient||inverse?{
scale:"left"===itemAlign?[1,1]:[-1,1]}:{scale:"left"===itemAlign?[1,-1]:[-1,-1]
}:{scale:"bottom"===itemAlign?[1,1]:[-1,1],rotation:Math.PI/2
})},_updateHandle:function(handleEnds,visualInRange){if(this._useHandle){
var shapes=this._shapes,visualMapModel=this.visualMapModel,handleThumbs=shapes.handleThumbs,handleLabels=shapes.handleLabels;
each([0,1],function(handleIndex){var handleThumb=handleThumbs[handleIndex];
handleThumb.setStyle("fill",visualInRange.handlesColor[handleIndex]),
handleThumb.position[1]=handleEnds[handleIndex];var textPoint=graphic.applyTransform(shapes.handleLabelPoints[handleIndex],graphic.getTransform(handleThumb,this.group));
handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],
text:visualMapModel.formatValueText(this._dataInterval[handleIndex]),
textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===handleIndex?"bottom":"top":"left",shapes.barGroup)
})},this)}},_showIndicator:function(cursorValue,textValue,rangeSymbol,halfHoverLinkSize){
var visualMapModel=this.visualMapModel,dataExtent=visualMapModel.getExtent(),itemSize=visualMapModel.itemSize,sizeExtent=[0,itemSize[1]],pos=linearMap(cursorValue,dataExtent,sizeExtent,!0),shapes=this._shapes,indicator=shapes.indicator;
if(indicator){indicator.position[1]=pos,indicator.attr("invisible",!1),
indicator.setShape("points",createIndicatorPoints(!!rangeSymbol,halfHoverLinkSize,pos,itemSize[1]));
var opts={convertOpacityToAlpha:!0},color=this.getControllerVisual(cursorValue,"color",opts);
indicator.setStyle("fill",color);var textPoint=graphic.applyTransform(shapes.indicatorLabelPoint,graphic.getTransform(indicator,this.group)),indicatorLabel=shapes.indicatorLabel;
indicatorLabel.attr("invisible",!1);var align=this._applyTransform("left",shapes.barGroup),orient=this._orient;
indicatorLabel.setStyle({text:(rangeSymbol?rangeSymbol:"")+visualMapModel.formatValueText(textValue),
textVerticalAlign:"horizontal"===orient?align:"middle",textAlign:"horizontal"===orient?"center":align,
x:textPoint[0],y:textPoint[1]})}},_enableHoverLinkToSeries:function(){
var self=this;this._shapes.barGroup.on("mousemove",function(e){
if(self._hovering=!0,!self._dragging){var itemSize=self.visualMapModel.itemSize,pos=self._applyTransform([e.offsetX,e.offsetY],self._shapes.barGroup,!0,!0);
pos[1]=mathMin(mathMax(0,pos[1]),itemSize[1]),self._doHoverLinkToSeries(pos[1],0<=pos[0]&&pos[0]<=itemSize[0]);
}}).on("mouseout",function(){self._hovering=!1,!self._dragging&&self._clearHoverLinkToSeries();
})},_enableHoverLinkFromSeries:function(){var zr=this.api.getZr();
this.visualMapModel.option.hoverLink?(zr.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),
zr.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries();
},_doHoverLinkToSeries:function(cursorPos,hoverOnBar){var visualMapModel=this.visualMapModel,itemSize=visualMapModel.itemSize;
if(visualMapModel.option.hoverLink){var sizeExtent=[0,itemSize[1]],dataExtent=visualMapModel.getExtent();
cursorPos=mathMin(mathMax(sizeExtent[0],cursorPos),sizeExtent[1]);
var halfHoverLinkSize=getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent),hoverRange=[cursorPos-halfHoverLinkSize,cursorPos+halfHoverLinkSize],cursorValue=linearMap(cursorPos,sizeExtent,dataExtent,!0),valueRange=[linearMap(hoverRange[0],sizeExtent,dataExtent,!0),linearMap(hoverRange[1],sizeExtent,dataExtent,!0)];
hoverRange[0]<sizeExtent[0]&&(valueRange[0]=-(1/0)),hoverRange[1]>sizeExtent[1]&&(valueRange[1]=1/0),
hoverOnBar&&(valueRange[0]===-(1/0)?this._showIndicator(cursorValue,valueRange[1],"< ",halfHoverLinkSize):valueRange[1]===1/0?this._showIndicator(cursorValue,valueRange[0],"> ",halfHoverLinkSize):this._showIndicator(cursorValue,cursorValue,"≈ ",halfHoverLinkSize));
var oldBatch=this._hoverLinkDataIndices,newBatch=[];(hoverOnBar||useHoverLinkOnHandle(visualMapModel))&&(newBatch=this._hoverLinkDataIndices=visualMapModel.findTargetDataIndices(valueRange));
var resultBatches=modelUtil.compressBatches(oldBatch,newBatch);
this._dispatchHighDown("downplay",helper.convertDataIndex(resultBatches[0])),
this._dispatchHighDown("highlight",helper.convertDataIndex(resultBatches[1]));
}},_hoverLinkFromSeriesMouseOver:function(e){var el=e.target;if(el&&null!=el.dataIndex){
var dataModel=el.dataModel||this.ecModel.getSeriesByIndex(el.seriesIndex),data=dataModel.getData(el.dataType),dim=data.getDimension(this.visualMapModel.getDataDimension(data)),value=data.get(dim,el.dataIndex,!0);
isNaN(value)||this._showIndicator(value,value)}},_hideIndicator:function(){
var shapes=this._shapes;shapes.indicator&&shapes.indicator.attr("invisible",!0),
shapes.indicatorLabel&&shapes.indicatorLabel.attr("invisible",!0);
},_clearHoverLinkToSeries:function(){this._hideIndicator();var indices=this._hoverLinkDataIndices;
this._dispatchHighDown("downplay",helper.convertDataIndex(indices)),
indices.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();
var zr=this.api.getZr();zr.off("mouseover",this._hoverLinkFromSeriesMouseOver),
zr.off("mouseout",this._hideIndicator)},_applyTransform:function(vertex,element,inverse,global){
var transform=graphic.getTransform(element,global?null:this.group);
return graphic[zrUtil.isArray(vertex)?"applyTransform":"transformDirection"](vertex,transform,inverse);
},_dispatchHighDown:function(type,batch){batch&&batch.length&&this.api.dispatchAction({
type:type,batch:batch})},dispose:function(){this._clearHoverLinkFromSeries(),
this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),
this._clearHoverLinkToSeries()}});module.exports=ContinuousView;
},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),formatUtil=__webpack_require__(6),layout=__webpack_require__(21),echarts=__webpack_require__(1),VisualMapping=__webpack_require__(195);
module.exports=echarts.extendComponentView({type:"visualMap",
autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(ecModel,api){
this.ecModel=ecModel,this.api=api,this.visualMapModel},render:function(visualMapModel,ecModel,api,payload){
return this.visualMapModel=visualMapModel,visualMapModel.get("show")===!1?void this.group.removeAll():void this.doRender.apply(this,arguments);
},renderBackground:function(group){var visualMapModel=this.visualMapModel,padding=formatUtil.normalizeCssArray(visualMapModel.get("padding")||0),rect=group.getBoundingRect();
group.add(new graphic.Rect({z2:-1,silent:!0,shape:{x:rect.x-padding[3],
y:rect.y-padding[0],width:rect.width+padding[3]+padding[1],height:rect.height+padding[0]+padding[2]
},style:{fill:visualMapModel.get("backgroundColor"),stroke:visualMapModel.get("borderColor"),
lineWidth:visualMapModel.get("borderWidth")}}))},getControllerVisual:function(targetValue,visualCluster,opts){
function getter(key){return visualObj[key]}function setter(key,value){
visualObj[key]=value}opts=opts||{};var forceState=opts.forceState,visualMapModel=this.visualMapModel,visualObj={};
if("symbol"===visualCluster&&(visualObj.symbol=visualMapModel.get("itemSymbol")),
"color"===visualCluster){var defaultColor=visualMapModel.get("contentColor");
visualObj.color=defaultColor}var mappings=visualMapModel.controllerVisuals[forceState||visualMapModel.getValueState(targetValue)],visualTypes=VisualMapping.prepareVisualTypes(mappings);
return zrUtil.each(visualTypes,function(type){var visualMapping=mappings[type];
opts.convertOpacityToAlpha&&"opacity"===type&&(type="colorAlpha",
visualMapping=mappings.__alphaForOpacity),VisualMapping.dependsOn(type,visualCluster)&&visualMapping&&visualMapping.applyVisual(targetValue,getter,setter);
}),visualObj[visualCluster]},positionGroup:function(group){var model=this.visualMapModel,api=this.api;
layout.positionElement(group,model.getBoxLayoutParams(),{width:api.getWidth(),
height:api.getHeight()})},doRender:zrUtil.noop})},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),layout=__webpack_require__(21),helper={
getItemAlign:function(visualMapModel,api,itemSize){var modelOption=visualMapModel.option,itemAlign=modelOption.align;
if(null!=itemAlign&&"auto"!==itemAlign)return itemAlign;for(var ecSize={
width:api.getWidth(),height:api.getHeight()},realIndex="horizontal"===modelOption.orient?1:0,paramsSet=[["left","right","width"],["top","bottom","height"]],reals=paramsSet[realIndex],fakeValue=[0,null,10],layoutInput={},i=0;i<3;i++)layoutInput[paramsSet[1-realIndex][i]]=fakeValue[i],
layoutInput[reals[i]]=2===i?itemSize[0]:modelOption[reals[i]];
var rParam=[["x","width",3],["y","height",0]][realIndex],rect=layout.getLayoutRect(layoutInput,ecSize,modelOption.padding);
return reals[(rect.margin[rParam[2]]||0)+rect[rParam[0]]+.5*rect[rParam[1]]<.5*ecSize[rParam[1]]?0:1];
},convertDataIndex:function(batch){return zrUtil.each(batch||[],function(batchItem){
null!=batch.dataIndex&&(batch.dataIndexInside=batch.dataIndex,
batch.dataIndex=null)}),batch}};module.exports=helper},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1),actionInfo={type:"selectDataRange",
event:"dataRangeSelected",update:"update"};echarts.registerAction(actionInfo,function(payload,ecModel){
ecModel.eachComponent({mainType:"visualMap",query:payload},function(model){
model.setSelected(payload.selected)})})},function(module,exports,__webpack_require__){
__webpack_require__(1).registerPreprocessor(__webpack_require__(345)),
__webpack_require__(346),__webpack_require__(347),__webpack_require__(356),
__webpack_require__(357),__webpack_require__(354)},function(module,exports,__webpack_require__){
function normalizeReverse(thisOption,pieceList){var inverse=thisOption.inverse;
("vertical"===thisOption.orient?!inverse:inverse)&&pieceList.reverse();
}var VisualMapModel=__webpack_require__(349),zrUtil=__webpack_require__(4),VisualMapping=__webpack_require__(195),visualDefault=__webpack_require__(350),reformIntervals=__webpack_require__(7).reformIntervals,PiecewiseModel=VisualMapModel.extend({
type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,
maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",
pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",
itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(newOption,isInit){
PiecewiseModel.superApply(this,"optionUpdated",arguments),this._pieceList=[],
this.resetTargetSeries(),this.resetExtent();var mode=this._mode=this._determineMode();
resetMethods[this._mode].call(this),this._resetSelected(newOption,isInit);
var categories=this.option.categories;this.resetVisual(function(mappingOption,state){
"categories"===mode?(mappingOption.mappingMethod="category",mappingOption.categories=zrUtil.clone(categories)):(mappingOption.dataExtent=this.getExtent(),
mappingOption.mappingMethod="piecewise",mappingOption.pieceList=zrUtil.map(this._pieceList,function(piece){
var piece=zrUtil.clone(piece);return"inRange"!==state&&(piece.visual=null),
piece}))})},completeVisualOption:function(){function has(obj,state,visualType){
return obj&&obj[state]&&(zrUtil.isObject(obj[state])?obj[state].hasOwnProperty(visualType):obj[state]===visualType);
}var option=this.option,visualTypesInPieces={},visualTypes=VisualMapping.listVisualTypes(),isCategory=this.isCategory();
zrUtil.each(option.pieces,function(piece){zrUtil.each(visualTypes,function(visualType){
piece.hasOwnProperty(visualType)&&(visualTypesInPieces[visualType]=1);
})}),zrUtil.each(visualTypesInPieces,function(v,visualType){var exists=0;
zrUtil.each(this.stateList,function(state){exists|=has(option,state,visualType)||has(option.target,state,visualType);
},this),!exists&&zrUtil.each(this.stateList,function(state){(option[state]||(option[state]={}))[visualType]=visualDefault.get(visualType,"inRange"===state?"active":"inactive",isCategory);
})},this),VisualMapModel.prototype.completeVisualOption.apply(this,arguments);
},_resetSelected:function(newOption,isInit){var thisOption=this.option,pieceList=this._pieceList,selected=(isInit?thisOption:newOption).selected||{};
if(thisOption.selected=selected,zrUtil.each(pieceList,function(piece,index){
var key=this.getSelectedMapKey(piece);selected.hasOwnProperty(key)||(selected[key]=!0);
},this),"single"===thisOption.selectedMode){var hasSel=!1;zrUtil.each(pieceList,function(piece,index){
var key=this.getSelectedMapKey(piece);selected[key]&&(hasSel?selected[key]=!1:hasSel=!0);
},this)}},getSelectedMapKey:function(piece){return"categories"===this._mode?piece.value+"":piece.index+"";
},getPieceList:function(){return this._pieceList},_determineMode:function(){
var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber";
},setSelected:function(selected){this.option.selected=zrUtil.clone(selected);
},getValueState:function(value){var index=VisualMapping.findPieceIndex(value,this._pieceList);
return null!=index&&this.option.selected[this.getSelectedMapKey(this._pieceList[index])]?"inRange":"outOfRange";
},findTargetDataIndices:function(pieceIndex){var result=[];return this.eachTargetSeries(function(seriesModel){
var dataIndices=[],data=seriesModel.getData();data.each(this.getDataDimension(data),function(value,dataIndex){
var pIdx=VisualMapping.findPieceIndex(value,this._pieceList);pIdx===pieceIndex&&dataIndices.push(dataIndex);
},!0,this),result.push({seriesId:seriesModel.id,dataIndex:dataIndices
})},this),result},getRepresentValue:function(piece){var representValue;
if(this.isCategory())representValue=piece.value;else if(null!=piece.value)representValue=piece.value;else{
var pieceInterval=piece.interval||[];representValue=pieceInterval[0]===-(1/0)&&pieceInterval[1]===1/0?0:(pieceInterval[0]+pieceInterval[1])/2;
}return representValue},getVisualMeta:function(getColorVisual){
function setStop(interval,valueState){var representValue=visualMapModel.getRepresentValue({
interval:interval});valueState||(valueState=visualMapModel.getValueState(representValue));
var color=getColorVisual(representValue,valueState);interval[0]===-(1/0)?outerColors[0]=color:interval[1]===1/0?outerColors[1]=color:stops.push({
value:interval[0],color:color},{value:interval[1],color:color
})}if(!this.isCategory()){var stops=[],outerColors=[],visualMapModel=this,pieceList=this._pieceList.slice();
if(pieceList.length){var edge=pieceList[0].interval[0];edge!==-(1/0)&&pieceList.unshift({
interval:[-(1/0),edge]}),edge=pieceList[pieceList.length-1].interval[1],
edge!==1/0&&pieceList.push({interval:[edge,1/0]})}else pieceList.push({
interval:[-(1/0),1/0]});var curr=-(1/0);return zrUtil.each(pieceList,function(piece){
var interval=piece.interval;interval&&(interval[0]>curr&&setStop([curr,interval[0]],"outOfRange"),
setStop(interval.slice()),curr=interval[1])},this),{stops:stops,
outerColors:outerColors}}}}),resetMethods={splitNumber:function(){
var thisOption=this.option,pieceList=this._pieceList,precision=thisOption.precision,dataExtent=this.getExtent(),splitNumber=thisOption.splitNumber;
splitNumber=Math.max(parseInt(splitNumber,10),1),thisOption.splitNumber=splitNumber;
for(var splitStep=(dataExtent[1]-dataExtent[0])/splitNumber;+splitStep.toFixed(precision)!==splitStep&&precision<5;)precision++;
thisOption.precision=precision,splitStep=+splitStep.toFixed(precision);
var index=0;thisOption.minOpen&&pieceList.push({index:index++,
interval:[-(1/0),dataExtent[0]],close:[0,0]});for(var curr=dataExtent[0],len=index+splitNumber;index<len;curr+=splitStep){
var max=index===splitNumber-1?dataExtent[1]:curr+splitStep;pieceList.push({
index:index++,interval:[curr,max],close:[1,1]})}thisOption.maxOpen&&pieceList.push({
index:index++,interval:[dataExtent[1],1/0],close:[0,0]}),reformIntervals(pieceList),
zrUtil.each(pieceList,function(piece){piece.text=this.formatValueText(piece.interval);
},this)},categories:function(){var thisOption=this.option;zrUtil.each(thisOption.categories,function(cate){
this._pieceList.push({text:this.formatValueText(cate,!0),value:cate
})},this),normalizeReverse(thisOption,this._pieceList)},pieces:function(){
var thisOption=this.option,pieceList=this._pieceList;zrUtil.each(thisOption.pieces,function(pieceListItem,index){
zrUtil.isObject(pieceListItem)||(pieceListItem={value:pieceListItem
});var item={text:"",index:index};if(null!=pieceListItem.label&&(item.text=pieceListItem.label),
pieceListItem.hasOwnProperty("value")){var value=item.value=pieceListItem.value;
item.interval=[value,value],item.close=[1,1]}else{for(var interval=item.interval=[],close=item.close=[0,0],closeList=[1,0,1],infinityList=[-(1/0),1/0],useMinMax=[],lg=0;lg<2;lg++){
for(var names=[["gte","gt","min"],["lte","lt","max"]][lg],i=0;i<3&&null==interval[lg];i++)interval[lg]=pieceListItem[names[i]],
close[lg]=closeList[i],useMinMax[lg]=2===i;null==interval[lg]&&(interval[lg]=infinityList[lg]);
}useMinMax[0]&&interval[1]===1/0&&(close[0]=0),useMinMax[1]&&interval[0]===-(1/0)&&(close[1]=0),
interval[0]>interval[1]&&console.warn("Piece "+index+"is illegal: "+interval+" lower bound should not greater then uppper bound."),
interval[0]===interval[1]&&close[0]&&close[1]&&(item.value=interval[0]);
}item.visual=VisualMapping.retrieveVisuals(pieceListItem),pieceList.push(item);
},this),normalizeReverse(thisOption,pieceList),reformIntervals(pieceList),
zrUtil.each(pieceList,function(piece){var close=piece.close,edgeSymbols=[["<","≤"][close[1]],[">","≥"][close[0]]];
piece.text=piece.text||this.formatValueText(null!=piece.value?piece.value:piece.interval,!1,edgeSymbols);
},this)}};module.exports=PiecewiseModel},function(module,exports,__webpack_require__){
var VisualMapView=__webpack_require__(352),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),symbolCreators=__webpack_require__(107),layout=__webpack_require__(21),helper=__webpack_require__(353),PiecewiseVisualMapView=VisualMapView.extend({
type:"visualMap.piecewise",doRender:function(){function renderItem(item){
var piece=item.piece,itemGroup=new graphic.Group;itemGroup.onclick=zrUtil.bind(this._onItemClick,this,piece),
this._enableHoverLink(itemGroup,item.indexInModelPieceList);var representValue=visualMapModel.getRepresentValue(piece);
if(this._createItemSymbol(itemGroup,representValue,[0,0,itemSize[0],itemSize[1]]),
showLabel){var visualState=this.visualMapModel.getValueState(representValue);
itemGroup.add(new graphic.Text({style:{x:"right"===itemAlign?-textGap:itemSize[0]+textGap,
y:itemSize[1]/2,text:piece.text,textVerticalAlign:"middle",textAlign:itemAlign,
textFont:textFont,fill:textFill,opacity:"outOfRange"===visualState?.5:1
}}))}thisGroup.add(itemGroup)}var thisGroup=this.group;thisGroup.removeAll();
var visualMapModel=this.visualMapModel,textGap=visualMapModel.get("textGap"),textStyleModel=visualMapModel.textStyleModel,textFont=textStyleModel.getFont(),textFill=textStyleModel.getTextColor(),itemAlign=this._getItemAlign(),itemSize=visualMapModel.itemSize,viewData=this._getViewData(),endsText=viewData.endsText,showLabel=zrUtil.retrieve(visualMapModel.get("showLabel",!0),!endsText);
endsText&&this._renderEndsText(thisGroup,endsText[0],itemSize,showLabel,itemAlign),
zrUtil.each(viewData.viewPieceList,renderItem,this),endsText&&this._renderEndsText(thisGroup,endsText[1],itemSize,showLabel,itemAlign),
layout.box(visualMapModel.get("orient"),thisGroup,visualMapModel.get("itemGap")),
this.renderBackground(thisGroup),this.positionGroup(thisGroup);
},_enableHoverLink:function(itemGroup,pieceIndex){function onHoverLink(method){
var visualMapModel=this.visualMapModel;visualMapModel.option.hoverLink&&this.api.dispatchAction({
type:method,batch:helper.convertDataIndex(visualMapModel.findTargetDataIndices(pieceIndex))
})}itemGroup.on("mouseover",zrUtil.bind(onHoverLink,this,"highlight")).on("mouseout",zrUtil.bind(onHoverLink,this,"downplay"));
},_getItemAlign:function(){var visualMapModel=this.visualMapModel,modelOption=visualMapModel.option;
if("vertical"===modelOption.orient)return helper.getItemAlign(visualMapModel,this.api,visualMapModel.itemSize);
var align=modelOption.align;return align&&"auto"!==align||(align="left"),
align},_renderEndsText:function(group,text,itemSize,showLabel,itemAlign){
if(text){var itemGroup=new graphic.Group,textStyleModel=this.visualMapModel.textStyleModel;
itemGroup.add(new graphic.Text({style:{x:showLabel?"right"===itemAlign?itemSize[0]:0:itemSize[0]/2,
y:itemSize[1]/2,textVerticalAlign:"middle",textAlign:showLabel?itemAlign:"center",
text:text,textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()
}})),group.add(itemGroup)}},_getViewData:function(){var visualMapModel=this.visualMapModel,viewPieceList=zrUtil.map(visualMapModel.getPieceList(),function(piece,index){
return{piece:piece,indexInModelPieceList:index}}),endsText=visualMapModel.get("text"),orient=visualMapModel.get("orient"),inverse=visualMapModel.get("inverse");
return("horizontal"===orient?inverse:!inverse)?viewPieceList.reverse():endsText&&(endsText=endsText.slice().reverse()),
{viewPieceList:viewPieceList,endsText:endsText}},_createItemSymbol:function(group,representValue,shapeParam){
group.add(symbolCreators.createSymbol(this.getControllerVisual(representValue,"symbol"),shapeParam[0],shapeParam[1],shapeParam[2],shapeParam[3],this.getControllerVisual(representValue,"color")));
},_onItemClick:function(piece){var visualMapModel=this.visualMapModel,option=visualMapModel.option,selected=zrUtil.clone(option.selected),newKey=visualMapModel.getSelectedMapKey(piece);
"single"===option.selectedMode?(selected[newKey]=!0,zrUtil.each(selected,function(o,key){
selected[key]=key===newKey})):selected[newKey]=!selected[newKey],
this.api.dispatchAction({type:"selectDataRange",from:this.uid,
visualMapId:this.visualMapModel.id,selected:selected})}});module.exports=PiecewiseVisualMapView;
},function(module,exports,__webpack_require__){__webpack_require__(359),
__webpack_require__(361),__webpack_require__(1).registerPreprocessor(function(opt){
opt.markPoint=opt.markPoint||{}})},function(module,exports,__webpack_require__){
module.exports=__webpack_require__(360).extend({type:"markPoint",
defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{
trigger:"item"},label:{normal:{show:!0,position:"inside"},emphasis:{
show:!0}},itemStyle:{normal:{borderWidth:2}}}})},function(module,exports,__webpack_require__){
function fillLabel(opt){modelUtil.defaultEmphasis(opt.label,modelUtil.LABEL_OPTIONS);
}var modelUtil=__webpack_require__(5),zrUtil=__webpack_require__(4),env=__webpack_require__(2),formatUtil=__webpack_require__(6),addCommas=formatUtil.addCommas,encodeHTML=formatUtil.encodeHTML,MarkerModel=__webpack_require__(1).extendComponentModel({
type:"marker",dependencies:["series","grid","polar","geo"],init:function(option,parentModel,ecModel,extraOpt){
if("marker"===this.type)throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");
this.mergeDefaultAndTheme(option,ecModel),this.mergeOption(option,ecModel,extraOpt.createdBySelf,!0);
},isAnimationEnabled:function(){if(env.node)return!1;var hostSeries=this.__hostSeries;
return this.getShallow("animation")&&hostSeries&&hostSeries.isAnimationEnabled();
},mergeOption:function(newOpt,ecModel,createdBySelf,isInit){var MarkerModel=this.constructor,modelPropName=this.mainType+"Model";
createdBySelf||ecModel.eachSeries(function(seriesModel){var markerOpt=seriesModel.get(this.mainType),markerModel=seriesModel[modelPropName];
return markerOpt&&markerOpt.data?(markerModel?markerModel.mergeOption(markerOpt,ecModel,!0):(isInit&&fillLabel(markerOpt),
zrUtil.each(markerOpt.data,function(item){item instanceof Array?(fillLabel(item[0]),
fillLabel(item[1])):fillLabel(item)}),markerModel=new MarkerModel(markerOpt,this,ecModel),
zrUtil.extend(markerModel,{mainType:this.mainType,seriesIndex:seriesModel.seriesIndex,
name:seriesModel.name,createdBySelf:!0}),markerModel.__hostSeries=seriesModel),
void(seriesModel[modelPropName]=markerModel)):void(seriesModel[modelPropName]=null);
},this)},formatTooltip:function(dataIndex){var data=this.getData(),value=this.getRawValue(dataIndex),formattedValue=zrUtil.isArray(value)?zrUtil.map(value,addCommas).join(", "):addCommas(value),name=data.getName(dataIndex),html=encodeHTML(this.name);
return(null!=value||name)&&(html+="<br />"),name&&(html+=encodeHTML(name),
null!=value&&(html+=" : ")),null!=value&&(html+=encodeHTML(formattedValue)),
html},getData:function(){return this._data},setData:function(data){
this._data=data}});zrUtil.mixin(MarkerModel,modelUtil.dataFormatMixin),
module.exports=MarkerModel},function(module,exports,__webpack_require__){
function updateMarkerLayout(mpData,seriesModel,api){var coordSys=seriesModel.coordinateSystem;
mpData.each(function(idx){var point,itemModel=mpData.getItemModel(idx),xPx=numberUtil.parsePercent(itemModel.get("x"),api.getWidth()),yPx=numberUtil.parsePercent(itemModel.get("y"),api.getHeight());
if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions,idx));else if(coordSys){
var x=mpData.get(coordSys.dimensions[0],idx),y=mpData.get(coordSys.dimensions[1],idx);
point=coordSys.dataToPoint([x,y])}}else point=[xPx,yPx];isNaN(xPx)||(point[0]=xPx),
isNaN(yPx)||(point[1]=yPx),mpData.setItemLayout(idx,point)})}
function createList(coordSys,seriesModel,mpModel){var coordDimsInfos;
coordDimsInfos=coordSys?zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){
var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};
return info.name=coordDim,info}):[{name:"value",type:"float"}];
var mpData=new List(coordDimsInfos,mpModel),dataOpt=zrUtil.map(mpModel.get("data"),zrUtil.curry(markerHelper.dataTransform,seriesModel));
return coordSys&&(dataOpt=zrUtil.filter(dataOpt,zrUtil.curry(markerHelper.dataFilter,coordSys))),
mpData.initData(dataOpt,null,coordSys?markerHelper.dimValueGetter:function(item){
return item.value}),mpData}var SymbolDraw=__webpack_require__(105),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),List=__webpack_require__(98),markerHelper=__webpack_require__(362);
__webpack_require__(363).extend({type:"markPoint",updateLayout:function(markPointModel,ecModel,api){
ecModel.eachSeries(function(seriesModel){var mpModel=seriesModel.markPointModel;
mpModel&&(updateMarkerLayout(mpModel.getData(),seriesModel,api),
this.markerGroupMap[seriesModel.name].updateLayout(mpModel))},this);
},renderSeries:function(seriesModel,mpModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesName=seriesModel.name,seriesData=seriesModel.getData(),symbolDrawMap=this.markerGroupMap,symbolDraw=symbolDrawMap[seriesName];
symbolDraw||(symbolDraw=symbolDrawMap[seriesName]=new SymbolDraw);
var mpData=createList(coordSys,seriesModel,mpModel);mpModel.setData(mpData),
updateMarkerLayout(mpModel.getData(),seriesModel,api),mpData.each(function(idx){
var itemModel=mpData.getItemModel(idx),symbolSize=itemModel.getShallow("symbolSize");
"function"==typeof symbolSize&&(symbolSize=symbolSize(mpModel.getRawValue(idx),mpModel.getDataParams(idx))),
mpData.setItemVisual(idx,{symbolSize:symbolSize,color:itemModel.get("itemStyle.normal.color")||seriesData.getVisual("color"),
symbol:itemModel.getShallow("symbol")})}),symbolDraw.updateData(mpData),
this.group.add(symbolDraw.group),mpData.eachItemGraphicEl(function(el){
el.traverse(function(child){child.dataModel=mpModel})}),symbolDraw.__keep=!0,
symbolDraw.group.silent=mpModel.get("silent")||seriesModel.get("silent");
}})},function(module,exports,__webpack_require__){function hasXOrY(item){
return!(isNaN(parseFloat(item.x))&&isNaN(parseFloat(item.y)));
}function hasXAndY(item){return!isNaN(parseFloat(item.x))&&!isNaN(parseFloat(item.y));
}function getPrecision(data,valueAxisDim,dataIndex){var precision=-1;
do precision=Math.max(numberUtil.getPrecision(data.get(valueAxisDim,dataIndex)),precision),
data=data.stackedOn;while(data);return precision}function markerTypeCalculatorWithExtent(mlType,data,otherDataDim,targetDataDim,otherCoordIndex,targetCoordIndex){
var coordArr=[],value=numCalculate(data,targetDataDim,mlType),dataIndex=data.indexOfNearest(targetDataDim,value,!0);
coordArr[otherCoordIndex]=data.get(otherDataDim,dataIndex,!0),
coordArr[targetCoordIndex]=data.get(targetDataDim,dataIndex,!0);
var precision=getPrecision(data,targetDataDim,dataIndex);return precision>=0&&(coordArr[targetCoordIndex]=+coordArr[targetCoordIndex].toFixed(precision)),
coordArr}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),indexOf=zrUtil.indexOf,curry=zrUtil.curry,markerTypeCalculator={
min:curry(markerTypeCalculatorWithExtent,"min"),max:curry(markerTypeCalculatorWithExtent,"max"),
average:curry(markerTypeCalculatorWithExtent,"average")},dataTransform=function(seriesModel,item){
var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem;
if(item&&!hasXAndY(item)&&!zrUtil.isArray(item.coord)&&coordSys){
var dims=coordSys.dimensions,axisInfo=getAxisInfo(item,data,coordSys,seriesModel);
if(item=zrUtil.clone(item),item.type&&markerTypeCalculator[item.type]&&axisInfo.baseAxis&&axisInfo.valueAxis){
var otherCoordIndex=indexOf(dims,axisInfo.baseAxis.dim),targetCoordIndex=indexOf(dims,axisInfo.valueAxis.dim);
item.coord=markerTypeCalculator[item.type](data,axisInfo.baseDataDim,axisInfo.valueDataDim,otherCoordIndex,targetCoordIndex),
item.value=item.coord[targetCoordIndex]}else{for(var coord=[null!=item.xAxis?item.xAxis:item.radiusAxis,null!=item.yAxis?item.yAxis:item.angleAxis],i=0;i<2;i++)if(markerTypeCalculator[coord[i]]){
var dataDim=seriesModel.coordDimToDataDim(dims[i])[0];coord[i]=numCalculate(data,dataDim,coord[i]);
}item.coord=coord}}return item},getAxisInfo=function(item,data,coordSys,seriesModel){
var ret={};return null!=item.valueIndex||null!=item.valueDim?(ret.valueDataDim=null!=item.valueIndex?data.getDimension(item.valueIndex):item.valueDim,
ret.valueAxis=coordSys.getAxis(seriesModel.dataDimToCoordDim(ret.valueDataDim)),
ret.baseAxis=coordSys.getOtherAxis(ret.valueAxis),ret.baseDataDim=seriesModel.coordDimToDataDim(ret.baseAxis.dim)[0]):(ret.baseAxis=seriesModel.getBaseAxis(),
ret.valueAxis=coordSys.getOtherAxis(ret.baseAxis),ret.baseDataDim=seriesModel.coordDimToDataDim(ret.baseAxis.dim)[0],
ret.valueDataDim=seriesModel.coordDimToDataDim(ret.valueAxis.dim)[0]),
ret},dataFilter=function(coordSys,item){return!(coordSys&&coordSys.containData&&item.coord&&!hasXOrY(item))||coordSys.containData(item.coord);
},dimValueGetter=function(item,dimName,dataIndex,dimIndex){return dimIndex<2?item.coord&&item.coord[dimIndex]:item.value;
},numCalculate=function(data,valueDataDim,type){if("average"===type){
var sum=0,count=0;return data.each(valueDataDim,function(val,idx){
isNaN(val)||(sum+=val,count++)},!0),sum/count}return data.getDataExtent(valueDataDim,!0)["max"===type?1:0];
};module.exports={dataTransform:dataTransform,dataFilter:dataFilter,
dimValueGetter:dimValueGetter,getAxisInfo:getAxisInfo,numCalculate:numCalculate
}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1).extendComponentView({
type:"marker",init:function(){this.markerGroupMap={}},render:function(markerModel,ecModel,api){
var markerGroupMap=this.markerGroupMap;for(var name in markerGroupMap)markerGroupMap.hasOwnProperty(name)&&(markerGroupMap[name].__keep=!1);
var markerModelKey=this.type+"Model";ecModel.eachSeries(function(seriesModel){
var markerModel=seriesModel[markerModelKey];markerModel&&this.renderSeries(seriesModel,markerModel,ecModel,api);
},this);for(var name in markerGroupMap)markerGroupMap.hasOwnProperty(name)&&!markerGroupMap[name].__keep&&this.group.remove(markerGroupMap[name].group);
},renderSeries:function(){}})},function(module,exports,__webpack_require__){
__webpack_require__(365),__webpack_require__(366),__webpack_require__(1).registerPreprocessor(function(opt){
opt.markLine=opt.markLine||{}})},function(module,exports,__webpack_require__){
module.exports=__webpack_require__(360).extend({type:"markLine",
defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],
precision:2,tooltip:{trigger:"item"},label:{normal:{show:!0,position:"end"
},emphasis:{show:!0}},lineStyle:{normal:{type:"dashed"},emphasis:{
width:3}},animationEasing:"linear"}})},function(module,exports,__webpack_require__){
function isInifinity(val){return!isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){
var otherDimIndex=1-dimIndex,dimName=coordSys.dimensions[dimIndex];
return isInifinity(fromCoord[otherDimIndex])&&isInifinity(toCoord[otherDimIndex])&&fromCoord[dimIndex]===toCoord[dimIndex]&&coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);
}function markLineFilter(coordSys,item){if("cartesian2d"===coordSys.type){
var fromCoord=item[0].coord,toCoord=item[1].coord;if(fromCoord&&toCoord&&(ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)||ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys)))return!0;
}return markerHelper.dataFilter(coordSys,item[0])&&markerHelper.dataFilter(coordSys,item[1]);
}function updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api){
var point,coordSys=seriesModel.coordinateSystem,itemModel=data.getItemModel(idx),xPx=numberUtil.parsePercent(itemModel.get("x"),api.getWidth()),yPx=numberUtil.parsePercent(itemModel.get("y"),api.getHeight());
if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(data.getValues(data.dimensions,idx));else{
var dims=coordSys.dimensions,x=data.get(dims[0],idx),y=data.get(dims[1],idx);
point=coordSys.dataToPoint([x,y])}if("cartesian2d"===coordSys.type){
var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y"),dims=coordSys.dimensions;
isInifinity(data.get(dims[0],idx))?point[0]=xAxis.toGlobalCoord(xAxis.getExtent()[isFrom?0:1]):isInifinity(data.get(dims[1],idx))&&(point[1]=yAxis.toGlobalCoord(yAxis.getExtent()[isFrom?0:1]));
}isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx)}else point=[xPx,yPx];
data.setItemLayout(idx,point)}function createList(coordSys,seriesModel,mlModel){
var coordDimsInfos;coordDimsInfos=coordSys?zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){
var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};
return info.name=coordDim,info}):[{name:"value",type:"float"}];
var fromData=new List(coordDimsInfos,mlModel),toData=new List(coordDimsInfos,mlModel),lineData=new List([],mlModel),optData=zrUtil.map(mlModel.get("data"),zrUtil.curry(markLineTransform,seriesModel,coordSys,mlModel));
coordSys&&(optData=zrUtil.filter(optData,zrUtil.curry(markLineFilter,coordSys)));
var dimValueGetter=coordSys?markerHelper.dimValueGetter:function(item){
return item.value};return fromData.initData(zrUtil.map(optData,function(item){
return item[0]}),null,dimValueGetter),toData.initData(zrUtil.map(optData,function(item){
return item[1]}),null,dimValueGetter),lineData.initData(zrUtil.map(optData,function(item){
return item[2]})),lineData.hasItemOption=!0,{from:fromData,to:toData,
line:lineData}}var zrUtil=__webpack_require__(4),List=__webpack_require__(98),numberUtil=__webpack_require__(7),markerHelper=__webpack_require__(362),LineDraw=__webpack_require__(202),markLineTransform=function(seriesModel,coordSys,mlModel,item){
var data=seriesModel.getData(),mlType=item.type;if(!zrUtil.isArray(item)&&("min"===mlType||"max"===mlType||"average"===mlType||null!=item.xAxis||null!=item.yAxis)){
var valueAxis,valueDataDim,value;if(null!=item.yAxis||null!=item.xAxis)valueDataDim=null!=item.yAxis?"y":"x",
valueAxis=coordSys.getAxis(valueDataDim),value=zrUtil.retrieve(item.yAxis,item.xAxis);else{
var axisInfo=markerHelper.getAxisInfo(item,data,coordSys,seriesModel);
valueDataDim=axisInfo.valueDataDim,valueAxis=axisInfo.valueAxis,
value=markerHelper.numCalculate(data,valueDataDim,mlType)}var valueIndex="x"===valueDataDim?0:1,baseIndex=1-valueIndex,mlFrom=zrUtil.clone(item),mlTo={};
mlFrom.type=null,mlFrom.coord=[],mlTo.coord=[],mlFrom.coord[baseIndex]=-(1/0),
mlTo.coord[baseIndex]=1/0;var precision=mlModel.get("precision");
precision>=0&&"number"==typeof value&&(value=+value.toFixed(precision)),
mlFrom.coord[valueIndex]=mlTo.coord[valueIndex]=value,item=[mlFrom,mlTo,{
type:mlType,valueIndex:item.valueIndex,value:value}]}return item=[markerHelper.dataTransform(seriesModel,item[0]),markerHelper.dataTransform(seriesModel,item[1]),zrUtil.extend({},item[2])],
item[2].type=item[2].type||"",zrUtil.merge(item[2],item[0]),zrUtil.merge(item[2],item[1]),
item};__webpack_require__(363).extend({type:"markLine",updateLayout:function(markLineModel,ecModel,api){
ecModel.eachSeries(function(seriesModel){var mlModel=seriesModel.markLineModel;
if(mlModel){var mlData=mlModel.getData(),fromData=mlModel.__from,toData=mlModel.__to;
fromData.each(function(idx){updateSingleMarkerEndLayout(fromData,idx,!0,seriesModel,api),
updateSingleMarkerEndLayout(toData,idx,!1,seriesModel,api)}),
mlData.each(function(idx){mlData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)]);
}),this.markerGroupMap[seriesModel.name].updateLayout()}},this);
},renderSeries:function(seriesModel,mlModel,ecModel,api){function updateDataVisualAndLayout(data,idx,isFrom){
var itemModel=data.getItemModel(idx);updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api),
data.setItemVisual(idx,{symbolSize:itemModel.get("symbolSize")||symbolSize[isFrom?0:1],
symbol:itemModel.get("symbol",!0)||symbolType[isFrom?0:1],color:itemModel.get("itemStyle.normal.color")||seriesData.getVisual("color")
})}var coordSys=seriesModel.coordinateSystem,seriesName=seriesModel.name,seriesData=seriesModel.getData(),lineDrawMap=this.markerGroupMap,lineDraw=lineDrawMap[seriesName];
lineDraw||(lineDraw=lineDrawMap[seriesName]=new LineDraw),this.group.add(lineDraw.group);
var mlData=createList(coordSys,seriesModel,mlModel),fromData=mlData.from,toData=mlData.to,lineData=mlData.line;
mlModel.__from=fromData,mlModel.__to=toData,mlModel.setData(lineData);
var symbolType=mlModel.get("symbol"),symbolSize=mlModel.get("symbolSize");
zrUtil.isArray(symbolType)||(symbolType=[symbolType,symbolType]),
"number"==typeof symbolSize&&(symbolSize=[symbolSize,symbolSize]),
mlData.from.each(function(idx){updateDataVisualAndLayout(fromData,idx,!0),
updateDataVisualAndLayout(toData,idx,!1)}),lineData.each(function(idx){
var lineColor=lineData.getItemModel(idx).get("lineStyle.normal.color");
lineData.setItemVisual(idx,{color:lineColor||fromData.getItemVisual(idx,"color")
}),lineData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)]),
lineData.setItemVisual(idx,{fromSymbolSize:fromData.getItemVisual(idx,"symbolSize"),
fromSymbol:fromData.getItemVisual(idx,"symbol"),toSymbolSize:toData.getItemVisual(idx,"symbolSize"),
toSymbol:toData.getItemVisual(idx,"symbol")})}),lineDraw.updateData(lineData),
mlData.line.eachItemGraphicEl(function(el,idx){el.traverse(function(child){
child.dataModel=mlModel})}),lineDraw.__keep=!0,lineDraw.group.silent=mlModel.get("silent")||seriesModel.get("silent");
}})},function(module,exports,__webpack_require__){__webpack_require__(368),
__webpack_require__(369),__webpack_require__(1).registerPreprocessor(function(opt){
opt.markArea=opt.markArea||{}})},function(module,exports,__webpack_require__){
module.exports=__webpack_require__(360).extend({type:"markArea",
defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,
label:{normal:{show:!0,position:"top"},emphasis:{show:!0,position:"top"
}},itemStyle:{normal:{borderWidth:0}}}})},function(module,exports,__webpack_require__){
function isInifinity(val){return!isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){
var otherDimIndex=1-dimIndex;return isInifinity(fromCoord[otherDimIndex])&&isInifinity(toCoord[otherDimIndex]);
}function markAreaFilter(coordSys,item){var fromCoord=item.coord[0],toCoord=item.coord[1];
return!("cartesian2d"!==coordSys.type||!fromCoord||!toCoord||!ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)&&!ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys))||(markerHelper.dataFilter(coordSys,{
coord:fromCoord,x:item.x0,y:item.y0})||markerHelper.dataFilter(coordSys,{
coord:toCoord,x:item.x1,y:item.y1}))}function getSingleMarkerEndPoint(data,idx,dims,seriesModel,api){
var point,coordSys=seriesModel.coordinateSystem,itemModel=data.getItemModel(idx),xPx=numberUtil.parsePercent(itemModel.get(dims[0]),api.getWidth()),yPx=numberUtil.parsePercent(itemModel.get(dims[1]),api.getHeight());
if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(data.getValues(dims,idx));else{
var x=data.get(dims[0],idx),y=data.get(dims[1],idx);point=coordSys.dataToPoint([x,y],!0);
}if("cartesian2d"===coordSys.type){var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y"),x=data.get(dims[0],idx),y=data.get(dims[1],idx);
isInifinity(x)?point[0]=xAxis.toGlobalCoord(xAxis.getExtent()["x0"===dims[0]?0:1]):isInifinity(y)&&(point[1]=yAxis.toGlobalCoord(yAxis.getExtent()["y0"===dims[1]?0:1]));
}isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx)}else point=[xPx,yPx];
return point}function createList(coordSys,seriesModel,maModel){
var coordDimsInfos,areaData,dims=["x0","y0","x1","y1"];coordSys?(coordDimsInfos=zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){
var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};
return info.name=coordDim,info}),areaData=new List(zrUtil.map(dims,function(dim,idx){
return{name:dim,type:coordDimsInfos[idx%2].type}}),maModel)):(coordDimsInfos=[{
name:"value",type:"float"}],areaData=new List(coordDimsInfos,maModel));
var optData=zrUtil.map(maModel.get("data"),zrUtil.curry(markAreaTransform,seriesModel,coordSys,maModel));
coordSys&&(optData=zrUtil.filter(optData,zrUtil.curry(markAreaFilter,coordSys)));
var dimValueGetter=coordSys?function(item,dimName,dataIndex,dimIndex){
return item.coord[Math.floor(dimIndex/2)][dimIndex%2]}:function(item){
return item.value};return areaData.initData(optData,null,dimValueGetter),
areaData.hasItemOption=!0,areaData}var zrUtil=__webpack_require__(4),List=__webpack_require__(98),numberUtil=__webpack_require__(7),graphic=__webpack_require__(43),colorUtil=__webpack_require__(39),markerHelper=__webpack_require__(362),markAreaTransform=function(seriesModel,coordSys,maModel,item){
var lt=markerHelper.dataTransform(seriesModel,item[0]),rb=markerHelper.dataTransform(seriesModel,item[1]),retrieve=zrUtil.retrieve,ltCoord=lt.coord,rbCoord=rb.coord;
ltCoord[0]=retrieve(ltCoord[0],-(1/0)),ltCoord[1]=retrieve(ltCoord[1],-(1/0)),
rbCoord[0]=retrieve(rbCoord[0],1/0),rbCoord[1]=retrieve(rbCoord[1],1/0);
var result=zrUtil.mergeAll([{},lt,rb]);return result.coord=[lt.coord,rb.coord],
result.x0=lt.x,result.y0=lt.y,result.x1=rb.x,result.y1=rb.y,result;
},dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];
__webpack_require__(363).extend({type:"markArea",updateLayout:function(markAreaModel,ecModel,api){
ecModel.eachSeries(function(seriesModel){var maModel=seriesModel.markAreaModel;
if(maModel){var areaData=maModel.getData();areaData.each(function(idx){
var points=zrUtil.map(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api);
});areaData.setItemLayout(idx,points);var el=areaData.getItemGraphicEl(idx);
el.setShape("points",points)})}},this)},renderSeries:function(seriesModel,maModel,ecModel,api){
var coordSys=seriesModel.coordinateSystem,seriesName=seriesModel.name,seriesData=seriesModel.getData(),areaGroupMap=this.markerGroupMap,polygonGroup=areaGroupMap[seriesName];
polygonGroup||(polygonGroup=areaGroupMap[seriesName]={group:new graphic.Group
}),this.group.add(polygonGroup.group),polygonGroup.__keep=!0;var areaData=createList(coordSys,seriesModel,maModel);
maModel.setData(areaData),areaData.each(function(idx){areaData.setItemLayout(idx,zrUtil.map(dimPermutations,function(dim){
return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api);
})),areaData.setItemVisual(idx,{color:seriesData.getVisual("color")
})}),areaData.diff(polygonGroup.__data).add(function(idx){var polygon=new graphic.Polygon({
shape:{points:areaData.getItemLayout(idx)}});areaData.setItemGraphicEl(idx,polygon),
polygonGroup.group.add(polygon)}).update(function(newIdx,oldIdx){
var polygon=polygonGroup.__data.getItemGraphicEl(oldIdx);graphic.updateProps(polygon,{
shape:{points:areaData.getItemLayout(newIdx)}},maModel,newIdx),
polygonGroup.group.add(polygon),areaData.setItemGraphicEl(newIdx,polygon);
}).remove(function(idx){var polygon=polygonGroup.__data.getItemGraphicEl(idx);
polygonGroup.group.remove(polygon)}).execute(),areaData.eachItemGraphicEl(function(polygon,idx){
var itemModel=areaData.getItemModel(idx),labelModel=itemModel.getModel("label.normal"),labelHoverModel=itemModel.getModel("label.emphasis"),color=areaData.getItemVisual(idx,"color");
polygon.useStyle(zrUtil.defaults(itemModel.getModel("itemStyle.normal").getItemStyle(),{
fill:colorUtil.modifyAlpha(color,.4),stroke:color})),polygon.hoverStyle=itemModel.getModel("itemStyle.normal").getItemStyle();
var defaultValue=areaData.getName(idx)||"",textColor=color||polygon.style.fill;
labelModel.getShallow("show")?(graphic.setText(polygon.style,labelModel,textColor),
polygon.style.text=zrUtil.retrieve(maModel.getFormattedLabel(idx,"normal"),defaultValue)):polygon.style.text="",
labelHoverModel.getShallow("show")?(graphic.setText(polygon.hoverStyle,labelHoverModel,textColor),
polygon.hoverStyle.text=zrUtil.retrieve(maModel.getFormattedLabel(idx,"emphasis"),defaultValue)):polygon.hoverStyle.text="",
graphic.setHoverStyle(polygon,{}),polygon.dataModel=maModel}),
polygonGroup.__data=areaData,polygonGroup.group.silent=maModel.get("silent")||seriesModel.get("silent");
}})},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);
echarts.registerPreprocessor(__webpack_require__(371)),__webpack_require__(372),
__webpack_require__(373),__webpack_require__(374),__webpack_require__(376);
},function(module,exports,__webpack_require__){function compatibleEC2(opt){
var type=opt.type,ec2Types={number:"value",time:"time"};if(ec2Types[type]&&(opt.axisType=ec2Types[type],
delete opt.type),transferItem(opt),has(opt,"controlPosition")){
var controlStyle=opt.controlStyle||(opt.controlStyle={});has(controlStyle,"position")||(controlStyle.position=opt.controlPosition),
"none"!==controlStyle.position||has(controlStyle,"show")||(controlStyle.show=!1,
delete controlStyle.position),delete opt.controlPosition}zrUtil.each(opt.data||[],function(dataItem){
zrUtil.isObject(dataItem)&&!zrUtil.isArray(dataItem)&&(!has(dataItem,"value")&&has(dataItem,"name")&&(dataItem.value=dataItem.name),
transferItem(dataItem))})}function transferItem(opt){var itemStyle=opt.itemStyle||(opt.itemStyle={}),itemStyleEmphasis=itemStyle.emphasis||(itemStyle.emphasis={}),label=opt.label||opt.label||{},labelNormal=label.normal||(label.normal={}),excludeLabelAttr={
normal:1,emphasis:1};zrUtil.each(label,function(value,name){excludeLabelAttr[name]||has(labelNormal,name)||(labelNormal[name]=value);
}),itemStyleEmphasis.label&&!has(label,"emphasis")&&(label.emphasis=itemStyleEmphasis.label,
delete itemStyleEmphasis.label)}function has(obj,attr){return obj.hasOwnProperty(attr);
}var zrUtil=__webpack_require__(4);module.exports=function(option){
var timelineOpt=option&&option.timeline;zrUtil.isArray(timelineOpt)||(timelineOpt=timelineOpt?[timelineOpt]:[]),
zrUtil.each(timelineOpt,function(opt){opt&&compatibleEC2(opt);
})}},function(module,exports,__webpack_require__){__webpack_require__(19).registerSubTypeDefaulter("timeline",function(){
return"slider"})},function(module,exports,__webpack_require__){
var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);
echarts.registerAction({type:"timelineChange",event:"timelineChanged",
update:"prepareAndUpdate"},function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");
return timelineModel&&null!=payload.currentIndex&&(timelineModel.setCurrentIndex(payload.currentIndex),
!timelineModel.get("loop",!0)&&timelineModel.isIndexMax()&&timelineModel.setPlayState(!1)),
ecModel.resetOption("timeline"),zrUtil.defaults({currentIndex:timelineModel.option.currentIndex
},payload)}),echarts.registerAction({type:"timelinePlayChange",
event:"timelinePlayChanged",update:"update"},function(payload,ecModel){
var timelineModel=ecModel.getComponent("timeline");timelineModel&&null!=payload.playState&&timelineModel.setPlayState(payload.playState);
})},function(module,exports,__webpack_require__){var TimelineModel=__webpack_require__(375),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),SliderTimelineModel=TimelineModel.extend({
type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",
borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,
tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{
show:!0,width:2,color:"#304654"},label:{position:"auto",normal:{
show:!0,interval:"auto",rotate:0,textStyle:{color:"#304654"}},
emphasis:{show:!0,textStyle:{color:"#c23531"}}},itemStyle:{normal:{
color:"#304654",borderWidth:1},emphasis:{color:"#c23531"}},checkpointStyle:{
symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",
animation:!0,animationDuration:300,animationEasing:"quinticInOut"
},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,
itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",
stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",
nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",
prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",
normal:{color:"#304654",borderColor:"#304654",borderWidth:1},
emphasis:{color:"#c23531",borderColor:"#c23531",borderWidth:2
}},data:[]}});zrUtil.mixin(SliderTimelineModel,modelUtil.dataFormatMixin),
module.exports=SliderTimelineModel},function(module,exports,__webpack_require__){
var ComponentModel=__webpack_require__(19),List=__webpack_require__(98),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),TimelineModel=ComponentModel.extend({
type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,
show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",
bottom:0,width:null,height:40,padding:5,controlPosition:"left",
autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,
itemStyle:{normal:{},emphasis:{}},label:{normal:{textStyle:{color:"#000"
}},emphasis:{}},data:[]},init:function(option,parentModel,ecModel){
this._data,this._names,this.mergeDefaultAndTheme(option,ecModel),
this._initData()},mergeOption:function(option){TimelineModel.superApply(this,"mergeOption",arguments),
this._initData()},setCurrentIndex:function(currentIndex){null==currentIndex&&(currentIndex=this.option.currentIndex);
var count=this._data.count();this.option.loop?currentIndex=(currentIndex%count+count)%count:(currentIndex>=count&&(currentIndex=count-1),
currentIndex<0&&(currentIndex=0)),this.option.currentIndex=currentIndex;
},getCurrentIndex:function(){return this.option.currentIndex},
isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1;
},setPlayState:function(state){this.option.autoPlay=!!state},
getPlayState:function(){return!!this.option.autoPlay},_initData:function(){
var thisOption=this.option,dataArr=thisOption.data||[],axisType=thisOption.axisType,names=this._names=[];
if("category"===axisType){var idxArr=[];zrUtil.each(dataArr,function(item,index){
var newItem,value=modelUtil.getDataItemValue(item);zrUtil.isObject(item)?(newItem=zrUtil.clone(item),
newItem.value=index):newItem=index,idxArr.push(newItem),zrUtil.isString(value)||null!=value&&!isNaN(value)||(value=""),
names.push(value+"")}),dataArr=idxArr}var dimType={category:"ordinal",
time:"time"}[axisType]||"number",data=this._data=new List([{name:"value",
type:dimType}],this);data.initData(dataArr,names)},getData:function(){
return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice();
}});module.exports=TimelineModel},function(module,exports,__webpack_require__){
function getViewRect(model,api){return layout.getLayoutRect(model.getBoxLayoutParams(),{
width:api.getWidth(),height:api.getHeight()},model.get("padding"));
}function makeIcon(timelineModel,objPath,rect,opts){var icon=graphic.makePath(timelineModel.get(objPath).replace(/^path:\/\//,""),zrUtil.clone(opts||{}),new BoundingRect(rect[0],rect[1],rect[2],rect[3]),"center");
return icon}function giveSymbol(hostModel,itemStyleModel,group,opt,symbol,callback){
var color=itemStyleModel.get("color");if(symbol)symbol.setColor(color),
group.add(symbol),callback&&callback.onUpdate(symbol);else{var symbolType=hostModel.get("symbol");
symbol=symbolUtil.createSymbol(symbolType,-1,-1,2,2,color),symbol.setStyle("strokeNoScale",!0),
group.add(symbol),callback&&callback.onCreate(symbol)}var itemStyle=itemStyleModel.getItemStyle(["color","symbol","symbolSize"]);
symbol.setStyle(itemStyle),opt=zrUtil.merge({rectHover:!0,z2:100
},opt,!0);var symbolSize=hostModel.get("symbolSize");symbolSize=symbolSize instanceof Array?symbolSize.slice():[+symbolSize,+symbolSize],
symbolSize[0]/=2,symbolSize[1]/=2,opt.scale=symbolSize;var symbolOffset=hostModel.get("symbolOffset");
if(symbolOffset){var pos=opt.position=opt.position||[0,0];pos[0]+=numberUtil.parsePercent(symbolOffset[0],symbolSize[0]),
pos[1]+=numberUtil.parsePercent(symbolOffset[1],symbolSize[1]);
}var symbolRotate=hostModel.get("symbolRotate");return opt.rotation=(symbolRotate||0)*Math.PI/180||0,
symbol.attr(opt),symbol.updateTransform(),symbol}function pointerMoveTo(pointer,dataIndex,axis,timelineModel,noAnimation){
if(!pointer.dragging){var pointerModel=timelineModel.getModel("checkpointStyle"),toCoord=axis.dataToCoord(timelineModel.getData().get(["value"],dataIndex));
noAnimation||!pointerModel.get("animation",!0)?pointer.attr({
position:[toCoord,0]}):(pointer.stopAnimation(!0),pointer.animateTo({
position:[toCoord,0]},pointerModel.get("animationDuration",!0),pointerModel.get("animationEasing",!0)));
}}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),layout=__webpack_require__(21),TimelineView=__webpack_require__(377),TimelineAxis=__webpack_require__(378),symbolUtil=__webpack_require__(107),axisHelper=__webpack_require__(115),BoundingRect=__webpack_require__(9),matrix=__webpack_require__(11),numberUtil=__webpack_require__(7),formatUtil=__webpack_require__(6),encodeHTML=formatUtil.encodeHTML,bind=zrUtil.bind,each=zrUtil.each,PI=Math.PI;
module.exports=TimelineView.extend({type:"timeline.slider",init:function(ecModel,api){
this.api=api,this._axis,this._viewRect,this._timer,this._currentPointer,
this._mainGroup,this._labelGroup},render:function(timelineModel,ecModel,api,payload){
if(this.model=timelineModel,this.api=api,this.ecModel=ecModel,
this.group.removeAll(),timelineModel.get("show",!0)){var layoutInfo=this._layout(timelineModel,api),mainGroup=this._createGroup("mainGroup"),labelGroup=this._createGroup("labelGroup"),axis=this._axis=this._createAxis(layoutInfo,timelineModel);
timelineModel.formatTooltip=function(dataIndex){return encodeHTML(axis.scale.getLabel(dataIndex));
},each(["AxisLine","AxisTick","Control","CurrentPointer"],function(name){
this["_render"+name](layoutInfo,mainGroup,axis,timelineModel);
},this),this._renderAxisLabel(layoutInfo,labelGroup,axis,timelineModel),
this._position(layoutInfo,timelineModel)}this._doPlayStop()},
remove:function(){this._clearTimer(),this.group.removeAll()},
dispose:function(){this._clearTimer()},_layout:function(timelineModel,api){
var labelPosOpt=timelineModel.get("label.normal.position"),orient=timelineModel.get("orient"),viewRect=getViewRect(timelineModel,api);
null==labelPosOpt||"auto"===labelPosOpt?labelPosOpt="horizontal"===orient?viewRect.y+viewRect.height/2<api.getHeight()/2?"-":"+":viewRect.x+viewRect.width/2<api.getWidth()/2?"+":"-":isNaN(labelPosOpt)&&(labelPosOpt={
horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}
}[orient][labelPosOpt]);var labelAlignMap={horizontal:"center",
vertical:labelPosOpt>=0||"+"===labelPosOpt?"left":"right"},labelBaselineMap={
horizontal:labelPosOpt>=0||"+"===labelPosOpt?"top":"bottom",vertical:"middle"
},rotationMap={horizontal:0,vertical:PI/2},mainLength="vertical"===orient?viewRect.height:viewRect.width,controlModel=timelineModel.getModel("controlStyle"),showControl=controlModel.get("show"),controlSize=showControl?controlModel.get("itemSize"):0,controlGap=showControl?controlModel.get("itemGap"):0,sizePlusGap=controlSize+controlGap,labelRotation=timelineModel.get("label.normal.rotate")||0;
labelRotation=labelRotation*PI/180;var playPosition,prevBtnPosition,nextBtnPosition,axisExtent,controlPosition=controlModel.get("position",!0),showControl=controlModel.get("show",!0),showPlayBtn=showControl&&controlModel.get("showPlayBtn",!0),showPrevBtn=showControl&&controlModel.get("showPrevBtn",!0),showNextBtn=showControl&&controlModel.get("showNextBtn",!0),xLeft=0,xRight=mainLength;
return"left"===controlPosition||"bottom"===controlPosition?(showPlayBtn&&(playPosition=[0,0],
xLeft+=sizePlusGap),showPrevBtn&&(prevBtnPosition=[xLeft,0],xLeft+=sizePlusGap),
showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)):(showPlayBtn&&(playPosition=[xRight-controlSize,0],
xRight-=sizePlusGap),showPrevBtn&&(prevBtnPosition=[0,0],xLeft+=sizePlusGap),
showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)),
axisExtent=[xLeft,xRight],timelineModel.get("inverse")&&axisExtent.reverse(),
{viewRect:viewRect,mainLength:mainLength,orient:orient,rotation:rotationMap[orient],
labelRotation:labelRotation,labelPosOpt:labelPosOpt,labelAlign:labelAlignMap[orient],
labelBaseline:labelBaselineMap[orient],playPosition:playPosition,
prevBtnPosition:prevBtnPosition,nextBtnPosition:nextBtnPosition,
axisExtent:axisExtent,controlSize:controlSize,controlGap:controlGap
}},_position:function(layoutInfo,timelineModel){function setOrigin(targetGroup){
var pos=targetGroup.position;targetGroup.origin=[viewBound[0][0]-pos[0],viewBound[1][0]-pos[1]];
}function getBound(rect){return[[rect.x,rect.x+rect.width],[rect.y,rect.y+rect.height]];
}function toBound(fromPos,from,to,dimIdx,boundIdx){fromPos[dimIdx]+=to[dimIdx][boundIdx]-from[dimIdx][boundIdx];
}var mainGroup=this._mainGroup,labelGroup=this._labelGroup,viewRect=layoutInfo.viewRect;
if("vertical"===layoutInfo.orient){var m=matrix.create(),rotateOriginX=viewRect.x,rotateOriginY=viewRect.y+viewRect.height;
matrix.translate(m,m,[-rotateOriginX,-rotateOriginY]),matrix.rotate(m,m,-PI/2),
matrix.translate(m,m,[rotateOriginX,rotateOriginY]),viewRect=viewRect.clone(),
viewRect.applyTransform(m)}var viewBound=getBound(viewRect),mainBound=getBound(mainGroup.getBoundingRect()),labelBound=getBound(labelGroup.getBoundingRect()),mainPosition=mainGroup.position,labelsPosition=labelGroup.position;
labelsPosition[0]=mainPosition[0]=viewBound[0][0];var labelPosOpt=layoutInfo.labelPosOpt;
if(isNaN(labelPosOpt)){var mainBoundIdx="+"===labelPosOpt?0:1;
toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx),toBound(labelsPosition,labelBound,viewBound,1,1-mainBoundIdx);
}else{var mainBoundIdx=labelPosOpt>=0?0:1;toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx),
labelsPosition[1]=mainPosition[1]+labelPosOpt}mainGroup.attr("position",mainPosition),
labelGroup.attr("position",labelsPosition),mainGroup.rotation=labelGroup.rotation=layoutInfo.rotation,
setOrigin(mainGroup),setOrigin(labelGroup)},_createAxis:function(layoutInfo,timelineModel){
var data=timelineModel.getData(),axisType=timelineModel.get("axisType"),scale=axisHelper.createScaleByModel(timelineModel,axisType),dataExtent=data.getDataExtent("value");
scale.setExtent(dataExtent[0],dataExtent[1]),this._customizeScale(scale,data),
scale.niceTicks();var axis=new TimelineAxis("value",scale,layoutInfo.axisExtent,axisType);
return axis.model=timelineModel,axis},_customizeScale:function(scale,data){
scale.getTicks=function(){return data.mapArray(["value"],function(value){
return value})},scale.getTicksLabels=function(){return zrUtil.map(this.getTicks(),scale.getLabel,scale);
}},_createGroup:function(name){var newGroup=this["_"+name]=new graphic.Group;
return this.group.add(newGroup),newGroup},_renderAxisLine:function(layoutInfo,group,axis,timelineModel){
var axisExtent=axis.getExtent();timelineModel.get("lineStyle.show")&&group.add(new graphic.Line({
shape:{x1:axisExtent[0],y1:0,x2:axisExtent[1],y2:0},style:zrUtil.extend({
lineCap:"round"},timelineModel.getModel("lineStyle").getLineStyle()),
silent:!0,z2:1}))},_renderAxisTick:function(layoutInfo,group,axis,timelineModel){
var data=timelineModel.getData(),ticks=axis.scale.getTicks();each(ticks,function(value,dataIndex){
var tickCoord=axis.dataToCoord(value),itemModel=data.getItemModel(dataIndex),itemStyleModel=itemModel.getModel("itemStyle.normal"),hoverStyleModel=itemModel.getModel("itemStyle.emphasis"),symbolOpt={
position:[tickCoord,0],onclick:bind(this._changeTimeline,this,dataIndex)
},el=giveSymbol(itemModel,itemStyleModel,group,symbolOpt);graphic.setHoverStyle(el,hoverStyleModel.getItemStyle()),
itemModel.get("tooltip")?(el.dataIndex=dataIndex,el.dataModel=timelineModel):el.dataIndex=el.dataModel=null;
},this)},_renderAxisLabel:function(layoutInfo,group,axis,timelineModel){
var labelModel=timelineModel.getModel("label.normal");if(labelModel.get("show")){
var data=timelineModel.getData(),ticks=axis.scale.getTicks(),labels=axisHelper.getFormattedLabels(axis,labelModel.get("formatter")),labelInterval=axis.getLabelInterval();
each(ticks,function(tick,dataIndex){if(!axis.isLabelIgnored(dataIndex,labelInterval)){
var itemModel=data.getItemModel(dataIndex),itemTextStyleModel=itemModel.getModel("label.normal.textStyle"),hoverTextStyleModel=itemModel.getModel("label.emphasis.textStyle"),tickCoord=axis.dataToCoord(tick),textEl=new graphic.Text({
style:{text:labels[dataIndex],textAlign:layoutInfo.labelAlign,
textVerticalAlign:layoutInfo.labelBaseline,textFont:itemTextStyleModel.getFont(),
fill:itemTextStyleModel.getTextColor()},position:[tickCoord,0],
rotation:layoutInfo.labelRotation-layoutInfo.rotation,onclick:bind(this._changeTimeline,this,dataIndex),
silent:!1});group.add(textEl),graphic.setHoverStyle(textEl,hoverTextStyleModel.getItemStyle());
}},this)}},_renderControl:function(layoutInfo,group,axis,timelineModel){
function makeBtn(position,iconPath,onclick,willRotate){if(position){
var opt={position:position,origin:[controlSize/2,0],rotation:willRotate?-rotation:0,
rectHover:!0,style:itemStyle,onclick:onclick},btn=makeIcon(timelineModel,iconPath,rect,opt);
group.add(btn),graphic.setHoverStyle(btn,hoverStyle)}}var controlSize=layoutInfo.controlSize,rotation=layoutInfo.rotation,itemStyle=timelineModel.getModel("controlStyle.normal").getItemStyle(),hoverStyle=timelineModel.getModel("controlStyle.emphasis").getItemStyle(),rect=[0,-controlSize/2,controlSize,controlSize],playState=timelineModel.getPlayState(),inverse=timelineModel.get("inverse",!0);
makeBtn(layoutInfo.nextBtnPosition,"controlStyle.nextIcon",bind(this._changeTimeline,this,inverse?"-":"+")),
makeBtn(layoutInfo.prevBtnPosition,"controlStyle.prevIcon",bind(this._changeTimeline,this,inverse?"+":"-")),
makeBtn(layoutInfo.playPosition,"controlStyle."+(playState?"stopIcon":"playIcon"),bind(this._handlePlayClick,this,!playState),!0);
},_renderCurrentPointer:function(layoutInfo,group,axis,timelineModel){
var data=timelineModel.getData(),currentIndex=timelineModel.getCurrentIndex(),pointerModel=data.getItemModel(currentIndex).getModel("checkpointStyle"),me=this,callback={
onCreate:function(pointer){pointer.draggable=!0,pointer.drift=bind(me._handlePointerDrag,me),
pointer.ondragend=bind(me._handlePointerDragend,me),pointerMoveTo(pointer,currentIndex,axis,timelineModel,!0);
},onUpdate:function(pointer){pointerMoveTo(pointer,currentIndex,axis,timelineModel);
}};this._currentPointer=giveSymbol(pointerModel,pointerModel,this._mainGroup,{},this._currentPointer,callback);
},_handlePlayClick:function(nextState){this._clearTimer(),this.api.dispatchAction({
type:"timelinePlayChange",playState:nextState,from:this.uid});
},_handlePointerDrag:function(dx,dy,e){this._clearTimer(),this._pointerChangeTimeline([e.offsetX,e.offsetY]);
},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0);
},_pointerChangeTimeline:function(mousePos,trigger){var toCoord=this._toAxisCoord(mousePos)[0],axis=this._axis,axisExtent=numberUtil.asc(axis.getExtent().slice());
toCoord>axisExtent[1]&&(toCoord=axisExtent[1]),toCoord<axisExtent[0]&&(toCoord=axisExtent[0]),
this._currentPointer.position[0]=toCoord,this._currentPointer.dirty();
var targetDataIndex=this._findNearestTick(toCoord),timelineModel=this.model;
(trigger||targetDataIndex!==timelineModel.getCurrentIndex()&&timelineModel.get("realtime"))&&this._changeTimeline(targetDataIndex);
},_doPlayStop:function(){function handleFrame(){var timelineModel=this.model;
this._changeTimeline(timelineModel.getCurrentIndex()+(timelineModel.get("rewind",!0)?-1:1));
}this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(bind(handleFrame,this),this.model.get("playInterval")));
},_toAxisCoord:function(vertex){var trans=this._mainGroup.getLocalTransform();
return graphic.applyTransform(vertex,trans,!0)},_findNearestTick:function(axisCoord){
var targetDataIndex,data=this.model.getData(),dist=1/0,axis=this._axis;
return data.each(["value"],function(value,dataIndex){var coord=axis.dataToCoord(value),d=Math.abs(coord-axisCoord);
d<dist&&(dist=d,targetDataIndex=dataIndex)}),targetDataIndex},
_clearTimer:function(){this._timer&&(clearTimeout(this._timer),
this._timer=null)},_changeTimeline:function(nextIndex){var currentIndex=this.model.getCurrentIndex();
"+"===nextIndex?nextIndex=currentIndex+1:"-"===nextIndex&&(nextIndex=currentIndex-1),
this.api.dispatchAction({type:"timelineChange",currentIndex:nextIndex,
from:this.uid})}})},function(module,exports,__webpack_require__){
var ComponentView=__webpack_require__(29);module.exports=ComponentView.extend({
type:"timeline"})},function(module,exports,__webpack_require__){
var zrUtil=__webpack_require__(4),Axis=__webpack_require__(124),axisHelper=__webpack_require__(115),TimelineAxis=function(dim,scale,coordExtent,axisType){
Axis.call(this,dim,scale,coordExtent),this.type=axisType||"value",
this._autoLabelInterval,this.model=null};TimelineAxis.prototype={
constructor:TimelineAxis,getLabelInterval:function(){var timelineModel=this.model,labelModel=timelineModel.getModel("label.normal"),labelInterval=labelModel.get("interval");
if(null!=labelInterval&&"auto"!=labelInterval)return labelInterval;
var labelInterval=this._autoLabelInterval;return labelInterval||(labelInterval=this._autoLabelInterval=axisHelper.getAxisLabelInterval(zrUtil.map(this.scale.getTicks(),this.dataToCoord,this),axisHelper.getFormattedLabels(this,labelModel.get("formatter")),labelModel.getModel("textStyle").getFont(),"horizontal"===timelineModel.get("orient"))),
labelInterval},isLabelIgnored:function(idx){if("category"===this.type){
var labelInterval=this.getLabelInterval();return"function"==typeof labelInterval&&!labelInterval(idx,this.scale.getLabel(idx))||idx%(labelInterval+1);
}}},zrUtil.inherits(TimelineAxis,Axis),module.exports=TimelineAxis;
},function(module,exports,__webpack_require__){__webpack_require__(380),
__webpack_require__(381),__webpack_require__(382),__webpack_require__(383),
__webpack_require__(384),__webpack_require__(385),__webpack_require__(390);
},function(module,exports,__webpack_require__){var featureManager=__webpack_require__(327),zrUtil=__webpack_require__(4),ToolboxModel=__webpack_require__(1).extendComponentModel({
type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},mergeDefaultAndTheme:function(option){
ToolboxModel.superApply(this,"mergeDefaultAndTheme",arguments),
zrUtil.each(this.option.feature,function(featureOpt,featureName){
var Feature=featureManager.get(featureName);Feature&&zrUtil.merge(featureOpt,Feature.defaultOption);
})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",
top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderWidth:0,
padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{normal:{
borderColor:"#666",color:"none"},emphasis:{borderColor:"#3E98C5"
}}}});module.exports=ToolboxModel},function(module,exports,__webpack_require__){
(function(process){function isUserFeatureName(featureName){return 0===featureName.indexOf("my");
}var featureManager=__webpack_require__(327),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),Model=__webpack_require__(12),DataDiffer=__webpack_require__(99),listComponentHelper=__webpack_require__(297),textContain=__webpack_require__(8);
module.exports=__webpack_require__(1).extendComponentView({type:"toolbox",
render:function(toolboxModel,ecModel,api,payload){function process(newIndex,oldIndex){
var feature,featureName=featureNames[newIndex],oldName=featureNames[oldIndex],featureOpt=featureOpts[featureName],featureModel=new Model(featureOpt,toolboxModel,toolboxModel.ecModel);
if(featureName&&!oldName){if(isUserFeatureName(featureName))feature={
model:featureModel,onclick:featureModel.option.onclick,featureName:featureName
};else{var Feature=featureManager.get(featureName);if(!Feature)return;
feature=new Feature(featureModel,ecModel,api)}features[featureName]=feature;
}else{if(feature=features[oldName],!feature)return;feature.model=featureModel,
feature.ecModel=ecModel,feature.api=api}return!featureName&&oldName?void(feature.dispose&&feature.dispose(ecModel,api)):!featureModel.get("show")||feature.unusable?void(feature.remove&&feature.remove(ecModel,api)):(createIconPaths(featureModel,feature,featureName),
featureModel.setIconStatus=function(iconName,status){var option=this.option,iconPaths=this.iconPaths;
option.iconStatus=option.iconStatus||{},option.iconStatus[iconName]=status,
iconPaths[iconName]&&iconPaths[iconName].trigger(status)},void(feature.render&&feature.render(featureModel,ecModel,api,payload)));
}function createIconPaths(featureModel,feature,featureName){var iconStyleModel=featureModel.getModel("iconStyle"),icons=feature.getIcons?feature.getIcons():featureModel.get("icon"),titles=featureModel.get("title")||{};
if("string"==typeof icons){var icon=icons,title=titles;icons={},
titles={},icons[featureName]=icon,titles[featureName]=title}var iconPaths=featureModel.iconPaths={};
zrUtil.each(icons,function(icon,iconName){var normalStyle=iconStyleModel.getModel("normal").getItemStyle(),hoverStyle=iconStyleModel.getModel("emphasis").getItemStyle(),style={
x:-itemSize/2,y:-itemSize/2,width:itemSize,height:itemSize},path=0===icon.indexOf("image://")?(style.image=icon.slice(8),
new graphic.Image({style:style})):graphic.makePath(icon.replace("path://",""),{
style:normalStyle,hoverStyle:hoverStyle,rectHover:!0},style,"center");
graphic.setHoverStyle(path),toolboxModel.get("showTitle")&&(path.__title=titles[iconName],
path.on("mouseover",function(){var hoverStyle=iconStyleModel.getModel("emphasis").getItemStyle();
path.setStyle({text:titles[iconName],textPosition:hoverStyle.textPosition||"bottom",
textFill:hoverStyle.fill||hoverStyle.stroke||"#000",textAlign:hoverStyle.textAlign||"center"
})}).on("mouseout",function(){path.setStyle({textFill:null})})),
path.trigger(featureModel.get("iconStatus."+iconName)||"normal"),
group.add(path),path.on("click",zrUtil.bind(feature.onclick,feature,ecModel,api,iconName)),
iconPaths[iconName]=path})}var group=this.group;if(group.removeAll(),
toolboxModel.get("show")){var itemSize=+toolboxModel.get("itemSize"),featureOpts=toolboxModel.get("feature")||{},features=this._features||(this._features={}),featureNames=[];
zrUtil.each(featureOpts,function(opt,name){featureNames.push(name);
}),new DataDiffer(this._featureNames||[],featureNames).add(process).update(process).remove(zrUtil.curry(process,null)).execute(),
this._featureNames=featureNames,listComponentHelper.layout(group,toolboxModel,api),
listComponentHelper.addBackground(group,toolboxModel),group.eachChild(function(icon){
var titleText=icon.__title,hoverStyle=icon.hoverStyle;if(hoverStyle&&titleText){
var rect=textContain.getBoundingRect(titleText,hoverStyle.font),offsetX=icon.position[0]+group.position[0],offsetY=icon.position[1]+group.position[1]+itemSize,needPutOnTop=!1;
offsetY+rect.height>api.getHeight()&&(hoverStyle.textPosition="top",
needPutOnTop=!0);var topOffset=needPutOnTop?-5-rect.height:itemSize+8;
offsetX+rect.width/2>api.getWidth()?(hoverStyle.textPosition=["100%",topOffset],
hoverStyle.textAlign="right"):offsetX-rect.width/2<0&&(hoverStyle.textPosition=[0,topOffset],
hoverStyle.textAlign="left")}})}},updateView:function(toolboxModel,ecModel,api,payload){
zrUtil.each(this._features,function(feature){feature.updateView&&feature.updateView(feature.model,ecModel,api,payload);
})},updateLayout:function(toolboxModel,ecModel,api,payload){zrUtil.each(this._features,function(feature){
feature.updateLayout&&feature.updateLayout(feature.model,ecModel,api,payload);
})},remove:function(ecModel,api){zrUtil.each(this._features,function(feature){
feature.remove&&feature.remove(ecModel,api)}),this.group.removeAll();
},dispose:function(ecModel,api){zrUtil.each(this._features,function(feature){
feature.dispose&&feature.dispose(ecModel,api)})}})}).call(exports,__webpack_require__(289));
},function(module,exports,__webpack_require__){function SaveAsImage(model){
this.model=model}var env=__webpack_require__(2);SaveAsImage.defaultOption={
show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",
title:"保存为图片",type:"png",name:"",excludeComponents:["toolbox"],
pixelRatio:1,lang:["右键另存为图片"]},SaveAsImage.prototype.unusable=!env.canvasSupported;
var proto=SaveAsImage.prototype;proto.onclick=function(ecModel,api){
var model=this.model,title=model.get("name")||ecModel.get("title.0.text")||"echarts",$a=document.createElement("a"),type=model.get("type",!0)||"png";
$a.download=title+"."+type,$a.target="_blank";var url=api.getConnectedDataURL({
type:type,backgroundColor:model.get("backgroundColor",!0)||ecModel.get("backgroundColor")||"#fff",
excludeComponents:model.get("excludeComponents"),pixelRatio:model.get("pixelRatio")
});if($a.href=url,"function"!=typeof MouseEvent||env.browser.ie||env.browser.edge){
var lang=model.get("lang"),html='<body style="margin:0;"><img src="'+url+'" style="max-width:100%;" title="'+(lang&&lang[0]||"")+'" /></body>',tab=window.open();
tab.document.write(html)}else{var evt=new MouseEvent("click",{
view:window,bubbles:!0,cancelable:!1});$a.dispatchEvent(evt)}
},__webpack_require__(327).register("saveAsImage",SaveAsImage),
module.exports=SaveAsImage},function(module,exports,__webpack_require__){
"use strict";function MagicType(model){this.model=model}var zrUtil=__webpack_require__(4);
MagicType.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",
bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",
stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",
tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"
},title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"
},option:{},seriesIndex:{}};var proto=MagicType.prototype;proto.getIcons=function(){
var model=this.model,availableIcons=model.get("icon"),icons={};
return zrUtil.each(model.get("type"),function(type){availableIcons[type]&&(icons[type]=availableIcons[type]);
}),icons};var seriesOptGenreator={line:function(seriesType,seriesId,seriesModel,model){
if("bar"===seriesType)return zrUtil.merge({id:seriesId,type:"line",
data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),
markLine:seriesModel.get("markLine")},model.get("option.line")||{},!0);
},bar:function(seriesType,seriesId,seriesModel,model){if("line"===seriesType)return zrUtil.merge({
id:seriesId,type:"bar",data:seriesModel.get("data"),stack:seriesModel.get("stack"),
markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")
},model.get("option.bar")||{},!0)},stack:function(seriesType,seriesId,seriesModel,model){
if("line"===seriesType||"bar"===seriesType)return zrUtil.merge({
id:seriesId,stack:"__ec_magicType_stack__"},model.get("option.stack")||{},!0);
},tiled:function(seriesType,seriesId,seriesModel,model){if("line"===seriesType||"bar"===seriesType)return zrUtil.merge({
id:seriesId,stack:""},model.get("option.tiled")||{},!0)}},radioTypes=[["line","bar"],["stack","tiled"]];
proto.onclick=function(ecModel,api,type){var model=this.model,seriesIndex=model.get("seriesIndex."+type);
if(seriesOptGenreator[type]){var newOption={series:[]},generateNewSeriesTypes=function(seriesModel){
var seriesType=seriesModel.subType,seriesId=seriesModel.id,newSeriesOpt=seriesOptGenreator[type](seriesType,seriesId,seriesModel,model);
newSeriesOpt&&(zrUtil.defaults(newSeriesOpt,seriesModel.option),
newOption.series.push(newSeriesOpt));var coordSys=seriesModel.coordinateSystem;
if(coordSys&&"cartesian2d"===coordSys.type&&("line"===type||"bar"===type)){
var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis){
var axisDim=categoryAxis.dim,axisType=axisDim+"Axis",axisModel=ecModel.queryComponents({
mainType:axisType,index:seriesModel.get(name+"Index"),id:seriesModel.get(name+"Id")
})[0],axisIndex=axisModel.componentIndex;newOption[axisType]=newOption[axisType]||[];
for(var i=0;i<=axisIndex;i++)newOption[axisType][axisIndex]=newOption[axisType][axisIndex]||{};
newOption[axisType][axisIndex].boundaryGap="bar"===type}}};zrUtil.each(radioTypes,function(radio){
zrUtil.indexOf(radio,type)>=0&&zrUtil.each(radio,function(item){
model.setIconStatus(item,"normal")})}),model.setIconStatus(type,"emphasis"),
ecModel.eachComponent({mainType:"series",query:null==seriesIndex?null:{
seriesIndex:seriesIndex}},generateNewSeriesTypes),api.dispatchAction({
type:"changeMagicType",currentType:type,newOption:newOption});
}};var echarts=__webpack_require__(1);echarts.registerAction({
type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"
},function(payload,ecModel){ecModel.mergeOption(payload.newOption);
}),__webpack_require__(327).register("magicType",MagicType),module.exports=MagicType;
},function(module,exports,__webpack_require__){function groupSeries(ecModel){
var seriesGroupByCategoryAxis={},otherSeries=[],meta=[];return ecModel.eachRawSeries(function(seriesModel){
var coordSys=seriesModel.coordinateSystem;if(!coordSys||"cartesian2d"!==coordSys.type&&"polar"!==coordSys.type)otherSeries.push(seriesModel);else{
var baseAxis=coordSys.getBaseAxis();if("category"===baseAxis.type){
var key=baseAxis.dim+"_"+baseAxis.index;seriesGroupByCategoryAxis[key]||(seriesGroupByCategoryAxis[key]={
categoryAxis:baseAxis,valueAxis:coordSys.getOtherAxis(baseAxis),
series:[]},meta.push({axisDim:baseAxis.dim,axisIndex:baseAxis.index
})),seriesGroupByCategoryAxis[key].series.push(seriesModel)}else otherSeries.push(seriesModel);
}}),{seriesGroupByCategoryAxis:seriesGroupByCategoryAxis,other:otherSeries,
meta:meta}}function assembleSeriesWithCategoryAxis(series){var tables=[];
return zrUtil.each(series,function(group,key){var categoryAxis=group.categoryAxis,valueAxis=group.valueAxis,valueAxisDim=valueAxis.dim,headers=[" "].concat(zrUtil.map(group.series,function(series){
return series.name})),columns=[categoryAxis.model.getCategories()];
zrUtil.each(group.series,function(series){columns.push(series.getRawData().mapArray(valueAxisDim,function(val){
return val}))});for(var lines=[headers.join(ITEM_SPLITER)],i=0;i<columns[0].length;i++){
for(var items=[],j=0;j<columns.length;j++)items.push(columns[j][i]);
lines.push(items.join(ITEM_SPLITER))}tables.push(lines.join("\n"));
}),tables.join("\n\n"+BLOCK_SPLITER+"\n\n")}function assembleOtherSeries(series){
return zrUtil.map(series,function(series){var data=series.getRawData(),lines=[series.name],vals=[];
return data.each(data.dimensions,function(){for(var argLen=arguments.length,dataIndex=arguments[argLen-1],name=data.getName(dataIndex),i=0;i<argLen-1;i++)vals[i]=arguments[i];
lines.push((name?name+ITEM_SPLITER:"")+vals.join(ITEM_SPLITER));
}),lines.join("\n")}).join("\n\n"+BLOCK_SPLITER+"\n\n")}function getContentFromModel(ecModel){
var result=groupSeries(ecModel);return{value:zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis),assembleOtherSeries(result.other)],function(str){
return str.replace(/[\n\t\s]/g,"")}).join("\n\n"+BLOCK_SPLITER+"\n\n"),
meta:result.meta}}function trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");
}function isTSVFormat(block){var firstLine=block.slice(0,block.indexOf("\n"));
if(firstLine.indexOf(ITEM_SPLITER)>=0)return!0}function parseTSVContents(tsv){
for(var tsvLines=tsv.split(/\n+/g),headers=trim(tsvLines.shift()).split(itemSplitRegex),categories=[],series=zrUtil.map(headers,function(header){
return{name:header,data:[]}}),i=0;i<tsvLines.length;i++){var items=trim(tsvLines[i]).split(itemSplitRegex);
categories.push(items.shift());for(var j=0;j<items.length;j++)series[j]&&(series[j].data[i]=items[j]);
}return{series:series,categories:categories}}function parseListContents(str){
for(var lines=str.split(/\n+/g),seriesName=trim(lines.shift()),data=[],i=0;i<lines.length;i++){
var value,items=trim(lines[i]).split(itemSplitRegex),name="",hasName=!1;
isNaN(items[0])?(hasName=!0,name=items[0],items=items.slice(1),
data[i]={name:name,value:[]},value=data[i].value):value=data[i]=[];
for(var j=0;j<items.length;j++)value.push(+items[j]);1===value.length&&(hasName?data[i].value=value[0]:data[i]=value[0]);
}return{name:seriesName,data:data}}function parseContents(str,blockMetaList){
var blocks=str.split(new RegExp("\n*"+BLOCK_SPLITER+"\n*","g")),newOption={
series:[]};return zrUtil.each(blocks,function(block,idx){if(isTSVFormat(block)){
var result=parseTSVContents(block),blockMeta=blockMetaList[idx],axisKey=blockMeta.axisDim+"Axis";
blockMeta&&(newOption[axisKey]=newOption[axisKey]||[],newOption[axisKey][blockMeta.axisIndex]={
data:result.categories},newOption.series=newOption.series.concat(result.series));
}else{var result=parseListContents(block);newOption.series.push(result);
}}),newOption}function DataView(model){this._dom=null,this.model=model;
}function tryMergeDataOption(newData,originalData){return zrUtil.map(newData,function(newVal,idx){
var original=originalData&&originalData[idx];return zrUtil.isObject(original)&&!zrUtil.isArray(original)?(zrUtil.isObject(newVal)&&!zrUtil.isArray(newVal)&&(newVal=newVal.value),
zrUtil.defaults({value:newVal},original)):newVal})}var zrUtil=__webpack_require__(4),eventTool=__webpack_require__(88),BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="\t",itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");
DataView.defaultOption={show:!0,readOnly:!1,optionToContent:null,
contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",
title:"数据视图",lang:["数据视图","关闭","刷新"],backgroundColor:"#fff",textColor:"#000",
textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",
buttonTextColor:"#fff"},DataView.prototype.onclick=function(ecModel,api){
function close(){container.removeChild(root),self._dom=null}var container=api.getDom(),model=this.model;
this._dom&&container.removeChild(this._dom);var root=document.createElement("div");
root.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",
root.style.backgroundColor=model.get("backgroundColor")||"#fff";
var header=document.createElement("h4"),lang=model.get("lang")||[];
header.innerHTML=lang[0]||model.get("title"),header.style.cssText="margin: 10px 20px;",
header.style.color=model.get("textColor");var viewMain=document.createElement("div"),textarea=document.createElement("textarea");
viewMain.style.cssText="display:block;width:100%;overflow:hidden;";
var optionToContent=model.get("optionToContent"),contentToOption=model.get("contentToOption"),result=getContentFromModel(ecModel);
if("function"==typeof optionToContent){var htmlOrDom=optionToContent(api.getOption());
"string"==typeof htmlOrDom?viewMain.innerHTML=htmlOrDom:zrUtil.isDom(htmlOrDom)&&viewMain.appendChild(htmlOrDom);
}else viewMain.appendChild(textarea),textarea.readOnly=model.get("readOnly"),
textarea.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",
textarea.style.color=model.get("textColor"),textarea.style.borderColor=model.get("textareaBorderColor"),
textarea.style.backgroundColor=model.get("textareaColor"),textarea.value=result.value;
var blockMetaList=result.meta,buttonContainer=document.createElement("div");
buttonContainer.style.cssText="position:absolute;bottom:0;left:0;right:0;";
var buttonStyle="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",closeButton=document.createElement("div"),refreshButton=document.createElement("div");
buttonStyle+=";background-color:"+model.get("buttonColor"),buttonStyle+=";color:"+model.get("buttonTextColor");
var self=this;eventTool.addEventListener(closeButton,"click",close),
eventTool.addEventListener(refreshButton,"click",function(){var newOption;
try{newOption="function"==typeof contentToOption?contentToOption(viewMain,api.getOption()):parseContents(textarea.value,blockMetaList);
}catch(e){throw close(),new Error("Data view format error "+e);
}newOption&&api.dispatchAction({type:"changeDataView",newOption:newOption
}),close()}),closeButton.innerHTML=lang[1],refreshButton.innerHTML=lang[2],
refreshButton.style.cssText=buttonStyle,closeButton.style.cssText=buttonStyle,
!model.get("readOnly")&&buttonContainer.appendChild(refreshButton),
buttonContainer.appendChild(closeButton),eventTool.addEventListener(textarea,"keydown",function(e){
if(9===(e.keyCode||e.which)){var val=this.value,start=this.selectionStart,end=this.selectionEnd;
this.value=val.substring(0,start)+ITEM_SPLITER+val.substring(end),
this.selectionStart=this.selectionEnd=start+1,eventTool.stop(e);
}}),root.appendChild(header),root.appendChild(viewMain),root.appendChild(buttonContainer),
viewMain.style.height=container.clientHeight-80+"px",container.appendChild(root),
this._dom=root},DataView.prototype.remove=function(ecModel,api){
this._dom&&api.getDom().removeChild(this._dom)},DataView.prototype.dispose=function(ecModel,api){
this.remove(ecModel,api)},__webpack_require__(327).register("dataView",DataView),
__webpack_require__(1).registerAction({type:"changeDataView",
event:"dataViewChanged",update:"prepareAndUpdate"},function(payload,ecModel){
var newSeriesOptList=[];zrUtil.each(payload.newOption.series,function(seriesOpt){
var seriesModel=ecModel.getSeriesByName(seriesOpt.name)[0];if(seriesModel){
var originalData=seriesModel.get("data");newSeriesOptList.push({
name:seriesOpt.name,data:tryMergeDataOption(seriesOpt.data,originalData)
})}else newSeriesOptList.push(zrUtil.extend({type:"scatter"},seriesOpt));
}),ecModel.mergeOption(zrUtil.defaults({series:newSeriesOptList
},payload.newOption))}),module.exports=DataView},function(module,exports,__webpack_require__){
"use strict";function DataZoom(model,ecModel,api){(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this)).mount(),
this._isZoomActive}function retrieveAxisSetting(option){var setting={};
return zrUtil.each(["xAxisIndex","yAxisIndex"],function(name){
setting[name]=option[name],null==setting[name]&&(setting[name]="all"),
(setting[name]===!1||"none"===setting[name])&&(setting[name]=[]);
}),setting}function updateBackBtnStatus(featureModel,ecModel){
featureModel.setIconStatus("back",history.count(ecModel)>1?"emphasis":"normal");
}function updateZoomBtnStatus(featureModel,ecModel,view,payload){
var zoomActive=view._isZoomActive;payload&&"takeGlobalCursor"===payload.type&&(zoomActive="dataZoomSelect"===payload.key&&payload.dataZoomSelectActive),
view._isZoomActive=zoomActive,featureModel.setIconStatus("zoom",zoomActive?"emphasis":"normal");
var coordInfoList=brushHelper.makeCoordInfoList(retrieveAxisSetting(featureModel.option),ecModel),brushType=coordInfoList.xAxisHas&&!coordInfoList.yAxisHas?"lineX":!coordInfoList.xAxisHas&&coordInfoList.yAxisHas?"lineY":"rect";
view._brushController.setPanels(brushHelper.makePanelOpts(coordInfoList)).enableBrush(!!zoomActive&&{
brushType:brushType,brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"
}})}var zrUtil=__webpack_require__(4),BrushController=__webpack_require__(236),brushHelper=__webpack_require__(322),history=__webpack_require__(386),each=zrUtil.each;
__webpack_require__(387);var DATA_ZOOM_ID_BASE="\0_ec_\0toolbox-dataZoom_";
DataZoom.defaultOption={show:!0,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",
back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"
},title:{zoom:"区域缩放",back:"区域缩放还原"}};var proto=DataZoom.prototype;
proto.render=function(featureModel,ecModel,api,payload){this.model=featureModel,
this.ecModel=ecModel,this.api=api,updateZoomBtnStatus(featureModel,ecModel,this,payload),
updateBackBtnStatus(featureModel,ecModel)},proto.onclick=function(ecModel,api,type){
handlers[type].call(this)},proto.remove=function(ecModel,api){
this._brushController.unmount()},proto.dispose=function(ecModel,api){
this._brushController.dispose()};var handlers={zoom:function(){
var nextActive=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",
key:"dataZoomSelect",dataZoomSelectActive:nextActive})},back:function(){
this._dispatchZoomAction(history.pop(this.ecModel))}};proto._onBrush=function(areas,opt){
function setBatch(axisName,minMax,coordInfo){var dataZoomModel=findDataZoom(axisName,coordInfo[axisName],ecModel);
dataZoomModel&&(snapshot[dataZoomModel.id]={dataZoomId:dataZoomModel.id,
startValue:minMax[0],endValue:minMax[1]})}function findDataZoom(axisName,axisModel,ecModel){
var dataZoomModel;return ecModel.eachComponent({mainType:"dataZoom",
subType:"select"},function(dzModel,dataZoomIndex){var axisIndex=dzModel.get(axisName+"Index");
null!=axisIndex&&ecModel.getComponent(axisName,axisIndex)===axisModel&&(dataZoomModel=dzModel);
}),dataZoomModel}if(opt.isEnd&&areas.length){var snapshot={},ecModel=this.ecModel;
this._brushController.updateCovers([]);var coordInfoList=brushHelper.makeCoordInfoList(retrieveAxisSetting(this.model.option),ecModel),rangesCoordInfoList=[];
brushHelper.parseOutputRanges(areas,coordInfoList,ecModel,rangesCoordInfoList);
var area=areas[0],coordInfo=rangesCoordInfoList[0],coordRange=area.coordRange,brushType=area.brushType;
if(coordInfo&&coordRange)if("rect"===brushType)setBatch("xAxis",coordRange[0],coordInfo),
setBatch("yAxis",coordRange[1],coordInfo);else{var axisNames={
lineX:"xAxis",lineY:"yAxis"};setBatch(axisNames[brushType],coordRange,coordInfo);
}history.push(ecModel,snapshot),this._dispatchZoomAction(snapshot);
}},proto._dispatchZoomAction=function(snapshot){var batch=[];each(snapshot,function(batchItem,dataZoomId){
batch.push(zrUtil.clone(batchItem))}),batch.length&&this.api.dispatchAction({
type:"dataZoom",from:this.uid,batch:batch})},__webpack_require__(327).register("dataZoom",DataZoom),
__webpack_require__(1).registerPreprocessor(function(option){
function addForAxis(axisName,dataZoomOpt){if(dataZoomOpt){var axisIndicesName=axisName+"Index",givenAxisIndices=dataZoomOpt[axisIndicesName];
null==givenAxisIndices||"all"==givenAxisIndices||zrUtil.isArray(givenAxisIndices)||(givenAxisIndices=givenAxisIndices===!1||"none"===givenAxisIndices?[]:[givenAxisIndices]),
forEachComponent(axisName,function(axisOpt,axisIndex){if(null==givenAxisIndices||"all"==givenAxisIndices||zrUtil.indexOf(givenAxisIndices,axisIndex)!==-1){
var newOpt={type:"select",$fromToolbox:!0,id:DATA_ZOOM_ID_BASE+axisName+axisIndex
};newOpt[axisIndicesName]=axisIndex,dataZoomOpts.push(newOpt);
}})}}function forEachComponent(mainType,cb){var opts=option[mainType];
zrUtil.isArray(opts)||(opts=opts?[opts]:[]),each(opts,cb)}if(option){
var dataZoomOpts=option.dataZoom||(option.dataZoom=[]);zrUtil.isArray(dataZoomOpts)||(option.dataZoom=dataZoomOpts=[dataZoomOpts]);
var toolboxOpt=option.toolbox;if(toolboxOpt&&(zrUtil.isArray(toolboxOpt)&&(toolboxOpt=toolboxOpt[0]),
toolboxOpt&&toolboxOpt.feature)){var dataZoomOpt=toolboxOpt.feature.dataZoom;
addForAxis("xAxis",dataZoomOpt),addForAxis("yAxis",dataZoomOpt);
}}}),module.exports=DataZoom},function(module,exports,__webpack_require__){
function giveStore(ecModel){var store=ecModel[ATTR];return store||(store=ecModel[ATTR]=[{}]),
store}var zrUtil=__webpack_require__(4),each=zrUtil.each,ATTR="\0_ec_hist_store",history={
push:function(ecModel,newSnapshot){var store=giveStore(ecModel);
each(newSnapshot,function(batchItem,dataZoomId){for(var i=store.length-1;i>=0;i--){
var snapshot=store[i];if(snapshot[dataZoomId])break}if(i<0){var dataZoomModel=ecModel.queryComponents({
mainType:"dataZoom",subType:"select",id:dataZoomId})[0];if(dataZoomModel){
var percentRange=dataZoomModel.getPercentRange();store[0][dataZoomId]={
dataZoomId:dataZoomId,start:percentRange[0],end:percentRange[1]
}}}}),store.push(newSnapshot)},pop:function(ecModel){var store=giveStore(ecModel),head=store[store.length-1];
store.length>1&&store.pop();var snapshot={};return each(head,function(batchItem,dataZoomId){
for(var i=store.length-1;i>=0;i--){var batchItem=store[i][dataZoomId];
if(batchItem){snapshot[dataZoomId]=batchItem;break}}}),snapshot;
},clear:function(ecModel){ecModel[ATTR]=null},count:function(ecModel){
return giveStore(ecModel).length}};module.exports=history},function(module,exports,__webpack_require__){
__webpack_require__(330),__webpack_require__(331),__webpack_require__(334),
__webpack_require__(388),__webpack_require__(389),__webpack_require__(341),
__webpack_require__(342)},function(module,exports,__webpack_require__){
var DataZoomModel=__webpack_require__(331);module.exports=DataZoomModel.extend({
type:"dataZoom.select"})},function(module,exports,__webpack_require__){
module.exports=__webpack_require__(334).extend({type:"dataZoom.select"
})},function(module,exports,__webpack_require__){"use strict";
function Restore(model){this.model=model}var history=__webpack_require__(386);
Restore.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",
title:"还原"};var proto=Restore.prototype;proto.onclick=function(ecModel,api,type){
history.clear(ecModel),api.dispatchAction({type:"restore",from:this.uid
})},__webpack_require__(327).register("restore",Restore),__webpack_require__(1).registerAction({
type:"restore",event:"restore",update:"prepareAndUpdate"},function(payload,ecModel){
ecModel.resetOption("recreate")}),module.exports=Restore},function(module,exports,__webpack_require__){
__webpack_require__(392),__webpack_require__(82).registerPainter("vml",__webpack_require__(394));
},function(module,exports,__webpack_require__){if(!__webpack_require__(2).canvasSupported){
var vec2=__webpack_require__(10),BoundingRect=__webpack_require__(9),CMD=__webpack_require__(49).CMD,colorTool=__webpack_require__(39),textContain=__webpack_require__(8),RectText=__webpack_require__(48),Displayable=__webpack_require__(46),ZImage=__webpack_require__(61),Text=__webpack_require__(63),Path=__webpack_require__(45),Gradient=__webpack_require__(79),vmlCore=__webpack_require__(393),round=Math.round,sqrt=Math.sqrt,abs=Math.abs,cos=Math.cos,sin=Math.sin,mathMax=Math.max,applyTransform=vec2.applyTransform,comma=",",imageTransformPrefix="progid:DXImageTransform.Microsoft",Z=21600,Z2=Z/2,ZLEVEL_BASE=1e5,Z_BASE=1e3,initRootElStyle=function(el){
el.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",
el.coordsize=Z+","+Z,el.coordorigin="0,0"},encodeHtmlAttribute=function(s){
return String(s).replace(/&/g,"&amp;").replace(/"/g,"&quot;");
},rgb2Str=function(r,g,b){return"rgb("+[r,g,b].join(",")+")"},append=function(parent,child){
child&&parent&&child.parentNode!==parent&&parent.appendChild(child);
},remove=function(parent,child){child&&parent&&child.parentNode===parent&&parent.removeChild(child);
},getZIndex=function(zlevel,z,z2){return(parseFloat(zlevel)||0)*ZLEVEL_BASE+(parseFloat(z)||0)*Z_BASE+z2;
},parsePercent=function(value,maxValue){return"string"==typeof value?value.lastIndexOf("%")>=0?parseFloat(value)/100*maxValue:parseFloat(value):value;
},setColorAndOpacity=function(el,color,opacity){var colorArr=colorTool.parse(color);
opacity=+opacity,isNaN(opacity)&&(opacity=1),colorArr&&(el.color=rgb2Str(colorArr[0],colorArr[1],colorArr[2]),
el.opacity=opacity*colorArr[3])},getColorAndAlpha=function(color){
var colorArr=colorTool.parse(color);return[rgb2Str(colorArr[0],colorArr[1],colorArr[2]),colorArr[3]];
},updateFillNode=function(el,style,zrEl){var fill=style.fill;if(null!=fill)if(fill instanceof Gradient){
var gradientType,angle=0,focus=[0,0],shift=0,expansion=1,rect=zrEl.getBoundingRect(),rectWidth=rect.width,rectHeight=rect.height;
if("linear"===fill.type){gradientType="gradient";var transform=zrEl.transform,p0=[fill.x*rectWidth,fill.y*rectHeight],p1=[fill.x2*rectWidth,fill.y2*rectHeight];
transform&&(applyTransform(p0,p0,transform),applyTransform(p1,p1,transform));
var dx=p1[0]-p0[0],dy=p1[1]-p0[1];angle=180*Math.atan2(dx,dy)/Math.PI,
angle<0&&(angle+=360),angle<1e-6&&(angle=0)}else{gradientType="gradientradial";
var p0=[fill.x*rectWidth,fill.y*rectHeight],transform=zrEl.transform,scale=zrEl.scale,width=rectWidth,height=rectHeight;
focus=[(p0[0]-rect.x)/width,(p0[1]-rect.y)/height],transform&&applyTransform(p0,p0,transform),
width/=scale[0]*Z,height/=scale[1]*Z;var dimension=mathMax(width,height);
shift=0/dimension,expansion=2*fill.r/dimension-shift}var stops=fill.colorStops.slice();
stops.sort(function(cs1,cs2){return cs1.offset-cs2.offset});for(var length=stops.length,colorAndAlphaList=[],colors=[],i=0;i<length;i++){
var stop=stops[i],colorAndAlpha=getColorAndAlpha(stop.color);colors.push(stop.offset*expansion+shift+" "+colorAndAlpha[0]),
0!==i&&i!==length-1||colorAndAlphaList.push(colorAndAlpha)}if(length>=2){
var color1=colorAndAlphaList[0][0],color2=colorAndAlphaList[1][0],opacity1=colorAndAlphaList[0][1]*style.opacity,opacity2=colorAndAlphaList[1][1]*style.opacity;
el.type=gradientType,el.method="none",el.focus="100%",el.angle=angle,
el.color=color1,el.color2=color2,el.colors=colors.join(","),el.opacity=opacity2,
el.opacity2=opacity1}"radial"===gradientType&&(el.focusposition=focus.join(","));
}else setColorAndOpacity(el,fill,style.opacity)},updateStrokeNode=function(el,style){
null!=style.lineDash&&(el.dashstyle=style.lineDash.join(" ")),
null==style.stroke||style.stroke instanceof Gradient||setColorAndOpacity(el,style.stroke,style.opacity);
},updateFillAndStroke=function(vmlEl,type,style,zrEl){var isFill="fill"==type,el=vmlEl.getElementsByTagName(type)[0];
null!=style[type]&&"none"!==style[type]&&(isFill||!isFill&&style.lineWidth)?(vmlEl[isFill?"filled":"stroked"]="true",
style[type]instanceof Gradient&&remove(vmlEl,el),el||(el=vmlCore.createNode(type)),
isFill?updateFillNode(el,style,zrEl):updateStrokeNode(el,style),
append(vmlEl,el)):(vmlEl[isFill?"filled":"stroked"]="false",remove(vmlEl,el));
},points=[[],[],[]],pathDataToString=function(data,m){var nPoint,cmdStr,cmd,i,xi,yi,M=CMD.M,C=CMD.C,L=CMD.L,A=CMD.A,Q=CMD.Q,str=[];
for(i=0;i<data.length;){switch(cmd=data[i++],cmdStr="",nPoint=0,
cmd){case M:cmdStr=" m ",nPoint=1,xi=data[i++],yi=data[i++],points[0][0]=xi,
points[0][1]=yi;break;case L:cmdStr=" l ",nPoint=1,xi=data[i++],
yi=data[i++],points[0][0]=xi,points[0][1]=yi;break;case Q:case C:
cmdStr=" c ",nPoint=3;var x3,y3,x1=data[i++],y1=data[i++],x2=data[i++],y2=data[i++];
cmd===Q?(x3=x2,y3=y2,x2=(x2+2*x1)/3,y2=(y2+2*y1)/3,x1=(xi+2*x1)/3,
y1=(yi+2*y1)/3):(x3=data[i++],y3=data[i++]),points[0][0]=x1,points[0][1]=y1,
points[1][0]=x2,points[1][1]=y2,points[2][0]=x3,points[2][1]=y3,
xi=x3,yi=y3;break;case A:var x=0,y=0,sx=1,sy=1,angle=0;m&&(x=m[4],
y=m[5],sx=sqrt(m[0]*m[0]+m[1]*m[1]),sy=sqrt(m[2]*m[2]+m[3]*m[3]),
angle=Math.atan2(-m[1]/sy,m[0]/sx));var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++]+angle,endAngle=data[i++]+startAngle+angle;
i++;var clockwise=data[i++],x0=cx+cos(startAngle)*rx,y0=cy+sin(startAngle)*ry,x1=cx+cos(endAngle)*rx,y1=cy+sin(endAngle)*ry,type=clockwise?" wa ":" at ";
Math.abs(x0-x1)<1e-4&&(Math.abs(endAngle-startAngle)>.01?clockwise&&(x0+=270/Z):Math.abs(y0-cy)<1e-4?clockwise&&x0<cx||!clockwise&&x0>cx?y1-=270/Z:y1+=270/Z:clockwise&&y0<cy||!clockwise&&y0>cy?x1+=270/Z:x1-=270/Z),
str.push(type,round(((cx-rx)*sx+x)*Z-Z2),comma,round(((cy-ry)*sy+y)*Z-Z2),comma,round(((cx+rx)*sx+x)*Z-Z2),comma,round(((cy+ry)*sy+y)*Z-Z2),comma,round((x0*sx+x)*Z-Z2),comma,round((y0*sy+y)*Z-Z2),comma,round((x1*sx+x)*Z-Z2),comma,round((y1*sy+y)*Z-Z2)),
xi=x1,yi=y1;break;case CMD.R:var p0=points[0],p1=points[1];p0[0]=data[i++],
p0[1]=data[i++],p1[0]=p0[0]+data[i++],p1[1]=p0[1]+data[i++],m&&(applyTransform(p0,p0,m),
applyTransform(p1,p1,m)),p0[0]=round(p0[0]*Z-Z2),p1[0]=round(p1[0]*Z-Z2),
p0[1]=round(p0[1]*Z-Z2),p1[1]=round(p1[1]*Z-Z2),str.push(" m ",p0[0],comma,p0[1]," l ",p1[0],comma,p0[1]," l ",p1[0],comma,p1[1]," l ",p0[0],comma,p1[1]);
break;case CMD.Z:str.push(" x ")}if(nPoint>0){str.push(cmdStr);
for(var k=0;k<nPoint;k++){var p=points[k];m&&applyTransform(p,p,m),
str.push(round(p[0]*Z-Z2),comma,round(p[1]*Z-Z2),k<nPoint-1?comma:"");
}}}return str.join("")};Path.prototype.brushVML=function(vmlRoot){
var style=this.style,vmlEl=this._vmlEl;vmlEl||(vmlEl=vmlCore.createNode("shape"),
initRootElStyle(vmlEl),this._vmlEl=vmlEl),updateFillAndStroke(vmlEl,"fill",style,this),
updateFillAndStroke(vmlEl,"stroke",style,this);var m=this.transform,needTransform=null!=m,strokeEl=vmlEl.getElementsByTagName("stroke")[0];
if(strokeEl){var lineWidth=style.lineWidth;if(needTransform&&!style.strokeNoScale){
var det=m[0]*m[3]-m[1]*m[2];lineWidth*=sqrt(abs(det))}strokeEl.weight=lineWidth+"px";
}var path=this.path;this.__dirtyPath&&(path.beginPath(),this.buildPath(path,this.shape),
path.toStatic(),this.__dirtyPath=!1),vmlEl.path=pathDataToString(path.data,this.transform),
vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),append(vmlRoot,vmlEl),
null!=style.text?this.drawRectText(vmlRoot,this.getBoundingRect()):this.removeRectText(vmlRoot);
},Path.prototype.onRemove=function(vmlRoot){remove(vmlRoot,this._vmlEl),
this.removeRectText(vmlRoot)},Path.prototype.onAdd=function(vmlRoot){
append(vmlRoot,this._vmlEl),this.appendRectText(vmlRoot)};var isImage=function(img){
return"object"==typeof img&&img.tagName&&"IMG"===img.tagName.toUpperCase();
};ZImage.prototype.brushVML=function(vmlRoot){var ow,oh,style=this.style,image=style.image;
if(isImage(image)){var src=image.src;if(src===this._imageSrc)ow=this._imageWidth,
oh=this._imageHeight;else{var imageRuntimeStyle=image.runtimeStyle,oldRuntimeWidth=imageRuntimeStyle.width,oldRuntimeHeight=imageRuntimeStyle.height;
imageRuntimeStyle.width="auto",imageRuntimeStyle.height="auto",
ow=image.width,oh=image.height,imageRuntimeStyle.width=oldRuntimeWidth,
imageRuntimeStyle.height=oldRuntimeHeight,this._imageSrc=src,
this._imageWidth=ow,this._imageHeight=oh}image=src}else image===this._imageSrc&&(ow=this._imageWidth,
oh=this._imageHeight);if(image){var x=style.x||0,y=style.y||0,dw=style.width,dh=style.height,sw=style.sWidth,sh=style.sHeight,sx=style.sx||0,sy=style.sy||0,hasCrop=sw&&sh,vmlEl=this._vmlEl;
vmlEl||(vmlEl=vmlCore.doc.createElement("div"),initRootElStyle(vmlEl),
this._vmlEl=vmlEl);var m,vmlElStyle=vmlEl.style,hasRotation=!1,scaleX=1,scaleY=1;
if(this.transform&&(m=this.transform,scaleX=sqrt(m[0]*m[0]+m[1]*m[1]),
scaleY=sqrt(m[2]*m[2]+m[3]*m[3]),hasRotation=m[1]||m[2]),hasRotation){
var p0=[x,y],p1=[x+dw,y],p2=[x,y+dh],p3=[x+dw,y+dh];applyTransform(p0,p0,m),
applyTransform(p1,p1,m),applyTransform(p2,p2,m),applyTransform(p3,p3,m);
var maxX=mathMax(p0[0],p1[0],p2[0],p3[0]),maxY=mathMax(p0[1],p1[1],p2[1],p3[1]),transformFilter=[];
transformFilter.push("M11=",m[0]/scaleX,comma,"M12=",m[2]/scaleY,comma,"M21=",m[1]/scaleX,comma,"M22=",m[3]/scaleY,comma,"Dx=",round(x*scaleX+m[4]),comma,"Dy=",round(y*scaleY+m[5])),
vmlElStyle.padding="0 "+round(maxX)+"px "+round(maxY)+"px 0",
vmlElStyle.filter=imageTransformPrefix+".Matrix("+transformFilter.join("")+", SizingMethod=clip)";
}else m&&(x=x*scaleX+m[4],y=y*scaleY+m[5]),vmlElStyle.filter="",
vmlElStyle.left=round(x)+"px",vmlElStyle.top=round(y)+"px";var imageEl=this._imageEl,cropEl=this._cropEl;
imageEl||(imageEl=vmlCore.doc.createElement("div"),this._imageEl=imageEl);
var imageELStyle=imageEl.style;if(hasCrop){if(ow&&oh)imageELStyle.width=round(scaleX*ow*dw/sw)+"px",
imageELStyle.height=round(scaleY*oh*dh/sh)+"px";else{var tmpImage=new Image,self=this;
tmpImage.onload=function(){tmpImage.onload=null,ow=tmpImage.width,
oh=tmpImage.height,imageELStyle.width=round(scaleX*ow*dw/sw)+"px",
imageELStyle.height=round(scaleY*oh*dh/sh)+"px",self._imageWidth=ow,
self._imageHeight=oh,self._imageSrc=image},tmpImage.src=image;
}cropEl||(cropEl=vmlCore.doc.createElement("div"),cropEl.style.overflow="hidden",
this._cropEl=cropEl);var cropElStyle=cropEl.style;cropElStyle.width=round((dw+sx*dw/sw)*scaleX),
cropElStyle.height=round((dh+sy*dh/sh)*scaleY),cropElStyle.filter=imageTransformPrefix+".Matrix(Dx="+-sx*dw/sw*scaleX+",Dy="+-sy*dh/sh*scaleY+")",
cropEl.parentNode||vmlEl.appendChild(cropEl),imageEl.parentNode!=cropEl&&cropEl.appendChild(imageEl);
}else imageELStyle.width=round(scaleX*dw)+"px",imageELStyle.height=round(scaleY*dh)+"px",
vmlEl.appendChild(imageEl),cropEl&&cropEl.parentNode&&(vmlEl.removeChild(cropEl),
this._cropEl=null);var filterStr="",alpha=style.opacity;alpha<1&&(filterStr+=".Alpha(opacity="+round(100*alpha)+") "),
filterStr+=imageTransformPrefix+".AlphaImageLoader(src="+image+", SizingMethod=scale)",
imageELStyle.filter=filterStr,vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),
append(vmlRoot,vmlEl),null!=style.text&&this.drawRectText(vmlRoot,this.getBoundingRect());
}},ZImage.prototype.onRemove=function(vmlRoot){remove(vmlRoot,this._vmlEl),
this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(vmlRoot);
},ZImage.prototype.onAdd=function(vmlRoot){append(vmlRoot,this._vmlEl),
this.appendRectText(vmlRoot)};var textMeasureEl,DEFAULT_STYLE_NORMAL="normal",fontStyleCache={},fontStyleCacheCount=0,MAX_FONT_CACHE_SIZE=100,fontEl=document.createElement("div"),getFontStyle=function(fontString){
var fontStyle=fontStyleCache[fontString];if(!fontStyle){fontStyleCacheCount>MAX_FONT_CACHE_SIZE&&(fontStyleCacheCount=0,
fontStyleCache={});var fontFamily,style=fontEl.style;try{style.font=fontString,
fontFamily=style.fontFamily.split(",")[0]}catch(e){}fontStyle={
style:style.fontStyle||DEFAULT_STYLE_NORMAL,variant:style.fontVariant||DEFAULT_STYLE_NORMAL,
weight:style.fontWeight||DEFAULT_STYLE_NORMAL,size:0|parseFloat(style.fontSize||12),
family:fontFamily||"Microsoft YaHei"},fontStyleCache[fontString]=fontStyle,
fontStyleCacheCount++}return fontStyle};textContain.measureText=function(text,textFont){
var doc=vmlCore.doc;textMeasureEl||(textMeasureEl=doc.createElement("div"),
textMeasureEl.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",
vmlCore.doc.body.appendChild(textMeasureEl));try{textMeasureEl.style.font=textFont;
}catch(ex){}return textMeasureEl.innerHTML="",textMeasureEl.appendChild(doc.createTextNode(text)),
{width:textMeasureEl.offsetWidth}};for(var tmpRect=new BoundingRect,drawRectText=function(vmlRoot,rect,textRect,fromTextEl){
var style=this.style,text=style.text;if(null!=text&&(text+=""),
text){var x,y,align=style.textAlign,fontStyle=getFontStyle(style.textFont),font=fontStyle.style+" "+fontStyle.variant+" "+fontStyle.weight+" "+fontStyle.size+'px "'+fontStyle.family+'"',baseline=style.textBaseline,verticalAlign=style.textVerticalAlign;
textRect=textRect||textContain.getBoundingRect(text,font,align,baseline);
var m=this.transform;if(m&&!fromTextEl&&(tmpRect.copy(rect),tmpRect.applyTransform(m),
rect=tmpRect),fromTextEl)x=rect.x,y=rect.y;else{var textPosition=style.textPosition,distance=style.textDistance;
if(textPosition instanceof Array)x=rect.x+parsePercent(textPosition[0],rect.width),
y=rect.y+parsePercent(textPosition[1],rect.height),align=align||"left",
baseline=baseline||"top";else{var res=textContain.adjustTextPositionOnRect(textPosition,rect,textRect,distance);
x=res.x,y=res.y,align=align||res.textAlign,baseline=baseline||res.textBaseline;
}}if(verticalAlign){switch(verticalAlign){case"middle":y-=textRect.height/2;
break;case"bottom":y-=textRect.height}baseline="top"}var fontSize=fontStyle.size;
switch(baseline){case"hanging":case"top":y+=fontSize/1.75;break;
case"middle":break;default:y-=fontSize/2.25}switch(align){case"left":
break;case"center":x-=textRect.width/2;break;case"right":x-=textRect.width;
}var pathEl,textPathEl,skewEl,createNode=vmlCore.createNode,textVmlEl=this._textVmlEl;
textVmlEl?(skewEl=textVmlEl.firstChild,pathEl=skewEl.nextSibling,
textPathEl=pathEl.nextSibling):(textVmlEl=createNode("line"),
pathEl=createNode("path"),textPathEl=createNode("textpath"),skewEl=createNode("skew"),
textPathEl.style["v-text-align"]="left",initRootElStyle(textVmlEl),
pathEl.textpathok=!0,textPathEl.on=!0,textVmlEl.from="0 0",textVmlEl.to="1000 0.05",
append(textVmlEl,skewEl),append(textVmlEl,pathEl),append(textVmlEl,textPathEl),
this._textVmlEl=textVmlEl);var coords=[x,y],textVmlElStyle=textVmlEl.style;
m&&fromTextEl?(applyTransform(coords,coords,m),skewEl.on=!0,skewEl.matrix=m[0].toFixed(3)+comma+m[2].toFixed(3)+comma+m[1].toFixed(3)+comma+m[3].toFixed(3)+",0,0",
skewEl.offset=(round(coords[0])||0)+","+(round(coords[1])||0),
skewEl.origin="0 0",textVmlElStyle.left="0px",textVmlElStyle.top="0px"):(skewEl.on=!1,
textVmlElStyle.left=round(x)+"px",textVmlElStyle.top=round(y)+"px"),
textPathEl.string=encodeHtmlAttribute(text);try{textPathEl.style.font=font;
}catch(e){}updateFillAndStroke(textVmlEl,"fill",{fill:fromTextEl?style.fill:style.textFill,
opacity:style.opacity},this),updateFillAndStroke(textVmlEl,"stroke",{
stroke:fromTextEl?style.stroke:style.textStroke,opacity:style.opacity,
lineDash:style.lineDash},this),textVmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),
append(vmlRoot,textVmlEl)}},removeRectText=function(vmlRoot){
remove(vmlRoot,this._textVmlEl),this._textVmlEl=null},appendRectText=function(vmlRoot){
append(vmlRoot,this._textVmlEl)},list=[RectText,Displayable,ZImage,Path,Text],i=0;i<list.length;i++){
var proto=list[i].prototype;proto.drawRectText=drawRectText,proto.removeRectText=removeRectText,
proto.appendRectText=appendRectText}Text.prototype.brushVML=function(vmlRoot){
var style=this.style;null!=style.text?this.drawRectText(vmlRoot,{
x:style.x||0,y:style.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(vmlRoot);
},Text.prototype.onRemove=function(vmlRoot){this.removeRectText(vmlRoot);
},Text.prototype.onAdd=function(vmlRoot){this.appendRectText(vmlRoot);
}}},function(module,exports,__webpack_require__){if(!__webpack_require__(2).canvasSupported){
var createNode,urn="urn:schemas-microsoft-com:vml",win=window,doc=win.document,vmlInited=!1;
try{!doc.namespaces.zrvml&&doc.namespaces.add("zrvml",urn),createNode=function(tagName){
return doc.createElement("<zrvml:"+tagName+' class="zrvml">');
}}catch(e){createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="'+urn+'" class="zrvml">');
}}var initVML=function(){if(!vmlInited){vmlInited=!0;var styleSheets=doc.styleSheets;
styleSheets.length<31?doc.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):styleSheets[0].addRule(".zrvml","behavior:url(#default#VML)");
}};module.exports={doc:doc,initVML:initVML,createNode:createNode
}}},function(module,exports,__webpack_require__){function parseInt10(val){
return parseInt(val,10)}function VMLPainter(root,storage){vmlCore.initVML(),
this.root=root,this.storage=storage;var vmlViewport=document.createElement("div"),vmlRoot=document.createElement("div");
vmlViewport.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",
vmlRoot.style.cssText="position:absolute;left:0;top:0;",root.appendChild(vmlViewport),
this._vmlRoot=vmlRoot,this._vmlViewport=vmlViewport,this.resize();
var oldDelFromMap=storage.delFromMap,oldAddToMap=storage.addToMap;
storage.delFromMap=function(elId){var el=storage.get(elId);oldDelFromMap.call(storage,elId),
el&&el.onRemove&&el.onRemove(vmlRoot)},storage.addToMap=function(el){
el.onAdd&&el.onAdd(vmlRoot),oldAddToMap.call(storage,el)},this._firstPaint=!0;
}function createMethodNotSupport(method){return function(){zrLog('In IE8.0 VML mode painter not support method "'+method+'"');
}}var zrLog=__webpack_require__(40),vmlCore=__webpack_require__(393);
VMLPainter.prototype={constructor:VMLPainter,getViewportRoot:function(){
return this._vmlViewport},refresh:function(){var list=this.storage.getDisplayList(!0,!0);
this._paintList(list)},_paintList:function(list){for(var vmlRoot=this._vmlRoot,i=0;i<list.length;i++){
var el=list[i];el.invisible||el.ignore?(el.__alreadyNotVisible||el.onRemove(vmlRoot),
el.__alreadyNotVisible=!0):(el.__alreadyNotVisible&&el.onAdd(vmlRoot),
el.__alreadyNotVisible=!1,el.__dirty&&(el.beforeBrush&&el.beforeBrush(),
(el.brushVML||el.brush).call(el,vmlRoot),el.afterBrush&&el.afterBrush())),
el.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(vmlRoot),
this._firstPaint=!1)},resize:function(width,height){var width=null==width?this._getWidth():width,height=null==height?this._getHeight():height;
if(this._width!=width||this._height!=height){this._width=width,
this._height=height;var vmlViewportStyle=this._vmlViewport.style;
vmlViewportStyle.width=width+"px",vmlViewportStyle.height=height+"px";
}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null;
},getWidth:function(){return this._width},getHeight:function(){
return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport);
},_getWidth:function(){var root=this.root,stl=root.currentStyle;
return(root.clientWidth||parseInt10(stl.width))-parseInt10(stl.paddingLeft)-parseInt10(stl.paddingRight)|0;
},_getHeight:function(){var root=this.root,stl=root.currentStyle;
return(root.clientHeight||parseInt10(stl.height))-parseInt10(stl.paddingTop)-parseInt10(stl.paddingBottom)|0;
}};for(var notSupportedMethods=["getLayer","insertLayer","eachLayer","eachBuildinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],i=0;i<notSupportedMethods.length;i++){
var name=notSupportedMethods[i];VMLPainter.prototype[name]=createMethodNotSupport(name);
}module.exports=VMLPainter}])})},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5),utils_1=__webpack_require__(8),LineChartData=function(){
function LineChartData(parent){this.maxNumber=1e4,this.chart=parent,
this.inData=Object.create(null),void 0!==this.chart.options.data.maxNumber&&(this.maxNumber=this.chart.options.data.maxNumber);
}return LineChartData.prototype.addData=function(data){return void 0===this.inData[data.series]&&(this.inData[data.series]=[]),
utils_1.Utils.binaryInsert(data,this.inData[data.series],this.compare),
this.inData[data.series].length>this.maxNumber&&this.inData[data.series].shift(),
this},LineChartData.prototype.getData=function(series){if(void 0===series||void 0===this.inData[series])return console.warn(new exception_1.GException(1010,"The series name does not exist.").toString()),
[];var result=this.inData[series],xMax=this.getXMax(),xMin_1=xMax-this.chart.options.data.xAxis.range;
if(void 0!==this.chart.options.data.xAxis.range&&(result=result.filter(function(d){
return d.x>=xMin_1}),void 0!==this.chart.options.data.xAxis["default"])){
var currentN=result.length,currentRange=result[result.length-1].x-result[0].x;
currentRange=0===currentRange?1:currentRange;var range=this.chart.options.data.xAxis.range;
range=0===range?1:range;var currentM=currentN*range/currentRange;
currentM=currentM+currentN>this.maxNumber?this.maxNumber-currentN:currentM,
currentM=0===currentM?1:currentM;for(var interval=(range-currentRange)/currentM,i=currentM;i>0;--i)result.unshift({
series:series,x:xMin_1+interval*i,y:this.chart.options.data.xAxis["default"]
})}return result},LineChartData.prototype.getSeries=function(){
return Object.keys(this.inData)},LineChartData.prototype.cleanSeriesData=function(series){
if(void 0===this.inData[series])return console.warn(new exception_1.GException(1010,"The series name does not exist.").toString()),
[];var result=this.inData[series];return delete this.inData[series],
result},LineChartData.prototype.compare=function(a,b){var result=0;
return a.x===b.x?result=0:a.x<b.x?result=1:a.x>b.x&&(result=-1),
result},LineChartData.prototype.getXMax=function(){var _this=this,xmax=Number.MIN_VALUE;
return this.getSeries().forEach(function(series){var tmpMax=_this.inData[series][_this.inData[series].length-1];
xmax=xmax>tmpMax.x?xmax:tmpMax.x}),xmax},LineChartData.prototype.getXMin=function(){
var _this=this,xmin=Number.MAX_VALUE;return this.getSeries().forEach(function(series){
var tmpMin=_this.inData[series][0];xmin=xmin<tmpMin.x?xmin:tmpMin.x;
}),xmin},LineChartData}();exports.LineChartData=LineChartData;
},function(module,exports,__webpack_require__){"use strict";var exception_1=__webpack_require__(5),LineChartEvent=function(){
function LineChartEvent(parent){this.chart=parent,this.defaultHandlers={
dataZoom:function(event,chart){return"default"},legendselectchanged:function(event,chart){
return"default"}},this.handlers=Object.create(null);for(var event_1 in this.defaultHandlers)Object.prototype.hasOwnProperty.call(this.defaultHandlers,event_1)&&(this.handlers[event_1]=this.defaultHandlers[event_1]);
}return LineChartEvent.prototype.getEventsName=function(){return Object.keys(this.defaultHandlers);
},LineChartEvent.prototype.getEventHandler=function(eventName){
return this.handlers[eventName]},LineChartEvent.prototype.setEventHandler=function(eventName,callback){
try{if(!Object.prototype.hasOwnProperty.call(this.handlers,eventName))throw new exception_1.GException(2003,"Event Name is not existed in LineChart.");
this.handlers[eventName]=callback}catch(err){console.error(err.toString());
}return this},LineChartEvent}();exports.LineChartEvent=LineChartEvent;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},base_api_1=__webpack_require__(2),localization_1=__webpack_require__(7),utils_1=__webpack_require__(8),barchart_render_1=__webpack_require__(45),barchart_data_1=__webpack_require__(47),barchart_event_1=__webpack_require__(48);
console.log("Bar chart is loaded.");var BarChart=function(_super){
function BarChart(options){var _this=_super.call(this)||this;_this.options={
render:{},formatter:{}};try{_this.typeName="Bar Chart",_this.options=utils_1.Utils.extend(_this.options,options),
_this.language=new localization_1.Localization(_this.options.language),
_this.event=new barchart_event_1.BarChartEvent(_this),_this.data=new barchart_data_1.BarChartData(_this),
_this.render=new barchart_render_1.BarChartRender(_this)}catch(err){
console.error(err.toString())}return _this}return __extends(BarChart,_super),
BarChart.prototype.addData=function(data){var _this=this;return data.forEach(function(d){
_this.data.addData(d)}),this},BarChart.prototype.reloadData=function(data){
var _this=this;return this.data.getSeries().forEach(function(d){
_this.data.cleanSeriesData(d)}),this.addData(data),this},BarChart.prototype.update=function(){
return this.render.update(),this},BarChart.prototype.updateLabel=function(option){
return this.render.updateLabelSetting(option),this},BarChart}(base_api_1.BaseApi);
exports.BarChart=BarChart},function(module,exports,__webpack_require__){
"use strict";var echarts=__webpack_require__(41),utils_1=__webpack_require__(8),barchart_style_1=__webpack_require__(46),BarChartRender=function(){
function BarChartRender(parent){this.options={legend:{},tooltip:{},
xAxis:{axisLabel:{}},yAxis:{axisLabel:{}},series:[{type:"bar",
data:[{name:"name",value:[0,0]}]}]},this.chart=parent,this.style=new barchart_style_1.BarChartStyle(this.chart),
this.options=utils_1.Utils.extend(this.options,this.style.getStyleOptions()),
this.options=utils_1.Utils.extend(this.options,this.refineUserOptions(this.chart.options.render)),
this.init(),this.initFormatter(),this.initEvents(),this.updateSettings();
}return BarChartRender.prototype.init=function(){var _this=this;
return this.engine=echarts.init(this.options.container),this.timer=setTimeout(void 0),
this.timerTask=function(cb,interval){clearTimeout(_this.timer),
interval=void 0===interval?100:interval,_this.timer=setTimeout(cb,interval);
},window.addEventListener("resize",function(e){_this.timerTask(function(){
_this.engine.resize()},500)}),this},BarChartRender.prototype.initEvents=function(){
var _this=this;return this.chart.event.getEventsName().forEach(function(eventName){
_this.engine.on(eventName,function(event){_this.chart.event.getEventHandler(eventName)(event,_this.chart);
})}),this},BarChartRender.prototype.refineUserOptions=function(options){
try{}catch(err){}return void 0===options&&(options={}),options;
},BarChartRender.prototype.initFormatter=function(){var _this=this;
return void 0!==this.chart.options.formatter.xAxis?this.options.xAxis.axisLabel.formatter=this.chart.options.formatter.xAxis:this.options.xAxis.axisLabel.formatter=function(value,index){
return value},void 0!==this.chart.options.formatter.yAxis?this.options.yAxis.axisLabel.formatter=function(value,index){
return _this.chart.options.formatter.yAxis(value,index)}:this.options.yAxis.axisLabel.formatter=function(value,index){
return value},void 0!==this.chart.options.formatter.tooltip?this.options.tooltip.formatter=this.chart.options.formatter.tooltip:this.options.tooltip.formatter=function(params,ticket,callback){
var data=params.map(function(p){var builtInToolTipStyle={display:"inline-block",
"margin-right":"5px","border-radius":"10px",width:"9px",height:"9px",
"background-color":p.color},tmp=Object.keys(builtInToolTipStyle).map(function(key){
return key+":"+builtInToolTipStyle[key]}),value=p.data;value=void 0===value?"":void 0!==p.data.value?p.data.value:"-";
var result='<span style="'+tmp.join(";")+'"></span>'+p.seriesName+" : "+_this.options.yAxis.axisLabel.formatter(value,-1);
return result}),head='<span style="display: inline-block;margin: auto auto auto 12px">'+_this.options.xAxis.axisLabel.formatter(params[0].name,-1)+"</span>";
data.unshift(head);var label=data.join("<br />");return label;
},this},BarChartRender.prototype.update=function(){var _this=this;
return this.options.legend.data=this.chart.data.getSeries(),this.options.color=this.options.legend.data.map(function(data){
return _this.style.getColorByName(data)}),this.options.series=[],
this.options.xAxis.splitNumber=this.chart.data.getXMaxNumber(),
this.options.xAxis.data=this.chart.data.getXAxisData(),this.chart.data.getSeries().forEach(function(s){
var tmpSeries={name:s,type:"bar",data:_this.chart.data.getYAxisData(s).map(function(v){
return{value:v,label:{normal:_this.style.label}}})};_this.options.series.push(tmpSeries);
}),0===this.options.series.length?console.warn("Empty Data in Line Chart."):"horizontal"===this.chart.options.formatter.orient?this.engine.setOption({
color:this.options.color,legend:this.options.legend,series:this.options.series,
xAxis:this.options.yAxis,yAxis:this.options.xAxis},!1):this.engine.setOption({
color:this.options.color,legend:this.options.legend,series:this.options.series,
xAxis:this.options.xAxis,yAxis:this.options.yAxis}),this.engine.resize(),
this},BarChartRender.prototype.updateSettings=function(options){
return this.options=utils_1.Utils.extend(this.options,this.refineUserOptions(options)),
this.engine.setOption(this.options,!0),"horizontal"===this.chart.options.formatter.orient?this.engine.setOption({
xAxis:this.options.yAxis,yAxis:this.options.xAxis},!1):this.engine.setOption({
xAxis:this.options.xAxis,yAxis:this.options.yAxis},!1),this},
BarChartRender.prototype.redraw=function(){return this.clear().init(),
this},BarChartRender.prototype.clear=function(){return clearTimeout(this.timer),
this.engine.clear(),this},BarChartRender.prototype.updateLabelSetting=function(option){
return this.style.label=utils_1.Utils.extend(this.style.label,option),
this},BarChartRender}();exports.BarChartRender=BarChartRender;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},base_style_1=__webpack_require__(3),utils_1=__webpack_require__(8),BarChartStyle=function(_super){
function BarChartStyle(parent){var _this=_super.call(this)||this;
return _this.label={show:!0,position:"top"},_this.chart=parent,
_this.defaultBarChartStyle={grid:{left:50,top:20,right:30,bottom:50
},tooltip:{axisPointer:{type:"shadow",axis:"auto",animation:!0
}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{type:"dashed"
}}},xAxis:{type:"category",splitLine:{show:!1,lineStyle:{type:"dashed"
}},axisTick:{alignWithLabel:!0},minInterval:0,data:[]}},_this.defaultBarChartStyle=utils_1.Utils.extend(_this.defaultChartStyle,_this.defaultBarChartStyle),
console.log(_this.label),_this.label=utils_1.Utils.extend(_this.label,_this.chart.options.label),
_this}return __extends(BarChartStyle,_super),BarChartStyle.prototype.getStyleOptions=function(){
return this.defaultBarChartStyle},BarChartStyle}(base_style_1.BaseStyle);
exports.BarChartStyle=BarChartStyle},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5),utils_1=__webpack_require__(8),BarChartData=function(){
function BarChartData(parent){this.maxBarNumber=1e3,this.axisID=0,
this.chart=parent,this.inData=Object.create(null)}return BarChartData.prototype.addData=function(data){
return void 0===this.inData[data.series]&&(this.inData[data.series]=[]),
this.inData[data.series].some(function(d){var result=d.x===data.x;
return result})?(console.warn(new exception_1.GException(1011,'"'+data.x+'" category has already existed in data.').toString()),
this):(utils_1.Utils.binaryInsert(data,this.inData[data.series],this.compare),
this.inData[data.series].length>this.maxBarNumber&&this.inData[data.series].shift(),
this)},BarChartData.prototype.setMaxBarNumber=function(n){var _this=this;
return this.maxBarNumber=n,this.getSeries().forEach(function(series){
_this.getData(series).length>_this.maxBarNumber&&(_this.inData[series]=_this.getData(series).splice(_this.maxBarNumber*-1));
}),this},BarChartData.prototype.getSeries=function(){return Object.keys(this.inData);
},BarChartData.prototype.getYMax=function(){var _this=this,ymax=Number.MIN_VALUE;
return this.getSeries().forEach(function(series){var tmpMax=_this.inData[series][_this.inData[series].length-1];
ymax=ymax>tmpMax.y?ymax:tmpMax.y}),ymax},BarChartData.prototype.getYMin=function(){
var _this=this,ymin=Number.MAX_VALUE;return this.getSeries().forEach(function(series){
var tmpMin=_this.inData[series][0];ymin=ymin<tmpMin.y?ymin:tmpMin.y;
}),ymin},BarChartData.prototype.getXMaxNumber=function(){var _this=this,xMaxNumber=Number.MIN_VALUE;
return this.getSeries().forEach(function(series){var tmpMax=_this.inData[series].length;
xMaxNumber=xMaxNumber>tmpMax?xMaxNumber:tmpMax}),xMaxNumber<=0&&(xMaxNumber=0),
xMaxNumber},BarChartData.prototype.getXAxisData=function(){var _this=this,allData=[];
this.getSeries().forEach(function(s){var tmp=_this.getData(s).map(function(d){
return d.x});allData.push(tmp)});var majorAxis=allData[this.axisID];
return allData.forEach(function(keys,i){i!==_this.axisID&&keys.forEach(function(k){
majorAxis.indexOf(k)===-1&&majorAxis.push(k)})}),majorAxis},BarChartData.prototype.setAxisID=function(id){
return this.axisID=id,this},BarChartData.prototype.getData=function(series){
if(void 0===series||void 0===this.inData[series])return console.warn(new exception_1.GException(1011,"The series name does not exist.").toString()),
[];var result=this.inData[series];return result},BarChartData.prototype.getYAxisData=function(series){
if(void 0===series||void 0===this.inData[series])return console.warn(new exception_1.GException(1011,"The series name does not exist.").toString()),
[];var majorAxis=this.getXAxisData(),result_1=[],data_1=this.inData[series];
return majorAxis.forEach(function(axisValue){var tmp=void 0;data_1.some(function(d){
return d.x===axisValue&&(tmp=d.y,!0)}),result_1.push(tmp)}),result_1;
},BarChartData.prototype.cleanSeriesData=function(series){if(void 0===this.inData[series])return console.warn(new exception_1.GException(1011,"The series name does not exist.").toString()),
[];var result=this.inData[series];return delete this.inData[series],
result},BarChartData.prototype.compare=function(a,b){var result=0;
return a.y===b.y?result=0:a.y<b.y?result=1:a.y>b.y&&(result=-1),
result},BarChartData}();exports.BarChartData=BarChartData},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5),BarChartEvent=function(){
function BarChartEvent(parent){this.chart=parent,this.defaultHandlers={
click:function(event,chart){return"default"},eventName:function(event,chart){
return console.log("Have not implemented.",chart),"default"}},
this.handlers=Object.create(null);for(var event_1 in this.defaultHandlers)Object.prototype.hasOwnProperty.call(this.defaultHandlers,event_1)&&(this.handlers[event_1]=this.defaultHandlers[event_1]);
}return BarChartEvent.prototype.getEventsName=function(){return Object.keys(this.defaultHandlers);
},BarChartEvent.prototype.getEventHandler=function(eventName){
return this.handlers[eventName]},BarChartEvent.prototype.setEventHandler=function(eventName,callback){
try{if(!Object.prototype.hasOwnProperty.call(this.handlers,eventName))throw new exception_1.GException(2003,"Event Name is not existed in BarChart.");
this.handlers[eventName]=callback}catch(err){console.error(err.toString());
}return this},BarChartEvent}();exports.BarChartEvent=BarChartEvent;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},base_api_1=__webpack_require__(2),localization_1=__webpack_require__(7),utils_1=__webpack_require__(8),piechart_render_1=__webpack_require__(50),piechart_event_1=__webpack_require__(52);
console.log("Pie chart is loaded.");var PieChart=function(_super){
function PieChart(options){var _this=_super.call(this)||this;_this.options={
render:{},formatter:{}};try{_this.typeName="Pie Chart",_this.options=utils_1.Utils.extend(_this.options,options),
_this.language=new localization_1.Localization(_this.options.language),
_this.event=new piechart_event_1.PieChartEvent(_this),_this.render=new piechart_render_1.PieChartRender(_this),
_this.data=[]}catch(err){console.error(err.toString())}return _this;
}return __extends(PieChart,_super),PieChart.prototype.addData=function(data){
var _this=this;return Array.isArray(data)?(data.forEach(function(d){
_this.data.push(d)}),this):(console.error("data format is not acceptable."),
this)},PieChart.prototype.reloadData=function(data){return this.data=[],
this.addData(data),this},PieChart.prototype.update=function(){
return this.render.update(),this},PieChart.prototype.on=function(eventName,callback){
return this.event.setEventHandler(eventName,callback),this},PieChart;
}(base_api_1.BaseApi);exports.PieChart=PieChart},function(module,exports,__webpack_require__){
"use strict";var echarts=__webpack_require__(41),utils_1=__webpack_require__(8),piechart_style_1=__webpack_require__(51),PieChartRender=function(){
function PieChartRender(parent){this.options={},this.chart=parent,
this.style=new piechart_style_1.PieChartStyle(this.chart),this.options=utils_1.Utils.extend(this.options,this.style.getStyleOptions()),
this.options=utils_1.Utils.extend(this.options,this.refineUserOptions(this.chart.options.render)),
this.init(),this.initFormatter(),this.initEvents(),this.updateSettings();
}return PieChartRender.prototype.init=function(){var _this=this;
return this.engine=echarts.init(this.options.container),this.timer=setTimeout(void 0),
this.timerTask=function(cb,interval){clearTimeout(_this.timer),
interval=void 0===interval?100:interval,_this.timer=setTimeout(cb,interval);
},window.addEventListener("resize",function(e){_this.timerTask(function(){
_this.engine.resize()},500)}),this},PieChartRender.prototype.initEvents=function(){
var _this=this;return this.chart.event.getEventsName().forEach(function(eventName){
_this.engine.on(eventName,function(event){_this.chart.event.getEventHandler(eventName)(event,_this.chart);
})}),this},PieChartRender.prototype.initFormatter=function(){
var _this=this;return void 0!==this.chart.options.formatter.tooltip?this.options.tooltip.formatter=function(params,ticket,callback){
var a=params.seriesName,b=params.name,c=params.value,d=params.percent,color=params.color,builtInToolTipStyle={
display:"inline-block","margin-right":"5px","border-radius":"10px",
width:"9px",height:"9px","background-color":color},tmp=Object.keys(builtInToolTipStyle).map(function(key){
return key+":"+builtInToolTipStyle[key]}),content=_this.chart.options.formatter.tooltip(b,c,d,color);
return a+' <br/><span style="'+tmp.join(";")+'"></span>'+content;
}:this.options.tooltip.formatter=function(params,ticket,callback){
var a=params.seriesName,b=params.name,c=params.value,d=params.percent,color=params.color,builtInToolTipStyle={
display:"inline-block","margin-right":"5px","border-radius":"10px",
width:"9px",height:"9px","background-color":color},tmp=Object.keys(builtInToolTipStyle).map(function(key){
return key+":"+builtInToolTipStyle[key]});return a+' <br/><span style="'+tmp.join(";")+'"></span>'+b+" : "+c+" ("+d+"%)";
},this},PieChartRender.prototype.updateSettings=function(options){
return this.options=utils_1.Utils.extend(this.options,this.refineUserOptions(options)),
this.engine.setOption(this.options,!0),this},PieChartRender.prototype.refineUserOptions=function(options){
var _this=this;try{void 0!==this.chart.options.formatter.label?this.style.dataConfig.label.normal.formatter=function(params,ticket,callback){
var b=(params.seriesName,params.name),c=params.value,d=params.percent,color=params.color,content=_this.chart.options.formatter.label(b,c,d,color);
return""+content}:this.style.dataConfig.label.normal.formatter=function(params,ticket,callback){
var b=(params.seriesName,params.name),d=(params.value,params.percent);
params.color;return b+"("+d.toFixed(0)+"%)"}}catch(err){}return void 0===options&&(options={}),
options},PieChartRender.prototype.update=function(){var _this=this;
this.options.legend.data=this.chart.data.map(function(d){return d.name;
}),this.options.color=this.options.legend.data.map(function(data){
return _this.style.getColorByName(data)});var tmpData=utils_1.Utils.extend(this.style.dataConfig,{
name:this.chart.options.name||"-",type:"pie",data:this.chart.data
});return this.options.series=[tmpData],this.engine.setOption(this.options,!0),
this.engine.resize(),this},PieChartRender}();exports.PieChartRender=PieChartRender;
},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){
function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,
new __)},base_style_1=__webpack_require__(3),utils_1=__webpack_require__(8),PieChartStyle=function(_super){
function PieChartStyle(parent){var _this=_super.call(this)||this;
return _this.dataConfig={radius:"80%",center:["50%","50%"],selectedMode:"single",
minAngle:3,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,
shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{normal:{show:!0,position:"outside"
}}},_this.chart=parent,_this.defaultPieChartStyle={tooltip:{trigger:"item"
},legend:{orient:"vertical",left:"left"}},_this.defaultPieChartStyle=utils_1.Utils.extend(_this.defaultChartStyle,_this.defaultPieChartStyle),
delete _this.defaultChartStyle.yAxis,delete _this.defaultChartStyle.xAxis,
_this}return __extends(PieChartStyle,_super),PieChartStyle.prototype.getStyleOptions=function(){
return this.defaultPieChartStyle},PieChartStyle}(base_style_1.BaseStyle);
exports.PieChartStyle=PieChartStyle},function(module,exports,__webpack_require__){
"use strict";var exception_1=__webpack_require__(5),PieChartEvent=function(){
function PieChartEvent(parent){this.chart=parent,this.defaultHandlers={
eventName:function(event,chart){return console.log("Have not implemented.",chart),
"default"},pieselectchanged:function(event,chart){return"default";
}},this.handlers=Object.create(null);for(var event_1 in this.defaultHandlers)Object.prototype.hasOwnProperty.call(this.defaultHandlers,event_1)&&(this.handlers[event_1]=this.defaultHandlers[event_1]);
}return PieChartEvent.prototype.getEventsName=function(){return Object.keys(this.defaultHandlers);
},PieChartEvent.prototype.getEventHandler=function(eventName){
return this.handlers[eventName]},PieChartEvent.prototype.setEventHandler=function(eventName,callback){
try{if(!Object.prototype.hasOwnProperty.call(this.handlers,eventName))throw new exception_1.GException(2003,"Event Name is not existed in PieChart.");
this.handlers[eventName]=callback}catch(err){console.error(err.toString());
}return this},PieChartEvent}();exports.PieChartEvent=PieChartEvent;
}]);
window.GVISLicense = "HXK-7h8x4060k-0: tigergraph development";
window.GVISLicenseKey = "a728640604ef5164e06d2e58225d2f192e5a24bae68c34d3bf"+
"a1d2cff15c92be627bddb1a37d6a00ba12de63d60e6452bd06918a4e03268cd223d174babasdf";

/**
window.ZoomChartsLicense = "ZCP-6f34pz0ly-4: TigerGraph VIS";
window.ZoomChartsLicenseKey = "b758640604ef5664e06dde5825dd2f192e9a24bae98c34d3bf"+
"aed2cff15c92be627bddb1537d6a001a12de63d60e645abd06918a4e03968cd223d174babfcf5"+
"9e10823cdeb20be7a941b283d0e51e3646f6bd6f084c27f26842c88f623580fd014519e1b8e34"+
"3dfe395103040cff1822237e6875f51f06844dee4dea2aabc99f0731f69b54bed289bf4aa413a"+
"778e735d0bd95fa2611c76242d8a75d15a897dd347c391e61f1272876abcbd4d5dd06122ff22d"+
"54e8f7e3890f325f9e5a4ca66447dcdb9e091f29d7c50fe65733162f4eda8f181c1ed4f02f799"+
"f19bf9aa5d1c574a06c4c2050cec71e95cdf638efd38291106c04408ccb6d7da680ef3b06ca45";
*/
try {
  // exports.gvis = gvis;
  module.exports = exports = gvis;
} catch (err) {
  // console.error(err);
}
